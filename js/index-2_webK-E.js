var e,t,s,n,r,a,i,o,l,c,d,u,m,h,p,f,g,x,v,y,b,w,j,N,k,S,_,E,T,D,A,M,C,O,P,I,R,L,F,z,B,U,q,W,$=e=>{throw TypeError(e)},Y=(e,t,s)=>t.has(e)||$("Cannot "+s),V=(e,t,s)=>(Y(e,t,"read from private field"),s?s.call(e):t.get(e)),H=(e,t,s)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),G=(e,t,s,n)=>(Y(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),K=(e,t,s)=>(Y(e,t,"access private method"),s),Q=(e,t,s,n)=>({set _(n){G(e,t,n,s)},get _(){return V(e,t,n)}});import{j as X,c as Z,a as J,u as ee,B as te,P as se,V as ne,b as re,d as ae,e as ie,f as oe,R as le,g as ce,h as de,i as ue,S as me,O as he,C as pe,k as fe,T as ge,D as xe,l as ve,m as ye,n as be,L as we,o as je,p as Ne,q as ke,r as Se,s as _e,I as Ee,t as Te,v as De,w as Ae,x as Me,y as Ce,z as Oe,A as Pe,E as Ie,F as Re,G as Le,H as Fe,J as ze,K as Be,M as Ue,N as qe,Q as We,U as $e,W as Ye,X as Ve,Y as He,Z as Ge,_ as Ke,$ as Qe,a0 as Xe}from"./react-ui-Di4LmEBY.js";import{a as Ze,r as Je,c as et,R as tt,g as st,b as nt,d as rt}from"./react-core-BRxKgMa0.js";import{t as at,c as it,f as ot}from"./utils-D5NkSKB_.js";import{c as lt,_ as ct,A as dt,a as ut,b as mt,d as ht,e as pt}from"./supabase-D9YxOUMU.js";import{_ as ft,a as gt,b as xt,c as vt,d as yt,e as bt,f as wt,t as jt,P as Nt,g as kt,h as St,k as _t,i as Et,j as Tt,l as Dt,m as At,n as Mt,o as Ct,p as Ot,q as Pt,r as It,s as Rt,u as Lt,v as Ft,w as zt,x as Bt,y as Ut,z as qt,A as Wt,B as $t,R as Yt,L as Vt,C as Ht,X as Gt,Y as Kt,T as Qt,D as Xt,E as Zt,F as Jt,G as es,H as ts,S as ss,I as ns,J as rs,K as as,M as is,N as os}from"./charts-l1uWw2ZA.js";import{A as ls,m as cs}from"./animations-BMBnvKqr.js";import{g as ds,s as us,a as ms,z as hs,u as ps}from"./forms-Bm64xVdr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var fs=Ze;W=fs.createRoot,fs.hydrateRoot;
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gs=(...e)=>e.filter((e,t,s)=>Boolean(e)&&s.indexOf(e)===t).join(" ");
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var xs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Je.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:r="",children:a,iconNode:i,...o},l)=>Je.createElement("svg",{ref:l,...xs,width:t,height:t,stroke:e,strokeWidth:n?24*Number(s)/Number(t):s,className:gs("lucide",r),...o},[...i.map(([e,t])=>Je.createElement(e,t)),...Array.isArray(a)?a:[a]])),ys=(e,t)=>{const s=Je.forwardRef(({className:s,...n},r)=>{return Je.createElement(vs,{ref:r,iconNode:t,className:gs(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...n});var a});return s.displayName=`${e}`,s},bs=ys("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ws=ys("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),js=ys("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Ns=ys("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),ks=ys("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Ss=ys("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),_s=ys("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Es=ys("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ts=ys("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ds=ys("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),As=ys("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ms=ys("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Cs=ys("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Os=ys("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ps=ys("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Is=ys("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Rs=ys("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ls=ys("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Fs=ys("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),zs=ys("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),Bs=ys("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),Us=ys("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),qs=ys("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ws=ys("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),$s=ys("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ys=ys("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Vs=ys("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Hs=ys("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Gs=ys("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ks=ys("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),Qs=ys("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Xs=ys("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zs=ys("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Js=ys("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),en=ys("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),tn=ys("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),sn=ys("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),nn=ys("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),rn=ys("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),an=ys("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),on=ys("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ln=ys("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),cn=ys("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),dn=ys("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),un=ys("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),mn=ys("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class hn extends Je.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:X.jsx("div",{className:"max-w-md w-full",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[X.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:X.jsx(on,{className:"w-6 h-6 text-red-600"})}),X.jsx("h1",{className:"text-xl font-semibold text-center text-gray-900 mb-2",children:"Oops! Something went wrong"}),X.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry for the inconvenience. The application encountered an unexpected error."}),!1,X.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[X.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[X.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),X.jsxs("button",{onClick:()=>{this.handleReset(),window.location.href="/"},className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:[X.jsx(Us,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})})}):this.props.children}}var pn={exports:{}},fn={},gn=Je;var xn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},vn=gn.useState,yn=gn.useEffect,bn=gn.useLayoutEffect,wn=gn.useDebugValue;function jn(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!xn(e,s)}catch(n){return!0}}var Nn="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),n=vn({inst:{value:s,getSnapshot:t}}),r=n[0].inst,a=n[1];return bn(function(){r.value=s,r.getSnapshot=t,jn(r)&&a({inst:r})},[e,s,t]),yn(function(){return jn(r)&&a({inst:r}),e(function(){jn(r)&&a({inst:r})})},[e]),wn(s),s};fn.useSyncExternalStore=void 0!==gn.useSyncExternalStore?gn.useSyncExternalStore:Nn,pn.exports=fn;var kn=pn.exports;const Sn=et.useInsertionEffect,_n=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?Je.useLayoutEffect:Je.useEffect,En=Sn||_n,Tn=e=>{const t=Je.useRef([e,(...e)=>t[0](...e)]).current;return En(()=>{t[0]=e}),t[1]},Dn="pushState",An="replaceState",Mn=["popstate",Dn,An,"hashchange"],Cn=e=>{for(const t of Mn)addEventListener(t,e);return()=>{for(const t of Mn)removeEventListener(t,e)}},On=(e,t)=>kn.useSyncExternalStore(Cn,e,t),Pn=()=>location.search,In=()=>location.pathname,Rn=({ssrPath:e}={})=>On(In,e?()=>e:In),Ln=(e,{replace:t=!1,state:s=null}={})=>history[t?An:Dn](s,"",e),Fn=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[Fn]){for(const e of[Dn,An]){const t=history[e];history[e]=function(){const s=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),s}}Object.defineProperty(window,Fn,{value:!0})}const zn=(e="")=>"/"===e?"":e,Bn=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(Un(zn(e)),Un(t)),Un=e=>{try{return decodeURI(e)}catch(t){return e}},qn={hook:(e={})=>[Rn(e),Ln],searchHook:({ssrSearch:e=""}={})=>On(Pn,()=>e),parser:function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var s,n,r,a,i=[],o="",l=e.split("/");for(l[0]||l.shift();r=l.shift();)"*"===(s=r[0])?(i.push(s),o+="?"===r[1]?"(?:/(.*))?":"/(.*)"):":"===s?(n=r.indexOf("?",1),a=r.indexOf(".",1),i.push(r.substring(1,~n?n:~a?a:r.length)),o+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(o+=(~n?"?":"")+"\\"+r.substring(a))):o+="/"+r;return{keys:i,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}},base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Wn=Je.createContext(qn),$n=()=>Je.useContext(Wn),Yn={},Vn=Je.createContext(Yn),Hn=e=>{const[t,s]=e.hook(e);return[Bn(e.base,t),Tn((t,n)=>s(((e,t)=>"~"===e[0]?e.slice(1):zn(t)+e)(t,e.base),n))]},Gn=()=>Hn($n()),Kn=(e,t,s,n)=>{const{pattern:r,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),i=r.exec(s)||[],[o,...l]=i;return void 0!==o?[!0,(()=>{const e=!1!==a?Object.fromEntries(a.map((e,t)=>[e,l[t]])):i.groups;let t={...l};return e&&Object.assign(t,e),t})(),...n?[o]:[]]:[!1,null]},Qn=({children:e,...t})=>{var s,n;const r=$n(),a=t.hook?qn:r;let i=a;const[o,l]=(null==(s=t.ssrPath)?void 0:s.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=o),t.hrefs=t.hrefs??(null==(n=t.hook)?void 0:n.hrefs);let c=Je.useRef({}),d=c.current,u=d;for(let m in a){const e="base"===m?a[m]+(t[m]||""):t[m]||a[m];d===u&&e!==u[m]&&(c.current=u={...u}),u[m]=e,e!==a[m]&&(i=u)}return Je.createElement(Wn.Provider,{value:i,children:e})},Xn=({children:e,component:t},s)=>t?Je.createElement(t,{params:s}):"function"==typeof e?e(s):e,Zn=({path:e,nest:t,match:s,...n})=>{const r=$n(),[a]=Hn(r),[i,o,l]=s??Kn(r.parser,e,a,t),c=(e=>{let t=Je.useRef(Yn),s=t.current;for(const n in e)e[n]!==s[n]&&(s=e);return 0===Object.keys(e).length&&(s=e),t.current=s})({...Je.useContext(Vn),...o});if(!i)return null;const d=l?Je.createElement(Qn,{base:l},Xn(n,c)):Xn(n,c);return Je.createElement(Vn.Provider,{value:c,children:d})},Jn=Je.forwardRef((e,t)=>{const s=$n(),[n,r]=Hn(s),{to:a="",href:i=a,onClick:o,asChild:l,children:c,className:d,replace:u,state:m,...h}=e,p=Tn(t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(null==o||o(t),t.defaultPrevented||(t.preventDefault(),r(i,e)))}),f=s.hrefs("~"===i[0]?i.slice(1):s.base+i,s);return l&&Je.isValidElement(c)?Je.cloneElement(c,{onClick:p,href:f}):Je.createElement("a",{...h,onClick:p,href:f,className:(null==d?void 0:d.call)?d(n===i):d,children:c,ref:t})}),er=e=>Array.isArray(e)?e.flatMap(e=>er(e&&e.type===Je.Fragment?e.props.children:e)):[e],tr=({children:e,location:t})=>{const s=$n(),[n]=Hn(s);for(const r of er(e)){let e=0;if(Je.isValidElement(r)&&(e=Kn(s.parser,r.props.path,t||n,r.props.nest))[0])return Je.cloneElement(r,{match:e})}return null};var sr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nr="undefined"==typeof window||"Deno"in globalThis;function rr(){}function ar(e,t){return"function"==typeof e?e(t):e}function ir(e,t){const{type:s="all",exact:n,fetchStatus:r,predicate:a,queryKey:i,stale:o}=e;if(i)if(n){if(t.queryHash!==lr(i,t.options))return!1}else if(!dr(t.queryKey,i))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!r||r===t.state.fetchStatus)&&!(a&&!a(t)))}function or(e,t){const{exact:s,status:n,predicate:r,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(cr(t.options.mutationKey)!==cr(a))return!1}else if(!dr(t.options.mutationKey,a))return!1}return(!n||t.state.status===n)&&!(r&&!r(t))}function lr(e,t){return((null==t?void 0:t.queryKeyHashFn)||cr)(e)}function cr(e){return JSON.stringify(e,(e,t)=>hr(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function dr(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(s=>!dr(e[s],t[s])))}function ur(e,t){if(e===t)return e;const s=mr(e)&&mr(t);if(s||hr(e)&&hr(t)){const n=s?e:Object.keys(e),r=n.length,a=s?t:Object.keys(t),i=a.length,o=s?[]:{};let l=0;for(let c=0;c<i;c++){const r=s?c:a[c];(!s&&n.includes(r)||s)&&void 0===e[r]&&void 0===t[r]?(o[r]=void 0,l++):(o[r]=ur(e[r],t[r]),o[r]===e[r]&&void 0!==e[r]&&l++)}return r===i&&l===r?e:o}return t}function mr(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hr(e){if(!pr(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!pr(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function pr(e){return"[object Object]"===Object.prototype.toString.call(e)}function fr(e,t,s){return"function"==typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?ur(e,t):t}function gr(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function xr(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var vr=Symbol();function yr(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==vr?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var br=new(n=class extends sr{constructor(){super(),H(this,e),H(this,t),H(this,s),G(this,s,e=>{if(!nr&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){V(this,t)||this.setEventListener(V(this,s))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=V(this,t))||e.call(this),G(this,t,void 0))}setEventListener(e){var n;G(this,s,e),null==(n=V(this,t))||n.call(this),G(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){V(this,e)!==t&&(G(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof V(this,e)?V(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,n),wr=new(o=class extends sr{constructor(){super(),H(this,r,!0),H(this,a),H(this,i),G(this,i,e=>{if(!nr&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){V(this,a)||this.setEventListener(V(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=V(this,a))||e.call(this),G(this,a,void 0))}setEventListener(e){var t;G(this,i,e),null==(t=V(this,a))||t.call(this),G(this,a,e(this.setOnline.bind(this)))}setOnline(e){V(this,r)!==e&&(G(this,r,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return V(this,r)}},r=new WeakMap,a=new WeakMap,i=new WeakMap,o);function jr(e){return Math.min(1e3*2**e,3e4)}function Nr(e){return"online"!==(e??"online")||wr.isOnline()}var kr=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function Sr(e){return e instanceof kr}function _r(e){let t,s=!1,n=0,r=!1;const a=function(){let e,t;const s=new Promise((s,n)=>{e=s,t=n});function n(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},s.reject=e=>{n({status:"rejected",reason:e}),t(e)},s}(),i=()=>br.isFocused()&&("always"===e.networkMode||wr.isOnline())&&e.canRun(),o=()=>Nr(e.networkMode)&&e.canRun(),l=s=>{var n;r||(r=!0,null==(n=e.onSuccess)||n.call(e,s),null==t||t(),a.resolve(s))},c=s=>{var n;r||(r=!0,null==(n=e.onError)||n.call(e,s),null==t||t(),a.reject(s))},d=()=>new Promise(s=>{var n;t=e=>{(r||i())&&s(e)},null==(n=e.onPause)||n.call(e)}).then(()=>{var s;t=void 0,r||null==(s=e.onContinue)||s.call(e)}),u=()=>{if(r)return;let t;const a=0===n?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a;if(r)return;const o=e.retry??(nr?0:3),l=e.retryDelay??jr,m="function"==typeof l?l(n,t):l,h=!0===o||"number"==typeof o&&n<o||"function"==typeof o&&o(n,t);var p;!s&&h?(n++,null==(a=e.onFail)||a.call(e,n,t),(p=m,new Promise(e=>{setTimeout(e,p)})).then(()=>i()?void 0:d()).then(()=>{s?c(t):u()})):c(t)})};return{promise:a,cancel:t=>{var s;r||(c(new kr(t)),null==(s=e.abort)||s.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var Er=function(){let e=[],t=0,s=e=>{e()},n=e=>{e()},r=e=>setTimeout(e,0);const a=n=>{t?e.push(n):r(()=>{s(n)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&r(()=>{n(()=>{t.forEach(e=>{s(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{r=e}}}(),Tr=(c=class{constructor(){H(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&G(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(nr?1/0:3e5))}clearGcTimeout(){V(this,l)&&(clearTimeout(V(this,l)),G(this,l,void 0))}},l=new WeakMap,c),Dr=(v=class extends Tr{constructor(e){super(),H(this,g),H(this,d),H(this,u),H(this,m),H(this,h),H(this,p),H(this,f),G(this,f,!1),G(this,p,e.defaultOptions),this.setOptions(e.options),this.observers=[],G(this,m,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,G(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,n=s?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??V(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=V(this,h))?void 0:e.promise}setOptions(e){this.options={...V(this,p),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||V(this,m).remove(this)}setData(e,t){const s=fr(this.state.data,e,this.options);return K(this,g,x).call(this,{data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),s}setState(e,t){K(this,g,x).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const n=null==(t=V(this,h))?void 0:t.promise;return null==(s=V(this,h))||s.cancel(e),n?n.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,d))}isActive(){return this.observers.some(e=>{return!1!==(t=e.options.enabled,s=this,"function"==typeof t?t(s):t);var t,s})}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=V(this,h))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=V(this,h))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),V(this,m).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(V(this,h)&&(V(this,f)?V(this,h).cancel({revert:!0}):V(this,h).cancelRetry()),this.scheduleGc()),V(this,m).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||K(this,g,x).call(this,{type:"invalidate"})}fetch(e,t){var s,n,r;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(V(this,h))return V(this,h).continueRetry(),V(this,h).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(G(this,f,!0),a.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=yr(this.options,t),s={queryKey:this.queryKey,meta:this.meta};return i(s),G(this,f,!1),this.options.persister?this.options.persister(e,s,this):e(s)}};i(o),null==(s=this.options.behavior)||s.onFetch(o,this),G(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(n=o.fetchOptions)?void 0:n.meta)||K(this,g,x).call(this,{type:"fetch",meta:null==(r=o.fetchOptions)?void 0:r.meta});const l=e=>{var t,s,n,r;Sr(e)&&e.silent||K(this,g,x).call(this,{type:"error",error:e}),Sr(e)||(null==(s=(t=V(this,m).config).onError)||s.call(t,e,this),null==(r=(n=V(this,m).config).onSettled)||r.call(n,this.state.data,e,this)),this.scheduleGc()};return G(this,h,_r({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,s,n,r;if(void 0!==e){try{this.setData(e)}catch(a){return void l(a)}null==(s=(t=V(this,m).config).onSuccess)||s.call(t,e,this),null==(r=(n=V(this,m).config).onSettled)||r.call(n,e,this.state.error,this),this.scheduleGc()}else l(new Error(`${this.queryHash} data is undefined`))},onError:l,onFail:(e,t)=>{K(this,g,x).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{K(this,g,x).call(this,{type:"pause"})},onContinue:()=>{K(this,g,x).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),V(this,h).start()}},d=new WeakMap,u=new WeakMap,m=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,x=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Ar(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Sr(s)&&s.revert&&V(this,u)?{...V(this,u),fetchStatus:"idle"}:{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Er.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),V(this,m).notify({query:this,type:"updated",action:e})})},v);function Ar(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Nr(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Mr=(b=class extends sr{constructor(e={}){super(),H(this,y),this.config=e,G(this,y,new Map)}build(e,t,s){const n=t.queryKey,r=t.queryHash??lr(n,t);let a=this.get(r);return a||(a=new Dr({cache:this,queryKey:n,queryHash:r,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){V(this,y).has(e.queryHash)||(V(this,y).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=V(this,y).get(e.queryHash);t&&(e.destroy(),t===e&&V(this,y).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,y).get(e)}getAll(){return[...V(this,y).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>ir(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>ir(e,t)):t}notify(e){Er.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},y=new WeakMap,b),Cr=(_=class extends Tr{constructor(e){super(),H(this,k),H(this,w),H(this,j),H(this,N),this.mutationId=e.mutationId,G(this,j,e.mutationCache),G(this,w,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){V(this,w).includes(e)||(V(this,w).push(e),this.clearGcTimeout(),V(this,j).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){G(this,w,V(this,w).filter(t=>t!==e)),this.scheduleGc(),V(this,j).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){V(this,w).length||("pending"===this.state.status?this.scheduleGc():V(this,j).remove(this))}continue(){var e;return(null==(e=V(this,N))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,s,n,r,a,i,o,l,c,d,u,m,h,p,f,g,x,v,y,b;G(this,N,_r({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{K(this,k,S).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{K(this,k,S).call(this,{type:"pause"})},onContinue:()=>{K(this,k,S).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,j).canRun(this)}));const w="pending"===this.state.status,_=!V(this,N).canStart();try{if(!w){K(this,k,S).call(this,{type:"pending",variables:e,isPaused:_}),await(null==(s=(t=V(this,j).config).onMutate)?void 0:s.call(t,e,this));const a=await(null==(r=(n=this.options).onMutate)?void 0:r.call(n,e));a!==this.state.context&&K(this,k,S).call(this,{type:"pending",context:a,variables:e,isPaused:_})}const h=await V(this,N).start();return await(null==(i=(a=V(this,j).config).onSuccess)?void 0:i.call(a,h,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,h,e,this.state.context)),await(null==(d=(c=V(this,j).config).onSettled)?void 0:d.call(c,h,null,this.state.variables,this.state.context,this)),await(null==(m=(u=this.options).onSettled)?void 0:m.call(u,h,null,e,this.state.context)),K(this,k,S).call(this,{type:"success",data:h}),h}catch(E){try{throw await(null==(p=(h=V(this,j).config).onError)?void 0:p.call(h,E,e,this.state.context,this)),await(null==(g=(f=this.options).onError)?void 0:g.call(f,E,e,this.state.context)),await(null==(v=(x=V(this,j).config).onSettled)?void 0:v.call(x,void 0,E,this.state.variables,this.state.context,this)),await(null==(b=(y=this.options).onSettled)?void 0:b.call(y,void 0,E,e,this.state.context)),E}finally{K(this,k,S).call(this,{type:"error",error:E})}}finally{V(this,j).runNext(this)}}},w=new WeakMap,j=new WeakMap,N=new WeakMap,k=new WeakSet,S=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Er.batch(()=>{V(this,w).forEach(t=>{t.onMutationUpdate(e)}),V(this,j).notify({mutation:this,type:"updated",action:e})})},_);var Or=(D=class extends sr{constructor(e={}){super(),H(this,E),H(this,T),this.config=e,G(this,E,new Map),G(this,T,Date.now())}build(e,t,s){const n=new Cr({mutationCache:this,mutationId:++Q(this,T)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){const t=Pr(e),s=V(this,E).get(t)??[];s.push(e),V(this,E).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var t;const s=Pr(e);if(V(this,E).has(s)){const n=null==(t=V(this,E).get(s))?void 0:t.filter(t=>t!==e);n&&(0===n.length?V(this,E).delete(s):V(this,E).set(s,n))}this.notify({type:"removed",mutation:e})}canRun(e){var t;const s=null==(t=V(this,E).get(Pr(e)))?void 0:t.find(e=>"pending"===e.state.status);return!s||s===e}runNext(e){var t;const s=null==(t=V(this,E).get(Pr(e)))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==s?void 0:s.continue())??Promise.resolve()}clear(){Er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...V(this,E).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(e=>or(t,e))}findAll(e={}){return this.getAll().filter(t=>or(e,t))}notify(e){Er.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Er.batch(()=>Promise.all(e.map(e=>e.continue().catch(rr))))}},E=new WeakMap,T=new WeakMap,D);function Pr(e){var t;return(null==(t=e.options.scope)?void 0:t.id)??String(e.mutationId)}function Ir(e){return{onFetch:(t,s)=>{var n,r,a,i,o;const l=t.options,c=null==(a=null==(r=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:r.fetchMore)?void 0:a.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let m={pages:[],pageParams:[]},h=0;const p=async()=>{let s=!1;const n=yr(t.options,t.fetchOptions),r=async(e,r,a)=>{if(s)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const i={queryKey:t.queryKey,pageParam:r,direction:a?"backward":"forward",meta:t.options.meta};var o;o=i,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",()=>{s=!0}),t.signal)});const l=await n(i),{maxPages:c}=t.options,d=a?xr:gr;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,r,c)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},s=(e?Lr:Rr)(l,t);m=await r(t,s,e)}else{const t=e??d.length;do{const e=0===h?u[0]??l.initialPageParam:Rr(l,m);if(h>0&&null==e)break;m=await r(m,e),h++}while(h<t)}return m};t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,p,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=p}}}function Rr(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function Lr(e,{pages:t,pageParams:s}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,s[0],s):void 0}var Fr=(F=class{constructor(e={}){H(this,A),H(this,M),H(this,C),H(this,O),H(this,P),H(this,I),H(this,R),H(this,L),G(this,A,e.queryCache||new Mr),G(this,M,e.mutationCache||new Or),G(this,C,e.defaultOptions||{}),G(this,O,new Map),G(this,P,new Map),G(this,I,0)}mount(){Q(this,I)._++,1===V(this,I)&&(G(this,R,br.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,A).onFocus())})),G(this,L,wr.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,A).onOnline())})))}unmount(){var e,t;Q(this,I)._--,0===V(this,I)&&(null==(e=V(this,R))||e.call(this),G(this,R,void 0),null==(t=V(this,L))||t.call(this),G(this,L,void 0))}isFetching(e){return V(this,A).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,M).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=V(this,A).get(s.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{const s=this.defaultQueryOptions(e),n=V(this,A).build(this,s);return e.revalidateIfStale&&n.isStaleByTime(ar(s.staleTime,n))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return V(this,A).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),r=V(this,A).get(n.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==r?void 0:r.state.data);if(void 0!==a)return V(this,A).build(this,n).setData(a,{...s,manual:!0})}setQueriesData(e,t,s){return Er.batch(()=>V(this,A).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=V(this,A).get(s.queryHash))?void 0:t.state}removeQueries(e){const t=V(this,A);Er.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=V(this,A),n={type:"active",...e};return Er.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const s={revert:!0,...t},n=Er.batch(()=>V(this,A).findAll(e).map(e=>e.cancel(s)));return Promise.all(n).then(rr).catch(rr)}invalidateQueries(e={},t={}){return Er.batch(()=>{if(V(this,A).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const s={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e={},t){const s={...t,cancelRefetch:(null==t?void 0:t.cancelRefetch)??!0},n=Er.batch(()=>V(this,A).findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(rr)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(rr)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=V(this,A).build(this,t);return s.isStaleByTime(ar(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rr).catch(rr)}fetchInfiniteQuery(e){return e.behavior=Ir(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rr).catch(rr)}ensureInfiniteQueryData(e){return e.behavior=Ir(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return wr.isOnline()?V(this,M).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,A)}getMutationCache(){return V(this,M)}getDefaultOptions(){return V(this,C)}setDefaultOptions(e){G(this,C,e)}setQueryDefaults(e,t){V(this,O).set(cr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...V(this,O).values()];let s={};return t.forEach(t=>{dr(e,t.queryKey)&&(s={...s,...t.defaultOptions})}),s}setMutationDefaults(e,t){V(this,P).set(cr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...V(this,P).values()];let s={};return t.forEach(t=>{dr(e,t.mutationKey)&&(s={...s,...t.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...V(this,C).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=lr(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===vr&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...V(this,C).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,A).clear(),V(this,M).clear()}},A=new WeakMap,M=new WeakMap,C=new WeakMap,O=new WeakMap,P=new WeakMap,I=new WeakMap,R=new WeakMap,L=new WeakMap,F),zr=Je.createContext(void 0),Br=({client:e,children:t})=>(Je.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(zr.Provider,{value:e,children:t}));const Ur=new Fr({defaultOptions:{queries:{queryFn:(({on401:e})=>async({queryKey:t})=>{const s=await fetch(t[0],{credentials:"include"});return"returnNull"===e&&401===s.status?null:(await async function(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}(s),await s.json())})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});let qr=0;const Wr=new Map,$r=e=>{if(Wr.has(e))return;const t=setTimeout(()=>{Wr.delete(e),Gr({type:"REMOVE_TOAST",toastId:e})},1e6);Wr.set(e,t)},Yr=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?$r(s):e.toasts.forEach(e=>{$r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Vr=[];let Hr={toasts:[]};function Gr(e){Hr=Yr(Hr,e),Vr.forEach(e=>{e(Hr)})}function Kr({...e}){const t=(qr=(qr+1)%Number.MAX_SAFE_INTEGER,qr.toString()),s=()=>Gr({type:"DISMISS_TOAST",toastId:t});return Gr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>Gr({type:"UPDATE_TOAST",toast:{...e,id:t}})}}var Qr="ToastProvider",[Xr,Zr,Jr]=Z("Toast"),[ea,ta]=J("Toast",[Jr]),[sa,na]=ea(Qr),ra=e=>{const{__scopeToast:t,label:s="Notification",duration:n=5e3,swipeDirection:r="right",swipeThreshold:a=50,children:i}=e,[o,l]=Je.useState(null),[c,d]=Je.useState(0),u=Je.useRef(!1),m=Je.useRef(!1);return s.trim(),X.jsx(Xr.Provider,{scope:t,children:X.jsx(sa,{scope:t,label:s,duration:n,swipeDirection:r,swipeThreshold:a,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:Je.useCallback(()=>d(e=>e+1),[]),onToastRemove:Je.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:i})})};ra.displayName=Qr;var aa="ToastViewport",ia=["F8"],oa="toast.viewportPause",la="toast.viewportResume",ca=Je.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:n=ia,label:r="Notifications ({hotkey})",...a}=e,i=na(aa,s),o=Zr(s),l=Je.useRef(null),c=Je.useRef(null),d=Je.useRef(null),u=Je.useRef(null),m=ee(t,u,i.onViewportChange),h=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;Je.useEffect(()=>{const e=e=>{var t;0!==n.length&&n.every(t=>e[t]||e.code===t)&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),Je.useEffect(()=>{const e=l.current,t=u.current;if(p&&e&&t){const s=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(oa);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},n=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(la);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},r=t=>{!e.contains(t.relatedTarget)&&n()},a=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",s),e.addEventListener("focusout",r),e.addEventListener("pointermove",s),e.addEventListener("pointerleave",a),window.addEventListener("blur",s),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",s),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",s),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",s),window.removeEventListener("focus",n)}}},[p,i.isClosePausedRef]);const f=Je.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const s=t.ref.current,n=[s,...Ea(s)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return Je.useEffect(()=>{const e=u.current;if(e){const t=t=>{var s,n,r;const a=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!a){const a=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(s=c.current)||s.focus());const o=f({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===a);Ta(o.slice(l+1))?t.preventDefault():i?null==(n=c.current)||n.focus():null==(r=d.current)||r.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),X.jsxs(te,{ref:l,role:"region","aria-label":r.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&X.jsx(ua,{ref:c,onFocusFromOutsideViewport:()=>{Ta(f({tabbingDirection:"forwards"}))}}),X.jsx(Xr.Slot,{scope:s,children:X.jsx(se.ol,{tabIndex:-1,...a,ref:m})}),p&&X.jsx(ua,{ref:d,onFocusFromOutsideViewport:()=>{Ta(f({tabbingDirection:"backwards"}))}})]})});ca.displayName=aa;var da="ToastFocusProxy",ua=Je.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...r}=e,a=na(da,s);return X.jsx(ne,{"aria-hidden":!0,tabIndex:0,...r,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const s=e.relatedTarget;!(null==(t=a.viewport)?void 0:t.contains(s))&&n()}})});ua.displayName=da;var ma="Toast",ha=Je.forwardRef((e,t)=>{const{forceMount:s,open:n,defaultOpen:r,onOpenChange:a,...i}=e,[o=!0,l]=re({prop:n,defaultProp:r,onChange:a});return X.jsx(ae,{present:s||o,children:X.jsx(ga,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:ie(e.onPause),onResume:ie(e.onResume),onSwipeStart:oe(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(e.onSwipeMove,e=>{const{x:t,y:s}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${s}px`)}),onSwipeCancel:oe(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(e.onSwipeEnd,e=>{const{x:t,y:s}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${s}px`),l(!1)})})})});ha.displayName=ma;var[pa,fa]=ea(ma,{onClose(){}}),ga=Je.forwardRef((e,t)=>{const{__scopeToast:s,type:n="foreground",duration:r,open:a,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:h,...p}=e,f=na(ma,s),[g,x]=Je.useState(null),v=ee(t,e=>x(e)),y=Je.useRef(null),b=Je.useRef(null),w=r||f.duration,j=Je.useRef(0),N=Je.useRef(w),k=Je.useRef(0),{onToastAdd:S,onToastRemove:_}=f,E=ie(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=f.viewport)||e.focus()),i()}),T=Je.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(k.current),j.current=(new Date).getTime(),k.current=window.setTimeout(E,e))},[E]);Je.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{T(N.current),null==c||c()},s=()=>{const e=(new Date).getTime()-j.current;N.current=N.current-e,window.clearTimeout(k.current),null==l||l()};return e.addEventListener(oa,s),e.addEventListener(la,t),()=>{e.removeEventListener(oa,s),e.removeEventListener(la,t)}}},[f.viewport,w,l,c,T]),Je.useEffect(()=>{a&&!f.isClosePausedRef.current&&T(w)},[a,w,f.isClosePausedRef,T]),Je.useEffect(()=>(S(),()=>_()),[S,_]);const D=Je.useMemo(()=>g?ka(g):null,[g]);return f.viewport?X.jsxs(X.Fragment,{children:[D&&X.jsx(xa,{__scopeToast:s,role:"status","aria-live":"foreground"===n?"assertive":"polite","aria-atomic":!0,children:D}),X.jsx(pa,{scope:s,onClose:E,children:Ze.createPortal(X.jsx(Xr.ItemSlot,{scope:s,children:X.jsx(le,{asChild:!0,onEscapeKeyDown:oe(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||E(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:X.jsx(se.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":f.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:oe(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:oe(e.onPointerDown,e=>{0===e.button&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:oe(e.onPointerMove,e=>{if(!y.current)return;const t=e.clientX-y.current.x,s=e.clientY-y.current.y,n=Boolean(b.current),r=["left","right"].includes(f.swipeDirection),a=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,i=r?a(0,t):0,o=r?0:a(0,s),l="touch"===e.pointerType?10:2,c={x:i,y:o},m={originalEvent:e,delta:c};n?(b.current=c,Sa("toast.swipeMove",u,m,{discrete:!1})):_a(c,f.swipeDirection,l)?(b.current=c,Sa("toast.swipeStart",d,m,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(s)>l)&&(y.current=null)}),onPointerUp:oe(e.onPointerUp,e=>{const t=b.current,s=e.target;if(s.hasPointerCapture(e.pointerId)&&s.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){const s=e.currentTarget,n={originalEvent:e,delta:t};_a(t,f.swipeDirection,f.swipeThreshold)?Sa("toast.swipeEnd",h,n,{discrete:!0}):Sa("toast.swipeCancel",m,n,{discrete:!0}),s.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),xa=e=>{const{__scopeToast:t,children:s,...n}=e,r=na(ma,t),[a,i]=Je.useState(!1),[o,l]=Je.useState(!1);return function(e=()=>{}){const t=ie(e);de(()=>{let e=0,s=0;return e=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(s)}},[t])}(()=>i(!0)),Je.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:X.jsx(ce,{asChild:!0,children:X.jsx(ne,{...n,children:a&&X.jsxs(X.Fragment,{children:[r.label," ",s]})})})},va=Je.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return X.jsx(se.div,{...n,ref:t})});va.displayName="ToastTitle";var ya=Je.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return X.jsx(se.div,{...n,ref:t})});ya.displayName="ToastDescription";var ba=Je.forwardRef((e,t)=>{const{altText:s,...n}=e;return s.trim()?X.jsx(Na,{altText:s,asChild:!0,children:X.jsx(ja,{...n,ref:t})}):null});ba.displayName="ToastAction";var wa="ToastClose",ja=Je.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e,r=fa(wa,s);return X.jsx(Na,{asChild:!0,children:X.jsx(se.button,{type:"button",...n,ref:t,onClick:oe(e.onClick,r.onClose)})})});ja.displayName=wa;var Na=Je.forwardRef((e,t)=>{const{__scopeToast:s,altText:n,...r}=e;return X.jsx(se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...r,ref:t})});function ka(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const s=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!s)if(n){const s=e.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...ka(e))}}),t}function Sa(e,t,s,{discrete:n}){const r=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&r.addEventListener(e,t,{once:!0}),n?ue(r,a):r.dispatchEvent(a)}var _a=(e,t,s=0)=>{const n=Math.abs(e.x),r=Math.abs(e.y),a=n>r;return"left"===t||"right"===t?a&&n>s:!a&&r>s};function Ea(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Ta(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Da=ca,Aa=ha,Ma=va,Ca=ya,Oa=ba,Pa=ja;function Ia(e){var t,s,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(s=Ia(e[t]))&&(n&&(n+=" "),n+=s);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const Ra=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,La=function(){for(var e,t,s=0,n="";s<arguments.length;)(e=arguments[s++])&&(t=Ia(e))&&(n&&(n+=" "),n+=t);return n},Fa=(e,t)=>s=>{var n;if(null==(null==t?void 0:t.variants))return La(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:r,defaultVariants:a}=t,i=Object.keys(r).map(e=>{const t=null==s?void 0:s[e],n=null==a?void 0:a[e];if(null===t)return null;const i=Ra(t)||Ra(n);return r[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,n]=t;return void 0===n||(e[s]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:s,className:n,...r}=t;return Object.entries(r).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...a,...o}[t]):{...a,...o}[t]===s})?[...e,s,n]:e},[]);return La(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)};function za(...e){return at(it(e))}const Ba=ra,Ua=Je.forwardRef(({className:e,...t},s)=>X.jsx(Da,{ref:s,className:za("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Ua.displayName=Da.displayName;const qa=Fa("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Wa=Je.forwardRef(({className:e,variant:t,...s},n)=>X.jsx(Aa,{ref:n,className:za(qa({variant:t}),e),...s}));Wa.displayName=Aa.displayName;Je.forwardRef(({className:e,...t},s)=>X.jsx(Oa,{ref:s,className:za("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=Oa.displayName;const $a=Je.forwardRef(({className:e,...t},s)=>X.jsx(Pa,{ref:s,className:za("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:X.jsx(mn,{className:"h-4 w-4"})}));$a.displayName=Pa.displayName;const Ya=Je.forwardRef(({className:e,...t},s)=>X.jsx(Ma,{ref:s,className:za("text-sm font-semibold",e),...t}));Ya.displayName=Ma.displayName;const Va=Je.forwardRef(({className:e,...t},s)=>X.jsx(Ca,{ref:s,className:za("text-sm opacity-90",e),...t}));function Ha(){const{toasts:e}=function(){const[e,t]=Je.useState(Hr);return Je.useEffect(()=>(Vr.push(t),()=>{const e=Vr.indexOf(t);e>-1&&Vr.splice(e,1)}),[e]),{...e,toast:Kr,dismiss:e=>Gr({type:"DISMISS_TOAST",toastId:e})}}();return X.jsxs(Ba,{children:[e.map(function({id:e,title:t,description:s,action:n,...r}){return X.jsxs(Wa,{...r,children:[X.jsxs("div",{className:"grid gap-1",children:[t&&X.jsx(Ya,{children:t}),s&&X.jsx(Va,{children:s})]}),n,X.jsx($a,{})]},e)}),X.jsx(Ua,{})]})}function Ga(){const[e,t]=Je.useState(navigator.onLine);return Je.useEffect(()=>{const e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),e?null:X.jsx("div",{className:"fixed bottom-0 inset-x-0 z-[1000]",children:X.jsx("div",{className:"mx-auto max-w-3xl mb-4",children:X.jsx("div",{className:"mx-4 rounded-md bg-amber-50 border border-amber-200 p-3 text-amber-800 text-sm shadow-sm",children:"You are offline. Some features may not work until connection is restored."})})})}Va.displayName=Ca.displayName,Array(12).fill(0);let Ka=1;const Qa=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...n}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Ka++,a=this.toasts.find(e=>e.id===r),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),a?this.toasts=this.toasts.map(t=>t.id===r?(this.publish({...t,...e,id:r,title:s}),{...t,...e,id:r,dismissible:i,title:s}):t):this.addToast({title:s,...n,dismissible:i,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let r,a=void 0!==s;const i=n.then(async e=>{r=["resolve",e];if(tt.isValidElement(e))a=!1,this.create({id:s,type:"default",message:e});else if(Xa(e)&&!e.ok){a=!1;const n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,r="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,i="object"==typeof n&&!tt.isValidElement(n)?n:{message:n};this.create({id:s,type:"error",description:r,...i})}else if(e instanceof Error){a=!1;const n="function"==typeof t.error?await t.error(e):t.error,r="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof n&&!tt.isValidElement(n)?n:{message:n};this.create({id:s,type:"error",description:r,...i})}else if(void 0!==t.success){a=!1;const n="function"==typeof t.success?await t.success(e):t.success,r="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof n&&!tt.isValidElement(n)?n:{message:n};this.create({id:s,type:"success",description:r,...i})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){a=!1;const n="function"==typeof t.error?await t.error(e):t.error,r="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof n&&!tt.isValidElement(n)?n:{message:n};this.create({id:s,type:"error",description:r,...i})}}).finally(()=>{a&&(this.dismiss(s),s=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:o}:Object.assign(s,{unwrap:o})},this.custom=(e,t)=>{const s=(null==t?void 0:t.id)||Ka++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Xa=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Za=(e,t)=>{const s=(null==t?void 0:t.id)||Ka++;return Qa.addToast({title:e,...t,id:s}),s},Ja=Object.assign(Za,{success:Qa.success,info:Qa.info,warning:Qa.warning,error:Qa.error,custom:Qa.custom,message:Qa.message,promise:Qa.promise,dismiss:Qa.dismiss,loading:Qa.loading},{getHistory:()=>Qa.toasts,getToasts:()=>Qa.getActiveToasts()});function ei(){return Je.useEffect(()=>{const e=e=>{Ja.error("An unexpected error occurred")},t=e=>{};return window.addEventListener("unhandledrejection",e),window.addEventListener("error",t),()=>{window.removeEventListener("unhandledrejection",e),window.removeEventListener("error",t)}},[]),null}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const ti={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function si(){const e="development"===(null==ti?void 0:ti.VITE_APP_ENV),t="undefined"!=typeof window?window.location.hostname:"",s="undefined"!=typeof window?window.location.pathname:"",n="localhost"===t||"127.0.0.1"===t,r=t.endsWith("github.io")&&s.startsWith("/dev");return e||n||r?X.jsxs("div",{style:{background:"#1f2937",color:"#f9fafb",padding:"6px 12px",fontSize:12,textAlign:"center"},children:["Development build  not production. Data may be synthetic. (",(new Date).toLocaleString(),")"]}):null}const ni={common:{home:"Home",about:"About",contact:"Contact",login:"Login",logout:"Logout",signup:"Sign Up",submit:"Submit",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",loading:"Loading...",error:"An error occurred",success:"Success",welcome:"Welcome",language:"Language",close:"Close"},navigation:{home:"Home",members:"Team",projects:"Projects",events:"Events",leaderboard:"Leaderboard",battleground:"Battleground",contact:"Contact"},sidebar:{loggedInAs:"Signed in as",disclaimerTitle:"Disclaimer",disclaimerOpinions:"All opinions expressed are the personal views of the student members of the club.",disclaimerLiability:"Frankfurt School of Finance & Management GmbH assumes no responsibility or liability for any statements, content, or activities of this club."},auth:{signIn:"Sign In",signUp:"Create Account",resetPassword:"Reset Password",resetPasswordInstructions:"Enter your email to receive a password reset link",email:"Email",password:"Password",loginCta:"Join the FS Quant & Data Science community",needAccount:"Need an account?",alreadyRegistered:"Already registered?",forgotPassword:"Forgot your password?",sendResetEmail:"Send Reset Email",backToSignIn:"Back to Sign In",registrationSuccessTitle:"Registration Successful!",registrationSuccessBody:"We've sent you an email with instructions to set up your password. Please check your inbox and follow the link to complete your registration.",goToSignIn:"Go to Sign In",completeVerification:"Please complete the verification",captchaFailed:"Verification failed. Please try again.",invalidCredentials:"Invalid email or password",emailNotConfirmed:"Please verify your email before signing in",resetEmailSent:"Password reset email sent! Check your inbox.",resetEmailFailed:"Failed to send reset email",unexpectedError:"An error occurred",logoutSuccess:"You have been logged out",adminRegistrationDisabled:"Admin accounts cannot be created via the website. Please contact an administrator.",invalidDomain:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed",userExists:"An account with this email already exists. Please sign in.",registrationFailed:"Registration failed. Please try again.",welcomeBack:"Welcome back!",loading:"Loading...",setupNote:"After registration, you'll receive an email to set up your password.",rateLimited:"Too many attempts. Please wait a moment and try again.",networkError:"Network error. Please check your connection and try again.",sessionExpired:"Your session has expired. Please sign in again.",weakPassword:"Password is too weak. Please choose a stronger one."},leaderboard:{cumulativePnl:"Cumulative P&L %",title:"Leaderboard",hti:"Hack the Interview",adx:"Axe the DAX",tabHti:"HTI",tabAdx:"ADX",signIn:"Sign In",signUp:"Sign Up",email:"Email",password:"Password",loginCta:"Join the FS Quant & Data Science community",needAccount:"Need an account?",alreadyRegistered:"Already registered?",emailVerificationSent:"Verification email sent! Check your inbox.",invalidCredentials:"Invalid email or password",locked:"Sign in to participate",leaderboard:"Leaderboard",rank:"Rank",player:"Player",score:"Score",points:"points",questionNumber:"Q",countdown:"Unlocks in",correctAnswer:"Correct! Well done!",wrongAnswer:"Incorrect. Try again next time!",alreadyAnswered:"You've already answered this question",questionLocked:"This question is not available yet",portfolio:"Portfolio",myEquity:"Equity",positions:"Positions",orderSuccess:"Order placed successfully!",orderFailed:"Failed to place order",disclaimer:"This is a simulated trading environment for educational purposes only.",optionsNote:"Options data is generated for demonstration. Real trading involves significant risk.",lastUpdated:"Last updated",seasonInfo:"Season Information"},admin:{title:"Admin Panel",questions:"Questions",tickers:"Tickers",revenue:"Revenue Windows",badges:"Badges",seasons:"Seasons",createQuestion:"Create Question",editQuestion:"Edit Question",questionText:"Question Text",questionType:"Question Type",releaseTime:"Release Time",closeTime:"Close Time",isActive:"Active",addTicker:"Add Ticker",symbol:"Symbol",companyName:"Company Name",band:"Band",top5:"Top 5",bottom5:"Bottom 5"},events:{types:{workshop:"Workshop",speaker:"Speaker",competition:"Competition",meetup:"Meetup",conference:"Conference",exclusive:"Exclusive"},title:"Events",calendar:"Event Calendar",upcoming:"Upcoming Events",past:"Past Events",pastCollaborations:"Past Successful Collaborations",pastCollaborationsDescription:"We've partnered with leading companies to provide real-world projects, mentorship, and career opportunities for our members.",newEventsComingSoon:"* New events will be announced soon",register:"Register",addToCalendar:"Add to Calendar",location:"Location",date:"Date",time:"Time",organizer:"Organizer",capacity:"Capacity",noEvents:"No upcoming events at the moment"},members:{title:"Team",subtitle:"Meet the team behind FS Quant & Data Science",facultyAdvisorsTitle:"Faculty Advisors",orgaTeamTitle:"Orga Team",position:"Position",department:"Department",expertise:"Expertise",email:"Email",linkedin:"LinkedIn"},projects:{title:"Projects",current:"Current Projects",completed:"Completed Projects",viewDetails:"View Details",technologies:"Technologies",team:"Team",duration:"Duration",status:"Status"},footer:{about:"About Us",quickLinks:"Quick Links",connect:"Connect",copyright:" 2025 FS Quant & Data Science. All rights reserved.",privacy:"Privacy Policy",terms:"Terms of Service"},home:{heroSubtitle:"Welcome!",heroDescription:"Join us in exploring the intersection of quantitative finance, data science, and cutting-edge technology.",cta:{applyNow:"Apply Now",learnMore:"Learn More"},lab:{title:"Our Applied Quant Lab",description:"Our Quant Lab is a hands-on studio where students build models, test trading ideas, and ship data products. We combine finance, statistics, and software engineering in iterative sprints with peer review, reproducible workflows, and a Demo Day finale."},features:{projectSprint:{title:"Semester-Long Project Sprint",description:"Small student groups tackle real-world data or quant problems with a fixed timeline that mirrors industry agile cycles."},biweeklyMeetings:{title:"Bi-Weekly Online Meetings",description:"Regular initiative-wide meetings on Teams for collaboration, resource sharing, and community building through dedicated channels."},demoDay:{title:"Demo Day Finale",description:"Teams pitch to an industry jury. Top project wins prizes, coffee chats with jurors, and referrals for internships/jobs."}},metrics:{activeMembers:"Active Members",projectsCompleted:"Projects Completed",eventsHosted:"Events Hosted",industryPartners:"Industry Partners"}},contact:{title:"Get in Touch",subtitle:"Have questions or want to join our initiative? We'd love to hear from you!",joinTitle:"Join Our Initiative",joinDescription:"Be part of Frankfurt School's premier quant and data science community",form:{name:"Name",email:"Email",message:"Message",submit:"Submit"},success:"Thanks for reaching out  we will get back to you soon!"},projectsTitle:"Projects",projectsSubtitle:"Explore our portfolio of data science and quantitative finance projects",eventsTitle:"Events",eventsSubtitle:"Stay tuned for upcoming workshops, competitions, and networking events with our industry partners.",noUpcomingEvents:"No upcoming events at the moment. Check back soon!",battleground:{trading:"Trading",predictions:"Predictions",portfolio:"Portfolio",riskWarningTitle:"Not investment advice  risk disclosure",riskWarningText:"The content and simulations on this page are for educational purposes only and do not constitute investment, legal, accounting, or tax advice, nor a recommendation or solicitation to buy or sell any security or financial instrument. Markets involve risk; options and derivatives trading is highly speculative and can result in the loss of all invested capital. Past performance is not indicative of future results. Data, prices, and model outputs may be delayed, simulated, or inaccurate; no warranty is made as to completeness, timeliness, or accuracy. This student initiative is not a broker, dealer, or investment adviser. Always do your own research and consider consulting a qualified financial adviser before making investment decisions."}},ri={common:{home:"Startseite",about:"ber uns",contact:"Kontakt",login:"Anmelden",logout:"Abmelden",signup:"Registrieren",submit:"Absenden",cancel:"Abbrechen",save:"Speichern",delete:"Lschen",edit:"Bearbeiten",loading:"Ldt...",error:"Ein Fehler ist aufgetreten",success:"Erfolgreich",welcome:"Willkommen",language:"Sprache",close:"Schlieen"},navigation:{home:"Startseite",members:"Team",projects:"Projekte",events:"Veranstaltungen",leaderboard:"Bestenliste",battleground:"Battleground",contact:"Kontakt"},sidebar:{loggedInAs:"Angemeldet als",disclaimerTitle:"Haftungsausschluss",disclaimerOpinions:"Alle geuerten Meinungen sind ausschlielich persnliche Ansichten der studentischen Mitglieder des Clubs.",disclaimerLiability:"Die Frankfurt School of Finance & Management GmbH bernimmt keinerlei Verantwortung oder Haftung fr uerungen, Inhalte oder Aktivitten dieses Clubs; eine Zurechnung zur Hochschule findet nicht statt. Haftungsansprche sind  soweit gesetzlich zulssig  ausgeschlossen."},auth:{signIn:"Anmelden",signUp:"Registrieren",resetPassword:"Passwort zurcksetzen",resetPasswordInstructions:"Gib deine E-Mail-Adresse ein, um einen Link zum Zurcksetzen des Passworts zu erhalten",email:"E-Mail",password:"Passwort",loginCta:"Tritt der FS Quant & Data Science Community bei",needAccount:"Noch kein Konto?",alreadyRegistered:"Bereits registriert?",forgotPassword:"Passwort vergessen?",sendResetEmail:"E-Mail zum Zurcksetzen senden",backToSignIn:"Zurck zur Anmeldung",registrationSuccessTitle:"Registrierung erfolgreich!",registrationSuccessBody:"Wir haben dir eine E-Mail mit Anweisungen zur Einrichtung deines Passworts gesendet. Bitte prfe deinen Posteingang und folge dem Link, um die Registrierung abzuschlieen.",goToSignIn:"Zur Anmeldung",completeVerification:"Bitte Verifizierung abschlieen",captchaFailed:"Verifizierung fehlgeschlagen. Bitte erneut versuchen.",invalidCredentials:"Ungltige E-Mail oder Passwort",emailNotConfirmed:"Bitte besttige deine E-Mail, bevor du dich anmeldest",resetEmailSent:"E-Mail zum Zurcksetzen des Passworts gesendet! Bitte Posteingang prfen.",resetEmailFailed:"Senden der E-Mail zum Zurcksetzen fehlgeschlagen",unexpectedError:"Ein Fehler ist aufgetreten",logoutSuccess:"Du wurdest abgemeldet",adminRegistrationDisabled:"Admin-Konten knnen nicht ber die Website erstellt werden. Bitte kontaktiere einen Administrator.",invalidDomain:"Nur Frankfurt School E-Mail-Adressen (@fs-students.de oder @fs.de) sind erlaubt",userExists:"Ein Konto mit dieser E-Mail existiert bereits. Bitte melde dich an.",registrationFailed:"Registrierung fehlgeschlagen. Bitte versuche es erneut.",welcomeBack:"Willkommen zurck!",loading:"Ldt...",setupNote:"Nach der Registrierung erhltst du eine E-Mail zur Einrichtung deines Passworts.",rateLimited:"Zu viele Versuche. Bitte warte einen Moment und versuche es erneut.",networkError:"Netzwerkfehler. Bitte berprfe deine Verbindung und versuche es erneut.",sessionExpired:"Deine Sitzung ist abgelaufen. Bitte melde dich erneut an.",weakPassword:"Passwort ist zu schwach. Bitte whle ein strkeres Passwort."},leaderboard:{cumulativePnl:"Kumulierte P&L %",title:"Bestenliste",hti:"Hack the Interview",adx:"Axe the DAX",tabHti:"HTI",tabAdx:"ADX",signIn:"Anmelden",signUp:"Registrieren",email:"E-Mail",password:"Passwort",loginCta:"Tritt der FS Quant & Data Science Community bei",needAccount:"Noch kein Konto?",alreadyRegistered:"Bereits registriert?",emailVerificationSent:"Besttigungs-E-Mail gesendet! Prfe deinen Posteingang.",invalidCredentials:"Ungltige E-Mail oder Passwort",locked:"Zum Teilnehmen anmelden",leaderboard:"Bestenliste",rank:"Rang",player:"Spieler",score:"Punkte",points:"Punkte",questionNumber:"F",countdown:"Verfgbar in",correctAnswer:"Richtig! Gut gemacht!",wrongAnswer:"Falsch. Versuche es nchstes Mal wieder!",alreadyAnswered:"Du hast diese Frage bereits beantwortet",questionLocked:"Diese Frage ist noch nicht verfgbar",portfolio:"Portfolio",myEquity:"Kapital",positions:"Positionen",orderSuccess:"Order erfolgreich platziert!",orderFailed:"Order konnte nicht platziert werden",disclaimer:"Dies ist eine simulierte Handelsumgebung nur fr Bildungszwecke.",optionsNote:"Optionsdaten werden zu Demonstrationszwecken generiert. Echter Handel birgt erhebliche Risiken.",lastUpdated:"Zuletzt aktualisiert",seasonInfo:"Saison-Information"},admin:{title:"Admin-Bereich",questions:"Fragen",tickers:"Ticker",revenue:"Umsatzfenster",badges:"Abzeichen",seasons:"Saisons",createQuestion:"Frage erstellen",editQuestion:"Frage bearbeiten",questionText:"Fragetext",questionType:"Fragetyp",releaseTime:"Freigabezeit",closeTime:"Schliezeit",isActive:"Aktiv",addTicker:"Ticker hinzufgen",symbol:"Symbol",companyName:"Firmenname",band:"Band",top5:"Top 5",bottom5:"Bottom 5"},events:{types:{workshop:"Workshop",speaker:"Vortrag",competition:"Wettbewerb",meetup:"Treffen",conference:"Konferenz",exclusive:"Exklusiv"},title:"Veranstaltungen",calendar:"Veranstaltungskalender",upcoming:"Kommende Veranstaltungen",past:"Vergangene Veranstaltungen",pastCollaborations:"Vergangene erfolgreiche Kooperationen",pastCollaborationsDescription:"Wir haben mit fhrenden Unternehmen zusammengearbeitet, um unseren Mitgliedern reale Projekte, Mentoring und Karrieremglichkeiten zu bieten.",newEventsComingSoon:"* Neue Veranstaltungen werden bald bekannt gegeben",register:"Anmelden",addToCalendar:"Zum Kalender hinzufgen",location:"Ort",date:"Datum",time:"Zeit",organizer:"Veranstalter",capacity:"Kapazitt",noEvents:"Derzeit keine bevorstehenden Veranstaltungen"},members:{title:"Team",subtitle:"Lerne das Team hinter FS Quant & Data Science kennen",facultyAdvisorsTitle:"Fakulttsberater",orgaTeamTitle:"Orga Team",position:"Position",department:"Abteilung",expertise:"Expertise",email:"E-Mail",linkedin:"LinkedIn"},projects:{title:"Projekte",current:"Aktuelle Projekte",completed:"Abgeschlossene Projekte",viewDetails:"Details anzeigen",technologies:"Technologien",team:"Team",duration:"Dauer",status:"Status"},footer:{about:"ber uns",quickLinks:"Schnelllinks",connect:"Verbinden",copyright:" 2025 FS Quant & Data Science. Alle Rechte vorbehalten.",privacy:"Datenschutz",terms:"Nutzungsbedingungen"},home:{heroSubtitle:"Willkommen!",heroDescription:"Entdecke mit uns die Schnittstelle zwischen Quantitative Finance, Data Science und modernster Technologie.",cta:{applyNow:"Jetzt bewerben",learnMore:"Mehr erfahren"},lab:{title:"Unser Applied Quant Lab",description:"Unser Quant Lab ist ein praxisnahes Studio, in dem Studierende Modelle bauen, Handelsideen testen und Datenprodukte entwickeln. Wir verbinden Finance, Statistik und Software Engineering in iterativen Sprints  mit Peer Reviews, reproduzierbaren Workflows und einem Demo-Day-Finale."},features:{projectSprint:{title:"Semesterlanger Projektsprint",description:"Kleine Studierendenteams bearbeiten reale Daten- oder Quant-Probleme mit einem festen Zeitplan, der agilen Zyklen in der Industrie entspricht."},biweeklyMeetings:{title:"Zweiwchentliche Online-Meetings",description:"Regelmige initiativweite Meetings auf Teams fr Zusammenarbeit, Ressourcenaustausch und Community-Aufbau in dedizierten Kanlen."},demoDay:{title:"Demo Day Finale",description:"Teams pitchen vor einer Industrie-Jury. Das Top-Projekt gewinnt Preise, Coffee Chats mit Juroren und Empfehlungen fr Praktika/Jobs."}},metrics:{activeMembers:"Aktive Mitglieder",projectsCompleted:"Abgeschlossene Projekte",eventsHosted:"Veranstaltungen",industryPartners:"Industriepartner"}},contact:{title:"Kontakt aufnehmen",subtitle:"Hast du Fragen oder mchtest unserer Initiative beitreten? Wir freuen uns von dir zu hren!",joinTitle:"Unserer Initiative beitreten",joinDescription:"Werde Teil der fhrenden Quant- und Data-Science-Community der Frankfurt School",form:{name:"Name",email:"E-Mail",message:"Nachricht",submit:"Absenden"},success:"Danke fr deine Nachricht  wir melden uns bald bei dir!"},projectsTitle:"Projekte",projectsSubtitle:"Entdecke unser Portfolio an Data Science und Quantitative Finance Projekten",eventsTitle:"Veranstaltungen",eventsSubtitle:"Bleibe auf dem Laufenden ber kommende Workshops, Wettbewerbe und Networking-Events mit unseren Industriepartnern.",noUpcomingEvents:"Momentan keine bevorstehenden Veranstaltungen. Schau bald wieder vorbei!",battleground:{trading:"Handel",predictions:"Prognosen",portfolio:"Portfolio",riskWarningTitle:"Keine Anlageberatung  Risikohinweis",riskWarningText:"Die Inhalte und Simulationen auf dieser Seite dienen ausschlielich Bildungszwecken und stellen keine Anlageberatung, Rechts-, Steuer- oder sonstige Beratung dar; sie sind weder Empfehlung noch Aufforderung zum Erwerb oder Verkauf von Finanzinstrumenten. Mrkte beinhalten Risiken; der Handel mit Optionen und Derivaten ist hochspekulativ und kann zum vollstndigen Verlust des eingesetzten Kapitals fhren. Vergangene Wertentwicklungen sind kein verlsslicher Indikator fr zuknftige Ergebnisse. Daten, Preise und Modelloutputs knnen verzgert, simuliert oder ungenau sein; es wird keine Gewhr fr Vollstndigkeit, Aktualitt oder Richtigkeit bernommen. Diese studentische Initiative ist weder Broker/Dealer noch Anlageberater. Fhren Sie stets eigene Recherchen durch und ziehen Sie vor Anlageentscheidungen eine qualifizierte Beratung in Betracht."}},ai="https://mskpxebbscvisxcceiwx.supabase.co",ii=ai,oi=lt(ai,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}},db:{schema:"public"}}),li=Object.freeze(Object.defineProperty({__proto__:null,SUPABASE_URL:ii,supabase:oi},Symbol.toStringTag,{value:"Module"})),ci={en:ni,de:ri},di=Je.createContext(void 0);function ui({children:e}){const[t,s]=Je.useState("en");Je.useEffect(()=>{const e=localStorage.getItem("lang");if(!e||"en"!==e&&"de"!==e){const e=navigator.language.startsWith("de")?"de":"en";s(e),localStorage.setItem("lang",e)}else s(e)},[]);return X.jsx(di.Provider,{value:{language:t,setLanguage:async e=>{s(e),localStorage.setItem("lang",e);const{data:{user:t}}=await oi.auth.getUser();t&&await oi.from("user_profiles").update({language:e}).eq("user_id",t.id)},t:(e,s)=>{try{let n;if(e.includes(".")){const s=e.split(".");n=ci[t];for(const t of s){if(!n||"object"!=typeof n||!(t in n)){n=ci.en;for(const t of s){if(!n||"object"!=typeof n||!(t in n))return e;n=n[t]}break}n=n[t]}}else n=ci[t][e]||ci.en[e];if("string"!=typeof n)return e;if(s&&n){let e=n;return Object.entries(s).forEach(([t,s])=>{e=e.replace(new RegExp(`\\{${t}\\}`,"g"),String(s))}),e}return n||e}catch(n){return e}}},children:e})}function mi(){const e=Je.useContext(di);if(!e)throw new Error("useI18n must be used within an I18nProvider");return e}const hi=Je.createContext(void 0);function pi({children:e}){const[t,s]=Je.useState(null),[n,r]=Je.useState(null),[a,i]=Je.useState(!1),[o,l]=Je.useState(!1),[c,d]=Je.useState(!0),u=Je.useRef(!1),m=async e=>{try{const{data:t}=await oi.from("user_profiles").select("is_admin, is_event").eq("user_id",e).single();return i((null==t?void 0:t.is_admin)||!1),l(!!(null==t?void 0:t.is_event)),(null==t?void 0:t.is_admin)||!1}catch(t){return i(!1),l(!1),!1}},h=async()=>{try{const{data:{session:e},error:t}=await oi.auth.refreshSession();if(t)throw t;e&&(r(e),s(e.user),await m(e.user.id),localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:e,expiresAt:e.expires_at})))}catch(e){}};Je.useEffect(()=>{let e=!0,t=!1;let a;(async()=>{if(!t){t=!0;try{const{data:{session:t}}=await oi.auth.getSession();t&&e?(r(t),s(t.user),await m(t.user.id)):e&&(r(null),s(null),i(!1),l(!1),localStorage.removeItem("supabase.auth.token"))}catch(n){e&&(r(null),s(null),i(!1))}finally{e&&d(!1)}}})();const{data:o}=oi.auth.onAuthStateChange(async(t,o)=>{e&&(clearTimeout(a),a=setTimeout(async()=>{e&&(o?(null==n?void 0:n.access_token)!==o.access_token&&(r(o),s(o.user),await m(o.user.id)):"SIGNED_OUT"===t&&(r(null),s(null),i(!1),l(!1),localStorage.removeItem("supabase.auth.token"),u.current?(Ja.success("You have been logged out"),u.current=!1):Ja.error("Your session has expired. Please sign in again.")))},100))}),c=setInterval(()=>{if(n&&e){new Date(n.expires_at||0).getTime()-(new Date).getTime()<3e5&&h()}},6e4);return()=>{e=!1,clearTimeout(a),null==o||o.subscription.unsubscribe(),clearInterval(c)}},[]);const p={user:t,session:n,isAdmin:a,isEventUser:o,loading:c,signIn:async(e,t)=>{try{const{data:s,error:n}=await oi.auth.signInWithPassword({email:e,password:t});if(n)throw n;return s.session&&localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:s.session,expiresAt:s.session.expires_at})),{error:null}}catch(s){return{error:s}}},signUp:async(e,t,s)=>{try{const{data:n,error:r}=await oi.auth.signUp({email:e,password:t,options:{data:{username:s||e.split("@")[0]}}});if(r)throw r;return{error:null}}catch(n){return{error:n}}},signOut:async()=>{try{u.current=!0,s(null),r(null),i(!1),l(!1),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-mskpxebbscvisxcceiwx-auth-token"),localStorage.removeItem("authMode"),localStorage.removeItem("confetti_shown"),sessionStorage.clear();const{error:e}=await oi.auth.signOut();setTimeout(()=>{window.location.href="/"},100)}catch(e){Ja.error("Error signing out"),s(null),r(null),i(!1),l(!1)}},refreshSession:h};return X.jsx(hi.Provider,{value:p,children:e})}function fi(){const e=Je.useContext(hi);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const gi=({features:e})=>X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((e,t)=>X.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200 hover:shadow-xl transition-shadow",children:[X.jsx("div",{className:`w-12 h-12 ${e.iconBgColor} rounded-full flex items-center justify-center mb-4`,children:X.jsx("i",{className:`fas ${e.icon} ${e.iconTextColor} text-xl`})}),X.jsx("h3",{className:"font-inter text-xl font-semibold mb-2 text-gray-800",children:e.title}),X.jsx("p",{className:"text-gray-600",children:e.description})]},t))}),xi="https://forms.gle/vkD7AJVRwg5TqQyo8";function vi(){const e=[{src:"/ADX_intro.png",title:"ADX Introduction",caption:"Overview of the Axe the DAX sandbox platform"},{src:"/AXE_options_catalog.png",title:"Options Catalogue",caption:"Explore strikes, expiries, and pricing"},{src:"/ADX_active_positions.png",title:"Active Positions",caption:"Manage open positions and risk at a glance"},{src:"/ADX_portfolio_perf.png",title:"Portfolio Performance",caption:"Track P&L and performance over time"},{src:"/HTI_intro.png",title:"HTI Overview",caption:"Hack the Interview: weekly questions, timed and scored"}],[t,s]=Je.useState(0);Je.useEffect(()=>{const t=setInterval(()=>s(t=>(t+1)%e.length),9e3);return()=>clearInterval(t)},[]);const n=Je.useCallback(()=>s(t=>(t-1+e.length)%e.length),[]),r=Je.useCallback(()=>s(t=>(t+1)%e.length),[]),a=Je.useCallback(e=>{"ArrowLeft"===e.key&&n(),"ArrowRight"===e.key&&r()},[n,r]);return X.jsxs("div",{className:"relative w-full max-w-6xl mx-auto overflow-hidden rounded-2xl border border-gray-200/60 shadow-xl bg-white max-h-[720px] md:max-h-[800px]",style:{aspectRatio:16/9},tabIndex:0,role:"region","aria-label":"Image carousel",onKeyDown:a,children:[e.map((e,s)=>X.jsxs("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity duration-700 "+(s===t?"opacity-100":"opacity-0"),children:[X.jsx("img",{src:e.src,alt:e.title,className:"max-w-full max-h-full select-none",draggable:!1,decoding:"async",loading:0===s?"eager":"lazy",style:{imageRendering:"auto"}}),X.jsxs("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 max-w-[80%] rounded-xl px-3 py-2 sm:px-4 sm:py-2.5 backdrop-blur-md bg-gradient-to-r from-gray-900/80 to-gray-800/70 text-white shadow-lg",children:[X.jsx("div",{className:"text-xs sm:text-sm font-semibold leading-tight",children:e.title}),X.jsx("div",{className:"hidden sm:block text-xs opacity-90 leading-tight mt-0.5",children:e.caption})]})]},e.src+s)),X.jsx("button",{type:"button",onClick:n,"aria-label":"Previous slide",className:"absolute left-3 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/90 hover:bg-white shadow-lg border border-gray-200/60 transition-all hover:scale-105",children:X.jsx(Ds,{className:"w-5 h-5 text-gray-700"})}),X.jsx("button",{type:"button",onClick:r,"aria-label":"Next slide",className:"absolute right-3 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/90 hover:bg-white shadow-lg border border-gray-200/60 transition-all hover:scale-105",children:X.jsx(As,{className:"w-5 h-5 text-gray-700"})}),X.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2.5",children:e.map((e,n)=>X.jsx("button",{onClick:()=>s(n),"aria-label":`Go to slide ${n+1}`,className:"w-2.5 h-2.5 rounded-full transition-all duration-300 "+(n===t?"bg-blue-600 scale-125":"bg-white/80 border border-gray-300 hover:bg-white")},n))})]})}const yi=()=>{const{t:e}=mi(),t=[{icon:"fa-project-diagram",iconBgColor:"bg-gradient-to-br from-blue-500 to-blue-600",iconTextColor:"text-white",title:e("home.features.projectSprint.title"),description:e("home.features.projectSprint.description")},{icon:"fa-users",iconBgColor:"bg-gradient-to-br from-indigo-500 to-indigo-600",iconTextColor:"text-white",title:e("home.features.biweeklyMeetings.title"),description:e("home.features.biweeklyMeetings.description")},{icon:"fa-trophy",iconBgColor:"bg-gradient-to-br from-amber-500 to-amber-600",iconTextColor:"text-white",title:e("home.features.demoDay.title"),description:e("home.features.demoDay.description")}],s=[{value:"50+",label:e("home.metrics.activeMembers"),icon:dn},{value:"12+",label:e("home.metrics.projectsCompleted"),icon:Ks},{value:"20+",label:e("home.metrics.eventsHosted"),icon:Js},{value:"8+",label:e("home.metrics.industryPartners"),icon:sn}];return X.jsxs("section",{id:"home",className:"min-h-screen bg-gradient-to-b from-white to-gray-50/50",children:[X.jsxs("div",{className:"relative overflow-hidden",children:[X.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-indigo-50/60"}),X.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-blue-100/30 to-transparent"}),X.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200/20 rounded-full blur-3xl"}),X.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-200/20 rounded-full blur-3xl"}),X.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-20 sm:px-6 lg:px-8 relative z-10",children:[X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[X.jsxs("div",{className:"space-y-8",children:[X.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100/80 border border-blue-200/60 text-blue-700 text-sm font-medium",children:[X.jsx(Js,{className:"w-4 h-4"}),X.jsx("span",{children:"Frankfurt School Student Initiative"})]}),X.jsx("h1",{className:"font-inter text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight",children:e("home.heroSubtitle")}),X.jsx("p",{className:"text-lg md:text-xl text-gray-600 leading-relaxed max-w-xl",children:e("home.heroDescription")}),X.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[X.jsxs("a",{href:xi,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 transform hover:-translate-y-0.5",children:["Apply Now",X.jsx(ws,{className:"w-5 h-5"})]}),X.jsx(Jn,{href:"/battleground",className:"inline-flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl bg-white text-gray-700 font-semibold border-2 border-gray-200 hover:border-blue-300 hover:text-blue-600 transition-all duration-300",children:"Explore Battleground"})]})]}),X.jsx("div",{className:"hidden lg:block",children:X.jsxs("div",{className:"relative",children:[X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 rounded-3xl blur-2xl transform rotate-3"}),X.jsx("div",{className:"relative h-96 w-full rounded-2xl bg-white p-8 shadow-2xl border border-gray-100",children:X.jsx("div",{className:"flex items-center justify-center h-full",children:X.jsx("img",{src:"/fsqds-hero.png",alt:"FS Quant & Data Science Initiative",className:"max-h-full max-w-full object-contain drop-shadow-lg"})})})]})})]}),X.jsx("div",{className:"mt-20 grid grid-cols-2 md:grid-cols-4 gap-6",children:s.map((e,t)=>X.jsxs("div",{className:"relative group",children:[X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),X.jsxs("div",{className:"relative text-center p-6 rounded-2xl bg-white/60 backdrop-blur-sm border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-300",children:[X.jsx(e.icon,{className:"w-6 h-6 mx-auto mb-3 text-blue-600"}),X.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-1",children:e.value}),X.jsx("div",{className:"text-sm text-gray-600 font-medium",children:e.label})]})]},t))})]})]}),X.jsx("div",{className:"bg-white border-y border-gray-100",children:X.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12",children:[X.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-8 sm:p-10",children:[X.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl"}),X.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl"}),X.jsxs("div",{className:"relative flex flex-col md:flex-row items-center justify-between gap-6",children:[X.jsxs("div",{className:"text-center md:text-left",children:[X.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-3",children:[X.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white",children:"FS QDS Battleground is LIVE!"}),X.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-500/20 border border-red-400/30 text-xs font-bold text-red-400",children:[X.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse"}),"LIVE"]})]}),X.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Trade options, compete on leaderboards, and sharpen your quantitative skills in our sandbox environment."})]}),X.jsxs(Jn,{href:"/battleground",className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-white text-gray-900 font-bold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 whitespace-nowrap",children:["Launch Battleground",X.jsx(ws,{className:"w-5 h-5"})]})]})]}),X.jsx("div",{className:"mt-10",children:X.jsx(vi,{})})]})}),X.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-100/80 border border-indigo-200/60 text-indigo-700 text-sm font-medium mb-6",children:[X.jsx(Ks,{className:"w-4 h-4"}),X.jsx("span",{children:"How It Works"})]}),X.jsx("h2",{className:"text-3xl md:text-4xl font-inter font-bold text-gray-900 mb-4",children:e("home.lab.title")}),X.jsx("p",{className:"max-w-3xl mx-auto text-lg text-gray-600",children:e("home.lab.description")})]}),X.jsx(gi,{features:t}),X.jsx("div",{className:"mt-20 text-center",children:X.jsxs("div",{className:"inline-block p-8 rounded-3xl bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100",children:[X.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Ready to join our community?"}),X.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Applications are open on a rolling basis. Take the first step towards your quantitative journey."}),X.jsxs("a",{href:xi,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 transform hover:-translate-y-0.5",children:["Submit Your Application",X.jsx(ws,{className:"w-5 h-5"})]})]})})]})]})},bi=({member:e,variant:t="large",className:s=""})=>{var n,r;return"large"===t?X.jsxs("div",{className:`bg-white rounded-xl border border-neutral-200 shadow-sm hover:shadow-md transition-all hover:-translate-y-[1px] ${s}`,children:[X.jsxs("div",{className:"w-full h-72 md:h-80 bg-neutral-100 relative overflow-hidden",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover",style:{objectPosition:"paul-wentzel"===(null==e?void 0:e.id)?"50% 30%":"50% 20%"}}):X.jsx("div",{className:"flex items-center justify-center w-full h-full",children:X.jsx("div",{className:"text-6xl font-semibold text-neutral-400",children:e.name.charAt(0)})}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/5 to-transparent pointer-events-none"})]}),X.jsxs("div",{className:"p-6",children:[X.jsx("h4",{className:"font-inter text-2xl font-semibold tracking-tight text-neutral-900",children:e.linkedin?X.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-[#0B3D91] hover:underline",children:e.name}):e.name}),X.jsx("div",{className:"mt-1 text-[#0B3D91] font-medium",children:e.position}),Array.isArray(e.subtitle)?e.subtitle.map((e,t)=>X.jsx("p",{className:"mt-1 text-neutral-700 "+(t>=1?"text-xs":"text-sm"),children:e},t)):e.subtitle&&X.jsx("p",{className:"mt-1 text-neutral-700 text-sm",children:e.subtitle}),e.classOf&&X.jsx("p",{className:"text-neutral-600 text-sm",children:e.classOf}),e.bio&&X.jsx("p",{className:"mt-3 text-neutral-700 text-sm whitespace-pre-line",children:e.bio}),Array.isArray(e.bullets)&&e.bullets.length>0&&X.jsxs("div",{className:"mt-3",children:[e.bulletsLabel&&X.jsx("div",{className:"text-sm font-medium text-neutral-800 mb-1",children:e.bulletsLabel}),X.jsx("ul",{className:"list-disc list-inside text-neutral-700 text-sm space-y-1",children:e.bullets.map((e,t)=>X.jsx("li",{children:e},t))})]}),X.jsx("div",{className:"mt-4 h-px bg-neutral-200"}),X.jsx("div",{className:"mt-4 flex items-center space-x-3",children:e.email&&X.jsxs("a",{href:`mailto:${e.email}`,className:"inline-flex items-center text-neutral-600 hover:text-[#0B3D91] transition-colors",children:[X.jsx("i",{className:"fas fa-envelope mr-2"}),X.jsx("span",{className:"text-sm",children:"Contact"})]})})]})]}):"medium"===t?X.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border border-gray-200 ${s}`,children:X.jsxs("div",{className:"flex flex-col items-center",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-24 h-24 rounded-full object-cover mb-4",style:{objectPosition:"50% 20%"}}):X.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center mb-4 text-2xl font-bold text-gray-500",children:e.name.charAt(0)}),X.jsx("h4",{className:"font-inter text-lg font-semibold mb-1 text-center text-gray-800",children:e.name}),X.jsx("p",{className:"text-blue-600 text-sm font-medium mb-2 text-center",children:e.position||e.role}),X.jsx("p",{className:"text-gray-600 text-sm text-center",children:e.bio})]})}):"profile"===t?X.jsxs("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-colors ${s}`,children:[X.jsx("div",{className:"relative w-full overflow-hidden rounded-t-xl bg-gray-100 aspect-[4/5] md:aspect-[3/4]",style:{aspectRatio:"4 / 5"},children:e.image?X.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover",style:{objectPosition:"50% 20%"},loading:"lazy",decoding:"async"}):X.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center text-base font-bold text-gray-500",children:(null==(n=e.name)?void 0:n.charAt(0))||"?"})}),X.jsxs("div",{className:"p-4",children:[X.jsx("div",{className:"text-base md:text-lg font-semibold text-gray-900 leading-tight break-words",children:e.name}),e.position&&X.jsx("div",{className:"text-sm md:text-base text-blue-700 font-medium leading-tight break-words mt-0.5",children:e.position}),Array.isArray(null==e?void 0:e.subtitle)?X.jsx("div",{className:"mt-2 space-y-1",children:e.subtitle.map((e,t)=>X.jsx("div",{className:"text-sm text-gray-700 leading-snug whitespace-normal break-words",children:e},t))}):(null==e?void 0:e.subtitle)&&X.jsx("div",{className:"mt-2 text-sm text-gray-700 leading-snug whitespace-normal break-words",children:e.subtitle}),e.classOf&&X.jsx("div",{className:"mt-1 text-xs text-gray-500 leading-tight",children:e.classOf}),e.email&&X.jsxs("a",{href:`mailto:${e.email}`,className:"mt-3 inline-flex items-center gap-2 text-sm text-gray-600 hover:text-blue-700",children:[X.jsx("i",{className:"fas fa-envelope"}),X.jsx("span",{children:"Email"})]})]})]}):"compact"===t?X.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-3 shadow-sm hover:shadow-md transition-colors ${s}`,children:X.jsxs("div",{className:"flex items-start gap-3",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-md object-cover flex-shrink-0",style:{objectPosition:"50% 20%"}}):X.jsx("div",{className:"w-16 h-16 rounded-md bg-gray-200 flex items-center justify-center text-base font-bold text-gray-500 flex-shrink-0",children:(null==(r=e.name)?void 0:r.charAt(0))||"?"}),X.jsxs("div",{className:"min-w-0",children:[X.jsx("div",{className:"text-sm font-semibold text-gray-900 leading-tight break-words",children:e.name}),e.position&&X.jsx("div",{className:"text-[13px] text-blue-700 font-medium leading-tight break-words",children:e.position}),Array.isArray(null==e?void 0:e.subtitle)?X.jsx("div",{className:"mt-0.5 space-y-0.5",children:e.subtitle.map((e,t)=>X.jsx("div",{className:"text-xs text-gray-700 leading-snug whitespace-normal break-words",children:e},t))}):(null==e?void 0:e.subtitle)&&X.jsx("div",{className:"mt-0.5 text-xs text-gray-700 leading-snug whitespace-normal break-words",children:e.subtitle}),e.classOf&&X.jsx("div",{className:"text-[11px] text-gray-500 leading-tight",children:e.classOf}),e.email&&X.jsxs("a",{href:`mailto:${e.email}`,className:"mt-1 inline-flex items-center gap-1 text-xs text-gray-600 hover:text-blue-700",children:[X.jsx("i",{className:"fas fa-envelope"}),X.jsx("span",{children:"Email"})]})]})]})}):X.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-4 flex flex-col items-center border border-gray-200 ${s}`,children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-full object-cover mb-2"}):X.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center mb-2 text-lg font-bold text-gray-500",children:e.name.charAt(0)}),X.jsx("h4",{className:"font-inter text-sm font-semibold mb-0.5 text-center text-gray-800",children:e.name}),(e.department||e.position||e.role)&&X.jsx("p",{className:"text-gray-600 text-xs text-center",children:e.department||e.position||e.role})]})},wi=()=>{const{t:e}=mi(),t=[{id:"kartik-yadav",name:"Kartik Yadav",position:"Head",department:"FS Quant & Data Science Initiative",subtitle:["Master of Finance","Founder QDS & Battleground"],classOf:"Class of 2026",image:"/kartik.jpg",email:"kartik.yadav@fs-students.de",expertise:["Machine Learning","Quantitative Finance","Data Engineering"]},{id:"nicolette-peytchev",name:"Nicolette Peytchev",position:"Outreach",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Computational Business Analytics",classOf:"Class of 2029",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"nicolette.peytchev@fs-students.de"},{id:"shravani-m",name:"Shravani Mahadeshwar",position:"Operations",department:"FS Quant & Data Science Initiative",subtitle:"Master in Applied Data Science",classOf:"Class of 2027",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"Shravani.Mahadeshwar@fs-students.de"},{id:"pranauti-k",name:"Pranauti Kendhe",position:"Operations",department:"FS Quant & Data Science Initiative",subtitle:"Master of Finance",classOf:"Class of 2027",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"pranauti.kendhe@fs-students.de"},{id:"maximilian-k",name:"Maximilian Koch",position:"Outreach",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Business Administration",classOf:"Class of 2028",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"maximilian.koch@fs-students.de"}],s=[...t.filter(e=>"Head"===e.position),...t.filter(e=>"Head"!==e.position)];return X.jsx("section",{id:"members",className:"py-20 bg-gradient-to-b from-white to-gray-50/50 min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-100/80 border border-indigo-200/60 text-indigo-700 text-sm font-medium mb-6",children:[X.jsx(dn,{className:"w-4 h-4"}),X.jsx("span",{children:"Our People"})]}),X.jsx("h2",{className:"text-3xl md:text-4xl font-inter font-bold text-gray-900 mb-4",children:e("members.title")}),X.jsx("p",{className:"max-w-2xl mx-auto text-lg text-gray-600",children:"Meet the passionate individuals driving innovation and learning at FS Quant & Data Science."})]}),X.jsxs("div",{className:"mb-16",children:[X.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[X.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:X.jsx(Js,{className:"w-5 h-5 text-white"})}),X.jsxs("div",{children:[X.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e("members.orgaTeamTitle")}),X.jsx("p",{className:"text-sm text-gray-500",children:"Student leaders driving our mission"})]})]}),X.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(e=>X.jsx("div",{className:"transform hover:-translate-y-1 transition-transform duration-300",children:X.jsx(bi,{member:e,variant:"profile"})},e.id))})]}),X.jsxs("div",{className:"relative",children:[X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 rounded-3xl -mx-4 sm:-mx-6 lg:-mx-8"}),X.jsxs("div",{className:"relative py-12 px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[X.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/20",children:X.jsx(Bs,{className:"w-5 h-5 text-white"})}),X.jsxs("div",{children:[X.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e("members.facultyAdvisorsTitle")}),X.jsx("p",{className:"text-sm text-gray-500",children:"Academic guidance and industry expertise"})]})]}),X.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:"grigory-vilkov",name:"Prof. Dr. Grigory Vilkov",position:"Professor of Finance at FS",subtitle:["Research Agenda","Deep learning and parametric portfolios.","Automatic feature discovery for conditional alpha modeling."],image:"/drvilkov.jpg",email:"g.vilkov@fs.de"},{id:"uwe-wystup",name:"Prof. Dr. Uwe Wystup",position:"Founder & Managing Director at MathFinance",subtitle:["Honorary Professor for Quantitative Finance at FS","Specializes in expert reports, conflict resolution (derivatives), training, structuring, independent valuation."],image:"/drwystup.jpg",email:"uwe.wystup@mathfinance.com"}].map(e=>X.jsx("div",{className:"transform hover:-translate-y-1 transition-transform duration-300",children:X.jsx(bi,{member:e,variant:"profile"})},e.id))})]})]}),X.jsx("div",{className:"mt-16 text-center",children:X.jsxs("div",{className:"inline-block p-8 rounded-3xl bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 shadow-2xl",children:[X.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Want to be part of the team?"}),X.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"We're always looking for passionate students to join our initiative."}),X.jsxs("a",{href:"https://forms.gle/vkD7AJVRwg5TqQyo8",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-white text-gray-900 font-bold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:["Apply to Join",X.jsx("span",{className:"text-lg",children:""})]})]})})]})})},ji=()=>{const{t:e}=mi(),[t,s]=Je.useState("all"),n=[{id:"risk-modeling",title:"Credit Risk Modeling with ML",description:"Developing advanced machine learning models for credit risk assessment using real banking data.",status:"current",type:"industry",teamSize:5,technologies:["Python","TensorFlow","XGBoost","SQL"],partner:"Commerzbank",duration:"3 months"},{id:"portfolio-opt",title:"Portfolio Optimization Engine",description:"Building a quantitative portfolio optimization system using modern portfolio theory and factor models.",status:"current",type:"industry",teamSize:4,technologies:["Python","NumPy","Pandas","CVXPY"],partner:"DWS Group",duration:"3 months"},{id:"nlp-sentiment",title:"Financial News Sentiment Analysis",description:"NLP-based sentiment analysis of financial news to predict market movements.",status:"showcase",type:"research",teamSize:6,technologies:["BERT","PyTorch","Hugging Face","AWS"],achievements:["92% accuracy","Real-time processing"],duration:"4 months"},{id:"fraud-detection",title:"Real-time Fraud Detection System",description:"Anomaly detection system for identifying fraudulent transactions in real-time.",status:"showcase",type:"industry",teamSize:5,technologies:["Apache Kafka","Spark","scikit-learn","Docker"],partner:"EY",achievements:["99.2% precision","<100ms latency"],duration:"3 months"}].filter(e=>"all"===t||("current"===t?"current"===e.status:"showcase"===t?"showcase"===e.status:"industry"!==t||"industry"===e.type));return X.jsx("section",{id:"projects",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("projectsTitle")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("projectsSubtitle")})]}),X.jsx("div",{className:"flex flex-wrap justify-center mb-12 gap-3",children:[{key:"all",label:"All Projects",icon:"fa-th"},{key:"current",label:"Current Sprint",icon:"fa-clock"},{key:"showcase",label:"Showcase",icon:"fa-trophy"},{key:"industry",label:"Industry Partners",icon:"fa-handshake"}].map(e=>X.jsxs("button",{className:"px-5 py-2.5 rounded-full font-medium transition-all duration-200 flex items-center gap-2 "+(t===e.key?"bg-blue-600 text-white shadow-lg scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300"),onClick:()=>s(e.key),children:[X.jsx("i",{className:`fas ${e.icon} text-sm`}),e.label]},e.key))}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:n.map(e=>X.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200 hover:shadow-xl transition-shadow",children:[X.jsxs("div",{className:"flex justify-between items-start mb-4",children:[X.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e.title}),X.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("current"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:"current"===e.status?"Active":"Completed"})]}),X.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),e.partner&&X.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[X.jsx("i",{className:"fas fa-building text-gray-400"}),X.jsx("span",{className:"text-sm text-gray-700 font-medium",children:e.partner})]}),X.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx("i",{className:"fas fa-users text-gray-400"}),X.jsxs("span",{children:[e.teamSize," members"]})]}),X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx("i",{className:"fas fa-calendar text-gray-400"}),X.jsx("span",{children:e.duration})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.technologies.map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e},t))}),e.achievements&&X.jsx("div",{className:"pt-4 border-t border-gray-200",children:X.jsx("div",{className:"flex flex-wrap gap-3",children:e.achievements.map((e,t)=>X.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[X.jsx("i",{className:"fas fa-check-circle"}),X.jsx("span",{children:e})]},t))})})]},e.id))}),X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-8 mb-16 border border-blue-200",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-6 text-center text-gray-800",children:"How Our Project Sprints Work"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-rocket text-blue-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Project Kickoff"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Teams form and receive real datasets and problem statements from industry partners."})]}),X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-code text-indigo-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Sprint Development"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Bi-weekly check-ins, mentorship sessions, and collaborative problem-solving on Teams."})]}),X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-trophy text-amber-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Demo Day"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Teams present to industry jury. Winners receive prizes and internship referrals."})]})]})]}),X.jsxs("div",{className:"text-center bg-white rounded-lg shadow-lg p-12 border border-gray-200",children:[X.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Join Our Next Project Sprint"}),X.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Be part of a team tackling real-world quant and data science challenges. Build your portfolio, gain industry experience, and compete for prizes."}),X.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[X.jsx("a",{href:"/contact",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Apply for Next Sprint"}),X.jsx("a",{href:"#",className:"px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Become a Partner"})]})]})]})})},Ni=new Date,ki=e=>{const t=new Date(Ni);return t.setDate(t.getDate()+e),t};ki(15),ki(18),ki(27),ki(35);const Si=e=>{const t=new Date(Ni);return t.setDate(t.getDate()-e),t};Si(25),Si(40),Si(55),Si(70);const _i=e=>{const t=e=>e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",s=t(e.start),n=t(e.end),r=t(new Date);return`BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Data Science Student Initiative//NONSGML Calendar//EN\nCALSCALE:GREGORIAN\nBEGIN:VEVENT\nUID:${e.id}@dssi.frankfurt-school.de\nDTSTAMP:${r}\nDTSTART:${s}\nDTEND:${n}\nSUMMARY:${e.title}\nDESCRIPTION:${e.description||""}\nLOCATION:${e.location||""}\nORGANIZER:${e.organizer||"Data Science Student Initiative"}\nURL:${e.url||"https://dssi.frankfurt-school.de"}\nEND:VEVENT\nEND:VCALENDAR`},Ei=e=>{const t=e=>e.toISOString().replace(/-|:|\.\d+/g,""),s=t(e.start),n=t(e.end);return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:e.title,dates:`${s}/${n}`,details:e.description||"",location:e.location||"",sf:"true",output:"xml"}).toString()}`},Ti=Fa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Di=Je.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...r},a)=>{const i=n?me:"button";return X.jsx(i,{className:za(Ti({variant:t,size:s,className:e})),ref:a,...r})});Di.displayName="Button";const Ai=({event:e})=>{var t;const{t:s}=mi(),n=(e=>{switch(e){case"workshop":return"bg-[#0B3D91] text-white";case"speaker":return"bg-[#00A6ED] text-white";case"competition":return"bg-[#FFC107] text-[#0B3D91]";case"meetup":return"bg-[#28A745] text-white";case"exclusive":return"bg-[#6B21A8] text-white";default:return"bg-neutral-500 text-white"}})(e.type),r=e&&e.date instanceof Date?e.date:new Date(e.date),a=Boolean(e.isTBA||e.tbaText),i=e.tbaText,o=a?"TBA":ot(r,"d"),l=a?(null==(t=null==i?void 0:i.match(/\((.+)\)/))?void 0:t[1])||"TBA":ot(r,"MMM"),c="startTime"in e?e.startTime:"time"in e?e.time:void 0,d="endTime"in e||"endTime"in e?e.endTime:void 0,u=e.image,m=u?(()=>{try{const e="/",t=u.startsWith("/")?u.slice(1):u;return e.endsWith("/")?`${e}${t}`:`${e}/${t}`}catch{return u}})():void 0,h=()=>{const e=c?new Date(`${r.toDateString()} ${c}`):new Date(r),t=d?new Date(`${r.toDateString()} ${d}`):c?new Date(e.getTime()+72e5):new Date(e.getTime()+864e5);return{start:e,end:t}},p=()=>{const{start:t,end:s}=h(),n={...e,start:t,end:s},r=_i(n),a=new Blob([r],{type:"text/calendar;charset=utf-8"}),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.setAttribute("download",`${e.title.replace(/\s+/g,"-")}.ics`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},f=()=>{const{start:t,end:s}=h(),n={...e,start:t,end:s};window.open(Ei(n),"_blank")};return m?X.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-neutral-200 hover:shadow-md transition-all h-full",children:[X.jsxs("div",{className:"relative group",children:[X.jsx("img",{src:m,alt:e.title,className:"w-full aspect-[16/9] object-cover",onError:e=>{e.target.style.display="none"}}),X.jsx("div",{className:"absolute top-3 left-3",children:X.jsx("span",{className:`${n} text-xs px-2 py-1 rounded-full shadow-sm capitalize`,children:(()=>{const t=e.type||"",n=s(`events.types.${t}`);return n&&!n.startsWith("events.types.")?n:t.charAt(0).toUpperCase()+t.slice(1)})()})})]}),X.jsxs("div",{className:"p-4",children:[X.jsxs("div",{className:"flex items-center text-sm text-neutral-600 mb-2",children:[a?X.jsx("span",{className:"font-semibold text-neutral-900 mr-2",children:i||"TBA"}):X.jsxs(X.Fragment,{children:[X.jsxs("span",{className:"font-semibold text-neutral-900 mr-2",children:[l," ",o]}),X.jsx("i",{className:"far fa-clock mx-2 text-neutral-400"}),X.jsx("span",{children:c?d?`${c} - ${d}`:c:"All day"})]}),e.location&&X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"fas fa-map-marker-alt ml-4 mr-2 text-neutral-400"}),X.jsx("span",{children:e.location})]})]}),X.jsx("h3",{className:"font-inter text-lg font-semibold mb-2 text-neutral-900",children:e.title}),e.description&&X.jsx("p",{className:"text-neutral-700 text-sm mb-4",children:e.description}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs(Di,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:p,children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," iCal"]}),X.jsxs(Di,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:f,children:[X.jsx("i",{className:"fab fa-google mr-2"})," Google Calendar"]})]})]})]}):X.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-neutral-200 border-t-4 border-[#0B3D91] hover:shadow-md transition-all h-full",children:X.jsxs("div",{className:"flex items-stretch h-full",children:[X.jsxs("div",{className:"bg-[#0B3D91] text-white font-semibold p-4 text-center flex flex-col justify-center min-w-[90px] self-stretch",children:[X.jsx("span",{className:"text-2xl font-bold",children:o}),X.jsx("span",{className:"uppercase tracking-wide text-sm opacity-90",children:l})]}),X.jsxs("div",{className:"p-4 flex-1",children:[X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsx("h3",{className:"font-inter text-lg font-semibold mb-1 text-neutral-900",children:e.title}),X.jsx("span",{className:`${n} text-xs px-2 py-1 rounded-full`,children:(()=>{const t=e.type||"",n=s(`events.types.${t}`);return n&&!n.startsWith("events.types.")?n:t.charAt(0).toUpperCase()+t.slice(1)})()})]}),e.description&&X.jsx("p",{className:"text-neutral-700 text-sm mb-3",children:e.description}),X.jsxs("div",{className:"flex items-center text-sm text-neutral-600 mb-3",children:[a?X.jsx("span",{className:"font-semibold mr-2",children:i||"TBA"}):X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"far fa-clock mr-2"}),X.jsx("span",{children:c?d?`${c} - ${d}`:c:"All day"})]}),e.location&&X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"fas fa-map-marker-alt ml-4 mr-2"}),X.jsx("span",{children:e.location})]})]}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs(Di,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:p,children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," iCal"]}),X.jsxs(Di,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:f,children:[X.jsx("i",{className:"fab fa-google mr-2"})," Google Calendar"]})]})]})]})})};function Mi(e){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e){var t=function(e,t){if("object"!=Mi(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=Mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mi(t)?t:t+""}function Oi(e,t,s){return(t=Ci(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Pi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Ii(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(s),!0).forEach(function(t){Oi(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pi(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Ri(e,t){if(null==e)return{};var s,n,r=ft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fi(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ci(n.key),n)}}function zi(e,t,s){return t&&Fi(e.prototype,t),s&&Fi(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ui(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ui=function(){return!!e})()}function qi(e,t,s){return t=Bi(t),function(e,t){if(t&&("object"==Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gt(e)}(e,Ui()?Reflect.construct(t,s||[],Bi(e).constructor):t.apply(e,s))}function Wi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}function $i(e){if(Array.isArray(e))return e}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}function Vi(e,t){if(e){if("string"==typeof e)return Yi(e,t);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Yi(e,t):void 0}}function Hi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gi(e,t){return $i(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,a,i,o=[],l=!0,c=!1;try{if(a=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=a.call(s)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||Vi(e,t)||Hi()}function Ki(e){var t,s,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(s=Ki(e[t]))&&(n&&(n+=" "),n+=s);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Qi(){for(var e,t,s=0,n="";s<arguments.length;)(e=arguments[s++])&&(t=Ki(e))&&(n&&(n+=" "),n+=t);return n}var Xi=function(e,t,s,n,r,a,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[s,n,r,a,i,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};const Zi=st(Xi);var Ji=function(){};function eo(e,t){return void 0!==e[t]}function to(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function so(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function no(e){this.setState(function(t){var s=this.constructor.getDerivedStateFromProps(e,t);return null!=s?s:null}.bind(this))}function ro(e,t){try{var s=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,n)}finally{this.props=s,this.state=n}}so.__suppressDeprecationWarning=!0,no.__suppressDeprecationWarning=!0,ro.__suppressDeprecationWarning=!0;var ao="milliseconds",io="seconds",oo="minutes",lo="hours",co="day",uo="week",mo="month",ho="year",po="decade",fo="century",go={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},xo={month:1,year:12,decade:120,century:1200};function vo(e){return e%4==0&&e%100!=0||e%400==0?29:28}function yo(e,t,s){switch(e=new Date(e),s){case ao:case io:case oo:case lo:case co:case uo:return function(e,t){var s=new Date(+e+t);return function(e,t){var s=e.getTimezoneOffset(),n=t.getTimezoneOffset();return new Date(+t+(n-s)*go.minutes)}(e,s)}(e,t*go[s]);case mo:case ho:case po:case fo:return function(e,t){var s=e.getFullYear(),n=e.getMonth(),r=e.getDate(),a=12*s+n+t,i=Math.trunc(a/12),o=a%12,l=Math.min(r,function(e){return[31,vo(e),31,30,31,30,31,31,30,31,30,31]}(i)[o]),c=new Date(e);return c.setFullYear(i),c.setDate(1),c.setMonth(o),c.setDate(l),c}(e,t*xo[s])}throw new TypeError('Invalid units: "'+s+'"')}function bo(e,t,s){return yo(e,-t,s)}function wo(e,t,s){switch(e=new Date(e),t){case fo:case po:case ho:e=Fo(e,0);case mo:e=Lo(e,1);case uo:case co:e=Io(e,0);case lo:e=Po(e,0);case oo:e=Oo(e,0);case io:e=Co(e,0)}return t===po&&(e=bo(e,zo(e)%10,"year")),t===fo&&(e=bo(e,zo(e)%100,"year")),t===uo&&(e=Bo(e,0,s)),e}function jo(e,t,s){switch(e=wo(e=new Date(e),t,s),t){case fo:case po:case ho:case mo:case uo:(e=bo(e=yo(e,1,t),1,co)).setHours(23,59,59,999);break;case co:e.setHours(23,59,59,999);break;case lo:case oo:case io:e=bo(e=yo(e,1,t),1,ao)}return e}var No=qo(function(e,t){return e===t}),ko=qo(function(e,t){return e!==t}),So=qo(function(e,t){return e>t}),_o=qo(function(e,t){return e>=t}),Eo=qo(function(e,t){return e<t}),To=qo(function(e,t){return e<=t});function Do(){return new Date(Math.min.apply(Math,arguments))}function Ao(){return new Date(Math.max.apply(Math,arguments))}function Mo(e,t,s,n){return n=n||"day",(!t||_o(e,t,n))&&(!s||To(e,s,n))}var Co=Uo("Milliseconds"),Oo=Uo("Seconds"),Po=Uo("Minutes"),Io=Uo("Hours"),Ro=Uo("Day"),Lo=Uo("Date"),Fo=Uo("Month"),zo=Uo("FullYear");function Bo(e,t,s){var n=(Ro(e)+7-(s||0))%7;return void 0===t?n:yo(e,t-n,co)}function Uo(e){var t=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(s,n){if(void 0===n)return s["get"+e]();var r=new Date(s);return r["set"+e](n),t&&r["get"+e]()!=n&&("Hours"===e||n>=t&&r.getHours()-s.getHours()<Math.floor(n/t))&&r["set"+e](n+t),r}}function qo(e){return function(t,s,n){return e(+wo(t,n),+wo(s,n))}}const Wo=Object.freeze(Object.defineProperty({__proto__:null,add:yo,century:function(e,t){return void 0===t?zo(wo(e,fo)):yo(e,t+100,ho)},date:Lo,day:Ro,decade:function(e,t){return void 0===t?zo(wo(e,po)):yo(e,t+10,ho)},diff:function(e,t,s,n){var r,a,i;switch(s){case ao:case io:case oo:case lo:case co:case uo:r=t.getTime()-e.getTime();break;case mo:case ho:case po:case fo:r=12*(zo(t)-zo(e))+Fo(t)-Fo(e);break;default:throw new TypeError('Invalid units: "'+s+'"')}switch(s){case ao:a=1;break;case io:a=1e3;break;case oo:a=6e4;break;case lo:a=36e5;break;case co:a=864e5;break;case uo:a=6048e5;break;case mo:a=1;break;case ho:a=12;break;case po:a=120;break;case fo:a=1200;break;default:throw new TypeError('Invalid units: "'+s+'"')}return i=r/a,n?i:Math.round(i)},endOf:jo,eq:No,gt:So,gte:_o,hours:Io,inRange:Mo,lt:Eo,lte:To,max:Ao,milliseconds:Co,min:Do,minutes:Po,month:Fo,neq:ko,seconds:Oo,startOf:wo,subtract:bo,weekday:Bo,year:zo},Symbol.toStringTag,{value:"Module"}));function $o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Yo(e){return function(e){if(Array.isArray(e))return Yi(e)}(e)||$o(e)||Vi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vo=bt,Ho=wt,Go=jt,Ko=Math.ceil,Qo=Math.max;const Xo=st(function(e,t,s){t=(s?Ho(e,t,s):void 0===t)?1:Qo(Go(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var r=0,a=0,i=Array(Ko(n/t));r<n;)i[a++]=Vo(e,r,r+=t);return i});function Zo(e){return e&&e.ownerDocument||document}function Jo(e,t){return function(e){var t=Zo(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var el=/([A-Z])/g;var tl=/^ms-/;function sl(e){return function(e){return e.replace(el,"-$1").toLowerCase()}(e).replace(tl,"-ms-")}var nl=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function rl(e,t){var s="",n="";if("string"==typeof t)return e.style.getPropertyValue(sl(t))||Jo(e).getPropertyValue(sl(t));Object.keys(t).forEach(function(r){var a=t[r];a||0===a?!function(e){return!(!e||!nl.test(e))}(r)?s+=sl(r)+": "+a+";":n+=r+"("+a+") ":e.style.removeProperty(sl(r))}),n&&(s+="transform: "+n+";"),e.style.cssText+=";"+s}function al(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function il(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function ol(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(s,n){var r=il(s);if(void 0===n)return r?r[e]:s[t];r?r.scrollTo(r[e],n):s[t]=n}}const ll=ol("pageXOffset"),cl=ol("pageYOffset");function dl(e){var t=Zo(e),s={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return n&&al(n,e)?(void 0!==e.getBoundingClientRect&&(s=e.getBoundingClientRect()),s={top:s.top+cl(n)-(n.clientTop||0),left:s.left+ll(n)-(n.clientLeft||0),width:s.width,height:s.height}):s}var ul=function(e){return!!e&&"offsetParent"in e};function ml(e,t){var s,n={top:0,left:0};if("fixed"===rl(e,"position"))s=e.getBoundingClientRect();else{var r=t||function(e){for(var t=Zo(e),s=e&&e.offsetParent;ul(s)&&"HTML"!==s.nodeName&&"static"===rl(s,"position");)s=s.offsetParent;return s||t.documentElement}(e);s=dl(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(r)&&(n=dl(r));var a=String(rl(r,"borderTopWidth")||0);n.top+=parseInt(a,10)-cl(r)||0;var i=String(rl(r,"borderLeftWidth")||0);n.left+=parseInt(i,10)-ll(r)||0}var o=String(rl(e,"marginTop")||0),l=String(rl(e,"marginLeft")||0);return yt({},s,{top:s.top-n.top-(parseInt(o,10)||0),left:s.left-n.left-(parseInt(l,10)||0)})}const hl=!("undefined"==typeof window||!window.document||!window.document.createElement);var pl=(new Date).getTime();var fl="clearTimeout",gl=function(e){var t=(new Date).getTime(),s=Math.max(0,16-(t-pl)),n=setTimeout(e,s);return pl=t,n},xl=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};hl&&["","webkit","moz","o","ms"].some(function(e){var t=xl(e,"request");return t in window&&(fl=xl(e,"cancel"),gl=function(e){return window[t](e)}),!!gl});var vl,yl=function(e){"function"==typeof window[fl]&&window[fl](e)},bl=gl;function wl(e,t){if(!vl){var s=document.body,n=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector;vl=function(e,t){return n.call(e,t)}}return vl(e,t)}var jl=Function.prototype.bind.call(Function.prototype.call,[].slice);var Nl=!1,kl=!1;try{var Sl={get passive(){return Nl=!0},get once(){return kl=Nl=!0}};hl&&(window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,!0))}catch(vj){}function _l(e){const t=function(e){const t=Je.useRef(e);return Je.useEffect(()=>{t.current=e},[e]),t}(e);return Je.useCallback(function(...e){return t.current&&t.current(...e)},[t])}function El(){return Je.useState(null)}function Tl(e){const t=function(){const e=Je.useRef(!0),t=Je.useRef(()=>e.current);return Je.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}();return[e[0],Je.useCallback(s=>{if(t())return e[1](s)},[t,e[1]])]}var Dl="top",Al="bottom",Ml="right",Cl="left",Ol="auto",Pl=[Dl,Al,Ml,Cl],Il="start",Rl="end",Ll="viewport",Fl="popper",zl=Pl.reduce(function(e,t){return e.concat([t+"-"+Il,t+"-"+Rl])},[]),Bl=[].concat(Pl,[Ol]).reduce(function(e,t){return e.concat([t,t+"-"+Il,t+"-"+Rl])},[]),Ul=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ql(e){return e.split("-")[0]}function Wl(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function $l(e){return e instanceof Wl(e).Element||e instanceof Element}function Yl(e){return e instanceof Wl(e).HTMLElement||e instanceof HTMLElement}function Vl(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Wl(e).ShadowRoot||e instanceof ShadowRoot)}var Hl=Math.max,Gl=Math.min,Kl=Math.round;function Ql(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Xl(){return!/^((?!chrome|android).)*safari/i.test(Ql())}function Zl(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);var n=e.getBoundingClientRect(),r=1,a=1;t&&Yl(e)&&(r=e.offsetWidth>0&&Kl(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Kl(n.height)/e.offsetHeight||1);var i=($l(e)?Wl(e):window).visualViewport,o=!Xl()&&s,l=(n.left+(o&&i?i.offsetLeft:0))/r,c=(n.top+(o&&i?i.offsetTop:0))/a,d=n.width/r,u=n.height/a;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Jl(e){var t=Zl(e),s=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:n}}function ec(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&Vl(s)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function tc(e){return e?(e.nodeName||"").toLowerCase():null}function sc(e){return Wl(e).getComputedStyle(e)}function nc(e){return["table","td","th"].indexOf(tc(e))>=0}function rc(e){return(($l(e)?e.ownerDocument:e.document)||window.document).documentElement}function ac(e){return"html"===tc(e)?e:e.assignedSlot||e.parentNode||(Vl(e)?e.host:null)||rc(e)}function ic(e){return Yl(e)&&"fixed"!==sc(e).position?e.offsetParent:null}function oc(e){for(var t=Wl(e),s=ic(e);s&&nc(s)&&"static"===sc(s).position;)s=ic(s);return s&&("html"===tc(s)||"body"===tc(s)&&"static"===sc(s).position)?t:s||function(e){var t=/firefox/i.test(Ql());if(/Trident/i.test(Ql())&&Yl(e)&&"fixed"===sc(e).position)return null;var s=ac(e);for(Vl(s)&&(s=s.host);Yl(s)&&["html","body"].indexOf(tc(s))<0;){var n=sc(s);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return s;s=s.parentNode}return null}(e)||t}function lc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function cc(e,t,s){return Hl(e,Gl(t,s))}function dc(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function uc(e,t){return t.reduce(function(t,s){return t[s]=e,t},{})}const mc={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,s=e.state,n=e.name,r=e.options,a=s.elements.arrow,i=s.modifiersData.popperOffsets,o=ql(s.placement),l=lc(o),c=[Cl,Ml].indexOf(o)>=0?"height":"width";if(a&&i){var d=function(e,t){return dc("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:uc(e,Pl))}(r.padding,s),u=Jl(a),m="y"===l?Dl:Cl,h="y"===l?Al:Ml,p=s.rects.reference[c]+s.rects.reference[l]-i[l]-s.rects.popper[c],f=i[l]-s.rects.reference[l],g=oc(a),x=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=p/2-f/2,y=d[m],b=x-u[c]-d[h],w=x/2-u[c]/2+v,j=cc(y,w,b),N=l;s.modifiersData[n]=((t={})[N]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,s=e.options.element,n=void 0===s?"[data-popper-arrow]":s;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&ec(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hc(e){return e.split("-")[1]}var pc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fc(e){var t,s=e.popper,n=e.popperRect,r=e.placement,a=e.variation,i=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,m=i.x,h=void 0===m?0:m,p=i.y,f=void 0===p?0:p,g="function"==typeof d?d({x:h,y:f}):{x:h,y:f};h=g.x,f=g.y;var x=i.hasOwnProperty("x"),v=i.hasOwnProperty("y"),y=Cl,b=Dl,w=window;if(c){var j=oc(s),N="clientHeight",k="clientWidth";if(j===Wl(s)&&"static"!==sc(j=rc(s)).position&&"absolute"===o&&(N="scrollHeight",k="scrollWidth"),r===Dl||(r===Cl||r===Ml)&&a===Rl)b=Al,f-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[N])-n.height,f*=l?1:-1;if(r===Cl||(r===Dl||r===Al)&&a===Rl)y=Ml,h-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[k])-n.width,h*=l?1:-1}var S,_=Object.assign({position:o},c&&pc),E=!0===d?function(e,t){var s=e.x,n=e.y,r=t.devicePixelRatio||1;return{x:Kl(s*r)/r||0,y:Kl(n*r)/r||0}}({x:h,y:f},Wl(s)):{x:h,y:f};return h=E.x,f=E.y,l?Object.assign({},_,((S={})[b]=v?"0":"",S[y]=x?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+f+"px)":"translate3d("+h+"px, "+f+"px, 0)",S)):Object.assign({},_,((t={})[b]=v?f+"px":"",t[y]=x?h+"px":"",t.transform="",t))}const gc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,s=e.options,n=s.gpuAcceleration,r=void 0===n||n,a=s.adaptive,i=void 0===a||a,o=s.roundOffsets,l=void 0===o||o,c={placement:ql(t.placement),variation:hc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,fc(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,fc(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var xc={passive:!0};const vc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,s=e.instance,n=e.options,r=n.scroll,a=void 0===r||r,i=n.resize,o=void 0===i||i,l=Wl(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(e){e.addEventListener("scroll",s.update,xc)}),o&&l.addEventListener("resize",s.update,xc),function(){a&&c.forEach(function(e){e.removeEventListener("scroll",s.update,xc)}),o&&l.removeEventListener("resize",s.update,xc)}},data:{}};var yc={left:"right",right:"left",bottom:"top",top:"bottom"};function bc(e){return e.replace(/left|right|bottom|top/g,function(e){return yc[e]})}var wc={start:"end",end:"start"};function jc(e){return e.replace(/start|end/g,function(e){return wc[e]})}function Nc(e){var t=Wl(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function kc(e){return Zl(rc(e)).left+Nc(e).scrollLeft}function Sc(e){var t=sc(e),s=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+r+n)}function _c(e){return["html","body","#document"].indexOf(tc(e))>=0?e.ownerDocument.body:Yl(e)&&Sc(e)?e:_c(ac(e))}function Ec(e,t){var s;void 0===t&&(t=[]);var n=_c(e),r=n===(null==(s=e.ownerDocument)?void 0:s.body),a=Wl(n),i=r?[a].concat(a.visualViewport||[],Sc(n)?n:[]):n,o=t.concat(i);return r?o:o.concat(Ec(ac(i)))}function Tc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Dc(e,t,s){return t===Ll?Tc(function(e,t){var s=Wl(e),n=rc(e),r=s.visualViewport,a=n.clientWidth,i=n.clientHeight,o=0,l=0;if(r){a=r.width,i=r.height;var c=Xl();(c||!c&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:i,x:o+kc(e),y:l}}(e,s)):$l(t)?function(e,t){var s=Zl(e,!1,"fixed"===t);return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}(t,s):Tc(function(e){var t,s=rc(e),n=Nc(e),r=null==(t=e.ownerDocument)?void 0:t.body,a=Hl(s.scrollWidth,s.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),i=Hl(s.scrollHeight,s.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-n.scrollLeft+kc(e),l=-n.scrollTop;return"rtl"===sc(r||s).direction&&(o+=Hl(s.clientWidth,r?r.clientWidth:0)-a),{width:a,height:i,x:o,y:l}}(rc(e)))}function Ac(e,t,s,n){var r="clippingParents"===t?function(e){var t=Ec(ac(e)),s=["absolute","fixed"].indexOf(sc(e).position)>=0&&Yl(e)?oc(e):e;return $l(s)?t.filter(function(e){return $l(e)&&ec(e,s)&&"body"!==tc(e)}):[]}(e):[].concat(t),a=[].concat(r,[s]),i=a[0],o=a.reduce(function(t,s){var r=Dc(e,s,n);return t.top=Hl(r.top,t.top),t.right=Gl(r.right,t.right),t.bottom=Gl(r.bottom,t.bottom),t.left=Hl(r.left,t.left),t},Dc(e,i,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Mc(e){var t,s=e.reference,n=e.element,r=e.placement,a=r?ql(r):null,i=r?hc(r):null,o=s.x+s.width/2-n.width/2,l=s.y+s.height/2-n.height/2;switch(a){case Dl:t={x:o,y:s.y-n.height};break;case Al:t={x:o,y:s.y+s.height};break;case Ml:t={x:s.x+s.width,y:l};break;case Cl:t={x:s.x-n.width,y:l};break;default:t={x:s.x,y:s.y}}var c=a?lc(a):null;if(null!=c){var d="y"===c?"height":"width";switch(i){case Il:t[c]=t[c]-(s[d]/2-n[d]/2);break;case Rl:t[c]=t[c]+(s[d]/2-n[d]/2)}}return t}function Cc(e,t){void 0===t&&(t={});var s=t,n=s.placement,r=void 0===n?e.placement:n,a=s.strategy,i=void 0===a?e.strategy:a,o=s.boundary,l=void 0===o?"clippingParents":o,c=s.rootBoundary,d=void 0===c?Ll:c,u=s.elementContext,m=void 0===u?Fl:u,h=s.altBoundary,p=void 0!==h&&h,f=s.padding,g=void 0===f?0:f,x=dc("number"!=typeof g?g:uc(g,Pl)),v=m===Fl?"reference":Fl,y=e.rects.popper,b=e.elements[p?v:m],w=Ac($l(b)?b:b.contextElement||rc(e.elements.popper),l,d,i),j=Zl(e.elements.reference),N=Mc({reference:j,element:y,strategy:"absolute",placement:r}),k=Tc(Object.assign({},y,N)),S=m===Fl?k:j,_={top:w.top-S.top+x.top,bottom:S.bottom-w.bottom+x.bottom,left:w.left-S.left+x.left,right:S.right-w.right+x.right},E=e.modifiersData.offset;if(m===Fl&&E){var T=E[r];Object.keys(_).forEach(function(e){var t=[Ml,Al].indexOf(e)>=0?1:-1,s=[Dl,Al].indexOf(e)>=0?"y":"x";_[e]+=T[s]*t})}return _}const Oc={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var r=s.mainAxis,a=void 0===r||r,i=s.altAxis,o=void 0===i||i,l=s.fallbackPlacements,c=s.padding,d=s.boundary,u=s.rootBoundary,m=s.altBoundary,h=s.flipVariations,p=void 0===h||h,f=s.allowedAutoPlacements,g=t.options.placement,x=ql(g),v=l||(x===g||!p?[bc(g)]:function(e){if(ql(e)===Ol)return[];var t=bc(e);return[jc(e),t,jc(t)]}(g)),y=[g].concat(v).reduce(function(e,s){return e.concat(ql(s)===Ol?function(e,t){void 0===t&&(t={});var s=t,n=s.placement,r=s.boundary,a=s.rootBoundary,i=s.padding,o=s.flipVariations,l=s.allowedAutoPlacements,c=void 0===l?Bl:l,d=hc(n),u=d?o?zl:zl.filter(function(e){return hc(e)===d}):Pl,m=u.filter(function(e){return c.indexOf(e)>=0});0===m.length&&(m=u);var h=m.reduce(function(t,s){return t[s]=Cc(e,{placement:s,boundary:r,rootBoundary:a,padding:i})[ql(s)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}(t,{placement:s,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:f}):s)},[]),b=t.rects.reference,w=t.rects.popper,j=new Map,N=!0,k=y[0],S=0;S<y.length;S++){var _=y[S],E=ql(_),T=hc(_)===Il,D=[Dl,Al].indexOf(E)>=0,A=D?"width":"height",M=Cc(t,{placement:_,boundary:d,rootBoundary:u,altBoundary:m,padding:c}),C=D?T?Ml:Cl:T?Al:Dl;b[A]>w[A]&&(C=bc(C));var O=bc(C),P=[];if(a&&P.push(M[E]<=0),o&&P.push(M[C]<=0,M[O]<=0),P.every(function(e){return e})){k=_,N=!1;break}j.set(_,P)}if(N)for(var I=function(e){var t=y.find(function(t){var s=j.get(t);if(s)return s.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},R=p?3:1;R>0;R--){if("break"===I(R))break}t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Pc(e,t,s){return void 0===s&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function Ic(e){return[Dl,Ml,Al,Cl].some(function(t){return e[t]>=0})}const Rc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,s=e.options,n=e.name,r=s.offset,a=void 0===r?[0,0]:r,i=Bl.reduce(function(e,s){return e[s]=function(e,t,s){var n=ql(e),r=[Cl,Dl].indexOf(n)>=0?-1:1,a="function"==typeof s?s(Object.assign({},t,{placement:e})):s,i=a[0],o=a[1];return i=i||0,o=(o||0)*r,[Cl,Ml].indexOf(n)>=0?{x:o,y:i}:{x:i,y:o}}(s,t.rects,a),e},{}),o=i[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=i}};const Lc={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,n=e.name,r=s.mainAxis,a=void 0===r||r,i=s.altAxis,o=void 0!==i&&i,l=s.boundary,c=s.rootBoundary,d=s.altBoundary,u=s.padding,m=s.tether,h=void 0===m||m,p=s.tetherOffset,f=void 0===p?0:p,g=Cc(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),x=ql(t.placement),v=hc(t.placement),y=!v,b=lc(x),w="x"===b?"y":"x",j=t.modifiersData.popperOffsets,N=t.rects.reference,k=t.rects.popper,S="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,_="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(j){if(a){var D,A="y"===b?Dl:Cl,M="y"===b?Al:Ml,C="y"===b?"height":"width",O=j[b],P=O+g[A],I=O-g[M],R=h?-k[C]/2:0,L=v===Il?N[C]:k[C],F=v===Il?-k[C]:-N[C],z=t.elements.arrow,B=h&&z?Jl(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=U[A],W=U[M],$=cc(0,N[C],B[C]),Y=y?N[C]/2-R-$-q-_.mainAxis:L-$-q-_.mainAxis,V=y?-N[C]/2+R+$+W+_.mainAxis:F+$+W+_.mainAxis,H=t.elements.arrow&&oc(t.elements.arrow),G=H?"y"===b?H.clientTop||0:H.clientLeft||0:0,K=null!=(D=null==E?void 0:E[b])?D:0,Q=O+V-K,X=cc(h?Gl(P,O+Y-K-G):P,O,h?Hl(I,Q):I);j[b]=X,T[b]=X-O}if(o){var Z,J="x"===b?Dl:Cl,ee="x"===b?Al:Ml,te=j[w],se="y"===w?"height":"width",ne=te+g[J],re=te-g[ee],ae=-1!==[Dl,Cl].indexOf(x),ie=null!=(Z=null==E?void 0:E[w])?Z:0,oe=ae?ne:te-N[se]-k[se]-ie+_.altAxis,le=ae?te+N[se]+k[se]-ie-_.altAxis:re,ce=h&&ae?function(e,t,s){var n=cc(e,t,s);return n>s?s:n}(oe,te,le):cc(h?oe:ne,te,h?le:re);j[w]=ce,T[w]=ce-te}t.modifiersData[n]=T}},requiresIfExists:["offset"]};function Fc(e,t,s){void 0===s&&(s=!1);var n,r,a=Yl(t),i=Yl(t)&&function(e){var t=e.getBoundingClientRect(),s=Kl(t.width)/e.offsetWidth||1,n=Kl(t.height)/e.offsetHeight||1;return 1!==s||1!==n}(t),o=rc(t),l=Zl(e,i,s),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(a||!a&&!s)&&(("body"!==tc(t)||Sc(o))&&(c=(n=t)!==Wl(n)&&Yl(n)?{scrollLeft:(r=n).scrollLeft,scrollTop:r.scrollTop}:Nc(n)),Yl(t)?((d=Zl(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=kc(o))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function zc(e){var t=new Map,s=new Set,n=[];function r(e){s.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!s.has(e)){var n=t.get(e);n&&r(n)}}),n.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){s.has(e.name)||r(e)}),n}var Bc={placement:"bottom",modifiers:[],strategy:"absolute"};function Uc(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var qc=function(e){void 0===e&&(e={});var t=e,s=t.defaultModifiers,n=void 0===s?[]:s,r=t.defaultOptions,a=void 0===r?Bc:r;return function(e,t,s){void 0===s&&(s=a);var r,i,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bc,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:o,setOptions:function(s){var r="function"==typeof s?s(o.options):s;u(),o.options=Object.assign({},a,o.options,r),o.scrollParents={reference:$l(e)?Ec(e):e.contextElement?Ec(e.contextElement):[],popper:Ec(t)};var i,c,m=function(e){var t=zc(e);return Ul.reduce(function(e,s){return e.concat(t.filter(function(e){return e.phase===s}))},[])}((i=[].concat(n,o.options.modifiers),c=i.reduce(function(e,t){var s=e[t.name];return e[t.name]=s?Object.assign({},s,t,{options:Object.assign({},s.options,t.options),data:Object.assign({},s.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return o.orderedModifiers=m.filter(function(e){return e.enabled}),o.orderedModifiers.forEach(function(e){var t=e.name,s=e.options,n=void 0===s?{}:s,r=e.effect;if("function"==typeof r){var a=r({state:o,name:t,instance:d,options:n}),i=function(){};l.push(a||i)}}),d.update()},forceUpdate:function(){if(!c){var e=o.elements,t=e.reference,s=e.popper;if(Uc(t,s)){o.rects={reference:Fc(t,oc(s),"fixed"===o.options.strategy),popper:Jl(s)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(e){return o.modifiersData[e.name]=Object.assign({},e.data)});for(var n=0;n<o.orderedModifiers.length;n++)if(!0!==o.reset){var r=o.orderedModifiers[n],a=r.fn,i=r.options,l=void 0===i?{}:i,u=r.name;"function"==typeof a&&(o=a({state:o,options:l,name:u,instance:d})||o)}else o.reset=!1,n=-1}}},update:(r=function(){return new Promise(function(e){d.forceUpdate(),e(o)})},function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(r())})})),i}),destroy:function(){u(),c=!0}};if(!Uc(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(s).then(function(e){!c&&s.onFirstUpdate&&s.onFirstUpdate(e)}),d}}({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,s=e.name,n=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,i=Cc(t,{elementContext:"reference"}),o=Cc(t,{altBoundary:!0}),l=Pc(i,n),c=Pc(o,r,a),d=Ic(l),u=Ic(c);t.modifiersData[s]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,s=e.name;t.modifiersData[s]=Mc({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},gc,vc,Rc,Oc,Lc,mc]}),Wc=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},$c={name:"applyStyles",enabled:!1},Yc={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,s=e.reference,n=e.popper;if("removeAttribute"in s){var r=(s.getAttribute("aria-describedby")||"").split(",").filter(function(e){return e.trim()!==n.id});r.length?s.setAttribute("aria-describedby",r.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(e){var t,s=e.state.elements,n=s.popper,r=s.reference,a=null==(t=n.getAttribute("role"))?void 0:t.toLowerCase();if(n.id&&"tooltip"===a&&"setAttribute"in r){var i=r.getAttribute("aria-describedby");if(i&&-1!==i.split(",").indexOf(n.id))return;r.setAttribute("aria-describedby",i?i+","+n.id:n.id)}}},Vc=[];function Hc(e,t,s,n){return function(e,t,s,n){if(n&&"boolean"!=typeof n&&!kl){var r=n.once,a=n.capture,i=s;!kl&&r&&(i=s.__once||function e(n){this.removeEventListener(t,e,a),s.call(this,n)},s.__once=i),e.addEventListener(t,i,Nl?n:a)}e.addEventListener(t,s,n)}(e,t,s,n),function(){!function(e,t,s,n){var r=n&&"boolean"!=typeof n?n.capture:n;e.removeEventListener(t,s,r),s.__once&&e.removeEventListener(t,s.__once,r)}(e,t,s,n)}}const Gc=st(function(){});const Kc=function(e){return Zo(function(e){return e&&"setState"in e?nt.findDOMNode(e):null!=e?e:null}(e))};var Qc=function(){};var Xc,Zc=function(e){return e&&("current"in e?e.current:e)};function Jc(e){var t,s,n,r,a,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,h=e.arrowElement,p=e.popperConfig,f=void 0===p?{}:p,g=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach(function(e){t[e.name]=e}),t):e||t}(f.modifiers);return yt({},f,{placement:l,enabled:i,strategy:u?"fixed":f.strategy,modifiers:(a=yt({},g,{eventListeners:{enabled:o},preventOverflow:yt({},g.preventOverflow,{options:m?yt({padding:m},null==(t=g.preventOverflow)?void 0:t.options):null==(s=g.preventOverflow)?void 0:s.options}),offset:{options:yt({offset:d},null==(n=g.offset)?void 0:n.options)},arrow:yt({},g.arrow,{enabled:!!h,options:yt({},null==(r=g.arrow)?void 0:r.options,{element:h})}),flip:yt({enabled:!!c},g.flip)}),void 0===a&&(a={}),Array.isArray(a)?a:Object.keys(a).map(function(e){return a[e].name=e,a[e]}))})}function ed(e){if((!Xc&&0!==Xc||e)&&hl){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Xc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Xc}var td=function(e){var t;return"undefined"==typeof document?null:null==e?Zo().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function sd(e,t){var s=Je.useState(function(){return td(e)}),n=s[0],r=s[1];if(!n){var a=td(e);a&&r(a)}return Je.useEffect(function(){},[t,n]),Je.useEffect(function(){var t=td(e);t!==n&&r(t)},[e,n]),n}const nd=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;function rd(e,t){return Je.useMemo(()=>function(e,t){const s=nd(e),n=nd(t);return e=>{s&&s(e),n&&n(e)}}(e,t),[e,t])}var ad=tt.forwardRef(function(e,t){var s=e.flip,n=e.offset,r=e.placement,a=e.containerPadding,i=void 0===a?5:a,o=e.popperConfig,l=void 0===o?{}:o,c=e.transition,d=El(),u=d[0],m=d[1],h=El(),p=h[0],f=h[1],g=rd(m,t),x=sd(e.container),v=sd(e.target),y=Je.useState(!e.show),b=y[0],w=y[1],j=function(e,t,s){var n=void 0===s?{}:s,r=n.enabled,a=void 0===r||r,i=n.placement,o=void 0===i?"bottom":i,l=n.strategy,c=void 0===l?"absolute":l,d=n.modifiers,u=void 0===d?Vc:d,m=ft(n,["enabled","placement","strategy","modifiers"]),h=Je.useRef(),p=Je.useCallback(function(){var e;null==(e=h.current)||e.update()},[]),f=Je.useCallback(function(){var e;null==(e=h.current)||e.forceUpdate()},[]),g=Tl(Je.useState({placement:o,update:p,forceUpdate:f,attributes:{},styles:{popper:Wc(c),arrow:{}}})),x=g[0],v=g[1],y=Je.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,s={},n={};Object.keys(t.elements).forEach(function(e){s[e]=t.styles[e],n[e]=t.attributes[e]}),v({state:t,styles:s,attributes:n,update:p,forceUpdate:f,placement:t.placement})}}},[p,f,v]);return Je.useEffect(function(){h.current&&a&&h.current.setOptions({placement:o,strategy:c,modifiers:[].concat(u,[y,$c])})},[c,o,y,a]),Je.useEffect(function(){if(a&&null!=e&&null!=t)return h.current=qc(e,t,yt({},m,{placement:o,strategy:c,modifiers:[].concat(u,[Yc,y])})),function(){null!=h.current&&(h.current.destroy(),h.current=void 0,v(function(e){return yt({},e,{attributes:{},styles:{popper:Wc(c)}})}))}},[a,e,t]),x}(v,u,Jc({placement:r,enableEvents:!!e.show,containerPadding:i||5,flip:s,offset:n,arrowElement:p,popperConfig:l})),N=j.styles,k=j.attributes,S=ft(j,["styles","attributes"]);e.show?b&&w(!1):e.transition||b||w(!0);var _,E,T,D,A,M,C,O,P,I,R,L,F=e.show||c&&!b;if(_=u,E=e.onHide,T={disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent},A=(D=void 0===T?{}:T).disabled,M=D.clickTrigger,C=void 0===M?"click":M,O=Je.useRef(!1),P=E||Qc,I=Je.useCallback(function(e){var t,s,n=Zc(_);Gc(!!n,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),O.current=!(n&&(s=e,!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey))&&function(e){return 0===e.button}(e)&&!al(n,null!=(t=null==e.composedPath?void 0:e.composedPath()[0])?t:e.target))},[_]),R=_l(function(e){O.current||P(e)}),L=_l(function(e){27===e.keyCode&&P(e)}),Je.useEffect(function(){if(!A&&null!=_){var e=window.event,t=Kc(Zc(_)),s=Hc(t,C,I,!0),n=Hc(t,C,function(t){t!==e?R(t):e=void 0}),r=Hc(t,"keyup",function(t){t!==e?L(t):e=void 0}),a=[];return"ontouchstart"in t.documentElement&&(a=[].slice.call(t.body.children).map(function(e){return Hc(e,"mousemove",Qc)})),function(){s(),n(),r(),a.forEach(function(e){return e()})}}},[_,A,C,I,R,L]),!F)return null;var z=e.children(yt({},S,{show:!!e.show,props:yt({},k.popper,{style:N.popper,ref:g}),arrowProps:yt({},k.arrow,{style:N.arrow,ref:f})}));if(c){var B=e.onExit,U=e.onExiting,q=e.onEnter,W=e.onEntering,$=e.onEntered;z=tt.createElement(c,{in:e.show,appear:!0,onExit:B,onExiting:U,onExited:function(){w(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:q,onEntering:W,onEntered:$},z)}return x?nt.createPortal(z,x):null});function id(e,t){var s=il(e);return s?s.innerHeight:dl(e).height}function od(e,t,s){e.closest&&!s&&e.closest(t);var n=e;do{if(wl(n,t))return n;n=n.parentElement}while(n&&n!==s&&n.nodeType===document.ELEMENT_NODE);return null}ad.displayName="Overlay",ad.propTypes={show:Nt.bool,placement:Nt.oneOf(Bl),target:Nt.any,container:Nt.any,flip:Nt.bool,children:Nt.func.isRequired,containerPadding:Nt.number,popperConfig:Nt.object,rootClose:Nt.bool,rootCloseEvent:Nt.oneOf(["click","mousedown"]),rootCloseDisabled:Nt.bool,onHide:function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];var r;return e.rootClose?(r=Nt.func).isRequired.apply(r,[e].concat(s)):Nt.func.apply(Nt,[e].concat(s))},transition:Nt.elementType,onEnter:Nt.func,onEntering:Nt.func,onEntered:Nt.func,onExit:Nt.func,onExiting:Nt.func,onExited:Nt.func};var ld=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function cd(e,t){return e===t||!(!ld(e)||!ld(t))}function dd(e,t){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!cd(e[s],t[s]))return!1;return!0}function ud(e,t){void 0===t&&(t=dd);var s=null;function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(s&&s.lastThis===this&&t(n,s.lastArgs))return s.lastResult;var a=e.apply(this,n);return s={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){s=null},n}function md(e,t){var s=il(e);return s?s.innerWidth:dl(e).width}function hd(e){return $i(e)||$o(e)||Vi(e)||Hi()}var pd=kt,fd=St,gd=wt,xd=_t,vd=Object.prototype,yd=vd.hasOwnProperty;const bd=st(pd(function(e,t){e=Object(e);var s=-1,n=t.length,r=n>2?t[2]:void 0;for(r&&gd(t[0],t[1],r)&&(n=1);++s<n;)for(var a=t[s],i=xd(a),o=-1,l=i.length;++o<l;){var c=i[o],d=e[c];(void 0===d||fd(d,vd[c])&&!yd.call(e,c))&&(e[c]=a[c])}return e}));var wd=Et,jd=Tt,Nd=Dt,kd=At,Sd=Mt,_d=Rt,Ed=Ct,Td=Ot,Dd=Pt,Ad=It;const Md=st(function(e,t,s){var n=_d(e),r=n||Ed(e)||Ad(e);if(t=kd(t),null==s){var a=e&&e.constructor;s=r?n?new a:[]:Dd(e)&&Td(a)?jd(Sd(e)):{}}return(r?wd:Nd)(e,function(e,n,r){return t(s,e,n,r)}),s});function Cd(e){return e.children}!function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g}();var Od="PREV",Pd="NEXT",Id="TODAY",Rd="DATE",Ld={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Fd=Object.keys(Ld).map(function(e){return Ld[e]});Nt.oneOfType([Nt.string,Nt.func]),Nt.any,Nt.func,Nt.oneOfType([Nt.arrayOf(Nt.oneOf(Fd)),Nt.objectOf(function(e,t){if(-1!==Fd.indexOf(t)&&"boolean"==typeof e[t])return null;for(var s=arguments.length,n=new Array(s>2?s-2:0),r=2;r<s;r++)n[r-2]=arguments[r];return Nt.elementType.apply(Nt,[e,t].concat(n))})]),Nt.oneOfType([Nt.oneOf(["overlap","no-overlap"]),Nt.func]);var zd={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function Bd(e,t){var s=wo(e,"month");return wo(s,"week",t.startOfWeek())}function Ud(e,t){var s=jo(e,"month");return jo(s,"week",t.startOfWeek())}function qd(e,t){for(var s=Bd(e,t),n=Ud(e,t),r=[];To(s,n,"day");)r.push(s),s=yo(s,1,"day");return r}function Wd(e,t){var s=wo(e,t);return No(s,e)?s:yo(s,1,t)}function $d(e,t){for(var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",n=e,r=[];To(n,t,s);)r.push(n),n=yo(n,1,s);return r}function Yd(e,t){return null==t&&null==e?null:(null==t&&(t=new Date),null==e&&(e=new Date),e=wo(e,"day"),e=Io(e,Io(t)),e=Po(e,Po(t)),e=Oo(e,Oo(t)),Co(e,Co(t)))}function Vd(e){return 0===Io(e)&&0===Po(e)&&0===Oo(e)&&0===Co(e)}function Hd(e,t,s){return s&&"milliseconds"!==s?Math.round(Math.abs(+wo(e,s)/zd[s]-+wo(t,s)/zd[s])):Math.abs(+e-+t)}var Gd=Nt.oneOfType([Nt.string,Nt.func]);function Kd(e,t,s,n,r){var a="function"==typeof n?n(s,r,e):t.call(e,s,n,r);return Zi(null==a||"string"==typeof a,"`localizer format(..)` must return a string, null, or undefined"),a}function Qd(e,t,s){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+s,0,0)}function Xd(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function Zd(e,t){return Hd(e,t,"minutes")+Xd(e,t)}function Jd(e){var t=wo(e,"day");return Hd(t,e,"minutes")+Xd(t,e)}function eu(e,t){return Eo(e,t,"day")}function tu(e,t,s){return No(e,t,"minutes")?_o(t,s,"minutes"):So(t,s,"minutes")}function su(e,t){return function(e,t,s,n){return"day"===s&&(s="date"),Math.abs(Wo[s](e,void 0,n)-Wo[s](t,void 0,n))}(e,t,"day")}function nu(e){var t=e.evtA,s=t.start,n=t.end,r=t.allDay,a=e.evtB,i=a.start,o=a.end,l=a.allDay,c=+wo(s,"day")-+wo(i,"day"),d=su(s,n),u=su(i,o);return c||u-d||!!l-!!r||+s-+i||+n-+o}function ru(e){var t=e.event,s=t.start,n=t.end,r=e.range,a=r.start,i=r.end,o=wo(s,"day"),l=To(o,i,"day"),c=ko(o,n,"minutes")?So(n,a,"minutes"):_o(n,a,"minutes");return l&&c}function au(e,t){return No(e,t,"day")}function iu(e,t){return Vd(e)&&Vd(t)}var ou=zi(function e(t){var s=this;Li(this,e),Zi("function"==typeof t.format,"date localizer `format(..)` must be a function"),Zi("function"==typeof t.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||Gd,this.formats=t.formats,this.format=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Kd.apply(void 0,[s,t.format].concat(n))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||Yd,this.inRange=t.inRange||Mo,this.lt=t.lt||Eo,this.lte=t.lte||To,this.gt=t.gt||So,this.gte=t.gte||_o,this.eq=t.eq||No,this.neq=t.neq||ko,this.startOf=t.startOf||wo,this.endOf=t.endOf||jo,this.add=t.add||yo,this.range=t.range||$d,this.diff=t.diff||Hd,this.ceil=t.ceil||Wd,this.min=t.min||Do,this.max=t.max||Ao,this.minutes=t.minutes||Po,this.daySpan=t.daySpan||su,this.firstVisibleDay=t.firstVisibleDay||Bd,this.lastVisibleDay=t.lastVisibleDay||Ud,this.visibleDays=t.visibleDays||qd,this.getSlotDate=t.getSlotDate||Qd,this.getTimezoneOffset=t.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||Xd,this.getTotalMin=t.getTotalMin||Zd,this.getMinutesFromMidnight=t.getMinutesFromMidnight||Jd,this.continuesPrior=t.continuesPrior||eu,this.continuesAfter=t.continuesAfter||tu,this.sortEvents=t.sortEvents||nu,this.inEventRange=t.inEventRange||ru,this.isSameDate=t.isSameDate||au,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||iu,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function lu(e,t,s,n){var r=Ii(Ii({},e.formats),s);return Ii(Ii({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(s,n){return e.format(s,r[n]||n,t)}})}var cu=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).navigate=function(e){t.props.onNavigate(e)},t.view=function(e){t.props.onView(e)},t}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,s=e.label;return tt.createElement("div",{className:"rbc-toolbar"},tt.createElement("span",{className:"rbc-btn-group"},tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Id)},t.today),tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Od)},t.previous),tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Pd)},t.next)),tt.createElement("span",{className:"rbc-toolbar-label"},s),tt.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,s=this.props.views,n=this.props.view;if(s.length>1)return s.map(function(s){return tt.createElement("button",{type:"button",key:s,className:Qi({"rbc-active":n===s}),onClick:t.view.bind(null,s)},e[s])})}}])}();function du(e,t){e&&e.apply(null,[].concat(t))}var uu={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};var mu=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],hu=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var e=this.props,t=e.style,s=e.className,n=e.event,r=e.selected,a=e.isAllDay,i=e.onSelect,o=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,d=e.continuesPrior,u=e.continuesAfter,m=e.accessors,h=e.getters,p=e.children,f=e.components,g=f.event,x=f.eventWrapper,v=e.slotStart,y=e.slotEnd,b=Ri(e,mu);delete b.resizable;var w=m.title(n),j=m.tooltip(n),N=m.end(n),k=m.start(n),S=m.allDay(n),_=a||S||c.diff(k,c.ceil(N,"day"),"day")>1,E=h.eventProp(n,k,N,r),T=tt.createElement("div",{className:"rbc-event-content",title:j||void 0},g?tt.createElement(g,{event:n,continuesPrior:d,continuesAfter:u,title:w,isAllDay:S,localizer:c,slotStart:v,slotEnd:y}):w);return tt.createElement(x,Object.assign({},this.props,{type:"date"}),tt.createElement("div",Object.assign({},b,{style:Ii(Ii({},E.style),t),className:Qi("rbc-event",s,E.className,{"rbc-selected":r,"rbc-event-allday":_,"rbc-event-continues-prior":d,"rbc-event-continues-after":u}),onClick:function(e){return i&&i(n,e)},onDoubleClick:function(e){return o&&o(n,e)},onKeyDown:function(e){return l&&l(n,e)}}),"function"==typeof p?p(T):T))}}])}();function pu(e,t){return!(!e||null==t)&&Lt(e,t)}function fu(e,t){return(e.right-e.left)/t}function gu(e,t,s,n){var r=fu(e,n);return s?n-1-Math.floor((t-e.left)/r):Math.floor((t-e.left)/r)}function xu(e){var t,s,n,r=e.containerRef,a=e.accessors,i=e.getters,o=e.selected,l=e.components,c=e.localizer,d=e.position,u=e.show,m=e.events,h=e.slotStart,p=e.slotEnd,f=e.onSelect,g=e.onDoubleClick,x=e.onKeyPress,v=e.handleDragStart,y=e.popperRef,b=e.target,w=e.offset;s=(t={ref:y,callback:u}).ref,n=t.callback,Je.useEffect(function(){var e=function(e){s.current&&!s.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[s,n]),Je.useLayoutEffect(function(){var e=function(e){var t=e.target,s=e.offset,n=e.container,r=e.box,a=dl(t),i=a.top,o=a.left,l=a.width,c=a.height,d=dl(n),u=d.top,m=d.left,h=d.width,p=d.height,f=dl(r),g=f.width,x=f.height,v=u+p,y=m+h,b=i+x,w=o+g,j=s.x,N=s.y;return{topOffset:b>v?i-x-N:i+N+c,leftOffset:w>y?o+j-g+l:o+j}}({target:b,offset:w,container:r.current,box:y.current}),t=e.topOffset,s=e.leftOffset;y.current.style.top="".concat(t,"px"),y.current.style.left="".concat(s,"px")},[w.x,w.y,b]);var j=d.width,N={minWidth:j+j/2};return tt.createElement("div",{style:N,className:"rbc-overlay",ref:y},tt.createElement("div",{className:"rbc-overlay-header"},c.format(h,"dayHeaderFormat")),m.map(function(e,t){return tt.createElement(hu,{key:t,type:"popup",localizer:c,event:e,getters:i,onSelect:f,accessors:a,components:l,onDoubleClick:g,onKeyPress:x,continuesPrior:c.lt(a.end(e),h,"day"),continuesAfter:c.gte(a.start(e),p,"day"),slotStart:h,slotEnd:p,selected:pu(e,o),draggable:!0,onDragStart:function(){return v(e)},onDragEnd:function(){return u()}})}))}var vu=tt.forwardRef(function(e,t){return tt.createElement(xu,Object.assign({},e,{popperRef:t}))});function yu(e){var t=e.containerRef,s=e.popupOffset,n=void 0===s?5:s,r=e.overlay,a=e.accessors,i=e.localizer,o=e.components,l=e.getters,c=e.selected,d=e.handleSelectEvent,u=e.handleDoubleClickEvent,m=e.handleKeyPressEvent,h=e.handleDragStart,p=e.onHide,f=e.overlayDisplay,g=Je.useRef(null);if(!r.position)return null;var x=n;isNaN(n)||(x={x:n,y:n});var v=r.position,y=r.events,b=r.date,w=r.end;return tt.createElement(ad,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:p,target:r.target},function(e){var s=e.props;return tt.createElement(vu,Object.assign({},s,{containerRef:t,ref:g,target:r.target,offset:x,accessors:a,getters:l,selected:c,components:o,localizer:i,position:v,show:f,events:y,slotStart:b,slotEnd:w,onSelect:d,onDoubleClick:u,onKeyPress:m,handleDragStart:h}))})}vu.propTypes={accessors:Nt.object.isRequired,getters:Nt.object.isRequired,selected:Nt.object,components:Nt.object.isRequired,localizer:Nt.object.isRequired,position:Nt.object.isRequired,show:Nt.func.isRequired,events:Nt.array.isRequired,slotStart:Nt.instanceOf(Date).isRequired,slotEnd:Nt.instanceOf(Date),onSelect:Nt.func,onDoubleClick:Nt.func,onKeyPress:Nt.func,handleDragStart:Nt.func,style:Nt.object,offset:Nt.shape({x:Nt.number,y:Nt.number})};var bu=tt.forwardRef(function(e,t){return tt.createElement(yu,Object.assign({},e,{containerRef:t}))});function wu(e,t){return Hc(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,e,t,{passive:!1})}function ju(e,t){return!!function(e,t){var s=t.clientX,n=t.clientY;return od(document.elementFromPoint(s,n),".rbc-event",e)}(e,t)}function Nu(e,t){return!!function(e,t){var s=t.clientX,n=t.clientY;return od(document.elementFromPoint(s,n),".rbc-show-more",e)}(e,t)}function ku(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}bu.propTypes={popupOffset:Nt.oneOfType([Nt.number,Nt.shape({x:Nt.number,y:Nt.number})]),overlay:Nt.shape({position:Nt.object,events:Nt.array,date:Nt.instanceOf(Date),end:Nt.instanceOf(Date)}),accessors:Nt.object.isRequired,localizer:Nt.object.isRequired,components:Nt.object.isRequired,getters:Nt.object.isRequired,selected:Nt.object,handleSelectEvent:Nt.func,handleDoubleClickEvent:Nt.func,handleKeyPressEvent:Nt.func,handleDragStart:Nt.func,onHide:Nt.func,overlayDisplay:Nt.func};var Su=function(){return zi(function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.global,r=void 0!==n&&n,a=s.longPressThreshold,i=void 0===a?250:a,o=s.validContainers,l=void 0===o?[]:o;Li(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||r,this.longPressThreshold=i,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=wu("touchmove",function(){},window),this._removeKeyDownListener=wu("keydown",this._keyListener),this._removeKeyUpListener=wu("keyup",this._keyListener),this._removeDropFromOutsideListener=wu("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=wu("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()},[{key:"on",value:function(e,t){var s=this._listeners[e]||(this._listeners[e]=[]);return s.push(t),{remove:function(){var e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];var r;return(this._listeners[e]||[]).forEach(function(e){void 0===r&&(r=e.apply(void 0,s))}),r}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var t=this._selectRect;return!(!t||!this.selecting)&&_u(t,Eu(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,t){var s=this,n=null,r=null,a=null,i=function(t){n=setTimeout(function(){l(),e(t)},s.longPressThreshold),r=wu("touchmove",function(){return l()}),a=wu("touchend",function(){return l()})},o=wu("touchstart",i),l=function(){n&&clearTimeout(n),r&&r(),a&&a(),n=null,r=null,a=null};return t&&i(t),function(){l(),o()}}},{key:"_addInitialEventListener",value:function(){var e=this,t=wu("mousedown",function(t){e._removeInitialEventListener(),e._handleInitialEvent(t),e._removeInitialEventListener=wu("mousedown",e._handleInitialEvent)}),s=wu("touchstart",function(t){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,t)});this._removeInitialEventListener=function(){t(),s()}}},{key:"_dropFromOutsideListener",value:function(e){var t=ku(e),s=t.pageX,n=t.pageY,r=t.clientX,a=t.clientY;this.emit("dropFromOutside",{x:s,y:n,clientX:r,clientY:a}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var t=ku(e),s=t.pageX,n=t.pageY,r=t.clientX,a=t.clientY;this.emit("dragOverFromOutside",{x:s,y:n,clientX:r,clientY:a}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var t,s=ku(e),n=s.clientX,r=s.clientY,a=s.pageX,i=s.pageY,o=this.container();if(3!==e.which&&2!==e.button&&(c=n,d=r,!(l=o)||al(l,document.elementFromPoint(c,d)))){var l,c,d;if(!this.globalMouse&&o&&!al(o,e.target)){var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;"object"!==Mi(e)&&(e={top:e,left:e,right:e,bottom:e});return e}(0),m=u.top,h=u.left,p=u.bottom,f=u.right;if(!_u({top:(t=Eu(o)).top-m,left:t.left-h,bottom:t.bottom+p,right:t.right+f},{top:i,left:a}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:a,y:i,clientX:n,clientY:r}))switch(e.type){case"mousedown":this._removeEndListener=wu("mouseup",this._handleTerminatingEvent),this._onEscListener=wu("keydown",this._handleTerminatingEvent),this._removeMoveListener=wu("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=wu("touchend",this._handleTerminatingEvent),this._removeMoveListener=wu("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var t=e.target,s=this.validContainers;return!(s&&s.length&&t)||s.some(function(e){return!!t.closest(e)})}},{key:"_handleTerminatingEvent",value:function(e){var t=this.selecting,s=this._selectRect;if(!t&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,e){var n=!this.container||al(this.container(),e.target),r=this._isWithinValidContainer(e);return"Escape"!==e.key&&r?!t&&n?this._handleClickEvent(e):t?this.emit("select",s):this.emit("reset"):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var t=ku(e),s=t.pageX,n=t.pageY,r=t.clientX,a=t.clientY,i=(new Date).getTime();return this._lastClickData&&i-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:n,clientX:r,clientY:a})):(this._lastClickData={timestamp:i},this.emit("click",{x:s,y:n,clientX:r,clientY:a}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var t=this._initialEventData,s=t.x,n=t.y,r=ku(e),a=r.pageX,i=r.pageY,o=Math.abs(s-a),l=Math.abs(n-i),c=Math.min(a,s),d=Math.min(i,n),u=this.selecting,m=this.isClick(a,i);(!m||u||o||l)&&(u||m||this.emit("selectStart",this._initialEventData),m||(this.selecting=!0,this._selectRect={top:d,left:c,x:a,y:i,right:c+o,bottom:d+l},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,t){var s=this._initialEventData,n=s.x,r=s.y;return!s.isTouch&&Math.abs(e-n)<=5&&Math.abs(t-r)<=5}}])}();function _u(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Eu(e),r=n.top,a=n.left,i=n.right,o=void 0===i?a:i,l=n.bottom,c=void 0===l?r:l,d=Eu(t),u=d.top,m=d.left,h=d.right,p=void 0===h?m:h,f=d.bottom;return!(c-s<u||r+s>(void 0===f?u:f)||o-s<m||a+s>p)}function Eu(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),s=t.left+Tu("left"),n=t.top+Tu("top");return{top:n,left:s,right:(e.offsetWidth||0)+s,bottom:(e.offsetHeight||0)+n}}function Tu(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var Du=function(){function e(t,s){var n;return Li(this,e),(n=qi(this,e,[t,s])).state={selecting:!1},n.containerRef=Je.createRef(),n}return Wi(e,tt.Component),zi(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,t=e.range,s=e.getNow,n=e.getters,r=e.date,a=e.components.dateCellWrapper,i=e.localizer,o=this.state,l=o.selecting,c=o.startIdx,d=o.endIdx,u=s();return tt.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},t.map(function(e,s){var o=l&&s>=c&&s<=d,m=n.dayProp(e),h=m.className,p=m.style;return tt.createElement(a,{key:s,value:e,range:t},tt.createElement("div",{style:p,className:Qi("rbc-day-bg",h,o&&"rbc-selected-cell",i.isSameDate(e,u)&&"rbc-today",r&&i.neq(r,e,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var e=this,t=this.containerRef.current,s=this._selector=new Su(this.props.container,{longPressThreshold:this.props.longPressThreshold}),n=function(s,n){if(!ju(t,s)&&!Nu(t,s)){var r=Eu(t),a=e.props,i=a.range,o=a.rtl;if(c=r,u=(d=s).x,(m=d.y)>=c.top&&m<=c.bottom&&u>=c.left&&u<=c.right){var l=gu(r,s.x,o,i.length);e._selectSlot({startIdx:l,endIdx:l,action:n,box:s})}}var c,d,u,m;e._initial={},e.setState({selecting:!1})};s.on("selecting",function(n){var r=e.props,a=r.range,i=r.rtl,o=-1,l=-1;if(e.state.selecting||(du(e.props.onSelectStart,[n]),e._initial={x:n.x,y:n.y}),s.isSelected(t)){var c=Eu(t),d=function(e,t,s,n,r){var a=-1,i=-1,o=n-1,l=fu(t,n),c=gu(t,s.x,r,n),d=t.top<s.y&&t.bottom>s.y,u=t.top<e.y&&t.bottom>e.y,m=e.y>t.bottom,h=t.top>e.y;return s.top<t.top&&s.bottom>t.bottom&&(a=0,i=o),d&&(h?(a=0,i=c):m&&(a=c,i=o)),u&&(a=i=r?o-Math.floor((e.x-t.left)/l):Math.floor((e.x-t.left)/l),d?c<a?a=c:i=c:e.y<s.y?i=o:a=0),{startIdx:a,endIdx:i}}(e._initial,c,n,a.length,i);o=d.startIdx,l=d.endIdx}e.setState({selecting:!0,startIdx:o,endIdx:l})}),s.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!ju(e.containerRef.current,t)}),s.on("click",function(e){return n(e,"click")}),s.on("doubleClick",function(e){return n(e,"doubleClick")}),s.on("select",function(t){e._selectSlot(Ii(Ii({},e.state),{},{action:"select",bounds:t})),e._initial={},e.setState({selecting:!1}),du(e.props.onSelectEnd,[e.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var t=e.endIdx,s=e.startIdx,n=e.action,r=e.bounds,a=e.box;-1!==t&&-1!==s&&this.props.onSelectSlot&&this.props.onSelectSlot({start:s,end:t,action:n,bounds:r,box:a,resourceId:this.props.resourceId})}}])}(),Au=(Nt.object.isRequired,Nt.object,Nt.bool,Nt.object.isRequired,Nt.object.isRequired,Nt.object.isRequired,Nt.object.isRequired,Nt.func,Nt.func,Nt.func,{segments:[],selected:{}}),Mu=function(e,t){var s=e.selected;e.isAllDay;var n=e.accessors,r=e.getters,a=e.onSelect,i=e.onDoubleClick,o=e.onKeyPress,l=e.localizer,c=e.slotMetrics,d=e.components,u=e.resizable,m=c.continuesPrior(t),h=c.continuesAfter(t);return tt.createElement(hu,{event:t,getters:r,localizer:l,accessors:n,components:d,onSelect:a,onDoubleClick:i,onKeyPress:o,continuesPrior:m,continuesAfter:h,slotStart:c.first,slotEnd:c.last,selected:pu(t,s),resizable:u})},Cu=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",r=Math.abs(t)/e*100+"%";return tt.createElement("div",{key:s,className:"rbc-row-segment",style:{WebkitFlexBasis:r,flexBasis:r,maxWidth:r}},n)},Ou=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var e=this,t=this.props,s=t.segments,n=t.slotMetrics.slots,r=t.className,a=1;return tt.createElement("div",{className:Qi(r,"rbc-row")},s.reduce(function(t,s,r){var i=s.event,o=s.left,l=s.right,c=s.span,d="_lvl_"+r,u=o-a,m=Mu(e.props,i);return u&&t.push(Cu(n,u,"".concat(d,"_gap"))),t.push(Cu(n,c,d,m)),a=l+1,t},[]))}}])}();function Pu(e){var t=e.dateRange,s=e.unit,n=void 0===s?"day":s,r=e.localizer;return{first:t[0],last:r.add(t[t.length-1],1,n)}}function Iu(e){var t,s,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=[],i=[];for(t=0;t<e.length;t++){for(n=e[t],s=0;s<a.length&&Lu(n,a[s]);s++);s>=r?i.push(n):(a[s]||(a[s]=[])).push(n)}for(t=0;t<a.length;t++)a[t].sort(function(e,t){return e.left-t.left});return{levels:a,extra:i}}function Ru(e,t,s,n,r){var a={start:n.start(e),end:n.end(e)},i={start:t,end:s};return r.inEventRange({event:a,range:i})}function Lu(e,t){return t.some(function(t){return t.left<=e.right&&t.right>=e.left})}function Fu(e,t,s,n){var r={start:s.start(e),end:s.end(e),allDay:s.allDay(e)},a={start:s.start(t),end:s.end(t),allDay:s.allDay(t)};return n.sortEvents({evtA:r,evtB:a})}Ou.defaultProps=Ii({},Au);var zu=function(e,t){return e.left<=t&&e.right>=t},Bu=function(e,t){return e.filter(function(e){return zu(e,t)}).map(function(e){return e.event})},Uu=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){for(var e=this.props,t=e.segments,s=e.slotMetrics.slots,n=Iu(t).levels[0],r=1,a=1,i=[];r<=s;){var o="_lvl_"+r,l=n.filter(function(e){return zu(e,r)})[0]||{},c=l.event,d=l.left,u=l.right,m=l.span;if(c){var h=Math.max(0,d-a);if(this.canRenderSlotEvent(d,m)){var p=Mu(this.props,c);h&&i.push(Cu(s,h,o+"_gap")),i.push(Cu(s,m,o,p)),a=r=u+1}else h&&i.push(Cu(s,h,o+"_gap")),i.push(Cu(s,1,o,this.renderShowMore(t,r))),a=r+=1}else r++}return tt.createElement("div",{className:"rbc-row"},i)}},{key:"canRenderSlotEvent",value:function(e,t){var s=this.props.segments;return Ft(e,e+t).every(function(e){return 1===Bu(s,e).length})}},{key:"renderShowMore",value:function(e,t){var s=this,n=this.props,r=n.localizer,a=n.slotMetrics,i=n.components,o=a.getEventsForSlot(t),l=Bu(e,t),c=l.length;if(null!=i&&i.showMore){var d=i.showMore,u=a.getDateForSlot(t-1);return!!c&&tt.createElement(d,{localizer:r,slotDate:u,slot:t,count:c,events:o,remainingEvents:l})}return!!c&&tt.createElement("button",{type:"button",key:"sm_"+t,className:Qi("rbc-button-link","rbc-show-more"),onClick:function(e){return s.showMore(t,e)}},r.messages.showMore(c,l,o))}},{key:"showMore",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onShowMore(e,t.target)}}])}();Uu.defaultProps=Ii({},Au);var qu=function(e){var t=e.children;return tt.createElement("div",{className:"rbc-row-content-scroll-container"},t)},Wu=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function $u(){return ud(function(e){for(var t=e.range,s=e.events,n=e.maxRows,r=e.minRows,a=e.accessors,i=e.localizer,o=Pu({dateRange:t,localizer:i}),l=o.first,c=o.last,d=s.map(function(e){return function(e,t,s,n){var r=Pu({dateRange:t,localizer:n}),a=r.first,i=r.last,o=n.diff(a,i,"day"),l=n.max(n.startOf(s.start(e),"day"),a),c=n.min(n.ceil(s.end(e),"day"),i),d=Wt(t,function(e){return n.isSameDate(e,l)}),u=n.diff(l,c,"day");return u=Math.min(u,o),{event:e,span:u=Math.max(u-n.segmentOffset,1),left:d+1,right:Math.max(d+u,1)}}(e,t,a,i)}),u=Iu(d,Math.max(n-1,1)),m=u.levels,h=u.extra,p=h.length>0?r-1:r;m.length<p;)m.push([]);return{first:l,last:c,levels:m,extra:h,range:t,slots:t.length,clone:function(t){return $u()(Ii(Ii({},e),t))},getDateForSlot:function(e){return t[e]},getSlotForDate:function(e){return t.find(function(t){return i.isSameDate(t,e)})},getEventsForSlot:function(e){return d.filter(function(t){return function(e,t){return e.left<=t&&e.right>=t}(t,e)}).map(function(e){return e.event})},continuesPrior:function(e){return i.continuesPrior(a.start(e),l)},continuesAfter:function(e){var t=a.start(e),s=a.end(e);return i.continuesAfter(t,s,c)}}},Wu)}var Yu=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).handleSelectSlot=function(e){var s=t.props,n=s.range;(0,s.onSelectSlot)(n.slice(e.start,e.end+1),e)},t.handleShowMore=function(e,s){var n,r,a,i=t.props,o=i.range,l=i.onShowMore,c=t.slotMetrics(t.props),d=(n=t.containerRef.current,r=".rbc-row-bg",jl(n.querySelectorAll(r)))[0];d&&(a=d.children[e-1]),l(c.getEventsForSlot(e),o[e-1],a,e,s)},t.getContainer=function(){var e=t.props.container;return e?e():t.containerRef.current},t.renderHeadingCell=function(e,s){var n=t.props,r=n.renderHeader,a=n.getNow,i=n.localizer;return r({date:e,key:"header_".concat(s),className:Qi("rbc-date-cell",i.isSameDate(e,a())&&"rbc-now")})},t.renderDummy=function(){var e=t.props,s=e.className,n=e.range,r=e.renderHeader,a=e.showAllEvents;return tt.createElement("div",{className:s,ref:t.containerRef},tt.createElement("div",{className:Qi("rbc-row-content",a&&"rbc-row-content-scrollable")},r&&tt.createElement("div",{className:"rbc-row",ref:t.headingRowRef},n.map(t.renderHeadingCell)),tt.createElement("div",{className:"rbc-row",ref:t.eventRowRef},tt.createElement("div",{className:"rbc-row-segment"},tt.createElement("div",{className:"rbc-event"},tt.createElement("div",{className:"rbc-event-content"},""))))))},t.containerRef=Je.createRef(),t.headingRowRef=Je.createRef(),t.eventRowRef=Je.createRef(),t.slotMetrics=$u(),t}return Wi(e,tt.Component),zi(e,[{key:"getRowLimit",value:function(){var e,t=id(this.eventRowRef.current),s=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?id(this.headingRowRef.current):0,n=id(this.containerRef.current)-s;return Math.max(Math.floor(n/t),1)}},{key:"render",value:function(){var e=this.props,t=e.date,s=e.rtl,n=e.range,r=e.className,a=e.selected,i=e.selectable,o=e.renderForMeasure,l=e.accessors,c=e.getters,d=e.components,u=e.getNow,m=e.renderHeader,h=e.onSelect,p=e.localizer,f=e.onSelectStart,g=e.onSelectEnd,x=e.onDoubleClick,v=e.onKeyPress,y=e.resourceId,b=e.longPressThreshold,w=e.isAllDay,j=e.resizable,N=e.showAllEvents;if(o)return this.renderDummy();var k=this.slotMetrics(this.props),S=k.levels,_=k.extra,E=N?qu:Cd,T=d.weekWrapper,D={selected:a,accessors:l,getters:c,localizer:p,components:d,onSelect:h,onDoubleClick:x,onKeyPress:v,resourceId:y,slotMetrics:k,resizable:j};return tt.createElement("div",{className:r,role:"rowgroup",ref:this.containerRef},tt.createElement(Du,{localizer:p,date:t,getNow:u,rtl:s,range:n,selectable:i,container:this.getContainer,getters:c,onSelectStart:f,onSelectEnd:g,onSelectSlot:this.handleSelectSlot,components:d,longPressThreshold:b,resourceId:y}),tt.createElement("div",{className:Qi("rbc-row-content",N&&"rbc-row-content-scrollable"),role:"row"},m&&tt.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},n.map(this.renderHeadingCell)),tt.createElement(E,null,tt.createElement(T,Object.assign({isAllDay:w},D,{rtl:this.props.rtl}),S.map(function(e,t){return tt.createElement(Ou,Object.assign({key:t,segments:e},D))}),!!_.length&&tt.createElement(Uu,Object.assign({segments:_,onShowMore:this.handleShowMore},D))))))}}])}();Yu.defaultProps={minRows:0,maxRows:1/0};var Vu=function(e){var t=e.label;return tt.createElement("span",{role:"columnheader","aria-sort":"none"},t)},Hu=function(e){var t=e.label,s=e.drilldownView,n=e.onDrillDown;return s?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:n},t):tt.createElement("span",null,t)},Gu=["date","className"],Ku=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).getContainer=function(){return t.containerRef.current},t.renderWeek=function(e,s){var n=t.props,r=n.events,a=n.components,i=n.selectable,o=n.getNow,l=n.selected,c=n.date,d=n.localizer,u=n.longPressThreshold,m=n.accessors,h=n.getters,p=n.showAllEvents,f=t.state,g=f.needLimitMeasure,x=f.rowLimit,v=function(e,t,s,n,r){return e.filter(function(e){return Ru(e,t,s,n,r)})}(Yo(r),e[0],e[e.length-1],m,d),y=function(e,t,s){var n=Yo(e),r=[],a=[];n.forEach(function(e){var n=t.start(e),i=t.end(e);s.daySpan(n,i)>1?r.push(e):a.push(e)});var i=r.sort(function(e,n){return Fu(e,n,t,s)}),o=a.sort(function(e,n){return Fu(e,n,t,s)});return[].concat(Yo(i),Yo(o))}(v,m,d);return tt.createElement(Yu,{key:s,ref:0===s?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:o,date:c,range:e,events:y,maxRows:p?1/0:x,selected:l,selectable:i,components:a,accessors:m,getters:h,localizer:d,renderHeader:t.readerDateHeading,renderForMeasure:g,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:u,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:p})},t.readerDateHeading=function(e){var s=e.date,n=e.className,r=Ri(e,Gu),a=t.props,i=a.date,o=a.getDrilldownView,l=a.localizer,c=l.neq(s,i,"month"),d=l.isSameDate(s,i),u=o(s),m=l.format(s,"dateFormat"),h=t.props.components.dateHeader||Hu;return tt.createElement("div",Object.assign({},r,{className:Qi(n,c&&"rbc-off-range",d&&"rbc-current"),role:"cell"}),tt.createElement(h,{label:m,date:s,drilldownView:u,isOffRange:c,onDrillDown:function(e){return t.handleHeadingClick(s,u,e)}}))},t.handleSelectSlot=function(e,s){t._pendingSelection=t._pendingSelection.concat(e),clearTimeout(t._selectTimer),t._selectTimer=setTimeout(function(){return t.selectDates(s)})},t.handleHeadingClick=function(e,s,n){n.preventDefault(),t.clearSelection(),du(t.props.onDrillDown,[e,s])},t.handleSelectEvent=function(){t.clearSelection();for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onSelectEvent,s)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onDoubleClickEvent,s)},t.handleKeyPressEvent=function(){t.clearSelection();for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onKeyPressEvent,s)},t.handleShowMore=function(e,s,n,r,a){var i=t.props,o=i.popup,l=i.onDrillDown,c=i.onShowMore,d=i.getDrilldownView,u=i.doShowMoreDrillDown;if(t.clearSelection(),o){var m=ml(n,t.containerRef.current);t.setState({overlay:{date:s,events:e,position:m,target:a}})}else u&&du(l,[s,d(s)||Ld.DAY]);du(c,[e,s,r])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=Je.createRef(),t.slotRowRef=Je.createRef(),t._bgRows=[],t._pendingSelection=[],t}return Wi(e,tt.Component),zi(e,[{key:"componentDidMount",value:function(){var e,t=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||bl(function(){e=!1,t.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,t=e.date,s=e.localizer,n=e.className,r=s.visibleDays(t,s),a=Xo(r,7);return this._weekCount=a.length,tt.createElement("div",{className:Qi("rbc-month-view",n),role:"table","aria-label":"Month View",ref:this.containerRef},tt.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(a[0])),a.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var t=this.props,s=t.localizer,n=t.components,r=e[0],a=e[e.length-1],i=n.header||Vu;return s.range(r,a,"day").map(function(e,t){return tt.createElement("div",{key:"header_"+t,className:"rbc-header"},tt.createElement(i,{date:e,localizer:s,label:s.format(e,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var e,t,s=this,n=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},r=this.props,a=r.accessors,i=r.localizer,o=r.components,l=r.getters,c=r.selected,d=r.popupOffset,u=r.handleDragStart;return tt.createElement(bu,{overlay:n,accessors:a,localizer:i,components:o,getters:l,selected:c,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:u,show:!!n.position,overlayDisplay:this.overlayDisplay,onHide:function(){return s.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var t=this._pendingSelection.slice();this._pendingSelection=[],t.sort(function(e,t){return+e-+t});var s=new Date(t[0]),n=new Date(t[t.length-1]);n.setDate(t[t.length-1].getDate()+1),du(this.props.onSelectSlot,{slots:t,start:s,end:n,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var s=e.date;return{date:s,needLimitMeasure:e.localizer.neq(s,t.date,"month")}}}])}();Ku.range=function(e,t){var s=t.localizer;return{start:s.firstVisibleDay(e,s),end:s.lastVisibleDay(e,s)}},Ku.navigate=function(e,t,s){var n=s.localizer;switch(t){case Od:return n.add(e,-1,"month");case Pd:return n.add(e,1,"month");default:return e}},Ku.title=function(e,t){return t.localizer.format(e,"monthHeaderFormat")};var Qu=function(e){var t=e.min,s=e.max,n=e.step,r=e.slots,a=e.localizer;return"".concat(+a.startOf(t,"minutes"))+"".concat(+a.startOf(s,"minutes"))+"".concat(n,"-").concat(r)};function Xu(e){for(var t=e.min,s=e.max,n=e.step,r=e.timeslots,a=e.localizer,i=Qu({start:t,end:s,step:n,timeslots:r,localizer:a}),o=1+a.getTotalMin(t,s),l=a.getMinutesFromMidnight(t),c=Math.ceil((o-1)/(n*r)),d=c*r,u=new Array(c),m=new Array(d),h=0;h<c;h++){u[h]=new Array(r);for(var p=0;p<r;p++){var f=h*r+p,g=f*n;m[f]=u[h][p]=a.getSlotDate(t,l,g)}}var x=m.length*n;function v(e){var s=a.diff(t,e,"minutes")+a.getDstOffset(t,e);return Math.min(s,o)}return m.push(a.getSlotDate(t,l,x)),{groups:u,update:function(e){return Qu(e)!==i?Xu(e):this},dateIsInGroup:function(e,t){var n=u[t+1];return a.inRange(e,u[t][0],n?n[0]:s,"minutes")},nextSlot:function(e){var t=m[Math.min(m.findIndex(function(t){return t===e||a.eq(t,e)})+1,m.length-1)];return a.eq(t,e)&&(t=a.add(e,n,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(m.length-1,Math.max(0,Math.floor(e*d)));return m[t]},closestSlotFromPoint:function(e,t){var s=Math.abs(t.top-t.bottom);return this.closestSlotToPosition((e.y-t.top)/s)},closestSlotFromDate:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a.lt(e,t,"minutes"))return m[0];if(a.gt(e,s,"minutes"))return m[m.length-1];var i=a.diff(t,e,"minutes");return m[(i-i%n)/n+r]},startsBeforeDay:function(e){return a.lt(e,t,"day")},startsAfterDay:function(e){return a.gt(e,s,"day")},startsBefore:function(e){return a.lt(a.merge(t,e),t,"minutes")},startsAfter:function(e){return a.gt(a.merge(s,e),s,"minutes")},getRange:function(e,r,i,o){i||(e=a.min(s,a.max(t,e))),o||(r=a.min(s,a.max(t,r)));var l=v(e),c=v(r),u=c>n*d&&!a.eq(s,r)?(l-n)/(n*d)*100:l/(n*d)*100;return{top:u,height:c/(n*d)*100-u,start:v(e),startDate:e,end:v(r),endDate:r}},getCurrentTimePosition:function(e){return v(e)/(n*d)*100}}}var Zu=function(){return zi(function e(t,s){var n=s.accessors,r=s.slotMetrics;Li(this,e);var a=r.getRange(n.start(t),n.end(t)),i=a.start,o=a.startDate,l=a.end,c=a.endDate,d=a.top,u=a.height;this.start=i,this.end=l,this.startMs=+o,this.endMs=+c,this.top=d,this.height=u,this.data=t},[{key:"_width",get:function(){return this.rows?100/(this.rows.reduce(function(e,t){return Math.max(e,t.leaves.length+1)},0)+1):this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,t=Math.min(100,1.7*this._width);if(this.rows)return t;if(this.leaves)return this.leaves.length>0?t:e;var s=this.row.leaves;return s.indexOf(this)===s.length-1?e:t}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,t=e.leaves,s=e.xOffset,n=e._width;return s+(t.indexOf(this)+1)*n}}])}();function Ju(e,t,s){return Math.abs(t.start-e.start)<s||t.start>e.start&&t.start<e.end}function em(e){for(var t=e.events,s=e.minimumStartDifference,n=e.slotMetrics,r=e.accessors,a=function(e){for(var t=$t(e,["startMs",function(e){return-e.endMs}]),s=[];t.length>0;){var n=t.shift();s.push(n);for(var r=0;r<t.length;r++){var a=t[r];if(!(n.endMs>a.startMs)){if(r>0){var i=t.splice(r,1)[0];s.push(i)}break}}}return s}(t.map(function(e){return new Zu(e,{slotMetrics:n,accessors:r})})),i=[],o=function(){var e=a[l],t=i.find(function(t){return t.end>e.start||Math.abs(e.start-t.start)<s});if(!t)return e.rows=[],i.push(e),1;e.container=t;for(var n=null,r=t.rows.length-1;!n&&r>=0;r--)Ju(t.rows[r],e,s)&&(n=t.rows[r]);n?(n.leaves.push(e),e.row=n):(e.leaves=[],t.rows.push(e))},l=0;l<a.length;l++)o();return a.map(function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}})}function tm(e,t,s){for(var n=0;n<e.friends.length;++n)if(!(s.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,s.push(e.friends[n]);var r=tm(e.friends[n],t,s);t=t>r?t:r}return t}var sm={overlap:em,"no-overlap":function(e){var t=em({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});t.sort(function(e,t){return e=e.style,t=t.style,e.top!==t.top?e.top>t.top?1:-1:e.height!==t.height?e.top+e.height<t.top+t.height?1:-1:0});for(var s=0;s<t.length;++s)t[s].friends=[],delete t[s].style.left,delete t[s].style.left,delete t[s].idx,delete t[s].size;for(var n=0;n<t.length-1;++n)for(var r=t[n],a=r.style.top,i=r.style.top+r.style.height,o=n+1;o<t.length;++o){var l=t[o],c=l.style.top,d=l.style.top+l.style.height;(c>=a&&d<=i||d>a&&d<=i||c>=a&&c<i)&&(r.friends.push(l),l.friends.push(r))}for(var u=0;u<t.length;++u){for(var m=t[u],h=[],p=0;p<100;++p)h.push(1);for(var f=0;f<m.friends.length;++f)void 0!==m.friends[f].idx&&(h[m.friends[f].idx]=0);m.idx=h.indexOf(1)}for(var g=0;g<t.length;++g){var x;if(!t[g].size){var v=[];x=100/(tm(t[g],0,v)+1),t[g].size=x;for(var y=0;y<v.length;++y)v[y].size=x}}for(var b=0;b<t.length;++b){var w=t[b];w.style.left=w.idx*w.size;for(var j=0,N=0;N<w.friends.length;++N){var k=w.friends[N].idx;j=j>k?j:k}j<=w.idx&&(w.size=100-w.idx*w.size);var S=0===w.idx?0:3;w.style.width="calc(".concat(w.size,"% - ").concat(S,"px)"),w.style.height="calc(".concat(w.style.height,"% - 2px)"),w.style.xOffset="calc(".concat(w.style.left,"% + ").concat(S,"px)")}return t}};var nm=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,Je.Component),zi(e,[{key:"render",value:function(){var e=this.props,t=e.renderSlot,s=e.resource,n=e.group,r=e.getters,a=e.components,i=(void 0===a?{}:a).timeSlotWrapper,o=void 0===i?Cd:i,l=r?r.slotGroupProp(n):{};return tt.createElement("div",Object.assign({className:"rbc-timeslot-group"},l),n.map(function(e,n){var a=r?r.slotProp(e,s):{};return tt.createElement(o,{key:n,value:e,resource:s},tt.createElement("div",Object.assign({},a,{className:Qi("rbc-time-slot",a.className)}),t&&t(e,n)))}))}}])}();function rm(e){return"string"==typeof e?e:e+"%"}function am(e){var t=e.style,s=e.className,n=e.event,r=e.accessors,a=e.rtl,i=e.selected,o=e.label,l=e.continuesPrior,c=e.continuesAfter,d=e.getters,u=e.onClick,m=e.onDoubleClick,h=e.isBackgroundEvent,p=e.onKeyPress,f=e.components,g=f.event,x=f.eventWrapper,v=r.title(n),y=r.tooltip(n),b=r.end(n),w=r.start(n),j=d.eventProp(n,w,b,i),N=[tt.createElement("div",{key:"1",className:"rbc-event-label"},o),tt.createElement("div",{key:"2",className:"rbc-event-content"},g?tt.createElement(g,{event:n,title:v}):v)],k=t.height,S=t.top,_=t.width,E=t.xOffset,T=Ii(Ii({},j.style),{},Oi({top:rm(S),height:rm(k),width:rm(_)},a?"right":"left",rm(E)));return tt.createElement(x,Object.assign({type:"time"},e),tt.createElement("div",{role:"button",tabIndex:0,onClick:u,onDoubleClick:m,style:T,onKeyDown:p,title:y?("string"==typeof o?o+": ":"")+y:void 0,className:Qi(h?"rbc-background-event":"rbc-event",s,j.className,{"rbc-selected":i,"rbc-event-continues-earlier":l,"rbc-event-continues-later":c})},N))}var im=function(e){var t=e.children,s=e.className,n=e.style,r=e.innerRef;return tt.createElement("div",{className:s,style:n,ref:r},t)},om=tt.forwardRef(function(e,t){return tt.createElement(im,Object.assign({},e,{innerRef:t}))}),lm=["dayProp"],cm=["eventContainerWrapper"],dm=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(e){var s=e.events,n=e.isBackgroundEvent,r=t.props,a=r.rtl,i=r.selected,o=r.accessors,l=r.localizer,c=r.getters,d=r.components,u=r.step,m=r.timeslots,h=r.dayLayoutAlgorithm,p=r.resizable,f=t.slotMetrics,g=l.messages,x=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t,s=e.dayLayoutAlgorithm,n=s;return s in sm&&(n=sm[s]),(t=n)&&t.constructor&&t.call&&t.apply?n.apply(this,arguments):[]}({events:s,accessors:o,slotMetrics:f,minimumStartDifference:Math.ceil(u*m/2),dayLayoutAlgorithm:h});return x.map(function(e,s){var r,u,m=e.event,h=e.style,x=o.end(m),v=o.start(m),y=null!==(r=o.eventId(m))&&void 0!==r?r:"evt_"+s,b="eventTimeRangeFormat",w=f.startsBeforeDay(v),j=f.startsAfterDay(x);w?b="eventTimeRangeEndFormat":j&&(b="eventTimeRangeStartFormat"),u=w&&j?g.allDay:l.format({start:v,end:x},b);var N=w||f.startsBefore(v),k=j||f.startsAfter(x);return tt.createElement(am,{style:h,event:m,label:u,key:y,getters:c,rtl:a,components:d,continuesPrior:N,continuesAfter:k,accessors:o,resource:t.props.resource,selected:pu(m,i),onClick:function(e){return t._select(Ii(Ii(Ii({},m),t.props.resource&&{sourceResource:t.props.resource}),n&&{isBackgroundEvent:!0}),e)},onDoubleClick:function(e){return t._doubleClick(m,e)},isBackgroundEvent:n,onKeyPress:function(e){return t._keyPress(m,e)},resizable:p})})},t._selectable=function(){var e=t.containerRef.current,s=t.props,n=s.longPressThreshold,r=s.localizer,a=t._selector=new Su(function(){return e},{longPressThreshold:n}),i=function(e){var s=t.props.onSelecting,n=t.state||{},a=o(e),i=a.startDate,l=a.endDate;s&&(r.eq(n.startDate,i,"minutes")&&r.eq(n.endDate,l,"minutes")||!1===s({start:i,end:l,resourceId:t.props.resource}))||t.state.start===a.start&&t.state.end===a.end&&t.state.selecting===a.selecting||t.setState(a)},o=function(s){var n=t.slotMetrics.closestSlotFromPoint(s,Eu(e));t.state.selecting||(t._initialSlot=n);var a=t._initialSlot;r.lte(a,n)?n=t.slotMetrics.nextSlot(n):r.gt(a,n)&&(a=t.slotMetrics.nextSlot(a));var i=t.slotMetrics.getRange(r.min(a,n),r.max(a,n));return Ii(Ii({},i),{},{selecting:!0,top:"".concat(i.top,"%"),height:"".concat(i.height,"%")})},l=function(e,s){if(!ju(t.containerRef.current,e)){var n=o(e),r=n.startDate,a=n.endDate;t._selectSlot({startDate:r,endDate:a,action:s,box:e})}t.setState({selecting:!1})};a.on("selecting",i),a.on("selectStart",i),a.on("beforeSelect",function(e){if("ignoreEvents"===t.props.selectable)return!ju(t.containerRef.current,e)}),a.on("click",function(e){return l(e,"click")}),a.on("doubleClick",function(e){return l(e,"doubleClick")}),a.on("select",function(e){t.state.selecting&&(t._selectSlot(Ii(Ii({},t.state),{},{action:"select",bounds:e})),t.setState({selecting:!1}))}),a.on("reset",function(){t.state.selecting&&t.setState({selecting:!1})})},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(e){for(var s=e.startDate,n=e.endDate,r=e.action,a=e.bounds,i=e.box,o=s,l=[];t.props.localizer.lte(o,n);)l.push(o),o=new Date(+o+60*t.props.step*1e3);du(t.props.onSelectSlot,{slots:l,start:s,end:n,resourceId:t.props.resource,action:r,bounds:a,box:i})},t._select=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onSelectEvent,s)},t._doubleClick=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onDoubleClickEvent,s)},t._keyPress=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onKeyPressEvent,s)},t.slotMetrics=Xu(t.props),t.containerRef=Je.createRef(),t}return Wi(e,tt.Component),zi(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(e,t){this.props.selectable&&!e.selectable&&this._selectable(),!this.props.selectable&&e.selectable&&this._teardownSelectable();var s=this.props,n=s.getNow,r=s.isNow,a=s.localizer,i=s.date,o=s.min,l=s.max,c=a.neq(e.getNow(),n(),"minutes");if(e.isNow!==r||c){if(this.clearTimeIndicatorInterval(),r){var d=!c&&a.eq(e.date,i,"minutes")&&t.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(d)}}else r&&(a.neq(e.min,o,"minutes")||a.neq(e.max,l,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||t||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,t=e.min,s=e.max,n=(0,e.getNow)();if(n>=t&&n<=s){var r=this.slotMetrics.getCurrentTimePosition(n);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:r})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,t=e.date,s=e.max,n=e.rtl,r=e.isNow,a=e.resource,i=e.accessors,o=e.localizer,l=e.getters,c=l.dayProp,d=Ri(l,lm),u=e.components,m=u.eventContainerWrapper,h=Ri(u,cm);this.slotMetrics=this.slotMetrics.update(this.props);var p=this.slotMetrics,f=this.state,g=f.selecting,x=f.top,v=f.height,y={start:f.startDate,end:f.endDate},b=c(s,a),w=b.className,j=b.style,N=h.dayColumnWrapper||om;return tt.createElement(N,{ref:this.containerRef,date:t,style:j,className:Qi(w,"rbc-day-slot","rbc-time-column",r&&"rbc-now",r&&"rbc-today",g&&"rbc-slot-selecting"),slotMetrics:p,resource:a},p.groups.map(function(e,t){return tt.createElement(nm,{key:t,group:e,resource:a,getters:d,components:h})}),tt.createElement(m,{localizer:o,resource:a,accessors:i,getters:d,components:h,slotMetrics:p},tt.createElement("div",{className:Qi("rbc-events-container",n&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),g&&tt.createElement("div",{className:"rbc-slot-selection",style:{top:x,height:v}},tt.createElement("span",null,o.format(y,"selectRangeFormat"))),r&&this.intervalTriggered&&tt.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}])}();dm.defaultProps={dragThroughEvents:!0,timeslots:2};var um=function(e){var t=e.label;return tt.createElement(tt.Fragment,null,t)},mm=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).handleHeaderClick=function(e,s,n){n.preventDefault(),du(t.props.onDrillDown,[e,s])},t.renderRow=function(e){var s=t.props,n=s.events,r=s.rtl,a=s.selectable,i=s.getNow,o=s.range,l=s.getters,c=s.localizer,d=s.accessors,u=s.components,m=s.resizable,h=d.resourceId(e),p=e?n.filter(function(e){return d.resource(e)===h}):n;return tt.createElement(Yu,{isAllDay:!0,rtl:r,getNow:i,minRows:2,maxRows:t.props.allDayMaxRows+1,range:o,events:p,resourceId:h,className:"rbc-allday-cell",selectable:a,selected:t.props.selected,components:u,accessors:d,getters:l,localizer:c,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:m})},t}return Wi(e,tt.Component),zi(e,[{key:"renderHeaderCells",value:function(e){var t=this,s=this.props,n=s.localizer,r=s.getDrilldownView,a=s.getNow,i=s.getters.dayProp,o=s.components.header,l=void 0===o?Vu:o,c=a();return e.map(function(e,s){var a=r(e),o=n.format(e,"dayFormat"),d=i(e),u=d.className,m=d.style,h=tt.createElement(l,{date:e,label:o,localizer:n});return tt.createElement("div",{key:s,style:m,className:Qi("rbc-header",u,n.isSameDate(e,c)&&"rbc-today")},a?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(s){return t.handleHeaderClick(e,a,s)}},h):tt.createElement("span",null,h))})}},{key:"render",value:function(){var e=this,t=this.props,s=t.width,n=t.rtl,r=t.resources,a=t.range,i=t.events,o=t.getNow,l=t.accessors,c=t.selectable,d=t.components,u=t.getters,m=t.scrollRef,h=t.localizer,p=t.isOverflowing,f=t.components,g=f.timeGutterHeader,x=f.resourceHeader,v=void 0===x?um:x,y=t.resizable,b={};p&&(b[n?"marginLeft":"marginRight"]="".concat(ed()-1,"px"));var w=r.groupEvents(i);return tt.createElement("div",{style:b,ref:m,className:Qi("rbc-time-header",p&&"rbc-overflowing")},tt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},g&&tt.createElement(g,null)),r.map(function(t,s){var r=Gi(t,2),i=r[0],m=r[1];return tt.createElement("div",{className:"rbc-time-header-content",key:i||s},m&&tt.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(s)},tt.createElement("div",{className:"rbc-header"},tt.createElement(v,{index:s,label:l.resourceTitle(m),resource:m}))),tt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(a)),tt.createElement(Yu,{isAllDay:!0,rtl:n,getNow:o,minRows:2,maxRows:e.props.allDayMaxRows+1,range:a,events:w.get(i)||[],resourceId:m&&i,className:"rbc-allday-cell",selectable:c,selected:e.props.selected,components:d,accessors:l,getters:u,localizer:h,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyDown:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:y}))}))}}])}(),hm=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).handleHeaderClick=function(e,s,n){n.preventDefault(),du(t.props.onDrillDown,[e,s])},t}return Wi(e,tt.Component),zi(e,[{key:"renderHeaderCells",value:function(e){var t=this,s=this.props,n=s.localizer,r=s.getDrilldownView,a=s.getNow,i=s.getters.dayProp,o=s.components,l=o.header,c=void 0===l?Vu:l,d=o.resourceHeader,u=void 0===d?um:d,m=s.resources,h=s.accessors,p=s.events,f=s.rtl,g=s.selectable,x=s.components,v=s.getters,y=s.resizable,b=a(),w=m.groupEvents(p);return e.map(function(s,o){var l=r(s),d=n.format(s,"dayFormat"),p=i(s),j=p.className,N=p.style,k=tt.createElement(c,{date:s,label:d,localizer:n});return tt.createElement("div",{key:o,className:"rbc-time-header-content rbc-resource-grouping"},tt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(e.length<=1?" rbc-time-header-cell-single-day":"")},tt.createElement("div",{style:N,className:Qi("rbc-header",j,n.isSameDate(s,b)&&"rbc-today")},l?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(e){return t.handleHeaderClick(s,l,e)}},k):tt.createElement("span",null,k))),tt.createElement("div",{className:"rbc-row"},m.map(function(e,t){var r=Gi(e,2),a=r[0],i=r[1];return tt.createElement("div",{key:"resource_".concat(a,"_").concat(t),className:Qi("rbc-header",j,n.isSameDate(s,b)&&"rbc-today")},tt.createElement(u,{index:t,label:h.resourceTitle(i),resource:i}))})),tt.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},m.map(function(e,r){var i=Gi(e,2),o=i[0],l=i[1],c=(w.get(o)||[]).filter(function(e){return n.isSameDate(e.start,s)||n.isSameDate(e.end,s)});return tt.createElement(Yu,{key:"resource_".concat(o,"_").concat(r),isAllDay:!0,rtl:f,getNow:a,minRows:2,maxRows:t.props.allDayMaxRows+1,range:[s],events:c,resourceId:l&&o,className:"rbc-allday-cell",selectable:g,selected:t.props.selected,components:x,accessors:h,getters:v,localizer:n,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyDown:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:y})})))})}},{key:"render",value:function(){var e=this.props,t=e.width,s=e.rtl,n=e.range,r=e.scrollRef,a=e.isOverflowing,i=e.components.timeGutterHeader,o={};return a&&(o[s?"marginLeft":"marginRight"]="".concat(ed()-1,"px")),tt.createElement("div",{style:o,ref:r,className:Qi("rbc-time-header",a&&"rbc-overflowing")},tt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:t,minWidth:t,maxWidth:t}},i&&tt.createElement(i,null)),this.renderHeaderCells(n))}}])}();var pm=function(e){var t=e.min,s=e.max,n=e.timeslots,r=e.step,a=e.localizer,i=e.getNow,o=e.resource,l=e.components,c=e.getters,d=e.gutterRef,u=l.timeGutterWrapper,m=Je.useMemo(function(){return function(e){var t=e.min,s=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(s)?{start:n.add(t,-1,"day"),end:n.add(s,-1,"day")}:{start:t,end:s}}({min:t,max:s,localizer:a})},[null==t?void 0:t.toISOString(),null==s?void 0:s.toISOString(),a]),h=m.start,p=m.end,f=Gi(Je.useState(Xu({min:h,max:p,timeslots:n,step:r,localizer:a})),2),g=f[0],x=f[1];Je.useEffect(function(){g&&x(g.update({min:h,max:p,timeslots:n,step:r,localizer:a}))},[null==h?void 0:h.toISOString(),null==p?void 0:p.toISOString(),n,r]);var v=Je.useCallback(function(e,t){if(t)return null;var s=g.dateIsInGroup(i(),t);return tt.createElement("span",{className:Qi("rbc-label",s&&"rbc-now")},a.format(e,"timeGutterFormat"))},[g,a,i]);return tt.createElement(u,{slotMetrics:g},tt.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},g.groups.map(function(e,t){return tt.createElement(nm,{key:t,group:e,resource:o,components:l,renderSlot:v,getters:c})})))},fm=tt.forwardRef(function(e,t){return tt.createElement(pm,Object.assign({gutterRef:t},e))}),gm={};var xm=function(){function e(t){var s;return Li(this,e),(s=qi(this,e,[t])).handleScroll=function(e){s.scrollRef.current&&(s.scrollRef.current.scrollLeft=e.target.scrollLeft)},s.handleResize=function(){yl(s.rafHandle),s.rafHandle=bl(s.checkOverflow)},s.handleKeyPressEvent=function(){s.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];du(s.props.onKeyPressEvent,t)},s.handleSelectEvent=function(){s.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];du(s.props.onSelectEvent,t)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];du(s.props.onDoubleClickEvent,t)},s.handleShowMore=function(e,t,n,r,a){var i=s.props,o=i.popup,l=i.onDrillDown,c=i.onShowMore,d=i.getDrilldownView,u=i.doShowMoreDrillDown;if(s.clearSelection(),o){var m=ml(n,s.containerRef.current);s.setState({overlay:{date:t,events:e,position:Ii(Ii({},m),{},{width:"200px"}),target:a}})}else u&&du(l,[t,d(t)||Ld.DAY]);du(c,[e,t,r])},s.handleSelectAllDaySlot=function(e,t){var n=s.props.onSelectSlot,r=new Date(e[0]),a=new Date(e[e.length-1]);a.setDate(e[e.length-1].getDate()+1),du(n,{slots:e,start:r,end:a,action:t.action,resourceId:t.resourceId})},s.overlayDisplay=function(){s.setState({overlay:null})},s.checkOverflow=function(){if(!s._updatingOverflow){var e=s.contentRef.current;if(null!=e&&e.scrollHeight){var t=e.scrollHeight>e.clientHeight;s.state.isOverflowing!==t&&(s._updatingOverflow=!0,s.setState({isOverflowing:t},function(){s._updatingOverflow=!1}))}}},s.memoizedResources=ud(function(e,t){return function(e,t){return{map:function(s){return e?e.map(function(e,n){return s([t.resourceId(e),e],n)}):[s([gm,null],0)]},groupEvents:function(s){var n=new Map;return e?(s.forEach(function(e){var s=t.resource(e)||gm;if(Array.isArray(s))s.forEach(function(t){var s=n.get(t)||[];s.push(e),n.set(t,s)});else{var r=n.get(s)||[];r.push(e),n.set(s,r)}}),n):(n.set(gm,s),n)}}}(e,t)}),s.state={gutterWidth:void 0,isOverflowing:null},s.scrollRef=tt.createRef(),s.contentRef=tt.createRef(),s.containerRef=tt.createRef(),s._scrollRatio=null,s.gutterRef=Je.createRef(),s}return Wi(e,Je.Component),zi(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),yl(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(e,t,s,n,r,a,i,o,l,c){var d=this.props,u=d.min,m=d.max,h=(n.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")}),p=(r.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")});return tt.createElement(dm,Object.assign({},this.props,{localizer:a,min:a.merge(e,u),max:a.merge(e,m),resource:s&&t,components:o,isNow:a.isSameDate(e,c),key:"".concat(t,"-").concat(e),date:e,events:h,backgroundEvents:p,dayLayoutAlgorithm:l}))}},{key:"renderResourcesFirst",value:function(e,t,s,n,r,a,i,o,l){var c=this;return t.map(function(t){var d=Gi(t,2),u=d[0],m=d[1];return e.map(function(e){return c.renderDayColumn(e,u,m,s,n,r,a,o,l,i)})})}},{key:"renderRangeFirst",value:function(e,t,s,n,r,a,i,o,l){var c=this;return e.map(function(e){return tt.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:e},t.map(function(t){var d=Gi(t,2),u=d[0],m=d[1];return tt.createElement("div",{style:{flex:1},key:a.resourceId(m)},c.renderDayColumn(e,u,m,s,n,r,a,o,l,i))}))})}},{key:"renderEvents",value:function(e,t,s,n){var r=this.props,a=r.accessors,i=r.localizer,o=r.resourceGroupingLayout,l=r.components,c=r.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,a),u=d.groupEvents(t),m=d.groupEvents(s);return o?this.renderRangeFirst(e,d,u,m,i,a,n,l,c):this.renderResourcesFirst(e,d,u,m,i,a,n,l,c)}},{key:"render",value:function(){var e,t=this.props,s=t.events,n=t.backgroundEvents,r=t.range,a=t.width,i=t.rtl,o=t.selected,l=t.getNow,c=t.resources,d=t.components,u=t.accessors,m=t.getters,h=t.localizer,p=t.min,f=t.max,g=t.showMultiDayTimes,x=t.longPressThreshold,v=t.resizable,y=t.resourceGroupingLayout;a=a||this.state.gutterWidth;var b=r[0],w=r[r.length-1];this.slots=r.length;var j=[],N=[],k=[];s.forEach(function(e){if(Ru(e,b,w,u,h)){var t=u.start(e),s=u.end(e);u.allDay(e)||h.startAndEndAreDateOnly(t,s)||!g&&!h.isSameDate(t,s)?j.push(e):N.push(e)}}),n.forEach(function(e){Ru(e,b,w,u,h)&&k.push(e)}),j.sort(function(e,t){return Fu(e,t,u,h)});var S={range:r,events:j,width:a,rtl:i,getNow:l,localizer:h,selected:o,allDayMaxRows:this.props.showAllEvents?1/0:null!==(e=this.props.allDayMaxRows)&&void 0!==e?e:1/0,resources:this.memoizedResources(c,u),selectable:this.props.selectable,accessors:u,getters:m,components:d,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:x,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:v};return tt.createElement("div",{className:Qi("rbc-time-view",c&&"rbc-time-view-resources"),ref:this.containerRef},c&&c.length>1&&y?tt.createElement(hm,S):tt.createElement(mm,S),this.props.popup&&this.renderOverlay(),tt.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},tt.createElement(fm,{date:b,ref:this.gutterRef,localizer:h,min:h.merge(b,p),max:h.merge(b,f),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:d,className:"rbc-time-gutter",getters:m}),this.renderEvents(r,N,k,l())))}},{key:"renderOverlay",value:function(){var e,t,s=this,n=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},r=this.props,a=r.accessors,i=r.localizer,o=r.components,l=r.getters,c=r.selected,d=r.popupOffset,u=r.handleDragStart;return tt.createElement(bu,{overlay:n,accessors:a,localizer:i,components:o,getters:l,selected:c,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:u,show:!!n.position,overlayDisplay:this.overlayDisplay,onHide:function(){return s.setState({overlay:null})}})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var t,s=null!==(t=e.gutterRef)&&void 0!==t&&t.current?md(e.gutterRef.current):void 0;s&&e.state.gutterWidth!==s&&e.setState({gutterWidth:s})})}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.min,s=e.max,n=e.scrollToTime,r=e.localizer,a=r.diff(r.merge(n,t),n,"milliseconds"),i=r.diff(t,s,"milliseconds");this._scrollRatio=a/i}}])}();xm.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var vm=["date","localizer","min","max","scrollToTime","enableAutoScroll"],ym=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var t=this.props,s=t.date,n=t.localizer,r=t.min,a=void 0===r?n.startOf(new Date,"day"):r,i=t.max,o=void 0===i?n.endOf(new Date,"day"):i,l=t.scrollToTime,c=void 0===l?n.startOf(new Date,"day"):l,d=t.enableAutoScroll,u=void 0===d||d,m=Ri(t,vm),h=e.range(s,{localizer:n});return tt.createElement(xm,Object.assign({},m,{range:h,eventOffset:10,localizer:n,min:a,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}();ym.range=function(e,t){return[t.localizer.startOf(e,"day")]},ym.navigate=function(e,t,s){var n=s.localizer;switch(t){case Od:return n.add(e,-1,"day");case Pd:return n.add(e,1,"day");default:return e}},ym.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")};var bm=["date","localizer","min","max","scrollToTime","enableAutoScroll"],wm=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var t=this.props,s=t.date,n=t.localizer,r=t.min,a=void 0===r?n.startOf(new Date,"day"):r,i=t.max,o=void 0===i?n.endOf(new Date,"day"):i,l=t.scrollToTime,c=void 0===l?n.startOf(new Date,"day"):l,d=t.enableAutoScroll,u=void 0===d||d,m=Ri(t,bm),h=e.range(s,this.props);return tt.createElement(xm,Object.assign({},m,{range:h,eventOffset:15,localizer:n,min:a,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}();wm.defaultProps=xm.defaultProps,wm.navigate=function(e,t,s){var n=s.localizer;switch(t){case Od:return n.add(e,-1,"week");case Pd:return n.add(e,1,"week");default:return e}},wm.range=function(e,t){var s=t.localizer,n=s.startOfWeek(),r=s.startOf(e,"week",n),a=s.endOf(e,"week",n);return s.range(r,a)},wm.title=function(e,t){var s=t.localizer,n=hd(wm.range(e,{localizer:s})),r=n[0],a=n.slice(1);return s.format({start:r,end:a.pop()},"dayRangeHeaderFormat")};var jm=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Nm(e,t){return wm.range(e,t).filter(function(e){return-1===[6,0].indexOf(e.getDay())})}var km=function(){function e(){return Li(this,e),qi(this,e,arguments)}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var e=this.props,t=e.date,s=e.localizer,n=e.min,r=void 0===n?s.startOf(new Date,"day"):n,a=e.max,i=void 0===a?s.endOf(new Date,"day"):a,o=e.scrollToTime,l=void 0===o?s.startOf(new Date,"day"):o,c=e.enableAutoScroll,d=void 0===c||c,u=Ri(e,jm),m=Nm(t,this.props);return tt.createElement(xm,Object.assign({},u,{range:m,eventOffset:15,localizer:s,min:r,max:i,scrollToTime:l,enableAutoScroll:d}))}}])}();km.defaultProps=xm.defaultProps,km.range=Nm,km.navigate=wm.navigate,km.title=function(e,t){var s=t.localizer,n=hd(Nm(e,{localizer:s})),r=n[0],a=n.slice(1);return s.format({start:r,end:a.pop()},"dayRangeHeaderFormat")};function Sm(e){var t=e.accessors,s=e.components,n=e.date,r=e.events,a=e.getters,i=e.length,o=void 0===i?30:i,l=e.localizer,c=e.onDoubleClickEvent,d=e.onSelectEvent,u=e.selected,m=Je.useRef(null),h=Je.useRef(null),p=Je.useRef(null),f=Je.useRef(null),g=Je.useRef(null);Je.useEffect(function(){v()});var x=function(e,n){var r="",a=s.time,i=l.messages.allDay,o=t.end(n),c=t.start(n);return t.allDay(n)||(l.eq(c,o)?i=l.format(c,"agendaTimeFormat"):l.isSameDate(c,o)?i=l.format({start:c,end:o},"agendaTimeRangeFormat"):l.isSameDate(e,c)?i=l.format(c,"agendaTimeFormat"):l.isSameDate(e,o)&&(i=l.format(o,"agendaTimeFormat"))),l.gt(e,c,"day")&&(r="rbc-continues-prior"),l.lt(e,o,"day")&&(r+=" rbc-continues-after"),tt.createElement("span",{className:r.trim()},a?tt.createElement(a,{event:n,day:e,label:i}):i)},v=function(){if(g.current){var e=m.current,t=g.current.firstChild;if(t){var s=f.current.scrollHeight>f.current.clientHeight,n=[],r=n;n=[md(t.children[0]),md(t.children[1])],r[0]===n[0]&&r[1]===n[1]||(h.current.style.width=n[0]+"px",p.current.style.width=n[1]+"px"),s?(Bt(e,"rbc-header-overflowing"),e.style.marginRight=ed()+"px"):Ut(e,"rbc-header-overflowing")}}},y=l.messages,b=l.add(n,o,"day"),w=l.range(n,b,"day");return(r=r.filter(function(e){return Ru(e,l.startOf(n,"day"),l.endOf(b,"day"),t,l)})).sort(function(e,s){return+t.start(e)-+t.start(s)}),tt.createElement("div",{className:"rbc-agenda-view"},0!==r.length?tt.createElement(tt.Fragment,null,tt.createElement("table",{ref:m,className:"rbc-agenda-table"},tt.createElement("thead",null,tt.createElement("tr",null,tt.createElement("th",{className:"rbc-header",ref:h},y.date),tt.createElement("th",{className:"rbc-header",ref:p},y.time),tt.createElement("th",{className:"rbc-header"},y.event)))),tt.createElement("div",{className:"rbc-agenda-content",ref:f},tt.createElement("table",{className:"rbc-agenda-table"},tt.createElement("tbody",{ref:g},w.map(function(e,n){return function(e,n,r){var i=s.event,o=s.date;return n=n.filter(function(s){return Ru(s,l.startOf(e,"day"),l.endOf(e,"day"),t,l)}),n.map(function(s,m){var h=t.title(s),p=t.end(s),f=t.start(s),g=a.eventProp(s,f,p,pu(s,u)),v=0===m&&l.format(e,"agendaDateFormat"),y=0===m&&tt.createElement("td",{rowSpan:n.length,className:"rbc-agenda-date-cell"},o?tt.createElement(o,{day:e,label:v}):v);return tt.createElement("tr",{key:r+"_"+m,className:g.className,style:g.style},y,tt.createElement("td",{className:"rbc-agenda-time-cell"},x(e,s)),tt.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return d&&d(s,e)},onDoubleClick:function(e){return c&&c(s,e)}},i?tt.createElement(i,{event:s,title:h}):h))},[])}(e,r,n)}))))):tt.createElement("span",{className:"rbc-agenda-empty"},y.noEventsInRange))}Sm.range=function(e,t){var s=t.length,n=void 0===s?30:s;return{start:e,end:t.localizer.add(e,n,"day")}},Sm.navigate=function(e,t,s){var n=s.length,r=void 0===n?30:n,a=s.localizer;switch(t){case Od:return a.add(e,-r,"day");case Pd:return a.add(e,r,"day");default:return e}},Sm.title=function(e,t){var s=t.length,n=void 0===s?30:s,r=t.localizer,a=r.add(e,n,"day");return r.format({start:e,end:a},"agendaHeaderFormat")};var _m=Oi(Oi(Oi(Oi(Oi({},Ld.MONTH,Ku),Ld.WEEK,wm),Ld.WORK_WEEK,km),Ld.DAY,ym),Ld.AGENDA,Sm),Em=["action","date","today"];var Tm=function(e){return function(t){return function(e,t){var s=null;return"function"==typeof t?s=t(e):"string"==typeof t&&"object"===Mi(e)&&null!=e&&t in e&&(s=e[t]),s}(t,e)}},Dm=["view","date","getNow","onNavigate"],Am=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Mm(e){if(Array.isArray(e))return e;for(var t=[],s=0,n=Object.entries(e);s<n.length;s++){var r=Gi(n[s],2),a=r[0];r[1]&&t.push(a)}return t}var Cm=function(){function e(){var t;Li(this,e);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=qi(this,e,[].concat(n))).getViews=function(){var e=t.props.views;return Array.isArray(e)?Md(e,function(e,t){return e[t]=_m[t]},{}):"object"===Mi(e)?qt(e,function(e,t){return!0===e?_m[t]:e}):_m},t.getView=function(){return t.getViews()[t.props.view]},t.getDrilldownView=function(e){var s=t.props,n=s.view,r=s.drilldownView,a=s.getDrilldownView;return a?a(e,n,Object.keys(t.getViews())):r},t.handleRangeChange=function(e,s,n){var r=t.props,a=r.onRangeChange,i=r.localizer;a&&s.range&&a(s.range(e,{localizer:i}),n)},t.handleNavigate=function(e,s){var n=t.props,r=n.view,a=n.date,i=n.getNow,o=n.onNavigate,l=Ri(n,Dm),c=t.getView(),d=i();a=function(e,t){var s=t.action,n=t.date,r=t.today,a=Ri(t,Em);switch(e="string"==typeof e?_m[e]:e,s){case Id:n=r||new Date;break;case Rd:break;default:Zi(e&&"function"==typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,s,a)}return n}(c,Ii(Ii({},l),{},{action:e,date:s||a||d,today:d})),o(a,r,e),t.handleRangeChange(a,c)},t.handleViewChange=function(e){e!==t.props.view&&function(e,t){return-1!==Mm(t.views).indexOf(e)}(e,t.props)&&t.props.onView(e);var s=t.getViews();t.handleRangeChange(t.props.date||t.props.getNow(),s[e],e)},t.handleSelectEvent=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onSelectEvent,s)},t.handleDoubleClickEvent=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onDoubleClickEvent,s)},t.handleKeyPressEvent=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];du(t.props.onKeyPressEvent,s)},t.handleSelectSlot=function(e){du(t.props.onSelectSlot,e)},t.handleDrillDown=function(e,s){var n=t.props.onDrillDown;n?n(e,s,t.drilldownView):(s&&t.handleViewChange(s),t.handleNavigate(Rd,e))},t.state={context:e.getContext(t.props)},t}return Wi(e,tt.Component),zi(e,[{key:"render",value:function(){var e=this.props,t=e.view,s=e.toolbar,n=e.events,r=e.backgroundEvents,a=e.resourceGroupingLayout,i=e.style,o=e.className,l=e.elementProps,c=e.date,d=e.getNow,u=e.length,m=e.showMultiDayTimes,h=e.onShowMore,p=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var f=Ri(e,Am);c=c||d();var g=this.getView(),x=this.state.context,v=x.accessors,y=x.components,b=x.getters,w=x.localizer,j=x.viewNames,N=y.toolbar||cu,k=g.title(c,{localizer:w,length:u});return tt.createElement("div",Object.assign({},l,{className:Qi(o,"rbc-calendar",f.rtl&&"rbc-rtl"),style:i}),s&&tt.createElement(N,{date:c,view:t,views:j,label:k,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:w}),tt.createElement(g,Object.assign({},f,{events:n,backgroundEvents:r,date:c,getNow:d,length:u,localizer:w,getters:b,components:y,accessors:v,showMultiDayTimes:m,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:h,doShowMoreDrillDown:p,resourceGroupingLayout:a})))}}],[{key:"getDerivedStateFromProps",value:function(t){return{context:e.getContext(t)}}},{key:"getContext",value:function(e){var t=e.startAccessor,s=e.endAccessor,n=e.allDayAccessor,r=e.tooltipAccessor,a=e.titleAccessor,i=e.resourceAccessor,o=e.resourceIdAccessor,l=e.resourceTitleAccessor,c=e.eventIdAccessor,d=e.eventPropGetter,u=e.backgroundEventPropGetter,m=e.slotPropGetter,h=e.slotGroupPropGetter,p=e.dayPropGetter,f=e.view,g=e.views,x=e.localizer,v=e.culture,y=e.messages,b=void 0===y?{}:y,w=e.components,j=void 0===w?{}:w,N=e.formats,k=void 0===N?{}:N,S=Mm(g);return{viewNames:S,localizer:lu(x,v,k,function(e){return Ii(Ii({},uu),e)}(b)),getters:{eventProp:function(){return d&&d.apply(void 0,arguments)||{}},backgroundEventProp:function(){return u&&u.apply(void 0,arguments)||{}},slotProp:function(){return m&&m.apply(void 0,arguments)||{}},slotGroupProp:function(){return h&&h.apply(void 0,arguments)||{}},dayProp:function(){return p&&p.apply(void 0,arguments)||{}}},components:bd(j[f]||{},zt(j,S),{eventWrapper:Cd,backgroundEventWrapper:Cd,eventContainerWrapper:Cd,dateCellWrapper:Cd,weekWrapper:Cd,timeSlotWrapper:Cd,timeGutterWrapper:Cd}),accessors:{start:Tm(t),end:Tm(s),allDay:Tm(n),tooltip:Tm(r),title:Tm(a),resource:Tm(i),resourceId:Tm(o),resourceTitle:Tm(l),eventId:Tm(c)}}}}])}();Cm.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Ld.MONTH,views:[Ld.MONTH,Ld.WEEK,Ld.DAY,Ld.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Ld.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Om,Pm,Im=function e(t,s,n){void 0===n&&(n=[]);var r,a=t.displayName||t.name||"Component",i=!!(r=t)&&("function"!=typeof r||r.prototype&&r.prototype.isReactComponent),o=Object.keys(s),l=o.map(to);!i&&n.length&&Zi(!1);var c=function(e){function r(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];(t=e.call.apply(e,[this].concat(a))||this).handlers=Object.create(null),o.forEach(function(e){var n=s[e];t.handlers[n]=function(s){if(t.props[n]){var r;t._notifying=!0;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(r=t.props)[n].apply(r,[s].concat(i)),t._notifying=!1}t.unmounted||t.setState(function(t){var n,r=t.values;return{values:yt(Object.create(null),r,(n={},n[e]=s,n))}})}}),n.length&&(t.attachRef=function(e){t.inner=e});var l=Object.create(null);return o.forEach(function(e){l[e]=t.props[to(e)]}),t.state={values:l,prevProps:{}},t}vt(r,e);var a=r.prototype;return a.shouldComponentUpdate=function(){return!this._notifying},r.getDerivedStateFromProps=function(e,t){var s=t.values,n=t.prevProps,r={values:yt(Object.create(null),s),prevProps:{}};return o.forEach(function(t){r.prevProps[t]=e[t],!eo(e,t)&&eo(n,t)&&(r.values[t]=e[to(t)])}),r},a.componentWillUnmount=function(){this.unmounted=!0},a.render=function(){var e=this,s=this.props,n=s.innerRef,r=ft(s,["innerRef"]);l.forEach(function(e){delete r[e]});var a={};return o.forEach(function(t){var s=e.props[t];a[t]=void 0!==s?s:e.state.values[t]}),tt.createElement(t,yt({},r,a,this.handlers,{ref:n||this.attachRef}))},r}(tt.Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var s=null,n=null,r=null;if("function"==typeof t.componentWillMount?s="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(s="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?r="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==s||null!==n||null!==r){var a=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+a+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==s?"\n  "+s:"")+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=so,t.componentWillReceiveProps=no),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=ro;var o=t.componentDidUpdate;t.componentDidUpdate=function(e,t,s){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:s;o.call(this,e,t,n)}}}(c),c.displayName="Uncontrolled("+a+")",c.propTypes=yt({innerRef:function(){}},function(e){var t={};return Object.keys(e).forEach(function(e){t[to(e)]=Ji}),t}(s)),n.forEach(function(e){c.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}});var d=c;return tt.forwardRef&&((d=tt.forwardRef(function(e,t){return tt.createElement(c,yt({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))})).propTypes=c.propTypes),d.ControlledComponent=t,d.deferControlTo=function(t,n,r){return void 0===n&&(n={}),e(t,yt({},s,n),r)},d}(Cm,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),Rm=function(e,t,s){var n=e.start,r=e.end;return s.format(n,"LT",t)+"  "+s.format(r,"LT",t)},Lm={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Rm,eventTimeRangeFormat:Rm,eventTimeRangeStartFormat:function(e,t,s){var n=e.start;return s.format(n,"LT",t)+"  "},eventTimeRangeEndFormat:function(e,t,s){var n=e.end;return"  "+s.format(n,"LT",t)},timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:function(e,t,s){var n=e.start,r=e.end;return s.format(n,"MMMM DD",t)+"  "+s.format(r,s.eq(n,r,"month")?"DD":"MMMM DD",t)},agendaHeaderFormat:function(e,t,s){var n=e.start,r=e.end;return s.format(n,"L",t)+"  "+s.format(r,"L",t)},agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Rm};function Fm(e){var t=e?e.toLowerCase():e;return"FullYear"===t?t="year":t||(t=void 0),t}function zm(){return Om.apply(null,arguments)}function Bm(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function Um(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function qm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wm(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(qm(e,t))return!1;return!0}function $m(e){return void 0===e}function Ym(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function Vm(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function Hm(e,t){var s,n=[],r=e.length;for(s=0;s<r;++s)n.push(t(e[s],s));return n}function Gm(e,t){for(var s in t)qm(t,s)&&(e[s]=t[s]);return qm(t,"toString")&&(e.toString=t.toString),qm(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Km(e,t,s,n){return xf(e,t,s,n,!0).utc()}function Qm(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function Xm(e){var t=null,s=!1,n=e._d&&!isNaN(e._d.getTime());return n&&(t=Qm(e),s=Pm.call(t.parsedDateParts,function(e){return null!=e}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?n:(e._isValid=n,e._isValid)}function Zm(e){var t=Km(NaN);return null!=e?Gm(Qm(t),e):Qm(t).userInvalidated=!0,t}Pm=Array.prototype.some?Array.prototype.some:function(e){var t,s=Object(this),n=s.length>>>0;for(t=0;t<n;t++)if(t in s&&e.call(this,s[t],t,s))return!0;return!1};var Jm=zm.momentProperties=[],eh=!1;function th(e,t){var s,n,r,a=Jm.length;if($m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),$m(t._i)||(e._i=t._i),$m(t._f)||(e._f=t._f),$m(t._l)||(e._l=t._l),$m(t._strict)||(e._strict=t._strict),$m(t._tzm)||(e._tzm=t._tzm),$m(t._isUTC)||(e._isUTC=t._isUTC),$m(t._offset)||(e._offset=t._offset),$m(t._pf)||(e._pf=Qm(t)),$m(t._locale)||(e._locale=t._locale),a>0)for(s=0;s<a;s++)$m(r=t[n=Jm[s]])||(e[n]=r);return e}function sh(e){th(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===eh&&(eh=!0,zm.updateOffset(this),eh=!1)}function nh(e){return e instanceof sh||null!=e&&null!=e._isAMomentObject}function rh(e){!1===zm.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn}function ah(e,t){var s=!0;return Gm(function(){if(null!=zm.deprecationHandler&&zm.deprecationHandler(null,e),s){var n,r,a,i=[],o=arguments.length;for(r=0;r<o;r++){if(n="","object"==typeof arguments[r]){for(a in n+="\n["+r+"] ",arguments[0])qm(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[r];i.push(n)}rh((Array.prototype.slice.call(i).join(""),(new Error).stack)),s=!1}return t.apply(this,arguments)},t)}var ih,oh={};function lh(e,t){null!=zm.deprecationHandler&&zm.deprecationHandler(e,t),oh[e]||(rh(),oh[e]=!0)}function ch(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function dh(e,t){var s,n=Gm({},e);for(s in t)qm(t,s)&&(Um(e[s])&&Um(t[s])?(n[s]={},Gm(n[s],e[s]),Gm(n[s],t[s])):null!=t[s]?n[s]=t[s]:delete n[s]);for(s in e)qm(e,s)&&!qm(t,s)&&Um(e[s])&&(n[s]=Gm({},n[s]));return n}function uh(e){null!=e&&this.set(e)}zm.suppressDeprecationWarnings=!1,zm.deprecationHandler=null,ih=Object.keys?Object.keys:function(e){var t,s=[];for(t in e)qm(e,t)&&s.push(t);return s};function mh(e,t,s){var n=""+Math.abs(e),r=t-n.length;return(e>=0?s?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var hh=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ph=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,fh={},gh={};function xh(e,t,s,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),e&&(gh[e]=r),t&&(gh[t[0]]=function(){return mh(r.apply(this,arguments),t[1],t[2])}),s&&(gh[s]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function vh(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function yh(e,t){return e.isValid()?(t=bh(t,e.localeData()),fh[t]=fh[t]||function(e){var t,s,n=e.match(hh);for(t=0,s=n.length;t<s;t++)gh[n[t]]?n[t]=gh[n[t]]:n[t]=vh(n[t]);return function(t){var r,a="";for(r=0;r<s;r++)a+=ch(n[r])?n[r].call(t,e):n[r];return a}}(t),fh[t](e)):e.localeData().invalidDate()}function bh(e,t){var s=5;function n(e){return t.longDateFormat(e)||e}for(ph.lastIndex=0;s>=0&&ph.test(e);)e=e.replace(ph,n),ph.lastIndex=0,s-=1;return e}var wh={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function jh(e){return"string"==typeof e?wh[e]||wh[e.toLowerCase()]:void 0}function Nh(e){var t,s,n={};for(s in e)qm(e,s)&&(t=jh(s))&&(n[t]=e[s]);return n}var kh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};var Sh,_h=/\d/,Eh=/\d\d/,Th=/\d{3}/,Dh=/\d{4}/,Ah=/[+-]?\d{6}/,Mh=/\d\d?/,Ch=/\d\d\d\d?/,Oh=/\d\d\d\d\d\d?/,Ph=/\d{1,3}/,Ih=/\d{1,4}/,Rh=/[+-]?\d{1,6}/,Lh=/\d+/,Fh=/[+-]?\d+/,zh=/Z|[+-]\d\d:?\d\d/gi,Bh=/Z|[+-]\d\d(?::?\d\d)?/gi,Uh=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,qh=/^[1-9]\d?/,Wh=/^([1-9]\d|\d)/;function $h(e,t,s){Sh[e]=ch(t)?t:function(e,n){return e&&s?s:t}}function Yh(e,t){return qm(Sh,e)?Sh[e](t._strict,t._locale):new RegExp(Vh(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,s,n,r){return t||s||n||r})))}function Vh(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Hh(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Gh(e){var t=+e,s=0;return 0!==t&&isFinite(t)&&(s=Hh(t)),s}Sh={};var Kh={};function Qh(e,t){var s,n,r=t;for("string"==typeof e&&(e=[e]),Ym(t)&&(r=function(e,s){s[t]=Gh(e)}),n=e.length,s=0;s<n;s++)Kh[e[s]]=r}function Xh(e,t){Qh(e,function(e,s,n,r){n._w=n._w||{},t(e,n._w,n,r)})}function Zh(e,t,s){null!=t&&qm(Kh,e)&&Kh[e](t,s._a,s,e)}function Jh(e){return e%4==0&&e%100!=0||e%400==0}var ep=0,tp=1,sp=2,np=3,rp=4,ap=5,ip=6,op=7,lp=8;function cp(e){return Jh(e)?366:365}xh("Y",0,0,function(){var e=this.year();return e<=9999?mh(e,4):"+"+e}),xh(0,["YY",2],0,function(){return this.year()%100}),xh(0,["YYYY",4],0,"year"),xh(0,["YYYYY",5],0,"year"),xh(0,["YYYYYY",6,!0],0,"year"),$h("Y",Fh),$h("YY",Mh,Eh),$h("YYYY",Ih,Dh),$h("YYYYY",Rh,Ah),$h("YYYYYY",Rh,Ah),Qh(["YYYYY","YYYYYY"],ep),Qh("YYYY",function(e,t){t[ep]=2===e.length?zm.parseTwoDigitYear(e):Gh(e)}),Qh("YY",function(e,t){t[ep]=zm.parseTwoDigitYear(e)}),Qh("Y",function(e,t){t[ep]=parseInt(e,10)}),zm.parseTwoDigitYear=function(e){return Gh(e)+(Gh(e)>68?1900:2e3)};var dp,up=mp("FullYear",!0);function mp(e,t){return function(s){return null!=s?(pp(this,e,s),zm.updateOffset(this,t),this):hp(this,e)}}function hp(e,t){if(!e.isValid())return NaN;var s=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return n?s.getUTCSeconds():s.getSeconds();case"Minutes":return n?s.getUTCMinutes():s.getMinutes();case"Hours":return n?s.getUTCHours():s.getHours();case"Date":return n?s.getUTCDate():s.getDate();case"Day":return n?s.getUTCDay():s.getDay();case"Month":return n?s.getUTCMonth():s.getMonth();case"FullYear":return n?s.getUTCFullYear():s.getFullYear();default:return NaN}}function pp(e,t,s){var n,r,a,i,o;if(e.isValid()&&!isNaN(s)){switch(n=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?n.setUTCMilliseconds(s):n.setMilliseconds(s));case"Seconds":return void(r?n.setUTCSeconds(s):n.setSeconds(s));case"Minutes":return void(r?n.setUTCMinutes(s):n.setMinutes(s));case"Hours":return void(r?n.setUTCHours(s):n.setHours(s));case"Date":return void(r?n.setUTCDate(s):n.setDate(s));case"FullYear":break;default:return}a=s,i=e.month(),o=29!==(o=e.date())||1!==i||Jh(a)?o:28,r?n.setUTCFullYear(a,i,o):n.setFullYear(a,i,o)}}function fp(e,t){if(isNaN(e)||isNaN(t))return NaN;var s,n=(t%(s=12)+s)%s;return e+=(t-n)/12,1===n?Jh(e)?29:28:31-n%7%2}dp=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},xh("M",["MM",2],"Mo",function(){return this.month()+1}),xh("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),xh("MMMM",0,0,function(e){return this.localeData().months(this,e)}),$h("M",Mh,qh),$h("MM",Mh,Eh),$h("MMM",function(e,t){return t.monthsShortRegex(e)}),$h("MMMM",function(e,t){return t.monthsRegex(e)}),Qh(["M","MM"],function(e,t){t[tp]=Gh(e)-1}),Qh(["MMM","MMMM"],function(e,t,s,n){var r=s._locale.monthsParse(e,n,s._strict);null!=r?t[tp]=r:Qm(s).invalidMonth=e});var gp="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xp="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vp=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,yp=Uh,bp=Uh;function wp(e,t,s){var n,r,a,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=Km([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return s?"MMM"===t?-1!==(r=dp.call(this._shortMonthsParse,i))?r:null:-1!==(r=dp.call(this._longMonthsParse,i))?r:null:"MMM"===t?-1!==(r=dp.call(this._shortMonthsParse,i))||-1!==(r=dp.call(this._longMonthsParse,i))?r:null:-1!==(r=dp.call(this._longMonthsParse,i))||-1!==(r=dp.call(this._shortMonthsParse,i))?r:null}function jp(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Gh(t);else if(!Ym(t=e.localeData().monthsParse(t)))return e;var s=t,n=e.date();return n=n<29?n:Math.min(n,fp(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,n):e._d.setMonth(s,n),e}function Np(e){return null!=e?(jp(this,e),zm.updateOffset(this,!0),this):hp(this,"Month")}function kp(){function e(e,t){return t.length-e.length}var t,s,n,r,a=[],i=[],o=[];for(t=0;t<12;t++)s=Km([2e3,t]),n=Vh(this.monthsShort(s,"")),r=Vh(this.months(s,"")),a.push(n),i.push(r),o.push(r),o.push(n);a.sort(e),i.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Sp(e,t,s,n,r,a,i){var o;return e<100&&e>=0?(o=new Date(e+400,t,s,n,r,a,i),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,s,n,r,a,i),o}function _p(e){var t,s;return e<100&&e>=0?((s=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ep(e,t,s){var n=7+t-s;return-((7+_p(e,0,n).getUTCDay()-t)%7)+n-1}function Tp(e,t,s,n,r){var a,i,o=1+7*(t-1)+(7+s-n)%7+Ep(e,n,r);return o<=0?i=cp(a=e-1)+o:o>cp(e)?(a=e+1,i=o-cp(e)):(a=e,i=o),{year:a,dayOfYear:i}}function Dp(e,t,s){var n,r,a=Ep(e.year(),t,s),i=Math.floor((e.dayOfYear()-a-1)/7)+1;return i<1?n=i+Ap(r=e.year()-1,t,s):i>Ap(e.year(),t,s)?(n=i-Ap(e.year(),t,s),r=e.year()+1):(r=e.year(),n=i),{week:n,year:r}}function Ap(e,t,s){var n=Ep(e,t,s),r=Ep(e+1,t,s);return(cp(e)-n+r)/7}xh("w",["ww",2],"wo","week"),xh("W",["WW",2],"Wo","isoWeek"),$h("w",Mh,qh),$h("ww",Mh,Eh),$h("W",Mh,qh),$h("WW",Mh,Eh),Xh(["w","ww","W","WW"],function(e,t,s,n){t[n.substr(0,1)]=Gh(e)});function Mp(e,t){return e.slice(t,7).concat(e.slice(0,t))}xh("d",0,"do","day"),xh("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),xh("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),xh("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),xh("e",0,0,"weekday"),xh("E",0,0,"isoWeekday"),$h("d",Mh),$h("e",Mh),$h("E",Mh),$h("dd",function(e,t){return t.weekdaysMinRegex(e)}),$h("ddd",function(e,t){return t.weekdaysShortRegex(e)}),$h("dddd",function(e,t){return t.weekdaysRegex(e)}),Xh(["dd","ddd","dddd"],function(e,t,s,n){var r=s._locale.weekdaysParse(e,n,s._strict);null!=r?t.d=r:Qm(s).invalidWeekday=e}),Xh(["d","e","E"],function(e,t,s,n){t[n]=Gh(e)});var Cp="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Op="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pp="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ip=Uh,Rp=Uh,Lp=Uh;function Fp(e,t,s){var n,r,a,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=Km([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return s?"dddd"===t?-1!==(r=dp.call(this._weekdaysParse,i))?r:null:"ddd"===t?-1!==(r=dp.call(this._shortWeekdaysParse,i))?r:null:-1!==(r=dp.call(this._minWeekdaysParse,i))?r:null:"dddd"===t?-1!==(r=dp.call(this._weekdaysParse,i))||-1!==(r=dp.call(this._shortWeekdaysParse,i))||-1!==(r=dp.call(this._minWeekdaysParse,i))?r:null:"ddd"===t?-1!==(r=dp.call(this._shortWeekdaysParse,i))||-1!==(r=dp.call(this._weekdaysParse,i))||-1!==(r=dp.call(this._minWeekdaysParse,i))?r:null:-1!==(r=dp.call(this._minWeekdaysParse,i))||-1!==(r=dp.call(this._weekdaysParse,i))||-1!==(r=dp.call(this._shortWeekdaysParse,i))?r:null}function zp(){function e(e,t){return t.length-e.length}var t,s,n,r,a,i=[],o=[],l=[],c=[];for(t=0;t<7;t++)s=Km([2e3,1]).day(t),n=Vh(this.weekdaysMin(s,"")),r=Vh(this.weekdaysShort(s,"")),a=Vh(this.weekdays(s,"")),i.push(n),o.push(r),l.push(a),c.push(n),c.push(r),c.push(a);i.sort(e),o.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Bp(){return this.hours()%12||12}function Up(e,t){xh(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function qp(e,t){return t._meridiemParse}xh("H",["HH",2],0,"hour"),xh("h",["hh",2],0,Bp),xh("k",["kk",2],0,function(){return this.hours()||24}),xh("hmm",0,0,function(){return""+Bp.apply(this)+mh(this.minutes(),2)}),xh("hmmss",0,0,function(){return""+Bp.apply(this)+mh(this.minutes(),2)+mh(this.seconds(),2)}),xh("Hmm",0,0,function(){return""+this.hours()+mh(this.minutes(),2)}),xh("Hmmss",0,0,function(){return""+this.hours()+mh(this.minutes(),2)+mh(this.seconds(),2)}),Up("a",!0),Up("A",!1),$h("a",qp),$h("A",qp),$h("H",Mh,Wh),$h("h",Mh,qh),$h("k",Mh,qh),$h("HH",Mh,Eh),$h("hh",Mh,Eh),$h("kk",Mh,Eh),$h("hmm",Ch),$h("hmmss",Oh),$h("Hmm",Ch),$h("Hmmss",Oh),Qh(["H","HH"],np),Qh(["k","kk"],function(e,t,s){var n=Gh(e);t[np]=24===n?0:n}),Qh(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e}),Qh(["h","hh"],function(e,t,s){t[np]=Gh(e),Qm(s).bigHour=!0}),Qh("hmm",function(e,t,s){var n=e.length-2;t[np]=Gh(e.substr(0,n)),t[rp]=Gh(e.substr(n)),Qm(s).bigHour=!0}),Qh("hmmss",function(e,t,s){var n=e.length-4,r=e.length-2;t[np]=Gh(e.substr(0,n)),t[rp]=Gh(e.substr(n,2)),t[ap]=Gh(e.substr(r)),Qm(s).bigHour=!0}),Qh("Hmm",function(e,t,s){var n=e.length-2;t[np]=Gh(e.substr(0,n)),t[rp]=Gh(e.substr(n))}),Qh("Hmmss",function(e,t,s){var n=e.length-4,r=e.length-2;t[np]=Gh(e.substr(0,n)),t[rp]=Gh(e.substr(n,2)),t[ap]=Gh(e.substr(r))});var Wp=mp("Hours",!0);var $p,Yp={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:gp,monthsShort:xp,week:{dow:0,doy:6},weekdays:Cp,weekdaysMin:Pp,weekdaysShort:Op,meridiemParse:/[ap]\.?m?\.?/i},Vp={},Hp={};function Gp(e,t){var s,n=Math.min(e.length,t.length);for(s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}function Kp(e){return e?e.toLowerCase().replace("_","-"):e}function Qp(e){var t=null;if(void 0===Vp[e]&&"undefined"!=typeof module&&module&&module.exports&&function(e){return!(!e||!e.match("^[^/\\\\]*$"))}(e))try{t=$p._abbr,require("./locale/"+e),Xp(t)}catch(vj){Vp[e]=null}return Vp[e]}function Xp(e,t){var s;return e&&((s=$m(t)?Jp(e):Zp(e,t))?$p=s:"undefined"!=typeof console&&console.warn),$p._abbr}function Zp(e,t){if(null!==t){var s,n=Yp;if(t.abbr=e,null!=Vp[e])lh("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Vp[e]._config;else if(null!=t.parentLocale)if(null!=Vp[t.parentLocale])n=Vp[t.parentLocale]._config;else{if(null==(s=Qp(t.parentLocale)))return Hp[t.parentLocale]||(Hp[t.parentLocale]=[]),Hp[t.parentLocale].push({name:e,config:t}),null;n=s._config}return Vp[e]=new uh(dh(n,t)),Hp[e]&&Hp[e].forEach(function(e){Zp(e.name,e.config)}),Xp(e),Vp[e]}return delete Vp[e],null}function Jp(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return $p;if(!Bm(e)){if(t=Qp(e))return t;e=[e]}return function(e){for(var t,s,n,r,a=0;a<e.length;){for(t=(r=Kp(e[a]).split("-")).length,s=(s=Kp(e[a+1]))?s.split("-"):null;t>0;){if(n=Qp(r.slice(0,t).join("-")))return n;if(s&&s.length>=t&&Gp(r,s)>=t-1)break;t--}a++}return $p}(e)}function ef(e){var t,s=e._a;return s&&-2===Qm(e).overflow&&(t=s[tp]<0||s[tp]>11?tp:s[sp]<1||s[sp]>fp(s[ep],s[tp])?sp:s[np]<0||s[np]>24||24===s[np]&&(0!==s[rp]||0!==s[ap]||0!==s[ip])?np:s[rp]<0||s[rp]>59?rp:s[ap]<0||s[ap]>59?ap:s[ip]<0||s[ip]>999?ip:-1,Qm(e)._overflowDayOfYear&&(t<ep||t>sp)&&(t=sp),Qm(e)._overflowWeeks&&-1===t&&(t=op),Qm(e)._overflowWeekday&&-1===t&&(t=lp),Qm(e).overflow=t),e}var tf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nf=/Z|[+-]\d\d(?::?\d\d)?/,rf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],af=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],of=/^\/?Date\((-?\d+)/i,lf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,cf={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function df(e){var t,s,n,r,a,i,o=e._i,l=tf.exec(o)||sf.exec(o),c=rf.length,d=af.length;if(l){for(Qm(e).iso=!0,t=0,s=c;t<s;t++)if(rf[t][1].exec(l[1])){r=rf[t][0],n=!1!==rf[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,s=d;t<s;t++)if(af[t][1].exec(l[3])){a=(l[2]||" ")+af[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!nf.exec(l[4]))return void(e._isValid=!1);i="Z"}e._f=r+(a||"")+(i||""),ff(e)}else e._isValid=!1}function uf(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function mf(e){var t,s,n,r,a,i,o,l,c=lf.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(s=c[4],n=c[3],r=c[2],a=c[5],i=c[6],o=c[7],l=[uf(s),xp.indexOf(n),parseInt(r,10),parseInt(a,10),parseInt(i,10)],o&&l.push(parseInt(o,10)),t=l,!function(e,t,s){return!e||Op.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(Qm(s).weekdayMismatch=!0,s._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,s){if(e)return cf[e];if(t)return 0;var n=parseInt(s,10),r=n%100;return(n-r)/100*60+r}(c[8],c[9],c[10]),e._d=_p.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Qm(e).rfc2822=!0}else e._isValid=!1}function hf(e,t,s){return null!=e?e:null!=t?t:s}function pf(e){var t,s,n,r,a,i=[];if(!e._d){for(n=function(e){var t=new Date(zm.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[sp]&&null==e._a[tp]&&function(e){var t,s,n,r,a,i,o,l,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,i=4,s=hf(t.GG,e._a[ep],Dp(vf(),1,4).year),n=hf(t.W,1),((r=hf(t.E,1))<1||r>7)&&(l=!0)):(a=e._locale._week.dow,i=e._locale._week.doy,c=Dp(vf(),a,i),s=hf(t.gg,e._a[ep],c.year),n=hf(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||t.e>6)&&(l=!0)):r=a);n<1||n>Ap(s,a,i)?Qm(e)._overflowWeeks=!0:null!=l?Qm(e)._overflowWeekday=!0:(o=Tp(s,n,r,a,i),e._a[ep]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=hf(e._a[ep],n[ep]),(e._dayOfYear>cp(a)||0===e._dayOfYear)&&(Qm(e)._overflowDayOfYear=!0),s=_p(a,0,e._dayOfYear),e._a[tp]=s.getUTCMonth(),e._a[sp]=s.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=n[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[np]&&0===e._a[rp]&&0===e._a[ap]&&0===e._a[ip]&&(e._nextDay=!0,e._a[np]=0),e._d=(e._useUTC?_p:Sp).apply(null,i),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[np]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(Qm(e).weekdayMismatch=!0)}}function ff(e){if(e._f!==zm.ISO_8601)if(e._f!==zm.RFC_2822){e._a=[],Qm(e).empty=!0;var t,s,n,r,a,i,o,l=""+e._i,c=l.length,d=0;for(o=(n=bh(e._f,e._locale).match(hh)||[]).length,t=0;t<o;t++)r=n[t],(s=(l.match(Yh(r,e))||[])[0])&&((a=l.substr(0,l.indexOf(s))).length>0&&Qm(e).unusedInput.push(a),l=l.slice(l.indexOf(s)+s.length),d+=s.length),gh[r]?(s?Qm(e).empty=!1:Qm(e).unusedTokens.push(r),Zh(r,s,e)):e._strict&&!s&&Qm(e).unusedTokens.push(r);Qm(e).charsLeftOver=c-d,l.length>0&&Qm(e).unusedInput.push(l),e._a[np]<=12&&!0===Qm(e).bigHour&&e._a[np]>0&&(Qm(e).bigHour=void 0),Qm(e).parsedDateParts=e._a.slice(0),Qm(e).meridiem=e._meridiem,e._a[np]=function(e,t,s){var n;if(null==s)return t;return null!=e.meridiemHour?e.meridiemHour(t,s):null!=e.isPM?((n=e.isPM(s))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[np],e._meridiem),null!==(i=Qm(e).era)&&(e._a[ep]=e._locale.erasConvertYear(i,e._a[ep])),pf(e),ef(e)}else mf(e);else df(e)}function gf(e){var t=e._i,s=e._f;return e._locale=e._locale||Jp(e._l),null===t||void 0===s&&""===t?Zm({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),nh(t)?new sh(ef(t)):(Vm(t)?e._d=t:Bm(s)?function(e){var t,s,n,r,a,i,o=!1,l=e._f.length;if(0===l)return Qm(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)a=0,i=!1,t=th({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],ff(t),Xm(t)&&(i=!0),a+=Qm(t).charsLeftOver,a+=10*Qm(t).unusedTokens.length,Qm(t).score=a,o?a<n&&(n=a,s=t):(null==n||a<n||i)&&(n=a,s=t,i&&(o=!0));Gm(e,s||t)}(e):s?ff(e):function(e){var t=e._i;$m(t)?e._d=new Date(zm.now()):Vm(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=of.exec(e._i);null===t?(df(e),!1===e._isValid&&(delete e._isValid,mf(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:zm.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):Bm(t)?(e._a=Hm(t.slice(0),function(e){return parseInt(e,10)}),pf(e)):Um(t)?function(e){if(!e._d){var t=Nh(e._i),s=void 0===t.day?t.date:t.day;e._a=Hm([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),pf(e)}}(e):Ym(t)?e._d=new Date(t):zm.createFromInputFallback(e)}(e),Xm(e)||(e._d=null),e))}function xf(e,t,s,n,r){var a,i={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==s&&!1!==s||(n=s,s=void 0),(Um(e)&&Wm(e)||Bm(e)&&0===e.length)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=r,i._l=s,i._i=e,i._f=t,i._strict=n,(a=new sh(ef(gf(i))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function vf(e,t,s,n){return xf(e,t,s,n,!1)}zm.createFromInputFallback=ah("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),zm.ISO_8601=function(){},zm.RFC_2822=function(){};var yf=ah("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vf.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Zm()}),bf=ah("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vf.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Zm()});function wf(e,t){var s,n;if(1===t.length&&Bm(t[0])&&(t=t[0]),!t.length)return vf();for(s=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](s)||(s=t[n]);return s}var jf=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Nf(e){var t=Nh(e),s=t.year||0,n=t.quarter||0,r=t.month||0,a=t.week||t.isoWeek||0,i=t.day||0,o=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,s,n=!1,r=jf.length;for(t in e)if(qm(e,t)&&(-1===dp.call(jf,t)||null!=e[t]&&isNaN(e[t])))return!1;for(s=0;s<r;++s)if(e[jf[s]]){if(n)return!1;parseFloat(e[jf[s]])!==Gh(e[jf[s]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*o*60*60,this._days=+i+7*a,this._months=+r+3*n+12*s,this._data={},this._locale=Jp(),this._bubble()}function kf(e){return e instanceof Nf}function Sf(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function _f(e,t){xh(e,0,0,function(){var e=this.utcOffset(),s="+";return e<0&&(e=-e,s="-"),s+mh(~~(e/60),2)+t+mh(~~e%60,2)})}_f("Z",":"),_f("ZZ",""),$h("Z",Bh),$h("ZZ",Bh),Qh(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Tf(Bh,e)});var Ef=/([\+\-]|\d\d)/gi;function Tf(e,t){var s,n,r=(t||"").match(e);return null===r?null:0===(n=60*(s=((r[r.length-1]||[])+"").match(Ef)||["-",0,0])[1]+Gh(s[2]))?0:"+"===s[0]?n:-n}function Df(e,t){var s,n;return t._isUTC?(s=t.clone(),n=(nh(e)||Vm(e)?e.valueOf():vf(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+n),zm.updateOffset(s,!1),s):vf(e).local()}function Af(e){return-Math.round(e._d.getTimezoneOffset())}function Mf(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}zm.updateOffset=function(){};var Cf=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Of=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Pf(e,t){var s,n,r,a=e,i=null;return kf(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:Ym(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(i=Cf.exec(e))?(s="-"===i[1]?-1:1,a={y:0,d:Gh(i[sp])*s,h:Gh(i[np])*s,m:Gh(i[rp])*s,s:Gh(i[ap])*s,ms:Gh(Sf(1e3*i[ip]))*s}):(i=Of.exec(e))?(s="-"===i[1]?-1:1,a={y:If(i[2],s),M:If(i[3],s),w:If(i[4],s),d:If(i[5],s),h:If(i[6],s),m:If(i[7],s),s:If(i[8],s)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=function(e,t){var s;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Df(t,e),e.isBefore(t)?s=Rf(e,t):((s=Rf(t,e)).milliseconds=-s.milliseconds,s.months=-s.months);return s}(vf(a.from),vf(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),n=new Nf(a),kf(e)&&qm(e,"_locale")&&(n._locale=e._locale),kf(e)&&qm(e,"_isValid")&&(n._isValid=e._isValid),n}function If(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function Rf(e,t){var s={};return s.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function Lf(e,t){return function(s,n){var r;return null===n||isNaN(+n)||(lh(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=s,s=n,n=r),Ff(this,Pf(s,n),e),this}}function Ff(e,t,s,n){var r=t._milliseconds,a=Sf(t._days),i=Sf(t._months);e.isValid()&&(n=null==n||n,i&&jp(e,hp(e,"Month")+i*s),a&&pp(e,"Date",hp(e,"Date")+a*s),r&&e._d.setTime(e._d.valueOf()+r*s),n&&zm.updateOffset(e,a||i))}Pf.fn=Nf.prototype,Pf.invalid=function(){return Pf(NaN)};var zf=Lf(1,"add"),Bf=Lf(-1,"subtract");function Uf(e){return"string"==typeof e||e instanceof String}function qf(e){return nh(e)||Vm(e)||Uf(e)||Ym(e)||function(e){var t=Bm(e),s=!1;t&&(s=0===e.filter(function(t){return!Ym(t)&&Uf(e)}).length);return t&&s}(e)||function(e){var t,s,n=Um(e)&&!Wm(e),r=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i=a.length;for(t=0;t<i;t+=1)s=a[t],r=r||qm(e,s);return n&&r}(e)||null==e}function Wf(e,t){if(e.date()<t.date())return-Wf(t,e);var s=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(s,"months");return-(s+(t-n<0?(t-n)/(n-e.clone().add(s-1,"months")):(t-n)/(e.clone().add(s+1,"months")-n)))||0}function $f(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Jp(e))&&(this._locale=t),this)}zm.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",zm.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Yf=ah("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Vf(){return this._locale}var Hf=1e3,Gf=6e4,Kf=36e5,Qf=126227808e5;function Xf(e,t){return(e%t+t)%t}function Zf(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-Qf:new Date(e,t,s).valueOf()}function Jf(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-Qf:Date.UTC(e,t,s)}function eg(e,t){return t.erasAbbrRegex(e)}function tg(){var e,t,s,n,r,a=[],i=[],o=[],l=[],c=this.eras();for(e=0,t=c.length;e<t;++e)s=Vh(c[e].name),n=Vh(c[e].abbr),r=Vh(c[e].narrow),i.push(s),a.push(n),o.push(r),l.push(s),l.push(n),l.push(r);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function sg(e,t){xh(0,[e,e.length],0,t)}function ng(e,t,s,n,r){var a;return null==e?Dp(this,n,r).year:(t>(a=Ap(e,n,r))&&(t=a),rg.call(this,e,t,s,n,r))}function rg(e,t,s,n,r){var a=Tp(e,t,s,n,r),i=_p(a.year,0,a.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}xh("N",0,0,"eraAbbr"),xh("NN",0,0,"eraAbbr"),xh("NNN",0,0,"eraAbbr"),xh("NNNN",0,0,"eraName"),xh("NNNNN",0,0,"eraNarrow"),xh("y",["y",1],"yo","eraYear"),xh("y",["yy",2],0,"eraYear"),xh("y",["yyy",3],0,"eraYear"),xh("y",["yyyy",4],0,"eraYear"),$h("N",eg),$h("NN",eg),$h("NNN",eg),$h("NNNN",function(e,t){return t.erasNameRegex(e)}),$h("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),Qh(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,n){var r=s._locale.erasParse(e,n,s._strict);r?Qm(s).era=r:Qm(s).invalidEra=e}),$h("y",Lh),$h("yy",Lh),$h("yyy",Lh),$h("yyyy",Lh),$h("yo",function(e,t){return t._eraYearOrdinalRegex||Lh}),Qh(["y","yy","yyy","yyyy"],ep),Qh(["yo"],function(e,t,s,n){var r;s._locale._eraYearOrdinalRegex&&(r=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[ep]=s._locale.eraYearOrdinalParse(e,r):t[ep]=parseInt(e,10)}),xh(0,["gg",2],0,function(){return this.weekYear()%100}),xh(0,["GG",2],0,function(){return this.isoWeekYear()%100}),sg("gggg","weekYear"),sg("ggggg","weekYear"),sg("GGGG","isoWeekYear"),sg("GGGGG","isoWeekYear"),$h("G",Fh),$h("g",Fh),$h("GG",Mh,Eh),$h("gg",Mh,Eh),$h("GGGG",Ih,Dh),$h("gggg",Ih,Dh),$h("GGGGG",Rh,Ah),$h("ggggg",Rh,Ah),Xh(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,n){t[n.substr(0,2)]=Gh(e)}),Xh(["gg","GG"],function(e,t,s,n){t[n]=zm.parseTwoDigitYear(e)}),xh("Q",0,"Qo","quarter"),$h("Q",_h),Qh("Q",function(e,t){t[tp]=3*(Gh(e)-1)}),xh("D",["DD",2],"Do","date"),$h("D",Mh,qh),$h("DD",Mh,Eh),$h("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Qh(["D","DD"],sp),Qh("Do",function(e,t){t[sp]=Gh(e.match(Mh)[0])});var ag=mp("Date",!0);xh("DDD",["DDDD",3],"DDDo","dayOfYear"),$h("DDD",Ph),$h("DDDD",Th),Qh(["DDD","DDDD"],function(e,t,s){s._dayOfYear=Gh(e)}),xh("m",["mm",2],0,"minute"),$h("m",Mh,Wh),$h("mm",Mh,Eh),Qh(["m","mm"],rp);var ig=mp("Minutes",!1);xh("s",["ss",2],0,"second"),$h("s",Mh,Wh),$h("ss",Mh,Eh),Qh(["s","ss"],ap);var og,lg,cg=mp("Seconds",!1);for(xh("S",0,0,function(){return~~(this.millisecond()/100)}),xh(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),xh(0,["SSS",3],0,"millisecond"),xh(0,["SSSS",4],0,function(){return 10*this.millisecond()}),xh(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),xh(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),xh(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),xh(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),xh(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),$h("S",Ph,_h),$h("SS",Ph,Eh),$h("SSS",Ph,Th),og="SSSS";og.length<=9;og+="S")$h(og,Lh);function dg(e,t){t[ip]=Gh(1e3*("0."+e))}for(og="S";og.length<=9;og+="S")Qh(og,dg);lg=mp("Milliseconds",!1),xh("z",0,0,"zoneAbbr"),xh("zz",0,0,"zoneName");var ug=sh.prototype;function mg(e){return e}ug.add=zf,ug.calendar=function(e,t){1===arguments.length&&(arguments[0]?qf(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,s=Um(e)&&!Wm(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)n=n||qm(e,r[t]);return s&&n}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||vf(),n=Df(s,this).startOf("day"),r=zm.calendarFormat(this,n)||"sameElse",a=t&&(ch(t[r])?t[r].call(this,s):t[r]);return this.format(a||this.localeData().calendar(r,this,vf(s)))},ug.clone=function(){return new sh(this)},ug.diff=function(e,t,s){var n,r,a;if(!this.isValid())return NaN;if(!(n=Df(e,this)).isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),t=jh(t)){case"year":a=Wf(this,n)/12;break;case"month":a=Wf(this,n);break;case"quarter":a=Wf(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-r)/864e5;break;case"week":a=(this-n-r)/6048e5;break;default:a=this-n}return s?a:Hh(a)},ug.endOf=function(e){var t,s;if(void 0===(e=jh(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?Jf:Zf,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Kf-Xf(t+(this._isUTC?0:this.utcOffset()*Gf),Kf)-1;break;case"minute":t=this._d.valueOf(),t+=Gf-Xf(t,Gf)-1;break;case"second":t=this._d.valueOf(),t+=Hf-Xf(t,Hf)-1}return this._d.setTime(t),zm.updateOffset(this,!0),this},ug.format=function(e){e||(e=this.isUtc()?zm.defaultFormatUtc:zm.defaultFormat);var t=yh(this,e);return this.localeData().postformat(t)},ug.from=function(e,t){return this.isValid()&&(nh(e)&&e.isValid()||vf(e).isValid())?Pf({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ug.fromNow=function(e){return this.from(vf(),e)},ug.to=function(e,t){return this.isValid()&&(nh(e)&&e.isValid()||vf(e).isValid())?Pf({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ug.toNow=function(e){return this.to(vf(),e)},ug.get=function(e){return ch(this[e=jh(e)])?this[e]():this},ug.invalidAt=function(){return Qm(this).overflow},ug.isAfter=function(e,t){var s=nh(e)?e:vf(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=jh(t)||"millisecond")?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf())},ug.isBefore=function(e,t){var s=nh(e)?e:vf(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=jh(t)||"millisecond")?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf())},ug.isBetween=function(e,t,s,n){var r=nh(e)?e:vf(e),a=nh(t)?t:vf(t);return!!(this.isValid()&&r.isValid()&&a.isValid())&&(("("===(n=n||"()")[0]?this.isAfter(r,s):!this.isBefore(r,s))&&(")"===n[1]?this.isBefore(a,s):!this.isAfter(a,s)))},ug.isSame=function(e,t){var s,n=nh(e)?e:vf(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=jh(t)||"millisecond")?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf()))},ug.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ug.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ug.isValid=function(){return Xm(this)},ug.lang=Yf,ug.locale=$f,ug.localeData=Vf,ug.max=bf,ug.min=yf,ug.parsingFlags=function(){return Gm({},Qm(this))},ug.set=function(e,t){if("object"==typeof e){var s,n=function(e){var t,s=[];for(t in e)qm(e,t)&&s.push({unit:t,priority:kh[t]});return s.sort(function(e,t){return e.priority-t.priority}),s}(e=Nh(e)),r=n.length;for(s=0;s<r;s++)this[n[s].unit](e[n[s].unit])}else if(ch(this[e=jh(e)]))return this[e](t);return this},ug.startOf=function(e){var t,s;if(void 0===(e=jh(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?Jf:Zf,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Xf(t+(this._isUTC?0:this.utcOffset()*Gf),Kf);break;case"minute":t=this._d.valueOf(),t-=Xf(t,Gf);break;case"second":t=this._d.valueOf(),t-=Xf(t,Hf)}return this._d.setTime(t),zm.updateOffset(this,!0),this},ug.subtract=Bf,ug.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ug.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ug.toDate=function(){return new Date(this.valueOf())},ug.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?yh(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ch(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",yh(s,"Z")):yh(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ug.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,s,n="moment",r="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+n+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+s)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(ug[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ug.toJSON=function(){return this.isValid()?this.toISOString():null},ug.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ug.unix=function(){return Math.floor(this.valueOf()/1e3)},ug.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ug.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ug.eraName=function(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until)return n[e].name;if(n[e].until<=s&&s<=n[e].since)return n[e].name}return""},ug.eraNarrow=function(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until)return n[e].narrow;if(n[e].until<=s&&s<=n[e].since)return n[e].narrow}return""},ug.eraAbbr=function(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until)return n[e].abbr;if(n[e].until<=s&&s<=n[e].since)return n[e].abbr}return""},ug.eraYear=function(){var e,t,s,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=r[e].since<=r[e].until?1:-1,n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return(this.year()-zm(r[e].since).year())*s+r[e].offset;return this.year()},ug.year=up,ug.isLeapYear=function(){return Jh(this.year())},ug.weekYear=function(e){return ng.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},ug.isoWeekYear=function(e){return ng.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ug.quarter=ug.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ug.month=Np,ug.daysInMonth=function(){return fp(this.year(),this.month())},ug.week=ug.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ug.isoWeek=ug.isoWeeks=function(e){var t=Dp(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ug.weeksInYear=function(){var e=this.localeData()._week;return Ap(this.year(),e.dow,e.doy)},ug.weeksInWeekYear=function(){var e=this.localeData()._week;return Ap(this.weekYear(),e.dow,e.doy)},ug.isoWeeksInYear=function(){return Ap(this.year(),1,4)},ug.isoWeeksInISOWeekYear=function(){return Ap(this.isoWeekYear(),1,4)},ug.date=ag,ug.day=ug.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=hp(this,"Day");return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ug.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ug.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ug.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ug.hour=ug.hours=Wp,ug.minute=ug.minutes=ig,ug.second=ug.seconds=cg,ug.millisecond=ug.milliseconds=lg,ug.utcOffset=function(e,t,s){var n,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Tf(Bh,e)))return this}else Math.abs(e)<16&&!s&&(e*=60);return!this._isUTC&&t&&(n=Af(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?Ff(this,Pf(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,zm.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Af(this)},ug.utc=function(e){return this.utcOffset(0,e)},ug.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Af(this),"m")),this},ug.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Tf(zh,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ug.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?vf(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ug.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ug.isLocal=function(){return!!this.isValid()&&!this._isUTC},ug.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ug.isUtc=Mf,ug.isUTC=Mf,ug.zoneAbbr=function(){return this._isUTC?"UTC":""},ug.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ug.dates=ah("dates accessor is deprecated. Use date instead.",ag),ug.months=ah("months accessor is deprecated. Use month instead",Np),ug.years=ah("years accessor is deprecated. Use year instead",up),ug.zone=ah("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ug.isDSTShifted=ah("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!$m(this._isDSTShifted))return this._isDSTShifted;var e,t={};return th(t,this),(t=gf(t))._a?(e=t._isUTC?Km(t._a):vf(t._a),this._isDSTShifted=this.isValid()&&function(e,t){var s,n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<n;s++)Gh(e[s])!==Gh(t[s])&&a++;return a+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var hg=uh.prototype;function pg(e,t,s,n){var r=Jp(),a=Km().set(n,t);return r[s](a,e)}function fg(e,t,s){if(Ym(e)&&(t=e,e=void 0),e=e||"",null!=t)return pg(e,t,s,"month");var n,r=[];for(n=0;n<12;n++)r[n]=pg(e,n,s,"month");return r}function gg(e,t,s,n){"boolean"==typeof e?(Ym(t)&&(s=t,t=void 0),t=t||""):(s=t=e,e=!1,Ym(t)&&(s=t,t=void 0),t=t||"");var r,a=Jp(),i=e?a._week.dow:0,o=[];if(null!=s)return pg(t,(s+i)%7,n,"day");for(r=0;r<7;r++)o[r]=pg(t,(r+i)%7,n,"day");return o}hg.calendar=function(e,t,s){var n=this._calendar[e]||this._calendar.sameElse;return ch(n)?n.call(t,s):n},hg.longDateFormat=function(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(hh).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},hg.invalidDate=function(){return this._invalidDate},hg.ordinal=function(e){return this._ordinal.replace("%d",e)},hg.preparse=mg,hg.postformat=mg,hg.relativeTime=function(e,t,s,n){var r=this._relativeTime[s];return ch(r)?r(e,t,s,n):r.replace(/%d/i,e)},hg.pastFuture=function(e,t){var s=this._relativeTime[e>0?"future":"past"];return ch(s)?s(t):s.replace(/%s/i,t)},hg.set=function(e){var t,s;for(s in e)qm(e,s)&&(ch(t=e[s])?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},hg.eras=function(e,t){var s,n,r,a=this._eras||Jp("en")._eras;for(s=0,n=a.length;s<n;++s){if("string"==typeof a[s].since)r=zm(a[s].since).startOf("day"),a[s].since=r.valueOf();switch(typeof a[s].until){case"undefined":a[s].until=1/0;break;case"string":r=zm(a[s].until).startOf("day").valueOf(),a[s].until=r.valueOf()}}return a},hg.erasParse=function(e,t,s){var n,r,a,i,o,l=this.eras();for(e=e.toUpperCase(),n=0,r=l.length;n<r;++n)if(a=l[n].name.toUpperCase(),i=l[n].abbr.toUpperCase(),o=l[n].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(i===e)return l[n];break;case"NNNN":if(a===e)return l[n];break;case"NNNNN":if(o===e)return l[n]}else if([a,i,o].indexOf(e)>=0)return l[n]},hg.erasConvertYear=function(e,t){var s=e.since<=e.until?1:-1;return void 0===t?zm(e.since).year():zm(e.since).year()+(t-e.offset)*s},hg.erasAbbrRegex=function(e){return qm(this,"_erasAbbrRegex")||tg.call(this),e?this._erasAbbrRegex:this._erasRegex},hg.erasNameRegex=function(e){return qm(this,"_erasNameRegex")||tg.call(this),e?this._erasNameRegex:this._erasRegex},hg.erasNarrowRegex=function(e){return qm(this,"_erasNarrowRegex")||tg.call(this),e?this._erasNarrowRegex:this._erasRegex},hg.months=function(e,t){return e?Bm(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||vp).test(t)?"format":"standalone"][e.month()]:Bm(this._months)?this._months:this._months.standalone},hg.monthsShort=function(e,t){return e?Bm(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[vp.test(t)?"format":"standalone"][e.month()]:Bm(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},hg.monthsParse=function(e,t,s){var n,r,a;if(this._monthsParseExact)return wp.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=Km([2e3,n]),s&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),s||this._monthsParse[n]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),s&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(s&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!s&&this._monthsParse[n].test(e))return n}},hg.monthsRegex=function(e){return this._monthsParseExact?(qm(this,"_monthsRegex")||kp.call(this),e?this._monthsStrictRegex:this._monthsRegex):(qm(this,"_monthsRegex")||(this._monthsRegex=bp),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},hg.monthsShortRegex=function(e){return this._monthsParseExact?(qm(this,"_monthsRegex")||kp.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(qm(this,"_monthsShortRegex")||(this._monthsShortRegex=yp),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},hg.week=function(e){return Dp(e,this._week.dow,this._week.doy).week},hg.firstDayOfYear=function(){return this._week.doy},hg.firstDayOfWeek=function(){return this._week.dow},hg.weekdays=function(e,t){var s=Bm(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Mp(s,this._week.dow):e?s[e.day()]:s},hg.weekdaysMin=function(e){return!0===e?Mp(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},hg.weekdaysShort=function(e){return!0===e?Mp(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},hg.weekdaysParse=function(e,t,s){var n,r,a;if(this._weekdaysParseExact)return Fp.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=Km([2e3,1]).day(n),s&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),s&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(s&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(s&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!s&&this._weekdaysParse[n].test(e))return n}},hg.weekdaysRegex=function(e){return this._weekdaysParseExact?(qm(this,"_weekdaysRegex")||zp.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(qm(this,"_weekdaysRegex")||(this._weekdaysRegex=Ip),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},hg.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(qm(this,"_weekdaysRegex")||zp.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(qm(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Rp),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},hg.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(qm(this,"_weekdaysRegex")||zp.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(qm(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Lp),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},hg.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},hg.meridiem=function(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"},Xp("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Gh(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),zm.lang=ah("moment.lang is deprecated. Use moment.locale instead.",Xp),zm.langData=ah("moment.langData is deprecated. Use moment.localeData instead.",Jp);var xg=Math.abs;function vg(e,t,s,n){var r=Pf(t,s);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function yg(e){return e<0?Math.floor(e):Math.ceil(e)}function bg(e){return 4800*e/146097}function wg(e){return 146097*e/4800}function jg(e){return function(){return this.as(e)}}var Ng=jg("ms"),kg=jg("s"),Sg=jg("m"),_g=jg("h"),Eg=jg("d"),Tg=jg("w"),Dg=jg("M"),Ag=jg("Q"),Mg=jg("y"),Cg=Ng;function Og(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pg=Og("milliseconds"),Ig=Og("seconds"),Rg=Og("minutes"),Lg=Og("hours"),Fg=Og("days"),zg=Og("months"),Bg=Og("years");var Ug=Math.round,qg={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Wg(e,t,s,n,r){return r.relativeTime(t||1,!!s,e,n)}var $g=Math.abs;function Yg(e){return(e>0)-(e<0)||+e}function Vg(){if(!this.isValid())return this.localeData().invalidDate();var e,t,s,n,r,a,i,o,l=$g(this._milliseconds)/1e3,c=$g(this._days),d=$g(this._months),u=this.asSeconds();return u?(e=Hh(l/60),t=Hh(e/60),l%=60,e%=60,s=Hh(d/12),d%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=u<0?"-":"",a=Yg(this._months)!==Yg(u)?"-":"",i=Yg(this._days)!==Yg(u)?"-":"",o=Yg(this._milliseconds)!==Yg(u)?"-":"",r+"P"+(s?a+s+"Y":"")+(d?a+d+"M":"")+(c?i+c+"D":"")+(t||e||l?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(l?o+n+"S":"")):"P0D"}var Hg=Nf.prototype;function Gg(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function Kg(e){const t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let s="";for(const[n,r]of t)for(;e>=n;)s+=r,e-=n;return s}Hg.isValid=function(){return this._isValid},Hg.abs=function(){var e=this._data;return this._milliseconds=xg(this._milliseconds),this._days=xg(this._days),this._months=xg(this._months),e.milliseconds=xg(e.milliseconds),e.seconds=xg(e.seconds),e.minutes=xg(e.minutes),e.hours=xg(e.hours),e.months=xg(e.months),e.years=xg(e.years),this},Hg.add=function(e,t){return vg(this,e,t,1)},Hg.subtract=function(e,t){return vg(this,e,t,-1)},Hg.as=function(e){if(!this.isValid())return NaN;var t,s,n=this._milliseconds;if("month"===(e=jh(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,s=this._months+bg(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(wg(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Hg.asMilliseconds=Ng,Hg.asSeconds=kg,Hg.asMinutes=Sg,Hg.asHours=_g,Hg.asDays=Eg,Hg.asWeeks=Tg,Hg.asMonths=Dg,Hg.asQuarters=Ag,Hg.asYears=Mg,Hg.valueOf=Cg,Hg._bubble=function(){var e,t,s,n,r,a=this._milliseconds,i=this._days,o=this._months,l=this._data;return a>=0&&i>=0&&o>=0||a<=0&&i<=0&&o<=0||(a+=864e5*yg(wg(o)+i),i=0,o=0),l.milliseconds=a%1e3,e=Hh(a/1e3),l.seconds=e%60,t=Hh(e/60),l.minutes=t%60,s=Hh(t/60),l.hours=s%24,i+=Hh(s/24),o+=r=Hh(bg(i)),i-=yg(wg(r)),n=Hh(o/12),o%=12,l.days=i,l.months=o,l.years=n,this},Hg.clone=function(){return Pf(this)},Hg.get=function(e){return e=jh(e),this.isValid()?this[e+"s"]():NaN},Hg.milliseconds=Pg,Hg.seconds=Ig,Hg.minutes=Rg,Hg.hours=Lg,Hg.days=Fg,Hg.weeks=function(){return Hh(this.days()/7)},Hg.months=zg,Hg.years=Bg,Hg.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var s,n,r=!1,a=qg;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(a=Object.assign({},qg,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),n=function(e,t,s,n){var r=Pf(e).abs(),a=Ug(r.as("s")),i=Ug(r.as("m")),o=Ug(r.as("h")),l=Ug(r.as("d")),c=Ug(r.as("M")),d=Ug(r.as("w")),u=Ug(r.as("y")),m=a<=s.ss&&["s",a]||a<s.s&&["ss",a]||i<=1&&["m"]||i<s.m&&["mm",i]||o<=1&&["h"]||o<s.h&&["hh",o]||l<=1&&["d"]||l<s.d&&["dd",l];return null!=s.w&&(m=m||d<=1&&["w"]||d<s.w&&["ww",d]),(m=m||c<=1&&["M"]||c<s.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,m[3]=+e>0,m[4]=n,Wg.apply(null,m)}(this,!r,a,s=this.localeData()),r&&(n=s.pastFuture(+this,n)),s.postformat(n)},Hg.toISOString=Vg,Hg.toString=Vg,Hg.toJSON=Vg,Hg.locale=$f,Hg.localeData=Vf,Hg.toIsoString=ah("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Vg),Hg.lang=Yf,xh("X",0,0,"unix"),xh("x",0,0,"valueOf"),$h("x",Fh),$h("X",/[+-]?\d+(\.\d{1,3})?/),Qh("X",function(e,t,s){s._d=new Date(1e3*parseFloat(e))}),Qh("x",function(e,t,s){s._d=new Date(Gh(e))}),
//! moment.js
zm.version="2.30.1",Om=vf,zm.fn=ug,zm.min=function(){return wf("isBefore",[].slice.call(arguments,0))},zm.max=function(){return wf("isAfter",[].slice.call(arguments,0))},zm.now=function(){return Date.now?Date.now():+new Date},zm.utc=Km,zm.unix=function(e){return vf(1e3*e)},zm.months=function(e,t){return fg(e,t,"months")},zm.isDate=Vm,zm.locale=Xp,zm.invalid=Zm,zm.duration=Pf,zm.isMoment=nh,zm.weekdays=function(e,t,s){return gg(e,t,s,"weekdays")},zm.parseZone=function(){return vf.apply(null,arguments).parseZone()},zm.localeData=Jp,zm.isDuration=kf,zm.monthsShort=function(e,t){return fg(e,t,"monthsShort")},zm.weekdaysMin=function(e,t,s){return gg(e,t,s,"weekdaysMin")},zm.defineLocale=Zp,zm.updateLocale=function(e,t){if(null!=t){var s,n,r=Yp;null!=Vp[e]&&null!=Vp[e].parentLocale?Vp[e].set(dh(Vp[e]._config,t)):(null!=(n=Qp(e))&&(r=n._config),t=dh(r,t),null==n&&(t.abbr=e),(s=new uh(t)).parentLocale=Vp[e],Vp[e]=s),Xp(e)}else null!=Vp[e]&&(null!=Vp[e].parentLocale?(Vp[e]=Vp[e].parentLocale,e===Xp()&&Xp(e)):null!=Vp[e]&&delete Vp[e]);return Vp[e]},zm.locales=function(){return ih(Vp)},zm.weekdaysShort=function(e,t,s){return gg(e,t,s,"weekdaysShort")},zm.normalizeUnits=jh,zm.relativeTimeRounding=function(e){return void 0===e?Ug:"function"==typeof e&&(Ug=e,!0)},zm.relativeTimeThreshold=function(e,t){return void 0!==qg[e]&&(void 0===t?qg[e]:(qg[e]=t,"s"===e&&(qg.ss=t-1),!0))},zm.calendarFormat=function(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"},zm.prototype=ug,zm.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Qg=function(){const e=[];let t=1;const s=new Date("2025-09-25T00:00:00"),n=new Date("2026-01-12T00:00:00");for(let r=new Date(s);r.getTime()<=n.getTime();r.setDate(r.getDate()+14)){const s=Gg(r);"2026-01-01"!==s&&(e.push({id:`biweekly-touchbase-${s}`,title:`Biweekly Touchbase ${Kg(t)}`,date:s,time:"18:00",endTime:"19:00",location:"FS QDS Teams Server",description:"Its time for updates on the sprint! We get in touch with the active project teams and help them move a step closer to their goals. The clock is ticking. The demo day approaches soon.",type:"meetup",organizer:"FS Quant & Data Science",tags:["biweekly","touchbase"]}),t+=1)}return e.find(e=>"2026-01-12"===e.date)||e.push({id:"biweekly-touchbase-2026-01-12",title:`Biweekly Touchbase ${Kg(t)}`,date:"2026-01-12",time:"18:00",endTime:"19:00",location:"FS QDS Teams Server",description:"Its time for updates on the sprint! We get in touch with the active project teams and help them move a step closer to their goals. The clock is ticking. The demo day approaches soon.",type:"meetup",organizer:"FS Quant & Data Science",tags:["biweekly","touchbase"]}),e}(),Xg=[{id:"ws25-launch-2359",title:"Season WS25 FS QDS Battleground begins!",date:"2025-09-13",time:"23:59",endTime:"23:59",location:"Online",description:"Winter Semester 2025 Battleground season kickoff. Prepare your strategies and get ready to compete!",type:"competition",organizer:"FS Quant & Data Science",tags:["battleground","ws25","launch"]},{id:"ws25-agenda-2100",title:"Agenda for WS25 goes live!",date:"2025-09-13",time:"21:00",endTime:"22:00",location:"Frankfurt School",description:"Detailed WS25 schedule, milestones, and participation guide published.",type:"meetup",organizer:"FS Quant & Data Science",tags:["agenda","ws25"]},{id:"event-001",title:"Introduction to Quantitative Finance",date:"2025-02-15",time:"14:00",endTime:"17:00",location:"Frankfurt School, Room 201",description:"Learn the fundamentals of quantitative finance, risk modeling, and algorithmic trading strategies",type:"workshop",organizer:"FS Quant & Data Science",registrationLink:"https://fs-students.de/events/quant-finance",capacity:30,tags:["quantitative-finance","python","beginner-friendly"]},{id:"event-002",title:"Data Science Career Night with McKinsey",date:"2025-02-20",time:"18:00",endTime:"20:30",location:"Frankfurt School, Audimax",description:"Join us for an evening with McKinsey data scientists discussing career opportunities and real-world projects",type:"speaker",organizer:"FS Quant & Data Science",capacity:100,tags:["career","networking","mckinsey"]},{id:"event-003",title:"Hack the DAX - Trading Competition",date:"2025-03-01",time:"09:00",endTime:"18:00",location:"Frankfurt School, Trading Lab",description:"Annual trading competition - build and test your algorithmic trading strategies on real market data",type:"competition",organizer:"FS Quant & Data Science",registrationLink:"https://fs-students.de/events/hack-the-dax",capacity:50,tags:["competition","trading","prizes"]},{id:"event-004",title:"Machine Learning Study Group",date:"2025-02-25",time:"16:00",endTime:"18:00",location:"Frankfurt School, Library Study Room 3",description:"Weekly study group for machine learning enthusiasts. This week: Neural Networks and Deep Learning",type:"meetup",organizer:"FS Quant & Data Science",capacity:20,tags:["study-group","machine-learning","deep-learning"]},{id:"event-005",title:"Kickoff Meeting - FS Quant & Data Science Initiative",date:"2025-09-13",time:"20:15",endTime:"20:45",location:"Frankfurt School Campus",description:"Join us for the kickoff meeting of the initiative. Meet the team, learn about divisions, and how to get involved.",type:"meetup",organizer:"FS Quant & Data Science"},{id:"event-006",title:"Community Life Fair",date:"2025-09-02",time:"17:00",endTime:"20:00",location:"Outside Audimax",description:"Discover campus clubs and initiatives at the Community Life Fair.",type:"meetup",organizer:"Frankfurt School Student Life"},...Qg,{id:"adx-donnerstag-2025-10-02",title:"Axe the DAX Donnerstag",date:"2025-10-02",time:"18:00",endTime:"20:00",location:"S3.08",description:"A classic FS QDS Market Making Session! We will be simulating a live trading floor through a gamified style. Teams organize themselves into realistic fund team structure comprising PM, Analyst, Quant and Macro Specialist. Formulate trade ideas from market open to closing auction. This is great practice for those wanting to get into trading firms.",type:"exclusive",organizer:"FS Quant & Data Science",image:"/AXE THE DAX DONNERSTAG.png",tags:["adx","trading","auction","options"]},{id:"macro-montag-2025-11-03",title:"Macro Montag",date:"2025-11-03",time:"18:00",endTime:"20:00",location:"S3.09",description:"We will be going through some stocks and macroeconomic indicators for the economy! We combine quantitative and macroeconomic analysis to generate trade ideas. A session suited for those that want to invest, have a stock in mind, or just want to see what others come up with. We will be pitching stocks to each other and analyzing them together. \n\nA great practice for anyone aiming to work in Finance!",type:"exclusive",organizer:"FS Quant & Data Science",image:"/MACRO MONTAG.png",tags:["macro","markets","discussion"]},{id:"trader-math-session-2025-11-27",title:"TraderMath Session",date:"2025-11-27",time:"18:00",endTime:"20:00",location:"S1.12",description:"A competitive solving session that will be good practice if you want to get into trading. Please bring your laptop. We will be announcing the questions on the day of the event. Please do not do them before the event. Depending on your score you get badges on our HTI leaderboard worth more points than the typical question. See you there!",type:"exclusive",organizer:"FS Quant & Data Science",image:"/TRADER MATH SESSION.png",tags:["options","math","competition"]},{id:"finale-demo-day-2026-tba",title:"Finale Demo Day",date:"2026-01-14",time:"18:00",endTime:"21:00",location:"0.03",description:"It's to showcase your projects to our jury. Win prizes and recognition that you deserve!",type:"exclusive",organizer:"FS Quant & Data Science",tags:["demo-day","prizes"]}],Zg=[{id:"past-001",title:"Data Science Career Panel",date:"2024-01-10",time:"18:00",endTime:"20:00",location:"Frankfurt School, Audimax",description:"Industry professionals discuss career paths in data science",type:"speaker",organizer:"FS Quant & Data Science",tags:["career","networking"]},{id:"past-002",title:"Quantitative Trading Strategies Workshop",date:"2024-01-25",time:"15:00",endTime:"18:00",location:"Frankfurt School, Trading Lab",description:"Learn about algorithmic trading and backtesting strategies",type:"workshop",organizer:"FS Quant & Data Science",tags:["trading","finance","python"]}];const Jg=ye,ex=ve,tx=Je.forwardRef(({className:e,...t},s)=>X.jsx(he,{ref:s,className:za("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tx.displayName=he.displayName;const sx=Je.forwardRef(({className:e,children:t,...s},n)=>X.jsxs(ex,{children:[X.jsx(tx,{}),X.jsxs(pe,{ref:n,className:za("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,X.jsxs(fe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[X.jsx(mn,{className:"h-4 w-4"}),X.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sx.displayName=pe.displayName;const nx=({className:e,...t})=>X.jsx("div",{className:za("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nx.displayName="DialogHeader";const rx=Je.forwardRef(({className:e,...t},s)=>X.jsx(ge,{ref:s,className:za("text-lg font-semibold leading-none tracking-tight",e),...t}));rx.displayName=ge.displayName;Je.forwardRef(({className:e,...t},s)=>X.jsx(xe,{ref:s,className:za("text-sm text-muted-foreground",e),...t})).displayName=xe.displayName;const ax=function(e){function t(t,s){var n,r,a=e(t).local(),i=e(s).local();if(!e.tz)return a.toDate().getTimezoneOffset()-i.toDate().getTimezoneOffset();var o=null!==(n=null==a||null===(r=a._z)||void 0===r?void 0:r.name)&&void 0!==n?n:e.tz.guess();return e.tz.zone(o).utcOffset(+a)-e.tz.zone(o).utcOffset(+i)}function s(t,s,n){var r=Fm(n);return[r?e(t).startOf(r):e(t),r?e(s).startOf(r):e(s),r]}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=Fm(arguments.length>1?arguments[1]:void 0);return s?e(t).startOf(s).toDate():e(t).toDate()}function r(e,t,n){var r=Gi(s(e,t,n),3),a=r[0],i=r[1],o=r[2];return a.isSame(i,o)}function a(e,t,n){var r=Gi(s(e,t,n),3),a=r[0],i=r[1],o=r[2];return a.isSameOrBefore(i,o)}function i(t,s,n){var r=Fm(n);return e(t).add(s,r).toDate()}function o(t,s){var n=Fm(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),r=e(t);return e(s).diff(r,n)}function l(t){return e(t).startOf("month").startOf("week").toDate()}function c(t){return e(t).endOf("month").endOf("week").toDate()}function d(t,s){var n=e(t),r=e(s);return e.duration(r.diff(n)).days()}return new ou({formats:Lm,firstOfWeek:function(t){var s=t?e.localeData(t):e.localeData();return s?s.firstDayOfWeek():0},firstVisibleDay:l,lastVisibleDay:c,visibleDays:function(e){for(var t=l(e),s=c(e),n=[];a(t,s);)n.push(t),t=i(t,1,"d");return n},format:function(t,s,n){return(r=e(t),a=n,a?r.locale(a):r).format(s);var r,a},lt:function(e,t,n){var r=Gi(s(e,t,n),3),a=r[0],i=r[1],o=r[2];return a.isBefore(i,o)},lte:a,gt:function(e,t,n){var r=Gi(s(e,t,n),3),a=r[0],i=r[1],o=r[2];return a.isAfter(i,o)},gte:function(e,t,n){var r=Gi(s(e,t,n),3),a=r[0],i=r[1],o=r[2];return a.isSameOrBefore(i,o)},eq:r,neq:function(e,t,s){return!r(e,t,s)},merge:function(t,s){if(!t&&!s)return null;var n=e(s).format("HH:mm:ss"),r=e(t).startOf("day").format("MM/DD/YYYY");return e("".concat(r," ").concat(n),"MM/DD/YYYY HH:mm:ss").toDate()},inRange:function(t,s,n){var r=Fm(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day"),a=e(t),i=e(s),o=e(n);return a.isBetween(i,o,r,"[]")},startOf:n,endOf:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=Fm(arguments.length>1?arguments[1]:void 0);return s?e(t).endOf(s).toDate():e(t).toDate()},range:function(t,s){for(var n=Fm(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),r=e(t).toDate(),o=[];a(r,s);)o.push(r),r=i(r,1,n);return o},add:i,diff:o,ceil:function(e,t){var s=Fm(t),a=n(e,s);return r(a,e)?a:i(a,1,s)},min:function(t,s){var n=e(t),r=e(s);return e.min(n,r).toDate()},max:function(t,s){var n=e(t),r=e(s);return e.max(n,r).toDate()},minutes:function(t){return e(t).minutes()},getSlotDate:function(t,s,n){return e(t).startOf("day").minute(s+n).toDate()},getTimezoneOffset:function(t){return e(t).toDate().getTimezoneOffset()},getDstOffset:t,getTotalMin:function(e,t){return o(e,t,"minutes")},getMinutesFromMidnight:function(s){var n=e(s).startOf("day");return e(s).diff(n,"minutes")+function(s){return t(e(s).startOf("day"),s)}(s)},continuesPrior:function(t,s){var n=e(t),r=e(s);return n.isBefore(r,"day")},continuesAfter:function(t,s,n){var r=e(s),a=e(n);return r.isSameOrAfter(a,"minutes")},sortEvents:function(e){var t=e.evtA,s=t.start,r=t.end,a=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,u=+n(s,"day")-+n(o,"day"),m=d(s,r),h=d(o,l);return u||h-m||!!c-!!a||+s-+o||+r-+l},inEventRange:function(t){var s=t.event,n=s.start,r=s.end,a=t.range,i=a.start,o=a.end,l=e(n).startOf("day"),c=e(r),d=e(i),u=e(o),m=l.isSameOrBefore(u,"day"),h=!l.isSame(c,"minutes")?c.isAfter(d,"minutes"):c.isSameOrAfter(d,"minutes");return m&&h},isSameDate:function(t,s){var n=e(t),r=e(s);return n.isSame(r,"day")},daySpan:d,browserTZOffset:function(){var t=new Date,s=/-/.test(t.toString())?"-":"",n=t.getTimezoneOffset(),r=Number("".concat(s).concat(Math.abs(n)));return e().utcOffset()>r?1:0}})}
//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(zm),ix=()=>{const[e,t]=Je.useState(null),[s,n]=Je.useState("month"),r=function(e){return e.map(e=>{const t=new Date(e.date),s=new Date(e.date);if(e.time){const[s,n]=e.time.split(":");t.setHours(parseInt(s),parseInt(n))}if(e.endTime){const[t,n]=e.endTime.split(":");s.setHours(parseInt(t),parseInt(n))}else e.time&&s.setTime(t.getTime()+72e5);return{id:e.id,title:e.title,start:t,end:s,location:e.location,description:e.description,type:e.type,organizer:e.organizer,allDay:!e.time}})}([...Xg,...Zg]),a=Je.useCallback(e=>{t(e)},[]);return X.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg overflow-hidden shadow-md",children:[X.jsx(Im,{localizer:ax,events:r,startAccessor:"start",endAccessor:"end",style:{height:600},views:["month","week","day","agenda"],defaultView:Ld.MONTH,onSelectEvent:a,eventPropGetter:e=>{let t={backgroundColor:"#f8f9fa",borderRadius:"4px",opacity:.9,color:"#3c4043",border:"0",display:"block",fontWeight:"500"};switch(e.type){case"workshop":t.backgroundColor="#0B3D91",t.color="#ffffff";break;case"speaker":t.backgroundColor="#00A6ED",t.color="#ffffff";break;case"competition":t.backgroundColor="#FFC107",t.color="#0B3D91";break;case"meetup":t.backgroundColor="#28A745",t.color="#ffffff";break;case"exclusive":t.backgroundColor="#6B21A8",t.color="#ffffff";break;default:t.backgroundColor="#6c757d",t.color="#ffffff"}return{style:t}},components:{toolbar:e=>X.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center p-4 mb-4 bg-neutral-50",children:[X.jsx("div",{className:"mb-4 md:mb-0",children:X.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:e.label})}),X.jsxs("div",{className:"flex space-x-2 mb-4 md:mb-0",children:[X.jsxs(Di,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("PREV")},children:[X.jsx("i",{className:"fas fa-chevron-left mr-1"})," Prev"]}),X.jsx(Di,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("TODAY")},children:"Today"}),X.jsxs(Di,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("NEXT")},children:["Next ",X.jsx("i",{className:"fas fa-chevron-right ml-1"})]})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx(Di,{variant:"outline",className:"month"===s?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{n("month"),e.onView("month")},children:"Month"}),X.jsx(Di,{variant:"outline",className:"week"===s?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{n("week"),e.onView("week")},children:"Week"}),X.jsx(Di,{variant:"outline",className:"day"===s?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{n("day"),e.onView("day")},children:"Day"}),X.jsx(Di,{variant:"outline",className:"agenda"===s?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{n("agenda"),e.onView("agenda")},children:"Agenda"})]})]})},className:"text-neutral-700"}),e&&X.jsx(Jg,{open:!!e,onOpenChange:e=>!e&&t(null),children:X.jsxs(sx,{className:"bg-white text-neutral-700 border-neutral-200",children:[X.jsx(nx,{children:X.jsx(rx,{className:"text-lg font-semibold text-neutral-900",children:e.title})}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${(i=e.type,{workshop:"bg-[#0B3D91] text-white",speaker:"bg-blue-500 text-white",competition:"bg-[#FFC107] text-[#0B3D91]",meetup:"bg-green-500 text-white",conference:"bg-indigo-600 text-white",exclusive:"bg-[#6B21A8] text-white"}[i]||"bg-gray-500 text-white").split(" ")[0]}`}),X.jsx("span",{className:"capitalize",children:e.type})]}),X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-calendar-alt text-neutral-400 mt-1 mr-2 w-5"}),X.jsxs("div",{children:[X.jsx("div",{children:zm(e.start).format("dddd, MMMM D, YYYY")}),!e.allDay&&X.jsxs("div",{className:"text-neutral-400",children:[zm(e.start).format("h:mm A")," - ",zm(e.end).format("h:mm A")]})]})]}),e.location&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-map-marker-alt text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.location})]}),e.description&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-align-left text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.description})]}),e.organizer&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-user text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.organizer})]})]}),X.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2",children:[X.jsxs(Di,{variant:"outline",className:"border-[#0B3D91] text-[#0B3D91] hover:bg-[#0B3D91] hover:text-white bg-white",onClick:()=>(e=>{const t=_i(e),s=new Blob([t],{type:"text/calendar;charset=utf-8"}),n=URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.setAttribute("download",`${e.title.replace(/\s+/g,"-")}.ics`),document.body.appendChild(r),r.click(),document.body.removeChild(r)})(e),children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," Add to Calendar (iCal)"]}),X.jsxs(Di,{variant:"outline",className:"bg-[#0B3D91] text-white hover:bg-[#0A357F] border-[#0B3D91]",onClick:()=>window.open(Ei(e),"_blank"),children:[X.jsx("i",{className:"fab fa-google mr-2"})," Add to Google Calendar"]})]})]})]})})]});var i},ox=()=>{const{t:e}=mi(),t=function(){const e=new Date;return e.setHours(0,0,0,0),Xg.filter(t=>new Date(t.date)>=e).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}();return X.jsx("section",{id:"events",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("eventsTitle")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("eventsSubtitle")})]}),X.jsxs("div",{className:"mb-12 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[X.jsx("h3",{className:"text-xl font-inter font-semibold mb-4 text-gray-800",children:e("events.calendar")}),X.jsx(ix,{}),X.jsx("div",{className:"mt-3 text-right text-sm",children:X.jsx("span",{className:"text-gray-500 italic",children:e("events.newEventsComingSoon")})})]}),t.length>0?X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:t.map(e=>X.jsx(Ai,{event:e},e.id))}):X.jsxs("div",{className:"text-center py-12 mb-16 bg-blue-50 rounded-lg",children:[X.jsx("i",{className:"fas fa-calendar-check text-4xl text-blue-400 mb-4"}),X.jsx("p",{className:"text-gray-600",children:e("noUpcomingEvents")})]}),X.jsxs("div",{className:"mt-16",children:[X.jsxs("div",{className:"text-center mb-12",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-4 text-gray-800",children:e("events.pastCollaborations")}),X.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:e("events.pastCollaborationsDescription")})]}),X.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-8 border border-gray-200",children:X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:[{name:"DWS Group",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/DWS_Group_202x_logo.svg/250px-DWS_Group_202x_logo.svg.png"},{name:"Tableau",logo:"https://logos-world.net/wp-content/uploads/2021/10/Tableau-Logo.png"},{name:"Deloitte",logo:"https://upload.wikimedia.org/wikipedia/commons/e/ed/Logo_of_Deloitte.svg"},{name:"Google",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/250px-Google_2015_logo.svg.png"},{name:"McKinsey",logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSNN12aWh7ruc5rs0kAhGfaUkOyW0tuypaPLg&s"},{name:"Statworx",logo:"https://statistik-und-beratung.de/wp-content/uploads/2021/04/logo-statworx-data-science-dark.png"},{name:"IKEA",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Ikea_logo.svg/250px-Ikea_logo.svg.png"},{name:"BCG",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Boston_Consulting_Group_2020_logo.svg/250px-Boston_Consulting_Group_2020_logo.svg.png"},{name:"EY",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/EY_logo_2019.svg/200px-EY_logo_2019.svg.png"},{name:"KPMG",logo:"https://upload.wikimedia.org/wikipedia/commons/d/db/KPMG_blue_logo.svg"},{name:"Commerzbank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Commerzbank_%282009%29.svg/250px-Commerzbank_%282009%29.svg.png"}].map((e,t)=>X.jsx("div",{className:"flex items-center justify-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:X.jsx("img",{src:e.logo,alt:e.name,className:"max-h-12 max-w-full object-contain filter grayscale hover:grayscale-0 transition-all",onError:t=>{const s=t.target;s.style.display="none";const n=s.parentElement;n&&(n.innerHTML=`<div class="text-gray-600 font-semibold">${e.name}</div>`)}})},t))})})]})]})})};function lx(...e){return at(it(e))}function cx({className:e,...t}){return X.jsx(be,{"data-slot":"tabs",className:lx("flex flex-col gap-2",e),...t})}function dx({className:e,...t}){return X.jsx(we,{"data-slot":"tabs-list",className:lx("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function ux({className:e,...t}){return X.jsx(je,{"data-slot":"tabs-trigger",className:lx("data-[state=active]:bg-[var(--card)] dark:data-[state=active]:text-[var(--foreground)] focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground dark:text-muted-foreground inline-flex h-full flex-1 items-center justify-center gap-1.5 rounded-xl px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function mx({className:e,...t}){return X.jsx(Ne,{"data-slot":"tabs-content",className:lx("flex-1 outline-none",e),...t})}const hx=Fa("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function px({className:e,variant:t,asChild:s=!1,...n}){const r=s?me:"span";return X.jsx(r,{"data-slot":"badge",className:lx(hx({variant:t}),e),...n})}function fx(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=s.reduce((t,{useScope:s,scopeName:n})=>({...t,...s(e)[`__scope${n}`]}),{});return Je.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return s.scopeName=t.scopeName,s}var gx="Progress",[xx,vx]=function(e,t=[]){let s=[];const n=()=>{const t=s.map(e=>Je.createContext(e));return function(s){const n=(null==s?void 0:s[e])||t;return Je.useMemo(()=>({[`__scope${e}`]:{...s,[e]:n}}),[s,n])}};return n.scopeName=e,[function(t,n){const r=Je.createContext(n),a=s.length;function i(t){const{scope:s,children:n,...i}=t,o=(null==s?void 0:s[e][a])||r,l=Je.useMemo(()=>i,Object.values(i));return X.jsx(o.Provider,{value:l,children:n})}return s=[...s,n],i.displayName=t+"Provider",[i,function(s,i){const o=(null==i?void 0:i[e][a])||r,l=Je.useContext(o);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},fx(n,...t)]}(gx),[yx,bx]=xx(gx),wx=Je.forwardRef((e,t)=>{const{__scopeProgress:s,value:n=null,max:r,getValueLabel:a=kx,...i}=e;(r||0===r)&&Ex(r);const o=Ex(r)?r:100;null!==n&&Tx(n,o);const l=Tx(n,o)?n:null,c=_x(l)?a(l,o):void 0;return X.jsx(yx,{scope:s,value:l,max:o,children:X.jsx(se.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":_x(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":Sx(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});wx.displayName=gx;var jx="ProgressIndicator",Nx=Je.forwardRef((e,t)=>{const{__scopeProgress:s,...n}=e,r=bx(jx,s);return X.jsx(se.div,{"data-state":Sx(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:t})});function kx(e,t){return`${Math.round(e/t*100)}%`}function Sx(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function _x(e){return"number"==typeof e}function Ex(e){return _x(e)&&!isNaN(e)&&e>0}function Tx(e,t){return _x(e)&&!isNaN(e)&&e<=t&&e>=0}Nx.displayName=jx;var Dx=wx,Ax=Nx;function Mx({className:e,value:t,...s}){return X.jsx(Dx,{"data-slot":"progress",className:lx("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:X.jsx(Ax,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function Cx({className:e,...t}){return X.jsx("div",{"data-slot":"card",className:lx("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Ox({className:e,...t}){return X.jsx("div",{"data-slot":"card-header",className:lx("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Px({className:e,...t}){return X.jsx("h4",{"data-slot":"card-title",className:lx("leading-none",e),...t})}function Ix({className:e,...t}){return X.jsx("div",{"data-slot":"card-content",className:lx("px-6 [&:last-child]:pb-6",e),...t})}const Rx=Fa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Lx({className:e,variant:t,size:s,asChild:n=!1,...r}){const a=n?me:"button";return X.jsx(a,{"data-slot":"button",className:lx(Rx({variant:t,size:s,className:e})),...r})}function Fx({...e}){return X.jsx(ke,{"data-slot":"select",...e})}function zx({...e}){return X.jsx(Se,{"data-slot":"select-value",...e})}function Bx({className:e,size:t="default",children:s,...n}){return X.jsxs(_e,{"data-slot":"select-trigger","data-size":t,className:lx("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[s,X.jsx(Ee,{asChild:!0,children:X.jsx(Ts,{className:"size-4 opacity-50"})})]})}function Ux({className:e,children:t,position:s="popper",...n}){return X.jsx(Te,{children:X.jsxs(De,{"data-slot":"select-content",className:lx("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[X.jsx(Wx,{}),X.jsx(Ae,{className:lx("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),X.jsx($x,{})]})})}function qx({className:e,children:t,...s}){return X.jsxs(Me,{"data-slot":"select-item",className:lx("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[X.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:X.jsx(Ce,{children:X.jsx(Es,{className:"size-4"})})}),X.jsx(Oe,{children:t})]})}function Wx({className:e,...t}){return X.jsx(Pe,{"data-slot":"select-scroll-up-button",className:lx("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(Ms,{className:"size-4"})})}function $x({className:e,...t}){return X.jsx(Ie,{"data-slot":"select-scroll-down-button",className:lx("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(Ts,{className:"size-4"})})}function Yx(e){if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e){const t=e.trim();if(""===t)return null;const s=Number(t);return Number.isFinite(s)?s:null}return null}function Vx(e,t=2,s=""){const n=Yx(e);return null===n?s:n.toFixed(t)}function Hx(e,t=2,s=""){const n=Yx(e);if(null===n)return s;return`${n>=0?"+":""}${n.toFixed(t)}`}function Gx(e,t=2,s="",n=""){const r=Yx(e);return null===r?n:`${s}${r.toFixed(t)}`}function Kx(e,t=1,s=!1,n="%"){const r=Yx(e);if(null===r)return n;return`${s&&r>=0?"+":""}${r.toFixed(t)}%`}function Qx(e,t=0){const s=Yx(e);return null===s?t:s}const Xx={AIR:"/public-logos/AIR.png",ALV:"/public-logos/ALV.png",BMW:"/public-logos/BMW.png",BNR:"/public-logos/BNR.png",DBK:"/public-logos/DBK.png",DTE:"/public-logos/DTE.png",ENR:"/public-logos/ENR.png",MUV2:"/public-logos/MUV2.png",RHM:"/public-logos/RHM.png",SIE:"/public-logos/SIE.png",SY1:"/public-logos/SY1.png",ZAL:"/public-logos/ZAL.png",IFX:"/public-logos/IFX.png",MBG:"/public-logos/MBG.png",MRK:"/public-logos/MRK.png",DHL:"/public-logos/DHL.png",SAP:"/public-logos/SAP.png",VOW3:"/public-logos/VW.png"},Zx={};function Jx(e){const t=String(e||"").toUpperCase().trim();return(t.includes(".")?t.split(".")[0]:t).replace(/[^A-Z0-9]/g,"")}const ev={SIE:"https://cdn.brandfetch.io/id6kfFgTVj/w/180/h/180/theme/dark/logo.png?c=1bxid64Mup7aczewSAYMX&t=1753665761846",DTE:"https://www.telekom.com/resource/blob/1002342/12f9f204ed4293439e1c93f7851ae186/dl-telekom-logo-01-data.jpg",AIR:"https://companieslogo.com/img/orig/AIR.PA-9f3a3975.png?t=1720244490",ALV:"https://www.allianz-partners.com/content/onemarketing/awp/azpartnerscom/de_DE.thumb.1280.1280.png?ck=1757401290",RHM:"https://s3-symbol-logo.tradingview.com/rheinmetall-ag--600.png",ENR:"https://indcdn.indmoney.com/cdn-cgi/image/quality=90,format=auto,metadata=copyright,width=500/https://indcdn.indmoney.com/public/images/INDS37201.png",MUV2:"https://companieslogo.com/img/orig/MUV2.DE-6afaafb5.png?t=1720244493",SY1:"https://rest.arbeitsagentur.de/vermittlung/ag-darstellung-service/ct/v1/arbeitgeberlogo/4JLqgedHX82_0OO-z88rTtZAcYiMJrbi3lAXG2vhNTQ=",BNR:"https://cdn.zonebourse.com/static/instruments-logo-39434198",ZAL:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShrYV4IQNnjg9tA-LdOAfj7jGiRbcmV293Lw&s",BMW:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BMW.svg/2048px-BMW.svg.png",DB:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Deutsche_Bank_logo_without_wordmark.svg/2048px-Deutsche_Bank_logo_without_wordmark.svg.png",SIEGY:"https://logo.clearbit.com/siemens.com",EADSY:"https://logo.clearbit.com/airbus.com",DTEGY:"https://logo.clearbit.com/telekom.com",ALIZF:"https://logo.clearbit.com/allianz.com",SMNEY:"https://logo.clearbit.com/siemens-energy.com",MURGY:"https://logo.clearbit.com/munichre.com",DBK:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Deutsche_Bank_logo_without_wordmark.svg/2048px-Deutsche_Bank_logo_without_wordmark.svg.png",BMWYY:"https://logo.clearbit.com/bmwgroup.com",MUV:"https://companieslogo.com/img/orig/MUV2.DE-6afaafb5.png?t=1720244493",SY:"https://rest.arbeitsagentur.de/vermittlung/ag-darstellung-service/ct/v1/arbeitgeberlogo/4JLqgedHX82_0OO-z88rTtZAcYiMJrbi3lAXG2vhNTQ=",DEFAULT:"/placeholder-logo.png"};async function tv(e){var t,s,n;const r=String(e||"").toUpperCase(),a=Jx(r),i=Xx||{};let o=i[a];if(o||r===a||(o=i[r]),"string"==typeof o&&o.length>0){if(o.startsWith("/")){let e="";if(o.startsWith("/public-logos/")?e=o.replace("/public-logos/",""):o.startsWith("/storage/v1/object/public/public-logos/")&&(e=o.replace("/storage/v1/object/public/public-logos/","")),e){const s=oi.storage.from("public-logos").getPublicUrl(e);if(null==(t=null==s?void 0:s.data)?void 0:t.publicUrl){const e=await async function(e){var t,s,n,r;try{if("true"!==String((null==(s=null==(t=import.meta)?void 0:t.env)?void 0:s.VITE_LOGO_SIGN)??"false").toLowerCase())return null;let a="";if(e.startsWith("/public-logos/"))a=e.replace("/public-logos/","");else{if(!e.startsWith("/storage/v1/object/public/public-logos/"))return null;a=e.replace("/storage/v1/object/public/public-logos/","")}const i=`public-logos/${a}`,o=Date.now(),l=Zx[i];if(l&&l.expiresAt>o)return l.url;const c=Number((null==(r=null==(n=import.meta)?void 0:n.env)?void 0:r.VITE_LOGO_SIGN_TTL_SEC)??604800),d=Math.max(60,Math.min(604800,Number.isFinite(c)?c:604800)),{data:u,error:m}=await oi.storage.from("public-logos").createSignedUrl(a,d);return m||!(null==u?void 0:u.signedUrl)?null:(Zx[i]={url:u.signedUrl,expiresAt:o+1e3*d},u.signedUrl)}catch{return null}}(o);return e||s.data.publicUrl}}const r=((null==(n=null==(s=import.meta)?void 0:s.env)?void 0:n.VITE_SUPABASE_URL)||ii||"").replace(/\/$/,"");if(r)return o.startsWith("/public-logos/")?`${r}/storage/v1/object/public${o}`:`${r}${o}`}return o}return ev[a]?ev[a]:ev[r]?ev[r]:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4K"}function sv(e){var t,s,n;const r=String(e||"").toUpperCase(),a=Jx(r),i=Xx||{};let o=i[a];if(o||r===a||(o=i[r]),"string"==typeof o&&o.length>0){if(o.startsWith("/")){let e="";if(o.startsWith("/public-logos/")?e=o.replace("/public-logos/",""):o.startsWith("/storage/v1/object/public/public-logos/")&&(e=o.replace("/storage/v1/object/public/public-logos/","")),e){const s=oi.storage.from("public-logos").getPublicUrl(e);if(null==(t=null==s?void 0:s.data)?void 0:t.publicUrl)return s.data.publicUrl}const r=((null==(n=null==(s=import.meta)?void 0:s.env)?void 0:n.VITE_SUPABASE_URL)||ii||"").replace(/\/$/,"");if(r)return o.startsWith("/public-logos/")?`${r}/storage/v1/object/public${o}`:`${r}${o}`}return o}return ev[a]?ev[a]:ev[r]?ev[r]:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4K"}const nv=[{ticker:"SIE",adr:"SIEGY",name:"Siemens AG",sector:"Industrials",logo:sv("SIE")},{ticker:"DTE",adr:"DTEGY",name:"Deutsche Telekom AG",sector:"Communication Services",logo:sv("DTE")},{ticker:"AIR",adr:"EADSY",name:"Airbus SE",sector:"Industrials",logo:sv("AIR")},{ticker:"ALV",adr:"ALIZF",name:"Allianz SE",sector:"Financials",logo:sv("ALV")},{ticker:"RHM",adr:"",name:"Rheinmetall AG",sector:"Industrials",logo:sv("RHM")},{ticker:"ENR",adr:"SMNEY",name:"Siemens Energy AG",sector:"Utilities",logo:sv("ENR")},{ticker:"MUV2",adr:"MURGY",name:"Munich Re",sector:"Financials",logo:sv("MUV2")},{ticker:"DBK",adr:"DB",name:"Deutsche Bank AG",sector:"Financials",logo:sv("DBK")},{ticker:"BMW",adr:"BMWYY",name:"BMW AG",sector:"Consumer Discretionary",logo:sv("BMW")},{ticker:"SY1",adr:"SYIEF",name:"Symrise AG",sector:"Materials",logo:sv("SY1")},{ticker:"BNR",adr:"BNTGY",name:"Brenntag SE",sector:"Industrials",logo:sv("BNR")},{ticker:"ZAL",adr:"ZLNDY",name:"Zalando SE",sector:"Consumer Discretionary",logo:sv("ZAL")},{ticker:"IFX",adr:"",name:"Infineon Technologies AG",sector:"Information Technology",logo:sv("IFX")},{ticker:"MBG",adr:"",name:"Mercedes-Benz Group AG",sector:"Consumer Discretionary",logo:sv("MBG")},{ticker:"MRK",adr:"",name:"Merck KGaA",sector:"Health Care",logo:sv("MRK")},{ticker:"DHL",adr:"",name:"Deutsche Post",sector:"Industrials",logo:sv("DHL")},{ticker:"SAP",adr:"",name:"SAP SE",sector:"Information Technology",logo:sv("SAP")},{ticker:"VOW3",adr:"",name:"Volkswagen AG",sector:"Consumer Discretionary",logo:sv("VOW3")}];function rv(e,t){var s;const n=function(e){const t=String(e||"").toUpperCase().trim();return(t.includes(".")?t.split(".")[0]:t).replace(/[^A-Z0-9]/g,"")}(e);try{const t=Xx;let r=t[n]||t[e];if("string"==typeof r&&r.startsWith("/")){let e="";if(r.startsWith("/public-logos/")?e=r.replace("/public-logos/",""):r.startsWith("/storage/v1/object/public/public-logos/")&&(e=r.replace("/storage/v1/object/public/public-logos/","")),e){const t=oi.storage.from("public-logos").getPublicUrl(e);if(null==(s=null==t?void 0:t.data)?void 0:s.publicUrl)return t.data.publicUrl}}}catch{}return t&&"string"==typeof t?t:sv(e)}function av({ticker:e,src:t,alt:s,className:n,style:r,...a}){const i=String(e||"").toUpperCase(),[o,l]=tt.useState(()=>rv(i,t)),[c,d]=tt.useState(!1);return tt.useEffect(()=>{c||l(rv(i,t))},[i,t,c]),tt.useEffect(()=>{let e=!1;return(async()=>{try{const t=await tv(i);if(!t||c||e||t===o)return;const s=new Image;s.onload=()=>{e||c||l(t)},s.onerror=()=>{},s.src=t}catch{}})(),()=>{e=!0}},[i,c]),X.jsx("img",{src:o,alt:s||`${i} logo`,loading:"lazy",decoding:"async",className:n,style:r,onError:()=>{d(!0),l("/placeholder-logo.png")},...a})}function iv(e){return String(e).padStart(2,"0")}function ov(e){const[t,s]=e.split(":").map(e=>parseInt(e,10));return{h:isNaN(t)?0:t,m:isNaN(s)?0:s}}function lv(){var e,t,s,n,r,a;const i=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Berlin",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(new Date),o=Number((null==(e=i.find(e=>"year"===e.type))?void 0:e.value)||"1970"),l=Number((null==(t=i.find(e=>"month"===e.type))?void 0:t.value)||"01"),c=Number((null==(s=i.find(e=>"day"===e.type))?void 0:s.value)||"01"),d=Number((null==(n=i.find(e=>"hour"===e.type))?void 0:n.value)||"00"),u=Number((null==(r=i.find(e=>"minute"===e.type))?void 0:r.value)||"00"),m=Number((null==(a=i.find(e=>"second"===e.type))?void 0:a.value)||"00"),h=`${iv(o)}-${iv(l)}-${iv(c)}T${iv(d)}:${iv(u)}:${iv(m)}`;return new Date(h)}function cv(e,t){const s=lv(),n=new Date(s);return n.setHours(e,t,0,0),n}function dv(e,t){const s=e.getTime()-t.getTime();return Math.max(0,Math.floor(s/1e3))}function uv(e){const{openWindow:t=["09:10","09:25"],openCutoff:s="08:55",closeWindow:n=["17:40","17:55"],closeCutoff:r="17:25"}={},[a,i]=Je.useState(lv());Je.useEffect(()=>{const e=window.setInterval(()=>i(lv()),1e3);return()=>window.clearInterval(e)},[]);const o=Je.useMemo(()=>{const e=`${iv(a.getHours())}:${iv(a.getMinutes())}`,[i,o]=t,[l,c]=n,d=(e,t,s)=>e>=t&&e<=s,u=d(e,i,o),m=d(e,l,c),{h:h,m:p}=ov(i),{h:f,m:g}=ov(o),{h:x,m:v}=ov(l),{h:y,m:b}=ov(c),{h:w,m:j}=ov(s),{h:N,m:k}=ov(r),S=cv(h,p),_=cv(f,g),E=cv(x,v),T=cv(y,b),D=cv(w,j),A=cv(N,k);if(u){return{phase:"open-live",seconds:dv(_,a),label:"Open auction live",cancelUntil:s,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}if(e<i){return{phase:"pre-open",seconds:dv(S,a),label:"Open auction in",cancelUntil:s,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}if(e>o&&e<l){return{phase:"pre-close",seconds:dv(E,a),label:"Close auction in",cancelUntil:r,nextSlot:"close",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}if(m){return{phase:"close-live",seconds:dv(T,a),label:"Close auction live",cancelUntil:r,nextSlot:"close",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}const M=cv(h,p);M.setDate(M.getDate()+1);return{phase:"overnight",seconds:dv(M,a),label:"Next open auction in",cancelUntil:s,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}},[a,t,n,s,r]),l=Je.useMemo(()=>{const e=Math.max(0,o.seconds),t=Math.floor(e/3600),s=Math.floor(e%3600/60),n=e%60;return`${iv(t)}:${iv(s)}:${iv(n)}`},[o.seconds]);return{...o,hhmmss:l}}function mv(){return"https://fsqds-production.yadavkartik-arbeit.workers.dev"}const hv=Object.freeze(Object.defineProperty({__proto__:null,getWorkerBase:mv},Symbol.toStringTag,{value:"Module"})),pv="https://fsqds-production.yadavkartik-arbeit.workers.dev",fv={htiPlaceOrder:`${pv}/api/hti/place-order`,htiSaveScore:`${pv}/api/hti/save-score`,htiLeaderboard:`${pv}/api/leaderboards/hti`,adxPlaceOrder:`${pv}/api/adx/place-order`,adxSavePrediction:`${pv}/api/adx/save-prediction`,adxLeaderboard:`${pv}/api/leaderboards/adx`,adxStagedOrders:`${pv}/api/adx/staged-orders`,marketOptions:e=>`${pv}/api/market/options/catalog?symbol=${encodeURIComponent(e)}&liquid=true&maxExpiries=6`,adminOptionsRefresh:`${pv}/api/market/options/refresh`,health:`${pv}/health`,healthMetrics:`${pv}/health/metrics`,adminRunParityCheck:`${pv}/api/admin/run-parity-check`,adminRunLoadSlo:`${pv}/api/admin/run-load-slo`,mmEventCreate:`${pv}/api/mm/event/create`,mmEventRegisterTeam:`${pv}/api/mm/event/register-team`,mmEventScoreboard:`${pv}/api/mm/event/scoreboard`,mmEventFreeze:`${pv}/api/mm/event/freeze`,mmEventRunAuction:`${pv}/api/mm/event/run-auction`,mmEventCleanup:`${pv}/api/mm/event/cleanup`,adminOpsSetOverride:`${pv}/api/admin/ops/set-override`,adminOpsListOverrides:`${pv}/api/admin/ops/list-overrides`,adminOpsClearOverrides:`${pv}/api/admin/ops/clear-overrides`,adminNewsShock:`${pv}/api/admin/news-shock`};function gv(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return""}}function xv(){var e,t,s,n;const{label:r,hhmmss:a,phase:i,windows:o,cutoffs:l}=uv(),[c,d]=Je.useState(null);Je.useRef(null),Je.useRef(null);const u=Je.useMemo(()=>`${(null==o?void 0:o.openStart)?o.openStart.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"09:10"}${(null==o?void 0:o.openEnd)?o.openEnd.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"09:25"}`,[o]),m=Je.useMemo(()=>`${(null==o?void 0:o.closeStart)?o.closeStart.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"17:40"}${(null==o?void 0:o.closeEnd)?o.closeEnd.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"17:55"}`,[o]),h=Je.useMemo(()=>{var e;return(null==(e=null==l?void 0:l.openCut)?void 0:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"08:55"},[l]),p=Je.useMemo(()=>{var e;return(null==(e=null==l?void 0:l.closeCut)?void 0:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"17:25"},[l]);Je.useEffect(()=>{let e=!1;return(async()=>{try{const t=fv.healthMetrics,s=await fetch(t,{cache:"no-store",headers:{Accept:"application/json"}});!e&&s.ok&&d(await s.json())}catch{}})(),()=>{e=!0}},[]);const f=i.includes("live")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800";return X.jsx(Cx,{className:"border shadow-sm",children:X.jsxs(Ix,{className:"py-2 px-3 text-xs flex flex-wrap items-center gap-3",children:[X.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded ${f}`,"aria-live":"polite",children:[r,": ",X.jsx("span",{className:"font-mono",children:a})]}),X.jsxs("span",{className:"text-muted-foreground",children:["Open ",u," (cutoff ",h,")"]}),X.jsxs("span",{className:"text-muted-foreground",children:["Close ",m," (cutoff ",p,")"]}),(null==(e=null==c?void 0:c.eurex_calendar)?void 0:e.windows_used)&&X.jsxs("span",{className:"text-muted-foreground",title:"Eurex-derived windows",children:["Eurex: O ",c.eurex_calendar.windows_used.open_run," / C ",c.eurex_calendar.windows_used.close_run]}),X.jsx("span",{className:"ml-auto"}),X.jsxs("span",{title:"Spread policy version",children:["Policy: ",(null==c?void 0:c.quotes_policy_version)?`model ${c.quotes_policy_version}`:""]}),X.jsxs("span",{title:"Last leaderboard rebuild",children:["LB: ",gv(null==(t=null==c?void 0:c.orchestrator)?void 0:t.last_leaderboard_rebuild)]}),X.jsxs("span",{title:"Last open auction",children:["Open: ",gv(null==(s=null==c?void 0:c.orchestrator)?void 0:s.last_auction_open)]}),X.jsxs("span",{title:"Last close auction",children:["Close: ",gv(null==(n=null==c?void 0:c.orchestrator)?void 0:n.last_auction_close)]})]})})}const vv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function yv(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return""}}function bv(){var e,t,s,n,r;const[a,i]=Je.useState(null),[o,l]=Je.useState(!0),[c,d]=Je.useState(null),[u,m]=Je.useState(null),h=Number((null==vv?void 0:vv.VITE_SLO_P95_MS)||1500);return X.jsxs(Cx,{className:"border shadow-sm",children:[X.jsx(Ox,{className:"py-2",children:X.jsx(Px,{className:"text-xs",children:"System Status"})}),X.jsx(Ix,{className:"text-xs grid grid-cols-2 gap-x-4 gap-y-1",children:a?c?X.jsx("div",{className:"col-span-2 text-red-600",children:c}):X.jsxs(X.Fragment,{children:[X.jsx("div",{children:"Spot (last):"}),X.jsx("div",{className:"text-right",children:yv((null==(e=null==a?void 0:a.stock_prices)?void 0:e.last_updated)??null)}),X.jsx("div",{children:"Marks (last):"}),X.jsx("div",{className:"text-right",children:yv((null==(t=null==a?void 0:a.options_model_marks)?void 0:t.last_calc_ts)??null)}),X.jsx("div",{children:"Quotes (last):"}),X.jsx("div",{className:"text-right",children:yv((null==(s=null==a?void 0:a.options_quotes)?void 0:s.last_computed_at)??null)}),X.jsx("div",{children:"LB Cache (v2/v1):"}),X.jsxs("div",{className:"text-right",children:[(null==(n=null==a?void 0:a.leaderboard_cache)?void 0:n.v2_present)?"Y":"N"," / ",(null==(r=null==a?void 0:a.leaderboard_cache)?void 0:r.v1_present)?"Y":"N"]}),X.jsx("div",{children:"Spread policy:"}),X.jsx("div",{className:"text-right",children:(null==a?void 0:a.quotes_policy_version)?`model ${a.quotes_policy_version}`:""}),X.jsx("div",{children:"SLO p95:"}),X.jsx("div",{className:"text-right "+(null==u?"":u<=h?"text-green-700":"text-red-700"),children:null==u?"":`${Math.round(u)}ms (<=${h}ms)`}),X.jsx("div",{children:"Ops Parity:"}),X.jsx("div",{className:"text-right",children:(()=>{var e;const t=null==(e=null==a?void 0:a.ops)?void 0:e.parity;if(!t)return"";const s=Number(t.warns??0),n=s>0?"text-yellow-700":"text-green-700";return X.jsxs("span",{className:n,children:[yv(t.ts),"  warns ",s]})})()}),X.jsx("div",{children:"Ops SLO:"}),X.jsx("div",{className:"text-right",children:(()=>{var e;const t=null==(e=null==a?void 0:a.ops)?void 0:e.slo;if(!t)return"";const s=!t.failed;return X.jsxs("span",{className:s?"text-green-700":"text-red-700",children:[yv(t.ts),"  ",s?"PASS":"FAIL"]})})()})]}):X.jsx("div",{className:"col-span-2",children:X.jsx("button",{onClick:async function(){try{d(null);const e=[fv.healthMetrics,"https://fsqds-production.yadavkartik-arbeit.workers.dev/health/metrics"];let t=null;for(const s of e)try{const e=await fetch(s,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){t=await e.json();break}}catch{}if(!t)throw new Error("No health metrics available");i(t)}catch(vj){d((null==vj?void 0:vj.message)||"Failed")}finally{l(!1)}},className:"text-xs px-2 py-1 border rounded",children:"Load status"})})})]})}function wv(){const[e,t]=tt.useState(!1),s=function(){const[e,t]=Je.useState(null);return Je.useEffect(()=>{let e=!0;async function s(){try{const s=await fetch(fv.healthMetrics);if(!s.ok)return;const n=await s.json();if(!e)return;const r=(null==n?void 0:n.quotes_policy_version)||null;t(r)}catch{}}s();const n=window.setInterval(s,3e5);return()=>{e=!1,window.clearInterval(n)}},[]),e}(),n=s?`Spread policy: model ${s}`:"Spread policy: loading";return X.jsxs("div",{className:"text-[11px] text-muted-foreground flex items-center gap-2",children:[X.jsx(px,{variant:"outline",className:"px-1.5 py-0.5 text-[10px]",children:n}),X.jsx("button",{className:"underline decoration-dotted",onClick:()=>t(!e),"aria-expanded":e,"aria-label":"Pricing policy",disabled:!s,children:"What is this?"}),e&&s&&X.jsxs("div",{className:"mt-1 p-2 border rounded bg-card shadow-sm max-w-[480px]",children:[X.jsx("div",{className:"mb-1 font-medium",children:"Pricing policy"}),X.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[X.jsx("li",{children:"Quotes are synthetic: BlackScholes mid  spread; spread depends on moneyness, tenor, and volatility."}),X.jsx("li",{children:"Dividend yield (q) is applied; prices are bounded by no-arbitrage limits and tick-rounded."}),X.jsx("li",{children:"Auction execution uses the model mid plus half-spread and size-based slippage tiers."})]}),X.jsx("div",{className:"mt-2 text-[10px] text-muted-foreground",children:"Educational only  Not investment advice"})]})]})}var jv={},Nv=rt&&rt.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),kv=rt&&rt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Sv=rt&&rt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&Nv(t,e,s);return kv(t,e),t};Object.defineProperty(jv,"__esModule",{value:!0}),jv.useTurnstile=void 0;const _v=Sv(Je),Ev="undefined"!=typeof globalThis?globalThis:window;let Tv,Dv,Av=void 0!==Ev.turnstile?"ready":"unloaded";const Mv=new Promise((e,t)=>{Dv={resolve:e,reject:t},"ready"===Av&&e(void 0)});{const e="cf__reactTurnstileOnLoad",t="https://challenges.cloudflare.com/turnstile/v0/api.js";Tv=()=>{if("unloaded"===Av){Av="loading",Ev[e]=()=>{Dv.resolve(),Av="ready",delete Ev[e]};const s=`${t}?onload=${e}&render=explicit`,n=document.createElement("script");n.src=s,n.async=!0,n.addEventListener("error",()=>{Dv.reject("Failed to load Turnstile."),delete Ev[e]}),document.head.appendChild(n)}return Mv}}var Cv=jv.default=function({id:e,className:t,style:s,sitekey:n,action:r,cData:a,theme:i,language:o,tabIndex:l,responseField:c,responseFieldName:d,size:u,fixedSize:m,retry:h,retryInterval:p,refreshExpired:f,appearance:g,execution:x,userRef:v,onVerify:y,onSuccess:b,onLoad:w,onError:j,onExpire:N,onTimeout:k,onAfterInteractive:S,onBeforeInteractive:_,onUnsupported:E}){const T=(0,_v.useRef)(null),D=(0,_v.useState)({onVerify:y,onSuccess:b,onLoad:w,onError:j,onExpire:N,onTimeout:k,onAfterInteractive:S,onBeforeInteractive:_,onUnsupported:E})[0],A=null!=v?v:T,M=m?{width:"compact"===u?"130px":"flexible"===u?"100%":"300px",height:"compact"===u?"120px":"65px",...s}:s;return(0,_v.useEffect)(()=>{if(!A.current)return;let e=!1,t="";return(async()=>{var s,m;if("ready"!==Av)try{await Tv()}catch(vj){return void(null===(s=D.onError)||void 0===s||s.call(D,vj))}if(e||!A.current)return;let v;const y={sitekey:n,action:r,cData:a,theme:i,language:o,tabindex:l,"response-field":c,"response-field-name":d,size:u,retry:h,"retry-interval":p,"refresh-expired":f,appearance:g,execution:x,callback:(e,t)=>{var s,n;null===(s=D.onVerify)||void 0===s||s.call(D,e,v),null===(n=D.onSuccess)||void 0===n||n.call(D,e,t,v)},"error-callback":e=>{var t;return null===(t=D.onError)||void 0===t?void 0:t.call(D,e,v)},"expired-callback":e=>{var t;return null===(t=D.onExpire)||void 0===t?void 0:t.call(D,e,v)},"timeout-callback":()=>{var e;return null===(e=D.onTimeout)||void 0===e?void 0:e.call(D,v)},"after-interactive-callback":()=>{var e;return null===(e=D.onAfterInteractive)||void 0===e?void 0:e.call(D,v)},"before-interactive-callback":()=>{var e;return null===(e=D.onBeforeInteractive)||void 0===e?void 0:e.call(D,v)},"unsupported-callback":()=>{var e;return null===(e=D.onUnsupported)||void 0===e?void 0:e.call(D,v)}};t=window.turnstile.render(A.current,y),v=function(e){return{execute:t=>window.turnstile.execute(e,t),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}(t),null===(m=D.onLoad)||void 0===m||m.call(D,t,v)})(),()=>{e=!0,t&&window.turnstile.remove(t)}},[n,r,a,i,o,l,c,d,u,h,p,f,g,x]),(0,_v.useEffect)(()=>{D.onVerify=y,D.onSuccess=b,D.onLoad=w,D.onError=j,D.onExpire=N,D.onTimeout=k,D.onAfterInteractive=S,D.onBeforeInteractive=_,D.onUnsupported=E},[y,b,w,j,N,k,S,_,E]),_v.default.createElement("div",{ref:A,id:e,className:t,style:M})};jv.useTurnstile=function(){const[e,t]=(0,_v.useState)(Av);return(0,_v.useEffect)(()=>{"ready"!==Av&&Mv.then(()=>t(Av))},[]),Ev.turnstile};const Ov={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},Pv=[{symbol:"SAP",name:"SAP SE",adr:"SAP"},{symbol:"SIE",name:"Siemens AG",adr:"SIEGY"},{symbol:"ALV",name:"Allianz SE",adr:"AZSEY"},{symbol:"BAS",name:"BASF SE",adr:"BASFY"},{symbol:"BAYN",name:"Bayer AG",adr:"BAYRY"},{symbol:"BMW",name:"BMW AG",adr:"BMWYY"},{symbol:"VOW3",name:"Volkswagen AG",adr:"VWAGY"},{symbol:"DTE",name:"Deutsche Telekom AG",adr:"DTEGY"},{symbol:"MBG",name:"Mercedes-Benz Group AG",adr:"MBGAF"},{symbol:"MUV2",name:"Munich RE",adr:"MURGY"}];const Iv=new class{constructor(){this.STARTING_BALANCE=1e5,this.MAX_TRADES_PER_DAY=100,this.SLIPPAGE_PERCENT=.5,this.snapshotCache=null,this.SNAPSHOT_STALE_MS=15e3}invalidateSnapshotCache(){this.snapshotCache=null}getWorkerBase(){try{const{getWorkerBase:e}=require("@/lib/env");return e()}catch{return"https://fsqds-production.yadavkartik-arbeit.workers.dev"}}async refreshUnderlyingAndMarks(e){try{const t=this.getWorkerBase();try{await fetch(`${t}/api/market/stock-prices?tickers=${encodeURIComponent(e)}&refresh=1`,{method:"GET"})}catch{}try{await fetch(`${t}/api/market/options/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tickers:[e]})})}catch{}}catch{}}async fetchPortfolioSnapshot(){var e,t,s,n,r,a,i;const o=null==(e=(await oi.auth.getSession()).data.session)?void 0:e.access_token;if(!o)return null;const l=Date.now();if(this.snapshotCache&&l-this.snapshotCache.ts<=this.SNAPSHOT_STALE_MS){const e=this.snapshotCache.data||{};return{portfolio:e.portfolio??null,positions:e.positions??[],tradesToday:e.tradesToday??0,realized:e.realized??{},aggregates:e.aggregates}}const c=this.getWorkerBase(),d={Authorization:`Bearer ${o}`,Accept:"application/json"};(null==(t=this.snapshotCache)?void 0:t.etag)&&(d["If-None-Match"]=this.snapshotCache.etag);const u=await fetch(`${c}/api/adx/portfolio-snapshot`,{method:"GET",headers:d});if(!u.ok){if(this.snapshotCache){const e=this.snapshotCache.data||{};return{portfolio:e.portfolio??null,positions:e.positions??[],tradesToday:e.tradesToday??0,realized:e.realized??{}}}return null}const m=await u.json().catch(()=>null);if(!m)return null;const h=u.headers.get("X-ETag")||u.headers.get("ETag")||void 0,p={portfolio:(null==m?void 0:m.portfolio)||(null==(s=null==m?void 0:m.data)?void 0:s.portfolio)||null,positions:Array.isArray(null==m?void 0:m.positions)?m.positions:Array.isArray(null==(n=null==m?void 0:m.data)?void 0:n.positions)?m.data.positions:[],tradesToday:Number((null==m?void 0:m.tradesToday)||(null==(r=null==m?void 0:m.data)?void 0:r.tradesToday)||0),realized:(null==m?void 0:m.realized)||(null==(a=null==m?void 0:m.data)?void 0:a.realized)||{},aggregates:(null==m?void 0:m.aggregates)||(null==(i=null==m?void 0:m.data)?void 0:i.aggregates)||void 0};return this.snapshotCache={ts:l,etag:h,data:p},p}async getUserPortfolio(){const{data:{user:e}}=await oi.auth.getUser();if(!e)return null;try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.portfolio)??null}catch(vj){}const{data:t}=await oi.from("seasons").select("id").eq("status","active").single();if(!t)return null;let{data:s}=await oi.from("adx_portfolios").select("*").eq("user_id",e.id).eq("season_id",t.id).maybeSingle();return s}async getUserPositions(e){try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.positions)??[]}catch(vj){return[]}}async getSnapshotAggregates(){try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.aggregates)||null}catch{return null}}async getTradingMetrics(){const{data:e}=await oi.functions.invoke("adx_metrics",{method:"POST",body:{}});if((null==e?void 0:e.ok)&&e.data)return e.data;try{const{data:e}=await oi.functions.invoke("adx_portfolio_snapshot",{method:"POST",body:{}});if(e&&e.portfolio){const t=e.portfolio,s=e.tradesToday||0,n=t.cash??t.starting_cash,r=t.equity??t.current_value??t.starting_cash,a=(Array.isArray(e.positions)?e.positions:[]).reduce((e,t)=>e+(t.avg_price??0)*(t.qty??0)*100,0),i=n,o=Math.max(0,i-a);return{accountBalance:n,dayTradingPower:i,tradesUsedToday:s,maxTradesPerDay:100,portfolioValue:r,todaysPnL:0,totalPnL:r-t.starting_cash,marginUsed:a,marginAvailable:o,maxDrawdownPct:Number(t.max_drawdown_pct||0),sharpe:Number(t.sharpe||0)}}}catch{}return null}async getPnLHistory(e,t=30){const s=new Date,n=new Date;n.setDate(n.getDate()-t);const{data:r,error:a}=await oi.from("adx_equity_daily").select("as_of_date, equity").eq("portfolio_id",e).gte("as_of_date",n.toISOString().split("T")[0]).lte("as_of_date",s.toISOString().split("T")[0]).order("as_of_date",{ascending:!0});if(!a&&r&&r.length>0){let e=null;return r.map(t=>{const s=Number(t.equity)||0,n=null!==e?s-e:0;return e=s,{date:t.as_of_date,pnl:n,cumulative:s}})}const{data:i}=await oi.from("adx_pnl_daily").select("as_of, ret, equity").eq("portfolio_id",e).gte("as_of",n.toISOString().split("T")[0]).lte("as_of",s.toISOString().split("T")[0]).order("as_of",{ascending:!0});return(i||[]).map(e=>({date:e.as_of,pnl:e.ret||0,cumulative:e.equity||0}))}async getTradeHistory(e,t=30){const s=new Date,n=new Date;n.setDate(n.getDate()-t);let r=[],a=null;try{const t=await oi.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("filled_at",n.toISOString()).lte("filled_at",s.toISOString());r=t.data||[],a=t.error}catch(vj){a=vj}let i=[];if(a){i=(await oi.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("ts",n.toISOString()).lte("ts",s.toISOString())).data||[]}else{i=(await oi.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("ts",n.toISOString()).lte("ts",s.toISOString())).data||[]}const o=new Map;[...r,...i].forEach(e=>{o.has(e.id)||o.set(e.id,e)});const l=Array.from(o.values()).reduce((e,t)=>{const s=t.filled_at||t.ts;if(!s)return e;const n=new Date(s).toISOString().split("T")[0];return e[n]=(e[n]||0)+1,e},{}),c=[],d=new Date(n);for(;d<=s;){const e=d.toISOString().split("T")[0];c.push({date:e,trades:l[e]||0}),d.setDate(d.getDate()+1)}return c}async getCompaniesWithOptions(){try{const{data:e}=await oi.from("seasons").select("id, tickers").eq("status","active").single();if(!e||!e.tickers)return[];const{data:t}=await oi.from("stock_prices").select("*").in("ticker",e.tickers),s={},n=(new Date).toISOString().slice(0,10);for(const r of e.tickers){const{data:e}=await oi.from("v_options_display").select("option_symbol,ticker,type,strike,expiry,display_bid,display_ask,display_last").eq("ticker",r).gte("expiry",n).order("expiry",{ascending:!0}).order("strike",{ascending:!0});s[r]=e||[]}return(t||[]).map(e=>{const t=(s[e.ticker]||[]).slice(0,10).map(e=>({id:e.option_symbol,type:"put"===String(e.type).toLowerCase()?"put":"call",strike:Number(e.strike)||0,maturity:e.expiry,bidPrice:Number(e.display_bid)||0,askPrice:Number(e.display_ask)||0,volume:0,openInterest:0,exerciseStyle:"European"})),n=Pv.find(t=>t.adr===e.ticker);return{id:e.ticker,symbol:e.ticker,name:(null==n?void 0:n.name)||e.ticker,currentPrice:e.price,change:e.change,changePercent:e.change_percent,logoUrl:sv(e.ticker),options:t}})}catch(e){return[]}}async placeOrder(e,t){var s,n,r,a,i,o,l,c,d;try{this.invalidateSnapshotCache();const u=await this.getUserPortfolio();if(!u)return{success:!1,error:"No portfolio found"};const m="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),h=(null==(s=null==crypto?void 0:crypto.randomUUID)?void 0:s.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(Ov&&!0){const s=this.getWorkerBase(),l=await oi.auth.getSession(),c=null==(r=null==(n=null==l?void 0:l.data)?void 0:n.session)?void 0:r.access_token,d=await fetch(`${s}/api/adx/place-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:c?`Bearer ${c}`:"","x-correlation-id":h,...(null==t?void 0:t.turnstileToken)?{"CF-Turnstile-Response":t.turnstileToken,"X-Turnstile-Token":t.turnstileToken}:{}},body:JSON.stringify({portfolioId:u.id,optionSymbol:e.optionSymbol,side:e.action.toUpperCase(),qty:e.quantity,turnstileToken:m?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),p=await d.json().catch(()=>({}));if(!d.ok||!(null==p?void 0:p.ok)){return{success:!1,error:`${(null==p?void 0:p.error)||"Order failed"} (ref: ${h})`}}const f=(null==p?void 0:p.data)||p;return{success:!0,order:null==f?void 0:f.order,auctionSlot:null==(a=null==f?void 0:f.order)?void 0:a.auctionSlot,previewPrice:null==(i=null==f?void 0:f.order)?void 0:i.previewPrice,estimatedFees:null==(o=null==f?void 0:f.order)?void 0:o.estimatedFees}}const{data:p,error:f}=await oi.functions.invoke("adx_place_order",{method:"POST",headers:{"x-correlation-id":h},body:{portfolioId:u.id,optionSymbol:e.optionSymbol,side:e.action.toUpperCase(),qty:e.quantity,turnstileToken:m?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(f||!(null==p?void 0:p.ok)){return{success:!1,error:`${(null==p?void 0:p.error)||(null==f?void 0:f.message)||"Order failed"} (ref: ${h})`}}const g=null==p?void 0:p.data;return{success:!0,order:null==g?void 0:g.order,auctionSlot:null==(l=null==g?void 0:g.order)?void 0:l.auctionSlot,previewPrice:null==(c=null==g?void 0:g.order)?void 0:c.previewPrice,estimatedFees:null==(d=null==g?void 0:g.order)?void 0:d.estimatedFees}}catch(u){return{success:!1,error:"Failed to place order"}}}async getStagedOrders(e){var t,s,n;try{const r=this.getWorkerBase(),a=(null==(t=null==crypto?void 0:crypto.randomUUID)?void 0:t.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,i=await oi.auth.getSession(),o=null==(n=null==(s=null==i?void 0:i.data)?void 0:s.session)?void 0:n.access_token,l=`${r}/api/adx/staged-orders?portfolio_id=${encodeURIComponent(e)}`,c=await fetch(l,{method:"GET",headers:{Accept:"application/json",...o?{Authorization:`Bearer ${o}`}:{},"x-correlation-id":a}}),d=await c.json().catch(()=>({ok:!1}));return c.ok&&(null==d?void 0:d.ok)&&(null==d?void 0:d.data)||[]}catch(vj){return[]}}async cancelOrder(e,t){var s,n,r;try{const a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),i=(null==(s=null==crypto?void 0:crypto.randomUUID)?void 0:s.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(!0){const s=this.getWorkerBase(),o=await oi.auth.getSession(),l=null==(r=null==(n=null==o?void 0:o.data)?void 0:n.session)?void 0:r.access_token,c=await fetch(`${s}/api/adx/cancel-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:l?`Bearer ${l}`:"","x-correlation-id":i,...(null==t?void 0:t.turnstileToken)?{"CF-Turnstile-Response":t.turnstileToken,"X-Turnstile-Token":t.turnstileToken}:{}},body:JSON.stringify({orderId:e,turnstileToken:a?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),d=await c.json().catch(()=>({}));if(!c.ok||!(null==d?void 0:d.ok)){const e=String((null==d?void 0:d.error)||"").toUpperCase();let t="Cancel failed";switch(e){case"TURNSTILE_MISSING":t="Security verification required. Please refresh and try again.";break;case"TURNSTILE_FAIL":case"TURNSTILE_ERROR":t="Security verification failed. Please retry or refresh.";break;case"CUTOFF_PASSED":case"NOT_CANCELLABLE":t="Cutoff passed  this order can no longer be cancelled.";break;case"FORBIDDEN":t="You are not authorized to cancel this order.";break;case"ORDER_NOT_FOUND":t="Order not found  it may have been executed or already cancelled.";break;case"UNAUTHORIZED":t="Please sign in again to cancel orders.";break;case"INVALID_REQUEST":t="Invalid request. Please retry.";break;case"UPDATE_FAILED":t="Server failed to cancel order. Please retry.";break;default:t=(null==d?void 0:d.message)||"Cancel failed"}return{success:!1,error:`${t} (ref: ${i})`}}return{success:!0}}const{data:o,error:l}=await oi.functions.invoke("adx_cancel_order",{method:"POST",headers:{"x-correlation-id":i},body:{orderId:e,turnstileToken:a?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(l||!(null==o?void 0:o.ok)){return{success:!1,error:`${(null==o?void 0:o.error)||(null==l?void 0:l.message)||"Cancel failed"} (ref: ${i})`}}return{success:!0}}catch(vj){return{success:!1,error:"Cancel failed"}}}async exerciseOption(e,t){var s,n,r;try{const a=await this.getUserPortfolio();if(!a)return{success:!1,error:"No portfolio found"};const i="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o=(null==(s=null==crypto?void 0:crypto.randomUUID)?void 0:s.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(!0){const s=this.getWorkerBase(),l=await oi.auth.getSession(),c=null==(r=null==(n=null==l?void 0:l.data)?void 0:n.session)?void 0:r.access_token,d=await fetch(`${s}/api/adx/exercise`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:c?`Bearer ${c}`:"","x-correlation-id":o,...(null==t?void 0:t.turnstileToken)?{"CF-Turnstile-Response":t.turnstileToken,"X-Turnstile-Token":t.turnstileToken}:{}},body:JSON.stringify({portfolioId:a.id,optionSymbol:e.optionSymbol,qty:e.qty,turnstileToken:i?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),u=await d.json().catch(()=>({}));if(!d.ok||!(null==u?void 0:u.ok)){return{success:!1,error:`${(null==u?void 0:u.error)||"Exercise failed"} (ref: ${o})`}}return{success:!0,data:null==u?void 0:u.data}}const{data:l,error:c}=await oi.functions.invoke("adx_exercise",{method:"POST",headers:{"x-correlation-id":o},body:{portfolioId:a.id,optionSymbol:e.optionSymbol,qty:e.qty,turnstileToken:i?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(c||!(null==l?void 0:l.ok)){return{success:!1,error:`${(null==l?void 0:l.error)||(null==c?void 0:c.message)||"Exercise failed"} (ref: ${o})`}}return{success:!0,data:null==l?void 0:l.data}}catch(a){return{success:!1,error:"Failed to exercise option"}}}async getPortfolioComposition(e){const t=await this.getUserPositions(e),s=Array.from(new Set((t||[]).map(e=>String(e.option_symbol)).filter(Boolean))),n=s.length>0?await this.getOptionsMetadataBySymbols(s):{},r=(t||[]).filter(e=>"call"===String(e.type).toLowerCase()).reduce((e,t)=>{var s;const r=String(t.option_symbol||""),a=(null==(s=null==n?void 0:n[r])?void 0:s.contract_size)??0,i="number"==typeof a&&a>0?Math.round(a):100;return e+(Number(t.current_price??t.avg_price??0)||0)*Number(t.qty||0)*i},0),a=(t||[]).filter(e=>"put"===String(e.type).toLowerCase()).reduce((e,t)=>{var s;const r=String(t.option_symbol||""),a=(null==(s=null==n?void 0:n[r])?void 0:s.contract_size)??0,i="number"==typeof a&&a>0?Math.round(a):100;return e+(Number(t.current_price??t.avg_price??0)||0)*Number(t.qty||0)*i},0),i=r+a;return i>0?{calls:r/i*100,puts:a/i*100}:{calls:0,puts:0}}async getOptionsMetadataBySymbols(e){const t=Array.from(new Set((e||[]).filter(Boolean)));if(0===t.length)return{};const{data:s,error:n}=await oi.from("options_market_data").select("option_symbol, ticker, type, strike, expiry, contract_size, currency, exchange").in("option_symbol",t);if(n||!s)return{};const r={};for(const a of s)r[a.option_symbol]=a;return r}},Rv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function Lv(){const{user:e}=fi(),[t,s]=Je.useState([]),[n,r]=Je.useState(!0),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState(!1),[u,m]=Je.useState(!1),[h,p]=Je.useState({}),[f,g]=Je.useState({}),[x,v]=Je.useState(""),[y,b]=Je.useState(""),w=Je.useRef(null);Je.useEffect(()=>{try{const e=new URL(window.location.href),t=e.searchParams.get("sym"),s=e.searchParams.get("exp"),n=e.searchParams.get("atm"),r=e.searchParams.get("ex");t&&v(t.toUpperCase()),s&&p(e=>({...e,[(t||x||"").toUpperCase()]:Math.min(Math.max(parseInt(s,10)||G,1),12)})),n&&g(e=>({...e,[(t||x||"").toUpperCase()]:Math.min(Math.max(parseFloat(n)||K,.01),.5)})),r&&(w.current=r)}catch{}},[]),Je.useEffect(()=>{try{const e=new URL(window.location.href);x&&e.searchParams.set("sym",x);const t=h[x],s=f[x];"number"==typeof t?e.searchParams.set("exp",String(t)):e.searchParams.delete("exp"),"number"==typeof s?e.searchParams.set("atm",String(s)):e.searchParams.delete("atm"),y?e.searchParams.set("ex",String(y)):e.searchParams.delete("ex");const n=`${e.pathname}${e.search}${e.hash}`;n!==`${window.location.pathname}${window.location.search}${window.location.hash}`&&window.history.replaceState({},"",n)}catch{}},[x,h,f,y]),Je.useEffect(()=>{E(null),b("")},[x]);const[j,N]=Je.useState("all"),[k,S]=Je.useState("all"),[_,E]=Je.useState(null),[T,D]=Je.useState(!1),[A,M]=Je.useState(null),[C,O]=Je.useState(1),[P,I]=Je.useState(0),[R,L]=Je.useState(!1),[F,z]=Je.useState(0),B=Je.useRef(null),U=Je.useRef(null),q=Je.useRef(null),W=Je.useRef(!1),[$,Y]=Je.useState(null),V=Je.useRef(null),H=uv(),G=3,K=.05,[Q,Z]=Je.useState(null);Je.useEffect(()=>{if(!Q)return;const e=window.setTimeout(()=>Z(null),1800);return()=>window.clearTimeout(e)},[Q]);const[J,ee]=Je.useState(!1),[te,se]=Je.useState(0);async function ne(e=!1){if(J)return;const t=Date.now();if(!e&&t-te<45e3)Z({msg:`Please wait ${Math.ceil((45e3-(t-te))/1e3)}s before refreshing again`,at:t});else if(x){ee(!0);try{const{getWorkerBase:e}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>hv);return{getWorkerBase:e}},void 0),t=e();try{const e=await fetch(`${t}/api/market/stock-prices?season=active&tickers=${encodeURIComponent(x)}&refresh=1&delta=1`);if(e.ok){const t=await e.json().catch(()=>({ok:!1})),n=Array.isArray(null==t?void 0:t.data)?t.data.find(e=>String(e.ticker)===x):null;n&&s(e=>e.map(e=>e.symbol===x?{...e,currentPrice:Number(n.price)||0,change:Number(n.change)||0,changePercent:Number(n.change_percent)||0}:e))}}catch{}try{await fetch(`${t}/api/market/options/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tickers:[x]})})}catch{}try{await fetch(`${t}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(x)}&liquid=${a?"true":"false"}&refresh=1`)}catch{}await oe(),se(Date.now())}finally{ee(!1),l(new Date)}}}async function re(){var e,t;if("undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname))return"dev-bypass-token";for(let s=0;s<50&&!(R&&B.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.execute));s++)await new Promise(e=>setTimeout(e,100));if(R&&B.current&&(null==(t=null==window?void 0:window.turnstile)?void 0:t.execute)){if(W.current){for(let e=0;e<25&&(W.current||!q.current);e++)await new Promise(e=>setTimeout(e,100));if(q.current&&Date.now()-q.current.at<5e3)return q.current.token}return W.current=!0,await new Promise(e=>{var t;let s=!1;const n=window.setTimeout(()=>{s=!0,U.current=null,W.current=!1,e("")},7e3);U.current=t=>{s||(window.clearTimeout(n),q.current={token:t,at:Date.now()},W.current=!1,e(t))};try{(null==(t=null==window?void 0:window.turnstile)?void 0:t.reset)&&B.current&&window.turnstile.reset(B.current),window.turnstile.execute(B.current)}catch(r){window.clearTimeout(n),W.current=!1,z(e=>e+1),e("")}})}}const[ae,ie]=Je.useState(new Map),oe=Je.useMemo(()=>async()=>{var e;try{r(e=>e||0===t.length);let n=null;try{const{data:e}=await oi.from("seasons").select("id").eq("status","active").maybeSingle();n=(null==e?void 0:e.id)??null}catch{}let i=null;if(n){i=(await oi.from("adx_tickers").select("*").eq("season_id",n).eq("is_active",!0).order("band",{ascending:!0}).order("symbol",{ascending:!0})).data||[]}if(!i||0===i.length){i=(await oi.from("adx_tickers").select("*").eq("is_active",!0).order("band",{ascending:!0}).order("symbol",{ascending:!0})).data||[]}const o=["SAP","ALV","DTE","BAS","BAYN","BMW","SIE","DBK","MUV2","VOW3"];i&&0!==i.length||(i=o.map(e=>({symbol:e,name:e,band:"top"})));const c=i.map(e=>e.symbol),{getWorkerBase:u}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>hv);return{getWorkerBase:e}},void 0),m=u();let p=[];try{const e=Date.now(),t=e-te<5e3?`&refresh=1&delta=1&t=${e.toString(36)}`:"",s=await fetch(`${m}/api/market/stock-prices?season=active${t}`);if(s.ok){const e=await s.json().catch(()=>({ok:!1}));p=(null==e?void 0:e.data)||[]}}catch{}if((!p||0===p.length)&&Array.isArray(c)&&c.length>0){const{data:e}=await oi.from("stock_prices").select("ticker, price, change, change_percent, last_updated").in("ticker",c);p=e||[]}const g=new Map((p||[]).filter(e=>c.includes(e.ticker)).map(e=>[e.ticker,{price:Number(e.price)||0,change:Number(e.change)||0,change_percent:Number(e.change_percent)||0,last_updated:e.last_updated}]));let y=0;g.forEach(e=>{const t=e.last_updated?Date.parse(e.last_updated):0;t>y&&(y=t)});const b=Date.now();d(0===y||b-y>12e5);const w=new Map,j=x||i&&(null==(e=i[0])?void 0:e.symbol)||"";if(j){let e=`${m}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(j)}&liquid=${a?"true":"false"}`;const t=h[j],s=f[j];"number"!=typeof t&&"number"!=typeof s||(e+="&override=1","number"==typeof t&&(e+=`&maxExpiries=${t}`),"number"==typeof s&&(e+=`&atmPct=${s}`));const n=await fetch(e);if(!n.ok&&("number"==typeof h[j]||"number"==typeof f[j])){const t=Date.now().toString(36),s=e+(e.includes("?")?`&t=${t}`:`?t=${t}`);try{await fetch(s)}catch{}}if(n.ok){const e=await n.json().catch(()=>({ok:!1})),t=(null==e?void 0:e.data)||[];w.set(j,t)}}const N=i.map(e=>{const t=g.get(e.symbol),s=w.get(e.symbol)||[],n=(a?s.filter(e=>(Number(e.display_bid)||0)>0||(Number(e.display_ask)||0)>0):s).map(e=>({id:e.option_symbol,type:"put"===String(e.type).toLowerCase()?"put":"call",strike:Number(e.strike)||0,maturity:e.expiry,bidPrice:Number(e.display_bid)||0,askPrice:Number(e.display_ask)||0,lastPrice:Number(e.display_last)||0,volume:0,openInterest:0,impliedVol:null,delta:null,gamma:null,theta:null}));return{id:e.id,symbol:e.symbol,name:e.name,currentPrice:(null==t?void 0:t.price)??0,change:(null==t?void 0:t.change)??0,changePercent:(null==t?void 0:t.change_percent)??0,logoUrl:sv(e.symbol),options:n}});s(N),!x&&N.length>0&&v(N[0].symbol),l(new Date)}catch(vj){s([]),d(!0),l(new Date)}finally{r(!1)}},[a,x,t.length,h,f]);Je.useEffect(()=>{oe()},[oe,h,f]),Je.useEffect(()=>{let e=!0;return(async()=>{var t,s;try{const{data:n}=await oi.auth.getSession(),r=null==(s=null==(t=null==n?void 0:n.session)?void 0:t.user)?void 0:s.id;if(!r)return void(e&&m(!1));const{data:a}=await oi.from("user_profiles").select("is_admin").eq("user_id",r).single();e&&m(!!(null==a?void 0:a.is_admin))}catch{e&&m(!1)}})(),()=>{e=!1}},[]),Je.useEffect(()=>{const e=async(e,t)=>{Y({kind:e,at:t}),await oe(),V.current&&window.clearTimeout(V.current),V.current=window.setTimeout(()=>Y(null),8e3)},t=t=>{var s;return e("open",(null==(s=null==t?void 0:t.detail)?void 0:s.at)||(new Date).toISOString())},s=t=>{var s;return e("close",(null==(s=null==t?void 0:t.detail)?void 0:s.at)||(new Date).toISOString())};return window.addEventListener("auction-run:open",t),window.addEventListener("auction-run:close",s),()=>{V.current&&window.clearTimeout(V.current),window.removeEventListener("auction-run:open",t),window.removeEventListener("auction-run:close",s)}},[oe]),Je.useEffect(()=>{},[oe]);const le=Je.useMemo(()=>t.find(e=>e.symbol===x)||null,[t,x]),ce=Je.useRef({});Je.useEffect(()=>{try{const e=x;if(!e||!le)return;(Number(le.currentPrice||0)<=0||c)&&!ce.current[e]&&(ce.current[e]=!0,ne(!1).catch(()=>{}))}catch{}},[null==le?void 0:le.currentPrice,x,c]);const de=Je.useMemo(()=>{if(!le)return[];const e=Array.from(new Set(le.options.map(e=>e.maturity))).sort();return w.current&&e.includes(w.current)&&y!==w.current?(b(w.current),w.current=null):!y&&e.length>0&&b(e[0]),e},[le,y]);const ue=Je.useMemo(()=>{if(!le)return[];let e=le.options;if("all"!==j){const t="calls"===j?"call":"put";e=e.filter(e=>e.type===t)}return y&&(e=e.filter(e=>e.maturity===y)),"all"!==k&&(le.currentPrice||0)>0&&(e=e.filter(e=>{return t=e.strike,s=le.currentPrice,(Math.abs(t-s)/(s||1)<.02?"ATM":t>s?"OTM":"ITM")===k;var t,s})),e},[le,j,y,k]);Je.useEffect(()=>{ie(new Map)},[le,x,y,k,j,ue]);const[me,he]=Je.useState(0);Je.useEffect(()=>{(async()=>{try{if(!e||!_)return I(0),void he(0);const t=await Iv.getUserPortfolio();if(!t)return I(0),void he(0);const[s,n]=await Promise.all([Iv.getUserPositions(t.id),Iv.getStagedOrders(t.id)]),r=(s||[]).find(e=>e.option_symbol===_.id);I(r?Number(r.qty||0):0);const a=(n||[]).filter(e=>String(e.option_symbol)===_.id&&"PENDING"===String(e.status).toUpperCase()&&"SELL"===String(e.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0);he(a)}catch{I(0),he(0)}})()},[e,null==_?void 0:_.id]);const pe=Je.useMemo(()=>{const e=new Map;for(const t of ue){const s=e.get(t.strike)||{};s[t.type]=t,e.set(t.strike,s)}return Array.from(e.entries()).map(([e,t])=>({strike:e,call:t.call,put:t.put})).sort((e,t)=>e.strike-t.strike)},[ue]),fe=Je.useMemo(()=>{if(!le||0===pe.length)return null;const e=Number(le.currentPrice||0),t=e>0?e:pe[Math.floor(pe.length/2)].strike,s=function(e){if(!e||e.length<2)return 0;let t=1/0;for(let s=1;s<e.length;s++){const n=Math.abs(Number(e[s].strike)-Number(e[s-1].strike));n>0&&n<t&&(t=n)}return Number.isFinite(t)&&t!==1/0?t:0}(pe),n=s>0?Math.round(t/s)*s:t;let r=pe[0].strike,a=Math.abs(pe[0].strike-n);for(const i of pe){const e=Math.abs(i.strike-n);e<a&&(a=e,r=i.strike)}return r},[le,pe]),[ge,xe]=Je.useState(!1),[ve,ye]=Je.useState({qty:1,contractSize:100,loading:!1});return n?X.jsx("div",{className:"flex items-center justify-center p-12 text-muted-foreground",children:"Loading options data"}):X.jsxs("div",{className:"space-y-6",children:[X.jsx(xv,{}),$&&X.jsxs("div",{className:"text-xs bg-green-50 text-green-800 border border-green-200 rounded px-3 py-2",role:"status","aria-live":"polite",children:[$.kind.toUpperCase()," auction executed at ",new Date($.at).toLocaleTimeString(),"  refreshing"]}),X.jsx("div",{className:"sr-only",children:X.jsx(Cv,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"invisible",onLoad:e=>{B.current=e,L(!0)},onVerify:e=>{q.current={token:String(e),at:Date.now()},W.current=!1,U.current&&(U.current(String(e)),U.current=null)},onExpire:()=>{W.current=!1},onError:()=>{W.current=!1,L(!1),z(e=>e+1)}},`matrix-invisible-${F}`)}),X.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-4 bg-muted/30 rounded-lg",children:[Q?X.jsx("div",{className:"fixed top-3 right-3 z-50 bg-popover text-popover-foreground border rounded px-3 py-2 shadow",children:X.jsx("span",{className:"text-xs",children:Q.msg})}):null,X.jsxs("div",{className:"flex flex-col gap-1",children:[X.jsx(wv,{}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Underlying"}),X.jsxs(Fx,{value:x,onValueChange:v,children:[X.jsx(Bx,{className:"h-8 w-60",children:X.jsx(zx,{placeholder:"Select"})}),X.jsx(Ux,{children:t.map(e=>X.jsx(qx,{value:e.symbol,children:X.jsxs("span",{className:"inline-block max-w-[12rem] truncate align-bottom",children:[e.symbol,"  ",e.name]})},e.symbol))})]})]}),X.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Prices are not live. Please use Refresh before trading to ensure current pricing."})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Type"}),X.jsx(Lx,{size:"sm",variant:"all"===j?"default":"outline",className:"h-8",onClick:()=>N("all"),children:"All"}),X.jsx(Lx,{size:"sm",variant:"calls"===j?"default":"outline",className:"h-8 text-green-600 border-green-600",onClick:()=>N("calls"),children:"Calls"}),X.jsx(Lx,{size:"sm",variant:"puts"===j?"default":"outline",className:"h-8 text-red-600 border-red-600",onClick:()=>N("puts"),children:"Puts"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Moneyness"}),X.jsx(Lx,{size:"sm",variant:"all"===k?"default":"outline",className:"h-8",onClick:()=>S("all"),children:"All"}),X.jsx(Lx,{size:"sm",variant:"ITM"===k?"default":"outline",className:"h-8",onClick:()=>S("ITM"),children:"ITM"}),X.jsx(Lx,{size:"sm",variant:"ATM"===k?"default":"outline",className:"h-8",onClick:()=>S("ATM"),children:"ATM"}),X.jsx(Lx,{size:"sm",variant:"OTM"===k?"default":"outline",className:"h-8",onClick:()=>S("OTM"),children:"OTM"})]}),X.jsxs("label",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5",checked:a,onChange:e=>i(e.target.checked)}),"Hide illiquid (no quotes)"]})]}),le?X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[X.jsxs(Cx,{className:"lg:col-span-2",children:[X.jsxs(Ox,{className:"pb-3",children:[X.jsxs(Px,{className:"text-lg flex items-center justify-between",children:[X.jsxs("span",{children:[le.symbol," Options"]}),X.jsxs("span",{className:"flex items-center gap-2 text-sm font-normal text-muted-foreground",children:["Contracts: ",le.options.length,X.jsx(Lx,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>ne(),disabled:J,title:"Refresh underlying and options now",children:J?"Refreshing":"Refresh Prices"})]})]}),X.jsxs("div",{className:"mt-2",children:[X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expiration",(()=>{const e=x,t="number"==typeof h[e]?Math.min(Math.max(h[e],1),12):Math.max(2,de.length),s=Math.max(0,12-t);return X.jsxs("span",{className:"ml-2 text-[11px] text-muted-foreground/80",children:["Expiries: ",t,"/12 (left: ",s,")"]})})(),(()=>{const e=x,t="number"==typeof f[e]?f[e]:.03;return X.jsxs("span",{className:"ml-3 text-[11px] text-muted-foreground/80",children:["ATM: ",Math.round(100*t),"% (max 10%)"]})})()]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(Lx,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>(async()=>{const e=x;if(!e)return;const t=h[e]??G,s=Math.min(t+3,12);p(t=>({...t,[e]:s}));const n=f[e];let r="";if("number"!=typeof n||n<.1){const t=.1;g(s=>({...s,[e]:t})),r=`  ATM widened to ${Math.round(100*t)}%`}Z({msg:`Expiries expanded to ${s}${r}`,at:Date.now()});try{await oe()}catch{}})(),title:(()=>{const e=x,t="number"==typeof h[e]?h[e]:Math.max(2,de.length);return`Adds +3 up to 12${"number"!=typeof f[e]||f[e]<.1?"  auto-widens ATM to 10% if needed":""} (now: ${t}/12)`})(),children:"+ Expiries"}),X.jsx(Lx,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>(async()=>{const e=x;if(!e)return;const t=f[e]??K,s=Math.min(t+.05,.1);g(t=>({...t,[e]:s})),Z({msg:`ATM range widened to ${Math.round(100*s)}%`,at:Date.now()});try{await oe()}catch{}})(),title:(()=>{const e=x,t="number"==typeof f[e]?f[e]:.03;return`Widens by +5% up to 10% (now: ${Math.round(100*t)}%)`})(),children:"+ ATM Range"}),X.jsx(Lx,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",onClick:async()=>{const e=x;if(e){p(t=>{const s={...t};return delete s[e],s}),g(t=>{const s={...t};return delete s[e],s}),Z({msg:"Window reset",at:Date.now()});try{await oe()}catch{}try{const e=new URL(window.location.href);e.searchParams.delete("exp"),e.searchParams.delete("atm"),window.history.replaceState({},"",`${e.pathname}${e.search}${e.hash}`)}catch{}}},title:"Reset window",children:"Reset"})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:de.slice(0,12).map(e=>X.jsx("button",{onClick:()=>b(e),className:"px-2 py-1 rounded-full border text-xs "+(y===e?"bg-primary text-primary-foreground border-primary":"bg-card hover:bg-accent border-muted"),title:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),children:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},e))})]})]}),X.jsx(Ix,{children:X.jsx("div",{className:"border rounded-lg overflow-hidden",children:X.jsx("div",{className:"overflow-x-auto max-h-[70vh] overflow-y-auto",children:X.jsxs("table",{className:"w-full table-fixed",children:[X.jsx("thead",{className:"bg-muted sticky top-0 z-10",children:X.jsxs("tr",{children:[X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-green-50 w-[10%]",children:"CALLS"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Bid"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Ask"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Last"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-primary text-primary-foreground w-[12%]",children:"Strike"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Bid"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Ask"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Last"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-red-50 w-[10%]",children:"PUTS"})]})}),X.jsx("tbody",{children:pe.map(e=>{var t,s;const n=null!=fe&&e.strike===fe;return X.jsxs("tr",{className:(n?"bg-yellow-50":"")+" border-b",children:[X.jsx("td",{className:"px-2 py-2 text-center bg-green-50",children:e.call?X.jsx(Lx,{size:"sm",variant:(null==_?void 0:_.id)===e.call.id?"default":"ghost",className:"text-xs h-6 px-1 w-full",onClick:()=>E(e.call),children:"Select"}):X.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?e.call.bidPrice>0?X.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["",Vx(e.call.bidPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?e.call.askPrice>0?X.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["",Vx(e.call.askPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?X.jsxs("span",{className:"font-medium text-sm",children:["",Vx(e.call.lastPrice>0?e.call.lastPrice:(null==(t=ae.get(e.call.id))?void 0:t.price)||0,2)]}):"-"}),X.jsxs("td",{className:"px-2 py-2 text-center font-mono font-bold text-lg bg-muted",children:[X.jsxs("div",{className:n?"text-yellow-600 font-extrabold text-xl":"",children:["",e.strike]}),n&&X.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"ATM"})]}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?e.put.bidPrice>0?X.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["",Vx(e.put.bidPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?e.put.askPrice>0?X.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["",Vx(e.put.askPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?X.jsxs("span",{className:"font-medium text-sm",children:["",Vx(e.put.lastPrice>0?e.put.lastPrice:(null==(s=ae.get(e.put.id))?void 0:s.price)||0,2)]}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center bg-red-50",children:e.put?X.jsx(Lx,{size:"sm",variant:(null==_?void 0:_.id)===e.put.id?"default":"ghost",className:"text-xs h-6 px-1 w-full",onClick:()=>E(e.put),children:"Select"}):X.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})})]},e.strike)})})]})})})})]}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs(Cx,{children:[X.jsx(Ox,{className:"pb-3",children:X.jsx(Px,{className:"text-sm",children:"Company Info"})}),X.jsxs(Ix,{className:"space-y-4",children:[X.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[X.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:X.jsx(av,{ticker:le.symbol,alt:`${le.name} logo`,className:"w-full h-full object-contain p-1 bg-white"})}),X.jsxs("div",{className:"text-center",children:[X.jsx("h3",{className:"font-mono text-lg font-bold",children:le.symbol}),X.jsx("p",{className:"text-xs text-muted-foreground",children:le.name})]})]}),X.jsxs("div",{className:"text-center",children:[X.jsxs("div",{className:"text-2xl font-bold",children:["",Vx(le.currentPrice,2)]}),X.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm "+(le.change>=0?"text-green-600":"text-red-600"),children:[le.change>=0?"+":"",Vx(le.change,2)," (",Kx(le.changePercent,2,!0),")"]})]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Contracts: ",le.options.length]})]})]}),X.jsxs(Cx,{children:[X.jsx(Ox,{className:"pb-3",children:X.jsx(Px,{className:"text-sm",children:"Option Details"})}),X.jsx(Ix,{className:"space-y-3",children:_?X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx(px,{variant:"call"===_.type?"default":"secondary",children:_.type.toUpperCase()}),X.jsx("span",{className:"text-sm text-muted-foreground",children:le.symbol})]}),X.jsxs("div",{className:"text-center",children:[X.jsxs("div",{className:"text-2xl font-bold",children:["",_.strike]}),X.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(_.maturity).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),X.jsx("div",{className:"text-[11px] text-muted-foreground mb-2",children:"Quotes are per unit (/unit). Each contract represents 100 units of the underlying."}),le&&(h[le.symbol]||f[le.symbol])?X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Window: ",h[le.symbol]?`${h[le.symbol]} expiries`:"",h[le.symbol]&&f[le.symbol]?"  ":"",f[le.symbol]?`${Math.round(100*(f[le.symbol]||0))}% ATM`:""]}):null,X.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Bid (per unit)"}),X.jsx("div",{className:"font-semibold text-green-600",children:_.bidPrice>0?`${Vx(_.bidPrice,2)}`:""})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Last"}),X.jsxs("div",{className:"font-semibold",children:["",Vx(_.lastPrice,2)]})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Ask (per unit)"}),X.jsx("div",{className:"font-semibold text-red-600",children:_.askPrice>0?`${Vx(_.askPrice,2)}`:""})]})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Qty"}),X.jsx("input",{type:"number",min:1,max:1e3,value:C,onChange:e=>O(parseInt(e.target.value)||1),className:"w-20 h-8 px-2 py-1 border rounded text-xs","aria-label":"Quantity"})]}),X.jsx(Lx,{className:"bg-green-600 hover:bg-green-700",onClick:()=>async function(){var e;if(!le||!_)return;const t=Math.max(1,Math.min(1e3,C||1));xe(!0),ye({qty:t,contractSize:100,loading:!0});try{const s="https://fsqds-production.yadavkartik-arbeit.workers.dev";let n=null;try{const e=await fetch(`${s}/api/market/stock-prices?tickers=${encodeURIComponent(le.symbol)}&refresh=1&delta=1`);if(e.ok){const t=await e.json().catch(()=>({})),s=Array.isArray(null==t?void 0:t.data)?t.data.find(e=>String(e.ticker)===le.symbol):null;s&&"number"==typeof s.price&&(n=Number(s.price))}}catch{}const r=100,a=_.askPrice>0?_.askPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0,i=a>0?a*t*r:0,o=Number((null==Rv?void 0:Rv.VITE_CONTRACT_FEE_EUR)??"0.25"),l=Number((null==Rv?void 0:Rv.VITE_FEES_BPS)??"2");ye({qty:t,pxPerUnit:a,contractSize:r,notional:i,fees:o*t+l/1e4*i,spot:n,loading:!1})}catch{ye(e=>({...e,loading:!1}))}}(),disabled:!e||T,children:(()=>{var e;const t=_.askPrice>0?_.askPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0,s=Math.max(1,Math.min(1e3,C||1));return t>0?`Buy ${Vx(t*s*100,2)}`:"Buy"})()}),X.jsx(Lx,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",onClick:()=>async function(t){var s,n,r;if(!e||!le||!_||T)return;const a=Math.max(1,Math.min(1e3,C||1));{const e=Math.max(0,P-me);if(a>e)return void M(`Cannot sell ${a}: available ${e} (staged ${me} of ${P})`)}D(!0),M("Refreshing prices");try{await ne(!0);let e=await re();if(e||(z(e=>e+1),e=await re()),("undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)&&!e)return void M("Verification failed  please try again");const i=await Iv.placeOrder({optionSymbol:_.id,ticker:le.symbol,type:_.type,strike:_.strike,expiry:_.maturity,quantity:a,action:t,orderType:"market"},{turnstileToken:e});if(i.success){const e=i.previewPrice?` (preview ${Vx(i.previewPrice,2)}`:"",t="number"==typeof i.estimatedFees?`${e?"  ":" ("}fees ${Vx(i.estimatedFees,2)})`:e?")":"";if(i.auctionSlot){const a="open"===i.auctionSlot?null==(s=H.cutoffs)?void 0:s.openCut:null==(n=H.cutoffs)?void 0:n.closeCut,o=a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",l=(null==(r=null==i?void 0:i.order)?void 0:r.note)?`  ${String(i.order.note)}`:"";M(`Order staged for ${i.auctionSlot.toUpperCase()}${e}${t}${l}  cancel until ${o} Berlin`)}else M("Order filled");window.dispatchEvent(new CustomEvent("portfolio-updated"))}else M(i.error||"Failed to place order")}catch(vj){M("Error placing order")}finally{D(!1),setTimeout(()=>M(null),4e3)}}("sell"),disabled:!e||T||C>Math.max(0,P-me),title:C>Math.max(0,P-me)?`Available ${Math.max(0,P-me)} (staged ${me} of ${P})`:"",children:(()=>{var e;const t=_.bidPrice>0?_.bidPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0,s=Math.max(1,Math.min(1e3,C||1));return t>0?`Sell ${Vx(t*s*100,2)}`:"Sell"})()})]}),(()=>{var e;const t=_?_.askPrice>0?_.askPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0:null;if(!t)return null;const s=t*Math.max(1,Math.min(1e3,C||1))*100;return X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Total Notional: ",Vx(s,2)]})})(),A&&X.jsx("div",{className:"text-xs text-muted-foreground",children:A}),X.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-muted-foreground",children:[X.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/81/EUREX_Logo_Blue_sRGB.png",alt:"Eurex",className:"h-4"}),X.jsx("span",{children:"Powered by Deutsche Boerse"})]})]}):X.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:"Select an option to view details"})})]})]})]}):X.jsx("div",{className:"text-center p-12 text-muted-foreground",children:"No companies available"}),ge?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Confirm Buy"}),ve.loading?X.jsx("div",{className:"text-xs text-muted-foreground",children:"Computing latest preview"}):X.jsxs("div",{className:"space-y-2 text-xs",children:[X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Cost (approx)"}),X.jsxs("div",{className:"font-semibold",children:["",Vx(Number((ve.notional||0)+(ve.fees||0)),2)]}),X.jsx("div",{className:"text-[11px] text-muted-foreground",title:`Per-unit ${Vx(Number(ve.pxPerUnit||0),2)}  Qty ${ve.qty}  Contract ${ve.contractSize} + Fees`,children:"Per-unit & fees included"})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Breakdown"}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:[X.jsxs("div",{children:["Unit premium: ",Vx(Number(ve.pxPerUnit||0),2)]}),X.jsxs("div",{children:["Qty: ",ve.qty]}),X.jsxs("div",{children:["Contract: ",ve.contractSize]}),X.jsxs("div",{children:["Notional: ",Vx(Number(ve.notional||0),2)]}),X.jsxs("div",{children:["Fees: ",Vx(Number(ve.fees||0),2)]})]})]})]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Spot ",null!=ve.spot?`${Vx(Number(ve.spot||0),2)}`:""]})]}),X.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[X.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{xe(!1)},children:"Cancel"}),X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-60",disabled:ve.loading,onClick:async()=>{xe(!1),await async function(){var t,s;if(!e||!le||!_||T)return;const n=ve.qty||Math.max(1,Math.min(1e3,C||1));D(!0),M("Placing");try{await ne(!0);let e=await re();e||(z(e=>e+1),e=await re());const r=await Iv.placeOrder({optionSymbol:_.id,ticker:le.symbol,type:_.type,strike:_.strike,expiry:_.maturity,quantity:n,action:"buy",orderType:"market"},{turnstileToken:e});if(r.success){const e=r.previewPrice?` (preview ${Vx(r.previewPrice,2)}`:"",n="number"==typeof r.estimatedFees?`${e?"  ":" ("}fees ${Vx(r.estimatedFees,2)})`:e?")":"";if(r.auctionSlot){const a="open"===r.auctionSlot?null==(t=H.cutoffs)?void 0:t.openCut:null==(s=H.cutoffs)?void 0:s.closeCut,i=a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";M(`Order staged for ${r.auctionSlot.toUpperCase()}${e}${n}  cancel until ${i} Berlin`)}else M("Order filled");window.dispatchEvent(new CustomEvent("portfolio-updated")),await oe()}else M(r.error||"Failed to place order")}catch(vj){M("Error placing order")}finally{D(!1),setTimeout(()=>M(null),4e3)}}()},children:"Confirm Buy"})]})]})}):null,u&&X.jsx("div",{className:"mt-6",children:X.jsx(bv,{})})]})}function Fv({className:e,type:t,...s}){return X.jsx("input",{type:t,"data-slot":"input",className:lx("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}const zv=Fa("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Bv=Je.forwardRef(({className:e,...t},s)=>X.jsx(Re,{ref:s,className:za(zv(),e),...t}));Bv.displayName=Re.displayName;const Uv=new class{constructor(){this.companiesCache=null,this.cacheTimestamp=0,this.CACHE_DURATION=3e5}async getCompanies(e=!1){if(!e&&this.companiesCache&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION)return this.companiesCache;try{const{data:e}=await oi.from("seasons").select("id").eq("status","active").single();if(!e)return nv.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}));const{data:t}=await oi.from("adx_tickers").select("*").eq("season_id",e.id).eq("is_active",!0);if(t&&t.length>0){const{data:e}=await oi.from("stock_prices").select("*").in("ticker",t.map(e=>e.symbol));this.companiesCache=t.map(t=>{const s=null==e?void 0:e.find(e=>e.ticker===t.symbol),n=nv.find(e=>e.ticker===t.symbol);return{id:t.id,ticker:t.symbol,name:t.name||(null==n?void 0:n.name)||t.symbol,sector:(null==n?void 0:n.sector)||"Unknown",logo:(null==t?void 0:t.logo_url)||sv(t.symbol),adr:(null==n?void 0:n.adr)||t.symbol,price:null==s?void 0:s.price,change:null==s?void 0:s.change,changePercent:null==s?void 0:s.change_percent}})}else this.companiesCache=nv.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}));return this.cacheTimestamp=Date.now(),this.companiesCache}catch(t){return nv.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}))}}async getRevenuePredictions(){try{const{data:{user:e}}=await oi.auth.getUser();if(!e)return[];const t=await this.getCompanies(),{data:s}=await oi.from("seasons").select("id, name").eq("status","active").single();if(!s)return[];const{data:n}=await oi.from("adx_revenue_predictions").select("*").eq("season_id",s.id).eq("user_id",e.id),{data:r}=await oi.from("adx_revenue_actuals").select("symbol, actual_value").eq("season_id",s.id),a=new Map;return(r||[]).forEach(e=>a.set(String(e.symbol).toUpperCase(),e.actual_value)),t.map(e=>{var t;const r=null==n?void 0:n.find(t=>t.symbol===e.ticker),i=(new Date).toISOString().slice(0,10),o=(null==(t=null==r?void 0:r.updated_at)?void 0:t.slice(0,10))===i&&r.updates_today||0,l="number"==typeof(null==r?void 0:r.value)?Number(null==r?void 0:r.value):void 0,c=a.get(e.ticker),d="number"==typeof l&&"number"==typeof c?Math.pow(l-c,2):void 0;return{ticker:e.ticker,companyName:e.name,logo:e.logo,quarter:s.name||"Current Season",prediction:l,actualRevenue:c,mse:d,updatesLeft:Math.max(0,5-o)}})}catch(e){return[]}}async submitPrediction(e,t,s){var n;try{const{data:{user:r}}=await oi.auth.getUser();if(!r)return{success:!1,error:"Authentication required"};const{data:a}=await oi.from("seasons").select("id").eq("status","active").single();if(!a)return{success:!1,error:"No active season"};const i=!0,o="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),l=(null==s?void 0:s.turnstileToken)||(o?"dev-bypass-token":void 0);if(i&&!l)return{success:!1,error:"Verification required"};const c=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/adx_save_prediction",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(n=(await oi.auth.getSession()).data.session)?void 0:n.access_token}`},body:JSON.stringify({seasonId:a.id,symbol:e,value:t,turnstileToken:l||(i?void 0:"dev-bypass-token")})}),d=await c.json();return d.ok?{success:!0}:{success:!1,error:d.error||"Failed to save prediction"}}catch(r){return{success:!1,error:"An unexpected error occurred"}}}async getOptionsForTrading(){try{const e=await this.getCompanies(),t=new Map,s=((new Date).toISOString().slice(0,10),"https://fsqds-production.yadavkartik-arbeit.workers.dev");for(const r of e)try{const e=await fetch(`${s}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(r.ticker)}&liquid=true&maxExpiries=6`,{headers:{Accept:"application/json"}});if(!e.ok){t.set(r.ticker,[]);continue}const n=await e.json(),a=Array.isArray(null==n?void 0:n.data)?n.data:[];t.set(r.ticker,a||[])}catch{t.set(r.ticker,[])}const n=[];for(const r of e){const e=t.get(r.ticker)||[];for(const t of e){const e=Number(t.display_bid)||0,s=Number(t.display_ask)||0,a=Number(t.display_last)||0,i=e>0&&s>0?(e+s)/2:a;n.push({id:t.option_symbol,ticker:t.ticker,companyName:r.name,logo:r.logo||sv(t.ticker),type:"put"===String(t.type).toLowerCase()?"put":"call",strike:Number(t.strike)||0,expiry:t.expiry,bid:e,ask:s,mid:i,volume:0,openInterest:0})}}return n}catch(e){return[]}}async getCompanyByTicker(e){return(await this.getCompanies()).find(t=>t.ticker===e)||null}clearCache(){this.companiesCache=null,this.cacheTimestamp=0}};function qv({company:e,existingPrediction:t,onSubmit:s}){var n,r;const[a,i]=Je.useState(!t),[o,l]=Je.useState((null==(n=null==t?void 0:t.predictedRevenue)?void 0:n.toString())||""),[c,d]=Je.useState(!1);return X.jsxs(Cx,{className:"overflow-hidden",children:[X.jsx(Ox,{className:"pb-4",children:X.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[X.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-white flex-shrink-0 p-0.5",children:X.jsx(av,{ticker:e.symbol,src:e.logoUrl,alt:`${e.name} logo`,className:"w-full h-full object-contain"})}),X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsx(Px,{className:"font-mono text-lg mb-1",children:e.symbol}),X.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.name})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[t&&X.jsx(px,{variant:"submitted"===t.status?"default":"secondary",className:"text-xs",children:"submitted"===t.status?"Submitted":"Verified"}),c&&X.jsx(px,{variant:"default",className:"text-xs bg-green-600 text-white",children:"Saved!"})]})]})}),X.jsx(Ix,{className:"space-y-4",children:a?X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:`prediction-${e.id}`,className:"text-sm",children:"Your Prediction (Billions $)"}),X.jsx(Fv,{id:`prediction-${e.id}`,type:"number",step:"0.01",placeholder:"e.g., 125.50",value:o,onChange:e=>l(e.target.value),className:"mt-1"})]}),X.jsxs("div",{className:"flex gap-2",children:[X.jsxs(Lx,{size:"sm",onClick:async()=>{if(o&&parseFloat(o)>0){await s(e.id,parseFloat(o))&&(i(!1),d(!0),setTimeout(()=>d(!1),2500))}},className:"flex-1",children:[X.jsx(Qs,{className:"w-3 h-3 mr-1"}),"Submit"]}),t&&X.jsx(Lx,{size:"sm",variant:"outline",onClick:()=>{var e;l((null==(e=null==t?void 0:t.predictedRevenue)?void 0:e.toString())||""),i(!1)},children:X.jsx(mn,{className:"w-3 h-3"})})]})]}):X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{className:"p-3 rounded-lg bg-muted/20 border",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Prediction"}),X.jsxs("div",{className:"font-semibold text-lg",children:["$",null==t?void 0:t.predictedRevenue,"B"]})]}),X.jsxs(Lx,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[X.jsx(en,{className:"w-3 h-3 mr-1"}),"Edit"]})]}),(null==t?void 0:t.actualRevenue)&&X.jsx("div",{className:"mt-2 pt-2 border-t",children:X.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("span",{className:"text-muted-foreground",children:"Actual: "}),X.jsxs("span",{className:"font-semibold",children:["$",t.actualRevenue,"B"]})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-muted-foreground",children:"MSE: "}),X.jsx("span",{className:"font-semibold",children:null==(r=t.mse)?void 0:r.toFixed(2)})]})]})})]}),t&&X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Submitted on ",new Date(t.submittedAt).toLocaleDateString()]})]})})]})}function Wv({userStats:e}){return X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsxs(Px,{className:"flex items-center gap-2",children:[X.jsx(sn,{className:"w-5 h-5"}),"Your Performance"]})}),X.jsxs(Ix,{children:[X.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[X.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/20",children:[X.jsx("div",{className:"text-2xl font-bold mb-1",children:e.totalPredictions}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"Predictions Made"})]}),X.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/20",children:[X.jsx("div",{className:"text-2xl font-bold mb-1",children:e.avgMSE>0?e.avgMSE.toFixed(2):""}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg MSE"})]})]}),X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Rank"}),X.jsx(px,{variant:"default",className:"text-xs",children:e.currentRank>0?`#${e.currentRank}`:""})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Rank"}),X.jsx(px,{variant:"outline",className:"text-xs",children:e.bestRank>0?`#${e.bestRank}`:""})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Verified"}),X.jsxs("span",{className:"text-sm font-semibold",children:[e.verifiedPredictions,"/",e.totalPredictions]})]})]})]})]})}function $v(){const{user:e}=fi(),[t,s]=Je.useState([]),[n,r]=Je.useState([]),[a,i]=Je.useState([]),[o,l]=Je.useState([]),[c,d]=Je.useState(""),[u,m]=Je.useState(null),[h,p]=Je.useState(null),[f,g]=Je.useState(null),[x,v]=Je.useState(null),[y,b]=Je.useState({totalPredictions:0,verifiedPredictions:0,avgMSE:0,currentRank:0,bestRank:0}),[w,j]=Je.useState(!0),[N,k]=Je.useState(null),[S,_]=Je.useState(0);Je.useEffect(()=>{(async()=>{if(e){j(!0);try{const[e,t]=await Promise.all([Uv.getCompanies(),Uv.getRevenuePredictions()]);s(e),r(t);const{data:n}=await oi.from("seasons").select("id, name, starts_at, ends_at, status").eq("status","active").single();if(n){m(n.id),d(n.name||"Current Season"),p(n.starts_at||null),g(n.ends_at||null),v(n.status||null);const e=(new Date).toISOString(),s=t.filter(e=>null!=e.prediction).map(t=>({id:`${t.ticker}-${e}`,companyId:t.ticker,quarter:n.name||"Current Season",submittedAt:e,predictedRevenue:t.prediction,actualRevenue:t.actualRevenue,mse:t.mse,status:null!=t.actualRevenue?"verified":"submitted"}));i(s);const r=s.length,a=s.filter(e=>"verified"===e.status),o=a.length>0?a.reduce((e,t)=>e+(t.mse||0),0)/a.length:0,c=[{quarter:n.name||"Current Season",mse:o||0,rank:0}];l(c),b({totalPredictions:r,verifiedPredictions:a.length,avgMSE:o,currentRank:0,bestRank:0})}}catch(vj){}finally{j(!1)}}})()},[e]),Je.useEffect(()=>{if(!e||!u)return;let t=null;const s=async()=>{try{const e=await Uv.getRevenuePredictions();r(e);const t=(new Date).toISOString(),s=e.filter(e=>"number"==typeof e.prediction).map(e=>({id:`${e.ticker}-${t}`,companyId:e.ticker,quarter:c||"Current Season",submittedAt:t,predictedRevenue:e.prediction,actualRevenue:e.actualRevenue,mse:e.mse,status:null!=e.actualRevenue?"verified":"submitted"}));i(s);const n=s.filter(e=>"verified"===e.status),a=n.length>0?n.reduce((e,t)=>e+(t.mse||0),0)/n.length:0;b(e=>({...e,totalPredictions:s.length,verifiedPredictions:n.length,avgMSE:a})),l([{quarter:c||"Current Season",mse:a||0,rank:0}])}catch(vj){}},n=()=>{t&&window.clearTimeout(t),t=window.setTimeout(s,500)},a=oi.channel(`predictions-${u}-${e.id}`).on("postgres_changes",{event:"*",schema:"public",table:"adx_revenue_actuals",filter:`season_id=eq.${u}`},()=>n()).on("postgres_changes",{event:"*",schema:"public",table:"adx_revenue_predictions",filter:`season_id=eq.${u},user_id=eq.${e.id}`},()=>n()).subscribe();return()=>{t&&window.clearTimeout(t);try{oi.removeChannel(a)}catch{}}},[null==e?void 0:e.id,u,c]);const E=async(e,s)=>{if(!N)return Ja.error("Please complete verification"),!1;const n=t.find(t=>t.id===e||t.ticker===e);if(!n)return!1;const a=await Uv.submitPrediction(n.ticker,s,{turnstileToken:N||void 0});if(k(null),_(e=>e+1),a.success){Ja.success(`Prediction saved for ${n.ticker}  $${Vx(s,2)}B`);const e=await Uv.getRevenuePredictions();r(e);const t=(new Date).toISOString(),a=e.filter(e=>"number"==typeof e.prediction).map(e=>({id:`${e.ticker}-${t}`,companyId:e.ticker,quarter:c||"Current Season",submittedAt:t,predictedRevenue:e.prediction,actualRevenue:e.actualRevenue,mse:e.mse,status:null!=e.actualRevenue?"verified":"submitted"}));i(a);const o=a.filter(e=>"verified"===e.status),d=o.length>0?o.reduce((e,t)=>e+(t.mse||0),0)/o.length:0;b(e=>({...e,totalPredictions:a.length,verifiedPredictions:o.length,avgMSE:d})),l([{quarter:c||"Current Season",mse:d||0,rank:0}])}else Ja.error(a.error||"Failed to save prediction");return a.success},T=n;return X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Revenue Predictions"}),X.jsx("p",{className:"text-muted-foreground text-lg",children:"Submit your quarterly revenue predictions and compete for accuracy"})]}),X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{children:"Season"})}),X.jsx(Ix,{children:X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("div",{className:"text-base font-semibold",children:c||"Current Season"}),x&&X.jsx(px,{variant:"active"===x?"default":"secondary",className:"text-xs capitalize",children:x})]}),h||f?X.jsxs("div",{className:"text-xs text-muted-foreground",children:[h&&X.jsxs("span",{children:["Starts: ",new Date(h).toLocaleDateString()]}),h&&f&&X.jsx("span",{children:"  "}),f&&X.jsxs("span",{children:["Ends: ",new Date(f).toLocaleDateString()]})]}):null,h&&f?(()=>{const e=new Date,t=new Date(h),s=new Date(f),n=Math.max(0,s.getTime()-t.getTime()),r=Math.min(Math.max(0,e.getTime()-t.getTime()),n),a=Math.max(0,s.getTime()-e.getTime()),i=n>0?r/n*100:0,o=Math.ceil(a/864e5);return X.jsxs("div",{className:"space-y-2",children:[X.jsx(Mx,{value:i,className:"h-2"}),X.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[X.jsxs("span",{children:[Math.round(i),"% complete"]}),X.jsxs("span",{children:[o," days left"]})]})]})})():X.jsx("div",{className:"text-xs text-muted-foreground",children:"Season dates not available"})]})})]}),X.jsx(Wv,{userStats:y})]}),X.jsxs(cx,{defaultValue:"submit",className:"w-full",children:[X.jsxs(dx,{className:"grid w-full grid-cols-3 max-w-md",children:[X.jsx(ux,{value:"submit",children:"Submit"}),X.jsx(ux,{value:"history",children:"History"}),X.jsx(ux,{value:"analytics",children:"Analytics"})]}),X.jsx(mx,{value:"submit",className:"mt-6",children:X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Predictions"}),X.jsxs(px,{variant:"outline",className:"text-xs",children:[T.filter(e=>void 0!==e.prediction).length,"/",t.length," submitted"]})]}),X.jsx("div",{className:"flex justify-center",children:X.jsx(Cv,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>k(e),onExpire:()=>k(null)},S)}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{const t=T.find(t=>t.ticker===e.ticker),s=t&&void 0!==t.prediction,n={id:e.id,symbol:e.ticker,name:e.name,logoUrl:e.logo},r=s?{id:`${e.id}`,companyId:e.id,quarter:t.quarter,submittedAt:(new Date).toISOString(),predictedRevenue:t.prediction,status:null!=t.actualRevenue?"verified":"submitted",actualRevenue:t.actualRevenue,mse:t.mse}:void 0;return X.jsx(qv,{company:n,existingPrediction:r,onSubmit:E},e.id)})})]})}),X.jsx(mx,{value:"history",className:"mt-6",children:X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{children:"Prediction History"})}),X.jsx(Ix,{children:X.jsx("div",{className:"space-y-4",children:0===a.length?X.jsx("div",{className:"text-sm text-muted-foreground",children:"No prediction history yet."}):a.map(e=>{var s;const n=t.find(t=>t.ticker===e.companyId);return n?X.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-8 h-8 rounded overflow-hidden bg-white p-0.5",children:X.jsx(av,{ticker:n.ticker,src:n.logo,alt:n.name,className:"w-full h-full object-contain"})}),X.jsxs("div",{children:[X.jsxs("div",{className:"font-semibold",children:[n.ticker," - ",e.quarter]}),X.jsxs("div",{className:"text-sm text-muted-foreground",children:["Predicted: $",e.predictedRevenue,"B",e.actualRevenue&&X.jsxs("span",{children:[" | ","Actual: $",e.actualRevenue,"B"," | ","MSE: ",null==(s=e.mse)?void 0:s.toFixed(2)]})]})]})]}),X.jsxs("div",{className:"text-right",children:[X.jsx(px,{variant:"verified"===e.status?"default":"outline",className:"text-xs",children:e.status}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.submittedAt).toLocaleDateString()})]})]},e.id):null})})})]})}),X.jsx(mx,{value:"analytics",className:"mt-6",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{children:"MSE Trend"})}),X.jsx(Ix,{children:o.length>0?X.jsx(Yt,{width:"100%",height:200,children:X.jsxs(Vt,{data:o,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"quarter",tick:{fontSize:12}}),X.jsx(Kt,{tick:{fontSize:12}}),X.jsx(Qt,{formatter:e=>[e,"MSE"]}),X.jsx(Xt,{type:"monotone",dataKey:"mse",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444"}})]})}):X.jsx("div",{className:"flex items-center justify-center h-[200px] text-sm text-muted-foreground",children:"No historical data available"})})]}),X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{children:"Ranking Progress"})}),X.jsx(Ix,{children:o.length>0&&o.some(e=>e.rank>0)?X.jsx(Yt,{width:"100%",height:200,children:X.jsxs(Zt,{data:o,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"quarter",tick:{fontSize:12}}),X.jsx(Kt,{tick:{fontSize:12},reversed:!0}),X.jsx(Qt,{formatter:e=>[`#${e}`,"Rank"]}),X.jsx(Jt,{dataKey:"rank",fill:"#3b82f6"})]})}):X.jsx("div",{className:"flex items-center justify-center h-[200px] text-sm text-muted-foreground",children:"Rankings will appear after predictions are verified"})})]})]})})]})]})}var[Yv,Vv]=J("Tooltip",[Le]),Hv=Le(),Gv="TooltipProvider",Kv=700,Qv="tooltip.open",[Xv,Zv]=Yv(Gv),Jv=e=>{const{__scopeTooltip:t,delayDuration:s=Kv,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:a}=e,[i,o]=Je.useState(!0),l=Je.useRef(!1),c=Je.useRef(0);return Je.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),X.jsx(Xv,{scope:t,isOpenDelayed:i,delayDuration:s,onOpen:Je.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:Je.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:Je.useCallback(e=>{l.current=e},[]),disableHoverableContent:r,children:a})};Jv.displayName=Gv;var ey="Tooltip",[ty,sy]=Yv(ey),ny=e=>{const{__scopeTooltip:t,children:s,open:n,defaultOpen:r=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:o}=e,l=Zv(ey,e.__scopeTooltip),c=Hv(t),[d,u]=Je.useState(null),m=$e(),h=Je.useRef(0),p=i??l.disableHoverableContent,f=o??l.delayDuration,g=Je.useRef(!1),[x=!1,v]=re({prop:n,defaultProp:r,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(Qv))):l.onClose(),null==a||a(e)}}),y=Je.useMemo(()=>x?g.current?"delayed-open":"instant-open":"closed",[x]),b=Je.useCallback(()=>{window.clearTimeout(h.current),g.current=!1,v(!0)},[v]),w=Je.useCallback(()=>{window.clearTimeout(h.current),v(!1)},[v]),j=Je.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,v(!0)},f)},[f,v]);return Je.useEffect(()=>()=>window.clearTimeout(h.current),[]),X.jsx(Ye,{...c,children:X.jsx(ty,{scope:t,contentId:m,open:x,stateAttribute:y,trigger:d,onTriggerChange:u,onTriggerEnter:Je.useCallback(()=>{l.isOpenDelayed?j():b()},[l.isOpenDelayed,j,b]),onTriggerLeave:Je.useCallback(()=>{p?w():window.clearTimeout(h.current)},[w,p]),onOpen:b,onClose:w,disableHoverableContent:p,children:s})})};ny.displayName=ey;var ry="TooltipTrigger",ay=Je.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,r=sy(ry,s),a=Zv(ry,s),i=Hv(s),o=Je.useRef(null),l=ee(t,o,r.onTriggerChange),c=Je.useRef(!1),d=Je.useRef(!1),u=Je.useCallback(()=>c.current=!1,[]);return Je.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),X.jsx(Fe,{asChild:!0,...i,children:X.jsx(se.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:l,onPointerMove:oe(e.onPointerMove,e=>{"touch"!==e.pointerType&&(d.current||a.isPointerInTransitRef.current||(r.onTriggerEnter(),d.current=!0))}),onPointerLeave:oe(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:oe(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:oe(e.onFocus,()=>{c.current||r.onOpen()}),onBlur:oe(e.onBlur,r.onClose),onClick:oe(e.onClick,r.onClose)})})});ay.displayName=ry;var iy="TooltipPortal",[oy,ly]=Yv(iy,{forceMount:void 0}),cy=e=>{const{__scopeTooltip:t,forceMount:s,children:n,container:r}=e,a=sy(iy,t);return X.jsx(oy,{scope:t,forceMount:s,children:X.jsx(ae,{present:s||a.open,children:X.jsx(ce,{asChild:!0,container:r,children:n})})})};cy.displayName=iy;var dy="TooltipContent",uy=Je.forwardRef((e,t)=>{const s=ly(dy,e.__scopeTooltip),{forceMount:n=s.forceMount,side:r="top",...a}=e,i=sy(dy,e.__scopeTooltip);return X.jsx(ae,{present:n||i.open,children:i.disableHoverableContent?X.jsx(fy,{side:r,...a,ref:t}):X.jsx(my,{side:r,...a,ref:t})})}),my=Je.forwardRef((e,t)=>{const s=sy(dy,e.__scopeTooltip),n=Zv(dy,e.__scopeTooltip),r=Je.useRef(null),a=ee(t,r),[i,o]=Je.useState(null),{trigger:l,onClose:c}=s,d=r.current,{onPointerInTransitChange:u}=n,m=Je.useCallback(()=>{o(null),u(!1)},[u]),h=Je.useCallback((e,t)=>{const s=e.currentTarget,n={x:e.clientX,y:e.clientY},r=function(e,t,s=5){const n=[];switch(t){case"top":n.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":n.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":n.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":n.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s})}return n}(n,function(e,t){const s=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,n,r,a)){case a:return"left";case r:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,s.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(s.y-n.y)>=(e.y-n.y)*(s.x-n.x)))break;t.pop()}t.push(s)}t.pop();const s=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;s.length>=2;){const e=s[s.length-1],n=s[s.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;s.pop()}s.push(t)}return s.pop(),1===t.length&&1===s.length&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}(t)}([...r,...function(e){const{top:t,right:s,bottom:n,left:r}=e;return[{x:r,y:t},{x:s,y:t},{x:s,y:n},{x:r,y:n}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return Je.useEffect(()=>()=>m(),[m]),Je.useEffect(()=>{if(l&&d){const e=e=>h(e,d),t=e=>h(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,h,m]),Je.useEffect(()=>{if(i){const e=e=>{const t=e.target,s={x:e.clientX,y:e.clientY},n=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),r=!function(e,t){const{x:s,y:n}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,o=t[a].y,l=t[i].x,c=t[i].y;o>n!=c>n&&s<(l-e)*(n-o)/(c-o)+e&&(r=!r)}return r}(s,i);n?m():r&&(m(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,m]),X.jsx(fy,{...e,ref:a})}),[hy,py]=Yv(ey,{isInside:!1}),fy=Je.forwardRef((e,t)=>{const{__scopeTooltip:s,children:n,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=e,l=sy(dy,s),c=Hv(s),{onClose:d}=l;return Je.useEffect(()=>(document.addEventListener(Qv,d),()=>document.removeEventListener(Qv,d)),[d]),Je.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),X.jsx(ze,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:X.jsxs(Be,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[X.jsx(Ue,{children:n}),X.jsx(hy,{scope:s,isInside:!0,children:X.jsx(qe,{id:l.contentId,role:"tooltip",children:r||n})})]})})});uy.displayName=dy;var gy="TooltipArrow";Je.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,r=Hv(s);return py(gy,s).isInside?null:X.jsx(We,{...r,...n,ref:t})}).displayName=gy;var xy=cy,vy=uy;const yy=Jv,by=ny,wy=ay,jy=Je.forwardRef(({className:e,sideOffset:t=4,...s},n)=>X.jsx(xy,{children:X.jsx(vy,{ref:n,sideOffset:t,className:za("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));function Ny(e){const t=e.getUTCFullYear(),s=e.getUTCMonth(),n=e.getUTCDate();return new Date(Date.UTC(t,s,n))}function ky(e){if(!e)return 0;const t=new Date(e);if(Number.isNaN(t.getTime()))return 0;const s=function(e,t){const s=Ny(e).getTime(),n=Ny(t).getTime();return Math.round((s-n)/864e5)}(t,new Date);return Math.max(0,s)}jy.displayName=vy.displayName;const Sy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},_y=[],Ey=[];function Ty({positions:e,stagedOrders:t,onSell:s,onExercise:n,spotByTicker:r,busyByPosition:a,cancellingId:i}){const[o,l]=tt.useState({});function c({ticker:e}){const t=String(e||"");return X.jsx(av,{ticker:t,className:"w-5 h-5 rounded-sm object-contain"})}return X.jsx("div",{className:"max-h-96 overflow-y-auto pr-1 space-y-3",children:e.map(e=>{var i,d;const u=(m=e,Math.min(Math.max(1,o[m.id]??m.quantity),m.quantity));var m;const h=(null==a?void 0:a[e.id])||null;return X.jsx(Cx,{className:"overflow-hidden",children:X.jsxs(Ix,{className:"p-4",children:[X.jsxs("div",{className:"flex items-center justify-between mb-3",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx(c,{ticker:String(e.symbol||"")}),X.jsx(px,{variant:"call"===(null==(d=null==(i=e.type)?void 0:i.toLowerCase)?void 0:d.call(i))?"default":"secondary",className:"text-xs",children:String(e.type??"").toUpperCase()}),X.jsxs("div",{children:[X.jsxs("div",{className:"font-semibold",children:[e.symbol," ",Vx(e.strike,2)]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Exp: ",new Date(e.expiry).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),X.jsxs("div",{className:"text-right",children:[X.jsx(px,{variant:"bought"===e.action?"outline":"default",className:"text-xs mb-1",children:e.action}),(()=>{const s=(t||[]).filter(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase()&&"SELL"===String(t.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0),n=Math.max(0,Number(e.quantity||0)-s);return X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Qty: ",e.quantity,s>0?` (staged ${s}  avail ${n})`:""]})})(),t.some(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase())&&X.jsx("div",{className:"mt-1",children:X.jsx(px,{variant:"outline",className:"text-[10px]",children:"Staged"})})]})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Price (per unit)"}),X.jsx("div",{className:"font-semibold",children:Gx(e.avgPrice,2,"")})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Current (per unit)"}),X.jsx("div",{className:"font-semibold",children:Gx(e.currentPrice,2,"")})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Unrealized P&L"}),X.jsxs("div",{className:"font-semibold "+(e.pnl>=0?"text-green-600":"text-red-600"),children:[Hx(e.pnl,2),"  (",Kx(e.pnlPercent,2,!0),")"]})]})]}),(()=>{const t=e.quantity,s=100,n=Qx(e.currentPrice)-Qx(e.avgPrice),a=n*t*s-(.25*t+2e-4*(Math.max(0,Qx(e.currentPrice))*t*s)),i=r[String(e.symbol)]??null;let o=0;null==i||Number.isNaN(i)||(o="call"===String(e.type).toLowerCase()?Math.max(0,i-Qx(e.strike)):Math.max(0,Qx(e.strike)-i));const l=.25*t+2e-4*(Math.max(0,o)*t*s),c=o-Qx(e.avgPrice),d=c*t*s-l;return X.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[X.jsxs("div",{className:"p-2 rounded border",children:[X.jsx("div",{className:"text-muted-foreground mb-1",children:"Sell now PnL (approx)"}),X.jsxs("div",{children:["Per unit: ",Hx(n,2)," "]}),X.jsxs("div",{children:["Total (after fees): ",Hx(a,2)," "]})]}),X.jsxs("div",{className:"p-2 rounded border",children:[X.jsx("div",{className:"text-muted-foreground mb-1",children:"Exercise now PnL (intrinsic, approx)"}),X.jsxs("div",{children:["Per unit: ",Hx(c,2)," "]}),X.jsxs("div",{children:["Total (after fees): ",Hx(d,2)," "]})]})]})})(),X.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[X.jsx("span",{className:"font-mono",children:e.id}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium (per unit) ",Gx(Math.round(100*Qx(e.currentPrice))/100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium per contract ",Gx(Math.round(100*Qx(e.currentPrice))/100*100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium total ",Gx(Math.round(100*Qx(e.currentPrice))/100*Qx(e.quantity)*100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Cost basis total ",Gx(Math.round(100*Qx(e.avgPrice))/100*Qx(e.quantity)*100,2,"")]})]}),X.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[X.jsx(Rs,{className:"w-3 h-3"}),e.daysToExpiry," days to expiry"]}),X.jsx("div",{className:"flex items-center gap-2",children:(()=>{const r=(t||[]).filter(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase()&&"SELL"===String(t.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0),a=Math.max(0,Number(e.quantity||0)-r),i=Math.max(1,a);return X.jsxs(X.Fragment,{children:[X.jsx("input",{type:"number",min:1,max:i,value:u,onChange:t=>l(s=>({...s,[e.id]:Math.max(1,Math.min(i,parseInt(t.target.value)||1))})),className:"w-20 h-7 px-2 py-1 border rounded text-xs","aria-label":"Quantity to trade",disabled:!!h}),X.jsx(Lx,{size:"sm",variant:"outline",className:"h-7 text-xs flex items-center gap-1",onClick:()=>s(e,u),disabled:!!h||u<1||u>a,title:u>a?`Available ${a} (staged ${r} of ${e.quantity})`:"",children:"sell"===h?X.jsxs(X.Fragment,{children:[X.jsx(qs,{className:"w-3 h-3 animate-spin"})," Selling"]}):"Sell"}),X.jsx(Lx,{size:"sm",className:"h-7 text-xs flex items-center gap-1",onClick:()=>n(e,u),disabled:!!h||u<1||u>a,title:u>a?`Available ${a} (staged ${r} of ${e.quantity})`:"",children:"exercise"===h?X.jsxs(X.Fragment,{children:[X.jsx(qs,{className:"w-3 h-3 animate-spin"})," Exercising"]}):"Exercise"})]})})()})]})]})},e.id)})})}function Dy({tradesUsed:e,maxTrades:t}){const s=e/t*100,n=t-e;return X.jsxs(Cx,{children:[X.jsx(Ox,{className:"pb-3",children:X.jsxs(Px,{className:"text-lg flex items-center gap-2",children:[X.jsx(sn,{className:"w-5 h-5"}),"Daily Trade Limit"]})}),X.jsxs(Ix,{children:[X.jsxs("div",{className:"text-center mb-4",children:[X.jsx("div",{className:"text-3xl font-bold mb-1",children:n}),X.jsx("div",{className:"text-muted-foreground text-sm",children:"trades remaining"})]}),X.jsx(Mx,{value:s,className:"h-3 mb-3"}),X.jsxs("div",{className:"flex justify-between text-sm",children:[X.jsxs("span",{className:"text-muted-foreground",children:["Used: ",e]}),X.jsxs("span",{className:"text-muted-foreground",children:["Limit: ",t]})]}),s>80&&X.jsx("div",{className:"mt-3 p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:X.jsxs("div",{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400 text-xs",children:[X.jsx(on,{className:"w-3 h-3"}),"Approaching daily limit"]})})]})]})}function Ay(){var e,t;const s=new Date,n=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Berlin",hour12:!1,hour:"2-digit",minute:"2-digit"}).formatToParts(s),r=parseInt((null==(e=n.find(e=>"hour"===e.type))?void 0:e.value)||"0",10),a=parseInt((null==(t=n.find(e=>"minute"===e.type))?void 0:t.value)||"0",10),i=new Date(s);return i.setHours(r,a,0,0),i}function My(e){const t=Ay(),s=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`,n="open"===e?"09:10-09:25":"17:40-17:55",[r,a]=n.split("-");return s>=r&&s<=a}function Cy({metrics:e}){const[t,s]=Je.useState("7d"),[n,r]=Je.useState(null),[a,i]=Je.useState([]),[o,l]=Je.useState([]),[c,d]=Je.useState([]),[u,m]=Je.useState({calls:0,puts:0}),[h,p]=Je.useState([]),[f,g]=Je.useState(!1),[x,v]=Je.useState(!0),[y,b]=Je.useState({}),[w,j]=Je.useState({}),[N,k]=Je.useState([]),[S,_]=Je.useState({}),[E,T]=Je.useState([]),[D,A]=Je.useState(!0),[M,C]=Je.useState(!0),[O,P]=Je.useState(!0),[I,R]=Je.useState(!0),[L,F]=Je.useState([]),[z,B]=Je.useState([]),[U,q]=Je.useState([]),[W,$]=Je.useState({delta:0,gamma:0,vega:0}),[Y,V]=Je.useState([]),{user:H}=fi();function G(e){try{const t=String(e||"");if(t.length>=15){const e=t.slice(-15),s=e.slice(0,2),n=e.slice(2,4),r=e.slice(4,6),a=e.slice(6,7),i=e.slice(7),o=`${Number(s)+2e3}-${n}-${r}`;return{expiry:o,right:"C"===a?"call":"put",strike:Number(i)/1e3}}}catch{}return null}Je.useEffect(()=>{(async()=>{if(H)try{const s=await Iv.getUserPortfolio();if(s){r(s);const n=await Iv.getUserPositions(s.id);i(n);const a="1d"===t?1:"7d"===t?7:"30d"===t?30:90,o=await Iv.getPnLHistory(s.id,a);l(o);const c=new Date,u=new Date;u.setDate(c.getDate()-a);const{data:h}=await oi.from("adx_equity_daily").select("as_of_date, equity, cash, positions_value").eq("portfolio_id",s.id).gte("as_of_date",u.toISOString().slice(0,10)).lte("as_of_date",c.toISOString().slice(0,10)).order("as_of_date",{ascending:!0}),f=[];let g=null;(h||[]).forEach(e=>{const t=Number(e.equity||0),s=Number(e.cash||0),n=Number(e.positions_value||Math.max(0,t-s)),r=null!=g?t-g:0;g=t,f.push({date:e.as_of_date,equity:t,cash:s,positions:n,pnl:r})}),k(f);const{data:x}=await oi.from("adx_orders").select("filled_at, qty, realized_pnl").eq("portfolio_id",s.id).eq("status","FILLED").eq("side","SELL").gte("filled_at",u.toISOString()).lte("filled_at",c.toISOString());let v=[];try{v=(await oi.from("adx_exercises").select("realized_pnl, ts").eq("portfolio_id",s.id).gte("ts",u.toISOString()).lte("ts",c.toISOString())).data||[]}catch(e){}const y=new Map(f.map(e=>[e.date,e.equity])),w=[];(x||[]).forEach(e=>{const t=new Date(e.filled_at).toISOString().slice(0,10),s=y.get(t)??(f.length?f[f.length-1].equity:0),n=Number(e.qty||0);w.push({date:t,equity:s,type:"SELL",label:`SELL filled x${n}`})}),(v||[]).forEach(e=>{const t=new Date(e.ts).toISOString().slice(0,10),s=y.get(t)??(f.length?f[f.length-1].equity:0),n=Number(e.realized_pnl||0);w.push({date:t,equity:s,type:"EXERCISE",label:`Exercise realized ${Vx(n,2)}`})}),T(w);const N=Number(s.starting_cash||0)||0,S=[],_=[];let E=N>0?N:f.length?f[0].equity:0;f.forEach(e=>{const t=e.equity-N,s=N>0?100*(e.equity/N-1):0;S.push({date:e.date,cum:t,cumPct:s}),E=Math.max(E,e.equity);const n=E>0?(E-e.equity)/E*100:0;_.push({date:e.date,ddPct:n})}),F(S),B(_);const D=new Map;(x||[]).forEach(e=>{const t=new Date(e.filled_at).toISOString().slice(0,10),s=Number(e.realized_pnl||0);D.set(t,(D.get(t)||0)+s)}),(v||[]).forEach(e=>{const t=new Date(e.ts).toISOString().slice(0,10);D.set(t,(D.get(t)||0)+Number(e.realized_pnl||0))});const A=[];f.forEach(e=>{const t=D.get(e.date)||0,s=(e.pnl||0)-t;A.push({date:e.date,realized:t,unrealized:s})}),q(A);const M=await Iv.getTradeHistory(s.id,a);d(M);try{const e=await Iv.getSnapshotAggregates();if(e&&e.composition_pct){const t=Number(e.composition_pct.calls||0),s=Number(e.composition_pct.puts||0);m({calls:t,puts:s})}else{const e=await Iv.getPortfolioComposition(s.id);m(e)}}catch{const e=await Iv.getPortfolioComposition(s.id);m(e)}const C=await Iv.getStagedOrders(s.id);p(C);const O=Array.from(new Set([...(n||[]).map(e=>e.option_symbol),...(C||[]).map(e=>e.option_symbol)].filter(Boolean)));if(O.length>0){const t=await Iv.getOptionsMetadataBySymbols(O);b(t);try{const{data:e}=await oi.from("options_market_data").select("option_symbol, delta, gamma, vega, mid, contract_size").in("option_symbol",O),t=new Map((e||[]).map(e=>[e.option_symbol,e]));let s=0,r=0,a=0;const i=new Map;for(const l of n||[]){const e=l.option_symbol,n=l.ticker||"",o=Number(l.qty||0),c=t.get(e)||{},d="number"==typeof c.mid&&c.mid>0?c.mid:l.current_price??l.avg_price??0,u="number"==typeof c.contract_size&&c.contract_size>0?Math.round(c.contract_size):100;s+=Number(c.delta||0)*o*u,r+=Number(c.gamma||0)*o*u,a+=Number(c.vega||0)*o*u;const m=Number(d||0)*o*u;n&&i.set(n,(i.get(n)||0)+m)}$({delta:s,gamma:r,vega:a});const o=Array.from(i.entries()).map(([e,t])=>({ticker:e,notional:t}));o.sort((e,t)=>t.notional-e.notional),V(o)}catch(e){}}const P=Array.from(new Set((n||[]).map(e=>e.ticker).filter(Boolean)));if(P.length>0){const{data:e}=await oi.from("stock_prices").select("ticker, price").in("ticker",P),t={};(e||[]).forEach(e=>{e&&e.ticker&&(t[e.ticker]=Number(e.price||0))}),j(t)}}}catch(s){}finally{v(!1)}else v(!1)})()},[H,t]),Je.useEffect(()=>{let e=null,t=null,s=null;return(async()=>{try{if(!H)return;const n=await Iv.getUserPortfolio();if(!n)return;e=oi.channel("rt:orders:portfolio").on("postgres_changes",{event:"*",schema:"public",table:"adx_orders",filter:`portfolio_id=eq.${n.id}`},()=>{window.setTimeout(()=>{(async()=>{await he()})()},400)}).subscribe(),t=oi.channel("rt:equity:portfolio").on("postgres_changes",{event:"INSERT",schema:"public",table:"adx_equity_daily",filter:`portfolio_id=eq.${n.id}`},()=>{window.setTimeout(()=>{(async()=>{await he()})()},400)}).subscribe(),s=window.setInterval(()=>{(async()=>{await he()})()},25e3)}catch(n){}})(),()=>{e&&oi.removeChannel(e),t&&oi.removeChannel(t),s&&window.clearInterval(s)}},[H]);const K=a.map(e=>{var t;const s="number"==typeof e.avg_price&&isFinite(e.avg_price)?e.avg_price:0,n=e.current_price??e.avg_price,r="number"==typeof n&&isFinite(n)?n:0,a="number"==typeof e.pnl&&isFinite(e.pnl)?e.pnl:0,i="number"==typeof e.pnl_percent&&isFinite(e.pnl_percent)?e.pnl_percent:0,o=e.option_symbol||"",l=null==y?void 0:y[o],c=G(o),d=e.expiry??(null==c?void 0:c.expiry)??null,u="put"===String(e.type??e.option_type??(null==c?void 0:c.right)??"call").toLowerCase()?"put":"call",m=(null==l?void 0:l.ticker)||e.ticker||(null==(t=o.match(/^[A-Z0-9]+/))?void 0:t[0])||"",h=ky(d);return{id:o||e.id,symbol:m,type:u,strike:e.strike??(null==c?void 0:c.strike)??0,expiry:d||e.expiry||(new Date).toISOString(),quantity:e.qty??0,avgPrice:s,currentPrice:r,pnl:a,pnlPercent:i,daysToExpiry:h,action:e.action||"bought",openDate:e.open_date||(new Date).toISOString()}}),Q=K.length>0?K:_y;o.length;const Z=c.length>0?c:Ey,J=u.calls>0||u.puts>0,ee=[{name:"Calls",value:u.calls,color:"#22c55e"},{name:"Puts",value:u.puts,color:"#ef4444"}],te=Q.reduce((e,t)=>e+t.currentPrice*t.quantity*100,0);Q.reduce((e,t)=>e+t.pnl,0);const[se,ne]=Je.useState(!1),[re,ae]=Je.useState({pos:null,qty:1,loading:!1});const[ie,oe]=Je.useState(!1),[le,ce]=Je.useState({pos:null,qty:1,loading:!1});const[de,ue]=Je.useState(null),me=async()=>{try{g(!0);const e=await Iv.getUserPortfolio();if(e){const t=await Iv.getStagedOrders(e.id);p(t);const s=Array.from(new Set([...(a||[]).map(e=>e.option_symbol),...(t||[]).map(e=>e.option_symbol)].filter(Boolean)));if(s.length>0){const e=await Iv.getOptionsMetadataBySymbols(s);b(e)}}}finally{g(!1)}},he=async()=>{try{const e=await Iv.getUserPortfolio();if(e){const[t,s]=await Promise.all([Iv.getUserPositions(e.id),Iv.getStagedOrders(e.id)]);i(t);try{const t=await Iv.getSnapshotAggregates();if(t&&t.composition_pct){const e=Number(t.composition_pct.calls||0),s=Number(t.composition_pct.puts||0);m({calls:e,puts:s})}else{const t=await Iv.getPortfolioComposition(e.id);m(t)}}catch{const t=await Iv.getPortfolioComposition(e.id);m(t)}p(s);const n=Array.from(new Set([...(t||[]).map(e=>e.option_symbol),...(s||[]).map(e=>e.option_symbol)].filter(Boolean)));if(n.length>0){const e=await Iv.getOptionsMetadataBySymbols(n);b(e)}}}catch(vj){}},[pe,fe]=Je.useState(!1),[ge,xe]=Je.useState(0),ve=tt.useRef(null),ye=tt.useRef(null);async function be(){var e;return"undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?pe&&ve.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.reset)?await new Promise(e=>{ye.current=e;try{window.turnstile.reset(ve.current)}catch(t){fe(!1),xe(e=>e+1),e("")}}):void 0:"dev-bypass-token"}const[we,je]=Je.useState(null),[Ne,ke]=Je.useState(null);return Je.useEffect(()=>{const e=()=>{(async()=>{await he()})()};return window.addEventListener("portfolio-updated",e),()=>{window.removeEventListener("portfolio-updated",e)}},[]),Je.useEffect(()=>{let e=null,t=null,s=null;async function n(){var e,n;try{const r=(null==Sy?void 0:Sy.VITE_HEALTH_BASE)||"https://fsqds-production.yadavkartik-arbeit.workers.dev",a=await fetch(`${r}/health/metrics`,{cache:"no-store",headers:{Accept:"application/json"}});if(!a.ok)return;const i=await a.json(),o=(null==(e=null==i?void 0:i.orchestrator)?void 0:e.last_auction_open)||null,l=(null==(n=null==i?void 0:i.orchestrator)?void 0:n.last_auction_close)||null,c=Date.now(),d=e=>{if(!e)return!1;const t=Date.parse(e);return Number.isFinite(t)&&c-t<=6e5};let u=!1;o&&o!==t&&d(o)&&(t=o,await he(),u=!0),!u&&l&&l!==s&&d(l)&&(s=l,await he())}catch{}}function r(){e&&window.clearInterval(e),(()=>{const e=My("open"),t=My("close");return e||t})()&&(e=window.setInterval(n,15e3),n())}r();const a=window.setInterval(r,6e4);return()=>{e&&window.clearInterval(e),window.clearInterval(a)}},[]),X.jsx(yy,{children:X.jsxs("div",{className:"space-y-6",children:[X.jsx(xv,{}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(zs,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"P&L"}),X.jsxs("div",{className:"font-semibold "+(Qx(null==n?void 0:n.realized_pnl)>=0?"text-green-600":"text-red-600"),children:[Hx(Qx(null==n?void 0:n.realized_pnl),2)," "]}),X.jsx("div",{className:"text-xs text-muted-foreground",children:(()=>{const e=Qx(null==n?void 0:n.starting_cash)||0,t=Qx(null==n?void 0:n.realized_pnl)||0;return Kx(e>0?t/e*100:0,2,!0)})()}),(()=>{const t="number"==typeof(null==e?void 0:e.todaysPnL)?e.todaysPnL:(()=>{if(N&&N.length>=2){return(N[N.length-1].equity||0)-(N[N.length-2].equity||0)}return 0})(),s=N&&N.length>=2&&N[N.length-2].equity||0,n=s>0?t/s*100:0;return X.jsxs("div",{className:"text-xs mt-1 "+(t>=0?"text-green-600":"text-red-600"),children:["Today: ",t>=0?"+":"",Vx(t,2),"  (",Kx(n,2,!0),")"]})})()]})]})})}),X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(an,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Positions"}),X.jsxs("div",{className:"font-semibold",children:[Q.length," Active"]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:[Gx(te,0,"")," value"]})]})]})})}),X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Ss,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Days to Expiry"}),X.jsxs("div",{className:"font-semibold",children:[Q.length>0?Math.round(Q.reduce((e,t)=>e+t.daysToExpiry,0)/Q.length):0," days"]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:[Q.filter(e=>e.daysToExpiry<=30).length," expiring soon"]})]})]})})}),e?X.jsx(Dy,{tradesUsed:e.tradesUsedToday,maxTrades:e.maxTradesPerDay}):null,e?X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-rose-100 dark:bg-rose-900/20 rounded-lg flex items-center justify-center",children:X.jsx(rn,{className:"w-5 h-5 text-rose-600 dark:text-rose-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Drawdown"}),X.jsx("div",{className:"font-semibold",children:Kx(Math.max(0,100*Qx(e.maxDrawdownPct)),1)})]})]})})}):null,e?X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg flex items-center justify-center",children:X.jsx(an,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Sharpe Ratio"}),X.jsx("div",{className:"font-semibold",children:Vx(e.sharpe??0,2)})]})]})})}):null]}),se&&re.pos?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Confirm Sell"}),re.loading?X.jsx("div",{className:"text-xs text-muted-foreground",children:"Computing latest preview"}):X.jsxs("div",{className:"space-y-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-muted-foreground",children:"Contract"}),X.jsxs("div",{className:"font-mono",children:[re.pos.id,"  ",re.pos.symbol," ",String(re.pos.type).toUpperCase()," ",Vx(re.pos.strike,2),"  Qty ",re.qty]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Sell now P&L (approx)"}),X.jsxs("div",{className:Number(re.sellPnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(re.sellPnl||0)>=0?"+":"",Vx(Number(re.sellPnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(re.sellPerUnit||0)>=0?"+":"",Vx(Number(re.sellPerUnit||0),2),"   Fees ",Vx(Number(re.feesSell||0),2)," "]})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Exercise now P&L (intrinsic, approx)"}),X.jsxs("div",{className:Number(re.exercisePnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(re.exercisePnl||0)>=0?"+":"",Vx(Number(re.exercisePnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(re.exercisePerUnit||0)>=0?"+":"",Vx(Number(re.exercisePerUnit||0),2),"   Fees ",Vx(Number(re.feesExercise||0),2)," "]})]})]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Spot ",null!=re.spot?`${Vx(Number(re.spot||0),2)}`:"","  Mid ",Vx(Number(re.pos.currentPrice||0),2),"  Avg ",Vx(Number(re.pos.avgPrice||0),2)]})]}),X.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[X.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{ne(!1)},children:"Cancel"}),X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-60",disabled:re.loading,onClick:async()=>{re.pos&&(ne(!1),await(async(e,t)=>{var s;try{_(t=>({...t,[e.id]:"sell"}));const n=Math.max(1,Math.min(e.quantity,t||1)),r=await be(),a=await Iv.placeOrder({optionSymbol:e.id,ticker:e.symbol,type:e.type,strike:e.strike,expiry:e.expiry,quantity:n,action:"sell",orderType:"market"},{turnstileToken:r});if(!(null==a?void 0:a.success))return void Ja.error((null==a?void 0:a.error)||"Sell failed");if(a.auctionSlot){const e=["number"==typeof a.previewPrice?`preview ${Vx(a.previewPrice,2)}`:null,"number"==typeof a.estimatedFees?`fees ${Vx(a.estimatedFees,2)}`:null].filter(Boolean).join("  ");Ja.success(`Order staged for ${String(a.auctionSlot).toUpperCase()}${e?` (${e})`:""}`)}else{const e="number"==typeof(null==(s=null==a?void 0:a.order)?void 0:s.fillPrice)?a.order.fillPrice:void 0;Ja.success("Order filled"+("number"==typeof e?` @ ${Vx(e,2)}`:""))}window.dispatchEvent(new CustomEvent("portfolio-updated")),await me()}catch(vj){Ja.error("Sell failed")}finally{_(t=>({...t,[e.id]:null}))}})(re.pos,re.qty))},children:"Confirm Sell"})]})]})}):null,X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{className:"text-lg",children:"Pending Orders"})}),X.jsxs(Ix,{children:[we&&X.jsx("div",{className:"mb-2 text-xs text-green-700 bg-green-50 border border-green-200 rounded px-2 py-1",children:we}),X.jsx("div",{className:"sr-only","aria-hidden":"true",children:X.jsx(Cv,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"compact",onLoad:e=>{ve.current=e,fe(!0)},onVerify:e=>{ye.current&&(ye.current(e),ye.current=null)},onExpire:()=>{},onError:()=>{fe(!1),xe(e=>e+1)}},`pf-${ge}`)}),X.jsx("div",{className:"max-h-80 overflow-y-auto pr-1",children:0===h.length?X.jsx("div",{className:"text-sm text-muted-foreground",children:"No staged orders."}):X.jsxs("div",{className:"space-y-3",children:[h.some(e=>"DEFERRED"===String(e.status||"").toUpperCase())&&X.jsx("div",{className:"text-xs rounded bg-amber-50 text-amber-700 border border-amber-200 px-2 py-1",children:"Some orders are deferred awaiting fresh quotes/marks. They will be reconsidered in the next auction cycle."}),h.map(e=>{var t;const s="open"===String(e.auction_slot).toLowerCase()?"open":"close",n="number"==typeof e.time_to_cutoff_sec?Math.floor(e.time_to_cutoff_sec/60):function(e){const t=Ay(),s="open"===e?"09:10":"17:40",[n,r]=s.split(":").map(e=>parseInt(e,10)),a=new Date(t);a.setHours(n,r,0,0);const i=a.getTime()-t.getTime();return Math.max(0,Math.round(i/6e4))}(s),r=My(s),a="boolean"==typeof e.cancelable?e.cancelable:!r&&n>0,i=null==y?void 0:y[e.option_symbol],o=i?null:G(e.option_symbol),l=((null==i?void 0:i.type)||(null==o?void 0:o.right)||"").toString().toUpperCase(),c=(null==i?void 0:i.strike)??(null==o?void 0:o.strike),d=(null==i?void 0:i.expiry)||(null==o?void 0:o.expiry)?new Date((null==i?void 0:i.expiry)||(null==o?void 0:o.expiry)).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null,u=String(e.status||"").toUpperCase(),m="DEFERRED"===u?"bg-amber-100 text-amber-700":"PENDING"===u?"bg-blue-100 text-blue-700":"FILLED"===u?"bg-green-100 text-green-700":"REJECTED"===u?"bg-red-100 text-red-700":"bg-neutral-100 text-neutral-700",h=null==(t=null==y?void 0:y[e.option_symbol])?void 0:t.ticker,g=String(h||e.ticker||e.symbol||"");return X.jsxs("div",{className:"flex items-center justify-between border rounded p-3",children:[X.jsxs("div",{className:"text-sm",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(av,{ticker:g,className:"w-5 h-5 rounded-sm object-contain",alt:g}),X.jsxs("div",{className:"font-mono",children:[g," ",e.option_symbol]}),X.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${m}`,children:u||""})]}),X.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[String(e.side).toUpperCase()," x",Qx(e.qty)]}),l&&"number"==typeof c&&X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:[l," ",Vx(c,2)]})]}),d?X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Exp ",d]})]}):null,X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Slot: ",String(e.auction_slot).toUpperCase()]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium (per unit): ",e.preview_price?Gx(e.preview_price,2,""):""]}),X.jsxs("span",{children:[" ",""," "]}),(()=>{const t="number"==typeof e.notional_eur&&e.notional_eur>0?e.notional_eur:"number"==typeof e.preview_price&&e.preview_price>0?Qx(e.preview_price)*Qx(e.qty)*100:0,s="number"==typeof e.preview_price&&e.preview_price>0?` (qty ${Qx(e.qty)}  100 @ ${Gx(e.preview_price,2,"")}/unit)`:"";return X.jsxs("span",{children:["Order value: ",t>0?Gx(t,2,""):"",s]})})(),Array.isArray(e.risk_reasons)&&e.risk_reasons.length>0?X.jsx("div",{className:"mt-1 text-[10px] text-amber-700 bg-amber-50 border border-amber-200 rounded px-1.5 py-0.5 inline-block",children:(()=>{const t=e.risk_reasons,s=String(e.risk_cap_basis||"CASH").toUpperCase();return t.includes("EXPOSURE_CAP")?`Will be rejected at auction  exposure cap (${s.toLowerCase()} basis)`:t.includes("EXPOSURE_NEAR_CAP")?`May be rejected at auction  near exposure cap (${s.toLowerCase()} basis)`:t.includes("INSUFFICIENT_CASH")?"May be rejected  insufficient cash for notional + fees":t.includes("DATA_STALE_OR_MISSING")?"Pricing data stale  refresh marks/quotes before auction":"At risk  verify pricing and cash/exposure before auction"})()}):null,"number"==typeof e.estimated_fees?X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),"number"==typeof e.fees_bps&&"number"==typeof e.fee_per_contract_eur?X.jsxs(by,{children:[X.jsx(wy,{asChild:!0,children:X.jsxs("span",{className:"underline decoration-dotted cursor-help",children:["Est. fees: ",Gx(e.estimated_fees,2,"")]})}),X.jsx(jy,{children:X.jsxs("div",{className:"text-xs space-y-1",children:[X.jsx("div",{className:"font-semibold",children:"Estimated fees breakdown"}),X.jsxs("div",{children:["Per-contract: ",Gx(e.fee_per_contract_eur,2,""),"  ",Qx(e.qty)," = ",Gx(Qx(e.fee_per_contract_eur)*Qx(e.qty),2,"")]}),X.jsxs("div",{children:["Ad valorem: ",Qx(e.fees_bps)," bps  ",Gx("number"==typeof e.notional_eur&&e.notional_eur>0?e.notional_eur:Qx(e.preview_price)*Qx(e.qty)*100,2,"")," = ",Gx(Qx(e.fees_bps)/1e4*("number"==typeof e.notional_eur&&e.notional_eur>0?Qx(e.notional_eur):Qx(e.preview_price)*Qx(e.qty)*100),2,"")]}),X.jsx("div",{className:"text-muted-foreground",children:"Actual fees charged at execution"})]})})]}):X.jsxs("span",{children:["Est. fees: ",Gx(e.estimated_fees,2,"")]})]}):null]})})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[X.jsx(Rs,{className:"w-3 h-3"}),r?"Auctioning now":a?`${n} min to cutoff`:"Cutoff passed"]}),X.jsx(Lx,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>(async e=>{try{ke(e);const t=await be(),s=await Iv.cancelOrder(e,{turnstileToken:t});s.success?(p(t=>Array.isArray(t)?t.filter(t=>t.id!==e):t),je("Order cancelled"),Ja.success("Order cancelled"),setTimeout(()=>je(null),2500),await me()):Ja.error(s.error||"Cancel failed")}finally{ke(null)}})(e.id),disabled:f||!a||Ne===e.id,children:Ne===e.id?"Cancelling":"Cancel"})]})]},e.id)})]})})]})]}),ie&&le.pos?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Confirm Exercise"}),le.loading?X.jsx("div",{className:"text-xs text-muted-foreground",children:"Computing latest preview"}):X.jsxs("div",{className:"space-y-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-muted-foreground",children:"Contract"}),X.jsxs("div",{className:"font-mono",children:[le.pos.id,"  ",le.pos.symbol," ",String(le.pos.type).toUpperCase()," ",Vx(le.pos.strike,2),"  Qty ",le.qty]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Sell now P&L (approx)"}),X.jsxs("div",{className:Number(le.sellPnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(le.sellPnl||0)>=0?"+":"",Vx(Number(le.sellPnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(le.sellPerUnit||0)>=0?"+":"",Vx(Number(le.sellPerUnit||0),2),"   Fees ",Vx(Number(le.feesSell||0),2)," "]})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Exercise now P&L (intrinsic, approx)"}),X.jsxs("div",{className:Number(le.exercisePnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(le.exercisePnl||0)>=0?"+":"",Vx(Number(le.exercisePnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(le.exercisePerUnit||0)>=0?"+":"",Vx(Number(le.exercisePerUnit||0),2),"   Fees ",Vx(Number(le.feesExercise||0),2)," "]})]})]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Spot ",null!=le.spot?`${Vx(Number(le.spot||0),2)}`:"","  Mid ",Vx(Number(le.pos.currentPrice||0),2),"  Avg ",Vx(Number(le.pos.avgPrice||0),2)]})]}),X.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[X.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{oe(!1)},children:"Cancel"}),X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-60",disabled:le.loading,onClick:async()=>{le.pos&&(oe(!1),await(async(e,t)=>{try{_(t=>({...t,[e.id]:"exercise"}));const s=Math.max(1,Math.min(e.quantity,t||1)),n=await be(),r=await Iv.exerciseOption({optionSymbol:e.id,qty:s},{turnstileToken:n});if(!(null==r?void 0:r.success))return void Ja.error((null==r?void 0:r.error)||"Exercise failed");const a=(null==r?void 0:r.data)&&"number"==typeof r.data.realizedPnL?r.data.realizedPnL:void 0;Ja.success("Exercise successful"+("number"==typeof a?`  Realized P&L ${Vx(a,2)}`:"")),ue({posId:e.id,qty:s,realized:a}),window.setTimeout(()=>{try{window.location.reload()}catch{}},1200)}catch(vj){Ja.error("Exercise failed")}finally{_(t=>({...t,[e.id]:null}))}})(le.pos,le.qty))},children:"Confirm Exercise"})]})]})}):null,de?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Exercise Submitted"}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Your exercise request was successful. We will refresh the page to reflect updated positions.","number"==typeof de.realized?X.jsxs("div",{className:"mt-2",children:["Realized P&L: ",Vx(de.realized,2)]}):null]}),X.jsx("div",{className:"flex items-center justify-end gap-2 mt-4",children:X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs",onClick:()=>{try{window.location.reload()}catch{}},children:"Refresh now"})})]})}):null,X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[X.jsxs(Cx,{className:"lg:col-span-2",children:[X.jsx(Ox,{children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx(Px,{className:"text-lg",children:"Portfolio Performance"}),X.jsxs(Fx,{value:t,onValueChange:s,children:[X.jsx(Bx,{className:"w-24 h-8",children:X.jsx(zx,{})}),X.jsxs(Ux,{children:[X.jsx(qx,{value:"1d",children:"1D"}),X.jsx(qx,{value:"7d",children:"7D"}),X.jsx(qx,{value:"30d",children:"30D"}),X.jsx(qx,{value:"90d",children:"90D"})]})]})]})}),X.jsxs(Ix,{children:[X.jsx("div",{className:"flex gap-2 mb-2 text-xs text-muted-foreground",children:(()=>{const e=({label:e,value:t,onChange:s})=>X.jsxs("label",{className:"inline-flex items-center gap-1 cursor-pointer select-none",children:[X.jsx("input",{type:"checkbox",checked:t,onChange:e=>s(e.target.checked)}),X.jsx("span",{children:e})]});return X.jsxs(X.Fragment,{children:[X.jsx(e,{label:"Cash",value:D,onChange:A}),X.jsx(e,{label:"Positions",value:M,onChange:C}),X.jsx(e,{label:"Equity",value:O,onChange:P}),X.jsx(e,{label:"Daily PnL",value:I,onChange:R})]})})()}),X.jsx(Yt,{width:"100%",height:260,children:X.jsxs(es,{data:N,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:12}}),X.jsx(Qt,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:(e,t,s)=>{const n=s&&s[0]&&s[0].payload?s[0].payload:{};return n.__event?[n.__event.label,n.__event.type]:"pnl"===t?[`${Vx(e,2)}`,"Daily P&L"]:"equity"===t?[`${Vx(e,2)}`,"Equity"]:"cash"===t?[`${Vx(e,2)}`,"Cash"]:"positions"===t?[`${Vx(e,2)}`,"Positions"]:[`${Vx(e,2)}`,t]}}),D&&X.jsx(ts,{type:"monotone",dataKey:"cash",stackId:"1",stroke:"#93c5fd",fill:"#93c5fd",fillOpacity:.4,name:"cash"}),M&&X.jsx(ts,{type:"monotone",dataKey:"positions",stackId:"1",stroke:"#86efac",fill:"#86efac",fillOpacity:.4,name:"positions"}),I&&X.jsx(Jt,{dataKey:"pnl",barSize:14,fill:"#60a5fa",name:"pnl"}),O&&X.jsx(Xt,{type:"monotone",dataKey:"equity",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"equity"}),X.jsx(ss,{data:E.map(e=>({date:e.date,equity:e.equity,__event:e})),fill:"#f97316",name:"events"}),X.jsx(ns,{dataKey:"date",height:18,stroke:"#94a3b8",travellerWidth:8})]})}),X.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cumulative P&L vs Starting Cash"}),X.jsx(Yt,{width:"100%",height:180,children:X.jsxs(es,{data:L,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:(e,t)=>["cum"===t?`${Vx(e,2)}`:`${Vx(e,2)}%`,"cum"===t?"Cumulative P&L":"Cumulative %"]}),X.jsx(ts,{type:"monotone",dataKey:"cum",stroke:"#4ade80",fill:"#86efac",fillOpacity:.3}),X.jsx(Xt,{type:"monotone",dataKey:"cumPct",stroke:"#10b981",strokeDasharray:"4 4",dot:!1})]})})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Max Drawdown (%)"}),X.jsx(Yt,{width:"100%",height:180,children:X.jsxs(es,{data:z,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:e=>[`${Vx(e,2)}%`,"Drawdown"]}),X.jsx(ts,{type:"monotone",dataKey:"ddPct",stroke:"#f87171",fill:"#fecaca",fillOpacity:.4})]})})]}),X.jsxs("div",{className:"md:col-span-2 border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Daily Contributions (approx)"}),X.jsx(Yt,{width:"100%",height:180,children:X.jsxs(es,{data:U,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:(e,t)=>[`${Vx(e,2)}`,"realized"===t?"Realized P&L":"Unrealized P&L"]}),X.jsx(Jt,{dataKey:"realized",stackId:"1",fill:"#fb923c"}),X.jsx(Jt,{dataKey:"unrealized",stackId:"1",fill:"#60a5fa"})]})})]})]})]})]}),X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{className:"text-lg",children:"Portfolio Composition"})}),X.jsx(Ix,{children:X.jsxs("div",{className:"space-y-4",children:[X.jsx("div",{children:J?X.jsxs(X.Fragment,{children:[X.jsx(Yt,{width:"100%",height:200,children:X.jsxs(rs,{children:[X.jsx(as,{data:ee,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"value",children:ee.map((e,t)=>X.jsx(is,{fill:e.color},`cell-${t}`))}),X.jsx(Qt,{formatter:e=>`${e}%`}),X.jsx(os,{})]})}),X.jsx("div",{className:"text-[11px] text-muted-foreground mt-2",children:"Notional uses product contract sizes"})]}):X.jsx("div",{className:"h-[200px] flex items-center justify-center text-sm text-muted-foreground",children:"No options positions yet"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Exposure by Ticker (notional; uses product contract sizes)"}),X.jsx(Yt,{width:"100%",height:140,children:X.jsxs(Zt,{data:Y.slice(0,6),children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"ticker",tick:{fontSize:10}}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:e=>[`${Vx(e,0)}`,"Notional"]}),X.jsx(Jt,{dataKey:"notional",fill:"#60a5fa"})]})})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Daily Trade Activity"}),X.jsx(Yt,{width:"100%",height:220,children:X.jsxs(Zt,{data:Z,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`${e}`,"Trades"]}),X.jsx(Jt,{dataKey:"trades",fill:"#3b82f6"})]})})]})]})})]})]}),X.jsx("div",{className:"grid grid-cols-1 gap-6",children:X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsx(Px,{className:"text-lg",children:"Active Positions"})}),X.jsx(Ix,{children:X.jsx(Ty,{positions:Q,stagedOrders:h,onSell:async(e,t)=>{await async function(e,t){const s=Math.max(1,Math.min(e.quantity,t||1));ne(!0),ae({pos:e,qty:s,loading:!0});try{const{getWorkerBase:t}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>hv);return{getWorkerBase:e}},void 0),n=t();let r=null;try{const t=await fetch(`${n}/api/market/stock-prices?tickers=${encodeURIComponent(e.symbol)}&refresh=1&delta=1`);if(t.ok){const s=await t.json().catch(()=>({})),n=Array.isArray(null==s?void 0:s.data)?s.data.find(t=>String(t.ticker)===e.symbol):null;n&&"number"==typeof n.price&&(r=Number(n.price))}}catch{}const a=100,i=Number(e.currentPrice||0),o=Number(e.avgPrice||0),l=Number((null==Sy?void 0:Sy.VITE_CONTRACT_FEE_EUR)??"0.25"),c=Number((null==Sy?void 0:Sy.VITE_FEES_BPS)??"2"),d=i>0?i*s*a:0,u=d>0?l*s+c/1e4*d:0,m=(i-o)*s*a-u;let h=0;null!=r&&(h="call"===String(e.type).toLowerCase()?Math.max(0,r-e.strike):Math.max(0,e.strike-r));const p=h*s*a,f=p>0?l*s+c/1e4*p:l*s;ae({pos:e,qty:s,loading:!1,sellPnl:m,exercisePnl:(h-o)*s*a-f,sellPerUnit:i-o,exercisePerUnit:h-o,feesSell:u,feesExercise:f,spot:r})}catch(vj){ae(e=>({...e,loading:!1}))}}(e,t)},onExercise:async(e,t)=>{await async function(e,t){const s=Math.max(1,Math.min(e.quantity,t||1));oe(!0),ce({pos:e,qty:s,loading:!0});try{const t="https://fsqds-production.yadavkartik-arbeit.workers.dev";let n=null;try{const s=await fetch(`${t}/api/market/stock-prices?tickers=${encodeURIComponent(e.symbol)}&refresh=1&delta=1`);if(s.ok){const t=await s.json().catch(()=>({})),r=Array.isArray(null==t?void 0:t.data)?t.data.find(t=>String(t.ticker)===e.symbol):null;r&&"number"==typeof r.price&&(n=Number(r.price))}}catch{}const r=100,a=Number(e.currentPrice||0),i=Number(e.avgPrice||0),o=Number((null==Sy?void 0:Sy.VITE_CONTRACT_FEE_EUR)??"0.25"),l=Number((null==Sy?void 0:Sy.VITE_FEES_BPS)??"2"),c=a>0?a*s*r:0,d=c>0?o*s+l/1e4*c:0,u=(a-i)*s*r-d;let m=0;null!=n&&(m="call"===String(e.type).toLowerCase()?Math.max(0,n-e.strike):Math.max(0,e.strike-n));const h=m*s*r,p=h>0?o*s+l/1e4*h:o*s;ce({pos:e,qty:s,loading:!1,sellPnl:u,exercisePnl:(m-i)*s*r-p,sellPerUnit:a-i,exercisePerUnit:m-i,feesSell:d,feesExercise:p,spot:n})}catch(vj){ce(e=>({...e,loading:!1}))}}(e,t)},spotByTicker:w,busyByPosition:S,cancellingId:Ne})})]})})]})})}function Oy(e){switch(e){case"diamond":return X.jsx(Ls,{className:"w-4 h-4 text-blue-400"});case"platinum":return X.jsx(tn,{className:"w-4 h-4 text-gray-300"});case"gold":return X.jsx(ln,{className:"w-4 h-4 text-yellow-500"});case"silver":return X.jsx(Vs,{className:"w-4 h-4 text-gray-400"});case"bronze":return X.jsx(js,{className:"w-4 h-4 text-orange-600"});default:return X.jsx(js,{className:"w-4 h-4 text-gray-500"})}}function Py(){const{user:e}=fi(),[t,s]=Je.useState("all"),[n,r]=Je.useState("overall"),[a,i]=Je.useState([]),[o,l]=Je.useState(!0),[c,d]=Je.useState(null),[u,m]=Je.useState(null),[h,p]=Je.useState({users:0,avgReturn:0,topReturn:0,totalVolume:0});return Je.useEffect(()=>{(async()=>{var t,s,r,a;l(!0);try{if("predictions"===n){const{data:t}=await oi.from("seasons").select("id").eq("status","active").single();if(!t)return i([]),void p({users:0,avgReturn:0,topReturn:0,totalVolume:0});const{data:s,error:n}=await oi.from("adx_prediction_scores_season").select("user_id, mse_score, rmse_score, predictions_made, accuracy_percentile, user_profiles(email)").eq("season_id",t.id).order("rmse_score",{ascending:!0,nullsFirst:!1});if(n)return void i([]);const r=(s||[]).map((t,s)=>{var n;const r=t.accuracy_percentile||0;let a="bronze";return r>=95?a="diamond":r>=85?a="platinum":r>=70?a="gold":r>=50&&(a="silver"),{id:t.user_id,email:(null==(n=null==t?void 0:t.user_profiles)?void 0:n.email)||"Anonymous",rank:s+1,pnlPercent:0,totalPnL:0,portfolioValue:0,tradesCount:0,winRate:0,tier:a,badges:[],isCurrentUser:t.user_id===(null==e?void 0:e.id),rmse:t.rmse_score??void 0,mse:t.mse_score??void 0,predictionsCount:t.predictions_made??0,percentile:r}});i(r);const a=r.length,o=r.reduce((e,t)=>e+(t.rmse||0),0)/(a||1),l=Math.min(...r.map(e=>e.rmse||Number.POSITIVE_INFINITY));return void p({users:a,avgReturn:Math.round(1e3*o)/1e3,topReturn:Math.round(1e3*l)/1e3,totalVolume:r.reduce((e,t)=>e+(t.predictionsCount||0),0)})}let l=[];try{const e=await async function(e,t={}){var s;const n=new Headers(t.headers),r=localStorage.getItem("supabase.auth.token");r&&n.set("Authorization",`Bearer ${r}`);let a=n.get("x-correlation-id");if(!a){try{a=(null==(s=null==crypto?void 0:crypto.randomUUID)?void 0:s.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}catch{a=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}n.set("x-correlation-id",a)}return fetch(e,{...t,headers:n})}(fv.adxLeaderboard),n=await e.json().catch(()=>({ok:!1}));n&&n.ok&&(l=(null==(t=n.data)?void 0:t.rows)||[],d((null==(s=n.data)?void 0:s.generated_at)||null),m("worker"))}catch(o){}if(0===l.length)try{const{data:e}=await oi.functions.invoke("adx_build_leaderboard_cache",{method:"POST",body:{}});(null==e?void 0:e.ok)&&(l=(null==(r=e.data)?void 0:r.rows)||[],d((null==(a=e.data)?void 0:a.generated_at)||(new Date).toISOString()),m("edge"))}catch(vj){return void i([])}const c=l.map((t,s)=>{const n=Number(t.equity||1e5),r="number"==typeof t.starting_cash?Number(t.starting_cash):1e5,a=("number"==typeof t.realized_pnl&&Number(t.realized_pnl),"number"==typeof t.pnl_pct?Number(t.pnl_pct):r>0?100*(n/r-1):0),i=n-r,o=t.total_trades||0,l=t.winning_trades||0,c=o>0?l/o*100:0,d=100*(t.max_drawdown_pct??0),u=t.sharpe??0;let m="bronze";a>30?m="diamond":a>20?m="platinum":a>10?m="gold":a>5&&(m="silver");const h=[];return 1===t.rank&&h.push(""),c>80&&h.push(""),a>25&&h.push(""),o>100&&h.push(""),{id:t.user_id,email:t.email||"Anonymous",rank:t.rank,pnlPercent:Number(a.toFixed(4)),totalPnL:Math.round(100*i)/100,portfolioValue:Math.round(100*n)/100,tradesCount:o,winRate:Math.round(10*c)/10,tier:m,badges:h,isCurrentUser:t.user_id===(null==e?void 0:e.id),rmse:void 0,mse:void 0,predictionsCount:void 0,percentile:void 0,sharpe:u,maxDrawdownPct:d}});i(c);const u=c.length,h=u?c.reduce((e,t)=>e+t.pnlPercent,0)/u:0,f=u?Math.max(...c.map(e=>e.pnlPercent)):0,g=c.reduce((e,t)=>e+t.portfolioValue,0);p({users:u,avgReturn:Math.round(10*h)/10,topReturn:Math.round(10*f)/10,totalVolume:Math.round(g)})}catch(c){i([])}finally{l(!1)}})()},[e,t,n]),o?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsx(Cx,{children:X.jsxs(Ix,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===n?"Total Forecasters":"Total Traders"}),X.jsx("div",{className:"text-2xl font-bold",children:h.users})]})}),X.jsx(Cx,{children:X.jsxs(Ix,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===n?"Avg RMSE":"Avg Return"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===n?h.avgReturn.toFixed(3):`${h.avgReturn.toFixed(2)}%`})]})}),X.jsx(Cx,{children:X.jsxs(Ix,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===n?"Best RMSE":"Top Return"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===n?h.topReturn.toFixed(3):`${h.topReturn.toFixed(2)}%`})]})}),X.jsx(Cx,{children:X.jsxs(Ix,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===n?"Total Predictions":"Total Equity"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===n?h.totalVolume:`${(h.totalVolume/1e6).toFixed(1)}M`})]})})]}),X.jsxs("div",{className:"flex gap-3",children:[X.jsxs(Fx,{value:t,onValueChange:s,children:[X.jsx(Bx,{className:"w-40",children:X.jsx(zx,{placeholder:"Select timeframe"})}),X.jsxs(Ux,{children:[X.jsx(qx,{value:"all",children:"All Time"}),X.jsx(qx,{value:"monthly",children:"This Month"}),X.jsx(qx,{value:"weekly",children:"This Week"}),X.jsx(qx,{value:"daily",children:"Today"})]})]}),X.jsxs(Fx,{value:n,onValueChange:r,children:[X.jsx(Bx,{className:"w-40",children:X.jsx(zx,{placeholder:"Select category"})}),X.jsxs(Ux,{children:[X.jsx(qx,{value:"overall",children:"Overall"}),X.jsx(qx,{value:"options",children:"Options"}),X.jsx(qx,{value:"predictions",children:"Predictions"})]})]})]}),X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsxs(Px,{className:"flex items-center justify-between",children:[X.jsxs("span",{className:"flex items-center gap-2",children:[X.jsx(ln,{className:"w-5 h-5"}),"Current Traders"]}),X.jsxs("div",{className:"flex items-center gap-2",children:[c&&X.jsxs(px,{variant:"outline",children:["Updated ",new Date(c).toLocaleString()]}),u&&X.jsx(px,{variant:"secondary",children:"worker"===u?"via Cache":"via Edge"})]})]})}),X.jsx(Ix,{className:"p-0",children:X.jsx("div",{className:"divide-y divide-border",children:a.length>0?a.map(e=>{var t;return X.jsx("div",{className:"p-4 transition-all hover:bg-muted/50 "+(e.isCurrentUser?"bg-primary/5":""),children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted font-bold",children:e.rank<=3?1===e.rank?"":2===e.rank?"":"":`#${e.rank}`}),X.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:X.jsx(cn,{className:"w-6 h-6 text-muted-foreground"})}),X.jsxs("div",{children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-semibold",children:e.email}),e.isCurrentUser&&X.jsx(px,{variant:"secondary",className:"text-xs",children:"You"}),X.jsx("div",{className:"flex items-center gap-1",children:Oy(e.tier)})]}),X.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-4 mt-1",children:[X.jsxs("span",{children:[e.tradesCount," trades"]}),X.jsxs("span",{children:[e.winRate,"% win rate"]}),X.jsx("div",{className:"flex gap-1",children:e.badges.map((e,t)=>X.jsx("span",{children:e},t))})]})]})]}),X.jsx("div",{className:"text-right",children:"predictions"===n?X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"text-sm",children:["RMSE: ",X.jsx("span",{className:"font-bold",children:(e.rmse??0).toFixed(3)})]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Predictions: ",e.predictionsCount||0]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Percentile: ",(null==(t=e.percentile)?void 0:t.toFixed(1))||0,"%"]})]}):X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.pnlPercent>=0?X.jsx(an,{className:"w-4 h-4 text-green-500"}):X.jsx(rn,{className:"w-4 h-4 text-red-500"}),X.jsxs("span",{className:"font-bold text-lg "+(e.pnlPercent>=0?"text-green-500":"text-red-500"),children:[e.pnlPercent>=0?"+":"",Math.abs(e.pnlPercent).toFixed(2),"%"]})]}),X.jsxs("div",{className:"text-sm text-muted-foreground",children:["",e.totalPnL>=0?"+":"",e.totalPnL.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Portfolio: ",e.portfolioValue.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Sharpe ","sharpe"in e&&"number"==typeof e.sharpe?e.sharpe.toFixed(2):"","  Max DD ","maxDrawdownPct"in e&&"number"==typeof e.maxDrawdownPct?e.maxDrawdownPct.toFixed(1):"","%"]})]})})]})},e.id)}):X.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No traders found. Be the first to start trading!"})})})]})]})}function Iy({children:e,publicContent:t,requireAdmin:s=!1}){const{user:n,isAdmin:r}=fi();return n?s&&!r?null:X.jsx(X.Fragment,{children:e}):X.jsx(X.Fragment,{children:t})||null}function Ry({metrics:e}){var t;const s=e.tradesUsedToday/e.maxTradesPerDay*100;return e.marginUsed,e.marginUsed,e.marginAvailable,X.jsx("div",{className:"bg-card border rounded-lg p-4 mb-6",children:X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(un,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Cash"}),X.jsxs("div",{className:"font-semibold",children:["",e.accountBalance.toLocaleString()]})]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(an,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Portfolio Value"}),X.jsxs("div",{className:"font-semibold",children:["",Number(e.liquidationPortfolioValue??e.portfolioValue??0).toLocaleString()]}),(()=>{const t=Number(e.startingCash??(e.portfolioValue||0)-(e.totalPnL||0)),s=Number(e.liquidationPortfolioValue??e.portfolioValue??0),n=t>0?100*(s/t-1):0,r=n>=0?"+":"",a=n>=0?"text-green-600":"text-red-600";return X.jsxs("div",{className:`text-xs ${a}`,children:["P&L (cumulative): ",r,n.toFixed(2),"%"]})})(),(()=>{const t=Number(e.todaysPnL??0),s=Number(e.portfolioValue??0)-t,n=s>0?t/s*100:0,r=t>=0?"+":"",a=t>=0?"text-green-600":"text-red-600";return X.jsxs("div",{className:`text-xs ${a}`,children:[X.jsx("span",{className:"text-muted-foreground",children:"(today)"})," ",r,Vx(t,2),"  (",r,n.toFixed(2),"%)"]})})()]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:X.jsx(bs,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Daily Trades"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsxs("span",{className:"text-sm font-semibold",children:[e.tradesUsedToday,"/",e.maxTradesPerDay]}),X.jsxs(px,{variant:s>80?"destructive":s>60?"secondary":"default",className:"text-xs",children:[Math.round(s),"%"]})]}),X.jsx(Mx,{value:s,className:"h-1.5 mt-1"})]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Zs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Buying Power (Cash account)"}),X.jsxs("div",{className:"font-semibold text-sm",children:["",e.accountBalance.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Sharpe ",(null==(t=e.sharpe)?void 0:t.toFixed(2))??"0.00","  Max DD ",(100*(e.maxDrawdownPct??0)).toFixed(1),"%"]})]})]})]})})}function Ly(){const{user:e,isEventUser:t}=fi(),[s,n]=Je.useState(e?"trading":"leaderboard"),[r,a]=Je.useState(null),[i,o]=Je.useState(!0);return Je.useEffect(()=>{e||"leaderboard"===s||n("leaderboard")},[e]),Je.useEffect(()=>{const t=async()=>{if(e)try{await Iv.getUserPortfolio();const e=await Iv.getTradingMetrics();a(e)}catch(t){}finally{o(!1)}else o(!1)};t();const s=setInterval(t,3e4),n=()=>t();return"undefined"!=typeof window&&window.addEventListener("portfolio-updated",n),()=>{clearInterval(s),"undefined"!=typeof window&&window.removeEventListener("portfolio-updated",n)}},[e]),X.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[X.jsx(Iy,{children:r?X.jsx(Ry,{metrics:r}):null}),X.jsxs(cx,{value:s,onValueChange:n,className:"w-full",children:[X.jsxs(dx,{className:`grid w-full ${e?t?"grid-cols-3":"grid-cols-4":"grid-cols-1"} max-w-2xl`,children:[e&&X.jsxs(X.Fragment,{children:[X.jsxs(ux,{value:"trading",className:"flex items-center gap-2",children:[X.jsx(bs,{className:"w-4 h-4"}),"Trading"]}),!t&&X.jsxs(ux,{value:"predictions",className:"flex items-center gap-2",children:[X.jsx(_s,{className:"w-4 h-4"}),"Predictions"]}),X.jsxs(ux,{value:"portfolio",className:"flex items-center gap-2",children:[X.jsx(an,{className:"w-4 h-4"}),"Portfolio"]})]}),X.jsxs(ux,{value:"leaderboard",className:"flex items-center gap-2",children:[X.jsx(ln,{className:"w-4 h-4"}),"Leaderboard"]})]}),e&&X.jsxs(X.Fragment,{children:[X.jsx(mx,{value:"trading",className:"mt-6",children:X.jsx(Lv,{})}),!t&&X.jsx(mx,{value:"predictions",className:"mt-6",children:X.jsx($v,{})}),X.jsx(mx,{value:"portfolio",className:"mt-6",children:X.jsx(Cy,{metrics:r??void 0})})]}),X.jsx(mx,{value:"leaderboard",className:"mt-6",children:X.jsx(Py,{})})]})]})}function Fy({className:e,...t}){return X.jsx(Re,{"data-slot":"label",className:lx("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function zy({className:e,...t}){return X.jsx("textarea",{"data-slot":"textarea",className:lx("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var By="Radio",[Uy,qy]=J(By),[Wy,$y]=Uy(By),Yy=Je.forwardRef((e,t)=>{const{__scopeRadio:s,name:n,checked:r=!1,required:a,disabled:i,value:o="on",onCheck:l,form:c,...d}=e,[u,m]=Je.useState(null),h=ee(t,e=>m(e)),p=Je.useRef(!1),f=!u||(c||!!u.closest("form"));return X.jsxs(Wy,{scope:s,checked:r,disabled:i,children:[X.jsx(se.button,{type:"button",role:"radio","aria-checked":r,"data-state":Ky(r),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:h,onClick:oe(e.onClick,e=>{r||null==l||l(),f&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})}),f&&X.jsx(Gy,{control:u,bubbles:!p.current,name:n,value:o,checked:r,required:a,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});Yy.displayName=By;var Vy="RadioIndicator",Hy=Je.forwardRef((e,t)=>{const{__scopeRadio:s,forceMount:n,...r}=e,a=$y(Vy,s);return X.jsx(ae,{present:n||a.checked,children:X.jsx(se.span,{"data-state":Ky(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})})});Hy.displayName=Vy;var Gy=e=>{const{control:t,checked:s,bubbles:n=!0,...r}=e,a=Je.useRef(null),i=Ve(s),o=He(t);return Je.useEffect(()=>{const e=a.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==s&&r){const t=new Event("click",{bubbles:n});r.call(e,s),e.dispatchEvent(t)}},[i,s,n]),X.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:a,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ky(e){return e?"checked":"unchecked"}var Qy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Xy="RadioGroup",[Zy,Jy]=J(Xy,[Ge,qy]),eb=Ge(),tb=qy(),[sb,nb]=Zy(Xy),rb=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:s,name:n,defaultValue:r,value:a,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...m}=e,h=eb(s),p=Ke(c),[f,g]=re({prop:a,defaultProp:r,onChange:u});return X.jsx(sb,{scope:s,name:n,required:i,disabled:o,value:f,onValueChange:g,children:X.jsx(Qe,{asChild:!0,...h,orientation:l,dir:p,loop:d,children:X.jsx(se.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:p,...m,ref:t})})})});rb.displayName=Xy;var ab="RadioGroupItem",ib=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:s,disabled:n,...r}=e,a=nb(ab,s),i=a.disabled||n,o=eb(s),l=tb(s),c=Je.useRef(null),d=ee(t,c),u=a.value===r.value,m=Je.useRef(!1);return Je.useEffect(()=>{const e=e=>{Qy.includes(e.key)&&(m.current=!0)},t=()=>m.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),X.jsx(Xe,{asChild:!0,...o,focusable:!i,active:u,children:X.jsx(Yy,{disabled:i,required:a.required,checked:u,...l,...r,name:a.name,ref:d,onCheck:()=>a.onValueChange(r.value),onKeyDown:oe(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:oe(r.onFocus,()=>{var e;m.current&&(null==(e=c.current)||e.click())})})})});ib.displayName=ab;var ob=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:s,...n}=e,r=tb(s);return X.jsx(Hy,{...r,...n,ref:t})});ob.displayName="RadioGroupIndicator";var lb=rb,cb=ib,db=ob;function ub({className:e,...t}){return X.jsx(lb,{"data-slot":"radio-group",className:lx("grid gap-3",e),...t})}function mb({className:e,...t}){return X.jsx(cb,{"data-slot":"radio-group-item",className:lx("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:X.jsx(db,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:X.jsx(Is,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const hb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},pb="https://mskpxebbscvisxcceiwx.supabase.co";const fb=new class{async getAuthToken(){const{data:{session:e}}=await oi.auth.getSession();return(null==e?void 0:e.access_token)||null}async getHTILeaderboard(){var e;const t="false"!==((null==hb?void 0:hb.VITE_ALLOW_POSTGREST_FALLBACK)??"true");try{const{getWorkerBase:t}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>hv);return{getWorkerBase:e}},void 0),s=t(),n=await fetch(`${s}/api/leaderboards/hti`,{method:"GET",headers:{Accept:"application/json"}}),r=await n.json();if(n.ok&&(null==r?void 0:r.ok)){const t=(null==(e=null==r?void 0:r.data)?void 0:e.rows)||[];return{ok:!0,rows:t.map(e=>({season_id:e.season_id||"",user_id:e.user_id,email:e.email||e.username||"Anonymous",points:e.total_points??e.total_score??e.points??0,badges:e.badges||[],last_action_at:e.last_submission||e.updated_at||null})),lastUpdated:(new Date).toISOString()}}}catch{}if(!t)return{ok:!1,error:"WORKER_UNAVAILABLE"};const{data:s}=await oi.from("hti_submissions").select("\n        user_id,\n        points,\n        user_profiles!inner(email)\n      ");if(!s)return{ok:!1,error:"Failed to fetch leaderboard data"};const n=s.reduce((e,t)=>{var s;const n=e[t.user_id]||{user_id:t.user_id,email:(null==(s=t.user_profiles)?void 0:s.email)||"Anonymous",points:0,badges:[]};return n.points+=t.points||0,e[t.user_id]=n,e},{});return{ok:!0,rows:Object.values(n).sort((e,t)=>t.points-e.points).slice(0,100),lastUpdated:(new Date).toISOString()}}async getADXLeaderboard(){var e;const t="false"!==((null==hb?void 0:hb.VITE_ALLOW_POSTGREST_FALLBACK)??"true");try{const{getWorkerBase:t}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>hv);return{getWorkerBase:e}},void 0),s=t(),n=await fetch(`${s}/api/leaderboards/adx`,{method:"GET",headers:{Accept:"application/json"}}),r=await n.json();if(n.ok&&(null==r?void 0:r.ok)&&(null==(e=null==r?void 0:r.data)?void 0:e.rows))return{ok:!0,rows:r.data.rows,lastUpdated:r.data.generated_at||(new Date).toISOString()}}catch{}if(!t)return{ok:!1,error:"WORKER_UNAVAILABLE"};const{data:s}=await oi.from("seasons").select("id").eq("status","active").single();if(!s)return{ok:!1,error:"No active season found"};const{data:n}=await oi.from("adx_portfolios").select("\n        *,\n        user_profiles!inner(username, email)\n      ").eq("season_id",s.id);if(!n)return{ok:!1,error:"Failed to fetch portfolios"};return{ok:!0,rows:n.map(e=>{var t,s;return{rank:0,user_id:e.user_id,display_name:(null==(t=e.user_profiles)?void 0:t.username)||(null==(s=e.user_profiles)?void 0:s.email)||"Anonymous",total_pnl:(e.current_value||e.starting_cash)-e.starting_cash,total_value:e.current_value||e.starting_cash,win_rate:0,num_trades:0}}).sort((e,t)=>t.total_pnl-e.total_pnl).map((e,t)=>({...e,rank:t+1})).slice(0,100),lastUpdated:(new Date).toISOString()}}async getHTIQuestions(){const e=(new Date).toISOString(),{data:{user:t}}=await oi.auth.getUser(),{data:s,error:n}=await oi.from("hti_questions").select("id, season_id, n, kind, choices, correct, release_at, is_active, points, title, tags").eq("is_active",!0).lte("release_at",e).order("n",{ascending:!0});if(n)return{ok:!1,error:n.message};let r=[];if(t){const{data:e}=await oi.from("hti_submissions").select("question_id").eq("user_id",t.id);e&&(r=e.map(e=>e.question_id))}return{ok:!0,questions:(null==s?void 0:s.map(e=>{let t="",s=[],n=e.choices;if("string"==typeof e.choices)try{n=JSON.parse(e.choices)}catch(vj){}n&&"object"==typeof n&&(n.question?(t=n.question,s=n.options||[]):n.text?(t=n.text,s=n.options||[]):Array.isArray(n)&&(s=n,t=`Question ${e.n}`));let a=e.correct;if("string"==typeof e.correct)try{a=JSON.parse(e.correct)}catch(vj){}return{...e,answered:r.includes(e.id),locked:!1,points:e.points??10,question_text:t,title:e.title||null,choices:s,correct_answer:a}}))||[]}}async submitHTIAnswer(e,t,s){const n=await this.getAuthToken();if(!n)return{ok:!1,error:"Authentication required"};let r;r="number"==typeof t&&Number.isInteger(t)&&t>=0&&t<20?{value:{index:t}}:"number"==typeof t||"string"==typeof t?{value:t}:"object"==typeof t&&null!==t?t:{value:t};const a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)?"dev-bypass-token":(null==s?void 0:s.turnstileToken)||void 0,i=await fetch(`${pb}/functions/v1/hti_submit_answer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({questionId:e,answer:r,turnstileToken:a})}),o=await i.json();return o.ok&&o.data?{ok:!0,data:{isCorrect:o.data.is_correct,points:o.data.points}}:o}async getADXPortfolio(){const{data:{user:e}}=await oi.auth.getUser();if(!e)return{ok:!1,error:"Authentication required"};const{data:t}=await oi.from("seasons").select("id").eq("status","active").single(),{data:s,error:n}=await oi.from("adx_portfolios").select("*").eq("user_id",e.id).eq("season_id",null==t?void 0:t.id).maybeSingle();let r=[];if(s){const{data:e}=await oi.from("adx_positions").select("*").eq("portfolio_id",s.id);r=e||[]}const{data:a}=await oi.from("adx_revenue_predictions").select("*").eq("user_id",e.id);return{ok:!n||"PGRST116"===n.code,data:{portfolio:s||{cash:1e5,total_value:1e5},positions:r||[],predictions:a||[]},error:n&&"PGRST116"!==n.code?n.message:void 0}}async placeADXOrder(e){const t=await this.getAuthToken();if(!t)return{ok:!1,error:"Authentication required"};return(await fetch(`${pb}/functions/v1/adx_place_order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)})).json()}async saveADXPrediction(e){const t=await this.getAuthToken();if(!t)return{ok:!1,error:"Authentication required"};const{data:s}=await oi.from("seasons").select("id").eq("status","active").single();if(!s)return{ok:!1,error:"No active season"};const n={seasonId:s.id,symbol:e.ticker,value:e.prediction,turnstileToken:void 0};return(await fetch(`${pb}/functions/v1/adx_save_prediction`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(n)})).json()}async isAdmin(){const{data:{user:e}}=await oi.auth.getUser();if(!e)return!1;const{data:t}=await oi.from("user_profiles").select("is_admin").eq("user_id",e.id).single();return(null==t?void 0:t.is_admin)||!1}async getAdminQuestions(){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};const{data:e,error:t}=await oi.from("hti_questions").select("*").order("n",{ascending:!0});return{ok:!t,data:e||[],error:null==t?void 0:t.message}}async saveAdminQuestion(e){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};if(e.id){const{error:t}=await oi.from("hti_questions").update(e).eq("id",e.id);return{ok:!t,error:null==t?void 0:t.message}}{const{error:t}=await oi.from("hti_questions").insert(e);return{ok:!t,error:null==t?void 0:t.message}}}async deleteAdminQuestion(e){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};const{error:t}=await oi.from("hti_questions").delete().eq("id",e);return{ok:!t,error:null==t?void 0:t.message}}},{entries:gb,setPrototypeOf:xb,isFrozen:vb,getPrototypeOf:yb,getOwnPropertyDescriptor:bb}=Object;
/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */let{freeze:wb,seal:jb,create:Nb}=Object,{apply:kb,construct:Sb}="undefined"!=typeof Reflect&&Reflect;wb||(wb=function(e){return e}),jb||(jb=function(e){return e}),kb||(kb=function(e,t,s){return e.apply(t,s)}),Sb||(Sb=function(e,t){return new e(...t)});const _b=Ub(Array.prototype.forEach),Eb=Ub(Array.prototype.lastIndexOf),Tb=Ub(Array.prototype.pop),Db=Ub(Array.prototype.push),Ab=Ub(Array.prototype.splice),Mb=Ub(String.prototype.toLowerCase),Cb=Ub(String.prototype.toString),Ob=Ub(String.prototype.match),Pb=Ub(String.prototype.replace),Ib=Ub(String.prototype.indexOf),Rb=Ub(String.prototype.trim),Lb=Ub(Object.prototype.hasOwnProperty),Fb=Ub(RegExp.prototype.test),zb=(Bb=TypeError,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Sb(Bb,t)});var Bb;function Ub(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return kb(e,t,n)}}function qb(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mb;xb&&xb(e,null);let n=t.length;for(;n--;){let r=t[n];if("string"==typeof r){const e=s(r);e!==r&&(vb(t)||(t[n]=e),r=e)}e[r]=!0}return e}function Wb(e){for(let t=0;t<e.length;t++){Lb(e,t)||(e[t]=null)}return e}function $b(e){const t=Nb(null);for(const[s,n]of gb(e)){Lb(e,s)&&(Array.isArray(n)?t[s]=Wb(n):n&&"object"==typeof n&&n.constructor===Object?t[s]=$b(n):t[s]=n)}return t}function Yb(e,t){for(;null!==e;){const s=bb(e,t);if(s){if(s.get)return Ub(s.get);if("function"==typeof s.value)return Ub(s.value)}e=yb(e)}return function(){return null}}const Vb=wb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Hb=wb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gb=wb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Kb=wb(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qb=wb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Xb=wb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zb=wb(["#text"]),Jb=wb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ew=wb(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tw=wb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sw=wb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nw=jb(/\{\{[\w\W]*|[\w\W]*\}\}/gm),rw=jb(/<%[\w\W]*|[\w\W]*%>/gm),aw=jb(/\$\{[\w\W]*/gm),iw=jb(/^data-[\-\w.\u00B7-\uFFFF]+$/),ow=jb(/^aria-[\-\w]+$/),lw=jb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cw=jb(/^(?:\w+script|data):/i),dw=jb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uw=jb(/^html$/i),mw=jb(/^[a-z][.\w]*(-[.\w]+)+$/i);var hw=Object.freeze({__proto__:null,ARIA_ATTR:ow,ATTR_WHITESPACE:dw,CUSTOM_ELEMENT:mw,DATA_ATTR:iw,DOCTYPE_NAME:uw,ERB_EXPR:rw,IS_ALLOWED_URI:lw,IS_SCRIPT_OR_DATA:cw,MUSTACHE_EXPR:nw,TMPLIT_EXPR:aw});const pw=1,fw=3,gw=7,xw=8,vw=9;var yw=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const s=t=>e(t);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==vw||!t.Element)return s.isSupported=!1,s;let{document:n}=t;const r=n,a=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:h,trustedTypes:p}=t,f=c.prototype,g=Yb(f,"cloneNode"),x=Yb(f,"remove"),v=Yb(f,"nextSibling"),y=Yb(f,"childNodes"),b=Yb(f,"parentNode");if("function"==typeof o){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let w,j="";const{implementation:N,createNodeIterator:k,createDocumentFragment:S,getElementsByTagName:_}=n,{importNode:E}=r;let T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};s.isSupported="function"==typeof gb&&"function"==typeof b&&N&&void 0!==N.createHTMLDocument;const{MUSTACHE_EXPR:D,ERB_EXPR:A,TMPLIT_EXPR:M,DATA_ATTR:C,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:I,CUSTOM_ELEMENT:R}=hw;let{IS_ALLOWED_URI:L}=hw,F=null;const z=qb({},[...Vb,...Hb,...Gb,...Qb,...Zb]);let B=null;const U=qb({},[...Jb,...ew,...tw,...sw]);let q=Object.seal(Nb(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,$=null,Y=!0,V=!0,H=!1,G=!0,K=!1,Q=!0,X=!1,Z=!1,J=!1,ee=!1,te=!1,se=!1,ne=!0,re=!1,ae=!0,ie=!1,oe={},le=null;const ce=qb({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const ue=qb({},["audio","video","img","source","image","track"]);let me=null;const he=qb({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let xe=ge,ve=!1,ye=null;const be=qb({},[pe,fe,ge],Cb);let we=qb({},["mi","mo","mn","ms","mtext"]),je=qb({},["annotation-xml"]);const Ne=qb({},["title","style","font","a","script"]);let ke=null;const Se=["application/xhtml+xml","text/html"];let _e=null,Ee=null;const Te=n.createElement("form"),De=function(e){return e instanceof RegExp||e instanceof Function},Ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ee||Ee!==e){if(e&&"object"==typeof e||(e={}),e=$b(e),ke=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,_e="application/xhtml+xml"===ke?Cb:Mb,F=Lb(e,"ALLOWED_TAGS")?qb({},e.ALLOWED_TAGS,_e):z,B=Lb(e,"ALLOWED_ATTR")?qb({},e.ALLOWED_ATTR,_e):U,ye=Lb(e,"ALLOWED_NAMESPACES")?qb({},e.ALLOWED_NAMESPACES,Cb):be,me=Lb(e,"ADD_URI_SAFE_ATTR")?qb($b(he),e.ADD_URI_SAFE_ATTR,_e):he,de=Lb(e,"ADD_DATA_URI_TAGS")?qb($b(ue),e.ADD_DATA_URI_TAGS,_e):ue,le=Lb(e,"FORBID_CONTENTS")?qb({},e.FORBID_CONTENTS,_e):ce,W=Lb(e,"FORBID_TAGS")?qb({},e.FORBID_TAGS,_e):$b({}),$=Lb(e,"FORBID_ATTR")?qb({},e.FORBID_ATTR,_e):$b({}),oe=!!Lb(e,"USE_PROFILES")&&e.USE_PROFILES,Y=!1!==e.ALLOW_ARIA_ATTR,V=!1!==e.ALLOW_DATA_ATTR,H=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,Q=!1!==e.SAFE_FOR_XML,X=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,se=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,re=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||lw,xe=e.NAMESPACE||ge,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,je=e.HTML_INTEGRATION_POINTS||je,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&De(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&De(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(V=!1),te&&(ee=!0),oe&&(F=qb({},Zb),B=[],!0===oe.html&&(qb(F,Vb),qb(B,Jb)),!0===oe.svg&&(qb(F,Hb),qb(B,ew),qb(B,sw)),!0===oe.svgFilters&&(qb(F,Gb),qb(B,ew),qb(B,sw)),!0===oe.mathMl&&(qb(F,Qb),qb(B,tw),qb(B,sw))),e.ADD_TAGS&&(F===z&&(F=$b(F)),qb(F,e.ADD_TAGS,_e)),e.ADD_ATTR&&(B===U&&(B=$b(B)),qb(B,e.ADD_ATTR,_e)),e.ADD_URI_SAFE_ATTR&&qb(me,e.ADD_URI_SAFE_ATTR,_e),e.FORBID_CONTENTS&&(le===ce&&(le=$b(le)),qb(le,e.FORBID_CONTENTS,_e)),ae&&(F["#text"]=!0),X&&qb(F,["html","head","body"]),F.table&&(qb(F,["tbody"]),delete W.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw zb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw zb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,j=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let s=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(s=t.getAttribute(n));const r="dompurify"+(s?"#"+s:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(a){return null}}(p,a)),null!==w&&"string"==typeof j&&(j=w.createHTML(""));wb&&wb(e),Ee=e}},Me=qb({},[...Hb,...Gb,...Kb]),Ce=qb({},[...Qb,...Xb]),Oe=function(e){Db(s.removed,{element:e});try{b(e).removeChild(e)}catch(t){x(e)}},Pe=function(e,t){try{Db(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(n){Db(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Oe(t)}catch(n){}else try{t.setAttribute(e,"")}catch(n){}},Ie=function(e){let t=null,s=null;if(J)e="<remove></remove>"+e;else{const t=Ob(e,/^[\r\n\t ]+/);s=t&&t[0]}"application/xhtml+xml"===ke&&xe===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=w?w.createHTML(e):e;if(xe===ge)try{t=(new h).parseFromString(r,ke)}catch(i){}if(!t||!t.documentElement){t=N.createDocument(xe,"template",null);try{t.documentElement.innerHTML=ve?j:r}catch(i){}}const a=t.body||t.documentElement;return e&&s&&a.insertBefore(n.createTextNode(s),a.childNodes[0]||null),xe===ge?_.call(t,X?"html":"body")[0]:X?t.documentElement:a},Re=function(e){return k.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Le=function(e){return e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Fe=function(e){return"function"==typeof l&&e instanceof l};function ze(e,t,n){_b(e,e=>{e.call(s,t,n,Ee)})}const Be=function(e){let t=null;if(ze(T.beforeSanitizeElements,e,null),Le(e))return Oe(e),!0;const n=_e(e.nodeName);if(ze(T.uponSanitizeElement,e,{tagName:n,allowedTags:F}),Q&&e.hasChildNodes()&&!Fe(e.firstElementChild)&&Fb(/<[/\w!]/g,e.innerHTML)&&Fb(/<[/\w!]/g,e.textContent))return Oe(e),!0;if(e.nodeType===gw)return Oe(e),!0;if(Q&&e.nodeType===xw&&Fb(/<[/\w]/g,e.data))return Oe(e),!0;if(!F[n]||W[n]){if(!W[n]&&qe(n)){if(q.tagNameCheck instanceof RegExp&&Fb(q.tagNameCheck,n))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(n))return!1}if(ae&&!le[n]){const t=b(e)||e.parentNode,s=y(e)||e.childNodes;if(s&&t){for(let n=s.length-1;n>=0;--n){const r=g(s[n],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,v(e))}}}return Oe(e),!0}return e instanceof c&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:xe,tagName:"template"});const s=Mb(e.tagName),n=Mb(t.tagName);return!!ye[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===ge?"svg"===s:t.namespaceURI===pe?"svg"===s&&("annotation-xml"===n||we[n]):Boolean(Me[s]):e.namespaceURI===pe?t.namespaceURI===ge?"math"===s:t.namespaceURI===fe?"math"===s&&je[n]:Boolean(Ce[s]):e.namespaceURI===ge?!(t.namespaceURI===fe&&!je[n])&&!(t.namespaceURI===pe&&!we[n])&&!Ce[s]&&(Ne[s]||!Me[s]):!("application/xhtml+xml"!==ke||!ye[e.namespaceURI]))}(e)?(Oe(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!Fb(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===fw&&(t=e.textContent,_b([D,A,M],e=>{t=Pb(t,e," ")}),e.textContent!==t&&(Db(s.removed,{element:e.cloneNode()}),e.textContent=t)),ze(T.afterSanitizeElements,e,null),!1):(Oe(e),!0)},Ue=function(e,t,s){if(ne&&("id"===t||"name"===t)&&(s in n||s in Te))return!1;if(V&&!$[t]&&Fb(C,t));else if(Y&&Fb(O,t));else if(!B[t]||$[t]){if(!(qe(e)&&(q.tagNameCheck instanceof RegExp&&Fb(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&Fb(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Fb(q.tagNameCheck,s)||q.tagNameCheck instanceof Function&&q.tagNameCheck(s))))return!1}else if(me[t]);else if(Fb(L,Pb(s,I,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ib(s,"data:")||!de[e]){if(H&&!Fb(P,Pb(s,I,"")));else if(s)return!1}else;return!0},qe=function(e){return"annotation-xml"!==e&&Ob(e,R)},We=function(e){ze(T.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Le(e))return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let r=t.length;for(;r--;){const i=t[r],{name:o,namespaceURI:l,value:c}=i,d=_e(o),u=c;let m="value"===o?u:Rb(u);if(n.attrName=d,n.attrValue=m,n.keepAttr=!0,n.forceKeepAttr=void 0,ze(T.uponSanitizeAttribute,e,n),m=n.attrValue,!re||"id"!==d&&"name"!==d||(Pe(o,e),m="user-content-"+m),Q&&Fb(/((--!?|])>)|<\/(style|title)/i,m)){Pe(o,e);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){Pe(o,e);continue}if(!G&&Fb(/\/>/i,m)){Pe(o,e);continue}K&&_b([D,A,M],e=>{m=Pb(m,e," ")});const h=_e(e.nodeName);if(Ue(h,d,m)){if(w&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(l);else switch(p.getAttributeType(h,d)){case"TrustedHTML":m=w.createHTML(m);break;case"TrustedScriptURL":m=w.createScriptURL(m)}if(m!==u)try{l?e.setAttributeNS(l,o,m):e.setAttribute(o,m),Le(e)?Oe(e):Tb(s.removed)}catch(a){Pe(o,e)}}else Pe(o,e)}ze(T.afterSanitizeAttributes,e,null)},$e=function e(t){let s=null;const n=Re(t);for(ze(T.beforeSanitizeShadowDOM,t,null);s=n.nextNode();)ze(T.uponSanitizeShadowNode,s,null),Be(s),We(s),s.content instanceof i&&e(s.content);ze(T.afterSanitizeShadowDOM,t,null)};return s.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,a=null,o=null,c=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Fe(e)){if("function"!=typeof e.toString)throw zb("toString is not a function");if("string"!=typeof(e=e.toString()))throw zb("dirty is not a string, aborting")}if(!s.isSupported)return e;if(Z||Ae(t),s.removed=[],"string"==typeof e&&(ie=!1),ie){if(e.nodeName){const t=_e(e.nodeName);if(!F[t]||W[t])throw zb("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)n=Ie("\x3c!----\x3e"),a=n.ownerDocument.importNode(e,!0),a.nodeType===pw&&"BODY"===a.nodeName||"HTML"===a.nodeName?n=a:n.appendChild(a);else{if(!ee&&!K&&!X&&-1===e.indexOf("<"))return w&&se?w.createHTML(e):e;if(n=Ie(e),!n)return ee?null:se?j:""}n&&J&&Oe(n.firstChild);const d=Re(ie?e:n);for(;o=d.nextNode();)Be(o),We(o),o.content instanceof i&&$e(o.content);if(ie)return e;if(ee){if(te)for(c=S.call(n.ownerDocument);n.firstChild;)c.appendChild(n.firstChild);else c=n;return(B.shadowroot||B.shadowrootmode)&&(c=E.call(r,c,!0)),c}let u=X?n.outerHTML:n.innerHTML;return X&&F["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&Fb(uw,n.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+u),K&&_b([D,A,M],e=>{u=Pb(u,e," ")}),w&&se?w.createHTML(u):u},s.setConfig=function(){Ae(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Z=!0},s.clearConfig=function(){Ee=null,Z=!1},s.isValidAttribute=function(e,t,s){Ee||Ae({});const n=_e(e),r=_e(t);return Ue(n,r,s)},s.addHook=function(e,t){"function"==typeof t&&Db(T[e],t)},s.removeHook=function(e,t){if(void 0!==t){const s=Eb(T[e],t);return-1===s?void 0:Ab(T[e],s,1)[0]}return Tb(T[e])},s.removeHooks=function(e){T[e]=[]},s.removeAllHooks=function(){T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},s}();function bw(e){if(!e||"string"!=typeof e)return"";try{return yw.sanitize(e,{ALLOWED_TAGS:["b","strong","i","em","u","s","sub","sup","br","p","span","ul","ol","li","small"],ALLOWED_ATTR:["class","style"]})}catch{return""}}var ww={};!function e(t,s,n,r){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix;function o(){}function l(e){var n=s.exports.Promise,r=void 0!==n?n:t.Promise;return"function"==typeof r?new r(e):(e(o,o),null)}var c,d,u,m,h,p,f=function(e,t){return{transform:function(s){if(e)return s;if(t.has(s))return t.get(s);var n=new OffscreenCanvas(s.width,s.height);return n.getContext("2d").drawImage(s,0,0),t.set(s,n),n},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),s=e.getContext("2d");s.fillRect(0,0,1,1);var n=e.transferToImageBitmap();try{s.createPattern(n,"no-repeat")}catch(vj){return!1}return!0}(),new Map),g=(u=Math.floor(1e3/60),m={},h=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(c=function(e){var t=Math.random();return m[t]=requestAnimationFrame(function s(n){h===n||h+u-1<n?(h=n,delete m[t],e()):m[t]=requestAnimationFrame(s)}),t},d=function(e){m[e]&&cancelAnimationFrame(m[e])}):(c=function(e){return setTimeout(e,u)},d=function(e){return clearTimeout(e)}),{frame:c,cancel:d}),x=function(){var t,s,r={};return function(){if(t)return t;if(!n&&a){var i=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([i])))}catch(vj){return void 0!==typeof console&&console.warn,null}!function(e){function t(t,s){e.postMessage({options:t||{},callback:s})}e.init=function(t){var s=t.transferControlToOffscreen();e.postMessage({canvas:s},[s])},e.fire=function(n,a,i){if(s)return t(n,null),s;var o=Math.random().toString(36).slice(2);return s=l(function(a){function l(t){t.data.callback===o&&(delete r[o],e.removeEventListener("message",l),s=null,f.clear(),i(),a())}e.addEventListener("message",l),t(n,o),r[o]=l.bind(null,{data:{callback:o}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),r)r[t](),delete r[t]}}(t)}return t}}(),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(e,t,s){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:v[t],s)}function b(e){return e<0?0:Math.floor(e)}function w(e,t){return Math.floor(Math.random()*(t-e))+e}function j(e){return parseInt(e,16)}function N(e){return e.map(k)}function k(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:j(t.substring(0,2)),g:j(t.substring(2,4)),b:j(t.substring(4,6))}}function S(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function _(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function E(e){var t=e.angle*(Math.PI/180),s=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*s-Math.random()*s),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function T(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var s=t.tick++/t.totalTicks,n=t.x+t.random*t.tiltCos,r=t.y+t.random*t.tiltSin,a=t.wobbleX+t.random*t.tiltCos,o=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-s)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,s,n,r,a,i){var o=new Path2D(e),l=new Path2D;l.addPath(o,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(i)*r,Math.sin(i)*r,-Math.sin(i)*a,Math.cos(i)*a,s,n])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(a-n),.1*Math.abs(o-r),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(a-n),d=.1*Math.abs(o-r),u=t.shape.bitmap.width*t.scalar,m=t.shape.bitmap.height*t.scalar,h=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*d,Math.cos(l)*d,t.x,t.y]);h.multiplySelf(new DOMMatrix(t.shape.matrix));var p=e.createPattern(f.transform(t.shape.bitmap),"no-repeat");p.setTransform(h),e.globalAlpha=1-s,e.fillStyle=p,e.fillRect(t.x-u/2,t.y-m/2,u,m),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(a-n)*t.ovalScalar,Math.abs(o-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,s,n,r,a,i,o,l){e.save(),e.translate(t,s),e.rotate(a),e.scale(n,r),e.arc(0,0,1,i,o,l),e.restore()}(e,t.x,t.y,Math.abs(a-n)*t.ovalScalar,Math.abs(o-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,x=4*t.scalar,v=8*t.scalar,y=t.x,b=t.y,w=5,j=Math.PI/w;w--;)y=t.x+Math.cos(g)*v,b=t.y+Math.sin(g)*v,e.lineTo(y,b),g+=j,y=t.x+Math.cos(g)*x,b=t.y+Math.sin(g)*x,e.lineTo(y,b),g+=j;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(r)),e.lineTo(Math.floor(a),Math.floor(o)),e.lineTo(Math.floor(n),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function D(e,s){var i,o=!e,c=!!y(s||{},"resize"),d=!1,u=y(s,"disableForReducedMotion",Boolean),m=a&&!!y(s||{},"useWorker")?x():null,h=o?S:_,p=!(!e||!m)&&!!e.__confetti_initialized,v="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function j(t,s,a){for(var o=y(t,"particleCount",b),c=y(t,"angle",Number),d=y(t,"spread",Number),u=y(t,"startVelocity",Number),m=y(t,"decay",Number),p=y(t,"gravity",Number),x=y(t,"drift",Number),v=y(t,"colors",N),j=y(t,"ticks",Number),k=y(t,"shapes"),S=y(t,"scalar"),_=!!y(t,"flat"),D=function(e){var t=y(e,"origin",Object);return t.x=y(t,"x",Number),t.y=y(t,"y",Number),t}(t),A=o,M=[],C=e.width*D.x,O=e.height*D.y;A--;)M.push(E({x:C,y:O,angle:c,spread:d,startVelocity:u,color:v[A%v.length],shape:k[w(0,k.length)],ticks:j,decay:m,gravity:p,drift:x,scalar:S,flat:_}));return i?i.addFettis(M):(i=function(e,t,s,a,i){var o,c,d=t.slice(),u=e.getContext("2d"),m=l(function(t){function l(){o=c=null,u.clearRect(0,0,a.width,a.height),f.clear(),i(),t()}o=g.frame(function t(){!n||a.width===r.width&&a.height===r.height||(a.width=e.width=r.width,a.height=e.height=r.height),a.width||a.height||(s(e),a.width=e.width,a.height=e.height),u.clearRect(0,0,a.width,a.height),(d=d.filter(function(e){return T(u,e)})).length?o=g.frame(t):l()}),c=l});return{addFettis:function(e){return d=d.concat(e),m},canvas:e,promise:m,reset:function(){o&&g.cancel(o),c&&c()}}}(e,M,h,s,a),i.promise)}function k(s){var n=u||y(s,"disableForReducedMotion",Boolean),r=y(s,"zIndex",Number);if(n&&v)return l(function(e){e()});o&&i?e=i.canvas:o&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(r),document.body.appendChild(e)),c&&!p&&h(e);var a={width:e.width,height:e.height};function f(){if(m){var t={getBoundingClientRect:function(){if(!o)return e.getBoundingClientRect()}};return h(t),void m.postMessage({resize:{width:t.width,height:t.height}})}a.width=a.height=null}function g(){i=null,c&&(d=!1,t.removeEventListener("resize",f)),o&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,p=!1)}return m&&!p&&m.init(e),p=!0,m&&(e.__confetti_initialized=!0),c&&!d&&(d=!0,t.addEventListener("resize",f,!1)),m?m.fire(s,a,g):j(s,a,g)}return k.reset=function(){m&&m.reset(),i&&i.reset()},k}function A(){return p||(p=D(null,{useWorker:!0,resize:!0})),p}s.exports=function(){return A().apply(this,arguments)},s.exports.reset=function(){A().reset()},s.exports.create=D,s.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,s;"string"==typeof e?t=e:(t=e.path,s=e.matrix);var n=new Path2D(t),r=document.createElement("canvas").getContext("2d");if(!s){for(var a,o,l=1e3,c=l,d=l,u=0,m=0,h=0;h<l;h+=2)for(var p=0;p<l;p+=2)r.isPointInPath(n,h,p,"nonzero")&&(c=Math.min(c,h),d=Math.min(d,p),u=Math.max(u,h),m=Math.max(m,p));a=u-c,o=m-d;var f=Math.min(10/a,10/o);s=[f,0,0,f,-Math.round(a/2+c)*f,-Math.round(o/2+d)*f]}return{type:"path",path:t,matrix:s}},s.exports.shapeFromText=function(e){var t,s=1,n="#000000",r='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,s="scalar"in e?e.scalar:s,r="fontFamily"in e?e.fontFamily:r,n="color"in e?e.color:n);var a=10*s,i=a+"px "+r,o=new OffscreenCanvas(a,a),l=o.getContext("2d");l.font=i;var c=l.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),u=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),m=c.actualBoundingBoxLeft+2,h=c.actualBoundingBoxAscent+2;d+=4,u+=4,(l=(o=new OffscreenCanvas(d,u)).getContext("2d")).font=i,l.fillStyle=n,l.fillText(t,m,h);var p=1/s;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[p,0,0,p,-d*p/2,-u*p/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),ww,!1);const jw=ww.exports;function Nw({question:e,onSubmitAnswer:t}){const[s,n]=Je.useState(""),[r,a]=Je.useState(""),[i,o]=Je.useState(""),[l,c]=Je.useState(e.answered||!1);return X.jsxs(Cx,{className:"overflow-hidden",children:[X.jsxs(Ox,{children:[X.jsxs("div",{className:"flex items-center justify-between mb-2",children:[X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.tags&&e.tags.map((e,t)=>X.jsx(px,{variant:"outline",className:"text-xs capitalize",children:e},t)),X.jsx(px,{variant:"secondary",className:"text-xs",children:e.responseType.replace("-"," ")})]}),X.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[X.jsx(ln,{className:"w-3 h-3"}),e.points," pts"]})]}),X.jsx(Px,{className:"text-lg",children:e.title})]}),X.jsxs(Ix,{className:"space-y-4",children:[X.jsx("div",{className:"p-4 bg-muted/20 rounded-lg",children:X.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:bw(e.question)}})}),l||e.answered?X.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[X.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm mb-2",children:[X.jsx(Os,{className:"w-4 h-4"}),"Answer submitted successfully!"]}),X.jsx("p",{className:"text-sm text-muted-foreground",children:"Your answer is being reviewed and will be scored shortly."})]}):X.jsxs("div",{className:"space-y-3",children:[(()=>{var t;switch(e.responseType){case"text":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Fy,{htmlFor:`answer-${e.id}`,className:"text-sm",children:"Your Answer"}),X.jsx(zy,{id:`answer-${e.id}`,placeholder:"Type your answer here...",value:s,onChange:e=>n(e.target.value),className:"mt-1 min-h-32"})]})});case"number":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Fy,{htmlFor:`answer-${e.id}`,className:"text-sm",children:"Your Answer (Number)"}),X.jsx(Fv,{id:`answer-${e.id}`,type:"number",placeholder:"Enter a number...",value:r,onChange:e=>a(e.target.value),className:"mt-1"})]})});case"multiple-choice":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Fy,{className:"text-sm",children:"Select your answer:"}),X.jsx(ub,{value:i,onValueChange:o,className:"mt-2",children:null==(t=e.multipleChoiceOptions)?void 0:t.map((e,t)=>X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(mb,{value:e,id:`option-${t}`,className:"border-2 border-muted-foreground/30 data-[state=checked]:border-primary data-[state=checked]:bg-primary"}),X.jsx(Fy,{htmlFor:`option-${t}`,className:"text-sm cursor-pointer",children:e})]},t))})]})});default:return null}})(),X.jsx(Lx,{onClick:()=>{let n="";switch(e.responseType){case"text":n=s.trim();break;case"number":n=parseFloat(r);break;case"multiple-choice":n=i}let a=!1;"text"===e.responseType&&"string"==typeof n&&n.length>0?a=!0:"number"!==e.responseType||"number"!=typeof n||isNaN(n)?"multiple-choice"===e.responseType&&""!==n&&(a=!0):a=!0,a&&(t(e.id,n),c(!0))},disabled:!(()=>{switch(e.responseType){case"text":return s.trim().length>0;case"number":return r.trim().length>0&&!isNaN(parseFloat(r));case"multiple-choice":return i.length>0;default:return!1}})(),className:"w-full",children:"Submit Answer"})]})]})]})}function kw({userId:e}){const[t,s]=Je.useState({totalQuestions:0,totalPoints:0,rank:0}),[n,r]=Je.useState(!0);return Je.useEffect(()=>{(async()=>{if(e)try{const{data:n,error:a}=await oi.from("user_profiles").select("hti_score").eq("user_id",e).single();if(a)return void r(!1);const{count:i,error:o}=await oi.from("hti_submissions").select("*",{count:"exact",head:!0}).eq("user_id",e);let l=0,c=null;try{const t=await fb.getHTILeaderboard();if((null==t?void 0:t.ok)&&Array.isArray(t.rows)){const s=t.rows,n=s.findIndex(t=>t.user_id===e);n>=0&&(l=n+1,c=Number(s[n].points||0))}}catch(t){}s({totalQuestions:i||0,totalPoints:null!=c?c:(null==n?void 0:n.hti_score)||0,rank:l})}catch(n){}finally{r(!1)}else r(!1)})()},[e]),n?X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6",children:[X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsx("div",{className:"h-16 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"})})}),X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsx("div",{className:"h-16 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"})})})]}):X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6",children:[X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(ln,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Points"}),X.jsx("div",{className:"font-semibold",children:t.totalPoints}),X.jsx("div",{className:"text-xs text-muted-foreground",children:t.rank>0?`Rank #${t.rank}`:"Unranked"})]})]})})}),X.jsx(Cx,{children:X.jsx(Ix,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Hs,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Questions"}),X.jsx("div",{className:"font-semibold",children:t.totalQuestions}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"answered"})]})]})})})]})}function Sw(){const{user:e}=fi(),[t,s]=Je.useState(e?"practice":"leaderboard"),[n,r]=Je.useState("all"),[a,i]=Je.useState("all");Je.useState(new Map);const[o,l]=Je.useState([]),[c,d]=Je.useState([]),[u,m]=Je.useState([]),[h,p]=Je.useState(!0);Je.useEffect(()=>{(async()=>{p(!0);try{const t=await fb.getHTIQuestions();if(t.ok&&t.questions){const e=t.questions.map((e,t)=>{const s=e.question_text||"No question text available",n=e.choices||[];let r,a="text";return"mcq"===e.kind?a="multiple-choice":"number"===e.kind?a="number":"string"===e.kind&&(a="text"),"mcq"===e.kind&&n&&n.length>0&&(r=n.map(e=>"object"==typeof e&&e.label?e.label:String(e))),{id:e.id,category:"technical",difficulty:e.points>=20?"hard":e.points>=15?"medium":"easy",title:e.title&&String(e.title).trim().length>0?String(e.title):`Question ${e.n}`,question:s,responseType:a,correctAnswer:e.correct_answer,multipleChoiceOptions:r,points:e.points||10,answered:e.answered||!1,tags:Array.isArray(e.tags)?e.tags:[]}});l(e)}const s=await fb.getHTILeaderboard();if(s.ok){const e=(s.rows||[]).map((e,t)=>{const s=0===t?"":1===t?"":2===t?"":null,n=[...s?[{key:`rank-${t+1}`,icon:s,label:`Top ${t+1}`}]:[],...Array.isArray(e.badges)?e.badges.map(e=>{var t,s,n;return{key:`cust-${e.badge_id||(null==(t=e.badge)?void 0:t.slug)||Math.random().toString(36).slice(2)}`,icon:(null==(s=null==e?void 0:e.badge)?void 0:s.icon)||"",label:(null==(n=null==e?void 0:e.badge)?void 0:n.label)||"Custom Badge"}}):[]];return{id:e.user_id,username:e.email||"Anonymous",points:e.points||0,questionsAnswered:0,rank:t+1,badges:n}});d(e)}else d([]);if(e){const{data:t}=await oi.from("hti_submissions").select("*").eq("user_id",e.id);if(t){m(t);const e=new Set(t.map(e=>e.question_id));l(t=>t.map(t=>({...t,answered:e.has(t.id)})))}}}catch(t){Ja.error("Failed to load questions and leaderboard")}finally{p(!1)}})()},[e]);const[f,g]=Je.useState(!1),[x,v]=Je.useState(0),y=tt.useRef(null),b=tt.useRef(null);const w=async(t,s)=>{var n;if(e)try{const r=o.find(e=>e.id===t);if(!r)return;let a;if("multiple-choice"===r.responseType){a=null==(n=r.multipleChoiceOptions)?void 0:n.findIndex(e=>e===s)}else a="number"===r.responseType?Number(s):String(s);const i=await async function(){var e;return"undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?f&&y.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.reset)?await new Promise(e=>{b.current=e;try{window.turnstile.reset(y.current)}catch(t){g(!1),v(e=>e+1),e("")}}):void 0:"dev-bypass-token"}(),c=await fb.submitHTIAnswer(t,a,{turnstileToken:i});if(c.ok&&c.data){const s=c.data.isCorrect||c.data.is_correct,n=c.data.points||0;s?(Ja.success(`Correct! You earned ${n} points`),jw({particleCount:100,spread:70,origin:{y:.6}})):Ja.error("Incorrect answer. Try again next time!"),l(e=>e.map(e=>e.id===t?{...e,answered:!0}:e)),m(r=>[...r,{question_id:t,user_id:e.id,is_correct:s,points:n,submitted_at:(new Date).toISOString()}]);setTimeout(async()=>{const e=await fb.getHTILeaderboard();if(e.ok){const t=(e.rows||[]).map((e,t)=>({id:e.user_id,username:e.email||"Anonymous",points:e.points||0,questionsAnswered:0,rank:t+1,badges:[]}));d(t)}else d([])},500)}else Ja.error(c.error||"Failed to submit answer")}catch(r){Ja.error("Failed to submit answer. Please try again.")}else Ja.error("Please sign in to submit answers")};tt.useEffect(()=>{e||"practice"!==t||s("leaderboard")},[e]);const j=o.filter(e=>{const t="all"===n||e.category===n,s="all"===a||e.responseType===a;return t&&s});return X.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[X.jsx(Iy,{children:X.jsx(kw,{userId:null==e?void 0:e.id})}),X.jsxs(cx,{value:t,onValueChange:s,className:"w-full",children:[X.jsx("div",{className:"sr-only","aria-hidden":"true",children:X.jsx(Cv,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"compact",onLoad:e=>{y.current=e,g(!0)},onVerify:e=>{b.current&&(b.current(e),b.current=null)},onExpire:()=>{},onError:()=>{g(!1),v(e=>e+1)}},`hti-${x}`)}),X.jsxs(dx,{className:`grid w-full ${e?"grid-cols-2":"grid-cols-1"} max-w-md`,children:[e&&X.jsxs(ux,{value:"practice",className:"flex items-center gap-2",children:[X.jsx(Ns,{className:"w-4 h-4"}),"Practice"]}),X.jsxs(ux,{value:"leaderboard",className:"flex items-center gap-2",children:[X.jsx(ln,{className:"w-4 h-4"}),"Leaderboard"]})]}),e&&X.jsx(mx,{value:"practice",className:"mt-6",children:X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Practice Questions"}),X.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All answer submissions are final."})]}),X.jsxs("div",{className:"flex gap-3",children:[X.jsxs(Fx,{value:n,onValueChange:r,children:[X.jsx(Bx,{className:"w-48",children:X.jsx(zx,{placeholder:"Select category"})}),X.jsxs(Ux,{children:[X.jsx(qx,{value:"all",children:"All Categories"}),X.jsx(qx,{value:"technical",children:"Technical"}),X.jsx(qx,{value:"behavioral",children:"Behavioral"}),X.jsx(qx,{value:"system-design",children:"System Design"}),X.jsx(qx,{value:"case-study",children:"Case Study"})]})]}),X.jsxs(Fx,{value:a,onValueChange:i,children:[X.jsx(Bx,{className:"w-48",children:X.jsx(zx,{placeholder:"Response type"})}),X.jsxs(Ux,{children:[X.jsx(qx,{value:"all",children:"All Types"}),X.jsx(qx,{value:"text",children:"Free Text"}),X.jsx(qx,{value:"number",children:"Number"}),X.jsx(qx,{value:"multiple-choice",children:"Multiple Choice"})]})]})]})]}),h?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):j.length>0?X.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map(e=>X.jsx(Nw,{question:e,onSubmitAnswer:w},e.id))}):X.jsx(Cx,{children:X.jsxs(Ix,{className:"p-8 text-center",children:[X.jsx(ks,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),X.jsx("p",{className:"text-muted-foreground",children:"No questions available at the moment. Check back later!"})]})})]})}),X.jsx(mx,{value:"leaderboard",className:"mt-6",children:X.jsxs(Cx,{children:[X.jsx(Ox,{children:X.jsxs(Px,{className:"flex items-center gap-2",children:[X.jsx(ln,{className:"w-5 h-5"}),"Interview Champions"]})}),X.jsx(Ix,{children:h?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):X.jsx("div",{className:"space-y-3",children:c.length>0?c.map(t=>{var s;return X.jsx("div",{className:"p-4 rounded-lg border transition-all hover:shadow-md "+(t.id===(null==e?void 0:e.id)?"bg-primary/5 border-primary/20 ring-2 ring-primary/10":"bg-card"),children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsxs("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted font-semibold",children:["#",t.rank]}),X.jsx("div",{children:X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-semibold",children:t.username}),t.id===(null==e?void 0:e.id)&&X.jsx(px,{variant:"secondary",className:"text-xs",children:"You"}),X.jsx("div",{className:"flex items-center gap-1",children:X.jsx(yy,{children:null==(s=t.badges)?void 0:s.map(e=>X.jsxs(by,{children:[X.jsx(wy,{asChild:!0,children:X.jsx("span",{className:"text-lg cursor-default select-none",children:e.icon})}),X.jsx(jy,{side:"top",children:X.jsx("span",{className:"font-medium",children:e.label})})]},e.key))})})]})})]}),X.jsxs("div",{className:"text-right",children:[X.jsxs("div",{className:"font-semibold",children:[t.points," points"]}),X.jsx("div",{className:"text-sm text-muted-foreground",children:"Total score"})]})]})},t.id)}):X.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No participants yet. Be the first to answer questions!"})})})]})})]})]})}function _w(){const[e,t]=tt.useState({label:null}),{user:s}=fi();if(tt.useEffect(()=>{let e=!1;return(async()=>{try{if(!s)return void t({label:null});const{supabase:r}=await ct(async()=>{const{supabase:e}=await Promise.resolve().then(()=>li);return{supabase:e}},void 0),{data:a}=await r.from("seasons").select("id, code, name, starts_at, ends_at").eq("status","active").maybeSingle();if(e)return;if(!a)return void t({label:null});let i=null;if(a.code&&String(a.code).trim().length>0)i=String(a.code);else if(a.name&&String(a.name).trim().length>0)i=String(a.name);else if(a.starts_at)try{const e=new Date(a.starts_at),t=Math.floor(e.getUTCMonth()/3)+1;i=`Q${t} ${e.getUTCFullYear()}`}catch(n){i=String(a.id)}else i=String(a.id);t({label:i,starts_at:a.starts_at||null,ends_at:a.ends_at||null})}catch(n){t({label:null})}})(),()=>{e=!0}},[s]),!s||!e.label)return null;const n=function(e,t){try{if(!e)return null;const s=new Date(e),n=s.toLocaleString("en-US",{month:"short"}),r=s.getFullYear();if(t){const e=new Date(t),s=e.toLocaleString("en-US",{month:"short"}),a=e.getFullYear();return r===a?`${n}${s} ${r}`:`${n} ${r}  ${s} ${a}`}return`${n} ${r}`}catch{return null}}(e.starts_at,e.ends_at);return X.jsx("div",{className:"relative",children:X.jsxs("div",{title:n?`Season: ${e.label}  ${n}`:`Season: ${e.label}`,className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r from-[#7dcb53]/10 via-[#7dcb53]/5 to-[#7dcb53]/10 text-[#2b5f16] dark:text-[#b7f09a] border border-[#7dcb53]/50 shadow-sm backdrop-blur-sm ring-1 ring-[#7dcb53]/15",children:[X.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"w-4 h-4 text-[#6fbd49] dark:text-[#9ce074]",children:X.jsx("path",{fill:"currentColor",d:"M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a1 1 0 0 1 1-1m12 7H5v9h14V9Z"})}),X.jsxs("span",{className:"font-medium text-xs tracking-wide",children:["Season ",e.label]}),n?X.jsx("span",{className:"ml-1 inline-flex items-center rounded-full bg-[#7dcb53]/15 px-2 py-0.5 text-[10px] font-semibold text-[#2b5f16] dark:text-[#b7f09a]",children:n}):null]})})}function Ew(){const{isEventUser:e}=fi(),[t,s]=Je.useState("trading");return X.jsxs("div",{className:"min-h-screen bg-background",children:[X.jsx("div",{className:"border-b bg-card",children:X.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:[X.jsxs("div",{className:"flex items-start justify-between mb-4",children:[X.jsxs("div",{children:[X.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"FS QDS Battleground"}),X.jsx("p",{className:"text-muted-foreground text-lg",children:"Master trading and interview skills"})]}),X.jsx("div",{className:"self-start",children:X.jsx(_w,{})})]}),X.jsx(cx,{value:t,onValueChange:s,className:"w-full",children:X.jsxs(dx,{className:`grid w-full ${e?"grid-cols-1":"grid-cols-2"} max-w-md h-12`,children:[X.jsxs(ux,{value:"trading",className:"flex items-center gap-2 text-base",children:[X.jsx(an,{className:"w-5 h-5"}),"Axe the DAX"]}),!e&&X.jsxs(ux,{value:"interview",className:"flex items-center gap-2 text-base",children:[X.jsx(Hs,{className:"w-5 h-5"}),"Hack the Interview"]})]})})]})}),X.jsxs(cx,{value:t,onValueChange:s,className:"w-full",children:[X.jsx(mx,{value:"trading",className:"mt-0",children:X.jsx(Ly,{})}),!e&&X.jsx(mx,{value:"interview",className:"mt-0",children:X.jsx(Sw,{})})]})]})}ww.exports.create;const Tw=()=>{const{t:e}=mi();return X.jsxs("div",{className:"battleground-container battleground-figma-scope",children:[X.jsx(Ew,{}),X.jsx("div",{className:"mt-4 md:mt-6 px-4 md:px-6 bg-white pb-10",children:X.jsx("div",{className:"max-w-3xl mx-auto bg-yellow-50 border border-yellow-200 rounded shadow-sm p-3 sm:p-3 text-yellow-900",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-600 mt-0.5 mr-2.5 text-sm sm:text-base"}),X.jsxs("div",{children:[X.jsx("div",{className:"font-semibold mb-0.5 text-xs sm:text-sm",children:e("battleground.riskWarningTitle")}),X.jsx("p",{className:"text-[11px] sm:text-xs leading-relaxed text-yellow-800",children:e("battleground.riskWarningText")})]})]})})})]})},Dw=()=>{const{t:e}=mi();return X.jsx("section",{id:"contact",className:"py-20 bg-gradient-to-b from-white to-gray-50/50 min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100/80 border border-blue-200/60 text-blue-700 text-sm font-medium mb-6",children:[X.jsx(Ys,{className:"w-4 h-4"}),X.jsx("span",{children:"Get In Touch"})]}),X.jsx("h2",{className:"text-3xl md:text-4xl font-inter font-bold text-gray-900 mb-4",children:e("navigation.contact")}),X.jsx("p",{className:"max-w-2xl mx-auto text-lg text-gray-600",children:e("contact.subtitle")})]}),X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16",children:[X.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 relative overflow-hidden",children:[X.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-blue-100/50 to-indigo-100/50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),X.jsxs("div",{className:"relative",children:[X.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[X.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/25",children:X.jsx(dn,{className:"w-6 h-6 text-white"})}),X.jsx("h3",{className:"font-inter text-2xl font-bold text-gray-900",children:e("contact.joinTitle")})]}),X.jsx("p",{className:"text-gray-600 mb-8 text-lg leading-relaxed",children:e("contact.joinDescription")}),X.jsx("div",{className:"space-y-5 mb-8",children:[{icon:Ns,title:"Open to All Programs",desc:"Bachelor's, Master's, and Ph.D. students from any discipline can join."},{icon:Js,title:"No Prior Experience Required",desc:"We offer learning paths for beginners and advanced practitioners alike."},{icon:Ss,title:"Flexible Commitment",desc:"Participate in projects and divisions at your own pace."}].map((e,t)=>X.jsxs("div",{className:"flex gap-4 group",children:[X.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-xl bg-blue-50 border border-blue-100 flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:X.jsx(e.icon,{className:"w-5 h-5 text-blue-600"})}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:e.title}),X.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:e.desc})]})]},t))}),X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-100",children:[X.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[X.jsx(Ps,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5"}),X.jsxs("div",{children:[X.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Applications Open"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Applications for initiative projects for 2025/26 are open on a rolling basis. Community platform is open for all students."})]})]}),X.jsxs("a",{href:"https://forms.gle/vkD7AJVRwg5TqQyo8",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 transform hover:-translate-y-0.5 w-full justify-center",children:["Apply Now",X.jsx(ws,{className:"w-5 h-5"})]})]})]})]}),X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100",children:[X.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[X.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center shadow-lg",children:X.jsx(Ys,{className:"w-6 h-6 text-white"})}),X.jsx("h3",{className:"font-inter text-xl font-bold text-gray-900",children:"Contact Information"})]}),X.jsx("div",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/25",children:X.jsx(Ys,{className:"w-7 h-7 text-white"})}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Email"}),X.jsx("a",{href:"mailto:fs.data.science00@gmail.com",className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:"fs.data.science00@gmail.com"})]})]})})]}),X.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl p-8 shadow-xl text-white relative overflow-hidden",children:[X.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl"}),X.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-indigo-500/10 rounded-full blur-2xl"}),X.jsxs("div",{className:"relative",children:[X.jsx("h3",{className:"font-inter text-2xl font-bold mb-3",children:"Connect With Us"}),X.jsx("p",{className:"text-gray-400 mb-8",children:"Follow our channels for the latest updates, events, and opportunities."}),X.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{href:"https://de.linkedin.com/company/fs-quant",icon:"fab fa-linkedin-in",label:"LinkedIn",color:"from-blue-500 to-blue-600"},{href:"https://github.com/fsqds/",icon:"fab fa-github",label:"GitHub",color:"from-gray-600 to-gray-700"},{href:"https://www.instagram.com/fs_quant/?hl=en",icon:"fab fa-instagram",label:"Instagram",color:"from-pink-500 to-rose-500"}].map((e,t)=>X.jsxs("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center p-4 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:[X.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${e.color} flex items-center justify-center shadow-lg mb-3 group-hover:scale-110 transition-transform`,children:X.jsx("i",{className:`${e.icon} text-xl text-white`})}),X.jsx("span",{className:"text-sm font-medium text-gray-300",children:e.label})]},t))})]})]})]})]})]})})};function Aw(){const e=function(){const[e,t]=Je.useState(null);return tt.useEffect(()=>{(async()=>{const{data:{session:e}}=await oi.auth.getSession();t((null==e?void 0:e.access_token)||null)})()},[]),e}(),[t,s]=Je.useState({}),[n,r]=Je.useState("Market Making Demo"),[a,i]=Je.useState(""),[o,l]=Je.useState([]),[c,d]=Je.useState(""),[u,m]=Je.useState(1e5),[h,p]=Je.useState(!1),[f,g]=Je.useState(null),[x,v]=Je.useState(!1);Je.useState(""),Je.useState([]);const[y,b]=Je.useState([]),[w,j]=Je.useState("SIE,BMW"),[N,k]=Je.useState(.5),[S,_]=Je.useState(180),[E,T]=Je.useState("liquidity window"),[D,A]=Je.useState("ticker"),[M,C]=Je.useState(""),[O,P]=Je.useState([]),[I,R]=Je.useState({}),[L,F]=Je.useState([]),[z,B]=Je.useState([]),[U,q]=Je.useState([]),[W,$]=Je.useState([]);tt.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await oi.from("adx_tickers").select("symbol").eq("is_active",!0).order("symbol",{ascending:!0});if(!t&&Array.isArray(e)){const t=e.map(e=>String(e.symbol)).filter(Boolean);P(t);const s=new Set(w.split(",").map(e=>e.trim()).filter(Boolean)),n={};t.forEach(e=>{n[e]=s.has(e)}),R(n)}}catch(e){}})()},[]),tt.useEffect(()=>{let e=null,t=!1;const s=async()=>{try{const e=await H(fv.adminOpsListOverrides,{},"GET");!t&&e&&Array.isArray(e.data)&&F(e.data)}catch(e){t||F([])}};return s(),e=setInterval(s,5e3),()=>{t=!0,e&&clearInterval(e)}},[]),tt.useEffect(()=>{(()=>{const e=new Set(w.split(",").map(e=>e.trim()).filter(Boolean));R(t=>{const s={...t};return O.forEach(t=>{s[t]=e.has(t)}),s})})()},[w]),Je.useMemo(()=>Object.entries(I).filter(([,e])=>e).map(([e])=>e),[I]);const Y=Je.useMemo(()=>{const e=new Set;for(const t of L||[])"ticker"===t.scope&&"string"==typeof t.target&&t.target&&e.add(t.target);return e},[L]);function V(e){try{const t=new Date(e.end_at).getTime()-Date.now();if(t<=0)return"ended";const s=Math.round(t/1e3);if(s<60)return`${s}s`;const n=Math.floor(s/60);return`${n}m ${s%60}s`}catch{return""}}async function H(t,s,n="POST"){const{data:{session:r}}=await oi.auth.getSession(),a=(null==r?void 0:r.access_token)||e;if(!a)throw Ja.error("Authentication required"),new Error("No auth");const i={"Content-Type":"application/json",Authorization:`Bearer ${a}`},o=await fetch(t+("GET"===n&&s?`?${new URLSearchParams(s).toString()}`:""),{method:n,headers:i,body:"POST"===n?JSON.stringify(s||{}):void 0});let l=null;try{l=await o.json()}catch{l={ok:o.ok}}if(!o.ok&&!(null==l?void 0:l.ok))throw new Error((null==l?void 0:l.error)||`HTTP ${o.status}`);return l}Je.useMemo(()=>{const t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},[e]);const G=(e,t)=>s(s=>({...s,[e]:t}));async function K(){if(a)try{G("score",!0);const e=await H(fv.mmEventScoreboard,{event_id:a},"GET"),t=Array.isArray(null==e?void 0:e.data)?e.data:[];l(t),Ja.success(`Scoreboard fetched (${t.length} teams)`)}catch(vj){Ja.error(`Scoreboard failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G("score",!1)}else Ja.error("Set event id")}async function Q(e){try{G(`auction_${e}`,!0);await H(fv.mmEventRunAuction,{slot:e});Ja.success(`Auction ${e} started`)}catch(vj){Ja.error(`Auction ${e} failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G(`auction_${e}`,!1)}}return tt.useMemo(()=>{if(!(null==y?void 0:y.length))return null;const e=(t=y,`${(s=["team_name","email","password","portfolio_id","ok","error","status"]).join(",")}\n${t.map(e=>s.map(t=>JSON.stringify(e[t]??"")).join(",")).join("\n")}`);var t,s;const n=new Blob([e],{type:"text/csv"});return URL.createObjectURL(n)},[y]),X.jsxs("div",{className:"space-y-8 p-4 border rounded-md",children:[X.jsx("h2",{className:"text-xl font-semibold",children:"Event Admin Panel (Minimal Stub)"}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Event Controls"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{className:"border px-2 py-1",placeholder:"New Event Name (optional)",value:n,onChange:e=>r(e.target.value)}),X.jsx("button",{disabled:!!t.create||!e,onClick:async function(){var e,t;try{G("create",!0);const s=await H(fv.mmEventCreate,{name:n});if((null==(e=null==s?void 0:s.data)?void 0:e.id)||(null==s?void 0:s.id)){const e=(null==(t=s.data)?void 0:t.id)||s.id;i(e),Ja.success(`Event created: ${e}`)}else Ja.success("Event created")}catch(vj){Ja.error(`Create failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G("create",!1)}},className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:t.create?"Creating":"Create New Event"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{className:"border px-2 py-1 w-[520px]",placeholder:"Current Event ID",value:a,onChange:e=>i(e.target.value)}),X.jsx("button",{disabled:!!t.score||!e,onClick:K,className:"px-3 py-1 bg-gray-700 text-white rounded disabled:opacity-50",children:t.score?"Fetching":"Refresh Scoreboard"}),X.jsx("button",{disabled:!!t.freeze||!e,onClick:async function(){if(a)try{G("freeze",!0);const e=await H(fv.mmEventFreeze,{event_id:a});(null==e?void 0:e.ok)?Ja.success("Scoreboard frozen"):Ja.warning("Freeze returned non-ok (see console)")}catch(vj){Ja.error(`Freeze failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G("freeze",!1)}else Ja.error("Set event id")},className:"px-3 py-1 bg-emerald-600 text-white rounded disabled:opacity-50",children:t.freeze?"Freezing":"Freeze Scoreboard"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Register Team"}),X.jsx("div",{className:"text-xs text-neutral-600",children:"Note: For bulk registration, credentials are generated per team; CSV email/password columns are ignored. Download the results CSV below to get the generated credentials."}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"Team Name",value:c,onChange:e=>d(e.target.value)}),X.jsx("input",{className:"border px-2 py-1 w-40",type:"number",placeholder:"Starting Cash",value:u,onChange:e=>m(Number(e.target.value)||0)}),X.jsx("button",{disabled:!c||!!t.register_team||!e,onClick:async()=>{var e,t,s,n;if(c)try{G("register_team",!0);const r=await H(fv.mmEventRegisterTeam,{team_name:c,starting_cash:u}),i=(null==(t=null==(e=null==r?void 0:r.data)?void 0:e.user)?void 0:t.email)||"",o=(null==(n=null==(s=null==r?void 0:r.data)?void 0:s.user)?void 0:n.password)||"";i&&o&&(g({email:i,password:o}),p(!0)),Ja.success("Team registered"),d(""),a&&await K()}catch(vj){Ja.error(`Register team failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G("register_team",!1)}else Ja.error("Team name required")},className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:t.register_team?"Registering":"Register Team"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Event Scoreboard"}),0===o.length?X.jsx("div",{className:"text-sm text-gray-500",children:"No teams yet  refresh after registering teams and running auctions."}):X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map((e,t)=>{var s,n,r,a,i,o,l,c,d,u;return X.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[X.jsxs("div",{className:"flex items-center justify-between mb-1",children:[X.jsx("div",{className:"font-semibold",children:e.team_name||"Team"}),X.jsxs("div",{className:"text-xs px-2 py-0.5 rounded "+((e.pnl_pct||0)>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"),children:[(e.pnl_pct??0).toFixed(2),"%"]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[X.jsxs("div",{children:["Equity: ",X.jsx("span",{className:"font-medium",children:(null==(n=(s=e.equity??0).toLocaleString)?void 0:n.call(s))??e.equity})]}),X.jsxs("div",{children:["Cash: ",X.jsx("span",{className:"font-medium",children:(null==(a=(r=e.cash??0).toLocaleString)?void 0:a.call(r))??e.cash})]}),X.jsxs("div",{children:["Positions: ",X.jsx("span",{className:"font-medium",children:(null==(o=(i=e.positions_value??0).toLocaleString)?void 0:o.call(i))??e.positions_value})]}),X.jsxs("div",{children:["Realized: ",X.jsx("span",{className:"font-medium",children:(null==(c=(l=e.realized_pnl??0).toLocaleString)?void 0:c.call(l))??e.realized_pnl})]}),X.jsxs("div",{children:["Exposure: ",X.jsx("span",{className:"font-medium",children:(null==(u=(d=e.exposure??0).toLocaleString)?void 0:u.call(d))??e.exposure})]}),X.jsxs("div",{children:["Trades Today: ",X.jsx("span",{className:"font-medium",children:e.trades_today??0})]})]})]},e.portfolio_id||t)})})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Market Ops  Liquidity / Stress"}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-sm",children:[X.jsx("button",{type:"button",onClick:()=>{k(.5),_(180),T("liquidity window")},className:"px-2 py-1 border rounded",children:"Preset: Liquidity (0.5, 180s)"}),X.jsx("button",{type:"button",onClick:()=>{k(1.5),_(120),T("stress window")},className:"px-2 py-1 border rounded",children:"Preset: Stress (1.5, 120s)"})]}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsx("input",{className:"border px-2 py-1",placeholder:"Tickers (comma)",value:w,onChange:e=>j(e.target.value)}),X.jsx("input",{className:"border px-2 py-1 w-28",type:"number",step:"0.1",placeholder:"slip_mul",value:N,onChange:e=>k(Number(e.target.value))}),X.jsx("input",{className:"border px-2 py-1 w-32",type:"number",placeholder:"duration_sec",value:S,onChange:e=>_(Number(e.target.value))}),X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"note",value:E,onChange:e=>T(e.target.value)}),X.jsx("button",{disabled:!!t.override||!e,onClick:async function(){try{G("override",!0);const e=w.split(",").map(e=>e.trim()).filter(Boolean),t={scope:"ticker",targets:e,slip_mul:Number(N),duration_sec:Number(S),note:E};await H(fv.adminOpsSetOverride,t);Ja.success("Override set"),$(t=>[{ts:(new Date).toISOString(),label:`Set override scope=ticker targets=${e.join(",")} slip_mul=${N}`,ok:!0},...t].slice(0,20));try{const e=await H(fv.adminOpsListOverrides,{},"GET");(null==e?void 0:e.data)&&F(e.data)}catch{}}catch(vj){Ja.error(`Override failed: ${(null==vj?void 0:vj.message)||vj}`),$(t=>[{ts:(new Date).toISOString(),label:"Set override failed",ok:!1,details:(null==vj?void 0:vj.message)||String(vj)},...t].slice(0,20))}finally{G("override",!1)}},className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:t.override?"Setting":"Set Override"}),X.jsx("button",{disabled:!!t.listOverrides||!e,onClick:async function(){try{G("listOverrides",!0);const e=await H(fv.adminOpsListOverrides,{},"GET");F(Array.isArray(null==e?void 0:e.data)?e.data:[]),Ja.success("Overrides listed"),$(t=>[{ts:(new Date).toISOString(),label:`Listed overrides (${Array.isArray(null==e?void 0:e.data)?e.data.length:0})`,ok:!0},...t].slice(0,20))}catch(vj){Ja.error(`List overrides failed: ${(null==vj?void 0:vj.message)||vj}`),$(t=>[{ts:(new Date).toISOString(),label:"List overrides failed",ok:!1,details:(null==vj?void 0:vj.message)||String(vj)},...t].slice(0,20))}finally{G("listOverrides",!1)}},className:"px-3 py-1 bg-gray-700 text-white rounded disabled:opacity-50",children:t.listOverrides?"Listing":"List Overrides"})]}),X.jsxs("div",{className:"border rounded p-3 bg-neutral-50",children:[X.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[X.jsx("div",{className:"font-medium",children:"Tickers"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("button",{type:"button",className:"px-2 py-0.5 border rounded",onClick:()=>{const e={};O.forEach(t=>e[t]=!0),R(e),j(O.join(","))},children:"Select All"}),X.jsx("button",{type:"button",className:"px-2 py-0.5 border rounded",onClick:()=>{const e={};O.forEach(t=>e[t]=!1),R(e),j("")},children:"Clear"}),X.jsx("button",{type:"button",className:"px-2 py-0.5 border rounded",onClick:()=>{const e=Object.entries(I).filter(([,e])=>e).map(([e])=>e);j(e.join(","))},children:"Sync to Input"})]})]}),X.jsx("div",{className:"mb-2 text-xs",children:Array.isArray(L)&&L.length>0?X.jsxs("div",{className:"rounded border bg-white p-2",children:[X.jsx("div",{className:"font-medium mb-1",children:"Active Liquidity/Stress Windows"}),X.jsx("div",{className:"space-y-1",children:L.map((e,t)=>{const s=function(e){const t=Number((null==e?void 0:e.slip_mul)||1);return t<1?"liquidity":t>1?"stress":"neutral"}(e);return X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"px-1.5 py-0.5 rounded border text-[11px] "+("liquidity"===s?"bg-emerald-50 text-emerald-700 border-emerald-200":"stress"===s?"bg-amber-50 text-amber-700 border-amber-200":"bg-neutral-50 text-neutral-700 border-neutral-200"),children:s}),X.jsx("span",{className:"font-mono",children:e.scope}),e.target?X.jsx("span",{className:"font-mono",children:e.target}):null,X.jsxs("span",{className:"text-neutral-500",children:["slip",Number(e.slip_mul||1).toFixed(2)]}),e.note?X.jsxs("span",{className:"text-neutral-500",children:["(",e.note,")"]}):null]}),X.jsxs("div",{className:"text-neutral-500",children:["ends in ",V(e)]})]},e.id||t)})})]}):X.jsx("div",{className:"text-neutral-500",children:"No active windows"})}),X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 max-h-48 overflow-auto",children:O.map(e=>X.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[X.jsx("input",{type:"checkbox",checked:!!I[e],onChange:t=>{const s=t.target.checked;R(t=>({...t,[e]:s}))}}),X.jsx("span",{children:e}),Y.has(e)&&X.jsx("span",{className:"text-[10px] px-1 rounded border bg-amber-50 text-amber-700 border-amber-200",children:"active"})]},e))})]}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsxs("select",{className:"border px-2 py-1",value:D,onChange:e=>A(e.target.value),children:[X.jsx("option",{value:"ticker",children:"ticker"}),X.jsx("option",{value:"global",children:"global"})]}),X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"Targets (comma)",value:M,onChange:e=>C(e.target.value)}),X.jsx("button",{disabled:!!t.clearOverrides||!e,onClick:async function(){try{G("clearOverrides",!0);const e=M.split(",").map(e=>e.trim()).filter(Boolean),t={scope:D,targets:e};await H(fv.adminOpsClearOverrides,t);Ja.success("Overrides cleared"),$(t=>[{ts:(new Date).toISOString(),label:`Cleared overrides scope=${D} targets=${e.join(",")}`,ok:!0},...t].slice(0,20));try{const e=await H(fv.adminOpsListOverrides,{},"GET");(null==e?void 0:e.data)&&F(e.data)}catch{}}catch(vj){Ja.error(`Clear overrides failed: ${(null==vj?void 0:vj.message)||vj}`),$(t=>[{ts:(new Date).toISOString(),label:"Clear overrides failed",ok:!1,details:(null==vj?void 0:vj.message)||String(vj)},...t].slice(0,20))}finally{G("clearOverrides",!1)}},className:"px-3 py-1 bg-red-600 text-white rounded disabled:opacity-50",children:t.clearOverrides?"Clearing":"Clear Overrides"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"News Shocks & Marks"}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"Tickers (comma)",value:w,onChange:e=>j(e.target.value)}),X.jsx("select",{className:"border px-2 py-1",value:void 0,onChange:()=>{},style:{display:"none"},"aria-hidden":!0}),X.jsx("input",{className:"border px-2 py-1 w-28",type:"number",step:"0.01",placeholder:"factor (e.g. 1.18)",value:Number.isFinite(null==window?void 0:window.__shockFactor)?window.__shockFactor:1.18,onChange:e=>{window.__shockFactor=Number(e.target.value)||1}}),X.jsxs("select",{className:"border px-2 py-1",defaultValue:"multiply",onChange:e=>{window.__shockMode=e.target.value},children:[X.jsx("option",{value:"multiply",children:"multiply"}),X.jsx("option",{value:"set",children:"set"})]}),X.jsx("input",{className:"border px-2 py-1 w-28",type:"number",step:"0.01",placeholder:"value (mode=set)",onChange:e=>{window.__shockValue=Number(e.target.value)||0}}),X.jsx("input",{className:"border px-2 py-1 w-[420px]",placeholder:'per-ticker factors JSON (e.g. {"SAP":1.3,"ALV":0.85})',onChange:e=>{window.__shockFactorsJson=e.target.value}}),X.jsx("button",{disabled:!!t.applyShock||!e,onClick:async()=>{var e,t;try{G("applyShock",!0);const s=w.split(",").map(e=>e.trim()).filter(Boolean),n=window.__shockMode||"multiply",r=Number(window.__shockFactor||1),a=Number(window.__shockValue||0);let i;try{const e=window.__shockFactorsJson;e&&e.trim()&&(i=JSON.parse(e))}catch{}const o={tickers:s,mode:n};i&&"object"==typeof i?o.factors=i:o.factor=r,"set"===n&&a>0&&(o.value=a);const l=await H(fv.adminNewsShock,o);Ja.success(`Shock applied: updated_stock_prices=${(null==(e=null==l?void 0:l.data)?void 0:e.updated_stock_prices)??0}, updated_model_marks=${(null==(t=null==l?void 0:l.data)?void 0:t.updated_model_marks)??0}`),B(e=>{var t,r;return[{ts:(new Date).toISOString(),tickers:s,mode:n,factor:o.factor,factors:o.factors,value:o.value??null,updated_stock_prices:null==(t=null==l?void 0:l.data)?void 0:t.updated_stock_prices,updated_model_marks:null==(r=null==l?void 0:l.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(vj){Ja.error(`Apply shock failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G("applyShock",!1)}},className:"px-3 py-1 bg-amber-600 text-white rounded disabled:opacity-50",children:t.applyShock?"Shocking":"Apply News Shock"}),X.jsx("button",{disabled:!!t.refreshMarks||!e,onClick:async()=>{try{G("refreshMarks",!0);const e=w.split(",").map(e=>e.trim()).filter(Boolean),t=await H(fv.adminOptionsRefresh,{tickers:e}),s=!!(null==t?void 0:t.ok);Ja.success(s?"Marks refresh enqueued":"Marks refresh returned non-ok"),q(t=>[{ts:(new Date).toISOString(),tickers:e,ok:s},...t].slice(0,20))}catch(vj){Ja.error(`Refresh marks failed: ${(null==vj?void 0:vj.message)||vj}`),q(e=>[{ts:(new Date).toISOString(),tickers:w.split(",").map(e=>e.trim()).filter(Boolean),ok:!1},...e].slice(0,20))}finally{G("refreshMarks",!1)}},className:"px-3 py-1 bg-indigo-500 text-white rounded disabled:opacity-50",children:t.refreshMarks?"Refreshing":"Refresh Marks"})]}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-sm",children:[X.jsx("span",{className:"text-neutral-600",children:"Shock presets:"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{var e;try{G("presetShock",!0);const t={tickers:["SIE","BMW"],factors:{SIE:1.18,BMW:1.18},mode:"multiply"},s=await H(fv.adminNewsShock,t);Ja.success(`PMI shock applied (SIE,BMW): updated ${(null==(e=null==s?void 0:s.data)?void 0:e.updated_model_marks)??0} marks`),B(e=>{var n,r;return[{ts:(new Date).toISOString(),tickers:t.tickers,mode:t.mode,factors:t.factors,updated_stock_prices:null==(n=null==s?void 0:s.data)?void 0:n.updated_stock_prices,updated_model_marks:null==(r=null==s?void 0:s.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Preset failed")}finally{G("presetShock",!1)}},children:"PMI +18% (SIE,BMW)"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{var e;try{G("presetShock",!0);const t={tickers:["SAP"],factors:{SAP:1.3},mode:"multiply"},s=await H(fv.adminNewsShock,t);Ja.success(`SAP shock applied: updated ${(null==(e=null==s?void 0:s.data)?void 0:e.updated_model_marks)??0} marks`),B(e=>{var n,r;return[{ts:(new Date).toISOString(),tickers:t.tickers,mode:t.mode,factors:t.factors,updated_stock_prices:null==(n=null==s?void 0:s.data)?void 0:n.updated_stock_prices,updated_model_marks:null==(r=null==s?void 0:s.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Preset failed")}finally{G("presetShock",!1)}},children:"SAP +30%"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{var e;try{G("presetShock",!0);const t={tickers:["ALV"],factors:{ALV:.85},mode:"multiply"},s=await H(fv.adminNewsShock,t);Ja.success(`ALV shock applied: updated ${(null==(e=null==s?void 0:s.data)?void 0:e.updated_model_marks)??0} marks`),B(e=>{var n,r;return[{ts:(new Date).toISOString(),tickers:t.tickers,mode:t.mode,factors:t.factors,updated_stock_prices:null==(n=null==s?void 0:s.data)?void 0:n.updated_stock_prices,updated_model_marks:null==(r=null==s?void 0:s.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Preset failed")}finally{G("presetShock",!1)}},children:"ALV 15%"}),X.jsx("span",{className:"ml-4 text-neutral-600",children:"Marks quick refresh:"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{try{G("presetMarks",!0);const e=["SIE","BMW"],t=await H(fv.adminOptionsRefresh,{tickers:e});Ja.success((null==t?void 0:t.ok)?"Marks refresh (SIE,BMW) enqueued":"Refresh returned non-ok"),q(s=>[{ts:(new Date).toISOString(),tickers:e,ok:!!(null==t?void 0:t.ok)},...s].slice(0,20))}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Refresh failed")}finally{G("presetMarks",!1)}},children:"SIE,BMW"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{try{G("presetMarks",!0);const e=["SAP"],t=await H(fv.adminOptionsRefresh,{tickers:e});Ja.success((null==t?void 0:t.ok)?"Marks refresh (SAP) enqueued":"Refresh returned non-ok"),q(s=>[{ts:(new Date).toISOString(),tickers:e,ok:!!(null==t?void 0:t.ok)},...s].slice(0,20))}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Refresh failed")}finally{G("presetMarks",!1)}},children:"SAP"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{try{G("presetMarks",!0);const e=["ALV"],t=await H(fv.adminOptionsRefresh,{tickers:e});Ja.success((null==t?void 0:t.ok)?"Marks refresh (ALV) enqueued":"Refresh returned non-ok"),q(s=>[{ts:(new Date).toISOString(),tickers:e,ok:!!(null==t?void 0:t.ok)},...s].slice(0,20))}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Refresh failed")}finally{G("presetMarks",!1)}},children:"ALV"})]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[X.jsxs("div",{className:"rounded border bg-white p-3",children:[X.jsx("div",{className:"font-medium mb-2",children:"Applied Shocks"}),0===z.length?X.jsx("div",{className:"text-sm text-neutral-500",children:"No shocks applied in this session."}):X.jsx("div",{className:"space-y-1 text-sm max-h-48 overflow-auto",children:z.map((e,t)=>X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-mono text-xs",children:new Date(e.ts).toLocaleTimeString()}),X.jsx("span",{children:e.mode}),X.jsxs("span",{className:"font-mono",children:["[",e.tickers.join(","),"]"]}),"number"==typeof e.factor?X.jsxs("span",{children:["",e.factor]}):null,e.value?X.jsxs("span",{children:["= ",e.value]}):null]}),X.jsxs("div",{className:"text-xs text-neutral-600",children:["stocks ",e.updated_stock_prices??0,", marks ",e.updated_model_marks??0]})]},t))})]}),X.jsxs("div",{className:"rounded border bg-white p-3",children:[X.jsx("div",{className:"font-medium mb-2",children:"Marks Refresh"}),0===U.length?X.jsx("div",{className:"text-sm text-neutral-500",children:"No refresh actions in this session."}):X.jsx("div",{className:"space-y-1 text-sm max-h-48 overflow-auto",children:U.map((e,t)=>X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-mono text-xs",children:new Date(e.ts).toLocaleTimeString()}),X.jsxs("span",{className:"font-mono",children:["[",e.tickers.join(","),"]"]})]}),X.jsx("div",{className:"text-xs "+(e.ok?"text-emerald-700":"text-red-700"),children:e.ok?"ok":"failed"})]},t))})]})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Auctions"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("button",{disabled:!!t.auction_open||!e,onClick:async()=>{try{await Q("open"),$(e=>[{ts:(new Date).toISOString(),label:"Run OPEN auction",ok:!0},...e].slice(0,20))}catch{$(e=>[{ts:(new Date).toISOString(),label:"Run OPEN auction",ok:!1},...e].slice(0,20))}},className:"px-3 py-1 bg-indigo-600 text-white rounded disabled:opacity-50",children:t.auction_open?"Running":"Run OPEN (Event)"}),X.jsx("button",{disabled:!!t.auction_close||!e,onClick:async()=>{try{await Q("close"),$(e=>[{ts:(new Date).toISOString(),label:"Run CLOSE auction",ok:!0},...e].slice(0,20))}catch{$(e=>[{ts:(new Date).toISOString(),label:"Run CLOSE auction",ok:!1},...e].slice(0,20))}},className:"px-3 py-1 bg-indigo-700 text-white rounded disabled:opacity-50",children:t.auction_close?"Running":"Run CLOSE (Event)"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsxs("label",{className:"text-sm flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",checked:x,onChange:e=>v(e.target.checked)})," Deep cleanup (delete ADX orders/positions/exercises for event portfolios)"]}),X.jsx("button",{disabled:!!t.cleanup||!e,onClick:async()=>{try{G("cleanup",!0);const e=await H(fv.mmEventCleanup,{event_id:a||void 0,deep:x});(null==e?void 0:e.ok)?(Ja.success("Cleanup completed"),$(e=>[{ts:(new Date).toISOString(),label:`Cleanup (deep=${x})`,ok:!0},...e].slice(0,20))):(Ja.warning("Cleanup returned non-ok"),$(e=>[{ts:(new Date).toISOString(),label:"Cleanup returned non-ok",ok:!1},...e].slice(0,20)))}catch(vj){Ja.error(`Cleanup failed: ${(null==vj?void 0:vj.message)||vj}`),$(t=>[{ts:(new Date).toISOString(),label:"Cleanup failed",ok:!1,details:(null==vj?void 0:vj.message)||String(vj)},...t].slice(0,20))}finally{G("cleanup",!1)}},className:"px-3 py-1 bg-red-600 text-white rounded disabled:opacity-50",children:t.cleanup?"Cleaning":"Cleanup Event Data"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Recent Actions"}),X.jsx("div",{className:"rounded border bg-white p-3 max-h-40 overflow-auto text-sm",children:0===W.length?X.jsx("div",{className:"text-neutral-500",children:"No actions yet."}):X.jsx("ul",{className:"space-y-1",children:W.map((e,t)=>X.jsxs("li",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-mono text-xs",children:new Date(e.ts).toLocaleTimeString()}),X.jsx("span",{children:e.label})]}),X.jsx("span",{className:"text-xs "+(e.ok?"text-emerald-700":"text-red-700"),children:e.ok?"ok":"failed"})]},t))})})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Staged Orders (diagnostic)"}),X.jsx("div",{className:"flex items-center gap-2",children:X.jsx("button",{disabled:!!t.listStaged||!e,onClick:async()=>{try{G("listStaged",!0);const e=await H(fv.adxStagedOrders,{},"GET"),t=Array.isArray(null==e?void 0:e.data)?e.data:[];window.__STAGED_ROWS__=t,Ja.success(`Staged orders: ${t.length}`)}catch(vj){Ja.error(`List staged failed: ${(null==vj?void 0:vj.message)||vj}`)}finally{G("listStaged",!1)}},className:"px-3 py-1 bg-neutral-700 text-white rounded disabled:opacity-50",children:t.listStaged?"Loading":"Refresh List"})}),X.jsxs("div",{className:"border rounded p-2 max-h-64 overflow-auto text-sm bg-white",children:[X.jsxs("table",{className:"min-w-full text-xs",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left",children:[X.jsx("th",{className:"px-2 py-1",children:"Portfolio"}),X.jsx("th",{className:"px-2 py-1",children:"Symbol"}),X.jsx("th",{className:"px-2 py-1",children:"Side"}),X.jsx("th",{className:"px-2 py-1",children:"Qty"}),X.jsx("th",{className:"px-2 py-1",children:"Preview"}),X.jsx("th",{className:"px-2 py-1",children:"Fees"}),X.jsx("th",{className:"px-2 py-1",children:"Slot"}),X.jsx("th",{className:"px-2 py-1",children:"Cancelable"}),X.jsx("th",{className:"px-2 py-1",children:"To cutoff (s)"}),X.jsx("th",{className:"px-2 py-1",children:"Risk"})]})}),X.jsx("tbody",{id:"staged-body",children:(Array.isArray(window.__STAGED_ROWS__)?window.__STAGED_ROWS__:[]).map((e,t)=>X.jsxs("tr",{className:"border-t",children:[X.jsx("td",{className:"px-2 py-1 font-mono",children:e.portfolio_id}),X.jsx("td",{className:"px-2 py-1 font-mono",children:e.option_symbol}),X.jsx("td",{className:"px-2 py-1",children:e.side}),X.jsx("td",{className:"px-2 py-1",children:e.qty}),X.jsx("td",{className:"px-2 py-1",children:e.preview_price??"-"}),X.jsx("td",{className:"px-2 py-1",children:e.estimated_fees??"-"}),X.jsx("td",{className:"px-2 py-1",children:e.auction_slot}),X.jsx("td",{className:"px-2 py-1",children:e.cancelable?"yes":"no"}),X.jsx("td",{className:"px-2 py-1",children:e.time_to_cutoff_sec??"-"}),X.jsx("td",{className:"px-2 py-1",children:Array.isArray(e.risk_reasons)?e.risk_reasons.join(","):""})]},e.id||t))})]}),!(Array.isArray(window.__STAGED_ROWS__)&&window.__STAGED_ROWS__.length>0)&&X.jsx("div",{className:"text-neutral-500",children:"No staged orders loaded  click Refresh List."})]})]}),h&&f&&X.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:X.jsxs("div",{className:"bg-white rounded shadow p-4 w-[420px]",children:[X.jsx("h4",{className:"font-semibold mb-2",children:"Team Credentials"}),X.jsxs("div",{className:"space-y-1 text-sm",children:[X.jsxs("div",{children:["Email: ",X.jsx("span",{className:"font-mono",children:f.email})]}),X.jsxs("div",{children:["Password: ",X.jsx("span",{className:"font-mono",children:f.password})]})]}),X.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[X.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${f.email} ${f.password}`).catch(()=>{}),Ja.success("Copied")},className:"px-3 py-1 bg-neutral-100 rounded border",children:"Copy"}),X.jsx("button",{onClick:()=>p(!1),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Close"})]})]})})]})}function Mw(){const[e,t]=tt.useState(""),[s,n]=tt.useState([]),[r,a]=tt.useState(!1),[i,o]=tt.useState(!0);async function l(e){if(e){a(!0);try{const{data:{session:t}}=await oi.auth.getSession(),s=(null==t?void 0:t.access_token)||"",r=await fetch(`${fv.mmEventScoreboard}?event_id=${encodeURIComponent(e)}`,{method:"GET",headers:s?{Authorization:`Bearer ${s}`}:void 0}),a=await r.json().catch(()=>({ok:r.ok}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");n(Array.isArray(null==a?void 0:a.data)?a.data:[])}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to load scoreboard")}finally{a(!1)}}else Ja.error("Enter event id")}return tt.useEffect(()=>{let t=null;const s=()=>{i&&e&&l(e)};return s(),i&&(t=setInterval(s,5e3)),()=>{t&&clearInterval(t)}},[e,i]),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-end justify-between gap-3 flex-wrap",children:[X.jsxs("div",{className:"flex items-end gap-2",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Event ID"}),X.jsx("input",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border rounded-md w-96",placeholder:"uuid"})]}),X.jsx("button",{onClick:()=>l(e),className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] disabled:opacity-50",disabled:!e||r,children:r?"Refreshing":"Refresh"})]}),X.jsxs("label",{className:"text-sm flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",checked:i,onChange:e=>o(e.target.checked)})," Auto-refresh"]})]}),0===s.length?X.jsx("div",{className:"text-sm text-neutral-500 border rounded-md p-4",children:"No scoreboard rows yet. Enter an event id and refresh."}):X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e,t)=>{var s,n,r,a,i,o,l,c,d,u;return X.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white shadow-sm overflow-hidden",children:[X.jsxs("div",{className:"px-4 py-3 flex items-center justify-between bg-gradient-to-r from-[#0B3D91]/5 to-neutral-50",children:[X.jsx("div",{className:"font-semibold text-neutral-800",children:e.team_name||"Team"}),X.jsxs("div",{className:"text-xs px-2 py-1 rounded-full "+((e.pnl_pct||0)>=0?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-red-50 text-red-700 border border-red-200"),children:[(e.pnl_pct??0).toFixed(2),"%"]})]}),X.jsxs("div",{className:"px-4 py-3 grid grid-cols-2 gap-3 text-sm",children:[X.jsxs("div",{className:"text-neutral-500",children:["Equity",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(n=null==(s=e.equity)?void 0:s.toLocaleString)?void 0:n.call(s))??e.equity})]}),X.jsxs("div",{className:"text-neutral-500",children:["Cash",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(a=null==(r=e.cash)?void 0:r.toLocaleString)?void 0:a.call(r))??e.cash})]}),X.jsxs("div",{className:"text-neutral-500",children:["Positions",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(o=null==(i=e.positions_value)?void 0:i.toLocaleString)?void 0:o.call(i))??e.positions_value})]}),X.jsxs("div",{className:"text-neutral-500",children:["Realized",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(c=null==(l=e.realized_pnl)?void 0:l.toLocaleString)?void 0:c.call(l))??e.realized_pnl})]}),X.jsxs("div",{className:"text-neutral-500",children:["Exposure",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(u=null==(d=e.exposure)?void 0:d.toLocaleString)?void 0:u.call(d))??e.exposure})]}),X.jsxs("div",{className:"text-neutral-500",children:["Trades Today",X.jsx("div",{className:"font-medium text-neutral-900",children:e.trades_today??0})]})]})]},e.portfolio_id||t)})})]})}function Cw({activeSeason:e}){const[t,s]=Je.useState("ADX"),[n,r]=Je.useState([]),[a,i]=Je.useState({}),[o,l]=Je.useState(!1),[c,d]=Je.useState("custom_badge"),[u,m]=Je.useState("Custom Badge"),[h,p]=Je.useState("Awarded by admin"),[f,g]=Je.useState(""),[x,v]=Je.useState(0);Je.useEffect(()=>{let s=!1;return async function(){var n,a;if(e){l(!0);try{const e="https://fsqds-production.yadavkartik-arbeit.workers.dev",i=[{url:"ADX"===t?`${e}/api/leaderboards/adx`:`${e}/api/leaderboards/hti`}];try{const{data:e}=await oi.auth.getSession(),s=(null==(n=null==e?void 0:e.session)?void 0:n.access_token)||"",r="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/"+("ADX"===t?"adx_leaderboard":"get_hti_leaderboard");i.push({url:r,headers:s?{Authorization:`Bearer ${s}`}:void 0})}catch{}let o=null;for(const t of i)try{const e=await fetch(t.url,{method:"GET",headers:{Accept:"application/json",...t.headers||{}}}),s=await e.json().catch(()=>({})),n=(null==(a=null==s?void 0:s.data)?void 0:a.rows)||(null==s?void 0:s.rows)||[];if(Array.isArray(n)&&n.length>=0){o=n;break}}catch{}s||r(o||[])}catch(vj){}finally{s||l(!1)}}else r([])}(),()=>{s=!0}},[t,e]);const y=n.length>0&&n.every(e=>a[e.user_id]);return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Leaderboard"}),X.jsxs("select",{value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[X.jsx("option",{value:"ADX",children:"ADX (Axe the DAX)"}),X.jsx("option",{value:"HTI",children:"HTI (Hack the Interview)"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Badge Type (slug)"}),X.jsx("input",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Name"}),X.jsx("input",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Icon / URL"}),X.jsx("input",{value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{className:"md:col-span-3",children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),X.jsx("input",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Points"}),X.jsx("input",{type:"number",value:x,onChange:e=>v(parseInt(e.target.value||"0")),className:"w-full px-3 py-2 border rounded-md"})]})]}),X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:X.jsx("input",{type:"checkbox",checked:y,onChange:e=>(e=>{const t={};e&&n.forEach(e=>{t[e.user_id]=!0}),i(t)})(e.target.checked)})}),X.jsx("th",{className:"px-3 py-2",children:"User"}),X.jsx("th",{className:"px-3 py-2",children:"Score"})]})}),X.jsx("tbody",{children:o?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4",colSpan:3,children:"Loading"})}):0===n.length?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4 text-neutral-500",colSpan:3,children:"No rows"})}):n.map((e,s)=>{var n,r;return X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:X.jsx("input",{type:"checkbox",checked:!!a[e.user_id],onChange:t=>i(s=>({...s,[e.user_id]:t.target.checked}))})}),X.jsx("td",{className:"px-3 py-2",children:e.email||e.user_id}),X.jsx("td",{className:"px-3 py-2",children:"ADX"===t?(null==(r=null==(n=null==e?void 0:e.pnl_pct)?void 0:n.toFixed)?void 0:r.call(n,2))??"-":(null==e?void 0:e.total_points)??"-"})]},`${e.user_id}-${s}`)})})]})}),X.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[X.jsx("button",{onClick:async function(){var s;if(!e)return;const r=n.filter(e=>a[e.user_id]).map(e=>e.user_id);if(0!==r.length)try{const{data:n}=await oi.auth.getSession(),a=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_awards_badges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(s=null==n?void 0:n.session)?void 0:s.access_token}`},body:JSON.stringify({entity:"badge",action:"bulk_award",data:{season_id:e.id,user_ids:r,badge_type:c,name:u,description:h,icon_url:f,points:x,criteria:{leaderboard:t}}})}),o=await a.json();if(!a.ok||!(null==o?void 0:o.success))throw new Error((null==o?void 0:o.error)||"Failed to award badges");Ja.success(`Awarded '${u}' to ${r.length} users on ${t} leaderboard`),i({})}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to award badges")}},disabled:0===Object.values(a).filter(Boolean).length||!e,className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69]",children:"Award to Selected"}),X.jsxs("div",{className:"flex-1 min-w-[320px] bg-neutral-50 border rounded-md p-3",children:[X.jsx("div",{className:"text-sm font-medium mb-2",children:"Award by Emails (comma or newline separated)"}),X.jsx("textarea",{id:"award-emails",placeholder:"user1@fs-students.de, user2@fs-students.de",className:"w-full px-3 py-2 border rounded-md h-20"}),X.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[X.jsx("button",{onClick:async()=>{var e;try{const s=document.getElementById("award-emails"),n=((null==s?void 0:s.value)||"").split(/\s|,|;+/).map(e=>e.trim()).filter(Boolean);if(0===n.length)return void Ja.error("Enter at least one email");const{data:r,error:a}=await oi.from("user_profiles").select("user_id,email").in("email",n);if(a)throw a;const i=(r||[]).map(e=>e.user_id).filter(Boolean);if(0===i.length)return void Ja.error("No matching users found");const{data:o}=await oi.auth.getSession(),l=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_awards_badges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==o?void 0:o.session)?void 0:e.access_token}`},body:JSON.stringify({entity:"badge",action:"bulk_award",data:{user_ids:i,badge_type:c,name:u,description:h,icon_url:f,points:"HTI"===t?x:0,criteria:{leaderboard:t}}})}),d=await l.json().catch(()=>({}));if(!l.ok||!(null==d?void 0:d.success))throw new Error((null==d?void 0:d.error)||"Failed to award");Ja.success(`Awarded '${u}' to ${i.length} users by email${"HTI"===t&&x>0?` (+${x} pts each)`:""}`)}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to award by emails")}},className:"px-3 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69]",children:"Award by Emails"}),X.jsx("span",{className:"text-xs text-neutral-500",children:"HTI only: Points are added to hti_score"})]})]}),X.jsx("button",{onClick:async()=>{var e;try{const t="https://fsqds-production.yadavkartik-arbeit.workers.dev",{data:s}=await oi.auth.getSession(),n=(null==(e=null==s?void 0:s.session)||e.access_token,await fetch(`${t}/jobs/orchestrator`,{method:"POST",headers:{Authorization:"Bearer SERVICE"}}));if(!n.ok)throw new Error(`HTTP ${n.status}`);Ja.success("Triggered orchestrator tick; MV summary will refresh best-effort.")}catch(vj){Ja.error("Failed to trigger refresh")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Refresh Options Summary"})]})]})}function Ow(){const[e,t]=tt.useState([]),[s,n]=tt.useState(!1),[r,a]=tt.useState(""),[i,o]=tt.useState(1),[l]=tt.useState(200),c=tt.useCallback(async()=>{var e;n(!0);try{const{data:n}=await oi.auth.getSession(),r=(null==(e=null==n?void 0:n.session)?void 0:e.access_token)||"",a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o="https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/list-users",c="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_users",d=JSON.stringify({action:"list",params:{page:i,perPage:l}});let u=null;if(a){const e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to list users")}else try{const e=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||`HTTP ${e.status}`)}catch(s){const e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to list users")}t(u.users||[])}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to load users")}finally{n(!1)}},[i,l]);tt.useEffect(()=>{(async()=>{await c()})()},[c]);const d=e.filter(e=>{var t;return!r||(null==(t=e.email)?void 0:t.toLowerCase().includes(r.toLowerCase()))});return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Filter by email",className:"px-3 py-2 border rounded-md w-64"}),X.jsx("button",{onClick:c,disabled:s,className:"px-3 py-2 border rounded-md",children:s?"Loading":"Refresh"})]}),X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:"Email"}),X.jsx("th",{className:"px-3 py-2",children:"Confirmed"}),X.jsx("th",{className:"px-3 py-2",children:"Last Sign-in"}),X.jsx("th",{className:"px-3 py-2",children:"Admin"}),X.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),X.jsx("tbody",{children:0===d.length?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4",colSpan:5,children:"No users"})}):d.map(e=>X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:e.email}),X.jsx("td",{className:"px-3 py-2",children:e.confirmed_at?new Date(e.confirmed_at).toLocaleString():""}),X.jsx("td",{className:"px-3 py-2",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleString():""}),X.jsx("td",{className:"px-3 py-2",children:e.is_admin?"Yes":"No"}),X.jsx("td",{className:"px-3 py-2",children:X.jsx("button",{onClick:()=>async function(e){var s;if(!(null==e?void 0:e.id))return;const n=`This will permanently delete ${e.email} and all related data (ADX portfolios, orders, positions, HTI submissions, badges, profile, and auth user).\n\nType DELETE to confirm.`;if("DELETE"===window.prompt(n))try{const{data:n}=await oi.auth.getSession(),a=(null==(s=null==n?void 0:n.session)?void 0:s.access_token)||"",i=JSON.stringify({action:"wipe",userId:e.id}),o="https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/wipe-user",l="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_users",c="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);let d=!1,u=null;if(c){const e=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});u=await e.json().catch(()=>({})),d=e.ok&&!!(null==u?void 0:u.ok)}else{try{const e=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});u=await e.json().catch(()=>({})),d=e.ok&&!!(null==u?void 0:u.ok)}catch(r){d=!1}if(!d){const e=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to wipe user");d=!0}}if(!d)throw new Error("Failed to wipe user");Ja.success(`Wiped user ${e.email}`),t(t=>t.filter(t=>t.id!==e.id))}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to wipe user")}}(e),className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Permanently delete user and all data",children:"Wipe User"})})]},e.id))})]})})]})}function Pw({user:e,onLogout:t}){var s;mi();const[n,r]=Je.useState("hti"),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState([]),[u,m]=Je.useState(null),[h,p]=Je.useState({kind:"string",points:10,is_active:!0,title:"",tags:[]}),[f,g]=Je.useState([]),[x,v]=Je.useState(null),[y,b]=Je.useState({is_active:!0}),[w,j]=Je.useState(!1),[N,k]=Je.useState(!1),[S,_]=Je.useState("ticker"),[E,T]=Je.useState([]),[D,A]=Je.useState(.5),[M,C]=Je.useState(180),[O,P]=Je.useState([]),[I,R]=Je.useState([]),[L,F]=Je.useState({}),[z,B]=Je.useState([]),[U,q]=Je.useState(null),[W,$]=Je.useState({status:"upcoming"});Je.useEffect(()=>{e&&(async()=>{const{data:s}=await oi.from("user_profiles").select("is_admin").eq("user_id",e.id).single();(null==s?void 0:s.is_admin)||(Ja.error("Access denied: Admin privileges required"),t())})()},[e,t]),Je.useEffect(()=>{(async()=>{const{data:e}=await oi.from("seasons").select("*").order("starts_at",{ascending:!1});if(e){B(e);const t=e.find(e=>"active"===e.status);t&&l(t)}})()},[]),Je.useEffect(()=>{if(!o)return;(async()=>{i(!0);try{switch(n){case"hti":const{data:e}=await oi.from("hti_questions").select("*").eq("season_id",o.id).order("release_at",{ascending:!0});e&&d(e);break;case"adx":const{data:t}=await oi.from("adx_tickers").select("*").eq("season_id",o.id).order("symbol",{ascending:!0});t&&g(t);break;case"revenue":const{data:s}=await oi.from("adx_tickers").select("*").eq("season_id",o.id).eq("is_active",!0).order("symbol");R(s||[]);const{data:n}=await oi.from("adx_revenue_actuals").select("symbol, actual_value").eq("season_id",o.id),r={};(n||[]).forEach(e=>{r[e.symbol]=null!=e.actual_value?String(e.actual_value):""}),F(r)}}catch(e){Ja.error("Failed to load data")}finally{i(!1)}})()},[n,o]);const Y=async()=>{var e;if(o)try{const{data:t}=await oi.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`},body:JSON.stringify({action:"list",data:{season_id:o.id}})}),n=await s.json();s.ok&&n.success&&d(n.questions||[])}catch(t){}},V=async()=>{var e;if(o)try{const{data:t}=await oi.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`},body:JSON.stringify({action:"list",data:{season_id:o.id}})}),n=await s.json();s.ok&&n.success&&g(n.tickers||[])}catch(t){}};return X.jsxs("div",{className:"min-h-screen bg-[#F8F9FA]",children:[X.jsx("div",{className:"bg-white shadow-sm border-b border-neutral-200",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{className:"flex items-center space-x-4",children:[X.jsx(Zs,{className:"w-8 h-8 text-[#0B3D91]"}),X.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Admin Panel"}),o&&X.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[o.name," - ",o.status]})]}),X.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[X.jsx($s,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),X.jsx("div",{className:"bg-white border-b border-neutral-200",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:X.jsx("nav",{className:"flex space-x-8",children:[{id:"hti",label:"HTI Questions",icon:ln},{id:"adx",label:"ADX Tickers",icon:an},{id:"revenue",label:"Revenues",icon:Fs},{id:"badges",label:"Award Badges",icon:js},{id:"seasons",label:"Seasons",icon:Ss},{id:"users",label:"User Administration",icon:dn},{id:"event",label:"Event (Market Making)",icon:sn}].map(e=>X.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(n===e.id?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"),children:[X.jsx(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.id))})})}),X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a?X.jsx("div",{className:"flex justify-center items-center py-12",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#0B3D91]"})}):X.jsxs(ls,{mode:"wait",children:["hti"===n&&X.jsxs(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:u?"Edit Question":"Add New Question"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Title (optional)"}),X.jsx("input",{type:"text",value:h.title||"",onChange:e=>p({...h,title:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., Bayes Rule Warm-up"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question Text"}),X.jsx("textarea",{value:h.question_text||"",onChange:e=>p({...h,question_text:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",rows:3})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Tags",X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Comma-separated, e.g., probability, bayes)"})]}),X.jsx("input",{type:"text",value:(h.tags||[]).join(", "),onChange:e=>p({...h,tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., probability, bayes"}),h.tags&&h.tags.length>0&&X.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:h.tags.map((e,t)=>X.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-800 rounded",children:e},t))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question Type"}),X.jsxs("select",{value:h.kind||"string",onChange:e=>p({...h,kind:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[X.jsx("option",{value:"string",children:"Text"}),X.jsx("option",{value:"number",children:"Number"}),X.jsx("option",{value:"mcq",children:"Multiple Choice"})]})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Correct Answer","mcq"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the index: 0 for first option, 1 for second, etc.)"}),"number"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the exact numeric answer)"}),"string"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the exact text answer)"})]}),X.jsx("input",{type:"number"===h.kind?"number":"text",value:h.correct_answer||"",onChange:e=>p({...h,correct_answer:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"mcq"===h.kind?"e.g., 0 (for first option)":"number"===h.kind?"e.g., 42":"e.g., Python"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Points"}),X.jsx("input",{type:"number",value:h.points||10,onChange:e=>p({...h,points:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Release At"}),X.jsx("input",{type:"datetime-local",value:h.release_at||"",onChange:e=>p({...h,release_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Close At"}),X.jsx("input",{type:"datetime-local",value:h.close_at||"",onChange:e=>p({...h,close_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),"mcq"===h.kind&&X.jsxs("div",{className:"md:col-span-2",children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Multiple Choice Options",X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(One per line; commas are allowed inside an option)"})]}),X.jsx("textarea",{value:(null==(s=h.choices)?void 0:s.join("\n"))||"",onChange:e=>p({...h,choices:e.target.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"Enter each option on a new line\nExample:\nOption A, with comma\nOption B (another example)",rows:4}),h.choices&&h.choices.length>0&&X.jsxs("div",{className:"mt-2 p-3 bg-neutral-50 rounded-md",children:[X.jsx("p",{className:"text-xs font-medium text-neutral-600 mb-1",children:"Preview:"}),h.choices.map((e,t)=>X.jsxs("div",{className:"text-sm text-neutral-700",children:[t,": ",e]},t))]})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",id:"is_active",checked:h.is_active||!1,onChange:e=>p({...h,is_active:e.target.checked}),className:"mr-2"}),X.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-neutral-700",children:"Active"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[u&&X.jsx("button",{onClick:()=>{m(null),p({kind:"string",points:10,is_active:!0})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{var e;if(o){i(!0);try{let t={};h.question_text&&(t.question=h.question_text),"mcq"===h.kind&&h.choices&&(t.options=h.choices.map((e,t)=>({index:t,label:e})));let s={};"mcq"===h.kind?s.index=parseInt(h.correct_answer||"0"):"number"===h.kind?s.value=parseFloat(h.correct_answer||"0"):s.value=h.correct_answer||"";const n={season_id:o.id,n:h.n||c.length+1,kind:h.kind||"string",choices:t,correct:s,release_at:h.release_at||(new Date).toISOString(),is_active:!1!==h.is_active,points:Number.isFinite(h.points)?Number(h.points):10,title:(h.title??"").toString(),tags:Array.isArray(h.tags)?h.tags:[]},{data:r}=await oi.auth.getSession(),a=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==r?void 0:r.session)?void 0:e.access_token}`},body:JSON.stringify({action:u?"update":"create",data:u?{...n,id:u.id}:n})}),i=await a.json().catch(()=>({}));if(a.ok&&i.success)Ja.success(u?"Question updated successfully":"Question created successfully");else{if(u){const{error:e}=await oi.from("hti_questions").update({kind:n.kind,choices:n.choices,correct:n.correct,release_at:n.release_at,is_active:n.is_active,points:n.points,title:n.title,tags:n.tags}).eq("id",u.id);if(e)throw e}else{const{error:e}=await oi.from("hti_questions").insert([{...n}]);if(e)throw e}Ja.success(u?"Question updated successfully":"Question created successfully")}m(null),p({kind:"string",points:10,is_active:!0,title:"",tags:[]}),await Y()}catch(t){Ja.error(t.message||"Failed to save question")}finally{i(!1)}}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx(Qs,{className:"w-4 h-4 inline mr-2"}),u?"Update":"Create"," Question"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:X.jsx("h3",{className:"text-lg font-semibold",children:"Current Questions"})}),X.jsx("div",{className:"divide-y divide-neutral-200",children:c.map(e=>{let t="No question text",s="";try{const n="string"==typeof e.choices?JSON.parse(e.choices):e.choices;t=(null==n?void 0:n.question)||t;const r="string"==typeof e.correct?JSON.parse(e.correct):e.correct;s="mcq"===e.kind?`Option ${(null==r?void 0:r.index)+1}`:String((null==r?void 0:r.value)||"")}catch(vj){}return X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"font-medium text-neutral-900",dangerouslySetInnerHTML:{__html:bw(t)}}),X.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-neutral-600",children:[X.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded",children:e.kind}),e.title&&X.jsxs("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-800 rounded",children:["Title: ",e.title]}),Array.isArray(e.tags)&&e.tags.length>0&&X.jsxs(X.Fragment,{children:[X.jsx("span",{className:"text-neutral-500",children:"Tags:"}),e.tags.map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-800 rounded",children:e},t))]}),X.jsxs("span",{children:[e.points||10," points"]}),X.jsxs("span",{children:["Answer: ",s]}),X.jsx("span",{className:e.is_active?"text-green-600":"text-red-600",children:e.is_active?"Active":"Inactive"})]}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-neutral-500",children:[X.jsxs("span",{children:["Release: ",ot(new Date(e.release_at),"MMM dd, yyyy HH:mm")]}),e.close_at&&X.jsxs("span",{children:["Close: ",ot(new Date(e.close_at),"MMM dd, yyyy HH:mm")]})]})]}),X.jsxs("div",{className:"flex space-x-2 ml-4",children:[X.jsx("button",{onClick:()=>{var t;m(e);try{const s="string"==typeof e.choices?JSON.parse(e.choices):e.choices,n="string"==typeof e.correct?JSON.parse(e.correct):e.correct;let r={...e,question_text:(null==s?void 0:s.question)||"",title:e.title||"",tags:Array.isArray(e.tags)?e.tags:[],kind:e.kind,points:e.points||10,is_active:e.is_active,release_at:e.release_at?new Date(e.release_at).toISOString().slice(0,16):"",close_at:e.close_at?new Date(e.close_at).toISOString().slice(0,16):""};"mcq"===e.kind?(r.choices=(null==(t=null==s?void 0:s.options)?void 0:t.map(e=>e.label))||[],r.correct_answer=String((null==n?void 0:n.index)||0)):(e.kind,r.correct_answer=String((null==n?void 0:n.value)||"")),p(r)}catch(vj){p({...e,question_text:"",title:e.title||"",tags:Array.isArray(e.tags)?e.tags:[],correct_answer:"",choices:[]})}},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(en,{className:"w-4 h-4"})}),X.jsx("button",{onClick:()=>(async e=>{var t;if(confirm("Are you sure you want to delete this question?")){i(!0);try{const{data:s}=await oi.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==s?void 0:s.session)?void 0:t.access_token}`},body:JSON.stringify({action:"delete",data:{id:e}})}),r=await n.json();if(!n.ok||!r.success)throw new Error(r.error||"Failed to delete question");Ja.success("Question deleted"),d(c.filter(t=>t.id!==e))}catch(s){Ja.error(s.message||"Failed to delete question")}finally{i(!1)}}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:X.jsx(nn,{className:"w-4 h-4"})})]})]})},e.id)})})]})]}),"users"===n&&X.jsx(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Administration"}),X.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"List confirmed users and permanently wipe a user (all associated data)  use with caution."}),X.jsx(Ow,{})]})}),"adx"===n&&X.jsxs(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Admin Operations"}),X.jsxs("div",{className:"flex gap-3 flex-wrap",children:[X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await oi.auth.getSession(),s=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/expire-positions",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`}}),n=await s.text();if(!s.ok)throw new Error(n||"Failed");Ja.success("Expire Positions job triggered")}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to trigger expire")}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Expire Past-Due Positions"}),X.jsx("button",{onClick:async()=>{var e,t,s;j(!0);try{const{data:n}=await oi.auth.getSession(),r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/run-auction",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==n?void 0:n.session)?void 0:e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({slot:"open"})}),a=await r.json().catch(()=>({}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");const i=(null==(t=null==a?void 0:a.data)?void 0:t.filled)??"-",o=(null==(s=null==a?void 0:a.data)?void 0:s.batchId)??"";Ja.success(`Open auction running: filled=${i}${o?`, batch=${o}`:""}`)}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to run open auction")}finally{j(!1)}},disabled:w,className:"px-4 py-2 text-white rounded-md "+(w?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"),children:w?"Running Open Auction":"Run Open Auction Now"}),X.jsx("button",{onClick:async()=>{var e,t,s;k(!0);try{const{data:n}=await oi.auth.getSession(),r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/run-auction",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==n?void 0:n.session)?void 0:e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({slot:"close"})}),a=await r.json().catch(()=>({}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");const i=(null==(t=null==a?void 0:a.data)?void 0:t.filled)??"-",o=(null==(s=null==a?void 0:a.data)?void 0:s.batchId)??"";Ja.success(`Close auction running: filled=${i}${o?`, batch=${o}`:""}`)}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to run close auction")}finally{k(!1)}},disabled:N,className:"px-4 py-2 text-white rounded-md "+(N?"bg-indigo-400":"bg-indigo-600 hover:bg-indigo-700"),children:N?"Running Close Auction":"Run Close Auction Now"})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ops: Market Microstructure (Slippage Overrides)"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Scope"}),X.jsxs("select",{value:S,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[X.jsx("option",{value:"ticker",children:"Ticker"}),X.jsx("option",{value:"product",children:"Product"}),X.jsx("option",{value:"global",children:"Global"})]})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Targets"}),"global"===S?X.jsx("input",{disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-neutral-100",placeholder:"Global override (no targets)"}):X.jsx("select",{multiple:!0,className:"w-full px-3 py-2 border rounded-md h-28",value:E,onChange:e=>{const t=Array.from(e.target.selectedOptions).map(e=>e.value);T(t)},children:(f||[]).map(e=>X.jsx("option",{value:e.symbol,children:e.symbol},e.id))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Slip Multiplier"}),X.jsx("input",{type:"number",step:"0.1",value:D,onChange:e=>A(Number(e.target.value||"1")),className:"w-full px-3 py-2 border rounded-md",placeholder:"0.5=50%, 1.5=+50%"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Duration (sec)"}),X.jsx("input",{type:"number",value:M,onChange:e=>C(parseInt(e.target.value||"180")),className:"w-full px-3 py-2 border rounded-md"})]})]}),X.jsxs("div",{className:"flex gap-3 mt-4",children:[X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await oi.auth.getSession(),s=(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||"",n={scope:S,targets:"global"===S?[]:E,slip_mul:D,duration_sec:M},r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/set-override",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await r.json().catch(()=>({}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");Ja.success(`Override set: ${S}${"global"===S?"":" "+E.join(",")} ${D} for ${M}s`);const i=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/list-overrides",{headers:{Authorization:`Bearer ${s}`}}),o=await i.json().catch(()=>({}));P((null==o?void 0:o.data)||[])}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to set override")}},className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700",children:"Start Window"}),X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await oi.auth.getSession(),s=(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||"",n={};"global"!==S&&(n.scope=S,n.targets=E);const r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/clear-overrides",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP ${r.status}`);Ja.success("Cleared overrides");const a=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/list-overrides",{headers:{Authorization:`Bearer ${s}`}}),i=await a.json().catch(()=>({}));P((null==i?void 0:i.data)||[])}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to clear overrides")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Clear Overrides"}),X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await oi.auth.getSession(),s=(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||"",n=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/list-overrides",{headers:{Authorization:`Bearer ${s}`}}),r=await n.json().catch(()=>({}));P((null==r?void 0:r.data)||[])}catch(vj){Ja.error((null==vj?void 0:vj.message)||"Failed to load overrides")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Refresh Active"})]}),X.jsxs("div",{className:"mt-4",children:[X.jsx("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Active Overrides"}),0===O.length?X.jsx("div",{className:"text-sm text-neutral-500",children:"None"}):X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:"Scope"}),X.jsx("th",{className:"px-3 py-2",children:"Target"}),X.jsx("th",{className:"px-3 py-2",children:"xSlip"}),X.jsx("th",{className:"px-3 py-2",children:"Ends"}),X.jsx("th",{className:"px-3 py-2",children:"Note"})]})}),X.jsx("tbody",{children:O.map((e,t)=>X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:e.scope}),X.jsx("td",{className:"px-3 py-2",children:e.target||""}),X.jsx("td",{className:"px-3 py-2",children:Number(e.slip_mul).toFixed(2)}),X.jsx("td",{className:"px-3 py-2",children:new Date(e.end_at).toLocaleTimeString()}),X.jsx("td",{className:"px-3 py-2",children:e.note||""})]},e.id||t))})]})})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:x?"Edit Ticker":"Add New Ticker"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Symbol"}),X.jsx("input",{type:"text",value:y.symbol||"",onChange:e=>b({...y,symbol:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Company Name"}),X.jsx("input",{type:"text",value:y.name||"",onChange:e=>b({...y,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP SE"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Exchange"}),X.jsx("input",{type:"text",value:y.exchange||"",onChange:e=>b({...y,exchange:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., DE, FR"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"US ADR Symbol"}),X.jsx("input",{type:"text",value:y.us_adr_symbol||"",onChange:e=>b({...y,us_adr_symbol:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP (for US listing)"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Logo URL (optional)"}),X.jsx("input",{type:"text",value:y.logo_url||"",onChange:e=>b({...y,logo_url:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"https://..."})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",id:"ticker_active",checked:y.is_active||!1,onChange:e=>b({...y,is_active:e.target.checked}),className:"mr-2"}),X.jsx("label",{htmlFor:"ticker_active",className:"text-sm font-medium text-neutral-700",children:"Active"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[x&&X.jsx("button",{onClick:()=>{v(null),b({band:"top",is_active:!0})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{var e;if(o){i(!0);try{const t={...y,season_id:o.id},{data:s}=await oi.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==s?void 0:s.session)?void 0:e.access_token}`},body:JSON.stringify({action:x?"update":"create",data:x?{...t,id:x.id}:t})}),r=await n.json();if(!n.ok||!r.success)throw new Error(r.error||"Failed to save ticker");Ja.success(x?"Ticker updated successfully":"Ticker created successfully"),v(null),b({is_active:!0}),await V()}catch(t){Ja.error(t.message||"Failed to save ticker")}finally{i(!1)}}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx(Qs,{className:"w-4 h-4 inline mr-2"}),x?"Update":"Create"," Ticker"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsxs("div",{className:"px-6 py-4 border-b border-neutral-200",children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Current Tickers"}),X.jsxs("div",{className:"flex space-x-4 mt-2 text-sm",children:[X.jsxs("span",{className:"text-neutral-600",children:["Active: ",f.filter(e=>e.is_active).length]}),X.jsxs("span",{className:"text-neutral-600",children:["Total: ",f.length]})]})]}),X.jsx("div",{className:"divide-y divide-neutral-200",children:f.map(e=>X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium text-neutral-900",children:e.symbol}),X.jsx("span",{className:"ml-2 text-neutral-600",children:e.name}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.exchange&&X.jsxs("span",{className:"text-xs text-neutral-500",children:["Exch: ",e.exchange]}),e.us_adr_symbol&&X.jsxs("span",{className:"text-xs text-neutral-500",children:["US ADR: ",e.us_adr_symbol]}),e.logo_url&&X.jsxs("span",{className:"text-xs text-neutral-500 truncate max-w-[240px]",children:["Logo: ",e.logo_url]}),X.jsx("span",{className:"text-xs "+(e.is_active?"text-green-600":"text-red-600"),children:e.is_active?"Active":"Inactive"})]})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("button",{onClick:()=>{v(e),b({id:e.id,symbol:e.symbol,name:e.name,is_active:e.is_active,us_adr_symbol:e.us_adr_symbol,exchange:e.exchange,logo_url:e.logo_url||""})},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(en,{className:"w-4 h-4"})}),X.jsx("button",{onClick:()=>(async e=>{var t;if(confirm("Are you sure you want to delete this ticker?")){i(!0);try{const{data:s}=await oi.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==s?void 0:s.session)?void 0:t.access_token}`},body:JSON.stringify({action:"delete",data:{id:e}})}),r=await n.json();if(!n.ok||!r.success)throw new Error(r.error||"Failed to delete ticker");Ja.success("Ticker deleted"),g(f.filter(t=>t.id!==e))}catch(s){Ja.error(s.message||"Failed to delete ticker")}finally{i(!1)}}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:X.jsx(nn,{className:"w-4 h-4"})})]})]})},e.id))})]})]}),"revenue"===n&&X.jsxs(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Season"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items:end",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Select Season"}),X.jsxs("select",{value:(null==o?void 0:o.id)||"",onChange:e=>{const t=z.find(t=>t.id===e.target.value)||null;l(t)},className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[0===z.length&&X.jsx("option",{value:"",children:"No seasons"}),z.map(e=>X.jsxs("option",{value:e.id,children:[e.name," - ",e.status]},e.id))]})]}),X.jsx("div",{className:"md:col-span-2 text-sm text-neutral-600",children:"Enter realized revenues (in billions) for each ticker in the selected season. Changes are unlocked and can be saved anytime."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Record Actual Revenues"}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(e=>X.jsxs("div",{className:"p-3 border rounded-md",children:[X.jsxs("div",{className:"text-sm font-medium mb-1",children:[e.symbol," ",X.jsx("span",{className:"text-neutral-500",children:e.name})]}),X.jsx("input",{type:"number",step:"0.01",placeholder:"Revenue (B)",value:L[e.symbol]||"",onChange:t=>F(s=>({...s,[e.symbol]:t.target.value})),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"}),X.jsx("div",{className:"flex justify-end mt-2",children:X.jsx("button",{onClick:async()=>{var t;if(!o)return void Ja.error("Select a season");const s=L[e.symbol];if(""===s||isNaN(Number(s)))Ja.error("Enter a valid number");else try{const{data:n}=await oi.auth.getSession(),r=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/record_revenue_actuals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==n?void 0:n.session)?void 0:t.access_token}`},body:JSON.stringify({seasonId:o.id,items:[{symbol:e.symbol,actual_value:Number(s)}]})}),a=await r.json();r.ok&&a.ok?Ja.success(`Recorded for ${e.symbol}`):Ja.error(a.error||"Failed to record")}catch(vj){Ja.error("Failed to record")}},className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})})]},e.id))}),X.jsx("div",{className:"flex justify-end mt-4",children:X.jsx("button",{onClick:async()=>{var e;if(!o)return void Ja.error("Select a season");const t=Object.entries(L).filter(([,e])=>""!==e&&!isNaN(Number(e))).map(([e,t])=>({symbol:e,actual_value:Number(t)}));if(0!==t.length)try{const{data:s}=await oi.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/record_revenue_actuals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==s?void 0:s.session)?void 0:e.access_token}`},body:JSON.stringify({seasonId:o.id,items:t})}),r=await n.json();n.ok&&r.ok?Ja.success("Actual revenues recorded. Season MSE calculation triggered."):Ja.error(r.error||"Failed to record actuals")}catch(vj){Ja.error("Failed to record actuals")}else Ja.error("Enter at least one actual")},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Save Actuals for Season"})})]})]}),"badges"===n&&X.jsx(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Award Badges by Leaderboard"}),X.jsx(Cw,{activeSeason:o})]})}),"event"===n&&X.jsxs(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsx(Aw,{}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Event Scorecard"}),X.jsx(Mw,{})]})]}),"seasons"===n&&X.jsxs(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Season Management"}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("button",{onClick:async()=>{var e;if(o&&"active"===o.status){if(confirm("Are you sure you want to settle the current season? This will mark winners and reset for the next season."))try{const t=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/season_rollover",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=(await oi.auth.getSession()).data.session)?void 0:e.access_token}`},body:JSON.stringify({seasonId:o.id})}),s=await t.json();if(s.ok){Ja.success("Season settled successfully!");const{data:e}=await oi.from("seasons").select("*").order("starts_at",{ascending:!1});if(e){B(e);const t=e.find(e=>"active"===e.status);t&&l(t)}}else Ja.error(s.error||"Failed to settle season")}catch(t){Ja.error("Failed to settle season")}}else Ja.error("No active season to settle")},className:"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",disabled:!o||"active"!==o.status,children:[X.jsx(Xs,{className:"w-5 h-5 inline mr-2"}),"Settle Current Season & Start New"]}),X.jsx("p",{className:"text-sm text-neutral-600",children:"This will mark winners, award badges, and prepare the next season."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:U?"Edit Season":"Create New Season"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Season Name"}),X.jsx("input",{type:"text",value:W.name||"",onChange:e=>$({...W,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., Winter 2024"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Status"}),X.jsxs("select",{value:W.status||"upcoming",onChange:e=>$({...W,status:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[X.jsx("option",{value:"upcoming",children:"Upcoming"}),X.jsx("option",{value:"active",children:"Active"}),X.jsx("option",{value:"settling",children:"Settling"}),X.jsx("option",{value:"closed",children:"Closed"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Season Code"}),X.jsx("input",{type:"text",value:W.code||"",onChange:e=>$({...W,code:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., WINTER_2024"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Date"}),X.jsx("input",{type:"date",value:W.starts_at||"",onChange:e=>$({...W,starts_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"End Date"}),X.jsx("input",{type:"date",value:W.ends_at||"",onChange:e=>$({...W,ends_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[U&&X.jsx("button",{onClick:()=>{q(null),$({status:"upcoming"})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{try{const e=e=>{const t=(e.code||e.name||"").trim().toUpperCase();return t?t.replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,""):""},t={name:W.name,code:e(W),starts_at:W.starts_at,ends_at:W.ends_at,status:W.status||"upcoming"};if(!(t.name&&t.code&&t.starts_at&&t.ends_at))return void Ja.error("Please provide name, code, start and end dates");if(U){const{error:e}=await oi.from("seasons").update(t).eq("id",U.id);if(e){if(e)throw new Error(e.message)}else Ja.success("Season updated successfully"),q(null)}else{const{error:e}=await oi.from("seasons").insert(t);if(e){if(e)throw new Error(e.message)}else Ja.success("Season created successfully"),$({status:"upcoming"})}const{data:s}=await oi.from("seasons").select("*").order("starts_at",{ascending:!1});s&&B(s)}catch(e){Ja.error((null==e?void 0:e.message)||"Failed to save season")}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx(Qs,{className:"w-4 h-4 inline mr-2"}),U?"Update":"Create"," Season"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:X.jsx("h3",{className:"text-lg font-semibold",children:"All Seasons"})}),X.jsx("div",{className:"divide-y divide-neutral-200",children:z.map(e=>X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium text-neutral-900",children:e.name}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[X.jsx("span",{className:"px-2 py-1 rounded text-xs "+("active"===e.status?"bg-green-100 text-green-800":"upcoming"===e.status?"bg-blue-100 text-blue-800":"settling"===e.status?"bg-yellow-100 text-yellow-800":"bg-neutral-100 text-neutral-800"),children:e.status}),X.jsx("span",{className:"text-xs text-neutral-500",children:e.starts_at&&e.ends_at?`${ot(new Date(e.starts_at),"MMM dd, yyyy")} - ${ot(new Date(e.ends_at),"MMM dd, yyyy")}`:"No dates set"})]})]}),X.jsx("button",{onClick:()=>{q(e),$(e)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(en,{className:"w-4 h-4"})})]})},e.id))})]})]})]})})]})}const Iw=()=>{const[,e]=Gn(),[t,s]=Je.useState(null),[n,r]=Je.useState(!1),[a,i]=Je.useState(!0);Je.useEffect(()=>{(async()=>{const{data:{user:t}}=await oi.auth.getUser();if(!t)return Ja.error("Please sign in to access the admin panel"),void e("/leaderboard");s(t);const{data:n}=await oi.from("user_profiles").select("is_admin").eq("user_id",t.id).single();if(!(null==n?void 0:n.is_admin))return Ja.error("Access denied: Admin privileges required"),void e("/");r(!0),i(!1)})()},[e]);return a?X.jsx("div",{className:"min-h-screen flex items-center justify-center",children:X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B3D91]"})}):n?X.jsx(Pw,{user:t,onLogout:async()=>{await oi.auth.signOut(),e("/")}}):null};function Rw(){const[,e]=Gn(),[t,s]=Je.useState(!0),[n,r]=Je.useState(!1),[a,i]=Je.useState("controls");return Je.useEffect(()=>{(async()=>{const{data:{user:t}}=await oi.auth.getUser();if(!t)return Ja.error("Please sign in to access Admin"),void e("/login");const{data:n}=await oi.from("user_profiles").select("is_admin").eq("user_id",t.id).single();if(!(null==n?void 0:n.is_admin))return Ja.error("Access denied: Admin privileges required"),void e("/");r(!0),s(!1)})()},[e]),t?X.jsx("div",{className:"min-h-screen flex items-center justify-center",children:X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B3D91]"})}):n?X.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[X.jsx("div",{className:"flex items-center justify-between mb-4",children:X.jsx("h1",{className:"text-2xl font-bold",children:"Market Making  Event Admin"})}),X.jsx("div",{className:"border-b mb-4",children:X.jsxs("nav",{className:"-mb-px flex gap-6",children:[X.jsx("button",{onClick:()=>i("controls"),className:"pb-2 border-b-2 "+("controls"===a?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700"),children:"Event Controls"}),X.jsx("button",{onClick:()=>i("scorecard"),className:"pb-2 border-b-2 "+("scorecard"===a?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700"),children:"Scorecard (Live)"})]})}),"controls"===a?X.jsx(Aw,{}):X.jsx("div",{className:"mt-2",children:tt.createElement(require("@/components/admin/EventScorecardTab").default)})]}):null}function Lw(e){var t;if(e instanceof dt)return{code:"NETWORK_ERROR",retryable:!0,status:503,messageKey:"auth.networkError"};if(e instanceof ut)return{code:"INVALID_CREDENTIALS",retryable:!1,status:400,messageKey:"auth.invalidCredentials"};if(e instanceof mt)return{code:"WEAK_PASSWORD",retryable:!1,status:422,messageKey:"auth.weakPassword"};if(e instanceof ht)return{code:"SESSION_EXPIRED",retryable:!0,status:401,messageKey:"auth.sessionExpired"};if(e instanceof pt){if(429===e.status)return{code:"RATE_LIMITED",retryable:!0,status:429,messageKey:"auth.rateLimited"};if(401===e.status)return"string"==typeof e.message&&/confirm(ed)?/i.test(e.message)?{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"}:{code:"INVALID_CREDENTIALS",retryable:!1,status:401,messageKey:"auth.invalidCredentials"};if(400===e.status||422===e.status){const t=String(e.message||"").toLowerCase();return t.includes("weak password")?{code:"WEAK_PASSWORD",retryable:!1,status:e.status,messageKey:"auth.weakPassword"}:t.includes("captcha")?{code:"CAPTCHA_FAILED",retryable:!0,status:e.status,messageKey:"auth.captchaFailed"}:t.includes("invalid")&&t.includes("domain")?{code:"INVALID_DOMAIN",retryable:!1,status:e.status,messageKey:"auth.invalidDomain"}:t.includes("invalid")&&(t.includes("login")||t.includes("credentials")||t.includes("email")||t.includes("password"))?{code:"INVALID_CREDENTIALS",retryable:!1,status:e.status,messageKey:"auth.invalidCredentials"}:{code:"UNKNOWN_ERROR",retryable:!1,status:e.status,messageKey:"auth.unexpectedError"}}}const s=e;switch(null==(t=null==s?void 0:s.code)?void 0:t.toUpperCase()){case"INVALID_DOMAIN":return{code:"INVALID_DOMAIN",retryable:!1,status:400,messageKey:"auth.invalidDomain"};case"CAPTCHA_FAILED":return{code:"CAPTCHA_FAILED",retryable:!0,status:400,messageKey:"auth.captchaFailed"};case"USER_EXISTS":return{code:"USER_EXISTS",retryable:!1,status:409,messageKey:"auth.userExists"};case"EMAIL_NOT_CONFIRMED":return{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"};case"RATE_LIMITED":return{code:"RATE_LIMITED",retryable:!0,status:429,messageKey:"auth.rateLimited"};case"SESSION_EXPIRED":return{code:"SESSION_EXPIRED",retryable:!0,status:401,messageKey:"auth.sessionExpired"}}const n=String((null==s?void 0:s.message)||"").toLowerCase();return n.includes("confirm")?{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"}:n.includes("already registered")||n.includes("exists")?{code:"USER_EXISTS",retryable:!1,status:409,messageKey:"auth.userExists"}:n.includes("network")||n.includes("fetch")?{code:"NETWORK_ERROR",retryable:!0,status:503,messageKey:"auth.networkError"}:{code:"UNKNOWN_ERROR",retryable:!1,status:400,messageKey:"auth.unexpectedError"}}function Fw(e){switch(e.code){case"INVALID_CREDENTIALS":return"Invalid email or password";case"EMAIL_NOT_CONFIRMED":return"Please verify your email before signing in";case"USER_EXISTS":return"An account with this email already exists. Please sign in.";case"INVALID_DOMAIN":return"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed";case"WEAK_PASSWORD":return"Password is too weak";case"RATE_LIMITED":return"Too many attempts. Please wait and try again";case"NETWORK_ERROR":return"Network error. Please check your connection";case"SESSION_EXPIRED":return"Your session has expired. Please sign in again";case"CAPTCHA_FAILED":return"Verification failed. Please try again.";default:return"An error occurred"}}const zw=Je.forwardRef(({className:e,...t},s)=>X.jsx("div",{ref:s,"data-slot":"card",className:za("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t}));zw.displayName="Card";const Bw=Je.forwardRef(({className:e,...t},s)=>X.jsx("div",{ref:s,"data-slot":"card-header",className:za("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t}));Bw.displayName="CardHeader";const Uw=Je.forwardRef(({className:e,...t},s)=>X.jsx("h4",{ref:s,"data-slot":"card-title",className:za("leading-none",e),...t}));Uw.displayName="CardTitle";const qw=Je.forwardRef(({className:e,...t},s)=>X.jsx("p",{ref:s,"data-slot":"card-description",className:za("text-muted-foreground",e),...t}));qw.displayName="CardDescription";Je.forwardRef(({className:e,...t},s)=>X.jsx("div",{ref:s,"data-slot":"card-action",className:za("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...t})).displayName="CardAction";const Ww=Je.forwardRef(({className:e,...t},s)=>X.jsx("div",{ref:s,"data-slot":"card-content",className:za("px-6 [&:last-child]:pb-6",e),...t}));Ww.displayName="CardContent";Je.forwardRef(({className:e,...t},s)=>X.jsx("div",{ref:s,"data-slot":"card-footer",className:za("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})).displayName="CardFooter";const $w=Je.forwardRef(({className:e,type:t,...s},n)=>X.jsx("input",{type:t,className:za("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));$w.displayName="Input";const Yw=Je.forwardRef(({className:e,...t},s)=>X.jsx(be,{ref:s,className:za("flex flex-col gap-2",e),...t}));Yw.displayName=be.displayName;const Vw=Je.forwardRef(({className:e,...t},s)=>X.jsx(we,{ref:s,className:za("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t}));Vw.displayName=we.displayName;const Hw=Je.forwardRef(({className:e,...t},s)=>X.jsx(je,{ref:s,className:za("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t}));Hw.displayName=je.displayName;const Gw=Je.forwardRef(({className:e,...t},s)=>X.jsx(Ne,{ref:s,className:za("flex-1 outline-none",e),...t}));async function Kw(e){try{const{error:t}=await oi.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/set-password`});if(t)throw t;return{ok:!0}}catch(t){return{ok:!1,error:Lw(t)}}}function Qw(){const{signIn:e,signUp:t}=fi(),{t:s}=mi(),[,n]=Gn(),[r,a]=Je.useState(!1),[i,o]=Je.useState(null),[l,c]=Je.useState(!1),[d,u]=Je.useState(""),[m,h]=Je.useState(""),[p,f]=Je.useState(""),[g,x]=Je.useState(""),[v,y]=Je.useState(""),[b,w]=Je.useState("");return X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:X.jsxs("div",{className:"max-w-md w-full space-y-8",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:s("welcomeToDataScienceFrontier")}),X.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:s("signInOrCreateAccount")})]}),X.jsx(zw,{className:"mt-8",children:X.jsxs(Yw,{defaultValue:"signin",className:"w-full",children:[X.jsxs(Vw,{className:"grid w-full grid-cols-2",children:[X.jsx(Hw,{value:"signin",children:s("signIn")}),X.jsx(Hw,{value:"signup",children:s("signUp")})]}),X.jsxs(Gw,{value:"signin",children:[X.jsxs(Bw,{children:[X.jsx(Uw,{children:s("signIn")}),X.jsx(qw,{children:s("signInDescription")})]}),X.jsx(Ww,{children:X.jsxs("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{o(null);const{error:t}=await e(d,m);if(t){const e=Fw(Lw(t));o(e),Ja.error(e)}else Ja.success(s("loginSuccess")),n("/battleground")}catch(r){o(s("error")),Ja.error(s("error"))}finally{a(!1)}},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"signin-email",children:s("email")}),X.jsx($w,{id:"signin-email",type:"email",placeholder:"name@example.com",value:d,onChange:e=>u(e.target.value),required:!0,disabled:r})]}),X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"signin-password",children:s("password")}),X.jsx($w,{id:"signin-password",type:"password",value:m,onChange:e=>h(e.target.value),required:!0,disabled:r}),i&&X.jsx("div",{className:"mt-2 text-sm text-red-600",children:i})]}),X.jsx("div",{className:"flex items-center justify-between",children:X.jsx(Di,{type:"submit",className:"w-full",disabled:r,children:s(r?"loading":"signIn")})}),X.jsx("div",{className:"mt-3 text-right",children:X.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",disabled:l,onClick:async()=>{if(d){c(!0);try{(await Kw(d)).ok?Ja.success(s("passwordResetEmailSent")):Ja.error(s("auth.unexpectedError"))}finally{c(!1)}}else Ja.error(s("pleaseEnterEmail"))},children:s(l?"sending":"forgotPassword")})})]})})]}),X.jsxs(Gw,{value:"signup",children:[X.jsxs(Bw,{children:[X.jsx(Uw,{children:s("signUp")}),X.jsx(qw,{children:s("signUpDescription")})]}),X.jsx(Ww,{children:X.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g===b)if(g.length<6)Ja.error(s("passwordTooShort"));else{a(!0);try{const{error:e}=await t(p,g,v);e?Ja.error(e.message||s("signupError")):(Ja.success(s("signupSuccess")),n("/battleground"))}catch(r){Ja.error(s("error"))}finally{a(!1)}}else Ja.error(s("passwordsMustMatch"))},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"signup-username",children:s("username")}),X.jsx($w,{id:"signup-username",type:"text",placeholder:"johndoe",value:v,onChange:e=>y(e.target.value),required:!0,disabled:r})]}),X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"signup-email",children:s("email")}),X.jsx($w,{id:"signup-email",type:"email",placeholder:"name@example.com",value:p,onChange:e=>f(e.target.value),required:!0,disabled:r})]}),X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"signup-password",children:s("password")}),X.jsx($w,{id:"signup-password",type:"password",value:g,onChange:e=>x(e.target.value),required:!0,disabled:r,minLength:6})]}),X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"confirm-password",children:s("confirmPassword")}),X.jsx($w,{id:"confirm-password",type:"password",value:b,onChange:e=>w(e.target.value),required:!0,disabled:r,minLength:6})]}),X.jsx(Di,{type:"submit",className:"w-full",disabled:r,children:s(r?"loading":"signUp")})]})})]})]})})]})})}function Xw(){return X.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-neutral-900",children:X.jsx(zw,{className:"w-full max-w-md mx-4 bg-neutral-800 border-neutral-700",children:X.jsxs(Ww,{className:"pt-6",children:[X.jsxs("div",{className:"flex mb-4 gap-2 items-center",children:[X.jsx(Cs,{className:"h-10 w-10 text-red-500"}),X.jsx("h1",{className:"text-2xl font-bold text-neutral-300",children:"404 Page Not Found"})]}),X.jsx("p",{className:"mt-4 text-neutral-500 mb-6",children:"The page you are looking for might have been removed, had its name changed, or is temporarily unavailable."}),X.jsx(Jn,{to:"/",children:X.jsxs(Di,{className:"w-full bg-[#0B3D91] hover:bg-[#092E6E] text-neutral-300",children:[X.jsx("i",{className:"fas fa-home mr-2"}),"Back to Home"]})})]})})})}function Zw(){const[e,t]=Gn(),s=Je.useMemo(()=>new URLSearchParams(window.location.search),[]),[n,r]=Je.useState(!0),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState(""),[u,m]=Je.useState(""),[h,p]=Je.useState(!1);Je.useEffect(()=>{(async()=>{try{const e=s.get("token_hash")||s.get("token")||"",t=s.get("type")||"signup",n=s.get("email")||void 0;if(!e)return l("Missing token"),void r(!1);const a=[()=>oi.auth.verifyOtp({type:t,token_hash:e,email:n}),()=>oi.auth.verifyOtp({type:t,token:e,email:n}),()=>oi.auth.verifyOtp({type:"email",token_hash:e,email:n}),()=>oi.auth.verifyOtp({type:"email",token:e,email:n})];let o=!1,c=null;for(const s of a)try{const{data:e,error:t}=await s();if(t)throw t;o=!0;break}catch(vj){c=vj}if(!o)return l("Verification failed. Your link may have expired."),void r(!1);i(!0),r(!1),Ja.success("Email confirmed. Please set your password.")}catch(vj){l("Unexpected error during verification."),r(!1)}})()},[]);return X.jsx("section",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:X.jsxs("div",{className:"w-full max-w-md bg-white border border-neutral-200 rounded-lg shadow p-6",children:[X.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 mb-2",children:"Account Confirmation"}),n&&X.jsx("p",{className:"text-neutral-600",children:"Verifying your email, please wait"}),!n&&o&&X.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded p-3",children:o}),!n&&a&&X.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.length<6)Ja.error("Password must be at least 6 characters");else if(c===u){p(!0);try{const{error:e}=await oi.auth.updateUser({password:c,data:{needs_password_reset:!1}});if(e)throw e;Ja.success("Password set successfully!"),setTimeout(()=>t("/battleground"),400)}catch(s){Ja.error("Failed to set password. Please try again.")}finally{p(!1)}}else Ja.error("Passwords do not match")},className:"space-y-4 mt-4",children:[X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"password",children:"Set Password"}),X.jsx($w,{id:"password",type:"password",value:c,onChange:e=>d(e.target.value),minLength:6,required:!0})]}),X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"confirm",children:"Confirm Password"}),X.jsx($w,{id:"confirm",type:"password",value:u,onChange:e=>m(e.target.value),minLength:6,required:!0})]}),X.jsx(Di,{type:"submit",disabled:h,children:h?"Saving":"Save Password"})]})]})})}function Jw(){const[e,t]=Je.useState(""),[s,n]=Je.useState(""),[r,a]=Je.useState(!1),[i,o]=Je.useState(!1);Je.useEffect(()=>{let e=!0;const t=async()=>{try{const e=(()=>{let e="";const t=window.location.hash||"",s=t.indexOf("?");if(s>=0)e=t.slice(s+1);else{const s=t.lastIndexOf("#");s>0&&(e=t.slice(s+1))}return e||(e=window.location.search.replace(/^\?/,"")),new URLSearchParams(e)})(),t=(e.get("type"),e.get("token")||e.get("token_hash")||""),s=e.get("email")||void 0,n=e.get("access_token")||"",r=e.get("refresh_token")||"";if(n&&r)try{return void(await oi.auth.setSession({access_token:n,refresh_token:r}))}catch{}if(!t)return;const a=[()=>oi.auth.verifyOtp({type:"recovery",token_hash:t,email:s}),()=>oi.auth.verifyOtp({type:"recovery",token:t,email:s}),()=>oi.auth.verifyOtp({type:"recovery",token_hash:t}),()=>oi.auth.verifyOtp({type:"recovery",token:t})];for(const i of a)try{const{error:e}=await i();if(!e)break}catch{}}catch{}};(async()=>{await t();const{data:s}=await oi.auth.getSession();e&&o(!!s.session)})();const{data:s}=oi.auth.onAuthStateChange((t,s)=>{e&&o(!!s)});return()=>{e=!1,s.subscription.unsubscribe()}},[]);return X.jsx("section",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:X.jsxs("div",{className:"w-full max-w-md bg-white border border-neutral-200 rounded-lg shadow p-6",children:[X.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 mb-2",children:"Set Password"}),i?X.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 rounded p-3 mb-3",children:"Youre signed in. Please set your new password."}):X.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded p-3 mb-3",children:"It looks like you are not signed in. If you came here from an email link and still see this, please open the link again."}),X.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.length<6)Ja.error("Password must be at least 6 characters");else if(e===s){a(!0);try{const{error:t}=await oi.auth.updateUser({password:e,data:{needs_password_reset:!1}});if(t)throw t;Ja.success("Password updated!"),setTimeout(()=>{window.location.hash="/battleground"},400)}catch(n){Ja.error("Failed to update password. Please try again.")}finally{a(!1)}}else Ja.error("Passwords do not match")},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"password",className:"text-neutral-800",children:"New Password"}),X.jsx($w,{id:"password",type:"password",className:"bg-white text-neutral-900 border-neutral-300",value:e,onChange:e=>t(e.target.value),minLength:6,required:!0})]}),X.jsxs("div",{children:[X.jsx(Bv,{htmlFor:"confirm",className:"text-neutral-800",children:"Confirm Password"}),X.jsx($w,{id:"confirm",type:"password",className:"bg-white text-neutral-900 border-neutral-300",value:s,onChange:e=>n(e.target.value),minLength:6,required:!0})]}),X.jsx(Di,{type:"submit",disabled:r||!i,className:"bg-[#0B3D91] hover:bg-[#082D69]",children:r?"Saving":"Save Password"})]})]})})}function ej(){const{language:e,setLanguage:t}=mi();return X.jsxs("div",{className:"relative inline-flex items-center bg-gray-100 rounded-full p-0.5",children:[X.jsxs(ls,{initial:!1,children:["de"===e&&X.jsx(cs.div,{layoutId:"lang-bg",className:"absolute left-0.5 w-[calc(50%-2px)] h-[calc(100%-4px)] bg-[#0B3D91] rounded-full",initial:!1,transition:{type:"spring",stiffness:400,damping:30}},"de-bg"),"en"===e&&X.jsx(cs.div,{layoutId:"lang-bg",className:"absolute right-0.5 w-[calc(50%-2px)] h-[calc(100%-4px)] bg-[#0B3D91] rounded-full",initial:!1,transition:{type:"spring",stiffness:400,damping:30}},"en-bg")]}),X.jsx("button",{onClick:()=>t("de"),className:"relative z-10 px-3 py-1 text-sm font-medium transition-colors duration-200 rounded-full "+("de"===e?"text-white":"text-neutral-600 hover:text-neutral-900"),children:"DE"}),X.jsx("button",{onClick:()=>t("en"),className:"relative z-10 px-3 py-1 text-sm font-medium transition-colors duration-200 rounded-full "+("en"===e?"text-white":"text-neutral-600 hover:text-neutral-900"),children:"EN"})]})}Gw.displayName=Ne.displayName;const tj=(e,t,s)=>{if(e&&"reportValidity"in e){const n=ds(s,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},sj=(e,t)=>{for(const s in t.fields){const n=t.fields[s];n&&n.ref&&"reportValidity"in n.ref?tj(n.ref,s,e):n.refs&&n.refs.forEach(t=>tj(t,s,e))}},nj=(e,t)=>{t.shouldUseNativeValidation&&sj(e,t);const s={};for(const n in e){const r=ds(t.fields,n),a=Object.assign(e[n]||{},{ref:r&&r.ref});if(rj(t.names||Object.keys(e),n)){const e=Object.assign({},ds(s,n));us(e,"root",a),us(s,n,e)}else us(s,n,a)}return s},rj=(e,t)=>e.some(e=>e.startsWith(t+"."));var aj=function(e,t){for(var s={};e.length;){var n=e[0],r=n.code,a=n.message,i=n.path.join(".");if(!s[i])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];s[i]={message:o.message,type:o.code}}else s[i]={message:a,type:r};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=s[i].types,c=l&&l[n.code];s[i]=ms(i,t,s,r,c?[].concat(c,n.message):n.message)}e.shift()}return s},ij=function(e,t,s){return void 0===s&&(s={}),function(n,r,a){try{return Promise.resolve(function(r,i){try{var o=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](n,t)).then(function(e){return a.shouldUseNativeValidation&&sj({},a),{errors:{},values:s.raw?n:e}})}catch(l){return i(l)}return o&&o.then?o.then(void 0,i):o}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:nj(aj(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(i){return Promise.reject(i)}}};const oj={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},lj=hs.object({email:hs.string().email().refine(e=>e.endsWith("@fs-students.de")||e.endsWith("@fs.de"),{message:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed"}),password:hs.string().min(6,"Password must be at least 6 characters")}),cj=hs.object({email:hs.string().email().refine(e=>e.endsWith("@fs-students.de")||e.endsWith("@fs.de"),{message:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed"}),password:hs.string().min(6,"Password must be at least 6 characters")}),dj="true"===(null==(q=null==(B=null==(z=null==oj?void 0:oj.VITE_DISABLE_SIGNUP)?void 0:z.toString)?void 0:(U=B.call(z)).toLowerCase)?void 0:q.call(U));function uj({isOpen:e,onClose:t}){const[,s]=Gn(),{t:n}=mi(),[r,a]=Je.useState(()=>"signup"===localStorage.getItem("authMode")?"signup":"signin"),[i,o]=Je.useState(!1),[l,c]=Je.useState(null),[d,u]=Je.useState(null),[m,h]=Je.useState(0),[p,f]=Je.useState(""),[g,x]=Je.useState(!1);Je.useState(!1);const[v,y]=Je.useState(null),b=ps({resolver:ij(lj)}),w=ps({resolver:ij(cj)});Je.useEffect(()=>{if(e){const e="signup"===localStorage.getItem("authMode")?"signup":"signin";a(dj&&"signup"===e?"signin":e),u(null),h(e=>e+1)}},[e]);return e?X.jsx(ls,{children:e&&X.jsxs(X.Fragment,{children:[X.jsx(cs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:t}),X.jsx(cs.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-neutral-200 overflow-hidden w-full max-w-md",onClick:e=>e.stopPropagation(),children:[X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 relative border-b border-neutral-200",children:[X.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-neutral-500 hover:text-neutral-700 transition-colors",children:X.jsx(mn,{className:"w-6 h-6"})}),X.jsx("h2",{className:"text-2xl font-inter font-bold text-[#0B3D91]",children:n("signin"===r?"auth.signIn":"signup"===r?"auth.signUp":"auth.resetPassword")}),X.jsx("p",{className:"text-neutral-600 mt-1",children:n("reset"===r?"auth.resetPasswordInstructions":"auth.loginCta")})]}),X.jsx("div",{className:"p-6",children:g?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[X.jsx("h3",{className:"text-green-800 font-semibold mb-2",children:n("auth.registrationSuccessTitle")}),X.jsx("p",{className:"text-green-700 text-sm",children:n("auth.registrationSuccessBody")}),v&&X.jsxs("div",{className:"mt-3 text-sm text-green-800",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium",children:"Email:"})," ",v]}),X.jsx("button",{onClick:async()=>{try{if(!v)return;(await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/auth_resend_confirmation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo"},body:JSON.stringify({email:v,language:localStorage.getItem("lang")||"en"})})).ok?Ja.success(n("leaderboard.emailVerificationSent")):Ja.error(n("auth.unexpectedError"))}catch(vj){Ja.error(n("auth.unexpectedError"))}},className:"mt-2 inline-flex items-center px-3 py-1.5 rounded-md border border-green-300 text-green-800 hover:bg-green-100",children:"Resend email"})]})]}),X.jsx("button",{onClick:()=>{x(!1),a("signin")},className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200",children:n("auth.goToSignIn")})]}):"reset"===r?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:n("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{type:"email",value:p,onChange:e=>f(e.target.value),placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]})]}),X.jsx("button",{onClick:async()=>{if(p&&(p.endsWith("@fs-students.de")||p.endsWith("@fs.de"))){o(!0);try{const e=await Kw(p);if(!e.ok)return void Ja.error(n(e.error.messageKey));Ja.success(n("auth.resetEmailSent")),a("signin"),f("")}catch(e){Ja.error(n("auth.unexpectedError"))}finally{o(!1)}}else Ja.error(n("auth.invalidDomain"))},disabled:i,className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:n(i?"auth.loading":"auth.sendResetEmail")}),X.jsx("button",{onClick:()=>a("signin"),className:"w-full py-2 text-neutral-600 hover:text-neutral-800 transition-colors",children:n("auth.backToSignIn")})]}):"signin"===r?X.jsxs("form",{onSubmit:b.handleSubmit(async e=>{if(!!("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)||d){o(!0),c(null);try{const r=await async function(e,t){try{const{data:s,error:n}=await oi.auth.signInWithPassword({email:e,password:t});if(n)throw n;return{ok:!0,data:s}}catch(s){return{ok:!1,error:Lw(s)}}}(e.email,e.password);if(!r.ok){const e=Fw(r.error);return c(e),Ja.error(e),void r.error.code}Ja.success(n("auth.welcomeBack")),t(),s("/battleground")}catch(r){const e=Lw(r);Ja.error(n(e.messageKey))}finally{o(!1)}}else Ja.error(n("auth.completeVerification"))}),className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:n("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...b.register("email"),type:"email",placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),b.formState.errors.email&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cs,{className:"w-4 h-4 mr-1"}),b.formState.errors.email.message]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:n("auth.password")}),X.jsxs("div",{className:"relative",children:[X.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...b.register("password"),type:"password",placeholder:"",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),b.formState.errors.password&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cs,{className:"w-4 h-4 mr-1"}),b.formState.errors.password.message]}),l&&X.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[X.jsx(Cs,{className:"w-4 h-4 mr-1"}),l]})]}),X.jsx("div",{className:"flex justify-center my-4",children:X.jsx(Cv,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>u(e),onExpire:()=>u(null),onError:()=>{Ja.error(n("auth.captchaFailed")),u(null)},theme:"light",size:"normal"},`signin-${m}`)}),X.jsx("button",{type:"submit",disabled:i||!d,className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?X.jsxs("span",{className:"flex items-center justify-center",children:[X.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[X.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),X.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),n("auth.loading")]}):n("auth.signIn")}),X.jsxs("div",{className:"text-center space-y-2",children:[X.jsx("button",{type:"button",onClick:()=>a("reset"),className:"text-sm text-neutral-600 hover:text-[#0B3D91] transition-colors",children:n("auth.forgotPassword")}),X.jsx("div",{className:"text-sm text-neutral-600",children:dj?X.jsx("span",{children:"Registration currently disabled."}):X.jsxs(X.Fragment,{children:[n("auth.needAccount")," ",X.jsx("button",{type:"button",onClick:()=>{a("signup"),u(null),h(e=>e+1),localStorage.setItem("authMode","signup")},className:"text-[#0B3D91] hover:text-[#082D69] font-medium",children:n("auth.signUp")})]})})]})]}):X.jsxs("form",{onSubmit:w.handleSubmit(async e=>{if(!!("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)||d){o(!0);try{const t=(null==oj?void 0:oj.VITE_EMAIL_REDIRECT_URL)||`${window.location.origin}/#/auth-confirm`,{data:s,error:r}=await oi.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:t,data:{username:e.email.split("@")[0]}}});if(r)return void(String(r.message||"").toLowerCase().includes("already registered")?(Ja.error(n("auth.userExists")),a("signin")):Ja.error(n("auth.unexpectedError")));y(e.email),x(!0),Ja.success(n("auth.registrationSuccessTitle"))}catch(vj){Ja.error(n("auth.unexpectedError"))}finally{o(!1),u(null),h(e=>e+1)}}else Ja.error(n("auth.completeVerification"))}),className:"space-y-4","aria-disabled":dj,children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:n("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...w.register("email"),type:"email",placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),w.formState.errors.email&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cs,{className:"w-4 h-4 mr-1"}),w.formState.errors.email.message]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:n("auth.password")}),X.jsxs("div",{className:"relative",children:[X.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...w.register("password"),type:"password",placeholder:"",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),w.formState.errors.password&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cs,{className:"w-4 h-4 mr-1"}),w.formState.errors.password.message]})]}),X.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center gap-3",children:[X.jsx("img",{src:"https://www.frankfurt-school.de/themes/custom/fs_theme/logo.svg",alt:"Frankfurt School Logo",className:"w-10 h-10 object-contain",onError:e=>{e.currentTarget.style.display="none"}}),X.jsxs("div",{className:"text-sm text-blue-700",children:[X.jsx("div",{className:"font-semibold",children:"Exclusive to Frankfurt School students"}),X.jsx("div",{children:"Use your @fs-students.de (or @fs.de) email to register. Email confirmation is required."})]})]}),X.jsx("div",{className:"flex justify-center my-4",children:X.jsx(Cv,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>u(e),onExpire:()=>u(null),onError:()=>{Ja.error(n("auth.captchaFailed")),u(null)},theme:"light",size:"normal"},`signup-${m}`)}),X.jsx("button",{type:"submit",disabled:dj||i,className:"w-full py-3 font-medium rounded-md transition-colors "+(dj?"bg-neutral-300 text-white cursor-not-allowed":"bg-[#0B3D91] text-white hover:bg-[#082D69]"),children:i?X.jsxs("span",{className:"flex items-center justify-center",children:[X.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[X.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),X.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),n("auth.loading")]}):n("auth.signUp")}),X.jsxs("div",{className:"text-center text-sm text-neutral-600",children:[n("auth.alreadyRegistered")," ",X.jsx("button",{type:"button",onClick:()=>{a("signin"),u(null),h(e=>e+1)},className:"text-[#0B3D91] hover:text-[#082D69] font-medium",children:n("auth.signIn")})]})]})})]})})]})}):null}const mj=({isOpen:e,onClose:t})=>{const[s,n]=Gn(),{t:r}=mi(),{user:a,isAdmin:i,signOut:o}=fi(),[l,c]=Je.useState(!1),d=[{path:"/",icon:"fa-home",label:r("navigation.home")},{path:"/members",icon:"fa-users",label:r("navigation.members")},{path:"/events",icon:"fa-calendar-alt",label:r("navigation.events")},{path:"/battleground",icon:"fa-trophy",label:r("navigation.battleground")},{path:"/contact",icon:"fa-envelope",label:r("navigation.contact")}],u=i?[...d,{path:"/admin",icon:"fa-shield-alt",label:r("admin.title")}]:d,m=e=>"flex items-center px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-md transition-colors "+((e=>s===e)(e)?"bg-blue-50 text-blue-600 font-medium":"");return X.jsxs(X.Fragment,{children:[X.jsx("aside",{id:"sidebar",className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out border-r border-gray-200 "+(e?"translate-x-0":"-translate-x-full md:translate-x-0"),children:X.jsxs("div",{className:"flex flex-col h-full",children:[X.jsxs("div",{className:"relative border-b border-gray-200",children:[X.jsxs("div",{className:"absolute inset-0",children:[X.jsx("img",{src:"/bullrun.webp",alt:"Bull run",className:"w-full h-full object-cover"}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/50 via-black/30 to-black/20"})]}),X.jsx("div",{className:"relative px-4 py-6",children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs(Jn,{href:"/",className:"flex items-center",children:[X.jsx("img",{src:"/fs-qds-logo.png",alt:"FS Quant & Data Science",className:"h-12 w-12 md:h-14 md:w-14 mr-2 object-contain drop-shadow-sm"}),X.jsx("div",{children:X.jsx("div",{className:"font-inter font-extrabold text-2xl leading-tight uppercase tracking-widest bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-200 drop-shadow-sm",children:"FS Quant"})})]}),X.jsx("button",{id:"closeSidebar",className:"md:hidden text-white/90 hover:text-white",onClick:t,children:X.jsx("i",{className:"fas fa-times"})})]})})]}),X.jsx("nav",{className:"flex-1 py-4 overflow-y-auto bg-white",children:X.jsx("ul",{children:u.map(e=>X.jsx("li",{className:"px-2 py-1",children:X.jsxs(Jn,{href:e.path,className:m(e.path),onClick:()=>{window.innerWidth<768&&t()},children:[X.jsx("i",{className:`fas ${e.icon} w-5`}),X.jsx("span",{className:"ml-3",children:e.label}),"/battleground"===e.path&&X.jsx("span",{className:"ml-2 inline-flex",children:X.jsxs("span",{className:"relative flex h-2 w-2",children:[X.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),X.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})})]})},e.path))})}),X.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[a?X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"text-sm text-gray-600",children:[r("sidebar.loggedInAs"),X.jsx("div",{className:"font-medium text-gray-800 truncate",children:a.email})]}),X.jsxs("button",{onClick:async()=>{try{await o()}catch(e){Ja.error(r("auth.unexpectedError"))}},className:"w-full px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),r("common.logout")]})]}):X.jsxs("div",{className:"space-y-2",children:[X.jsxs("button",{onClick:()=>{localStorage.setItem("authMode","signin"),window.innerWidth<768&&t(),c(!0)},className:"w-full px-4 py-2 text-sm font-medium text-white bg-[#0B3D91] hover:bg-[#082D69] rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),r("auth.signIn")]}),X.jsxs("button",{onClick:()=>{localStorage.setItem("authMode","signup"),window.innerWidth<768&&t(),c(!0)},className:"w-full px-4 py-2 text-sm font-medium text-[#0B3D91] bg-blue-50 hover:bg-blue-100 rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-user-plus mr-2"}),r("auth.signUp")]})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm font-medium text-gray-700",children:r("common.language")}),X.jsx(ej,{})]})]})]})}),X.jsx(uj,{isOpen:l,onClose:()=>c(!1)})]})},hj=()=>{const{t:e}=mi();return X.jsx("footer",{className:"bg-gradient-to-br from-gray-50 to-blue-50 text-gray-700 py-12 border-t border-gray-200",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[X.jsx("div",{children:X.jsxs("div",{className:"flex items-center mb-4",children:[X.jsx("img",{src:"/fs-qds-logo.png",alt:"FS Quant Logo",className:"h-10 w-10 md:h-12 md:w-12 mr-2 object-contain"}),X.jsx("div",{children:X.jsx("div",{className:"font-inter font-extrabold text-lg leading-tight uppercase tracking-widest text-gray-800",children:"FS Quant"})})]})}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-inter font-semibold text-lg mb-4 text-gray-800",children:e("footer.quickLinks")}),X.jsxs("ul",{className:"space-y-2 text-sm",children:[X.jsx("li",{children:X.jsx(Jn,{href:"/",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.home")})}),X.jsx("li",{children:X.jsx(Jn,{href:"/members",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.members")})}),X.jsx("li",{children:X.jsx(Jn,{href:"/events",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.events")})}),X.jsx("li",{children:X.jsx(Jn,{href:"/battleground",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.battleground")})})]})]}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-inter font-semibold text-lg mb-4 text-gray-800",children:e("navigation.contact")}),X.jsxs("address",{className:"not-italic text-sm text-gray-600",children:[X.jsx("p",{children:"Frankfurt School of Finance & Management GmbH"}),X.jsx("p",{children:"Adickesallee 32-34"}),X.jsx("p",{children:"60322 Frankfurt am Main"}),X.jsxs("p",{className:"mt-2",children:[e("auth.email"),": fs.data.science00@gmail.com"]})]})]})]}),X.jsxs("div",{className:"border-t border-gray-300 pt-8 flex flex-col md:flex-row justify-between items-start gap-6",children:[X.jsxs("div",{className:"text-gray-500 text-sm",children:[" ",(new Date).getFullYear()," FS Quant & Data Science. Protected under MIT License.",X.jsx("span",{className:"block mt-2 text-xs text-gray-500 leading-relaxed",children:"Disclaimer  All opinions expressed are the personal views of the student members of the club. Frankfurt School of Finance & Management GmbH assumes no responsibility or liability for any statements, content, or activities of this club."})]}),X.jsxs("div",{className:"flex space-x-4 self-center md:self-auto",children:[X.jsx("a",{href:"https://de.linkedin.com/company/fs-quant",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"LinkedIn",children:X.jsx("i",{className:"fab fa-linkedin"})}),X.jsx("a",{href:"https://github.com/fsqds/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"GitHub",children:X.jsx("i",{className:"fab fa-github"})}),X.jsx("a",{href:"https://www.instagram.com/fs_quant/?hl=en",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"Instagram",children:X.jsx("i",{className:"fab fa-instagram"})})]})]})]})})},pj=({onOpenSidebar:e})=>X.jsxs("header",{className:"md:hidden bg-white text-gray-800 p-4 flex items-center justify-between sticky top-0 z-40 shadow-md border-b border-gray-200",children:[X.jsx("button",{className:"text-gray-600",onClick:e,children:X.jsx("i",{className:"fas fa-bars"})}),X.jsx("div",{className:"font-inter font-bold text-sm",children:"FS QDS"}),X.jsx(ej,{})]});function fj(){const e=window.location.hash||"#/";return(e.startsWith("#")?e.slice(1):e)||"/"}function gj(){const[e,t]=Je.useState(()=>fj());Je.useEffect(()=>{const e=()=>t(fj());return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);return[e,e=>{const s=e.startsWith("/")?`#${e}`:e.startsWith("#")?e:`#/${e}`;window.location.hash!==s&&(window.location.hash=s),t(fj())}]}function xj(){const[e,t]=Je.useState(!1),s=()=>{t(!e)};return Je.useEffect(()=>{const e=()=>{window.innerWidth>=768?t(!0):t(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),X.jsx(hn,{children:X.jsx(Br,{client:Ur,children:X.jsx(pi,{children:X.jsxs(ui,{children:[(()=>{const n="undefined"!=typeof window&&window.location.hostname.endsWith("fsqds.org"),r="undefined"!=typeof window&&/^#\//.test(String(window.location.hash||""));return n&&!r?X.jsx(Qn,{children:X.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-roboto text-gray-700",children:[X.jsx(mj,{isOpen:e,onClose:()=>t(!1)}),X.jsxs("div",{className:"flex-1 md:ml-64",children:[X.jsx(pj,{onOpenSidebar:s}),X.jsxs("main",{children:[X.jsx(si,{}),X.jsxs(tr,{children:[X.jsx(Zn,{path:"/",component:yi}),X.jsx(Zn,{path:"/members",component:wi}),X.jsx(Zn,{path:"/projects",component:ji}),X.jsx(Zn,{path:"/events",component:ox}),X.jsx(Zn,{path:"/battleground",component:Tw}),X.jsx(Zn,{path:"/contact",component:Dw}),X.jsx(Zn,{path:"/admin",component:Iw}),X.jsx(Zn,{path:"/admin/events",component:Rw}),X.jsx(Zn,{path:"/login",component:Qw}),X.jsx(Zn,{path:"/auth/confirm",component:Zw}),X.jsx(Zn,{path:"/set-password",component:Jw}),X.jsx(Zn,{component:Xw})]}),X.jsx(hj,{})]})]})]})}):X.jsx(Qn,{hook:gj,children:X.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-roboto text-gray-700",children:[X.jsx(mj,{isOpen:e,onClose:()=>t(!1)}),X.jsxs("div",{className:"flex-1 md:ml-64",children:[X.jsx(pj,{onOpenSidebar:s}),X.jsxs("main",{children:[X.jsx(si,{}),X.jsxs(tr,{children:[X.jsx(Zn,{path:"/",component:yi}),X.jsx(Zn,{path:"/members",component:wi}),X.jsx(Zn,{path:"/projects",component:ji}),X.jsx(Zn,{path:"/events",component:ox}),X.jsx(Zn,{path:"/battleground",component:Tw}),X.jsx(Zn,{path:"/contact",component:Dw}),X.jsx(Zn,{path:"/admin",component:Iw}),X.jsx(Zn,{path:"/admin/events",component:Rw}),X.jsx(Zn,{path:"/login",component:Qw}),X.jsx(Zn,{path:"/auth/confirm",component:Zw}),X.jsx(Zn,{path:"/set-password",component:Jw}),X.jsx(Zn,{component:Xw})]}),X.jsx(hj,{})]})]})]})})})(),X.jsx(Ha,{}),X.jsx(Ga,{}),X.jsx(ei,{})]})})})})}!function(){try{const{pathname:e,search:t,hash:s,hostname:n}=window.location,r=n.endsWith("fsqds.org"),a=String(s||""),i=decodeURIComponent(a),o=/(?:#|[?&#])access_token=/.test(i),l=/[?#&]type=recovery/.test(i),c=/[?#&]type=(signup|magiclink)/.test(i),d=/[?&](access_token|token|token_hash)=/.test(t),u=/[?&]type=recovery/.test(t),m=/[?&]type=(signup|magiclink)/.test(t),h=()=>{if(!i)return"";const e=i.indexOf("?");if(e>=0)return i.slice(e+1);const t=i.lastIndexOf("#");return t>0?i.slice(t+1):""};if(/^#\/set-password/.test(i)&&(o||l)||!/^#\//.test(i)&&(o||l)){const e=h();return void(r?window.history.replaceState(null,"","/set-password"+(e?`?${e}`:"")):window.location.hash="/set-password"+(e?`?${e}`:""))}if(e.startsWith("/set-password")&&(d||u))return void(r?i&&"#"!==i&&window.history.replaceState(null,"",`/set-password${t}`):i&&"#"!==i&&i.startsWith("#/")||(window.history.replaceState(null,"","/"),window.location.hash=`/set-password${t}`));if(o&&c||d&&m||/%23access_token=/.test(a)){const e=h()||(t.startsWith("?")?t.slice(1):"");return void(r?window.history.replaceState(null,"","/battleground"+(e?`?${e}`:"")):window.location.hash="/battleground"+(e?`?${e}`:""))}if(!(r||"/"===e||i&&"#"!==i))return void(window.location.hash=`${e}${t}`)}catch{}}(),W(document.getElementById("root")).render(X.jsx(xj,{}));
