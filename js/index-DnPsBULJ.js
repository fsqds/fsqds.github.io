var e,t,n,s,r,a,i,o,l,c,d,u,m,h,p,f,g,x,v,y,b,w,j,N,k,S,_,E,T,D,A,M,C,O,P,I,R,L,F,z,B,U,q,W,$=e=>{throw TypeError(e)},Y=(e,t,n)=>t.has(e)||$("Cannot "+n),V=(e,t,n)=>(Y(e,t,"read from private field"),n?n.call(e):t.get(e)),H=(e,t,n)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),G=(e,t,n,s)=>(Y(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),K=(e,t,n)=>(Y(e,t,"access private method"),n),Q=(e,t,n,s)=>({set _(s){G(e,t,s,n)},get _(){return V(e,t,s)}});import{j as X,c as Z,a as J,u as ee,B as te,P as ne,V as se,b as re,d as ae,e as ie,f as oe,R as le,g as ce,h as de,i as ue,S as me,O as he,C as pe,k as fe,T as ge,D as xe,l as ve,m as ye,n as be,L as we,o as je,p as Ne,q as ke,r as Se,s as _e,I as Ee,t as Te,v as De,w as Ae,x as Me,y as Ce,z as Oe,A as Pe,E as Ie,F as Re,G as Le,H as Fe,J as ze,K as Be,M as Ue,N as qe,Q as We,U as $e,W as Ye,X as Ve,Y as He,Z as Ge,_ as Ke,$ as Qe,a0 as Xe}from"./react-ui-Di4LmEBY.js";import{a as Ze,r as Je,c as et,R as tt,g as nt,b as st,d as rt}from"./react-core-BRxKgMa0.js";import{t as at,c as it,f as ot}from"./utils-D5NkSKB_.js";import{c as lt,_ as ct,A as dt,a as ut,b as mt,d as ht,e as pt}from"./supabase-D9YxOUMU.js";import{_ as ft,a as gt,b as xt,c as vt,d as yt,e as bt,f as wt,t as jt,P as Nt,g as kt,h as St,k as _t,i as Et,j as Tt,l as Dt,m as At,n as Mt,o as Ct,p as Ot,q as Pt,r as It,s as Rt,u as Lt,v as Ft,w as zt,x as Bt,y as Ut,z as qt,A as Wt,B as $t,R as Yt,L as Vt,C as Ht,X as Gt,Y as Kt,T as Qt,D as Xt,E as Zt,F as Jt,G as en,H as tn,S as nn,I as sn,J as rn,K as an,M as on,N as ln}from"./charts-l1uWw2ZA.js";import{A as cn,m as dn}from"./animations-BMBnvKqr.js";import{g as un,s as mn,a as hn,z as pn,u as fn}from"./forms-Bm64xVdr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var gn=Ze;W=gn.createRoot,gn.hydrateRoot;
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const xn=(...e)=>e.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" ");
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var vn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Je.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:i,...o},l)=>Je.createElement("svg",{ref:l,...vn,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:xn("lucide",r),...o},[...i.map(([e,t])=>Je.createElement(e,t)),...Array.isArray(a)?a:[a]])),bn=(e,t)=>{const n=Je.forwardRef(({className:n,...s},r)=>{return Je.createElement(yn,{ref:r,iconNode:t,className:xn(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...s});var a});return n.displayName=`${e}`,n},wn=bn("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),jn=bn("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Nn=bn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),kn=bn("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Sn=bn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),_n=bn("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),En=bn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Tn=bn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Dn=bn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),An=bn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Mn=bn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Cn=bn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),On=bn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Pn=bn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),In=bn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Rn=bn("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Ln=bn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Fn=bn("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),zn=bn("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Bn=bn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Un=bn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),qn=bn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Wn=bn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),$n=bn("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Yn=bn("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Vn=bn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Hn=bn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Gn=bn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kn=bn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Qn=bn("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Xn=bn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Zn=bn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Jn=bn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),es=bn("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ts=bn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ns=bn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ss=bn("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),rs=bn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),as=bn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),is=bn("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),os=bn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class ls extends Je.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:X.jsx("div",{className:"max-w-md w-full",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[X.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:X.jsx(ns,{className:"w-6 h-6 text-red-600"})}),X.jsx("h1",{className:"text-xl font-semibold text-center text-gray-900 mb-2",children:"Oops! Something went wrong"}),X.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry for the inconvenience. The application encountered an unexpected error."}),!1,X.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[X.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[X.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),X.jsxs("button",{onClick:()=>{this.handleReset(),window.location.href="/"},className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:[X.jsx(zn,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})})}):this.props.children}}var cs={exports:{}},ds={},us=Je;var ms="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},hs=us.useState,ps=us.useEffect,fs=us.useLayoutEffect,gs=us.useDebugValue;function xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ms(e,n)}catch(s){return!0}}var vs="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=hs({inst:{value:n,getSnapshot:t}}),r=s[0].inst,a=s[1];return fs(function(){r.value=n,r.getSnapshot=t,xs(r)&&a({inst:r})},[e,n,t]),ps(function(){return xs(r)&&a({inst:r}),e(function(){xs(r)&&a({inst:r})})},[e]),gs(n),n};ds.useSyncExternalStore=void 0!==us.useSyncExternalStore?us.useSyncExternalStore:vs,cs.exports=ds;var ys=cs.exports;const bs=et.useInsertionEffect,ws=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?Je.useLayoutEffect:Je.useEffect,js=bs||ws,Ns=e=>{const t=Je.useRef([e,(...e)=>t[0](...e)]).current;return js(()=>{t[0]=e}),t[1]},ks="pushState",Ss="replaceState",_s=["popstate",ks,Ss,"hashchange"],Es=e=>{for(const t of _s)addEventListener(t,e);return()=>{for(const t of _s)removeEventListener(t,e)}},Ts=(e,t)=>ys.useSyncExternalStore(Es,e,t),Ds=()=>location.search,As=()=>location.pathname,Ms=({ssrPath:e}={})=>Ts(As,e?()=>e:As),Cs=(e,{replace:t=!1,state:n=null}={})=>history[t?Ss:ks](n,"",e),Os=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[Os]){for(const e of[ks,Ss]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,Os,{value:!0})}const Ps=(e="")=>"/"===e?"":e,Is=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(Rs(Ps(e)),Rs(t)),Rs=e=>{try{return decodeURI(e)}catch(t){return e}},Ls={hook:(e={})=>[Ms(e),Cs],searchHook:({ssrSearch:e=""}={})=>Ts(Ds,()=>e),parser:function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,r,a,i=[],o="",l=e.split("/");for(l[0]||l.shift();r=l.shift();)"*"===(n=r[0])?(i.push(n),o+="?"===r[1]?"(?:/(.*))?":"/(.*)"):":"===n?(s=r.indexOf("?",1),a=r.indexOf(".",1),i.push(r.substring(1,~s?s:~a?a:r.length)),o+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(o+=(~s?"?":"")+"\\"+r.substring(a))):o+="/"+r;return{keys:i,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}},base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Fs=Je.createContext(Ls),zs=()=>Je.useContext(Fs),Bs={},Us=Je.createContext(Bs),qs=e=>{const[t,n]=e.hook(e);return[Is(e.base,t),Ns((t,s)=>n(((e,t)=>"~"===e[0]?e.slice(1):Ps(t)+e)(t,e.base),s))]},Ws=()=>qs(zs()),$s=(e,t,n,s)=>{const{pattern:r,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),i=r.exec(n)||[],[o,...l]=i;return void 0!==o?[!0,(()=>{const e=!1!==a?Object.fromEntries(a.map((e,t)=>[e,l[t]])):i.groups;let t={...l};return e&&Object.assign(t,e),t})(),...s?[o]:[]]:[!1,null]},Ys=({children:e,...t})=>{var n,s;const r=zs(),a=t.hook?Ls:r;let i=a;const[o,l]=(null==(n=t.ssrPath)?void 0:n.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=o),t.hrefs=t.hrefs??(null==(s=t.hook)?void 0:s.hrefs);let c=Je.useRef({}),d=c.current,u=d;for(let m in a){const e="base"===m?a[m]+(t[m]||""):t[m]||a[m];d===u&&e!==u[m]&&(c.current=u={...u}),u[m]=e,e!==a[m]&&(i=u)}return Je.createElement(Fs.Provider,{value:i,children:e})},Vs=({children:e,component:t},n)=>t?Je.createElement(t,{params:n}):"function"==typeof e?e(n):e,Hs=({path:e,nest:t,match:n,...s})=>{const r=zs(),[a]=qs(r),[i,o,l]=n??$s(r.parser,e,a,t),c=(e=>{let t=Je.useRef(Bs),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return 0===Object.keys(e).length&&(n=e),t.current=n})({...Je.useContext(Us),...o});if(!i)return null;const d=l?Je.createElement(Ys,{base:l},Vs(s,c)):Vs(s,c);return Je.createElement(Us.Provider,{value:c,children:d})},Gs=Je.forwardRef((e,t)=>{const n=zs(),[s,r]=qs(n),{to:a="",href:i=a,onClick:o,asChild:l,children:c,className:d,replace:u,state:m,...h}=e,p=Ns(t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(null==o||o(t),t.defaultPrevented||(t.preventDefault(),r(i,e)))}),f=n.hrefs("~"===i[0]?i.slice(1):n.base+i,n);return l&&Je.isValidElement(c)?Je.cloneElement(c,{onClick:p,href:f}):Je.createElement("a",{...h,onClick:p,href:f,className:(null==d?void 0:d.call)?d(s===i):d,children:c,ref:t})}),Ks=e=>Array.isArray(e)?e.flatMap(e=>Ks(e&&e.type===Je.Fragment?e.props.children:e)):[e],Qs=({children:e,location:t})=>{const n=zs(),[s]=qs(n);for(const r of Ks(e)){let e=0;if(Je.isValidElement(r)&&(e=$s(n.parser,r.props.path,t||s,r.props.nest))[0])return Je.cloneElement(r,{match:e})}return null};var Xs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zs="undefined"==typeof window||"Deno"in globalThis;function Js(){}function er(e,t){return"function"==typeof e?e(t):e}function tr(e,t){const{type:n="all",exact:s,fetchStatus:r,predicate:a,queryKey:i,stale:o}=e;if(i)if(s){if(t.queryHash!==sr(i,t.options))return!1}else if(!ar(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!r||r===t.state.fetchStatus)&&!(a&&!a(t)))}function nr(e,t){const{exact:n,status:s,predicate:r,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(rr(t.options.mutationKey)!==rr(a))return!1}else if(!ar(t.options.mutationKey,a))return!1}return(!s||t.state.status===s)&&!(r&&!r(t))}function sr(e,t){return((null==t?void 0:t.queryKeyHashFn)||rr)(e)}function rr(e){return JSON.stringify(e,(e,t)=>lr(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function ar(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(n=>!ar(e[n],t[n])))}function ir(e,t){if(e===t)return e;const n=or(e)&&or(t);if(n||lr(e)&&lr(t)){const s=n?e:Object.keys(e),r=s.length,a=n?t:Object.keys(t),i=a.length,o=n?[]:{};let l=0;for(let c=0;c<i;c++){const r=n?c:a[c];(!n&&s.includes(r)||n)&&void 0===e[r]&&void 0===t[r]?(o[r]=void 0,l++):(o[r]=ir(e[r],t[r]),o[r]===e[r]&&void 0!==e[r]&&l++)}return r===i&&l===r?e:o}return t}function or(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function lr(e){if(!cr(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!cr(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function cr(e){return"[object Object]"===Object.prototype.toString.call(e)}function dr(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?ir(e,t):t}function ur(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function mr(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var hr=Symbol();function pr(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==hr?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var fr=new(s=class extends Xs{constructor(){super(),H(this,e),H(this,t),H(this,n),G(this,n,e=>{if(!Zs&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){V(this,t)||this.setEventListener(V(this,n))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=V(this,t))||e.call(this),G(this,t,void 0))}setEventListener(e){var s;G(this,n,e),null==(s=V(this,t))||s.call(this),G(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){V(this,e)!==t&&(G(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof V(this,e)?V(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,s),gr=new(o=class extends Xs{constructor(){super(),H(this,r,!0),H(this,a),H(this,i),G(this,i,e=>{if(!Zs&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){V(this,a)||this.setEventListener(V(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=V(this,a))||e.call(this),G(this,a,void 0))}setEventListener(e){var t;G(this,i,e),null==(t=V(this,a))||t.call(this),G(this,a,e(this.setOnline.bind(this)))}setOnline(e){V(this,r)!==e&&(G(this,r,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return V(this,r)}},r=new WeakMap,a=new WeakMap,i=new WeakMap,o);function xr(e){return Math.min(1e3*2**e,3e4)}function vr(e){return"online"!==(e??"online")||gr.isOnline()}var yr=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function br(e){return e instanceof yr}function wr(e){let t,n=!1,s=0,r=!1;const a=function(){let e,t;const n=new Promise((n,s)=>{e=n,t=s});function s(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{s({status:"fulfilled",value:t}),e(t)},n.reject=e=>{s({status:"rejected",reason:e}),t(e)},n}(),i=()=>fr.isFocused()&&("always"===e.networkMode||gr.isOnline())&&e.canRun(),o=()=>vr(e.networkMode)&&e.canRun(),l=n=>{var s;r||(r=!0,null==(s=e.onSuccess)||s.call(e,n),null==t||t(),a.resolve(n))},c=n=>{var s;r||(r=!0,null==(s=e.onError)||s.call(e,n),null==t||t(),a.reject(n))},d=()=>new Promise(n=>{var s;t=e=>{(r||i())&&n(e)},null==(s=e.onPause)||s.call(e)}).then(()=>{var n;t=void 0,r||null==(n=e.onContinue)||n.call(e)}),u=()=>{if(r)return;let t;const a=0===s?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a;if(r)return;const o=e.retry??(Zs?0:3),l=e.retryDelay??xr,m="function"==typeof l?l(s,t):l,h=!0===o||"number"==typeof o&&s<o||"function"==typeof o&&o(s,t);var p;!n&&h?(s++,null==(a=e.onFail)||a.call(e,s,t),(p=m,new Promise(e=>{setTimeout(e,p)})).then(()=>i()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:a,cancel:t=>{var n;r||(c(new yr(t)),null==(n=e.abort)||n.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var jr=function(){let e=[],t=0,n=e=>{e()},s=e=>{e()},r=e=>setTimeout(e,0);const a=s=>{t?e.push(s):r(()=>{n(s)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&r(()=>{s(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{s=e},setScheduler:e=>{r=e}}}(),Nr=(c=class{constructor(){H(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&G(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zs?1/0:3e5))}clearGcTimeout(){V(this,l)&&(clearTimeout(V(this,l)),G(this,l,void 0))}},l=new WeakMap,c),kr=(v=class extends Nr{constructor(e){super(),H(this,g),H(this,d),H(this,u),H(this,m),H(this,h),H(this,p),H(this,f),G(this,f,!1),G(this,p,e.defaultOptions),this.setOptions(e.options),this.observers=[],G(this,m,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,G(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,s=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??V(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=V(this,h))?void 0:e.promise}setOptions(e){this.options={...V(this,p),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||V(this,m).remove(this)}setData(e,t){const n=dr(this.state.data,e,this.options);return K(this,g,x).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){K(this,g,x).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const s=null==(t=V(this,h))?void 0:t.promise;return null==(n=V(this,h))||n.cancel(e),s?s.then(Js).catch(Js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,d))}isActive(){return this.observers.some(e=>{return!1!==(t=e.options.enabled,n=this,"function"==typeof t?t(n):t);var t,n})}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=V(this,h))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=V(this,h))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),V(this,m).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(V(this,h)&&(V(this,f)?V(this,h).cancel({revert:!0}):V(this,h).cancelRetry()),this.scheduleGc()),V(this,m).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||K(this,g,x).call(this,{type:"invalidate"})}fetch(e,t){var n,s,r;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(V(this,h))return V(this,h).continueRetry(),V(this,h).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(G(this,f,!0),a.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=pr(this.options,t),n={queryKey:this.queryKey,meta:this.meta};return i(n),G(this,f,!1),this.options.persister?this.options.persister(e,n,this):e(n)}};i(o),null==(n=this.options.behavior)||n.onFetch(o,this),G(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(s=o.fetchOptions)?void 0:s.meta)||K(this,g,x).call(this,{type:"fetch",meta:null==(r=o.fetchOptions)?void 0:r.meta});const l=e=>{var t,n,s,r;br(e)&&e.silent||K(this,g,x).call(this,{type:"error",error:e}),br(e)||(null==(n=(t=V(this,m).config).onError)||n.call(t,e,this),null==(r=(s=V(this,m).config).onSettled)||r.call(s,this.state.data,e,this)),this.scheduleGc()};return G(this,h,wr({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,n,s,r;if(void 0!==e){try{this.setData(e)}catch(a){return void l(a)}null==(n=(t=V(this,m).config).onSuccess)||n.call(t,e,this),null==(r=(s=V(this,m).config).onSettled)||r.call(s,e,this.state.error,this),this.scheduleGc()}else l(new Error(`${this.queryHash} data is undefined`))},onError:l,onFail:(e,t)=>{K(this,g,x).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{K(this,g,x).call(this,{type:"pause"})},onContinue:()=>{K(this,g,x).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),V(this,h).start()}},d=new WeakMap,u=new WeakMap,m=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,x=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Sr(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return br(n)&&n.revert&&V(this,u)?{...V(this,u),fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),jr.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),V(this,m).notify({query:this,type:"updated",action:e})})},v);function Sr(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vr(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var _r=(b=class extends Xs{constructor(e={}){super(),H(this,y),this.config=e,G(this,y,new Map)}build(e,t,n){const s=t.queryKey,r=t.queryHash??sr(s,t);let a=this.get(r);return a||(a=new kr({cache:this,queryKey:s,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){V(this,y).has(e.queryHash)||(V(this,y).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=V(this,y).get(e.queryHash);t&&(e.destroy(),t===e&&V(this,y).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,y).get(e)}getAll(){return[...V(this,y).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>tr(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>tr(e,t)):t}notify(e){jr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){jr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},y=new WeakMap,b),Er=(_=class extends Nr{constructor(e){super(),H(this,k),H(this,w),H(this,j),H(this,N),this.mutationId=e.mutationId,G(this,j,e.mutationCache),G(this,w,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){V(this,w).includes(e)||(V(this,w).push(e),this.clearGcTimeout(),V(this,j).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){G(this,w,V(this,w).filter(t=>t!==e)),this.scheduleGc(),V(this,j).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){V(this,w).length||("pending"===this.state.status?this.scheduleGc():V(this,j).remove(this))}continue(){var e;return(null==(e=V(this,N))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,n,s,r,a,i,o,l,c,d,u,m,h,p,f,g,x,v,y,b;G(this,N,wr({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{K(this,k,S).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{K(this,k,S).call(this,{type:"pause"})},onContinue:()=>{K(this,k,S).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,j).canRun(this)}));const w="pending"===this.state.status,_=!V(this,N).canStart();try{if(!w){K(this,k,S).call(this,{type:"pending",variables:e,isPaused:_}),await(null==(n=(t=V(this,j).config).onMutate)?void 0:n.call(t,e,this));const a=await(null==(r=(s=this.options).onMutate)?void 0:r.call(s,e));a!==this.state.context&&K(this,k,S).call(this,{type:"pending",context:a,variables:e,isPaused:_})}const h=await V(this,N).start();return await(null==(i=(a=V(this,j).config).onSuccess)?void 0:i.call(a,h,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,h,e,this.state.context)),await(null==(d=(c=V(this,j).config).onSettled)?void 0:d.call(c,h,null,this.state.variables,this.state.context,this)),await(null==(m=(u=this.options).onSettled)?void 0:m.call(u,h,null,e,this.state.context)),K(this,k,S).call(this,{type:"success",data:h}),h}catch(E){try{throw await(null==(p=(h=V(this,j).config).onError)?void 0:p.call(h,E,e,this.state.context,this)),await(null==(g=(f=this.options).onError)?void 0:g.call(f,E,e,this.state.context)),await(null==(v=(x=V(this,j).config).onSettled)?void 0:v.call(x,void 0,E,this.state.variables,this.state.context,this)),await(null==(b=(y=this.options).onSettled)?void 0:b.call(y,void 0,E,e,this.state.context)),E}finally{K(this,k,S).call(this,{type:"error",error:E})}}finally{V(this,j).runNext(this)}}},w=new WeakMap,j=new WeakMap,N=new WeakMap,k=new WeakSet,S=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),jr.batch(()=>{V(this,w).forEach(t=>{t.onMutationUpdate(e)}),V(this,j).notify({mutation:this,type:"updated",action:e})})},_);var Tr=(D=class extends Xs{constructor(e={}){super(),H(this,E),H(this,T),this.config=e,G(this,E,new Map),G(this,T,Date.now())}build(e,t,n){const s=new Er({mutationCache:this,mutationId:++Q(this,T)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){const t=Dr(e),n=V(this,E).get(t)??[];n.push(e),V(this,E).set(t,n),this.notify({type:"added",mutation:e})}remove(e){var t;const n=Dr(e);if(V(this,E).has(n)){const s=null==(t=V(this,E).get(n))?void 0:t.filter(t=>t!==e);s&&(0===s.length?V(this,E).delete(n):V(this,E).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var t;const n=null==(t=V(this,E).get(Dr(e)))?void 0:t.find(e=>"pending"===e.state.status);return!n||n===e}runNext(e){var t;const n=null==(t=V(this,E).get(Dr(e)))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==n?void 0:n.continue())??Promise.resolve()}clear(){jr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...V(this,E).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(e=>nr(t,e))}findAll(e={}){return this.getAll().filter(t=>nr(e,t))}notify(e){jr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return jr.batch(()=>Promise.all(e.map(e=>e.continue().catch(Js))))}},E=new WeakMap,T=new WeakMap,D);function Dr(e){var t;return(null==(t=e.options.scope)?void 0:t.id)??String(e.mutationId)}function Ar(e){return{onFetch:(t,n)=>{var s,r,a,i,o;const l=t.options,c=null==(a=null==(r=null==(s=t.fetchOptions)?void 0:s.meta)?void 0:r.fetchMore)?void 0:a.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let m={pages:[],pageParams:[]},h=0;const p=async()=>{let n=!1;const s=pr(t.options,t.fetchOptions),r=async(e,r,a)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const i={queryKey:t.queryKey,pageParam:r,direction:a?"backward":"forward",meta:t.options.meta};var o;o=i,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)});const l=await s(i),{maxPages:c}=t.options,d=a?mr:ur;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,r,c)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},n=(e?Cr:Mr)(l,t);m=await r(t,n,e)}else{const t=e??d.length;do{const e=0===h?u[0]??l.initialPageParam:Mr(l,m);if(h>0&&null==e)break;m=await r(m,e),h++}while(h<t)}return m};t.options.persister?t.fetchFn=()=>{var e,s;return null==(s=(e=t.options).persister)?void 0:s.call(e,p,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=p}}}function Mr(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function Cr(e,{pages:t,pageParams:n}){var s;return t.length>0?null==(s=e.getPreviousPageParam)?void 0:s.call(e,t[0],t,n[0],n):void 0}var Or=(F=class{constructor(e={}){H(this,A),H(this,M),H(this,C),H(this,O),H(this,P),H(this,I),H(this,R),H(this,L),G(this,A,e.queryCache||new _r),G(this,M,e.mutationCache||new Tr),G(this,C,e.defaultOptions||{}),G(this,O,new Map),G(this,P,new Map),G(this,I,0)}mount(){Q(this,I)._++,1===V(this,I)&&(G(this,R,fr.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,A).onFocus())})),G(this,L,gr.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,A).onOnline())})))}unmount(){var e,t;Q(this,I)._--,0===V(this,I)&&(null==(e=V(this,R))||e.call(this),G(this,R,void 0),null==(t=V(this,L))||t.call(this),G(this,L,void 0))}isFetching(e){return V(this,A).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,M).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=V(this,A).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=V(this,A).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(er(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return V(this,A).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),r=V(this,A).get(s.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==r?void 0:r.state.data);if(void 0!==a)return V(this,A).build(this,s).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return jr.batch(()=>V(this,A).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=V(this,A).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=V(this,A);jr.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=V(this,A),s={type:"active",...e};return jr.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=jr.batch(()=>V(this,A).findAll(e).map(e=>e.cancel(n)));return Promise.all(s).then(Js).catch(Js)}invalidateQueries(e={},t={}){return jr.batch(()=>{if(V(this,A).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(null==t?void 0:t.cancelRefetch)??!0},s=jr.batch(()=>V(this,A).findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(Js)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(s).then(Js)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=V(this,A).build(this,t);return n.isStaleByTime(er(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Js).catch(Js)}fetchInfiniteQuery(e){return e.behavior=Ar(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Js).catch(Js)}ensureInfiniteQueryData(e){return e.behavior=Ar(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gr.isOnline()?V(this,M).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,A)}getMutationCache(){return V(this,M)}getDefaultOptions(){return V(this,C)}setDefaultOptions(e){G(this,C,e)}setQueryDefaults(e,t){V(this,O).set(rr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...V(this,O).values()];let n={};return t.forEach(t=>{ar(e,t.queryKey)&&(n={...n,...t.defaultOptions})}),n}setMutationDefaults(e,t){V(this,P).set(rr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...V(this,P).values()];let n={};return t.forEach(t=>{ar(e,t.mutationKey)&&(n={...n,...t.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...V(this,C).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sr(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===hr&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...V(this,C).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,A).clear(),V(this,M).clear()}},A=new WeakMap,M=new WeakMap,C=new WeakMap,O=new WeakMap,P=new WeakMap,I=new WeakMap,R=new WeakMap,L=new WeakMap,F),Pr=Je.createContext(void 0),Ir=({client:e,children:t})=>(Je.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(Pr.Provider,{value:e,children:t}));const Rr=new Or({defaultOptions:{queries:{queryFn:(({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return"returnNull"===e&&401===n.status?null:(await async function(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}(n),await n.json())})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});let Lr=0;const Fr=new Map,zr=e=>{if(Fr.has(e))return;const t=setTimeout(()=>{Fr.delete(e),Wr({type:"REMOVE_TOAST",toastId:e})},1e6);Fr.set(e,t)},Br=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?zr(n):e.toasts.forEach(e=>{zr(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Ur=[];let qr={toasts:[]};function Wr(e){qr=Br(qr,e),Ur.forEach(e=>{e(qr)})}function $r({...e}){const t=(Lr=(Lr+1)%Number.MAX_SAFE_INTEGER,Lr.toString()),n=()=>Wr({type:"DISMISS_TOAST",toastId:t});return Wr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>Wr({type:"UPDATE_TOAST",toast:{...e,id:t}})}}var Yr="ToastProvider",[Vr,Hr,Gr]=Z("Toast"),[Kr,Qr]=J("Toast",[Gr]),[Xr,Zr]=Kr(Yr),Jr=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:a=50,children:i}=e,[o,l]=Je.useState(null),[c,d]=Je.useState(0),u=Je.useRef(!1),m=Je.useRef(!1);return n.trim(),X.jsx(Vr.Provider,{scope:t,children:X.jsx(Xr,{scope:t,label:n,duration:s,swipeDirection:r,swipeThreshold:a,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:Je.useCallback(()=>d(e=>e+1),[]),onToastRemove:Je.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:i})})};Jr.displayName=Yr;var ea="ToastViewport",ta=["F8"],na="toast.viewportPause",sa="toast.viewportResume",ra=Je.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=ta,label:r="Notifications ({hotkey})",...a}=e,i=Zr(ea,n),o=Hr(n),l=Je.useRef(null),c=Je.useRef(null),d=Je.useRef(null),u=Je.useRef(null),m=ee(t,u,i.onViewportChange),h=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;Je.useEffect(()=>{const e=e=>{var t;0!==s.length&&s.every(t=>e[t]||e.code===t)&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),Je.useEffect(()=>{const e=l.current,t=u.current;if(p&&e&&t){const n=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(na);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},s=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(sa);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},r=t=>{!e.contains(t.relatedTarget)&&s()},a=()=>{e.contains(document.activeElement)||s()};return e.addEventListener("focusin",n),e.addEventListener("focusout",r),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",a),window.addEventListener("blur",n),window.addEventListener("focus",s),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",n),window.removeEventListener("focus",s)}}},[p,i.isClosePausedRef]);const f=Je.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,s=[n,...ja(n)];return"forwards"===e?s:s.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return Je.useEffect(()=>{const e=u.current;if(e){const t=t=>{var n,s,r;const a=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!a){const a=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(n=c.current)||n.focus());const o=f({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===a);Na(o.slice(l+1))?t.preventDefault():i?null==(s=c.current)||s.focus():null==(r=d.current)||r.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),X.jsxs(te,{ref:l,role:"region","aria-label":r.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&X.jsx(ia,{ref:c,onFocusFromOutsideViewport:()=>{Na(f({tabbingDirection:"forwards"}))}}),X.jsx(Vr.Slot,{scope:n,children:X.jsx(ne.ol,{tabIndex:-1,...a,ref:m})}),p&&X.jsx(ia,{ref:d,onFocusFromOutsideViewport:()=>{Na(f({tabbingDirection:"backwards"}))}})]})});ra.displayName=ea;var aa="ToastFocusProxy",ia=Je.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...r}=e,a=Zr(aa,n);return X.jsx(se,{"aria-hidden":!0,tabIndex:0,...r,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=a.viewport)?void 0:t.contains(n))&&s()}})});ia.displayName=aa;var oa="Toast",la=Je.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:r,onOpenChange:a,...i}=e,[o=!0,l]=re({prop:s,defaultProp:r,onChange:a});return X.jsx(ae,{present:n||o,children:X.jsx(ua,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:ie(e.onPause),onResume:ie(e.onResume),onSwipeStart:oe(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:oe(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});la.displayName=oa;var[ca,da]=Kr(oa,{onClose(){}}),ua=Je.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:r,open:a,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:h,...p}=e,f=Zr(oa,n),[g,x]=Je.useState(null),v=ee(t,e=>x(e)),y=Je.useRef(null),b=Je.useRef(null),w=r||f.duration,j=Je.useRef(0),N=Je.useRef(w),k=Je.useRef(0),{onToastAdd:S,onToastRemove:_}=f,E=ie(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=f.viewport)||e.focus()),i()}),T=Je.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(k.current),j.current=(new Date).getTime(),k.current=window.setTimeout(E,e))},[E]);Je.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{T(N.current),null==c||c()},n=()=>{const e=(new Date).getTime()-j.current;N.current=N.current-e,window.clearTimeout(k.current),null==l||l()};return e.addEventListener(na,n),e.addEventListener(sa,t),()=>{e.removeEventListener(na,n),e.removeEventListener(sa,t)}}},[f.viewport,w,l,c,T]),Je.useEffect(()=>{a&&!f.isClosePausedRef.current&&T(w)},[a,w,f.isClosePausedRef,T]),Je.useEffect(()=>(S(),()=>_()),[S,_]);const D=Je.useMemo(()=>g?ya(g):null,[g]);return f.viewport?X.jsxs(X.Fragment,{children:[D&&X.jsx(ma,{__scopeToast:n,role:"status","aria-live":"foreground"===s?"assertive":"polite","aria-atomic":!0,children:D}),X.jsx(ca,{scope:n,onClose:E,children:Ze.createPortal(X.jsx(Vr.ItemSlot,{scope:n,children:X.jsx(le,{asChild:!0,onEscapeKeyDown:oe(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||E(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:X.jsx(ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":f.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:oe(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:oe(e.onPointerDown,e=>{0===e.button&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:oe(e.onPointerMove,e=>{if(!y.current)return;const t=e.clientX-y.current.x,n=e.clientY-y.current.y,s=Boolean(b.current),r=["left","right"].includes(f.swipeDirection),a=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,i=r?a(0,t):0,o=r?0:a(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},m={originalEvent:e,delta:c};s?(b.current=c,ba("toast.swipeMove",u,m,{discrete:!1})):wa(c,f.swipeDirection,l)?(b.current=c,ba("toast.swipeStart",d,m,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(y.current=null)}),onPointerUp:oe(e.onPointerUp,e=>{const t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){const n=e.currentTarget,s={originalEvent:e,delta:t};wa(t,f.swipeDirection,f.swipeThreshold)?ba("toast.swipeEnd",h,s,{discrete:!0}):ba("toast.swipeCancel",m,s,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),ma=e=>{const{__scopeToast:t,children:n,...s}=e,r=Zr(oa,t),[a,i]=Je.useState(!1),[o,l]=Je.useState(!1);return function(e=()=>{}){const t=ie(e);de(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>i(!0)),Je.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:X.jsx(ce,{asChild:!0,children:X.jsx(se,{...s,children:a&&X.jsxs(X.Fragment,{children:[r.label," ",n]})})})},ha=Je.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return X.jsx(ne.div,{...s,ref:t})});ha.displayName="ToastTitle";var pa=Je.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return X.jsx(ne.div,{...s,ref:t})});pa.displayName="ToastDescription";var fa=Je.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?X.jsx(va,{altText:n,asChild:!0,children:X.jsx(xa,{...s,ref:t})}):null});fa.displayName="ToastAction";var ga="ToastClose",xa=Je.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,r=da(ga,n);return X.jsx(va,{asChild:!0,children:X.jsx(ne.button,{type:"button",...s,ref:t,onClick:oe(e.onClick,r.onClose)})})});xa.displayName=ga;var va=Je.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...r}=e;return X.jsx(ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:t})});function ya(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,s=""===e.dataset.radixToastAnnounceExclude;if(!n)if(s){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...ya(e))}}),t}function ba(e,t,n,{discrete:s}){const r=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?ue(r,a):r.dispatchEvent(a)}var wa=(e,t,n=0)=>{const s=Math.abs(e.x),r=Math.abs(e.y),a=s>r;return"left"===t||"right"===t?a&&s>n:!a&&r>n};function ja(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Na(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var ka=ra,Sa=la,_a=ha,Ea=pa,Ta=fa,Da=xa;function Aa(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Aa(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}const Ma=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,Ca=function(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=Aa(e))&&(s&&(s+=" "),s+=t);return s},Oa=(e,t)=>n=>{var s;if(null==(null==t?void 0:t.variants))return Ca(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:r,defaultVariants:a}=t,i=Object.keys(r).map(e=>{const t=null==n?void 0:n[e],s=null==a?void 0:a[e];if(null===t)return null;const i=Ma(t)||Ma(s);return r[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,s]=t;return void 0===s||(e[n]=s),e},{}),l=null==t||null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:n,className:s,...r}=t;return Object.entries(r).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n})?[...e,n,s]:e},[]);return Ca(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)};function Pa(...e){return at(it(e))}const Ia=Jr,Ra=Je.forwardRef(({className:e,...t},n)=>X.jsx(ka,{ref:n,className:Pa("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Ra.displayName=ka.displayName;const La=Oa("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Fa=Je.forwardRef(({className:e,variant:t,...n},s)=>X.jsx(Sa,{ref:s,className:Pa(La({variant:t}),e),...n}));Fa.displayName=Sa.displayName;Je.forwardRef(({className:e,...t},n)=>X.jsx(Ta,{ref:n,className:Pa("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=Ta.displayName;const za=Je.forwardRef(({className:e,...t},n)=>X.jsx(Da,{ref:n,className:Pa("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:X.jsx(os,{className:"h-4 w-4"})}));za.displayName=Da.displayName;const Ba=Je.forwardRef(({className:e,...t},n)=>X.jsx(_a,{ref:n,className:Pa("text-sm font-semibold",e),...t}));Ba.displayName=_a.displayName;const Ua=Je.forwardRef(({className:e,...t},n)=>X.jsx(Ea,{ref:n,className:Pa("text-sm opacity-90",e),...t}));function qa(){const{toasts:e}=function(){const[e,t]=Je.useState(qr);return Je.useEffect(()=>(Ur.push(t),()=>{const e=Ur.indexOf(t);e>-1&&Ur.splice(e,1)}),[e]),{...e,toast:$r,dismiss:e=>Wr({type:"DISMISS_TOAST",toastId:e})}}();return X.jsxs(Ia,{children:[e.map(function({id:e,title:t,description:n,action:s,...r}){return X.jsxs(Fa,{...r,children:[X.jsxs("div",{className:"grid gap-1",children:[t&&X.jsx(Ba,{children:t}),n&&X.jsx(Ua,{children:n})]}),s,X.jsx(za,{})]},e)}),X.jsx(Ra,{})]})}function Wa(){const[e,t]=Je.useState(navigator.onLine);return Je.useEffect(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e?null:X.jsx("div",{className:"fixed bottom-0 inset-x-0 z-[1000]",children:X.jsx("div",{className:"mx-auto max-w-3xl mb-4",children:X.jsx("div",{className:"mx-4 rounded-md bg-amber-50 border border-amber-200 p-3 text-amber-800 text-sm shadow-sm",children:"You are offline. Some features may not work until connection is restored."})})})}Ua.displayName=Ea.displayName,Array(12).fill(0);let $a=1;const Ya=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...s}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:$a++,a=this.toasts.find(e=>e.id===r),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),a?this.toasts=this.toasts.map(t=>t.id===r?(this.publish({...t,...e,id:r,title:n}),{...t,...e,id:r,dismissible:i,title:n}):t):this.addToast({title:n,...s,dismissible:i,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let r,a=void 0!==n;const i=s.then(async e=>{r=["resolve",e];if(tt.isValidElement(e))a=!1,this.create({id:n,type:"default",message:e});else if(Va(e)&&!e.ok){a=!1;const s="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,r="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,i="object"==typeof s&&!tt.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:r,...i})}else if(e instanceof Error){a=!1;const s="function"==typeof t.error?await t.error(e):t.error,r="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof s&&!tt.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:r,...i})}else if(void 0!==t.success){a=!1;const s="function"==typeof t.success?await t.success(e):t.success,r="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof s&&!tt.isValidElement(s)?s:{message:s};this.create({id:n,type:"success",description:r,...i})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){a=!1;const s="function"==typeof t.error?await t.error(e):t.error,r="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof s&&!tt.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:r,...i})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||$a++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Va=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Ha=(e,t)=>{const n=(null==t?void 0:t.id)||$a++;return Ya.addToast({title:e,...t,id:n}),n},Ga=Object.assign(Ha,{success:Ya.success,info:Ya.info,warning:Ya.warning,error:Ya.error,custom:Ya.custom,message:Ya.message,promise:Ya.promise,dismiss:Ya.dismiss,loading:Ya.loading},{getHistory:()=>Ya.toasts,getToasts:()=>Ya.getActiveToasts()});function Ka(){return Je.useEffect(()=>{const e=e=>{Ga.error("An unexpected error occurred")},t=e=>{};return window.addEventListener("unhandledrejection",e),window.addEventListener("error",t),()=>{window.removeEventListener("unhandledrejection",e),window.removeEventListener("error",t)}},[]),null}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Qa={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function Xa(){const e="development"===(null==Qa?void 0:Qa.VITE_APP_ENV),t="undefined"!=typeof window?window.location.hostname:"",n="undefined"!=typeof window?window.location.pathname:"",s="localhost"===t||"127.0.0.1"===t,r=t.endsWith("github.io")&&n.startsWith("/dev");return e||s||r?X.jsxs("div",{style:{background:"#1f2937",color:"#f9fafb",padding:"6px 12px",fontSize:12,textAlign:"center"},children:["Development build  not production. Data may be synthetic. (",(new Date).toLocaleString(),")"]}):null}const Za={common:{home:"Home",about:"About",contact:"Contact",login:"Login",logout:"Logout",signup:"Sign Up",submit:"Submit",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",loading:"Loading...",error:"An error occurred",success:"Success",welcome:"Welcome",language:"Language",close:"Close"},navigation:{home:"Home",members:"Team",projects:"Projects",events:"Events",leaderboard:"Leaderboard",battleground:"Battleground",contact:"Contact"},sidebar:{loggedInAs:"Signed in as",disclaimerTitle:"Disclaimer",disclaimerOpinions:"All opinions expressed are the personal views of the student members of the club.",disclaimerLiability:"Frankfurt School of Finance & Management GmbH assumes no responsibility or liability for any statements, content, or activities of this club."},auth:{signIn:"Sign In",signUp:"Create Account",resetPassword:"Reset Password",resetPasswordInstructions:"Enter your email to receive a password reset link",email:"Email",password:"Password",loginCta:"Join the FS Quant & Data Science community",needAccount:"Need an account?",alreadyRegistered:"Already registered?",forgotPassword:"Forgot your password?",sendResetEmail:"Send Reset Email",backToSignIn:"Back to Sign In",registrationSuccessTitle:"Registration Successful!",registrationSuccessBody:"We've sent you an email with instructions to set up your password. Please check your inbox and follow the link to complete your registration.",goToSignIn:"Go to Sign In",completeVerification:"Please complete the verification",captchaFailed:"Verification failed. Please try again.",invalidCredentials:"Invalid email or password",emailNotConfirmed:"Please verify your email before signing in",resetEmailSent:"Password reset email sent! Check your inbox.",resetEmailFailed:"Failed to send reset email",unexpectedError:"An error occurred",logoutSuccess:"You have been logged out",adminRegistrationDisabled:"Admin accounts cannot be created via the website. Please contact an administrator.",invalidDomain:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed",userExists:"An account with this email already exists. Please sign in.",registrationFailed:"Registration failed. Please try again.",welcomeBack:"Welcome back!",loading:"Loading...",setupNote:"After registration, you'll receive an email to set up your password.",rateLimited:"Too many attempts. Please wait a moment and try again.",networkError:"Network error. Please check your connection and try again.",sessionExpired:"Your session has expired. Please sign in again.",weakPassword:"Password is too weak. Please choose a stronger one."},leaderboard:{cumulativePnl:"Cumulative P&L %",title:"Leaderboard",hti:"Hack the Interview",adx:"Axe the DAX",tabHti:"HTI",tabAdx:"ADX",signIn:"Sign In",signUp:"Sign Up",email:"Email",password:"Password",loginCta:"Join the FS Quant & Data Science community",needAccount:"Need an account?",alreadyRegistered:"Already registered?",emailVerificationSent:"Verification email sent! Check your inbox.",invalidCredentials:"Invalid email or password",locked:"Sign in to participate",leaderboard:"Leaderboard",rank:"Rank",player:"Player",score:"Score",points:"points",questionNumber:"Q",countdown:"Unlocks in",correctAnswer:"Correct! Well done!",wrongAnswer:"Incorrect. Try again next time!",alreadyAnswered:"You've already answered this question",questionLocked:"This question is not available yet",portfolio:"Portfolio",myEquity:"Equity",positions:"Positions",orderSuccess:"Order placed successfully!",orderFailed:"Failed to place order",disclaimer:"This is a simulated trading environment for educational purposes only.",optionsNote:"Options data is generated for demonstration. Real trading involves significant risk.",lastUpdated:"Last updated",seasonInfo:"Season Information"},admin:{title:"Admin Panel",questions:"Questions",tickers:"Tickers",revenue:"Revenue Windows",badges:"Badges",seasons:"Seasons",createQuestion:"Create Question",editQuestion:"Edit Question",questionText:"Question Text",questionType:"Question Type",releaseTime:"Release Time",closeTime:"Close Time",isActive:"Active",addTicker:"Add Ticker",symbol:"Symbol",companyName:"Company Name",band:"Band",top5:"Top 5",bottom5:"Bottom 5"},events:{types:{workshop:"Workshop",speaker:"Speaker",competition:"Competition",meetup:"Meetup",conference:"Conference",exclusive:"Exclusive"},title:"Events",calendar:"Event Calendar",upcoming:"Upcoming Events",past:"Past Events",pastCollaborations:"Past Successful Collaborations",pastCollaborationsDescription:"We've partnered with leading companies to provide real-world projects, mentorship, and career opportunities for our members.",newEventsComingSoon:"* New events will be announced soon",register:"Register",addToCalendar:"Add to Calendar",location:"Location",date:"Date",time:"Time",organizer:"Organizer",capacity:"Capacity",noEvents:"No upcoming events at the moment"},members:{title:"Team",subtitle:"Meet the team behind FS Quant & Data Science",facultyAdvisorsTitle:"Faculty Advisors",orgaTeamTitle:"Orga Team",position:"Position",department:"Department",expertise:"Expertise",email:"Email",linkedin:"LinkedIn"},projects:{title:"Projects",current:"Current Projects",completed:"Completed Projects",viewDetails:"View Details",technologies:"Technologies",team:"Team",duration:"Duration",status:"Status"},footer:{about:"About Us",quickLinks:"Quick Links",connect:"Connect",copyright:" 2025 FS Quant & Data Science. All rights reserved.",privacy:"Privacy Policy",terms:"Terms of Service"},home:{heroSubtitle:"Welcome!",heroDescription:"Join us in exploring the intersection of quantitative finance, data science, and cutting-edge technology.",cta:{applyNow:"Apply Now",learnMore:"Learn More"},lab:{title:"Our Applied Quant Lab",description:"Our Quant Lab is a hands-on studio where students build models, test trading ideas, and ship data products. We combine finance, statistics, and software engineering in iterative sprints with peer review, reproducible workflows, and a Demo Day finale."},features:{projectSprint:{title:"Semester-Long Project Sprint",description:"Small student groups tackle real-world data or quant problems with a fixed timeline that mirrors industry agile cycles."},biweeklyMeetings:{title:"Bi-Weekly Online Meetings",description:"Regular initiative-wide meetings on Teams for collaboration, resource sharing, and community building through dedicated channels."},demoDay:{title:"Demo Day Finale",description:"Teams pitch to an industry jury. Top project wins prizes, coffee chats with jurors, and referrals for internships/jobs."}},metrics:{activeMembers:"Active Members",projectsCompleted:"Projects Completed",eventsHosted:"Events Hosted",industryPartners:"Industry Partners"}},contact:{title:"Get in Touch",subtitle:"Have questions or want to join our initiative? We'd love to hear from you!",joinTitle:"Join Our Initiative",joinDescription:"Be part of Frankfurt School's premier quant and data science community",form:{name:"Name",email:"Email",message:"Message",submit:"Submit"},success:"Thanks for reaching out  we will get back to you soon!"},projectsTitle:"Projects",projectsSubtitle:"Explore our portfolio of data science and quantitative finance projects",eventsTitle:"Events",eventsSubtitle:"Stay tuned for upcoming workshops, competitions, and networking events with our industry partners.",noUpcomingEvents:"No upcoming events at the moment. Check back soon!",battleground:{trading:"Trading",predictions:"Predictions",portfolio:"Portfolio",riskWarningTitle:"Not investment advice  risk disclosure",riskWarningText:"The content and simulations on this page are for educational purposes only and do not constitute investment, legal, accounting, or tax advice, nor a recommendation or solicitation to buy or sell any security or financial instrument. Markets involve risk; options and derivatives trading is highly speculative and can result in the loss of all invested capital. Past performance is not indicative of future results. Data, prices, and model outputs may be delayed, simulated, or inaccurate; no warranty is made as to completeness, timeliness, or accuracy. This student initiative is not a broker, dealer, or investment adviser. Always do your own research and consider consulting a qualified financial adviser before making investment decisions."}},Ja={common:{home:"Startseite",about:"ber uns",contact:"Kontakt",login:"Anmelden",logout:"Abmelden",signup:"Registrieren",submit:"Absenden",cancel:"Abbrechen",save:"Speichern",delete:"Lschen",edit:"Bearbeiten",loading:"Ldt...",error:"Ein Fehler ist aufgetreten",success:"Erfolgreich",welcome:"Willkommen",language:"Sprache",close:"Schlieen"},navigation:{home:"Startseite",members:"Team",projects:"Projekte",events:"Veranstaltungen",leaderboard:"Bestenliste",battleground:"Battleground",contact:"Kontakt"},sidebar:{loggedInAs:"Angemeldet als",disclaimerTitle:"Haftungsausschluss",disclaimerOpinions:"Alle geuerten Meinungen sind ausschlielich persnliche Ansichten der studentischen Mitglieder des Clubs.",disclaimerLiability:"Die Frankfurt School of Finance & Management GmbH bernimmt keinerlei Verantwortung oder Haftung fr uerungen, Inhalte oder Aktivitten dieses Clubs; eine Zurechnung zur Hochschule findet nicht statt. Haftungsansprche sind  soweit gesetzlich zulssig  ausgeschlossen."},auth:{signIn:"Anmelden",signUp:"Registrieren",resetPassword:"Passwort zurcksetzen",resetPasswordInstructions:"Gib deine E-Mail-Adresse ein, um einen Link zum Zurcksetzen des Passworts zu erhalten",email:"E-Mail",password:"Passwort",loginCta:"Tritt der FS Quant & Data Science Community bei",needAccount:"Noch kein Konto?",alreadyRegistered:"Bereits registriert?",forgotPassword:"Passwort vergessen?",sendResetEmail:"E-Mail zum Zurcksetzen senden",backToSignIn:"Zurck zur Anmeldung",registrationSuccessTitle:"Registrierung erfolgreich!",registrationSuccessBody:"Wir haben dir eine E-Mail mit Anweisungen zur Einrichtung deines Passworts gesendet. Bitte prfe deinen Posteingang und folge dem Link, um die Registrierung abzuschlieen.",goToSignIn:"Zur Anmeldung",completeVerification:"Bitte Verifizierung abschlieen",captchaFailed:"Verifizierung fehlgeschlagen. Bitte erneut versuchen.",invalidCredentials:"Ungltige E-Mail oder Passwort",emailNotConfirmed:"Bitte besttige deine E-Mail, bevor du dich anmeldest",resetEmailSent:"E-Mail zum Zurcksetzen des Passworts gesendet! Bitte Posteingang prfen.",resetEmailFailed:"Senden der E-Mail zum Zurcksetzen fehlgeschlagen",unexpectedError:"Ein Fehler ist aufgetreten",logoutSuccess:"Du wurdest abgemeldet",adminRegistrationDisabled:"Admin-Konten knnen nicht ber die Website erstellt werden. Bitte kontaktiere einen Administrator.",invalidDomain:"Nur Frankfurt School E-Mail-Adressen (@fs-students.de oder @fs.de) sind erlaubt",userExists:"Ein Konto mit dieser E-Mail existiert bereits. Bitte melde dich an.",registrationFailed:"Registrierung fehlgeschlagen. Bitte versuche es erneut.",welcomeBack:"Willkommen zurck!",loading:"Ldt...",setupNote:"Nach der Registrierung erhltst du eine E-Mail zur Einrichtung deines Passworts.",rateLimited:"Zu viele Versuche. Bitte warte einen Moment und versuche es erneut.",networkError:"Netzwerkfehler. Bitte berprfe deine Verbindung und versuche es erneut.",sessionExpired:"Deine Sitzung ist abgelaufen. Bitte melde dich erneut an.",weakPassword:"Passwort ist zu schwach. Bitte whle ein strkeres Passwort."},leaderboard:{cumulativePnl:"Kumulierte P&L %",title:"Bestenliste",hti:"Hack the Interview",adx:"Axe the DAX",tabHti:"HTI",tabAdx:"ADX",signIn:"Anmelden",signUp:"Registrieren",email:"E-Mail",password:"Passwort",loginCta:"Tritt der FS Quant & Data Science Community bei",needAccount:"Noch kein Konto?",alreadyRegistered:"Bereits registriert?",emailVerificationSent:"Besttigungs-E-Mail gesendet! Prfe deinen Posteingang.",invalidCredentials:"Ungltige E-Mail oder Passwort",locked:"Zum Teilnehmen anmelden",leaderboard:"Bestenliste",rank:"Rang",player:"Spieler",score:"Punkte",points:"Punkte",questionNumber:"F",countdown:"Verfgbar in",correctAnswer:"Richtig! Gut gemacht!",wrongAnswer:"Falsch. Versuche es nchstes Mal wieder!",alreadyAnswered:"Du hast diese Frage bereits beantwortet",questionLocked:"Diese Frage ist noch nicht verfgbar",portfolio:"Portfolio",myEquity:"Kapital",positions:"Positionen",orderSuccess:"Order erfolgreich platziert!",orderFailed:"Order konnte nicht platziert werden",disclaimer:"Dies ist eine simulierte Handelsumgebung nur fr Bildungszwecke.",optionsNote:"Optionsdaten werden zu Demonstrationszwecken generiert. Echter Handel birgt erhebliche Risiken.",lastUpdated:"Zuletzt aktualisiert",seasonInfo:"Saison-Information"},admin:{title:"Admin-Bereich",questions:"Fragen",tickers:"Ticker",revenue:"Umsatzfenster",badges:"Abzeichen",seasons:"Saisons",createQuestion:"Frage erstellen",editQuestion:"Frage bearbeiten",questionText:"Fragetext",questionType:"Fragetyp",releaseTime:"Freigabezeit",closeTime:"Schliezeit",isActive:"Aktiv",addTicker:"Ticker hinzufgen",symbol:"Symbol",companyName:"Firmenname",band:"Band",top5:"Top 5",bottom5:"Bottom 5"},events:{types:{workshop:"Workshop",speaker:"Vortrag",competition:"Wettbewerb",meetup:"Treffen",conference:"Konferenz",exclusive:"Exklusiv"},title:"Veranstaltungen",calendar:"Veranstaltungskalender",upcoming:"Kommende Veranstaltungen",past:"Vergangene Veranstaltungen",pastCollaborations:"Vergangene erfolgreiche Kooperationen",pastCollaborationsDescription:"Wir haben mit fhrenden Unternehmen zusammengearbeitet, um unseren Mitgliedern reale Projekte, Mentoring und Karrieremglichkeiten zu bieten.",newEventsComingSoon:"* Neue Veranstaltungen werden bald bekannt gegeben",register:"Anmelden",addToCalendar:"Zum Kalender hinzufgen",location:"Ort",date:"Datum",time:"Zeit",organizer:"Veranstalter",capacity:"Kapazitt",noEvents:"Derzeit keine bevorstehenden Veranstaltungen"},members:{title:"Team",subtitle:"Lerne das Team hinter FS Quant & Data Science kennen",facultyAdvisorsTitle:"Fakulttsberater",orgaTeamTitle:"Orga Team",position:"Position",department:"Abteilung",expertise:"Expertise",email:"E-Mail",linkedin:"LinkedIn"},projects:{title:"Projekte",current:"Aktuelle Projekte",completed:"Abgeschlossene Projekte",viewDetails:"Details anzeigen",technologies:"Technologien",team:"Team",duration:"Dauer",status:"Status"},footer:{about:"ber uns",quickLinks:"Schnelllinks",connect:"Verbinden",copyright:" 2025 FS Quant & Data Science. Alle Rechte vorbehalten.",privacy:"Datenschutz",terms:"Nutzungsbedingungen"},home:{heroSubtitle:"Willkommen!",heroDescription:"Entdecke mit uns die Schnittstelle zwischen Quantitative Finance, Data Science und modernster Technologie.",cta:{applyNow:"Jetzt bewerben",learnMore:"Mehr erfahren"},lab:{title:"Unser Applied Quant Lab",description:"Unser Quant Lab ist ein praxisnahes Studio, in dem Studierende Modelle bauen, Handelsideen testen und Datenprodukte entwickeln. Wir verbinden Finance, Statistik und Software Engineering in iterativen Sprints  mit Peer Reviews, reproduzierbaren Workflows und einem Demo-Day-Finale."},features:{projectSprint:{title:"Semesterlanger Projektsprint",description:"Kleine Studierendenteams bearbeiten reale Daten- oder Quant-Probleme mit einem festen Zeitplan, der agilen Zyklen in der Industrie entspricht."},biweeklyMeetings:{title:"Zweiwchentliche Online-Meetings",description:"Regelmige initiativweite Meetings auf Teams fr Zusammenarbeit, Ressourcenaustausch und Community-Aufbau in dedizierten Kanlen."},demoDay:{title:"Demo Day Finale",description:"Teams pitchen vor einer Industrie-Jury. Das Top-Projekt gewinnt Preise, Coffee Chats mit Juroren und Empfehlungen fr Praktika/Jobs."}},metrics:{activeMembers:"Aktive Mitglieder",projectsCompleted:"Abgeschlossene Projekte",eventsHosted:"Veranstaltungen",industryPartners:"Industriepartner"}},contact:{title:"Kontakt aufnehmen",subtitle:"Hast du Fragen oder mchtest unserer Initiative beitreten? Wir freuen uns von dir zu hren!",joinTitle:"Unserer Initiative beitreten",joinDescription:"Werde Teil der fhrenden Quant- und Data-Science-Community der Frankfurt School",form:{name:"Name",email:"E-Mail",message:"Nachricht",submit:"Absenden"},success:"Danke fr deine Nachricht  wir melden uns bald bei dir!"},projectsTitle:"Projekte",projectsSubtitle:"Entdecke unser Portfolio an Data Science und Quantitative Finance Projekten",eventsTitle:"Veranstaltungen",eventsSubtitle:"Bleibe auf dem Laufenden ber kommende Workshops, Wettbewerbe und Networking-Events mit unseren Industriepartnern.",noUpcomingEvents:"Momentan keine bevorstehenden Veranstaltungen. Schau bald wieder vorbei!",battleground:{trading:"Handel",predictions:"Prognosen",portfolio:"Portfolio",riskWarningTitle:"Keine Anlageberatung  Risikohinweis",riskWarningText:"Die Inhalte und Simulationen auf dieser Seite dienen ausschlielich Bildungszwecken und stellen keine Anlageberatung, Rechts-, Steuer- oder sonstige Beratung dar; sie sind weder Empfehlung noch Aufforderung zum Erwerb oder Verkauf von Finanzinstrumenten. Mrkte beinhalten Risiken; der Handel mit Optionen und Derivaten ist hochspekulativ und kann zum vollstndigen Verlust des eingesetzten Kapitals fhren. Vergangene Wertentwicklungen sind kein verlsslicher Indikator fr zuknftige Ergebnisse. Daten, Preise und Modelloutputs knnen verzgert, simuliert oder ungenau sein; es wird keine Gewhr fr Vollstndigkeit, Aktualitt oder Richtigkeit bernommen. Diese studentische Initiative ist weder Broker/Dealer noch Anlageberater. Fhren Sie stets eigene Recherchen durch und ziehen Sie vor Anlageentscheidungen eine qualifizierte Beratung in Betracht."}},ei="https://mskpxebbscvisxcceiwx.supabase.co",ti=ei,ni=lt(ei,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}},db:{schema:"public"}}),si=Object.freeze(Object.defineProperty({__proto__:null,SUPABASE_URL:ti,supabase:ni},Symbol.toStringTag,{value:"Module"})),ri={en:Za,de:Ja},ai=Je.createContext(void 0);function ii({children:e}){const[t,n]=Je.useState("en");Je.useEffect(()=>{const e=localStorage.getItem("lang");if(!e||"en"!==e&&"de"!==e){const e=navigator.language.startsWith("de")?"de":"en";n(e),localStorage.setItem("lang",e)}else n(e)},[]);return X.jsx(ai.Provider,{value:{language:t,setLanguage:async e=>{n(e),localStorage.setItem("lang",e);const{data:{user:t}}=await ni.auth.getUser();t&&await ni.from("user_profiles").update({language:e}).eq("user_id",t.id)},t:(e,n)=>{try{let s;if(e.includes(".")){const n=e.split(".");s=ri[t];for(const t of n){if(!s||"object"!=typeof s||!(t in s)){s=ri.en;for(const t of n){if(!s||"object"!=typeof s||!(t in s))return e;s=s[t]}break}s=s[t]}}else s=ri[t][e]||ri.en[e];if("string"!=typeof s)return e;if(n&&s){let e=s;return Object.entries(n).forEach(([t,n])=>{e=e.replace(new RegExp(`\\{${t}\\}`,"g"),String(n))}),e}return s||e}catch(s){return e}}},children:e})}function oi(){const e=Je.useContext(ai);if(!e)throw new Error("useI18n must be used within an I18nProvider");return e}const li=Je.createContext(void 0);function ci({children:e}){const[t,n]=Je.useState(null),[s,r]=Je.useState(null),[a,i]=Je.useState(!1),[o,l]=Je.useState(!1),[c,d]=Je.useState(!0),u=Je.useRef(!1),m=async e=>{try{const{data:t}=await ni.from("user_profiles").select("is_admin, is_event").eq("user_id",e).single();return i((null==t?void 0:t.is_admin)||!1),l(!!(null==t?void 0:t.is_event)),(null==t?void 0:t.is_admin)||!1}catch(t){return i(!1),l(!1),!1}},h=async()=>{try{const{data:{session:e},error:t}=await ni.auth.refreshSession();if(t)throw t;e&&(r(e),n(e.user),await m(e.user.id),localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:e,expiresAt:e.expires_at})))}catch(e){}};Je.useEffect(()=>{let e=!0,t=!1;let a;(async()=>{if(!t){t=!0;try{const{data:{session:t}}=await ni.auth.getSession();t&&e?(r(t),n(t.user),await m(t.user.id)):e&&(r(null),n(null),i(!1),l(!1),localStorage.removeItem("supabase.auth.token"))}catch(s){e&&(r(null),n(null),i(!1))}finally{e&&d(!1)}}})();const{data:o}=ni.auth.onAuthStateChange(async(t,o)=>{e&&(clearTimeout(a),a=setTimeout(async()=>{e&&(o?(null==s?void 0:s.access_token)!==o.access_token&&(r(o),n(o.user),await m(o.user.id)):"SIGNED_OUT"===t&&(r(null),n(null),i(!1),l(!1),localStorage.removeItem("supabase.auth.token"),u.current?(Ga.success("You have been logged out"),u.current=!1):Ga.error("Your session has expired. Please sign in again.")))},100))}),c=setInterval(()=>{if(s&&e){new Date(s.expires_at||0).getTime()-(new Date).getTime()<3e5&&h()}},6e4);return()=>{e=!1,clearTimeout(a),null==o||o.subscription.unsubscribe(),clearInterval(c)}},[]);const p={user:t,session:s,isAdmin:a,isEventUser:o,loading:c,signIn:async(e,t)=>{try{const{data:n,error:s}=await ni.auth.signInWithPassword({email:e,password:t});if(s)throw s;return n.session&&localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:n.session,expiresAt:n.session.expires_at})),{error:null}}catch(n){return{error:n}}},signUp:async(e,t,n)=>{try{const{data:s,error:r}=await ni.auth.signUp({email:e,password:t,options:{data:{username:n||e.split("@")[0]}}});if(r)throw r;return{error:null}}catch(s){return{error:s}}},signOut:async()=>{try{u.current=!0,n(null),r(null),i(!1),l(!1),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-mskpxebbscvisxcceiwx-auth-token"),localStorage.removeItem("authMode"),localStorage.removeItem("confetti_shown"),sessionStorage.clear();const{error:e}=await ni.auth.signOut();setTimeout(()=>{window.location.href="/"},100)}catch(e){Ga.error("Error signing out"),n(null),r(null),i(!1),l(!1)}},refreshSession:h};return X.jsx(li.Provider,{value:p,children:e})}function di(){const e=Je.useContext(li);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const ui=({features:e})=>X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((e,t)=>X.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200 hover:shadow-xl transition-shadow",children:[X.jsx("div",{className:`w-12 h-12 ${e.iconBgColor} rounded-full flex items-center justify-center mb-4`,children:X.jsx("i",{className:`fas ${e.icon} ${e.iconTextColor} text-xl`})}),X.jsx("h3",{className:"font-inter text-xl font-semibold mb-2 text-gray-800",children:e.title}),X.jsx("p",{className:"text-gray-600",children:e.description})]},t))});function mi(){const e=[{src:"/ADX_intro.png",title:"ADX Introduction",caption:"Overview of the Axe the DAX sandbox platform"},{src:"/AXE_options_catalog.png",title:"Options Catalogue",caption:"Explore strikes, expiries, and pricing"},{src:"/ADX_active_positions.png",title:"Active Positions",caption:"Manage open positions and risk at a glance"},{src:"/ADX_portfolio_perf.png",title:"Portfolio Performance",caption:"Track P&L and performance over time"},{src:"/HTI_intro.png",title:"HTI Overview",caption:"Hack the Interview: weekly questions, timed and scored"}],[t,n]=Je.useState(0);Je.useEffect(()=>{const t=setInterval(()=>n(t=>(t+1)%e.length),9e3);return()=>clearInterval(t)},[]);const s=Je.useCallback(()=>n(t=>(t-1+e.length)%e.length),[]),r=Je.useCallback(()=>n(t=>(t+1)%e.length),[]),a=Je.useCallback(e=>{"ArrowLeft"===e.key&&s(),"ArrowRight"===e.key&&r()},[s,r]);return X.jsxs("div",{className:"relative w-full max-w-6xl mx-auto overflow-hidden rounded-lg md:rounded-xl border border-gray-200 shadow-sm bg-white max-h-[720px] md:max-h-[800px]",style:{aspectRatio:16/9},tabIndex:0,role:"region","aria-label":"Image carousel",onKeyDown:a,children:[e.map((e,n)=>X.jsxs("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity duration-500 "+(n===t?"opacity-100":"opacity-0"),children:[X.jsx("img",{src:e.src,alt:e.title,className:"max-w-full max-h-full select-none",draggable:!1,decoding:"async",loading:0===n?"eager":"lazy",style:{imageRendering:"auto"}}),X.jsxs("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3 max-w-[80%] rounded-md px-2 py-1 sm:px-3 sm:py-1.5 backdrop-blur bg-black/40 text-white",children:[X.jsx("div",{className:"text-[10px] sm:text-xs font-semibold leading-tight",children:e.title}),X.jsx("div",{className:"hidden sm:block text-[11px] opacity-90 leading-tight",children:e.caption})]})]},e.src+n)),X.jsx("button",{type:"button",onClick:s,"aria-label":"Previous slide",className:"absolute left-2 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-9 h-9 rounded-full bg-white/80 hover:bg-white shadow border border-gray-200",children:X.jsx(Dn,{className:"w-5 h-5 text-gray-700"})}),X.jsx("button",{type:"button",onClick:r,"aria-label":"Next slide",className:"absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-9 h-9 rounded-full bg-white/80 hover:bg-white shadow border border-gray-200",children:X.jsx(An,{className:"w-5 h-5 text-gray-700"})}),X.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2",children:e.map((e,s)=>X.jsx("button",{onClick:()=>n(s),"aria-label":`Go to slide ${s+1}`,className:"w-2.5 h-2.5 rounded-full "+(s===t?"bg-blue-600":"bg-white/70 border border-gray-300")},s))})]})}const hi=()=>{const{t:e}=oi(),t=[{icon:"fa-project-diagram",iconBgColor:"bg-blue-500",iconTextColor:"text-white",title:e("home.features.projectSprint.title"),description:e("home.features.projectSprint.description")},{icon:"fa-users",iconBgColor:"bg-indigo-500",iconTextColor:"text-white",title:e("home.features.biweeklyMeetings.title"),description:e("home.features.biweeklyMeetings.description")},{icon:"fa-trophy",iconBgColor:"bg-amber-500",iconTextColor:"text-white",title:e("home.features.demoDay.title"),description:e("home.features.demoDay.description")}];return e("home.metrics.activeMembers"),e("home.metrics.projectsCompleted"),e("home.metrics.eventsHosted"),e("home.metrics.industryPartners"),X.jsxs("section",{id:"home",className:"min-h-screen bg-white",children:[X.jsx("div",{className:"relative bg-gradient-to-r from-blue-50 to-indigo-50",children:X.jsx("div",{className:"mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8 relative z-10",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[X.jsxs("div",{children:[X.jsx("h1",{className:"font-inter text-4xl md:text-5xl font-bold mb-4 text-gray-800",children:e("home.heroSubtitle")}),X.jsx("p",{className:"text-lg mb-8 text-gray-600",children:e("home.heroDescription")})]}),X.jsx("div",{className:"hidden lg:block",children:X.jsx("div",{className:"relative h-80 w-full rounded-lg bg-white p-6 shadow-lg border border-gray-200",children:X.jsx("div",{className:"flex items-center justify-center h-full",children:X.jsx("img",{src:"/fsqds-hero.png",alt:"FS Quant & Data Science Initiative",className:"max-h-full max-w-full object-contain"})})})})]})})}),X.jsx("div",{className:"bg-white",children:X.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10",children:[X.jsx("div",{className:"rounded-2xl p-[2px] bg-gradient-to-r from-gray-200/70 to-gray-300/70 shadow-lg",children:X.jsxs("div",{className:"rounded-2xl bg-white/90 backdrop-blur-sm p-6 sm:p-7 text-center ring-1 ring-gray-100/80",children:[X.jsxs("div",{className:"text-lg md:text-xl font-inter font-semibold text-gray-900 flex items-center justify-center gap-2",children:[X.jsx("span",{children:"FS QDS Battleground is LIVE! Join now."}),X.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-50 border border-red-200 text-[10px] font-semibold text-red-700",children:[X.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse"}),"LIVE"]})]}),X.jsx("p",{className:"mt-2 text-gray-600",children:"Thank you for your interest. Applications for WS25 are closed."}),X.jsx("div",{className:"mt-4",children:X.jsx(Gs,{href:"/battleground",className:"inline-flex items-center px-4 py-2 rounded-md bg-[#0B3D91] text-white hover:bg-[#082D69] transition-colors",children:"Launch Battleground"})})]})}),X.jsx("div",{className:"mt-6",children:X.jsx(mi,{})})]})}),X.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("home.lab.title")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("home.lab.description")})]}),X.jsx(ui,{features:t})]})]})},pi=({member:e,variant:t="large",className:n=""})=>"large"===t?X.jsxs("div",{className:`bg-white rounded-xl border border-neutral-200 shadow-sm hover:shadow-md transition-all hover:-translate-y-[1px] ${n}`,children:[X.jsxs("div",{className:"w-full h-72 md:h-80 bg-neutral-100 relative overflow-hidden",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover",style:{objectPosition:"paul-wentzel"===(null==e?void 0:e.id)?"50% 30%":"50% 10%"}}):X.jsx("div",{className:"flex items-center justify-center w-full h-full",children:X.jsx("div",{className:"text-6xl font-semibold text-neutral-400",children:e.name.charAt(0)})}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/5 to-transparent pointer-events-none"})]}),X.jsxs("div",{className:"p-6",children:[X.jsx("h4",{className:"font-inter text-2xl font-semibold tracking-tight text-neutral-900",children:e.linkedin?X.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-[#0B3D91] hover:underline",children:e.name}):e.name}),X.jsx("div",{className:"mt-1 text-[#0B3D91] font-medium",children:e.position}),Array.isArray(e.subtitle)?e.subtitle.map((e,t)=>X.jsx("p",{className:"mt-1 text-neutral-700 "+(t>=1?"text-xs":"text-sm"),children:e},t)):e.subtitle&&X.jsx("p",{className:"mt-1 text-neutral-700 text-sm",children:e.subtitle}),e.classOf&&X.jsx("p",{className:"text-neutral-600 text-sm",children:e.classOf}),e.bio&&X.jsx("p",{className:"mt-3 text-neutral-700 text-sm whitespace-pre-line",children:e.bio}),Array.isArray(e.bullets)&&e.bullets.length>0&&X.jsxs("div",{className:"mt-3",children:[e.bulletsLabel&&X.jsx("div",{className:"text-sm font-medium text-neutral-800 mb-1",children:e.bulletsLabel}),X.jsx("ul",{className:"list-disc list-inside text-neutral-700 text-sm space-y-1",children:e.bullets.map((e,t)=>X.jsx("li",{children:e},t))})]}),X.jsx("div",{className:"mt-4 h-px bg-neutral-200"}),X.jsx("div",{className:"mt-4 flex items-center space-x-3",children:e.email&&X.jsxs("a",{href:`mailto:${e.email}`,className:"inline-flex items-center text-neutral-600 hover:text-[#0B3D91] transition-colors",children:[X.jsx("i",{className:"fas fa-envelope mr-2"}),X.jsx("span",{className:"text-sm",children:"Contact"})]})})]})]}):"medium"===t?X.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border border-gray-200 ${n}`,children:X.jsxs("div",{className:"flex flex-col items-center",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-24 h-24 rounded-full object-cover mb-4"}):X.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center mb-4 text-2xl font-bold text-gray-500",children:e.name.charAt(0)}),X.jsx("h4",{className:"font-inter text-lg font-semibold mb-1 text-center text-gray-800",children:e.name}),X.jsx("p",{className:"text-blue-600 text-sm font-medium mb-2 text-center",children:e.position||e.role}),X.jsx("p",{className:"text-gray-600 text-sm text-center",children:e.bio})]})}):X.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-4 flex flex-col items-center border border-gray-200 ${n}`,children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-full object-cover mb-2"}):X.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center mb-2 text-lg font-bold text-gray-500",children:e.name.charAt(0)}),X.jsx("h4",{className:"font-inter text-sm font-semibold mb-0.5 text-center text-gray-800",children:e.name}),X.jsx("p",{className:"text-gray-600 text-xs text-center",children:e.department})]}),fi=()=>{const{t:e}=oi();return X.jsx("section",{id:"members",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("members.title")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("members.subtitle")})]}),X.jsxs("div",{className:"mb-12",children:[X.jsx("h3",{className:"text-2xl font-inter font-semibold mb-6 text-gray-800 text-center",children:e("members.orgaTeamTitle")}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[{id:"kartik-yadav",name:"Kartik Yadav",position:"Head",department:"FS Quant & Data Science Initiative",subtitle:["Master of Finance","Founder QDS & Battleground"],classOf:"Class of 2026",image:"/kartik.jpg",email:"kartik.yadav@fs-students.de",expertise:["Machine Learning","Quantitative Finance","Data Engineering"]},{id:"paul-wentzel",name:"Paul Wentzel",position:"Head",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Business Administration",classOf:"Class of 2028",image:"/paul.jpeg",email:"paul.wentzel@fs-students.de",expertise:["Statistical Analysis","Risk Management","Python"],linkedin:"https://www.linkedin.com/in/paul-wentzel"},{id:"takudzwa-mutetwa",name:"Takudzwa Mutetwa",position:"Operations",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Computational Business Analytics",classOf:"Class of 2028",image:"/taku.jpeg",email:"takudzwa.mutetwa@fs-students.de"},{id:"nicolette-peytchev",name:"Nicolette Peytchev",position:"Outreach",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Computational Business Analytics",classOf:"Class of 2029",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"nicolette.peytchev@fs-students.de"},{id:"carolyn-ponik",name:"Carolyn Ponik",position:"Outreach",department:"FS Quant & Data Science Initiative",subtitle:"Master in Management",classOf:"Class of 2027",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"carolynponik@gmail.com"},{id:"aurel-andre",name:"Aurel Andre",position:"Outreach",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Business Administration",classOf:"Class of 2029",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"aurel.andre@fs-students.de"},{id:"shravani-m",name:"Shravani Mahadeshwar",position:"Operations",department:"FS Quant & Data Science Initiative",subtitle:"Master in Applied Data Science",classOf:"Class of 2027",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"Shravani.Mahadeshwar@fs-students.de"},{id:"pranauti-k",name:"Pranauti Kendhe",position:"Operations",department:"FS Quant & Data Science Initiative",subtitle:"Master of Finance",classOf:"Class of 2027",image:"https://placehold.co/400x400/3b3b3b/cccccc?text=Member",email:"pranauti.kendhe@fs-students.de"}].map(e=>X.jsx(pi,{member:e,variant:"large"},e.id))})]}),X.jsxs("div",{className:"mb-12",children:[X.jsx("h3",{className:"text-2xl font-inter font-semibold mb-6 text-gray-800 text-center",children:e("members.facultyAdvisorsTitle")}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[{id:"grigory-vilkov",name:"Prof. Dr. Grigory Vilkov",position:"Professor of Finance at FS",image:"/drvilkov.jpg",bulletsLabel:"Research Agenda",bullets:["Deep learning and parametric portfolios.","Automatic feature discovery for conditional alpha modeling."],email:"g.vilkov@fs.de"},{id:"uwe-wystup",name:"Prof. Dr. Uwe Wystup",position:"Founder & Managing Director at MathFinance",image:"/drwystup.jpg",bullets:["Honorary Professor for Quantitative Finance at FS","Specializes in expert reports, conflict resolution (derivatives), training, structuring, independent valuation."],email:"uwe.wystup@mathfinance.com"}].map(e=>X.jsx(pi,{member:e,variant:"large"},e.id))})]})]})})},gi=()=>{const{t:e}=oi(),[t,n]=Je.useState("all"),s=[{id:"risk-modeling",title:"Credit Risk Modeling with ML",description:"Developing advanced machine learning models for credit risk assessment using real banking data.",status:"current",type:"industry",teamSize:5,technologies:["Python","TensorFlow","XGBoost","SQL"],partner:"Commerzbank",duration:"3 months"},{id:"portfolio-opt",title:"Portfolio Optimization Engine",description:"Building a quantitative portfolio optimization system using modern portfolio theory and factor models.",status:"current",type:"industry",teamSize:4,technologies:["Python","NumPy","Pandas","CVXPY"],partner:"DWS Group",duration:"3 months"},{id:"nlp-sentiment",title:"Financial News Sentiment Analysis",description:"NLP-based sentiment analysis of financial news to predict market movements.",status:"showcase",type:"research",teamSize:6,technologies:["BERT","PyTorch","Hugging Face","AWS"],achievements:["92% accuracy","Real-time processing"],duration:"4 months"},{id:"fraud-detection",title:"Real-time Fraud Detection System",description:"Anomaly detection system for identifying fraudulent transactions in real-time.",status:"showcase",type:"industry",teamSize:5,technologies:["Apache Kafka","Spark","scikit-learn","Docker"],partner:"EY",achievements:["99.2% precision","<100ms latency"],duration:"3 months"}].filter(e=>"all"===t||("current"===t?"current"===e.status:"showcase"===t?"showcase"===e.status:"industry"!==t||"industry"===e.type));return X.jsx("section",{id:"projects",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("projectsTitle")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("projectsSubtitle")})]}),X.jsx("div",{className:"flex flex-wrap justify-center mb-12 gap-3",children:[{key:"all",label:"All Projects",icon:"fa-th"},{key:"current",label:"Current Sprint",icon:"fa-clock"},{key:"showcase",label:"Showcase",icon:"fa-trophy"},{key:"industry",label:"Industry Partners",icon:"fa-handshake"}].map(e=>X.jsxs("button",{className:"px-5 py-2.5 rounded-full font-medium transition-all duration-200 flex items-center gap-2 "+(t===e.key?"bg-blue-600 text-white shadow-lg scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300"),onClick:()=>n(e.key),children:[X.jsx("i",{className:`fas ${e.icon} text-sm`}),e.label]},e.key))}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:s.map(e=>X.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200 hover:shadow-xl transition-shadow",children:[X.jsxs("div",{className:"flex justify-between items-start mb-4",children:[X.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e.title}),X.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("current"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:"current"===e.status?"Active":"Completed"})]}),X.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),e.partner&&X.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[X.jsx("i",{className:"fas fa-building text-gray-400"}),X.jsx("span",{className:"text-sm text-gray-700 font-medium",children:e.partner})]}),X.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx("i",{className:"fas fa-users text-gray-400"}),X.jsxs("span",{children:[e.teamSize," members"]})]}),X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx("i",{className:"fas fa-calendar text-gray-400"}),X.jsx("span",{children:e.duration})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.technologies.map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e},t))}),e.achievements&&X.jsx("div",{className:"pt-4 border-t border-gray-200",children:X.jsx("div",{className:"flex flex-wrap gap-3",children:e.achievements.map((e,t)=>X.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[X.jsx("i",{className:"fas fa-check-circle"}),X.jsx("span",{children:e})]},t))})})]},e.id))}),X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-8 mb-16 border border-blue-200",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-6 text-center text-gray-800",children:"How Our Project Sprints Work"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-rocket text-blue-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Project Kickoff"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Teams form and receive real datasets and problem statements from industry partners."})]}),X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-code text-indigo-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Sprint Development"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Bi-weekly check-ins, mentorship sessions, and collaborative problem-solving on Teams."})]}),X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-trophy text-amber-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Demo Day"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Teams present to industry jury. Winners receive prizes and internship referrals."})]})]})]}),X.jsxs("div",{className:"text-center bg-white rounded-lg shadow-lg p-12 border border-gray-200",children:[X.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Join Our Next Project Sprint"}),X.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Be part of a team tackling real-world quant and data science challenges. Build your portfolio, gain industry experience, and compete for prizes."}),X.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[X.jsx("a",{href:"/contact",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Apply for Next Sprint"}),X.jsx("a",{href:"#",className:"px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Become a Partner"})]})]})]})})},xi=new Date,vi=e=>{const t=new Date(xi);return t.setDate(t.getDate()+e),t};vi(15),vi(18),vi(27),vi(35);const yi=e=>{const t=new Date(xi);return t.setDate(t.getDate()-e),t};yi(25),yi(40),yi(55),yi(70);const bi=e=>{const t=e=>e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",n=t(e.start),s=t(e.end),r=t(new Date);return`BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Data Science Student Initiative//NONSGML Calendar//EN\nCALSCALE:GREGORIAN\nBEGIN:VEVENT\nUID:${e.id}@dssi.frankfurt-school.de\nDTSTAMP:${r}\nDTSTART:${n}\nDTEND:${s}\nSUMMARY:${e.title}\nDESCRIPTION:${e.description||""}\nLOCATION:${e.location||""}\nORGANIZER:${e.organizer||"Data Science Student Initiative"}\nURL:${e.url||"https://dssi.frankfurt-school.de"}\nEND:VEVENT\nEND:VCALENDAR`},wi=e=>{const t=e=>e.toISOString().replace(/-|:|\.\d+/g,""),n=t(e.start),s=t(e.end);return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:e.title,dates:`${n}/${s}`,details:e.description||"",location:e.location||"",sf:"true",output:"xml"}).toString()}`},ji=Oa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Ni=Je.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...r},a)=>{const i=s?me:"button";return X.jsx(i,{className:Pa(ji({variant:t,size:n,className:e})),ref:a,...r})});Ni.displayName="Button";const ki=({event:e})=>{var t;const{t:n}=oi(),s=(e=>{switch(e){case"workshop":return"bg-[#0B3D91] text-white";case"speaker":return"bg-[#00A6ED] text-white";case"competition":return"bg-[#FFC107] text-[#0B3D91]";case"meetup":return"bg-[#28A745] text-white";case"exclusive":return"bg-[#6B21A8] text-white";default:return"bg-neutral-500 text-white"}})(e.type),r=e&&e.date instanceof Date?e.date:new Date(e.date),a=Boolean(e.isTBA||e.tbaText),i=e.tbaText,o=a?"TBA":ot(r,"d"),l=a?(null==(t=null==i?void 0:i.match(/\((.+)\)/))?void 0:t[1])||"TBA":ot(r,"MMM"),c="startTime"in e?e.startTime:"time"in e?e.time:void 0,d="endTime"in e||"endTime"in e?e.endTime:void 0,u=e.image,m=u?(()=>{try{const e="/",t=u.startsWith("/")?u.slice(1):u;return e.endsWith("/")?`${e}${t}`:`${e}/${t}`}catch{return u}})():void 0,h=()=>{const e=c?new Date(`${r.toDateString()} ${c}`):new Date(r),t=d?new Date(`${r.toDateString()} ${d}`):c?new Date(e.getTime()+72e5):new Date(e.getTime()+864e5);return{start:e,end:t}},p=()=>{const{start:t,end:n}=h(),s={...e,start:t,end:n},r=bi(s),a=new Blob([r],{type:"text/calendar;charset=utf-8"}),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.setAttribute("download",`${e.title.replace(/\s+/g,"-")}.ics`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},f=()=>{const{start:t,end:n}=h(),s={...e,start:t,end:n};window.open(wi(s),"_blank")};return m?X.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-neutral-200 hover:shadow-md transition-all h-full",children:[X.jsxs("div",{className:"relative group",children:[X.jsx("img",{src:m,alt:e.title,className:"w-full aspect-[16/9] object-cover",onError:e=>{e.target.style.display="none"}}),X.jsx("div",{className:"absolute top-3 left-3",children:X.jsx("span",{className:`${s} text-xs px-2 py-1 rounded-full shadow-sm capitalize`,children:(()=>{const t=e.type||"",s=n(`events.types.${t}`);return s&&!s.startsWith("events.types.")?s:t.charAt(0).toUpperCase()+t.slice(1)})()})})]}),X.jsxs("div",{className:"p-4",children:[X.jsxs("div",{className:"flex items-center text-sm text-neutral-600 mb-2",children:[a?X.jsx("span",{className:"font-semibold text-neutral-900 mr-2",children:i||"TBA"}):X.jsxs(X.Fragment,{children:[X.jsxs("span",{className:"font-semibold text-neutral-900 mr-2",children:[l," ",o]}),X.jsx("i",{className:"far fa-clock mx-2 text-neutral-400"}),X.jsx("span",{children:c?d?`${c} - ${d}`:c:"All day"})]}),e.location&&X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"fas fa-map-marker-alt ml-4 mr-2 text-neutral-400"}),X.jsx("span",{children:e.location})]})]}),X.jsx("h3",{className:"font-inter text-lg font-semibold mb-2 text-neutral-900",children:e.title}),e.description&&X.jsx("p",{className:"text-neutral-700 text-sm mb-4",children:e.description}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs(Ni,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:p,children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," iCal"]}),X.jsxs(Ni,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:f,children:[X.jsx("i",{className:"fab fa-google mr-2"})," Google Calendar"]})]})]})]}):X.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-neutral-200 border-t-4 border-[#0B3D91] hover:shadow-md transition-all h-full",children:X.jsxs("div",{className:"flex items-stretch h-full",children:[X.jsxs("div",{className:"bg-[#0B3D91] text-white font-semibold p-4 text-center flex flex-col justify-center min-w-[90px] self-stretch",children:[X.jsx("span",{className:"text-2xl font-bold",children:o}),X.jsx("span",{className:"uppercase tracking-wide text-sm opacity-90",children:l})]}),X.jsxs("div",{className:"p-4 flex-1",children:[X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsx("h3",{className:"font-inter text-lg font-semibold mb-1 text-neutral-900",children:e.title}),X.jsx("span",{className:`${s} text-xs px-2 py-1 rounded-full`,children:(()=>{const t=e.type||"",s=n(`events.types.${t}`);return s&&!s.startsWith("events.types.")?s:t.charAt(0).toUpperCase()+t.slice(1)})()})]}),e.description&&X.jsx("p",{className:"text-neutral-700 text-sm mb-3",children:e.description}),X.jsxs("div",{className:"flex items-center text-sm text-neutral-600 mb-3",children:[a?X.jsx("span",{className:"font-semibold mr-2",children:i||"TBA"}):X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"far fa-clock mr-2"}),X.jsx("span",{children:c?d?`${c} - ${d}`:c:"All day"})]}),e.location&&X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"fas fa-map-marker-alt ml-4 mr-2"}),X.jsx("span",{children:e.location})]})]}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs(Ni,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:p,children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," iCal"]}),X.jsxs(Ni,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:f,children:[X.jsx("i",{className:"fab fa-google mr-2"})," Google Calendar"]})]})]})]})})};function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(e){var t=function(e,t){if("object"!=Si(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Si(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Si(t)?t:t+""}function Ei(e,t,n){return(t=_i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach(function(t){Ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ai(e,t){if(null==e)return{};var n,s,r=ft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ci(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_i(s.key),s)}}function Oi(e,t,n){return t&&Ci(e.prototype,t),n&&Ci(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ii(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ii=function(){return!!e})()}function Ri(e,t,n){return t=Pi(t),function(e,t){if(t&&("object"==Si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gt(e)}(e,Ii()?Reflect.construct(t,n||[],Pi(e).constructor):t.apply(e,n))}function Li(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}function Fi(e){if(Array.isArray(e))return e}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=Array(t);n<t;n++)s[n]=e[n];return s}function Bi(e,t){if(e){if("string"==typeof e)return zi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zi(e,t):void 0}}function Ui(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qi(e,t){return Fi(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,r,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(s=a.call(n)).done)&&(o.push(s.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||Bi(e,t)||Ui()}function Wi(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Wi(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function $i(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=Wi(e))&&(s&&(s+=" "),s+=t);return s}var Yi=function(e,t,n,s,r,a,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,s,r,a,i,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};const Vi=nt(Yi);var Hi=function(){};function Gi(e,t){return void 0!==e[t]}function Ki(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Qi(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Xi(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function Zi(e,t){try{var n=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,s)}finally{this.props=n,this.state=s}}Qi.__suppressDeprecationWarning=!0,Xi.__suppressDeprecationWarning=!0,Zi.__suppressDeprecationWarning=!0;var Ji="milliseconds",eo="seconds",to="minutes",no="hours",so="day",ro="week",ao="month",io="year",oo="decade",lo="century",co={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},uo={month:1,year:12,decade:120,century:1200};function mo(e){return e%4==0&&e%100!=0||e%400==0?29:28}function ho(e,t,n){switch(e=new Date(e),n){case Ji:case eo:case to:case no:case so:case ro:return function(e,t){var n=new Date(+e+t);return function(e,t){var n=e.getTimezoneOffset(),s=t.getTimezoneOffset();return new Date(+t+(s-n)*co.minutes)}(e,n)}(e,t*co[n]);case ao:case io:case oo:case lo:return function(e,t){var n=e.getFullYear(),s=e.getMonth(),r=e.getDate(),a=12*n+s+t,i=Math.trunc(a/12),o=a%12,l=Math.min(r,function(e){return[31,mo(e),31,30,31,30,31,31,30,31,30,31]}(i)[o]),c=new Date(e);return c.setFullYear(i),c.setDate(1),c.setMonth(o),c.setDate(l),c}(e,t*uo[n])}throw new TypeError('Invalid units: "'+n+'"')}function po(e,t,n){return ho(e,-t,n)}function fo(e,t,n){switch(e=new Date(e),t){case lo:case oo:case io:e=Co(e,0);case ao:e=Mo(e,1);case ro:case so:e=Do(e,0);case no:e=To(e,0);case to:e=Eo(e,0);case eo:e=_o(e,0)}return t===oo&&(e=po(e,Oo(e)%10,"year")),t===lo&&(e=po(e,Oo(e)%100,"year")),t===ro&&(e=Po(e,0,n)),e}function go(e,t,n){switch(e=fo(e=new Date(e),t,n),t){case lo:case oo:case io:case ao:case ro:(e=po(e=ho(e,1,t),1,so)).setHours(23,59,59,999);break;case so:e.setHours(23,59,59,999);break;case no:case to:case eo:e=po(e=ho(e,1,t),1,Ji)}return e}var xo=Ro(function(e,t){return e===t}),vo=Ro(function(e,t){return e!==t}),yo=Ro(function(e,t){return e>t}),bo=Ro(function(e,t){return e>=t}),wo=Ro(function(e,t){return e<t}),jo=Ro(function(e,t){return e<=t});function No(){return new Date(Math.min.apply(Math,arguments))}function ko(){return new Date(Math.max.apply(Math,arguments))}function So(e,t,n,s){return s=s||"day",(!t||bo(e,t,s))&&(!n||jo(e,n,s))}var _o=Io("Milliseconds"),Eo=Io("Seconds"),To=Io("Minutes"),Do=Io("Hours"),Ao=Io("Day"),Mo=Io("Date"),Co=Io("Month"),Oo=Io("FullYear");function Po(e,t,n){var s=(Ao(e)+7-(n||0))%7;return void 0===t?s:ho(e,t-s,so)}function Io(e){var t=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(n,s){if(void 0===s)return n["get"+e]();var r=new Date(n);return r["set"+e](s),t&&r["get"+e]()!=s&&("Hours"===e||s>=t&&r.getHours()-n.getHours()<Math.floor(s/t))&&r["set"+e](s+t),r}}function Ro(e){return function(t,n,s){return e(+fo(t,s),+fo(n,s))}}const Lo=Object.freeze(Object.defineProperty({__proto__:null,add:ho,century:function(e,t){return void 0===t?Oo(fo(e,lo)):ho(e,t+100,io)},date:Mo,day:Ao,decade:function(e,t){return void 0===t?Oo(fo(e,oo)):ho(e,t+10,io)},diff:function(e,t,n,s){var r,a,i;switch(n){case Ji:case eo:case to:case no:case so:case ro:r=t.getTime()-e.getTime();break;case ao:case io:case oo:case lo:r=12*(Oo(t)-Oo(e))+Co(t)-Co(e);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case Ji:a=1;break;case eo:a=1e3;break;case to:a=6e4;break;case no:a=36e5;break;case so:a=864e5;break;case ro:a=6048e5;break;case ao:a=1;break;case io:a=12;break;case oo:a=120;break;case lo:a=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return i=r/a,s?i:Math.round(i)},endOf:go,eq:xo,gt:yo,gte:bo,hours:Do,inRange:So,lt:wo,lte:jo,max:ko,milliseconds:_o,min:No,minutes:To,month:Co,neq:vo,seconds:Eo,startOf:fo,subtract:po,weekday:Po,year:Oo},Symbol.toStringTag,{value:"Module"}));function Fo(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function zo(e){return function(e){if(Array.isArray(e))return zi(e)}(e)||Fo(e)||Bi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Bo=bt,Uo=wt,qo=jt,Wo=Math.ceil,$o=Math.max;const Yo=nt(function(e,t,n){t=(n?Uo(e,t,n):void 0===t)?1:$o(qo(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var r=0,a=0,i=Array(Wo(s/t));r<s;)i[a++]=Bo(e,r,r+=t);return i});function Vo(e){return e&&e.ownerDocument||document}function Ho(e,t){return function(e){var t=Vo(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Go=/([A-Z])/g;var Ko=/^ms-/;function Qo(e){return function(e){return e.replace(Go,"-$1").toLowerCase()}(e).replace(Ko,"-ms-")}var Xo=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Zo(e,t){var n="",s="";if("string"==typeof t)return e.style.getPropertyValue(Qo(t))||Ho(e).getPropertyValue(Qo(t));Object.keys(t).forEach(function(r){var a=t[r];a||0===a?!function(e){return!(!e||!Xo.test(e))}(r)?n+=Qo(r)+": "+a+";":s+=r+"("+a+") ":e.style.removeProperty(Qo(r))}),s&&(n+="transform: "+s+";"),e.style.cssText+=";"+n}function Jo(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function el(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function tl(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(n,s){var r=el(n);if(void 0===s)return r?r[e]:n[t];r?r.scrollTo(r[e],s):n[t]=s}}const nl=tl("pageXOffset"),sl=tl("pageYOffset");function rl(e){var t=Vo(e),n={top:0,left:0,height:0,width:0},s=t&&t.documentElement;return s&&Jo(s,e)?(void 0!==e.getBoundingClientRect&&(n=e.getBoundingClientRect()),n={top:n.top+sl(s)-(s.clientTop||0),left:n.left+nl(s)-(s.clientLeft||0),width:n.width,height:n.height}):n}var al=function(e){return!!e&&"offsetParent"in e};function il(e,t){var n,s={top:0,left:0};if("fixed"===Zo(e,"position"))n=e.getBoundingClientRect();else{var r=t||function(e){for(var t=Vo(e),n=e&&e.offsetParent;al(n)&&"HTML"!==n.nodeName&&"static"===Zo(n,"position");)n=n.offsetParent;return n||t.documentElement}(e);n=rl(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(r)&&(s=rl(r));var a=String(Zo(r,"borderTopWidth")||0);s.top+=parseInt(a,10)-sl(r)||0;var i=String(Zo(r,"borderLeftWidth")||0);s.left+=parseInt(i,10)-nl(r)||0}var o=String(Zo(e,"marginTop")||0),l=String(Zo(e,"marginLeft")||0);return yt({},n,{top:n.top-s.top-(parseInt(o,10)||0),left:n.left-s.left-(parseInt(l,10)||0)})}const ol=!("undefined"==typeof window||!window.document||!window.document.createElement);var ll=(new Date).getTime();var cl="clearTimeout",dl=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-ll)),s=setTimeout(e,n);return ll=t,s},ul=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};ol&&["","webkit","moz","o","ms"].some(function(e){var t=ul(e,"request");return t in window&&(cl=ul(e,"cancel"),dl=function(e){return window[t](e)}),!!dl});var ml,hl=function(e){"function"==typeof window[cl]&&window[cl](e)},pl=dl;function fl(e,t){if(!ml){var n=document.body,s=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;ml=function(e,t){return s.call(e,t)}}return ml(e,t)}var gl=Function.prototype.bind.call(Function.prototype.call,[].slice);var xl=!1,vl=!1;try{var yl={get passive(){return xl=!0},get once(){return vl=xl=!0}};ol&&(window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,!0))}catch(mj){}function bl(e){const t=function(e){const t=Je.useRef(e);return Je.useEffect(()=>{t.current=e},[e]),t}(e);return Je.useCallback(function(...e){return t.current&&t.current(...e)},[t])}function wl(){return Je.useState(null)}function jl(e){const t=function(){const e=Je.useRef(!0),t=Je.useRef(()=>e.current);return Je.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}();return[e[0],Je.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Nl="top",kl="bottom",Sl="right",_l="left",El="auto",Tl=[Nl,kl,Sl,_l],Dl="start",Al="end",Ml="viewport",Cl="popper",Ol=Tl.reduce(function(e,t){return e.concat([t+"-"+Dl,t+"-"+Al])},[]),Pl=[].concat(Tl,[El]).reduce(function(e,t){return e.concat([t,t+"-"+Dl,t+"-"+Al])},[]),Il=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Rl(e){return e.split("-")[0]}function Ll(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Fl(e){return e instanceof Ll(e).Element||e instanceof Element}function zl(e){return e instanceof Ll(e).HTMLElement||e instanceof HTMLElement}function Bl(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Ll(e).ShadowRoot||e instanceof ShadowRoot)}var Ul=Math.max,ql=Math.min,Wl=Math.round;function $l(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Yl(){return!/^((?!chrome|android).)*safari/i.test($l())}function Vl(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),r=1,a=1;t&&zl(e)&&(r=e.offsetWidth>0&&Wl(s.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Wl(s.height)/e.offsetHeight||1);var i=(Fl(e)?Ll(e):window).visualViewport,o=!Yl()&&n,l=(s.left+(o&&i?i.offsetLeft:0))/r,c=(s.top+(o&&i?i.offsetTop:0))/a,d=s.width/r,u=s.height/a;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Hl(e){var t=Vl(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function Gl(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Bl(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Kl(e){return e?(e.nodeName||"").toLowerCase():null}function Ql(e){return Ll(e).getComputedStyle(e)}function Xl(e){return["table","td","th"].indexOf(Kl(e))>=0}function Zl(e){return((Fl(e)?e.ownerDocument:e.document)||window.document).documentElement}function Jl(e){return"html"===Kl(e)?e:e.assignedSlot||e.parentNode||(Bl(e)?e.host:null)||Zl(e)}function ec(e){return zl(e)&&"fixed"!==Ql(e).position?e.offsetParent:null}function tc(e){for(var t=Ll(e),n=ec(e);n&&Xl(n)&&"static"===Ql(n).position;)n=ec(n);return n&&("html"===Kl(n)||"body"===Kl(n)&&"static"===Ql(n).position)?t:n||function(e){var t=/firefox/i.test($l());if(/Trident/i.test($l())&&zl(e)&&"fixed"===Ql(e).position)return null;var n=Jl(e);for(Bl(n)&&(n=n.host);zl(n)&&["html","body"].indexOf(Kl(n))<0;){var s=Ql(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(e)||t}function nc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function sc(e,t,n){return Ul(e,ql(t,n))}function rc(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ac(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}const ic={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,s=e.name,r=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,o=Rl(n.placement),l=nc(o),c=[_l,Sl].indexOf(o)>=0?"height":"width";if(a&&i){var d=function(e,t){return rc("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ac(e,Tl))}(r.padding,n),u=Hl(a),m="y"===l?Nl:_l,h="y"===l?kl:Sl,p=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],f=i[l]-n.rects.reference[l],g=tc(a),x=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=p/2-f/2,y=d[m],b=x-u[c]-d[h],w=x/2-u[c]/2+v,j=sc(y,w,b),N=l;n.modifiersData[s]=((t={})[N]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&Gl(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function oc(e){return e.split("-")[1]}var lc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cc(e){var t,n=e.popper,s=e.popperRect,r=e.placement,a=e.variation,i=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,m=i.x,h=void 0===m?0:m,p=i.y,f=void 0===p?0:p,g="function"==typeof d?d({x:h,y:f}):{x:h,y:f};h=g.x,f=g.y;var x=i.hasOwnProperty("x"),v=i.hasOwnProperty("y"),y=_l,b=Nl,w=window;if(c){var j=tc(n),N="clientHeight",k="clientWidth";if(j===Ll(n)&&"static"!==Ql(j=Zl(n)).position&&"absolute"===o&&(N="scrollHeight",k="scrollWidth"),r===Nl||(r===_l||r===Sl)&&a===Al)b=kl,f-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[N])-s.height,f*=l?1:-1;if(r===_l||(r===Nl||r===kl)&&a===Al)y=Sl,h-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[k])-s.width,h*=l?1:-1}var S,_=Object.assign({position:o},c&&lc),E=!0===d?function(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Wl(n*r)/r||0,y:Wl(s*r)/r||0}}({x:h,y:f},Ll(n)):{x:h,y:f};return h=E.x,f=E.y,l?Object.assign({},_,((S={})[b]=v?"0":"",S[y]=x?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+f+"px)":"translate3d("+h+"px, "+f+"px, 0)",S)):Object.assign({},_,((t={})[b]=v?f+"px":"",t[y]=x?h+"px":"",t.transform="",t))}const dc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=void 0===s||s,a=n.adaptive,i=void 0===a||a,o=n.roundOffsets,l=void 0===o||o,c={placement:Rl(t.placement),variation:oc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,cc(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,cc(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var uc={passive:!0};const mc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,a=void 0===r||r,i=s.resize,o=void 0===i||i,l=Ll(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(e){e.addEventListener("scroll",n.update,uc)}),o&&l.addEventListener("resize",n.update,uc),function(){a&&c.forEach(function(e){e.removeEventListener("scroll",n.update,uc)}),o&&l.removeEventListener("resize",n.update,uc)}},data:{}};var hc={left:"right",right:"left",bottom:"top",top:"bottom"};function pc(e){return e.replace(/left|right|bottom|top/g,function(e){return hc[e]})}var fc={start:"end",end:"start"};function gc(e){return e.replace(/start|end/g,function(e){return fc[e]})}function xc(e){var t=Ll(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function vc(e){return Vl(Zl(e)).left+xc(e).scrollLeft}function yc(e){var t=Ql(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function bc(e){return["html","body","#document"].indexOf(Kl(e))>=0?e.ownerDocument.body:zl(e)&&yc(e)?e:bc(Jl(e))}function wc(e,t){var n;void 0===t&&(t=[]);var s=bc(e),r=s===(null==(n=e.ownerDocument)?void 0:n.body),a=Ll(s),i=r?[a].concat(a.visualViewport||[],yc(s)?s:[]):s,o=t.concat(i);return r?o:o.concat(wc(Jl(i)))}function jc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Nc(e,t,n){return t===Ml?jc(function(e,t){var n=Ll(e),s=Zl(e),r=n.visualViewport,a=s.clientWidth,i=s.clientHeight,o=0,l=0;if(r){a=r.width,i=r.height;var c=Yl();(c||!c&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:i,x:o+vc(e),y:l}}(e,n)):Fl(t)?function(e,t){var n=Vl(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):jc(function(e){var t,n=Zl(e),s=xc(e),r=null==(t=e.ownerDocument)?void 0:t.body,a=Ul(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),i=Ul(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-s.scrollLeft+vc(e),l=-s.scrollTop;return"rtl"===Ql(r||n).direction&&(o+=Ul(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:i,x:o,y:l}}(Zl(e)))}function kc(e,t,n,s){var r="clippingParents"===t?function(e){var t=wc(Jl(e)),n=["absolute","fixed"].indexOf(Ql(e).position)>=0&&zl(e)?tc(e):e;return Fl(n)?t.filter(function(e){return Fl(e)&&Gl(e,n)&&"body"!==Kl(e)}):[]}(e):[].concat(t),a=[].concat(r,[n]),i=a[0],o=a.reduce(function(t,n){var r=Nc(e,n,s);return t.top=Ul(r.top,t.top),t.right=ql(r.right,t.right),t.bottom=ql(r.bottom,t.bottom),t.left=Ul(r.left,t.left),t},Nc(e,i,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Sc(e){var t,n=e.reference,s=e.element,r=e.placement,a=r?Rl(r):null,i=r?oc(r):null,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2;switch(a){case Nl:t={x:o,y:n.y-s.height};break;case kl:t={x:o,y:n.y+n.height};break;case Sl:t={x:n.x+n.width,y:l};break;case _l:t={x:n.x-s.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?nc(a):null;if(null!=c){var d="y"===c?"height":"width";switch(i){case Dl:t[c]=t[c]-(n[d]/2-s[d]/2);break;case Al:t[c]=t[c]+(n[d]/2-s[d]/2)}}return t}function _c(e,t){void 0===t&&(t={});var n=t,s=n.placement,r=void 0===s?e.placement:s,a=n.strategy,i=void 0===a?e.strategy:a,o=n.boundary,l=void 0===o?"clippingParents":o,c=n.rootBoundary,d=void 0===c?Ml:c,u=n.elementContext,m=void 0===u?Cl:u,h=n.altBoundary,p=void 0!==h&&h,f=n.padding,g=void 0===f?0:f,x=rc("number"!=typeof g?g:ac(g,Tl)),v=m===Cl?"reference":Cl,y=e.rects.popper,b=e.elements[p?v:m],w=kc(Fl(b)?b:b.contextElement||Zl(e.elements.popper),l,d,i),j=Vl(e.elements.reference),N=Sc({reference:j,element:y,strategy:"absolute",placement:r}),k=jc(Object.assign({},y,N)),S=m===Cl?k:j,_={top:w.top-S.top+x.top,bottom:S.bottom-w.bottom+x.bottom,left:w.left-S.left+x.left,right:S.right-w.right+x.right},E=e.modifiersData.offset;if(m===Cl&&E){var T=E[r];Object.keys(_).forEach(function(e){var t=[Sl,kl].indexOf(e)>=0?1:-1,n=[Nl,kl].indexOf(e)>=0?"y":"x";_[e]+=T[n]*t})}return _}const Ec={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,a=void 0===r||r,i=n.altAxis,o=void 0===i||i,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,m=n.altBoundary,h=n.flipVariations,p=void 0===h||h,f=n.allowedAutoPlacements,g=t.options.placement,x=Rl(g),v=l||(x===g||!p?[pc(g)]:function(e){if(Rl(e)===El)return[];var t=pc(e);return[gc(e),t,gc(t)]}(g)),y=[g].concat(v).reduce(function(e,n){return e.concat(Rl(n)===El?function(e,t){void 0===t&&(t={});var n=t,s=n.placement,r=n.boundary,a=n.rootBoundary,i=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Pl:l,d=oc(s),u=d?o?Ol:Ol.filter(function(e){return oc(e)===d}):Tl,m=u.filter(function(e){return c.indexOf(e)>=0});0===m.length&&(m=u);var h=m.reduce(function(t,n){return t[n]=_c(e,{placement:n,boundary:r,rootBoundary:a,padding:i})[Rl(n)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:f}):n)},[]),b=t.rects.reference,w=t.rects.popper,j=new Map,N=!0,k=y[0],S=0;S<y.length;S++){var _=y[S],E=Rl(_),T=oc(_)===Dl,D=[Nl,kl].indexOf(E)>=0,A=D?"width":"height",M=_c(t,{placement:_,boundary:d,rootBoundary:u,altBoundary:m,padding:c}),C=D?T?Sl:_l:T?kl:Nl;b[A]>w[A]&&(C=pc(C));var O=pc(C),P=[];if(a&&P.push(M[E]<=0),o&&P.push(M[C]<=0,M[O]<=0),P.every(function(e){return e})){k=_,N=!1;break}j.set(_,P)}if(N)for(var I=function(e){var t=y.find(function(t){var n=j.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},R=p?3:1;R>0;R--){if("break"===I(R))break}t.placement!==k&&(t.modifiersData[s]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Tc(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Dc(e){return[Nl,Sl,kl,_l].some(function(t){return e[t]>=0})}const Ac={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,s=e.name,r=n.offset,a=void 0===r?[0,0]:r,i=Pl.reduce(function(e,n){return e[n]=function(e,t,n){var s=Rl(e),r=[_l,Nl].indexOf(s)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],o=a[1];return i=i||0,o=(o||0)*r,[_l,Sl].indexOf(s)>=0?{x:o,y:i}:{x:i,y:o}}(n,t.rects,a),e},{}),o=i[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=i}};const Mc={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,a=void 0===r||r,i=n.altAxis,o=void 0!==i&&i,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,m=n.tether,h=void 0===m||m,p=n.tetherOffset,f=void 0===p?0:p,g=_c(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),x=Rl(t.placement),v=oc(t.placement),y=!v,b=nc(x),w="x"===b?"y":"x",j=t.modifiersData.popperOffsets,N=t.rects.reference,k=t.rects.popper,S="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,_="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(j){if(a){var D,A="y"===b?Nl:_l,M="y"===b?kl:Sl,C="y"===b?"height":"width",O=j[b],P=O+g[A],I=O-g[M],R=h?-k[C]/2:0,L=v===Dl?N[C]:k[C],F=v===Dl?-k[C]:-N[C],z=t.elements.arrow,B=h&&z?Hl(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=U[A],W=U[M],$=sc(0,N[C],B[C]),Y=y?N[C]/2-R-$-q-_.mainAxis:L-$-q-_.mainAxis,V=y?-N[C]/2+R+$+W+_.mainAxis:F+$+W+_.mainAxis,H=t.elements.arrow&&tc(t.elements.arrow),G=H?"y"===b?H.clientTop||0:H.clientLeft||0:0,K=null!=(D=null==E?void 0:E[b])?D:0,Q=O+V-K,X=sc(h?ql(P,O+Y-K-G):P,O,h?Ul(I,Q):I);j[b]=X,T[b]=X-O}if(o){var Z,J="x"===b?Nl:_l,ee="x"===b?kl:Sl,te=j[w],ne="y"===w?"height":"width",se=te+g[J],re=te-g[ee],ae=-1!==[Nl,_l].indexOf(x),ie=null!=(Z=null==E?void 0:E[w])?Z:0,oe=ae?se:te-N[ne]-k[ne]-ie+_.altAxis,le=ae?te+N[ne]+k[ne]-ie-_.altAxis:re,ce=h&&ae?function(e,t,n){var s=sc(e,t,n);return s>n?n:s}(oe,te,le):sc(h?oe:se,te,h?le:re);j[w]=ce,T[w]=ce-te}t.modifiersData[s]=T}},requiresIfExists:["offset"]};function Cc(e,t,n){void 0===n&&(n=!1);var s,r,a=zl(t),i=zl(t)&&function(e){var t=e.getBoundingClientRect(),n=Wl(t.width)/e.offsetWidth||1,s=Wl(t.height)/e.offsetHeight||1;return 1!==n||1!==s}(t),o=Zl(t),l=Vl(e,i,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(a||!a&&!n)&&(("body"!==Kl(t)||yc(o))&&(c=(s=t)!==Ll(s)&&zl(s)?{scrollLeft:(r=s).scrollLeft,scrollTop:r.scrollTop}:xc(s)),zl(t)?((d=Vl(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=vc(o))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Oc(e){var t=new Map,n=new Set,s=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var s=t.get(e);s&&r(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||r(e)}),s}var Pc={placement:"bottom",modifiers:[],strategy:"absolute"};function Ic(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var Rc=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,s=void 0===n?[]:n,r=t.defaultOptions,a=void 0===r?Pc:r;return function(e,t,n){void 0===n&&(n=a);var r,i,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Pc,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:o,setOptions:function(n){var r="function"==typeof n?n(o.options):n;u(),o.options=Object.assign({},a,o.options,r),o.scrollParents={reference:Fl(e)?wc(e):e.contextElement?wc(e.contextElement):[],popper:wc(t)};var i,c,m=function(e){var t=Oc(e);return Il.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((i=[].concat(s,o.options.modifiers),c=i.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return o.orderedModifiers=m.filter(function(e){return e.enabled}),o.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,s=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var a=r({state:o,name:t,instance:d,options:s}),i=function(){};l.push(a||i)}}),d.update()},forceUpdate:function(){if(!c){var e=o.elements,t=e.reference,n=e.popper;if(Ic(t,n)){o.rects={reference:Cc(t,tc(n),"fixed"===o.options.strategy),popper:Hl(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(e){return o.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<o.orderedModifiers.length;s++)if(!0!==o.reset){var r=o.orderedModifiers[s],a=r.fn,i=r.options,l=void 0===i?{}:i,u=r.name;"function"==typeof a&&(o=a({state:o,options:l,name:u,instance:d})||o)}else o.reset=!1,s=-1}}},update:(r=function(){return new Promise(function(e){d.forceUpdate(),e(o)})},function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(r())})})),i}),destroy:function(){u(),c=!0}};if(!Ic(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,i=_c(t,{elementContext:"reference"}),o=_c(t,{altBoundary:!0}),l=Tc(i,s),c=Tc(o,r,a),d=Dc(l),u=Dc(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Sc({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},dc,mc,Ac,Ec,Mc,ic]}),Lc=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Fc={name:"applyStyles",enabled:!1},zc={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,s=e.popper;if("removeAttribute"in n){var r=(n.getAttribute("aria-describedby")||"").split(",").filter(function(e){return e.trim()!==s.id});r.length?n.setAttribute("aria-describedby",r.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,s=n.popper,r=n.reference,a=null==(t=s.getAttribute("role"))?void 0:t.toLowerCase();if(s.id&&"tooltip"===a&&"setAttribute"in r){var i=r.getAttribute("aria-describedby");if(i&&-1!==i.split(",").indexOf(s.id))return;r.setAttribute("aria-describedby",i?i+","+s.id:s.id)}}},Bc=[];function Uc(e,t,n,s){return function(e,t,n,s){if(s&&"boolean"!=typeof s&&!vl){var r=s.once,a=s.capture,i=n;!vl&&r&&(i=n.__once||function e(s){this.removeEventListener(t,e,a),n.call(this,s)},n.__once=i),e.addEventListener(t,i,xl?s:a)}e.addEventListener(t,n,s)}(e,t,n,s),function(){!function(e,t,n,s){var r=s&&"boolean"!=typeof s?s.capture:s;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}(e,t,n,s)}}const qc=nt(function(){});const Wc=function(e){return Vo(function(e){return e&&"setState"in e?st.findDOMNode(e):null!=e?e:null}(e))};var $c=function(){};var Yc,Vc=function(e){return e&&("current"in e?e.current:e)};function Hc(e){var t,n,s,r,a,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,h=e.arrowElement,p=e.popperConfig,f=void 0===p?{}:p,g=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach(function(e){t[e.name]=e}),t):e||t}(f.modifiers);return yt({},f,{placement:l,enabled:i,strategy:u?"fixed":f.strategy,modifiers:(a=yt({},g,{eventListeners:{enabled:o},preventOverflow:yt({},g.preventOverflow,{options:m?yt({padding:m},null==(t=g.preventOverflow)?void 0:t.options):null==(n=g.preventOverflow)?void 0:n.options}),offset:{options:yt({offset:d},null==(s=g.offset)?void 0:s.options)},arrow:yt({},g.arrow,{enabled:!!h,options:yt({},null==(r=g.arrow)?void 0:r.options,{element:h})}),flip:yt({enabled:!!c},g.flip)}),void 0===a&&(a={}),Array.isArray(a)?a:Object.keys(a).map(function(e){return a[e].name=e,a[e]}))})}function Gc(e){if((!Yc&&0!==Yc||e)&&ol){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Yc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Yc}var Kc=function(e){var t;return"undefined"==typeof document?null:null==e?Vo().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function Qc(e,t){var n=Je.useState(function(){return Kc(e)}),s=n[0],r=n[1];if(!s){var a=Kc(e);a&&r(a)}return Je.useEffect(function(){},[t,s]),Je.useEffect(function(){var t=Kc(e);t!==s&&r(t)},[e,s]),s}const Xc=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;function Zc(e,t){return Je.useMemo(()=>function(e,t){const n=Xc(e),s=Xc(t);return e=>{n&&n(e),s&&s(e)}}(e,t),[e,t])}var Jc=tt.forwardRef(function(e,t){var n=e.flip,s=e.offset,r=e.placement,a=e.containerPadding,i=void 0===a?5:a,o=e.popperConfig,l=void 0===o?{}:o,c=e.transition,d=wl(),u=d[0],m=d[1],h=wl(),p=h[0],f=h[1],g=Zc(m,t),x=Qc(e.container),v=Qc(e.target),y=Je.useState(!e.show),b=y[0],w=y[1],j=function(e,t,n){var s=void 0===n?{}:n,r=s.enabled,a=void 0===r||r,i=s.placement,o=void 0===i?"bottom":i,l=s.strategy,c=void 0===l?"absolute":l,d=s.modifiers,u=void 0===d?Bc:d,m=ft(s,["enabled","placement","strategy","modifiers"]),h=Je.useRef(),p=Je.useCallback(function(){var e;null==(e=h.current)||e.update()},[]),f=Je.useCallback(function(){var e;null==(e=h.current)||e.forceUpdate()},[]),g=jl(Je.useState({placement:o,update:p,forceUpdate:f,attributes:{},styles:{popper:Lc(c),arrow:{}}})),x=g[0],v=g[1],y=Je.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},s={};Object.keys(t.elements).forEach(function(e){n[e]=t.styles[e],s[e]=t.attributes[e]}),v({state:t,styles:n,attributes:s,update:p,forceUpdate:f,placement:t.placement})}}},[p,f,v]);return Je.useEffect(function(){h.current&&a&&h.current.setOptions({placement:o,strategy:c,modifiers:[].concat(u,[y,Fc])})},[c,o,y,a]),Je.useEffect(function(){if(a&&null!=e&&null!=t)return h.current=Rc(e,t,yt({},m,{placement:o,strategy:c,modifiers:[].concat(u,[zc,y])})),function(){null!=h.current&&(h.current.destroy(),h.current=void 0,v(function(e){return yt({},e,{attributes:{},styles:{popper:Lc(c)}})}))}},[a,e,t]),x}(v,u,Hc({placement:r,enableEvents:!!e.show,containerPadding:i||5,flip:n,offset:s,arrowElement:p,popperConfig:l})),N=j.styles,k=j.attributes,S=ft(j,["styles","attributes"]);e.show?b&&w(!1):e.transition||b||w(!0);var _,E,T,D,A,M,C,O,P,I,R,L,F=e.show||c&&!b;if(_=u,E=e.onHide,T={disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent},A=(D=void 0===T?{}:T).disabled,M=D.clickTrigger,C=void 0===M?"click":M,O=Je.useRef(!1),P=E||$c,I=Je.useCallback(function(e){var t,n,s=Vc(_);qc(!!s,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),O.current=!(s&&(n=e,!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey))&&function(e){return 0===e.button}(e)&&!Jo(s,null!=(t=null==e.composedPath?void 0:e.composedPath()[0])?t:e.target))},[_]),R=bl(function(e){O.current||P(e)}),L=bl(function(e){27===e.keyCode&&P(e)}),Je.useEffect(function(){if(!A&&null!=_){var e=window.event,t=Wc(Vc(_)),n=Uc(t,C,I,!0),s=Uc(t,C,function(t){t!==e?R(t):e=void 0}),r=Uc(t,"keyup",function(t){t!==e?L(t):e=void 0}),a=[];return"ontouchstart"in t.documentElement&&(a=[].slice.call(t.body.children).map(function(e){return Uc(e,"mousemove",$c)})),function(){n(),s(),r(),a.forEach(function(e){return e()})}}},[_,A,C,I,R,L]),!F)return null;var z=e.children(yt({},S,{show:!!e.show,props:yt({},k.popper,{style:N.popper,ref:g}),arrowProps:yt({},k.arrow,{style:N.arrow,ref:f})}));if(c){var B=e.onExit,U=e.onExiting,q=e.onEnter,W=e.onEntering,$=e.onEntered;z=tt.createElement(c,{in:e.show,appear:!0,onExit:B,onExiting:U,onExited:function(){w(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:q,onEntering:W,onEntered:$},z)}return x?st.createPortal(z,x):null});function ed(e,t){var n=el(e);return n?n.innerHeight:rl(e).height}function td(e,t,n){e.closest&&!n&&e.closest(t);var s=e;do{if(fl(s,t))return s;s=s.parentElement}while(s&&s!==n&&s.nodeType===document.ELEMENT_NODE);return null}Jc.displayName="Overlay",Jc.propTypes={show:Nt.bool,placement:Nt.oneOf(Pl),target:Nt.any,container:Nt.any,flip:Nt.bool,children:Nt.func.isRequired,containerPadding:Nt.number,popperConfig:Nt.object,rootClose:Nt.bool,rootCloseEvent:Nt.oneOf(["click","mousedown"]),rootCloseDisabled:Nt.bool,onHide:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var r;return e.rootClose?(r=Nt.func).isRequired.apply(r,[e].concat(n)):Nt.func.apply(Nt,[e].concat(n))},transition:Nt.elementType,onEnter:Nt.func,onEntering:Nt.func,onEntered:Nt.func,onExit:Nt.func,onExiting:Nt.func,onExited:Nt.func};var nd=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function sd(e,t){return e===t||!(!nd(e)||!nd(t))}function rd(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!sd(e[n],t[n]))return!1;return!0}function ad(e,t){void 0===t&&(t=rd);var n=null;function s(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var a=e.apply(this,s);return n={lastResult:a,lastArgs:s,lastThis:this},a}return s.clear=function(){n=null},s}function id(e,t){var n=el(e);return n?n.innerWidth:rl(e).width}function od(e){return Fi(e)||Fo(e)||Bi(e)||Ui()}var ld=kt,cd=St,dd=wt,ud=_t,md=Object.prototype,hd=md.hasOwnProperty;const pd=nt(ld(function(e,t){e=Object(e);var n=-1,s=t.length,r=s>2?t[2]:void 0;for(r&&dd(t[0],t[1],r)&&(s=1);++n<s;)for(var a=t[n],i=ud(a),o=-1,l=i.length;++o<l;){var c=i[o],d=e[c];(void 0===d||cd(d,md[c])&&!hd.call(e,c))&&(e[c]=a[c])}return e}));var fd=Et,gd=Tt,xd=Dt,vd=At,yd=Mt,bd=Rt,wd=Ct,jd=Ot,Nd=Pt,kd=It;const Sd=nt(function(e,t,n){var s=bd(e),r=s||wd(e)||kd(e);if(t=vd(t),null==n){var a=e&&e.constructor;n=r?s?new a:[]:Nd(e)&&jd(a)?gd(yd(e)):{}}return(r?fd:xd)(e,function(e,s,r){return t(n,e,s,r)}),n});function _d(e){return e.children}!function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g}();var Ed="PREV",Td="NEXT",Dd="TODAY",Ad="DATE",Md={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Cd=Object.keys(Md).map(function(e){return Md[e]});Nt.oneOfType([Nt.string,Nt.func]),Nt.any,Nt.func,Nt.oneOfType([Nt.arrayOf(Nt.oneOf(Cd)),Nt.objectOf(function(e,t){if(-1!==Cd.indexOf(t)&&"boolean"==typeof e[t])return null;for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];return Nt.elementType.apply(Nt,[e,t].concat(s))})]),Nt.oneOfType([Nt.oneOf(["overlap","no-overlap"]),Nt.func]);var Od={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function Pd(e,t){var n=fo(e,"month");return fo(n,"week",t.startOfWeek())}function Id(e,t){var n=go(e,"month");return go(n,"week",t.startOfWeek())}function Rd(e,t){for(var n=Pd(e,t),s=Id(e,t),r=[];jo(n,s,"day");)r.push(n),n=ho(n,1,"day");return r}function Ld(e,t){var n=fo(e,t);return xo(n,e)?n:ho(n,1,t)}function Fd(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",s=e,r=[];jo(s,t,n);)r.push(s),s=ho(s,1,n);return r}function zd(e,t){return null==t&&null==e?null:(null==t&&(t=new Date),null==e&&(e=new Date),e=fo(e,"day"),e=Do(e,Do(t)),e=To(e,To(t)),e=Eo(e,Eo(t)),_o(e,_o(t)))}function Bd(e){return 0===Do(e)&&0===To(e)&&0===Eo(e)&&0===_o(e)}function Ud(e,t,n){return n&&"milliseconds"!==n?Math.round(Math.abs(+fo(e,n)/Od[n]-+fo(t,n)/Od[n])):Math.abs(+e-+t)}var qd=Nt.oneOfType([Nt.string,Nt.func]);function Wd(e,t,n,s,r){var a="function"==typeof s?s(n,r,e):t.call(e,n,s,r);return Vi(null==a||"string"==typeof a,"`localizer format(..)` must return a string, null, or undefined"),a}function $d(e,t,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+n,0,0)}function Yd(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function Vd(e,t){return Ud(e,t,"minutes")+Yd(e,t)}function Hd(e){var t=fo(e,"day");return Ud(t,e,"minutes")+Yd(t,e)}function Gd(e,t){return wo(e,t,"day")}function Kd(e,t,n){return xo(e,t,"minutes")?bo(t,n,"minutes"):yo(t,n,"minutes")}function Qd(e,t){return function(e,t,n,s){return"day"===n&&(n="date"),Math.abs(Lo[n](e,void 0,s)-Lo[n](t,void 0,s))}(e,t,"day")}function Xd(e){var t=e.evtA,n=t.start,s=t.end,r=t.allDay,a=e.evtB,i=a.start,o=a.end,l=a.allDay,c=+fo(n,"day")-+fo(i,"day"),d=Qd(n,s),u=Qd(i,o);return c||u-d||!!l-!!r||+n-+i||+s-+o}function Zd(e){var t=e.event,n=t.start,s=t.end,r=e.range,a=r.start,i=r.end,o=fo(n,"day"),l=jo(o,i,"day"),c=vo(o,s,"minutes")?yo(s,a,"minutes"):bo(s,a,"minutes");return l&&c}function Jd(e,t){return xo(e,t,"day")}function eu(e,t){return Bd(e)&&Bd(t)}var tu=Oi(function e(t){var n=this;Mi(this,e),Vi("function"==typeof t.format,"date localizer `format(..)` must be a function"),Vi("function"==typeof t.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||qd,this.formats=t.formats,this.format=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return Wd.apply(void 0,[n,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||zd,this.inRange=t.inRange||So,this.lt=t.lt||wo,this.lte=t.lte||jo,this.gt=t.gt||yo,this.gte=t.gte||bo,this.eq=t.eq||xo,this.neq=t.neq||vo,this.startOf=t.startOf||fo,this.endOf=t.endOf||go,this.add=t.add||ho,this.range=t.range||Fd,this.diff=t.diff||Ud,this.ceil=t.ceil||Ld,this.min=t.min||No,this.max=t.max||ko,this.minutes=t.minutes||To,this.daySpan=t.daySpan||Qd,this.firstVisibleDay=t.firstVisibleDay||Pd,this.lastVisibleDay=t.lastVisibleDay||Id,this.visibleDays=t.visibleDays||Rd,this.getSlotDate=t.getSlotDate||$d,this.getTimezoneOffset=t.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||Yd,this.getTotalMin=t.getTotalMin||Vd,this.getMinutesFromMidnight=t.getMinutesFromMidnight||Hd,this.continuesPrior=t.continuesPrior||Gd,this.continuesAfter=t.continuesAfter||Kd,this.sortEvents=t.sortEvents||Xd,this.inEventRange=t.inEventRange||Zd,this.isSameDate=t.isSameDate||Jd,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||eu,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function nu(e,t,n,s){var r=Di(Di({},e.formats),n);return Di(Di({},e),{},{messages:s,startOfWeek:function(){return e.startOfWeek(t)},format:function(n,s){return e.format(n,r[s]||s,t)}})}var su=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).navigate=function(e){t.props.onNavigate(e)},t.view=function(e){t.props.onView(e)},t}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,n=e.label;return tt.createElement("div",{className:"rbc-toolbar"},tt.createElement("span",{className:"rbc-btn-group"},tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Dd)},t.today),tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ed)},t.previous),tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Td)},t.next)),tt.createElement("span",{className:"rbc-toolbar-label"},n),tt.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,n=this.props.views,s=this.props.view;if(n.length>1)return n.map(function(n){return tt.createElement("button",{type:"button",key:n,className:$i({"rbc-active":s===n}),onClick:t.view.bind(null,n)},e[n])})}}])}();function ru(e,t){e&&e.apply(null,[].concat(t))}var au={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};var iu=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],ou=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,s=e.event,r=e.selected,a=e.isAllDay,i=e.onSelect,o=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,d=e.continuesPrior,u=e.continuesAfter,m=e.accessors,h=e.getters,p=e.children,f=e.components,g=f.event,x=f.eventWrapper,v=e.slotStart,y=e.slotEnd,b=Ai(e,iu);delete b.resizable;var w=m.title(s),j=m.tooltip(s),N=m.end(s),k=m.start(s),S=m.allDay(s),_=a||S||c.diff(k,c.ceil(N,"day"),"day")>1,E=h.eventProp(s,k,N,r),T=tt.createElement("div",{className:"rbc-event-content",title:j||void 0},g?tt.createElement(g,{event:s,continuesPrior:d,continuesAfter:u,title:w,isAllDay:S,localizer:c,slotStart:v,slotEnd:y}):w);return tt.createElement(x,Object.assign({},this.props,{type:"date"}),tt.createElement("div",Object.assign({},b,{style:Di(Di({},E.style),t),className:$i("rbc-event",n,E.className,{"rbc-selected":r,"rbc-event-allday":_,"rbc-event-continues-prior":d,"rbc-event-continues-after":u}),onClick:function(e){return i&&i(s,e)},onDoubleClick:function(e){return o&&o(s,e)},onKeyDown:function(e){return l&&l(s,e)}}),"function"==typeof p?p(T):T))}}])}();function lu(e,t){return!(!e||null==t)&&Lt(e,t)}function cu(e,t){return(e.right-e.left)/t}function du(e,t,n,s){var r=cu(e,s);return n?s-1-Math.floor((t-e.left)/r):Math.floor((t-e.left)/r)}function uu(e){var t,n,s,r=e.containerRef,a=e.accessors,i=e.getters,o=e.selected,l=e.components,c=e.localizer,d=e.position,u=e.show,m=e.events,h=e.slotStart,p=e.slotEnd,f=e.onSelect,g=e.onDoubleClick,x=e.onKeyPress,v=e.handleDragStart,y=e.popperRef,b=e.target,w=e.offset;n=(t={ref:y,callback:u}).ref,s=t.callback,Je.useEffect(function(){var e=function(e){n.current&&!n.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[n,s]),Je.useLayoutEffect(function(){var e=function(e){var t=e.target,n=e.offset,s=e.container,r=e.box,a=rl(t),i=a.top,o=a.left,l=a.width,c=a.height,d=rl(s),u=d.top,m=d.left,h=d.width,p=d.height,f=rl(r),g=f.width,x=f.height,v=u+p,y=m+h,b=i+x,w=o+g,j=n.x,N=n.y;return{topOffset:b>v?i-x-N:i+N+c,leftOffset:w>y?o+j-g+l:o+j}}({target:b,offset:w,container:r.current,box:y.current}),t=e.topOffset,n=e.leftOffset;y.current.style.top="".concat(t,"px"),y.current.style.left="".concat(n,"px")},[w.x,w.y,b]);var j=d.width,N={minWidth:j+j/2};return tt.createElement("div",{style:N,className:"rbc-overlay",ref:y},tt.createElement("div",{className:"rbc-overlay-header"},c.format(h,"dayHeaderFormat")),m.map(function(e,t){return tt.createElement(ou,{key:t,type:"popup",localizer:c,event:e,getters:i,onSelect:f,accessors:a,components:l,onDoubleClick:g,onKeyPress:x,continuesPrior:c.lt(a.end(e),h,"day"),continuesAfter:c.gte(a.start(e),p,"day"),slotStart:h,slotEnd:p,selected:lu(e,o),draggable:!0,onDragStart:function(){return v(e)},onDragEnd:function(){return u()}})}))}var mu=tt.forwardRef(function(e,t){return tt.createElement(uu,Object.assign({},e,{popperRef:t}))});function hu(e){var t=e.containerRef,n=e.popupOffset,s=void 0===n?5:n,r=e.overlay,a=e.accessors,i=e.localizer,o=e.components,l=e.getters,c=e.selected,d=e.handleSelectEvent,u=e.handleDoubleClickEvent,m=e.handleKeyPressEvent,h=e.handleDragStart,p=e.onHide,f=e.overlayDisplay,g=Je.useRef(null);if(!r.position)return null;var x=s;isNaN(s)||(x={x:s,y:s});var v=r.position,y=r.events,b=r.date,w=r.end;return tt.createElement(Jc,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:p,target:r.target},function(e){var n=e.props;return tt.createElement(mu,Object.assign({},n,{containerRef:t,ref:g,target:r.target,offset:x,accessors:a,getters:l,selected:c,components:o,localizer:i,position:v,show:f,events:y,slotStart:b,slotEnd:w,onSelect:d,onDoubleClick:u,onKeyPress:m,handleDragStart:h}))})}mu.propTypes={accessors:Nt.object.isRequired,getters:Nt.object.isRequired,selected:Nt.object,components:Nt.object.isRequired,localizer:Nt.object.isRequired,position:Nt.object.isRequired,show:Nt.func.isRequired,events:Nt.array.isRequired,slotStart:Nt.instanceOf(Date).isRequired,slotEnd:Nt.instanceOf(Date),onSelect:Nt.func,onDoubleClick:Nt.func,onKeyPress:Nt.func,handleDragStart:Nt.func,style:Nt.object,offset:Nt.shape({x:Nt.number,y:Nt.number})};var pu=tt.forwardRef(function(e,t){return tt.createElement(hu,Object.assign({},e,{containerRef:t}))});function fu(e,t){return Uc(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,e,t,{passive:!1})}function gu(e,t){return!!function(e,t){var n=t.clientX,s=t.clientY;return td(document.elementFromPoint(n,s),".rbc-event",e)}(e,t)}function xu(e,t){return!!function(e,t){var n=t.clientX,s=t.clientY;return td(document.elementFromPoint(n,s),".rbc-show-more",e)}(e,t)}function vu(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}pu.propTypes={popupOffset:Nt.oneOfType([Nt.number,Nt.shape({x:Nt.number,y:Nt.number})]),overlay:Nt.shape({position:Nt.object,events:Nt.array,date:Nt.instanceOf(Date),end:Nt.instanceOf(Date)}),accessors:Nt.object.isRequired,localizer:Nt.object.isRequired,components:Nt.object.isRequired,getters:Nt.object.isRequired,selected:Nt.object,handleSelectEvent:Nt.func,handleDoubleClickEvent:Nt.func,handleKeyPressEvent:Nt.func,handleDragStart:Nt.func,onHide:Nt.func,overlayDisplay:Nt.func};var yu=function(){return Oi(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.global,r=void 0!==s&&s,a=n.longPressThreshold,i=void 0===a?250:a,o=n.validContainers,l=void 0===o?[]:o;Mi(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||r,this.longPressThreshold=i,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=fu("touchmove",function(){},window),this._removeKeyDownListener=fu("keydown",this._keyListener),this._removeKeyUpListener=fu("keyup",this._keyListener),this._removeDropFromOutsideListener=fu("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=fu("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()},[{key:"on",value:function(e,t){var n=this._listeners[e]||(this._listeners[e]=[]);return n.push(t),{remove:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var r;return(this._listeners[e]||[]).forEach(function(e){void 0===r&&(r=e.apply(void 0,n))}),r}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var t=this._selectRect;return!(!t||!this.selecting)&&bu(t,wu(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,t){var n=this,s=null,r=null,a=null,i=function(t){s=setTimeout(function(){l(),e(t)},n.longPressThreshold),r=fu("touchmove",function(){return l()}),a=fu("touchend",function(){return l()})},o=fu("touchstart",i),l=function(){s&&clearTimeout(s),r&&r(),a&&a(),s=null,r=null,a=null};return t&&i(t),function(){l(),o()}}},{key:"_addInitialEventListener",value:function(){var e=this,t=fu("mousedown",function(t){e._removeInitialEventListener(),e._handleInitialEvent(t),e._removeInitialEventListener=fu("mousedown",e._handleInitialEvent)}),n=fu("touchstart",function(t){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,t)});this._removeInitialEventListener=function(){t(),n()}}},{key:"_dropFromOutsideListener",value:function(e){var t=vu(e),n=t.pageX,s=t.pageY,r=t.clientX,a=t.clientY;this.emit("dropFromOutside",{x:n,y:s,clientX:r,clientY:a}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var t=vu(e),n=t.pageX,s=t.pageY,r=t.clientX,a=t.clientY;this.emit("dragOverFromOutside",{x:n,y:s,clientX:r,clientY:a}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var t,n=vu(e),s=n.clientX,r=n.clientY,a=n.pageX,i=n.pageY,o=this.container();if(3!==e.which&&2!==e.button&&(c=s,d=r,!(l=o)||Jo(l,document.elementFromPoint(c,d)))){var l,c,d;if(!this.globalMouse&&o&&!Jo(o,e.target)){var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;"object"!==Si(e)&&(e={top:e,left:e,right:e,bottom:e});return e}(0),m=u.top,h=u.left,p=u.bottom,f=u.right;if(!bu({top:(t=wu(o)).top-m,left:t.left-h,bottom:t.bottom+p,right:t.right+f},{top:i,left:a}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:a,y:i,clientX:s,clientY:r}))switch(e.type){case"mousedown":this._removeEndListener=fu("mouseup",this._handleTerminatingEvent),this._onEscListener=fu("keydown",this._handleTerminatingEvent),this._removeMoveListener=fu("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=fu("touchend",this._handleTerminatingEvent),this._removeMoveListener=fu("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var t=e.target,n=this.validContainers;return!(n&&n.length&&t)||n.some(function(e){return!!t.closest(e)})}},{key:"_handleTerminatingEvent",value:function(e){var t=this.selecting,n=this._selectRect;if(!t&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,e){var s=!this.container||Jo(this.container(),e.target),r=this._isWithinValidContainer(e);return"Escape"!==e.key&&r?!t&&s?this._handleClickEvent(e):t?this.emit("select",n):this.emit("reset"):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var t=vu(e),n=t.pageX,s=t.pageY,r=t.clientX,a=t.clientY,i=(new Date).getTime();return this._lastClickData&&i-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:n,y:s,clientX:r,clientY:a})):(this._lastClickData={timestamp:i},this.emit("click",{x:n,y:s,clientX:r,clientY:a}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var t=this._initialEventData,n=t.x,s=t.y,r=vu(e),a=r.pageX,i=r.pageY,o=Math.abs(n-a),l=Math.abs(s-i),c=Math.min(a,n),d=Math.min(i,s),u=this.selecting,m=this.isClick(a,i);(!m||u||o||l)&&(u||m||this.emit("selectStart",this._initialEventData),m||(this.selecting=!0,this._selectRect={top:d,left:c,x:a,y:i,right:c+o,bottom:d+l},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,t){var n=this._initialEventData,s=n.x,r=n.y;return!n.isTouch&&Math.abs(e-s)<=5&&Math.abs(t-r)<=5}}])}();function bu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=wu(e),r=s.top,a=s.left,i=s.right,o=void 0===i?a:i,l=s.bottom,c=void 0===l?r:l,d=wu(t),u=d.top,m=d.left,h=d.right,p=void 0===h?m:h,f=d.bottom;return!(c-n<u||r+n>(void 0===f?u:f)||o-n<m||a+n>p)}function wu(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+ju("left"),s=t.top+ju("top");return{top:s,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+s}}function ju(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var Nu=function(){function e(t,n){var s;return Mi(this,e),(s=Ri(this,e,[t,n])).state={selecting:!1},s.containerRef=Je.createRef(),s}return Li(e,tt.Component),Oi(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,t=e.range,n=e.getNow,s=e.getters,r=e.date,a=e.components.dateCellWrapper,i=e.localizer,o=this.state,l=o.selecting,c=o.startIdx,d=o.endIdx,u=n();return tt.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},t.map(function(e,n){var o=l&&n>=c&&n<=d,m=s.dayProp(e),h=m.className,p=m.style;return tt.createElement(a,{key:n,value:e,range:t},tt.createElement("div",{style:p,className:$i("rbc-day-bg",h,o&&"rbc-selected-cell",i.isSameDate(e,u)&&"rbc-today",r&&i.neq(r,e,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var e=this,t=this.containerRef.current,n=this._selector=new yu(this.props.container,{longPressThreshold:this.props.longPressThreshold}),s=function(n,s){if(!gu(t,n)&&!xu(t,n)){var r=wu(t),a=e.props,i=a.range,o=a.rtl;if(c=r,u=(d=n).x,(m=d.y)>=c.top&&m<=c.bottom&&u>=c.left&&u<=c.right){var l=du(r,n.x,o,i.length);e._selectSlot({startIdx:l,endIdx:l,action:s,box:n})}}var c,d,u,m;e._initial={},e.setState({selecting:!1})};n.on("selecting",function(s){var r=e.props,a=r.range,i=r.rtl,o=-1,l=-1;if(e.state.selecting||(ru(e.props.onSelectStart,[s]),e._initial={x:s.x,y:s.y}),n.isSelected(t)){var c=wu(t),d=function(e,t,n,s,r){var a=-1,i=-1,o=s-1,l=cu(t,s),c=du(t,n.x,r,s),d=t.top<n.y&&t.bottom>n.y,u=t.top<e.y&&t.bottom>e.y,m=e.y>t.bottom,h=t.top>e.y;return n.top<t.top&&n.bottom>t.bottom&&(a=0,i=o),d&&(h?(a=0,i=c):m&&(a=c,i=o)),u&&(a=i=r?o-Math.floor((e.x-t.left)/l):Math.floor((e.x-t.left)/l),d?c<a?a=c:i=c:e.y<n.y?i=o:a=0),{startIdx:a,endIdx:i}}(e._initial,c,s,a.length,i);o=d.startIdx,l=d.endIdx}e.setState({selecting:!0,startIdx:o,endIdx:l})}),n.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!gu(e.containerRef.current,t)}),n.on("click",function(e){return s(e,"click")}),n.on("doubleClick",function(e){return s(e,"doubleClick")}),n.on("select",function(t){e._selectSlot(Di(Di({},e.state),{},{action:"select",bounds:t})),e._initial={},e.setState({selecting:!1}),ru(e.props.onSelectEnd,[e.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var t=e.endIdx,n=e.startIdx,s=e.action,r=e.bounds,a=e.box;-1!==t&&-1!==n&&this.props.onSelectSlot&&this.props.onSelectSlot({start:n,end:t,action:s,bounds:r,box:a,resourceId:this.props.resourceId})}}])}(),ku=(Nt.object.isRequired,Nt.object,Nt.bool,Nt.object.isRequired,Nt.object.isRequired,Nt.object.isRequired,Nt.object.isRequired,Nt.func,Nt.func,Nt.func,{segments:[],selected:{}}),Su=function(e,t){var n=e.selected;e.isAllDay;var s=e.accessors,r=e.getters,a=e.onSelect,i=e.onDoubleClick,o=e.onKeyPress,l=e.localizer,c=e.slotMetrics,d=e.components,u=e.resizable,m=c.continuesPrior(t),h=c.continuesAfter(t);return tt.createElement(ou,{event:t,getters:r,localizer:l,accessors:s,components:d,onSelect:a,onDoubleClick:i,onKeyPress:o,continuesPrior:m,continuesAfter:h,slotStart:c.first,slotEnd:c.last,selected:lu(t,n),resizable:u})},_u=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",r=Math.abs(t)/e*100+"%";return tt.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:r,flexBasis:r,maxWidth:r}},s)},Eu=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.segments,s=t.slotMetrics.slots,r=t.className,a=1;return tt.createElement("div",{className:$i(r,"rbc-row")},n.reduce(function(t,n,r){var i=n.event,o=n.left,l=n.right,c=n.span,d="_lvl_"+r,u=o-a,m=Su(e.props,i);return u&&t.push(_u(s,u,"".concat(d,"_gap"))),t.push(_u(s,c,d,m)),a=l+1,t},[]))}}])}();function Tu(e){var t=e.dateRange,n=e.unit,s=void 0===n?"day":n,r=e.localizer;return{first:t[0],last:r.add(t[t.length-1],1,s)}}function Du(e){var t,n,s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=[],i=[];for(t=0;t<e.length;t++){for(s=e[t],n=0;n<a.length&&Mu(s,a[n]);n++);n>=r?i.push(s):(a[n]||(a[n]=[])).push(s)}for(t=0;t<a.length;t++)a[t].sort(function(e,t){return e.left-t.left});return{levels:a,extra:i}}function Au(e,t,n,s,r){var a={start:s.start(e),end:s.end(e)},i={start:t,end:n};return r.inEventRange({event:a,range:i})}function Mu(e,t){return t.some(function(t){return t.left<=e.right&&t.right>=e.left})}function Cu(e,t,n,s){var r={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},a={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return s.sortEvents({evtA:r,evtB:a})}Eu.defaultProps=Di({},ku);var Ou=function(e,t){return e.left<=t&&e.right>=t},Pu=function(e,t){return e.filter(function(e){return Ou(e,t)}).map(function(e){return e.event})},Iu=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){for(var e=this.props,t=e.segments,n=e.slotMetrics.slots,s=Du(t).levels[0],r=1,a=1,i=[];r<=n;){var o="_lvl_"+r,l=s.filter(function(e){return Ou(e,r)})[0]||{},c=l.event,d=l.left,u=l.right,m=l.span;if(c){var h=Math.max(0,d-a);if(this.canRenderSlotEvent(d,m)){var p=Su(this.props,c);h&&i.push(_u(n,h,o+"_gap")),i.push(_u(n,m,o,p)),a=r=u+1}else h&&i.push(_u(n,h,o+"_gap")),i.push(_u(n,1,o,this.renderShowMore(t,r))),a=r+=1}else r++}return tt.createElement("div",{className:"rbc-row"},i)}},{key:"canRenderSlotEvent",value:function(e,t){var n=this.props.segments;return Ft(e,e+t).every(function(e){return 1===Pu(n,e).length})}},{key:"renderShowMore",value:function(e,t){var n=this,s=this.props,r=s.localizer,a=s.slotMetrics,i=s.components,o=a.getEventsForSlot(t),l=Pu(e,t),c=l.length;if(null!=i&&i.showMore){var d=i.showMore,u=a.getDateForSlot(t-1);return!!c&&tt.createElement(d,{localizer:r,slotDate:u,slot:t,count:c,events:o,remainingEvents:l})}return!!c&&tt.createElement("button",{type:"button",key:"sm_"+t,className:$i("rbc-button-link","rbc-show-more"),onClick:function(e){return n.showMore(t,e)}},r.messages.showMore(c,l,o))}},{key:"showMore",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onShowMore(e,t.target)}}])}();Iu.defaultProps=Di({},ku);var Ru=function(e){var t=e.children;return tt.createElement("div",{className:"rbc-row-content-scroll-container"},t)},Lu=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function Fu(){return ad(function(e){for(var t=e.range,n=e.events,s=e.maxRows,r=e.minRows,a=e.accessors,i=e.localizer,o=Tu({dateRange:t,localizer:i}),l=o.first,c=o.last,d=n.map(function(e){return function(e,t,n,s){var r=Tu({dateRange:t,localizer:s}),a=r.first,i=r.last,o=s.diff(a,i,"day"),l=s.max(s.startOf(n.start(e),"day"),a),c=s.min(s.ceil(n.end(e),"day"),i),d=Wt(t,function(e){return s.isSameDate(e,l)}),u=s.diff(l,c,"day");return u=Math.min(u,o),{event:e,span:u=Math.max(u-s.segmentOffset,1),left:d+1,right:Math.max(d+u,1)}}(e,t,a,i)}),u=Du(d,Math.max(s-1,1)),m=u.levels,h=u.extra,p=h.length>0?r-1:r;m.length<p;)m.push([]);return{first:l,last:c,levels:m,extra:h,range:t,slots:t.length,clone:function(t){return Fu()(Di(Di({},e),t))},getDateForSlot:function(e){return t[e]},getSlotForDate:function(e){return t.find(function(t){return i.isSameDate(t,e)})},getEventsForSlot:function(e){return d.filter(function(t){return function(e,t){return e.left<=t&&e.right>=t}(t,e)}).map(function(e){return e.event})},continuesPrior:function(e){return i.continuesPrior(a.start(e),l)},continuesAfter:function(e){var t=a.start(e),n=a.end(e);return i.continuesAfter(t,n,c)}}},Lu)}var zu=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).handleSelectSlot=function(e){var n=t.props,s=n.range;(0,n.onSelectSlot)(s.slice(e.start,e.end+1),e)},t.handleShowMore=function(e,n){var s,r,a,i=t.props,o=i.range,l=i.onShowMore,c=t.slotMetrics(t.props),d=(s=t.containerRef.current,r=".rbc-row-bg",gl(s.querySelectorAll(r)))[0];d&&(a=d.children[e-1]),l(c.getEventsForSlot(e),o[e-1],a,e,n)},t.getContainer=function(){var e=t.props.container;return e?e():t.containerRef.current},t.renderHeadingCell=function(e,n){var s=t.props,r=s.renderHeader,a=s.getNow,i=s.localizer;return r({date:e,key:"header_".concat(n),className:$i("rbc-date-cell",i.isSameDate(e,a())&&"rbc-now")})},t.renderDummy=function(){var e=t.props,n=e.className,s=e.range,r=e.renderHeader,a=e.showAllEvents;return tt.createElement("div",{className:n,ref:t.containerRef},tt.createElement("div",{className:$i("rbc-row-content",a&&"rbc-row-content-scrollable")},r&&tt.createElement("div",{className:"rbc-row",ref:t.headingRowRef},s.map(t.renderHeadingCell)),tt.createElement("div",{className:"rbc-row",ref:t.eventRowRef},tt.createElement("div",{className:"rbc-row-segment"},tt.createElement("div",{className:"rbc-event"},tt.createElement("div",{className:"rbc-event-content"},""))))))},t.containerRef=Je.createRef(),t.headingRowRef=Je.createRef(),t.eventRowRef=Je.createRef(),t.slotMetrics=Fu(),t}return Li(e,tt.Component),Oi(e,[{key:"getRowLimit",value:function(){var e,t=ed(this.eventRowRef.current),n=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?ed(this.headingRowRef.current):0,s=ed(this.containerRef.current)-n;return Math.max(Math.floor(s/t),1)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.rtl,s=e.range,r=e.className,a=e.selected,i=e.selectable,o=e.renderForMeasure,l=e.accessors,c=e.getters,d=e.components,u=e.getNow,m=e.renderHeader,h=e.onSelect,p=e.localizer,f=e.onSelectStart,g=e.onSelectEnd,x=e.onDoubleClick,v=e.onKeyPress,y=e.resourceId,b=e.longPressThreshold,w=e.isAllDay,j=e.resizable,N=e.showAllEvents;if(o)return this.renderDummy();var k=this.slotMetrics(this.props),S=k.levels,_=k.extra,E=N?Ru:_d,T=d.weekWrapper,D={selected:a,accessors:l,getters:c,localizer:p,components:d,onSelect:h,onDoubleClick:x,onKeyPress:v,resourceId:y,slotMetrics:k,resizable:j};return tt.createElement("div",{className:r,role:"rowgroup",ref:this.containerRef},tt.createElement(Nu,{localizer:p,date:t,getNow:u,rtl:n,range:s,selectable:i,container:this.getContainer,getters:c,onSelectStart:f,onSelectEnd:g,onSelectSlot:this.handleSelectSlot,components:d,longPressThreshold:b,resourceId:y}),tt.createElement("div",{className:$i("rbc-row-content",N&&"rbc-row-content-scrollable"),role:"row"},m&&tt.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},s.map(this.renderHeadingCell)),tt.createElement(E,null,tt.createElement(T,Object.assign({isAllDay:w},D,{rtl:this.props.rtl}),S.map(function(e,t){return tt.createElement(Eu,Object.assign({key:t,segments:e},D))}),!!_.length&&tt.createElement(Iu,Object.assign({segments:_,onShowMore:this.handleShowMore},D))))))}}])}();zu.defaultProps={minRows:0,maxRows:1/0};var Bu=function(e){var t=e.label;return tt.createElement("span",{role:"columnheader","aria-sort":"none"},t)},Uu=function(e){var t=e.label,n=e.drilldownView,s=e.onDrillDown;return n?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},t):tt.createElement("span",null,t)},qu=["date","className"],Wu=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).getContainer=function(){return t.containerRef.current},t.renderWeek=function(e,n){var s=t.props,r=s.events,a=s.components,i=s.selectable,o=s.getNow,l=s.selected,c=s.date,d=s.localizer,u=s.longPressThreshold,m=s.accessors,h=s.getters,p=s.showAllEvents,f=t.state,g=f.needLimitMeasure,x=f.rowLimit,v=function(e,t,n,s,r){return e.filter(function(e){return Au(e,t,n,s,r)})}(zo(r),e[0],e[e.length-1],m,d),y=function(e,t,n){var s=zo(e),r=[],a=[];s.forEach(function(e){var s=t.start(e),i=t.end(e);n.daySpan(s,i)>1?r.push(e):a.push(e)});var i=r.sort(function(e,s){return Cu(e,s,t,n)}),o=a.sort(function(e,s){return Cu(e,s,t,n)});return[].concat(zo(i),zo(o))}(v,m,d);return tt.createElement(zu,{key:n,ref:0===n?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:o,date:c,range:e,events:y,maxRows:p?1/0:x,selected:l,selectable:i,components:a,accessors:m,getters:h,localizer:d,renderHeader:t.readerDateHeading,renderForMeasure:g,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:u,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:p})},t.readerDateHeading=function(e){var n=e.date,s=e.className,r=Ai(e,qu),a=t.props,i=a.date,o=a.getDrilldownView,l=a.localizer,c=l.neq(n,i,"month"),d=l.isSameDate(n,i),u=o(n),m=l.format(n,"dateFormat"),h=t.props.components.dateHeader||Uu;return tt.createElement("div",Object.assign({},r,{className:$i(s,c&&"rbc-off-range",d&&"rbc-current"),role:"cell"}),tt.createElement(h,{label:m,date:n,drilldownView:u,isOffRange:c,onDrillDown:function(e){return t.handleHeadingClick(n,u,e)}}))},t.handleSelectSlot=function(e,n){t._pendingSelection=t._pendingSelection.concat(e),clearTimeout(t._selectTimer),t._selectTimer=setTimeout(function(){return t.selectDates(n)})},t.handleHeadingClick=function(e,n,s){s.preventDefault(),t.clearSelection(),ru(t.props.onDrillDown,[e,n])},t.handleSelectEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onSelectEvent,n)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onDoubleClickEvent,n)},t.handleKeyPressEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onKeyPressEvent,n)},t.handleShowMore=function(e,n,s,r,a){var i=t.props,o=i.popup,l=i.onDrillDown,c=i.onShowMore,d=i.getDrilldownView,u=i.doShowMoreDrillDown;if(t.clearSelection(),o){var m=il(s,t.containerRef.current);t.setState({overlay:{date:n,events:e,position:m,target:a}})}else u&&ru(l,[n,d(n)||Md.DAY]);ru(c,[e,n,r])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=Je.createRef(),t.slotRowRef=Je.createRef(),t._bgRows=[],t._pendingSelection=[],t}return Li(e,tt.Component),Oi(e,[{key:"componentDidMount",value:function(){var e,t=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||pl(function(){e=!1,t.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.localizer,s=e.className,r=n.visibleDays(t,n),a=Yo(r,7);return this._weekCount=a.length,tt.createElement("div",{className:$i("rbc-month-view",s),role:"table","aria-label":"Month View",ref:this.containerRef},tt.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(a[0])),a.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var t=this.props,n=t.localizer,s=t.components,r=e[0],a=e[e.length-1],i=s.header||Bu;return n.range(r,a,"day").map(function(e,t){return tt.createElement("div",{key:"header_"+t,className:"rbc-header"},tt.createElement(i,{date:e,localizer:n,label:n.format(e,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var e,t,n=this,s=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},r=this.props,a=r.accessors,i=r.localizer,o=r.components,l=r.getters,c=r.selected,d=r.popupOffset,u=r.handleDragStart;return tt.createElement(pu,{overlay:s,accessors:a,localizer:i,components:o,getters:l,selected:c,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:u,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:function(){return n.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var t=this._pendingSelection.slice();this._pendingSelection=[],t.sort(function(e,t){return+e-+t});var n=new Date(t[0]),s=new Date(t[t.length-1]);s.setDate(t[t.length-1].getDate()+1),ru(this.props.onSelectSlot,{slots:t,start:n,end:s,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.date;return{date:n,needLimitMeasure:e.localizer.neq(n,t.date,"month")}}}])}();Wu.range=function(e,t){var n=t.localizer;return{start:n.firstVisibleDay(e,n),end:n.lastVisibleDay(e,n)}},Wu.navigate=function(e,t,n){var s=n.localizer;switch(t){case Ed:return s.add(e,-1,"month");case Td:return s.add(e,1,"month");default:return e}},Wu.title=function(e,t){return t.localizer.format(e,"monthHeaderFormat")};var $u=function(e){var t=e.min,n=e.max,s=e.step,r=e.slots,a=e.localizer;return"".concat(+a.startOf(t,"minutes"))+"".concat(+a.startOf(n,"minutes"))+"".concat(s,"-").concat(r)};function Yu(e){for(var t=e.min,n=e.max,s=e.step,r=e.timeslots,a=e.localizer,i=$u({start:t,end:n,step:s,timeslots:r,localizer:a}),o=1+a.getTotalMin(t,n),l=a.getMinutesFromMidnight(t),c=Math.ceil((o-1)/(s*r)),d=c*r,u=new Array(c),m=new Array(d),h=0;h<c;h++){u[h]=new Array(r);for(var p=0;p<r;p++){var f=h*r+p,g=f*s;m[f]=u[h][p]=a.getSlotDate(t,l,g)}}var x=m.length*s;function v(e){var n=a.diff(t,e,"minutes")+a.getDstOffset(t,e);return Math.min(n,o)}return m.push(a.getSlotDate(t,l,x)),{groups:u,update:function(e){return $u(e)!==i?Yu(e):this},dateIsInGroup:function(e,t){var s=u[t+1];return a.inRange(e,u[t][0],s?s[0]:n,"minutes")},nextSlot:function(e){var t=m[Math.min(m.findIndex(function(t){return t===e||a.eq(t,e)})+1,m.length-1)];return a.eq(t,e)&&(t=a.add(e,s,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(m.length-1,Math.max(0,Math.floor(e*d)));return m[t]},closestSlotFromPoint:function(e,t){var n=Math.abs(t.top-t.bottom);return this.closestSlotToPosition((e.y-t.top)/n)},closestSlotFromDate:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a.lt(e,t,"minutes"))return m[0];if(a.gt(e,n,"minutes"))return m[m.length-1];var i=a.diff(t,e,"minutes");return m[(i-i%s)/s+r]},startsBeforeDay:function(e){return a.lt(e,t,"day")},startsAfterDay:function(e){return a.gt(e,n,"day")},startsBefore:function(e){return a.lt(a.merge(t,e),t,"minutes")},startsAfter:function(e){return a.gt(a.merge(n,e),n,"minutes")},getRange:function(e,r,i,o){i||(e=a.min(n,a.max(t,e))),o||(r=a.min(n,a.max(t,r)));var l=v(e),c=v(r),u=c>s*d&&!a.eq(n,r)?(l-s)/(s*d)*100:l/(s*d)*100;return{top:u,height:c/(s*d)*100-u,start:v(e),startDate:e,end:v(r),endDate:r}},getCurrentTimePosition:function(e){return v(e)/(s*d)*100}}}var Vu=function(){return Oi(function e(t,n){var s=n.accessors,r=n.slotMetrics;Mi(this,e);var a=r.getRange(s.start(t),s.end(t)),i=a.start,o=a.startDate,l=a.end,c=a.endDate,d=a.top,u=a.height;this.start=i,this.end=l,this.startMs=+o,this.endMs=+c,this.top=d,this.height=u,this.data=t},[{key:"_width",get:function(){return this.rows?100/(this.rows.reduce(function(e,t){return Math.max(e,t.leaves.length+1)},0)+1):this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,t=Math.min(100,1.7*this._width);if(this.rows)return t;if(this.leaves)return this.leaves.length>0?t:e;var n=this.row.leaves;return n.indexOf(this)===n.length-1?e:t}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,t=e.leaves,n=e.xOffset,s=e._width;return n+(t.indexOf(this)+1)*s}}])}();function Hu(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function Gu(e){for(var t=e.events,n=e.minimumStartDifference,s=e.slotMetrics,r=e.accessors,a=function(e){for(var t=$t(e,["startMs",function(e){return-e.endMs}]),n=[];t.length>0;){var s=t.shift();n.push(s);for(var r=0;r<t.length;r++){var a=t[r];if(!(s.endMs>a.startMs)){if(r>0){var i=t.splice(r,1)[0];n.push(i)}break}}}return n}(t.map(function(e){return new Vu(e,{slotMetrics:s,accessors:r})})),i=[],o=function(){var e=a[l],t=i.find(function(t){return t.end>e.start||Math.abs(e.start-t.start)<n});if(!t)return e.rows=[],i.push(e),1;e.container=t;for(var s=null,r=t.rows.length-1;!s&&r>=0;r--)Hu(t.rows[r],e,n)&&(s=t.rows[r]);s?(s.leaves.push(e),e.row=s):(e.leaves=[],t.rows.push(e))},l=0;l<a.length;l++)o();return a.map(function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}})}function Ku(e,t,n){for(var s=0;s<e.friends.length;++s)if(!(n.indexOf(e.friends[s])>-1)){t=t>e.friends[s].idx?t:e.friends[s].idx,n.push(e.friends[s]);var r=Ku(e.friends[s],t,n);t=t>r?t:r}return t}var Qu={overlap:Gu,"no-overlap":function(e){var t=Gu({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});t.sort(function(e,t){return e=e.style,t=t.style,e.top!==t.top?e.top>t.top?1:-1:e.height!==t.height?e.top+e.height<t.top+t.height?1:-1:0});for(var n=0;n<t.length;++n)t[n].friends=[],delete t[n].style.left,delete t[n].style.left,delete t[n].idx,delete t[n].size;for(var s=0;s<t.length-1;++s)for(var r=t[s],a=r.style.top,i=r.style.top+r.style.height,o=s+1;o<t.length;++o){var l=t[o],c=l.style.top,d=l.style.top+l.style.height;(c>=a&&d<=i||d>a&&d<=i||c>=a&&c<i)&&(r.friends.push(l),l.friends.push(r))}for(var u=0;u<t.length;++u){for(var m=t[u],h=[],p=0;p<100;++p)h.push(1);for(var f=0;f<m.friends.length;++f)void 0!==m.friends[f].idx&&(h[m.friends[f].idx]=0);m.idx=h.indexOf(1)}for(var g=0;g<t.length;++g){var x;if(!t[g].size){var v=[];x=100/(Ku(t[g],0,v)+1),t[g].size=x;for(var y=0;y<v.length;++y)v[y].size=x}}for(var b=0;b<t.length;++b){var w=t[b];w.style.left=w.idx*w.size;for(var j=0,N=0;N<w.friends.length;++N){var k=w.friends[N].idx;j=j>k?j:k}j<=w.idx&&(w.size=100-w.idx*w.size);var S=0===w.idx?0:3;w.style.width="calc(".concat(w.size,"% - ").concat(S,"px)"),w.style.height="calc(".concat(w.style.height,"% - 2px)"),w.style.xOffset="calc(".concat(w.style.left,"% + ").concat(S,"px)")}return t}};var Xu=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,Je.Component),Oi(e,[{key:"render",value:function(){var e=this.props,t=e.renderSlot,n=e.resource,s=e.group,r=e.getters,a=e.components,i=(void 0===a?{}:a).timeSlotWrapper,o=void 0===i?_d:i,l=r?r.slotGroupProp(s):{};return tt.createElement("div",Object.assign({className:"rbc-timeslot-group"},l),s.map(function(e,s){var a=r?r.slotProp(e,n):{};return tt.createElement(o,{key:s,value:e,resource:n},tt.createElement("div",Object.assign({},a,{className:$i("rbc-time-slot",a.className)}),t&&t(e,s)))}))}}])}();function Zu(e){return"string"==typeof e?e:e+"%"}function Ju(e){var t=e.style,n=e.className,s=e.event,r=e.accessors,a=e.rtl,i=e.selected,o=e.label,l=e.continuesPrior,c=e.continuesAfter,d=e.getters,u=e.onClick,m=e.onDoubleClick,h=e.isBackgroundEvent,p=e.onKeyPress,f=e.components,g=f.event,x=f.eventWrapper,v=r.title(s),y=r.tooltip(s),b=r.end(s),w=r.start(s),j=d.eventProp(s,w,b,i),N=[tt.createElement("div",{key:"1",className:"rbc-event-label"},o),tt.createElement("div",{key:"2",className:"rbc-event-content"},g?tt.createElement(g,{event:s,title:v}):v)],k=t.height,S=t.top,_=t.width,E=t.xOffset,T=Di(Di({},j.style),{},Ei({top:Zu(S),height:Zu(k),width:Zu(_)},a?"right":"left",Zu(E)));return tt.createElement(x,Object.assign({type:"time"},e),tt.createElement("div",{role:"button",tabIndex:0,onClick:u,onDoubleClick:m,style:T,onKeyDown:p,title:y?("string"==typeof o?o+": ":"")+y:void 0,className:$i(h?"rbc-background-event":"rbc-event",n,j.className,{"rbc-selected":i,"rbc-event-continues-earlier":l,"rbc-event-continues-later":c})},N))}var em=function(e){var t=e.children,n=e.className,s=e.style,r=e.innerRef;return tt.createElement("div",{className:n,style:s,ref:r},t)},tm=tt.forwardRef(function(e,t){return tt.createElement(em,Object.assign({},e,{innerRef:t}))}),nm=["dayProp"],sm=["eventContainerWrapper"],rm=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(e){var n=e.events,s=e.isBackgroundEvent,r=t.props,a=r.rtl,i=r.selected,o=r.accessors,l=r.localizer,c=r.getters,d=r.components,u=r.step,m=r.timeslots,h=r.dayLayoutAlgorithm,p=r.resizable,f=t.slotMetrics,g=l.messages,x=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t,n=e.dayLayoutAlgorithm,s=n;return n in Qu&&(s=Qu[n]),(t=s)&&t.constructor&&t.call&&t.apply?s.apply(this,arguments):[]}({events:n,accessors:o,slotMetrics:f,minimumStartDifference:Math.ceil(u*m/2),dayLayoutAlgorithm:h});return x.map(function(e,n){var r,u,m=e.event,h=e.style,x=o.end(m),v=o.start(m),y=null!==(r=o.eventId(m))&&void 0!==r?r:"evt_"+n,b="eventTimeRangeFormat",w=f.startsBeforeDay(v),j=f.startsAfterDay(x);w?b="eventTimeRangeEndFormat":j&&(b="eventTimeRangeStartFormat"),u=w&&j?g.allDay:l.format({start:v,end:x},b);var N=w||f.startsBefore(v),k=j||f.startsAfter(x);return tt.createElement(Ju,{style:h,event:m,label:u,key:y,getters:c,rtl:a,components:d,continuesPrior:N,continuesAfter:k,accessors:o,resource:t.props.resource,selected:lu(m,i),onClick:function(e){return t._select(Di(Di(Di({},m),t.props.resource&&{sourceResource:t.props.resource}),s&&{isBackgroundEvent:!0}),e)},onDoubleClick:function(e){return t._doubleClick(m,e)},isBackgroundEvent:s,onKeyPress:function(e){return t._keyPress(m,e)},resizable:p})})},t._selectable=function(){var e=t.containerRef.current,n=t.props,s=n.longPressThreshold,r=n.localizer,a=t._selector=new yu(function(){return e},{longPressThreshold:s}),i=function(e){var n=t.props.onSelecting,s=t.state||{},a=o(e),i=a.startDate,l=a.endDate;n&&(r.eq(s.startDate,i,"minutes")&&r.eq(s.endDate,l,"minutes")||!1===n({start:i,end:l,resourceId:t.props.resource}))||t.state.start===a.start&&t.state.end===a.end&&t.state.selecting===a.selecting||t.setState(a)},o=function(n){var s=t.slotMetrics.closestSlotFromPoint(n,wu(e));t.state.selecting||(t._initialSlot=s);var a=t._initialSlot;r.lte(a,s)?s=t.slotMetrics.nextSlot(s):r.gt(a,s)&&(a=t.slotMetrics.nextSlot(a));var i=t.slotMetrics.getRange(r.min(a,s),r.max(a,s));return Di(Di({},i),{},{selecting:!0,top:"".concat(i.top,"%"),height:"".concat(i.height,"%")})},l=function(e,n){if(!gu(t.containerRef.current,e)){var s=o(e),r=s.startDate,a=s.endDate;t._selectSlot({startDate:r,endDate:a,action:n,box:e})}t.setState({selecting:!1})};a.on("selecting",i),a.on("selectStart",i),a.on("beforeSelect",function(e){if("ignoreEvents"===t.props.selectable)return!gu(t.containerRef.current,e)}),a.on("click",function(e){return l(e,"click")}),a.on("doubleClick",function(e){return l(e,"doubleClick")}),a.on("select",function(e){t.state.selecting&&(t._selectSlot(Di(Di({},t.state),{},{action:"select",bounds:e})),t.setState({selecting:!1}))}),a.on("reset",function(){t.state.selecting&&t.setState({selecting:!1})})},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(e){for(var n=e.startDate,s=e.endDate,r=e.action,a=e.bounds,i=e.box,o=n,l=[];t.props.localizer.lte(o,s);)l.push(o),o=new Date(+o+60*t.props.step*1e3);ru(t.props.onSelectSlot,{slots:l,start:n,end:s,resourceId:t.props.resource,action:r,bounds:a,box:i})},t._select=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onSelectEvent,n)},t._doubleClick=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onDoubleClickEvent,n)},t._keyPress=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onKeyPressEvent,n)},t.slotMetrics=Yu(t.props),t.containerRef=Je.createRef(),t}return Li(e,tt.Component),Oi(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(e,t){this.props.selectable&&!e.selectable&&this._selectable(),!this.props.selectable&&e.selectable&&this._teardownSelectable();var n=this.props,s=n.getNow,r=n.isNow,a=n.localizer,i=n.date,o=n.min,l=n.max,c=a.neq(e.getNow(),s(),"minutes");if(e.isNow!==r||c){if(this.clearTimeIndicatorInterval(),r){var d=!c&&a.eq(e.date,i,"minutes")&&t.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(d)}}else r&&(a.neq(e.min,o,"minutes")||a.neq(e.max,l,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||t||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,t=e.min,n=e.max,s=(0,e.getNow)();if(s>=t&&s<=n){var r=this.slotMetrics.getCurrentTimePosition(s);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:r})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.max,s=e.rtl,r=e.isNow,a=e.resource,i=e.accessors,o=e.localizer,l=e.getters,c=l.dayProp,d=Ai(l,nm),u=e.components,m=u.eventContainerWrapper,h=Ai(u,sm);this.slotMetrics=this.slotMetrics.update(this.props);var p=this.slotMetrics,f=this.state,g=f.selecting,x=f.top,v=f.height,y={start:f.startDate,end:f.endDate},b=c(n,a),w=b.className,j=b.style,N=h.dayColumnWrapper||tm;return tt.createElement(N,{ref:this.containerRef,date:t,style:j,className:$i(w,"rbc-day-slot","rbc-time-column",r&&"rbc-now",r&&"rbc-today",g&&"rbc-slot-selecting"),slotMetrics:p,resource:a},p.groups.map(function(e,t){return tt.createElement(Xu,{key:t,group:e,resource:a,getters:d,components:h})}),tt.createElement(m,{localizer:o,resource:a,accessors:i,getters:d,components:h,slotMetrics:p},tt.createElement("div",{className:$i("rbc-events-container",s&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),g&&tt.createElement("div",{className:"rbc-slot-selection",style:{top:x,height:v}},tt.createElement("span",null,o.format(y,"selectRangeFormat"))),r&&this.intervalTriggered&&tt.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}])}();rm.defaultProps={dragThroughEvents:!0,timeslots:2};var am=function(e){var t=e.label;return tt.createElement(tt.Fragment,null,t)},im=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).handleHeaderClick=function(e,n,s){s.preventDefault(),ru(t.props.onDrillDown,[e,n])},t.renderRow=function(e){var n=t.props,s=n.events,r=n.rtl,a=n.selectable,i=n.getNow,o=n.range,l=n.getters,c=n.localizer,d=n.accessors,u=n.components,m=n.resizable,h=d.resourceId(e),p=e?s.filter(function(e){return d.resource(e)===h}):s;return tt.createElement(zu,{isAllDay:!0,rtl:r,getNow:i,minRows:2,maxRows:t.props.allDayMaxRows+1,range:o,events:p,resourceId:h,className:"rbc-allday-cell",selectable:a,selected:t.props.selected,components:u,accessors:d,getters:l,localizer:c,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:m})},t}return Li(e,tt.Component),Oi(e,[{key:"renderHeaderCells",value:function(e){var t=this,n=this.props,s=n.localizer,r=n.getDrilldownView,a=n.getNow,i=n.getters.dayProp,o=n.components.header,l=void 0===o?Bu:o,c=a();return e.map(function(e,n){var a=r(e),o=s.format(e,"dayFormat"),d=i(e),u=d.className,m=d.style,h=tt.createElement(l,{date:e,label:o,localizer:s});return tt.createElement("div",{key:n,style:m,className:$i("rbc-header",u,s.isSameDate(e,c)&&"rbc-today")},a?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(n){return t.handleHeaderClick(e,a,n)}},h):tt.createElement("span",null,h))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,s=t.rtl,r=t.resources,a=t.range,i=t.events,o=t.getNow,l=t.accessors,c=t.selectable,d=t.components,u=t.getters,m=t.scrollRef,h=t.localizer,p=t.isOverflowing,f=t.components,g=f.timeGutterHeader,x=f.resourceHeader,v=void 0===x?am:x,y=t.resizable,b={};p&&(b[s?"marginLeft":"marginRight"]="".concat(Gc()-1,"px"));var w=r.groupEvents(i);return tt.createElement("div",{style:b,ref:m,className:$i("rbc-time-header",p&&"rbc-overflowing")},tt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:n,minWidth:n,maxWidth:n}},g&&tt.createElement(g,null)),r.map(function(t,n){var r=qi(t,2),i=r[0],m=r[1];return tt.createElement("div",{className:"rbc-time-header-content",key:i||n},m&&tt.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(n)},tt.createElement("div",{className:"rbc-header"},tt.createElement(v,{index:n,label:l.resourceTitle(m),resource:m}))),tt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(a)),tt.createElement(zu,{isAllDay:!0,rtl:s,getNow:o,minRows:2,maxRows:e.props.allDayMaxRows+1,range:a,events:w.get(i)||[],resourceId:m&&i,className:"rbc-allday-cell",selectable:c,selected:e.props.selected,components:d,accessors:l,getters:u,localizer:h,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyDown:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:y}))}))}}])}(),om=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).handleHeaderClick=function(e,n,s){s.preventDefault(),ru(t.props.onDrillDown,[e,n])},t}return Li(e,tt.Component),Oi(e,[{key:"renderHeaderCells",value:function(e){var t=this,n=this.props,s=n.localizer,r=n.getDrilldownView,a=n.getNow,i=n.getters.dayProp,o=n.components,l=o.header,c=void 0===l?Bu:l,d=o.resourceHeader,u=void 0===d?am:d,m=n.resources,h=n.accessors,p=n.events,f=n.rtl,g=n.selectable,x=n.components,v=n.getters,y=n.resizable,b=a(),w=m.groupEvents(p);return e.map(function(n,o){var l=r(n),d=s.format(n,"dayFormat"),p=i(n),j=p.className,N=p.style,k=tt.createElement(c,{date:n,label:d,localizer:s});return tt.createElement("div",{key:o,className:"rbc-time-header-content rbc-resource-grouping"},tt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(e.length<=1?" rbc-time-header-cell-single-day":"")},tt.createElement("div",{style:N,className:$i("rbc-header",j,s.isSameDate(n,b)&&"rbc-today")},l?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(e){return t.handleHeaderClick(n,l,e)}},k):tt.createElement("span",null,k))),tt.createElement("div",{className:"rbc-row"},m.map(function(e,t){var r=qi(e,2),a=r[0],i=r[1];return tt.createElement("div",{key:"resource_".concat(a,"_").concat(t),className:$i("rbc-header",j,s.isSameDate(n,b)&&"rbc-today")},tt.createElement(u,{index:t,label:h.resourceTitle(i),resource:i}))})),tt.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},m.map(function(e,r){var i=qi(e,2),o=i[0],l=i[1],c=(w.get(o)||[]).filter(function(e){return s.isSameDate(e.start,n)||s.isSameDate(e.end,n)});return tt.createElement(zu,{key:"resource_".concat(o,"_").concat(r),isAllDay:!0,rtl:f,getNow:a,minRows:2,maxRows:t.props.allDayMaxRows+1,range:[n],events:c,resourceId:l&&o,className:"rbc-allday-cell",selectable:g,selected:t.props.selected,components:x,accessors:h,getters:v,localizer:s,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyDown:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:y})})))})}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.rtl,s=e.range,r=e.scrollRef,a=e.isOverflowing,i=e.components.timeGutterHeader,o={};return a&&(o[n?"marginLeft":"marginRight"]="".concat(Gc()-1,"px")),tt.createElement("div",{style:o,ref:r,className:$i("rbc-time-header",a&&"rbc-overflowing")},tt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:t,minWidth:t,maxWidth:t}},i&&tt.createElement(i,null)),this.renderHeaderCells(s))}}])}();var lm=function(e){var t=e.min,n=e.max,s=e.timeslots,r=e.step,a=e.localizer,i=e.getNow,o=e.resource,l=e.components,c=e.getters,d=e.gutterRef,u=l.timeGutterWrapper,m=Je.useMemo(function(){return function(e){var t=e.min,n=e.max,s=e.localizer;return s.getTimezoneOffset(t)!==s.getTimezoneOffset(n)?{start:s.add(t,-1,"day"),end:s.add(n,-1,"day")}:{start:t,end:n}}({min:t,max:n,localizer:a})},[null==t?void 0:t.toISOString(),null==n?void 0:n.toISOString(),a]),h=m.start,p=m.end,f=qi(Je.useState(Yu({min:h,max:p,timeslots:s,step:r,localizer:a})),2),g=f[0],x=f[1];Je.useEffect(function(){g&&x(g.update({min:h,max:p,timeslots:s,step:r,localizer:a}))},[null==h?void 0:h.toISOString(),null==p?void 0:p.toISOString(),s,r]);var v=Je.useCallback(function(e,t){if(t)return null;var n=g.dateIsInGroup(i(),t);return tt.createElement("span",{className:$i("rbc-label",n&&"rbc-now")},a.format(e,"timeGutterFormat"))},[g,a,i]);return tt.createElement(u,{slotMetrics:g},tt.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},g.groups.map(function(e,t){return tt.createElement(Xu,{key:t,group:e,resource:o,components:l,renderSlot:v,getters:c})})))},cm=tt.forwardRef(function(e,t){return tt.createElement(lm,Object.assign({gutterRef:t},e))}),dm={};var um=function(){function e(t){var n;return Mi(this,e),(n=Ri(this,e,[t])).handleScroll=function(e){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=e.target.scrollLeft)},n.handleResize=function(){hl(n.rafHandle),n.rafHandle=pl(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];ru(n.props.onKeyPressEvent,t)},n.handleSelectEvent=function(){n.clearSelection();for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];ru(n.props.onSelectEvent,t)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];ru(n.props.onDoubleClickEvent,t)},n.handleShowMore=function(e,t,s,r,a){var i=n.props,o=i.popup,l=i.onDrillDown,c=i.onShowMore,d=i.getDrilldownView,u=i.doShowMoreDrillDown;if(n.clearSelection(),o){var m=il(s,n.containerRef.current);n.setState({overlay:{date:t,events:e,position:Di(Di({},m),{},{width:"200px"}),target:a}})}else u&&ru(l,[t,d(t)||Md.DAY]);ru(c,[e,t,r])},n.handleSelectAllDaySlot=function(e,t){var s=n.props.onSelectSlot,r=new Date(e[0]),a=new Date(e[e.length-1]);a.setDate(e[e.length-1].getDate()+1),ru(s,{slots:e,start:r,end:a,action:t.action,resourceId:t.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var e=n.contentRef.current;if(null!=e&&e.scrollHeight){var t=e.scrollHeight>e.clientHeight;n.state.isOverflowing!==t&&(n._updatingOverflow=!0,n.setState({isOverflowing:t},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=ad(function(e,t){return function(e,t){return{map:function(n){return e?e.map(function(e,s){return n([t.resourceId(e),e],s)}):[n([dm,null],0)]},groupEvents:function(n){var s=new Map;return e?(n.forEach(function(e){var n=t.resource(e)||dm;if(Array.isArray(n))n.forEach(function(t){var n=s.get(t)||[];n.push(e),s.set(t,n)});else{var r=s.get(n)||[];r.push(e),s.set(n,r)}}),s):(s.set(dm,n),s)}}}(e,t)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=tt.createRef(),n.contentRef=tt.createRef(),n.containerRef=tt.createRef(),n._scrollRatio=null,n.gutterRef=Je.createRef(),n}return Li(e,Je.Component),Oi(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),hl(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(e,t,n,s,r,a,i,o,l,c){var d=this.props,u=d.min,m=d.max,h=(s.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")}),p=(r.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")});return tt.createElement(rm,Object.assign({},this.props,{localizer:a,min:a.merge(e,u),max:a.merge(e,m),resource:n&&t,components:o,isNow:a.isSameDate(e,c),key:"".concat(t,"-").concat(e),date:e,events:h,backgroundEvents:p,dayLayoutAlgorithm:l}))}},{key:"renderResourcesFirst",value:function(e,t,n,s,r,a,i,o,l){var c=this;return t.map(function(t){var d=qi(t,2),u=d[0],m=d[1];return e.map(function(e){return c.renderDayColumn(e,u,m,n,s,r,a,o,l,i)})})}},{key:"renderRangeFirst",value:function(e,t,n,s,r,a,i,o,l){var c=this;return e.map(function(e){return tt.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:e},t.map(function(t){var d=qi(t,2),u=d[0],m=d[1];return tt.createElement("div",{style:{flex:1},key:a.resourceId(m)},c.renderDayColumn(e,u,m,n,s,r,a,o,l,i))}))})}},{key:"renderEvents",value:function(e,t,n,s){var r=this.props,a=r.accessors,i=r.localizer,o=r.resourceGroupingLayout,l=r.components,c=r.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,a),u=d.groupEvents(t),m=d.groupEvents(n);return o?this.renderRangeFirst(e,d,u,m,i,a,s,l,c):this.renderResourcesFirst(e,d,u,m,i,a,s,l,c)}},{key:"render",value:function(){var e,t=this.props,n=t.events,s=t.backgroundEvents,r=t.range,a=t.width,i=t.rtl,o=t.selected,l=t.getNow,c=t.resources,d=t.components,u=t.accessors,m=t.getters,h=t.localizer,p=t.min,f=t.max,g=t.showMultiDayTimes,x=t.longPressThreshold,v=t.resizable,y=t.resourceGroupingLayout;a=a||this.state.gutterWidth;var b=r[0],w=r[r.length-1];this.slots=r.length;var j=[],N=[],k=[];n.forEach(function(e){if(Au(e,b,w,u,h)){var t=u.start(e),n=u.end(e);u.allDay(e)||h.startAndEndAreDateOnly(t,n)||!g&&!h.isSameDate(t,n)?j.push(e):N.push(e)}}),s.forEach(function(e){Au(e,b,w,u,h)&&k.push(e)}),j.sort(function(e,t){return Cu(e,t,u,h)});var S={range:r,events:j,width:a,rtl:i,getNow:l,localizer:h,selected:o,allDayMaxRows:this.props.showAllEvents?1/0:null!==(e=this.props.allDayMaxRows)&&void 0!==e?e:1/0,resources:this.memoizedResources(c,u),selectable:this.props.selectable,accessors:u,getters:m,components:d,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:x,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:v};return tt.createElement("div",{className:$i("rbc-time-view",c&&"rbc-time-view-resources"),ref:this.containerRef},c&&c.length>1&&y?tt.createElement(om,S):tt.createElement(im,S),this.props.popup&&this.renderOverlay(),tt.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},tt.createElement(cm,{date:b,ref:this.gutterRef,localizer:h,min:h.merge(b,p),max:h.merge(b,f),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:d,className:"rbc-time-gutter",getters:m}),this.renderEvents(r,N,k,l())))}},{key:"renderOverlay",value:function(){var e,t,n=this,s=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},r=this.props,a=r.accessors,i=r.localizer,o=r.components,l=r.getters,c=r.selected,d=r.popupOffset,u=r.handleDragStart;return tt.createElement(pu,{overlay:s,accessors:a,localizer:i,components:o,getters:l,selected:c,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:u,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:function(){return n.setState({overlay:null})}})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var t,n=null!==(t=e.gutterRef)&&void 0!==t&&t.current?id(e.gutterRef.current):void 0;n&&e.state.gutterWidth!==n&&e.setState({gutterWidth:n})})}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.min,n=e.max,s=e.scrollToTime,r=e.localizer,a=r.diff(r.merge(s,t),s,"milliseconds"),i=r.diff(t,n,"milliseconds");this._scrollRatio=a/i}}])}();um.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var mm=["date","localizer","min","max","scrollToTime","enableAutoScroll"],hm=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var t=this.props,n=t.date,s=t.localizer,r=t.min,a=void 0===r?s.startOf(new Date,"day"):r,i=t.max,o=void 0===i?s.endOf(new Date,"day"):i,l=t.scrollToTime,c=void 0===l?s.startOf(new Date,"day"):l,d=t.enableAutoScroll,u=void 0===d||d,m=Ai(t,mm),h=e.range(n,{localizer:s});return tt.createElement(um,Object.assign({},m,{range:h,eventOffset:10,localizer:s,min:a,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}();hm.range=function(e,t){return[t.localizer.startOf(e,"day")]},hm.navigate=function(e,t,n){var s=n.localizer;switch(t){case Ed:return s.add(e,-1,"day");case Td:return s.add(e,1,"day");default:return e}},hm.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")};var pm=["date","localizer","min","max","scrollToTime","enableAutoScroll"],fm=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var t=this.props,n=t.date,s=t.localizer,r=t.min,a=void 0===r?s.startOf(new Date,"day"):r,i=t.max,o=void 0===i?s.endOf(new Date,"day"):i,l=t.scrollToTime,c=void 0===l?s.startOf(new Date,"day"):l,d=t.enableAutoScroll,u=void 0===d||d,m=Ai(t,pm),h=e.range(n,this.props);return tt.createElement(um,Object.assign({},m,{range:h,eventOffset:15,localizer:s,min:a,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}();fm.defaultProps=um.defaultProps,fm.navigate=function(e,t,n){var s=n.localizer;switch(t){case Ed:return s.add(e,-1,"week");case Td:return s.add(e,1,"week");default:return e}},fm.range=function(e,t){var n=t.localizer,s=n.startOfWeek(),r=n.startOf(e,"week",s),a=n.endOf(e,"week",s);return n.range(r,a)},fm.title=function(e,t){var n=t.localizer,s=od(fm.range(e,{localizer:n})),r=s[0],a=s.slice(1);return n.format({start:r,end:a.pop()},"dayRangeHeaderFormat")};var gm=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function xm(e,t){return fm.range(e,t).filter(function(e){return-1===[6,0].indexOf(e.getDay())})}var vm=function(){function e(){return Mi(this,e),Ri(this,e,arguments)}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var e=this.props,t=e.date,n=e.localizer,s=e.min,r=void 0===s?n.startOf(new Date,"day"):s,a=e.max,i=void 0===a?n.endOf(new Date,"day"):a,o=e.scrollToTime,l=void 0===o?n.startOf(new Date,"day"):o,c=e.enableAutoScroll,d=void 0===c||c,u=Ai(e,gm),m=xm(t,this.props);return tt.createElement(um,Object.assign({},u,{range:m,eventOffset:15,localizer:n,min:r,max:i,scrollToTime:l,enableAutoScroll:d}))}}])}();vm.defaultProps=um.defaultProps,vm.range=xm,vm.navigate=fm.navigate,vm.title=function(e,t){var n=t.localizer,s=od(xm(e,{localizer:n})),r=s[0],a=s.slice(1);return n.format({start:r,end:a.pop()},"dayRangeHeaderFormat")};function ym(e){var t=e.accessors,n=e.components,s=e.date,r=e.events,a=e.getters,i=e.length,o=void 0===i?30:i,l=e.localizer,c=e.onDoubleClickEvent,d=e.onSelectEvent,u=e.selected,m=Je.useRef(null),h=Je.useRef(null),p=Je.useRef(null),f=Je.useRef(null),g=Je.useRef(null);Je.useEffect(function(){v()});var x=function(e,s){var r="",a=n.time,i=l.messages.allDay,o=t.end(s),c=t.start(s);return t.allDay(s)||(l.eq(c,o)?i=l.format(c,"agendaTimeFormat"):l.isSameDate(c,o)?i=l.format({start:c,end:o},"agendaTimeRangeFormat"):l.isSameDate(e,c)?i=l.format(c,"agendaTimeFormat"):l.isSameDate(e,o)&&(i=l.format(o,"agendaTimeFormat"))),l.gt(e,c,"day")&&(r="rbc-continues-prior"),l.lt(e,o,"day")&&(r+=" rbc-continues-after"),tt.createElement("span",{className:r.trim()},a?tt.createElement(a,{event:s,day:e,label:i}):i)},v=function(){if(g.current){var e=m.current,t=g.current.firstChild;if(t){var n=f.current.scrollHeight>f.current.clientHeight,s=[],r=s;s=[id(t.children[0]),id(t.children[1])],r[0]===s[0]&&r[1]===s[1]||(h.current.style.width=s[0]+"px",p.current.style.width=s[1]+"px"),n?(Bt(e,"rbc-header-overflowing"),e.style.marginRight=Gc()+"px"):Ut(e,"rbc-header-overflowing")}}},y=l.messages,b=l.add(s,o,"day"),w=l.range(s,b,"day");return(r=r.filter(function(e){return Au(e,l.startOf(s,"day"),l.endOf(b,"day"),t,l)})).sort(function(e,n){return+t.start(e)-+t.start(n)}),tt.createElement("div",{className:"rbc-agenda-view"},0!==r.length?tt.createElement(tt.Fragment,null,tt.createElement("table",{ref:m,className:"rbc-agenda-table"},tt.createElement("thead",null,tt.createElement("tr",null,tt.createElement("th",{className:"rbc-header",ref:h},y.date),tt.createElement("th",{className:"rbc-header",ref:p},y.time),tt.createElement("th",{className:"rbc-header"},y.event)))),tt.createElement("div",{className:"rbc-agenda-content",ref:f},tt.createElement("table",{className:"rbc-agenda-table"},tt.createElement("tbody",{ref:g},w.map(function(e,s){return function(e,s,r){var i=n.event,o=n.date;return s=s.filter(function(n){return Au(n,l.startOf(e,"day"),l.endOf(e,"day"),t,l)}),s.map(function(n,m){var h=t.title(n),p=t.end(n),f=t.start(n),g=a.eventProp(n,f,p,lu(n,u)),v=0===m&&l.format(e,"agendaDateFormat"),y=0===m&&tt.createElement("td",{rowSpan:s.length,className:"rbc-agenda-date-cell"},o?tt.createElement(o,{day:e,label:v}):v);return tt.createElement("tr",{key:r+"_"+m,className:g.className,style:g.style},y,tt.createElement("td",{className:"rbc-agenda-time-cell"},x(e,n)),tt.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return d&&d(n,e)},onDoubleClick:function(e){return c&&c(n,e)}},i?tt.createElement(i,{event:n,title:h}):h))},[])}(e,r,s)}))))):tt.createElement("span",{className:"rbc-agenda-empty"},y.noEventsInRange))}ym.range=function(e,t){var n=t.length,s=void 0===n?30:n;return{start:e,end:t.localizer.add(e,s,"day")}},ym.navigate=function(e,t,n){var s=n.length,r=void 0===s?30:s,a=n.localizer;switch(t){case Ed:return a.add(e,-r,"day");case Td:return a.add(e,r,"day");default:return e}},ym.title=function(e,t){var n=t.length,s=void 0===n?30:n,r=t.localizer,a=r.add(e,s,"day");return r.format({start:e,end:a},"agendaHeaderFormat")};var bm=Ei(Ei(Ei(Ei(Ei({},Md.MONTH,Wu),Md.WEEK,fm),Md.WORK_WEEK,vm),Md.DAY,hm),Md.AGENDA,ym),wm=["action","date","today"];var jm=function(e){return function(t){return function(e,t){var n=null;return"function"==typeof t?n=t(e):"string"==typeof t&&"object"===Si(e)&&null!=e&&t in e&&(n=e[t]),n}(t,e)}},Nm=["view","date","getNow","onNavigate"],km=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Sm(e){if(Array.isArray(e))return e;for(var t=[],n=0,s=Object.entries(e);n<s.length;n++){var r=qi(s[n],2),a=r[0];r[1]&&t.push(a)}return t}var _m=function(){function e(){var t;Mi(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Ri(this,e,[].concat(s))).getViews=function(){var e=t.props.views;return Array.isArray(e)?Sd(e,function(e,t){return e[t]=bm[t]},{}):"object"===Si(e)?qt(e,function(e,t){return!0===e?bm[t]:e}):bm},t.getView=function(){return t.getViews()[t.props.view]},t.getDrilldownView=function(e){var n=t.props,s=n.view,r=n.drilldownView,a=n.getDrilldownView;return a?a(e,s,Object.keys(t.getViews())):r},t.handleRangeChange=function(e,n,s){var r=t.props,a=r.onRangeChange,i=r.localizer;a&&n.range&&a(n.range(e,{localizer:i}),s)},t.handleNavigate=function(e,n){var s=t.props,r=s.view,a=s.date,i=s.getNow,o=s.onNavigate,l=Ai(s,Nm),c=t.getView(),d=i();a=function(e,t){var n=t.action,s=t.date,r=t.today,a=Ai(t,wm);switch(e="string"==typeof e?bm[e]:e,n){case Dd:s=r||new Date;break;case Ad:break;default:Vi(e&&"function"==typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),s=e.navigate(s,n,a)}return s}(c,Di(Di({},l),{},{action:e,date:n||a||d,today:d})),o(a,r,e),t.handleRangeChange(a,c)},t.handleViewChange=function(e){e!==t.props.view&&function(e,t){return-1!==Sm(t.views).indexOf(e)}(e,t.props)&&t.props.onView(e);var n=t.getViews();t.handleRangeChange(t.props.date||t.props.getNow(),n[e],e)},t.handleSelectEvent=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onSelectEvent,n)},t.handleDoubleClickEvent=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onDoubleClickEvent,n)},t.handleKeyPressEvent=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];ru(t.props.onKeyPressEvent,n)},t.handleSelectSlot=function(e){ru(t.props.onSelectSlot,e)},t.handleDrillDown=function(e,n){var s=t.props.onDrillDown;s?s(e,n,t.drilldownView):(n&&t.handleViewChange(n),t.handleNavigate(Ad,e))},t.state={context:e.getContext(t.props)},t}return Li(e,tt.Component),Oi(e,[{key:"render",value:function(){var e=this.props,t=e.view,n=e.toolbar,s=e.events,r=e.backgroundEvents,a=e.resourceGroupingLayout,i=e.style,o=e.className,l=e.elementProps,c=e.date,d=e.getNow,u=e.length,m=e.showMultiDayTimes,h=e.onShowMore,p=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var f=Ai(e,km);c=c||d();var g=this.getView(),x=this.state.context,v=x.accessors,y=x.components,b=x.getters,w=x.localizer,j=x.viewNames,N=y.toolbar||su,k=g.title(c,{localizer:w,length:u});return tt.createElement("div",Object.assign({},l,{className:$i(o,"rbc-calendar",f.rtl&&"rbc-rtl"),style:i}),n&&tt.createElement(N,{date:c,view:t,views:j,label:k,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:w}),tt.createElement(g,Object.assign({},f,{events:s,backgroundEvents:r,date:c,getNow:d,length:u,localizer:w,getters:b,components:y,accessors:v,showMultiDayTimes:m,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:h,doShowMoreDrillDown:p,resourceGroupingLayout:a})))}}],[{key:"getDerivedStateFromProps",value:function(t){return{context:e.getContext(t)}}},{key:"getContext",value:function(e){var t=e.startAccessor,n=e.endAccessor,s=e.allDayAccessor,r=e.tooltipAccessor,a=e.titleAccessor,i=e.resourceAccessor,o=e.resourceIdAccessor,l=e.resourceTitleAccessor,c=e.eventIdAccessor,d=e.eventPropGetter,u=e.backgroundEventPropGetter,m=e.slotPropGetter,h=e.slotGroupPropGetter,p=e.dayPropGetter,f=e.view,g=e.views,x=e.localizer,v=e.culture,y=e.messages,b=void 0===y?{}:y,w=e.components,j=void 0===w?{}:w,N=e.formats,k=void 0===N?{}:N,S=Sm(g);return{viewNames:S,localizer:nu(x,v,k,function(e){return Di(Di({},au),e)}(b)),getters:{eventProp:function(){return d&&d.apply(void 0,arguments)||{}},backgroundEventProp:function(){return u&&u.apply(void 0,arguments)||{}},slotProp:function(){return m&&m.apply(void 0,arguments)||{}},slotGroupProp:function(){return h&&h.apply(void 0,arguments)||{}},dayProp:function(){return p&&p.apply(void 0,arguments)||{}}},components:pd(j[f]||{},zt(j,S),{eventWrapper:_d,backgroundEventWrapper:_d,eventContainerWrapper:_d,dateCellWrapper:_d,weekWrapper:_d,timeSlotWrapper:_d,timeGutterWrapper:_d}),accessors:{start:jm(t),end:jm(n),allDay:jm(s),tooltip:jm(r),title:jm(a),resource:jm(i),resourceId:jm(o),resourceTitle:jm(l),eventId:jm(c)}}}}])}();_m.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Md.MONTH,views:[Md.MONTH,Md.WEEK,Md.DAY,Md.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Md.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Em,Tm,Dm=function e(t,n,s){void 0===s&&(s=[]);var r,a=t.displayName||t.name||"Component",i=!!(r=t)&&("function"!=typeof r||r.prototype&&r.prototype.isReactComponent),o=Object.keys(n),l=o.map(Ki);!i&&s.length&&Vi(!1);var c=function(e){function r(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];(t=e.call.apply(e,[this].concat(a))||this).handlers=Object.create(null),o.forEach(function(e){var s=n[e];t.handlers[s]=function(n){if(t.props[s]){var r;t._notifying=!0;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(r=t.props)[s].apply(r,[n].concat(i)),t._notifying=!1}t.unmounted||t.setState(function(t){var s,r=t.values;return{values:yt(Object.create(null),r,(s={},s[e]=n,s))}})}}),s.length&&(t.attachRef=function(e){t.inner=e});var l=Object.create(null);return o.forEach(function(e){l[e]=t.props[Ki(e)]}),t.state={values:l,prevProps:{}},t}vt(r,e);var a=r.prototype;return a.shouldComponentUpdate=function(){return!this._notifying},r.getDerivedStateFromProps=function(e,t){var n=t.values,s=t.prevProps,r={values:yt(Object.create(null),n),prevProps:{}};return o.forEach(function(t){r.prevProps[t]=e[t],!Gi(e,t)&&Gi(s,t)&&(r.values[t]=e[Ki(t)])}),r},a.componentWillUnmount=function(){this.unmounted=!0},a.render=function(){var e=this,n=this.props,s=n.innerRef,r=ft(n,["innerRef"]);l.forEach(function(e){delete r[e]});var a={};return o.forEach(function(t){var n=e.props[t];a[t]=void 0!==n?n:e.state.values[t]}),tt.createElement(t,yt({},r,a,this.handlers,{ref:s||this.attachRef}))},r}(tt.Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,s=null,r=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?s="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(s="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?r="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==s||null!==r){var a=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+a+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==s?"\n  "+s:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Qi,t.componentWillReceiveProps=Xi),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Zi;var o=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var s=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;o.call(this,e,t,s)}}}(c),c.displayName="Uncontrolled("+a+")",c.propTypes=yt({innerRef:function(){}},function(e){var t={};return Object.keys(e).forEach(function(e){t[Ki(e)]=Hi}),t}(n)),s.forEach(function(e){c.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}});var d=c;return tt.forwardRef&&((d=tt.forwardRef(function(e,t){return tt.createElement(c,yt({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))})).propTypes=c.propTypes),d.ControlledComponent=t,d.deferControlTo=function(t,s,r){return void 0===s&&(s={}),e(t,yt({},n,s),r)},d}(_m,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),Am=function(e,t,n){var s=e.start,r=e.end;return n.format(s,"LT",t)+"  "+n.format(r,"LT",t)},Mm={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Am,eventTimeRangeFormat:Am,eventTimeRangeStartFormat:function(e,t,n){var s=e.start;return n.format(s,"LT",t)+"  "},eventTimeRangeEndFormat:function(e,t,n){var s=e.end;return"  "+n.format(s,"LT",t)},timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:function(e,t,n){var s=e.start,r=e.end;return n.format(s,"MMMM DD",t)+"  "+n.format(r,n.eq(s,r,"month")?"DD":"MMMM DD",t)},agendaHeaderFormat:function(e,t,n){var s=e.start,r=e.end;return n.format(s,"L",t)+"  "+n.format(r,"L",t)},agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Am};function Cm(e){var t=e?e.toLowerCase():e;return"FullYear"===t?t="year":t||(t=void 0),t}function Om(){return Em.apply(null,arguments)}function Pm(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function Im(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function Rm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Lm(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(Rm(e,t))return!1;return!0}function Fm(e){return void 0===e}function zm(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function Bm(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function Um(e,t){var n,s=[],r=e.length;for(n=0;n<r;++n)s.push(t(e[n],n));return s}function qm(e,t){for(var n in t)Rm(t,n)&&(e[n]=t[n]);return Rm(t,"toString")&&(e.toString=t.toString),Rm(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Wm(e,t,n,s){return uf(e,t,n,s,!0).utc()}function $m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function Ym(e){var t=null,n=!1,s=e._d&&!isNaN(e._d.getTime());return s&&(t=$m(e),n=Tm.call(t.parsedDateParts,function(e){return null!=e}),s=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?s:(e._isValid=s,e._isValid)}function Vm(e){var t=Wm(NaN);return null!=e?qm($m(t),e):$m(t).userInvalidated=!0,t}Tm=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),s=n.length>>>0;for(t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var Hm=Om.momentProperties=[],Gm=!1;function Km(e,t){var n,s,r,a=Hm.length;if(Fm(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Fm(t._i)||(e._i=t._i),Fm(t._f)||(e._f=t._f),Fm(t._l)||(e._l=t._l),Fm(t._strict)||(e._strict=t._strict),Fm(t._tzm)||(e._tzm=t._tzm),Fm(t._isUTC)||(e._isUTC=t._isUTC),Fm(t._offset)||(e._offset=t._offset),Fm(t._pf)||(e._pf=$m(t)),Fm(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)Fm(r=t[s=Hm[n]])||(e[s]=r);return e}function Qm(e){Km(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Gm&&(Gm=!0,Om.updateOffset(this),Gm=!1)}function Xm(e){return e instanceof Qm||null!=e&&null!=e._isAMomentObject}function Zm(e){!1===Om.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn}function Jm(e,t){var n=!0;return qm(function(){if(null!=Om.deprecationHandler&&Om.deprecationHandler(null,e),n){var s,r,a,i=[],o=arguments.length;for(r=0;r<o;r++){if(s="","object"==typeof arguments[r]){for(a in s+="\n["+r+"] ",arguments[0])Rm(arguments[0],a)&&(s+=a+": "+arguments[0][a]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}Zm((Array.prototype.slice.call(i).join(""),(new Error).stack)),n=!1}return t.apply(this,arguments)},t)}var eh,th={};function nh(e,t){null!=Om.deprecationHandler&&Om.deprecationHandler(e,t),th[e]||(Zm(),th[e]=!0)}function sh(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function rh(e,t){var n,s=qm({},e);for(n in t)Rm(t,n)&&(Im(e[n])&&Im(t[n])?(s[n]={},qm(s[n],e[n]),qm(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)Rm(e,n)&&!Rm(t,n)&&Im(e[n])&&(s[n]=qm({},s[n]));return s}function ah(e){null!=e&&this.set(e)}Om.suppressDeprecationWarnings=!1,Om.deprecationHandler=null,eh=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)Rm(e,t)&&n.push(t);return n};function ih(e,t,n){var s=""+Math.abs(e),r=t-s.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var oh=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,lh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ch={},dh={};function uh(e,t,n,s){var r=s;"string"==typeof s&&(r=function(){return this[s]()}),e&&(dh[e]=r),t&&(dh[t[0]]=function(){return ih(r.apply(this,arguments),t[1],t[2])}),n&&(dh[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function mh(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function hh(e,t){return e.isValid()?(t=ph(t,e.localeData()),ch[t]=ch[t]||function(e){var t,n,s=e.match(oh);for(t=0,n=s.length;t<n;t++)dh[s[t]]?s[t]=dh[s[t]]:s[t]=mh(s[t]);return function(t){var r,a="";for(r=0;r<n;r++)a+=sh(s[r])?s[r].call(t,e):s[r];return a}}(t),ch[t](e)):e.localeData().invalidDate()}function ph(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(lh.lastIndex=0;n>=0&&lh.test(e);)e=e.replace(lh,s),lh.lastIndex=0,n-=1;return e}var fh={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function gh(e){return"string"==typeof e?fh[e]||fh[e.toLowerCase()]:void 0}function xh(e){var t,n,s={};for(n in e)Rm(e,n)&&(t=gh(n))&&(s[t]=e[n]);return s}var vh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};var yh,bh=/\d/,wh=/\d\d/,jh=/\d{3}/,Nh=/\d{4}/,kh=/[+-]?\d{6}/,Sh=/\d\d?/,_h=/\d\d\d\d?/,Eh=/\d\d\d\d\d\d?/,Th=/\d{1,3}/,Dh=/\d{1,4}/,Ah=/[+-]?\d{1,6}/,Mh=/\d+/,Ch=/[+-]?\d+/,Oh=/Z|[+-]\d\d:?\d\d/gi,Ph=/Z|[+-]\d\d(?::?\d\d)?/gi,Ih=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Rh=/^[1-9]\d?/,Lh=/^([1-9]\d|\d)/;function Fh(e,t,n){yh[e]=sh(t)?t:function(e,s){return e&&n?n:t}}function zh(e,t){return Rm(yh,e)?yh[e](t._strict,t._locale):new RegExp(Bh(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,r){return t||n||s||r})))}function Bh(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Uh(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function qh(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Uh(t)),n}yh={};var Wh={};function $h(e,t){var n,s,r=t;for("string"==typeof e&&(e=[e]),zm(t)&&(r=function(e,n){n[t]=qh(e)}),s=e.length,n=0;n<s;n++)Wh[e[n]]=r}function Yh(e,t){$h(e,function(e,n,s,r){s._w=s._w||{},t(e,s._w,s,r)})}function Vh(e,t,n){null!=t&&Rm(Wh,e)&&Wh[e](t,n._a,n,e)}function Hh(e){return e%4==0&&e%100!=0||e%400==0}var Gh=0,Kh=1,Qh=2,Xh=3,Zh=4,Jh=5,ep=6,tp=7,np=8;function sp(e){return Hh(e)?366:365}uh("Y",0,0,function(){var e=this.year();return e<=9999?ih(e,4):"+"+e}),uh(0,["YY",2],0,function(){return this.year()%100}),uh(0,["YYYY",4],0,"year"),uh(0,["YYYYY",5],0,"year"),uh(0,["YYYYYY",6,!0],0,"year"),Fh("Y",Ch),Fh("YY",Sh,wh),Fh("YYYY",Dh,Nh),Fh("YYYYY",Ah,kh),Fh("YYYYYY",Ah,kh),$h(["YYYYY","YYYYYY"],Gh),$h("YYYY",function(e,t){t[Gh]=2===e.length?Om.parseTwoDigitYear(e):qh(e)}),$h("YY",function(e,t){t[Gh]=Om.parseTwoDigitYear(e)}),$h("Y",function(e,t){t[Gh]=parseInt(e,10)}),Om.parseTwoDigitYear=function(e){return qh(e)+(qh(e)>68?1900:2e3)};var rp,ap=ip("FullYear",!0);function ip(e,t){return function(n){return null!=n?(lp(this,e,n),Om.updateOffset(this,t),this):op(this,e)}}function op(e,t){if(!e.isValid())return NaN;var n=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function lp(e,t,n){var s,r,a,i,o;if(e.isValid()&&!isNaN(n)){switch(s=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(r?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(r?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(r?s.setUTCHours(n):s.setHours(n));case"Date":return void(r?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}a=n,i=e.month(),o=29!==(o=e.date())||1!==i||Hh(a)?o:28,r?s.setUTCFullYear(a,i,o):s.setFullYear(a,i,o)}}function cp(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?Hh(e)?29:28:31-s%7%2}rp=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},uh("M",["MM",2],"Mo",function(){return this.month()+1}),uh("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),uh("MMMM",0,0,function(e){return this.localeData().months(this,e)}),Fh("M",Sh,Rh),Fh("MM",Sh,wh),Fh("MMM",function(e,t){return t.monthsShortRegex(e)}),Fh("MMMM",function(e,t){return t.monthsRegex(e)}),$h(["M","MM"],function(e,t){t[Kh]=qh(e)-1}),$h(["MMM","MMMM"],function(e,t,n,s){var r=n._locale.monthsParse(e,s,n._strict);null!=r?t[Kh]=r:$m(n).invalidMonth=e});var dp="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),up="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mp=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,hp=Ih,pp=Ih;function fp(e,t,n){var s,r,a,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)a=Wm([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=rp.call(this._shortMonthsParse,i))?r:null:-1!==(r=rp.call(this._longMonthsParse,i))?r:null:"MMM"===t?-1!==(r=rp.call(this._shortMonthsParse,i))||-1!==(r=rp.call(this._longMonthsParse,i))?r:null:-1!==(r=rp.call(this._longMonthsParse,i))||-1!==(r=rp.call(this._shortMonthsParse,i))?r:null}function gp(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=qh(t);else if(!zm(t=e.localeData().monthsParse(t)))return e;var n=t,s=e.date();return s=s<29?s:Math.min(s,cp(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,s):e._d.setMonth(n,s),e}function xp(e){return null!=e?(gp(this,e),Om.updateOffset(this,!0),this):op(this,"Month")}function vp(){function e(e,t){return t.length-e.length}var t,n,s,r,a=[],i=[],o=[];for(t=0;t<12;t++)n=Wm([2e3,t]),s=Bh(this.monthsShort(n,"")),r=Bh(this.months(n,"")),a.push(s),i.push(r),o.push(r),o.push(s);a.sort(e),i.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function yp(e,t,n,s,r,a,i){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,s,r,a,i),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,r,a,i),o}function bp(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wp(e,t,n){var s=7+t-n;return-((7+bp(e,0,s).getUTCDay()-t)%7)+s-1}function jp(e,t,n,s,r){var a,i,o=1+7*(t-1)+(7+n-s)%7+wp(e,s,r);return o<=0?i=sp(a=e-1)+o:o>sp(e)?(a=e+1,i=o-sp(e)):(a=e,i=o),{year:a,dayOfYear:i}}function Np(e,t,n){var s,r,a=wp(e.year(),t,n),i=Math.floor((e.dayOfYear()-a-1)/7)+1;return i<1?s=i+kp(r=e.year()-1,t,n):i>kp(e.year(),t,n)?(s=i-kp(e.year(),t,n),r=e.year()+1):(r=e.year(),s=i),{week:s,year:r}}function kp(e,t,n){var s=wp(e,t,n),r=wp(e+1,t,n);return(sp(e)-s+r)/7}uh("w",["ww",2],"wo","week"),uh("W",["WW",2],"Wo","isoWeek"),Fh("w",Sh,Rh),Fh("ww",Sh,wh),Fh("W",Sh,Rh),Fh("WW",Sh,wh),Yh(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=qh(e)});function Sp(e,t){return e.slice(t,7).concat(e.slice(0,t))}uh("d",0,"do","day"),uh("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),uh("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),uh("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),uh("e",0,0,"weekday"),uh("E",0,0,"isoWeekday"),Fh("d",Sh),Fh("e",Sh),Fh("E",Sh),Fh("dd",function(e,t){return t.weekdaysMinRegex(e)}),Fh("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Fh("dddd",function(e,t){return t.weekdaysRegex(e)}),Yh(["dd","ddd","dddd"],function(e,t,n,s){var r=n._locale.weekdaysParse(e,s,n._strict);null!=r?t.d=r:$m(n).invalidWeekday=e}),Yh(["d","e","E"],function(e,t,n,s){t[s]=qh(e)});var _p="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ep="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Tp="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Dp=Ih,Ap=Ih,Mp=Ih;function Cp(e,t,n){var s,r,a,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)a=Wm([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=rp.call(this._weekdaysParse,i))?r:null:"ddd"===t?-1!==(r=rp.call(this._shortWeekdaysParse,i))?r:null:-1!==(r=rp.call(this._minWeekdaysParse,i))?r:null:"dddd"===t?-1!==(r=rp.call(this._weekdaysParse,i))||-1!==(r=rp.call(this._shortWeekdaysParse,i))||-1!==(r=rp.call(this._minWeekdaysParse,i))?r:null:"ddd"===t?-1!==(r=rp.call(this._shortWeekdaysParse,i))||-1!==(r=rp.call(this._weekdaysParse,i))||-1!==(r=rp.call(this._minWeekdaysParse,i))?r:null:-1!==(r=rp.call(this._minWeekdaysParse,i))||-1!==(r=rp.call(this._weekdaysParse,i))||-1!==(r=rp.call(this._shortWeekdaysParse,i))?r:null}function Op(){function e(e,t){return t.length-e.length}var t,n,s,r,a,i=[],o=[],l=[],c=[];for(t=0;t<7;t++)n=Wm([2e3,1]).day(t),s=Bh(this.weekdaysMin(n,"")),r=Bh(this.weekdaysShort(n,"")),a=Bh(this.weekdays(n,"")),i.push(s),o.push(r),l.push(a),c.push(s),c.push(r),c.push(a);i.sort(e),o.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Pp(){return this.hours()%12||12}function Ip(e,t){uh(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Rp(e,t){return t._meridiemParse}uh("H",["HH",2],0,"hour"),uh("h",["hh",2],0,Pp),uh("k",["kk",2],0,function(){return this.hours()||24}),uh("hmm",0,0,function(){return""+Pp.apply(this)+ih(this.minutes(),2)}),uh("hmmss",0,0,function(){return""+Pp.apply(this)+ih(this.minutes(),2)+ih(this.seconds(),2)}),uh("Hmm",0,0,function(){return""+this.hours()+ih(this.minutes(),2)}),uh("Hmmss",0,0,function(){return""+this.hours()+ih(this.minutes(),2)+ih(this.seconds(),2)}),Ip("a",!0),Ip("A",!1),Fh("a",Rp),Fh("A",Rp),Fh("H",Sh,Lh),Fh("h",Sh,Rh),Fh("k",Sh,Rh),Fh("HH",Sh,wh),Fh("hh",Sh,wh),Fh("kk",Sh,wh),Fh("hmm",_h),Fh("hmmss",Eh),Fh("Hmm",_h),Fh("Hmmss",Eh),$h(["H","HH"],Xh),$h(["k","kk"],function(e,t,n){var s=qh(e);t[Xh]=24===s?0:s}),$h(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),$h(["h","hh"],function(e,t,n){t[Xh]=qh(e),$m(n).bigHour=!0}),$h("hmm",function(e,t,n){var s=e.length-2;t[Xh]=qh(e.substr(0,s)),t[Zh]=qh(e.substr(s)),$m(n).bigHour=!0}),$h("hmmss",function(e,t,n){var s=e.length-4,r=e.length-2;t[Xh]=qh(e.substr(0,s)),t[Zh]=qh(e.substr(s,2)),t[Jh]=qh(e.substr(r)),$m(n).bigHour=!0}),$h("Hmm",function(e,t,n){var s=e.length-2;t[Xh]=qh(e.substr(0,s)),t[Zh]=qh(e.substr(s))}),$h("Hmmss",function(e,t,n){var s=e.length-4,r=e.length-2;t[Xh]=qh(e.substr(0,s)),t[Zh]=qh(e.substr(s,2)),t[Jh]=qh(e.substr(r))});var Lp=ip("Hours",!0);var Fp,zp={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:dp,monthsShort:up,week:{dow:0,doy:6},weekdays:_p,weekdaysMin:Tp,weekdaysShort:Ep,meridiemParse:/[ap]\.?m?\.?/i},Bp={},Up={};function qp(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function Wp(e){return e?e.toLowerCase().replace("_","-"):e}function $p(e){var t=null;if(void 0===Bp[e]&&"undefined"!=typeof module&&module&&module.exports&&function(e){return!(!e||!e.match("^[^/\\\\]*$"))}(e))try{t=Fp._abbr,require("./locale/"+e),Yp(t)}catch(mj){Bp[e]=null}return Bp[e]}function Yp(e,t){var n;return e&&((n=Fm(t)?Hp(e):Vp(e,t))?Fp=n:"undefined"!=typeof console&&console.warn),Fp._abbr}function Vp(e,t){if(null!==t){var n,s=zp;if(t.abbr=e,null!=Bp[e])nh("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Bp[e]._config;else if(null!=t.parentLocale)if(null!=Bp[t.parentLocale])s=Bp[t.parentLocale]._config;else{if(null==(n=$p(t.parentLocale)))return Up[t.parentLocale]||(Up[t.parentLocale]=[]),Up[t.parentLocale].push({name:e,config:t}),null;s=n._config}return Bp[e]=new ah(rh(s,t)),Up[e]&&Up[e].forEach(function(e){Vp(e.name,e.config)}),Yp(e),Bp[e]}return delete Bp[e],null}function Hp(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Fp;if(!Pm(e)){if(t=$p(e))return t;e=[e]}return function(e){for(var t,n,s,r,a=0;a<e.length;){for(t=(r=Wp(e[a]).split("-")).length,n=(n=Wp(e[a+1]))?n.split("-"):null;t>0;){if(s=$p(r.slice(0,t).join("-")))return s;if(n&&n.length>=t&&qp(r,n)>=t-1)break;t--}a++}return Fp}(e)}function Gp(e){var t,n=e._a;return n&&-2===$m(e).overflow&&(t=n[Kh]<0||n[Kh]>11?Kh:n[Qh]<1||n[Qh]>cp(n[Gh],n[Kh])?Qh:n[Xh]<0||n[Xh]>24||24===n[Xh]&&(0!==n[Zh]||0!==n[Jh]||0!==n[ep])?Xh:n[Zh]<0||n[Zh]>59?Zh:n[Jh]<0||n[Jh]>59?Jh:n[ep]<0||n[ep]>999?ep:-1,$m(e)._overflowDayOfYear&&(t<Gh||t>Qh)&&(t=Qh),$m(e)._overflowWeeks&&-1===t&&(t=tp),$m(e)._overflowWeekday&&-1===t&&(t=np),$m(e).overflow=t),e}var Kp=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qp=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xp=/Z|[+-]\d\d(?::?\d\d)?/,Zp=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Jp=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ef=/^\/?Date\((-?\d+)/i,tf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,nf={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function sf(e){var t,n,s,r,a,i,o=e._i,l=Kp.exec(o)||Qp.exec(o),c=Zp.length,d=Jp.length;if(l){for($m(e).iso=!0,t=0,n=c;t<n;t++)if(Zp[t][1].exec(l[1])){r=Zp[t][0],s=!1!==Zp[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=d;t<n;t++)if(Jp[t][1].exec(l[3])){a=(l[2]||" ")+Jp[t][0];break}if(null==a)return void(e._isValid=!1)}if(!s&&null!=a)return void(e._isValid=!1);if(l[4]){if(!Xp.exec(l[4]))return void(e._isValid=!1);i="Z"}e._f=r+(a||"")+(i||""),cf(e)}else e._isValid=!1}function rf(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function af(e){var t,n,s,r,a,i,o,l,c=tf.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],s=c[3],r=c[2],a=c[5],i=c[6],o=c[7],l=[rf(n),up.indexOf(s),parseInt(r,10),parseInt(a,10),parseInt(i,10)],o&&l.push(parseInt(o,10)),t=l,!function(e,t,n){return!e||Ep.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||($m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return nf[e];if(t)return 0;var s=parseInt(n,10),r=s%100;return(s-r)/100*60+r}(c[8],c[9],c[10]),e._d=bp.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),$m(e).rfc2822=!0}else e._isValid=!1}function of(e,t,n){return null!=e?e:null!=t?t:n}function lf(e){var t,n,s,r,a,i=[];if(!e._d){for(s=function(e){var t=new Date(Om.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Qh]&&null==e._a[Kh]&&function(e){var t,n,s,r,a,i,o,l,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,i=4,n=of(t.GG,e._a[Gh],Np(mf(),1,4).year),s=of(t.W,1),((r=of(t.E,1))<1||r>7)&&(l=!0)):(a=e._locale._week.dow,i=e._locale._week.doy,c=Np(mf(),a,i),n=of(t.gg,e._a[Gh],c.year),s=of(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||t.e>6)&&(l=!0)):r=a);s<1||s>kp(n,a,i)?$m(e)._overflowWeeks=!0:null!=l?$m(e)._overflowWeekday=!0:(o=jp(n,s,r,a,i),e._a[Gh]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=of(e._a[Gh],s[Gh]),(e._dayOfYear>sp(a)||0===e._dayOfYear)&&($m(e)._overflowDayOfYear=!0),n=bp(a,0,e._dayOfYear),e._a[Kh]=n.getUTCMonth(),e._a[Qh]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=s[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Xh]&&0===e._a[Zh]&&0===e._a[Jh]&&0===e._a[ep]&&(e._nextDay=!0,e._a[Xh]=0),e._d=(e._useUTC?bp:yp).apply(null,i),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Xh]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&($m(e).weekdayMismatch=!0)}}function cf(e){if(e._f!==Om.ISO_8601)if(e._f!==Om.RFC_2822){e._a=[],$m(e).empty=!0;var t,n,s,r,a,i,o,l=""+e._i,c=l.length,d=0;for(o=(s=ph(e._f,e._locale).match(oh)||[]).length,t=0;t<o;t++)r=s[t],(n=(l.match(zh(r,e))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&$m(e).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),d+=n.length),dh[r]?(n?$m(e).empty=!1:$m(e).unusedTokens.push(r),Vh(r,n,e)):e._strict&&!n&&$m(e).unusedTokens.push(r);$m(e).charsLeftOver=c-d,l.length>0&&$m(e).unusedInput.push(l),e._a[Xh]<=12&&!0===$m(e).bigHour&&e._a[Xh]>0&&($m(e).bigHour=void 0),$m(e).parsedDateParts=e._a.slice(0),$m(e).meridiem=e._meridiem,e._a[Xh]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}(e._locale,e._a[Xh],e._meridiem),null!==(i=$m(e).era)&&(e._a[Gh]=e._locale.erasConvertYear(i,e._a[Gh])),lf(e),Gp(e)}else af(e);else sf(e)}function df(e){var t=e._i,n=e._f;return e._locale=e._locale||Hp(e._l),null===t||void 0===n&&""===t?Vm({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),Xm(t)?new Qm(Gp(t)):(Bm(t)?e._d=t:Pm(n)?function(e){var t,n,s,r,a,i,o=!1,l=e._f.length;if(0===l)return $m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)a=0,i=!1,t=Km({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],cf(t),Ym(t)&&(i=!0),a+=$m(t).charsLeftOver,a+=10*$m(t).unusedTokens.length,$m(t).score=a,o?a<s&&(s=a,n=t):(null==s||a<s||i)&&(s=a,n=t,i&&(o=!0));qm(e,n||t)}(e):n?cf(e):function(e){var t=e._i;Fm(t)?e._d=new Date(Om.now()):Bm(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=ef.exec(e._i);null===t?(sf(e),!1===e._isValid&&(delete e._isValid,af(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:Om.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):Pm(t)?(e._a=Um(t.slice(0),function(e){return parseInt(e,10)}),lf(e)):Im(t)?function(e){if(!e._d){var t=xh(e._i),n=void 0===t.day?t.date:t.day;e._a=Um([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lf(e)}}(e):zm(t)?e._d=new Date(t):Om.createFromInputFallback(e)}(e),Ym(e)||(e._d=null),e))}function uf(e,t,n,s,r){var a,i={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(Im(e)&&Lm(e)||Pm(e)&&0===e.length)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=r,i._l=n,i._i=e,i._f=t,i._strict=s,(a=new Qm(Gp(df(i))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function mf(e,t,n,s){return uf(e,t,n,s,!1)}Om.createFromInputFallback=Jm("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Om.ISO_8601=function(){},Om.RFC_2822=function(){};var hf=Jm("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=mf.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Vm()}),pf=Jm("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=mf.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Vm()});function ff(e,t){var n,s;if(1===t.length&&Pm(t[0])&&(t=t[0]),!t.length)return mf();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var gf=["year","quarter","month","week","day","hour","minute","second","millisecond"];function xf(e){var t=xh(e),n=t.year||0,s=t.quarter||0,r=t.month||0,a=t.week||t.isoWeek||0,i=t.day||0,o=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,s=!1,r=gf.length;for(t in e)if(Rm(e,t)&&(-1===rp.call(gf,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<r;++n)if(e[gf[n]]){if(s)return!1;parseFloat(e[gf[n]])!==qh(e[gf[n]])&&(s=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*o*60*60,this._days=+i+7*a,this._months=+r+3*s+12*n,this._data={},this._locale=Hp(),this._bubble()}function vf(e){return e instanceof xf}function yf(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function bf(e,t){uh(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+ih(~~(e/60),2)+t+ih(~~e%60,2)})}bf("Z",":"),bf("ZZ",""),Fh("Z",Ph),Fh("ZZ",Ph),$h(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=jf(Ph,e)});var wf=/([\+\-]|\d\d)/gi;function jf(e,t){var n,s,r=(t||"").match(e);return null===r?null:0===(s=60*(n=((r[r.length-1]||[])+"").match(wf)||["-",0,0])[1]+qh(n[2]))?0:"+"===n[0]?s:-s}function Nf(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(Xm(e)||Bm(e)?e.valueOf():mf(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),Om.updateOffset(n,!1),n):mf(e).local()}function kf(e){return-Math.round(e._d.getTimezoneOffset())}function Sf(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}Om.updateOffset=function(){};var _f=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ef=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Tf(e,t){var n,s,r,a=e,i=null;return vf(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:zm(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(i=_f.exec(e))?(n="-"===i[1]?-1:1,a={y:0,d:qh(i[Qh])*n,h:qh(i[Xh])*n,m:qh(i[Zh])*n,s:qh(i[Jh])*n,ms:qh(yf(1e3*i[ep]))*n}):(i=Ef.exec(e))?(n="-"===i[1]?-1:1,a={y:Df(i[2],n),M:Df(i[3],n),w:Df(i[4],n),d:Df(i[5],n),h:Df(i[6],n),m:Df(i[7],n),s:Df(i[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Nf(t,e),e.isBefore(t)?n=Af(e,t):((n=Af(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(mf(a.from),mf(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),s=new xf(a),vf(e)&&Rm(e,"_locale")&&(s._locale=e._locale),vf(e)&&Rm(e,"_isValid")&&(s._isValid=e._isValid),s}function Df(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Af(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Mf(e,t){return function(n,s){var r;return null===s||isNaN(+s)||(nh(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=s,s=r),Cf(this,Tf(n,s),e),this}}function Cf(e,t,n,s){var r=t._milliseconds,a=yf(t._days),i=yf(t._months);e.isValid()&&(s=null==s||s,i&&gp(e,op(e,"Month")+i*n),a&&lp(e,"Date",op(e,"Date")+a*n),r&&e._d.setTime(e._d.valueOf()+r*n),s&&Om.updateOffset(e,a||i))}Tf.fn=xf.prototype,Tf.invalid=function(){return Tf(NaN)};var Of=Mf(1,"add"),Pf=Mf(-1,"subtract");function If(e){return"string"==typeof e||e instanceof String}function Rf(e){return Xm(e)||Bm(e)||If(e)||zm(e)||function(e){var t=Pm(e),n=!1;t&&(n=0===e.filter(function(t){return!zm(t)&&If(e)}).length);return t&&n}(e)||function(e){var t,n,s=Im(e)&&!Lm(e),r=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i=a.length;for(t=0;t<i;t+=1)n=a[t],r=r||Rm(e,n);return s&&r}(e)||null==e}function Lf(e,t){if(e.date()<t.date())return-Lf(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Ff(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Hp(e))&&(this._locale=t),this)}Om.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",Om.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var zf=Jm("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Bf(){return this._locale}var Uf=1e3,qf=6e4,Wf=36e5,$f=126227808e5;function Yf(e,t){return(e%t+t)%t}function Vf(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-$f:new Date(e,t,n).valueOf()}function Hf(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-$f:Date.UTC(e,t,n)}function Gf(e,t){return t.erasAbbrRegex(e)}function Kf(){var e,t,n,s,r,a=[],i=[],o=[],l=[],c=this.eras();for(e=0,t=c.length;e<t;++e)n=Bh(c[e].name),s=Bh(c[e].abbr),r=Bh(c[e].narrow),i.push(n),a.push(s),o.push(r),l.push(n),l.push(s),l.push(r);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function Qf(e,t){uh(0,[e,e.length],0,t)}function Xf(e,t,n,s,r){var a;return null==e?Np(this,s,r).year:(t>(a=kp(e,s,r))&&(t=a),Zf.call(this,e,t,n,s,r))}function Zf(e,t,n,s,r){var a=jp(e,t,n,s,r),i=bp(a.year,0,a.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}uh("N",0,0,"eraAbbr"),uh("NN",0,0,"eraAbbr"),uh("NNN",0,0,"eraAbbr"),uh("NNNN",0,0,"eraName"),uh("NNNNN",0,0,"eraNarrow"),uh("y",["y",1],"yo","eraYear"),uh("y",["yy",2],0,"eraYear"),uh("y",["yyy",3],0,"eraYear"),uh("y",["yyyy",4],0,"eraYear"),Fh("N",Gf),Fh("NN",Gf),Fh("NNN",Gf),Fh("NNNN",function(e,t){return t.erasNameRegex(e)}),Fh("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),$h(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var r=n._locale.erasParse(e,s,n._strict);r?$m(n).era=r:$m(n).invalidEra=e}),Fh("y",Mh),Fh("yy",Mh),Fh("yyy",Mh),Fh("yyyy",Mh),Fh("yo",function(e,t){return t._eraYearOrdinalRegex||Mh}),$h(["y","yy","yyy","yyyy"],Gh),$h(["yo"],function(e,t,n,s){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Gh]=n._locale.eraYearOrdinalParse(e,r):t[Gh]=parseInt(e,10)}),uh(0,["gg",2],0,function(){return this.weekYear()%100}),uh(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Qf("gggg","weekYear"),Qf("ggggg","weekYear"),Qf("GGGG","isoWeekYear"),Qf("GGGGG","isoWeekYear"),Fh("G",Ch),Fh("g",Ch),Fh("GG",Sh,wh),Fh("gg",Sh,wh),Fh("GGGG",Dh,Nh),Fh("gggg",Dh,Nh),Fh("GGGGG",Ah,kh),Fh("ggggg",Ah,kh),Yh(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=qh(e)}),Yh(["gg","GG"],function(e,t,n,s){t[s]=Om.parseTwoDigitYear(e)}),uh("Q",0,"Qo","quarter"),Fh("Q",bh),$h("Q",function(e,t){t[Kh]=3*(qh(e)-1)}),uh("D",["DD",2],"Do","date"),Fh("D",Sh,Rh),Fh("DD",Sh,wh),Fh("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),$h(["D","DD"],Qh),$h("Do",function(e,t){t[Qh]=qh(e.match(Sh)[0])});var Jf=ip("Date",!0);uh("DDD",["DDDD",3],"DDDo","dayOfYear"),Fh("DDD",Th),Fh("DDDD",jh),$h(["DDD","DDDD"],function(e,t,n){n._dayOfYear=qh(e)}),uh("m",["mm",2],0,"minute"),Fh("m",Sh,Lh),Fh("mm",Sh,wh),$h(["m","mm"],Zh);var eg=ip("Minutes",!1);uh("s",["ss",2],0,"second"),Fh("s",Sh,Lh),Fh("ss",Sh,wh),$h(["s","ss"],Jh);var tg,ng,sg=ip("Seconds",!1);for(uh("S",0,0,function(){return~~(this.millisecond()/100)}),uh(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),uh(0,["SSS",3],0,"millisecond"),uh(0,["SSSS",4],0,function(){return 10*this.millisecond()}),uh(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),uh(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),uh(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),uh(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),uh(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Fh("S",Th,bh),Fh("SS",Th,wh),Fh("SSS",Th,jh),tg="SSSS";tg.length<=9;tg+="S")Fh(tg,Mh);function rg(e,t){t[ep]=qh(1e3*("0."+e))}for(tg="S";tg.length<=9;tg+="S")$h(tg,rg);ng=ip("Milliseconds",!1),uh("z",0,0,"zoneAbbr"),uh("zz",0,0,"zoneName");var ag=Qm.prototype;function ig(e){return e}ag.add=Of,ag.calendar=function(e,t){1===arguments.length&&(arguments[0]?Rf(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=Im(e)&&!Lm(e),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)s=s||Rm(e,r[t]);return n&&s}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||mf(),s=Nf(n,this).startOf("day"),r=Om.calendarFormat(this,s)||"sameElse",a=t&&(sh(t[r])?t[r].call(this,n):t[r]);return this.format(a||this.localeData().calendar(r,this,mf(n)))},ag.clone=function(){return new Qm(this)},ag.diff=function(e,t,n){var s,r,a;if(!this.isValid())return NaN;if(!(s=Nf(e,this)).isValid())return NaN;switch(r=6e4*(s.utcOffset()-this.utcOffset()),t=gh(t)){case"year":a=Lf(this,s)/12;break;case"month":a=Lf(this,s);break;case"quarter":a=Lf(this,s)/3;break;case"second":a=(this-s)/1e3;break;case"minute":a=(this-s)/6e4;break;case"hour":a=(this-s)/36e5;break;case"day":a=(this-s-r)/864e5;break;case"week":a=(this-s-r)/6048e5;break;default:a=this-s}return n?a:Uh(a)},ag.endOf=function(e){var t,n;if(void 0===(e=gh(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Hf:Vf,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Wf-Yf(t+(this._isUTC?0:this.utcOffset()*qf),Wf)-1;break;case"minute":t=this._d.valueOf(),t+=qf-Yf(t,qf)-1;break;case"second":t=this._d.valueOf(),t+=Uf-Yf(t,Uf)-1}return this._d.setTime(t),Om.updateOffset(this,!0),this},ag.format=function(e){e||(e=this.isUtc()?Om.defaultFormatUtc:Om.defaultFormat);var t=hh(this,e);return this.localeData().postformat(t)},ag.from=function(e,t){return this.isValid()&&(Xm(e)&&e.isValid()||mf(e).isValid())?Tf({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ag.fromNow=function(e){return this.from(mf(),e)},ag.to=function(e,t){return this.isValid()&&(Xm(e)&&e.isValid()||mf(e).isValid())?Tf({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ag.toNow=function(e){return this.to(mf(),e)},ag.get=function(e){return sh(this[e=gh(e)])?this[e]():this},ag.invalidAt=function(){return $m(this).overflow},ag.isAfter=function(e,t){var n=Xm(e)?e:mf(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=gh(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},ag.isBefore=function(e,t){var n=Xm(e)?e:mf(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=gh(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},ag.isBetween=function(e,t,n,s){var r=Xm(e)?e:mf(e),a=Xm(t)?t:mf(t);return!!(this.isValid()&&r.isValid()&&a.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===s[1]?this.isBefore(a,n):!this.isAfter(a,n)))},ag.isSame=function(e,t){var n,s=Xm(e)?e:mf(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=gh(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},ag.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ag.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ag.isValid=function(){return Ym(this)},ag.lang=zf,ag.locale=Ff,ag.localeData=Bf,ag.max=pf,ag.min=hf,ag.parsingFlags=function(){return qm({},$m(this))},ag.set=function(e,t){if("object"==typeof e){var n,s=function(e){var t,n=[];for(t in e)Rm(e,t)&&n.push({unit:t,priority:vh[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=xh(e)),r=s.length;for(n=0;n<r;n++)this[s[n].unit](e[s[n].unit])}else if(sh(this[e=gh(e)]))return this[e](t);return this},ag.startOf=function(e){var t,n;if(void 0===(e=gh(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Hf:Vf,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Yf(t+(this._isUTC?0:this.utcOffset()*qf),Wf);break;case"minute":t=this._d.valueOf(),t-=Yf(t,qf);break;case"second":t=this._d.valueOf(),t-=Yf(t,Uf)}return this._d.setTime(t),Om.updateOffset(this,!0),this},ag.subtract=Pf,ag.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ag.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ag.toDate=function(){return new Date(this.valueOf())},ag.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?hh(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):sh(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",hh(n,"Z")):hh(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ag.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s="moment",r="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(ag[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ag.toJSON=function(){return this.isValid()?this.toISOString():null},ag.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ag.unix=function(){return Math.floor(this.valueOf()/1e3)},ag.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ag.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ag.eraName=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].name;if(s[e].until<=n&&n<=s[e].since)return s[e].name}return""},ag.eraNarrow=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].narrow;if(s[e].until<=n&&n<=s[e].since)return s[e].narrow}return""},ag.eraAbbr=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].abbr;if(s[e].until<=n&&n<=s[e].since)return s[e].abbr}return""},ag.eraYear=function(){var e,t,n,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return(this.year()-Om(r[e].since).year())*n+r[e].offset;return this.year()},ag.year=ap,ag.isLeapYear=function(){return Hh(this.year())},ag.weekYear=function(e){return Xf.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},ag.isoWeekYear=function(e){return Xf.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ag.quarter=ag.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ag.month=xp,ag.daysInMonth=function(){return cp(this.year(),this.month())},ag.week=ag.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ag.isoWeek=ag.isoWeeks=function(e){var t=Np(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ag.weeksInYear=function(){var e=this.localeData()._week;return kp(this.year(),e.dow,e.doy)},ag.weeksInWeekYear=function(){var e=this.localeData()._week;return kp(this.weekYear(),e.dow,e.doy)},ag.isoWeeksInYear=function(){return kp(this.year(),1,4)},ag.isoWeeksInISOWeekYear=function(){return kp(this.isoWeekYear(),1,4)},ag.date=Jf,ag.day=ag.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=op(this,"Day");return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ag.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ag.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ag.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ag.hour=ag.hours=Lp,ag.minute=ag.minutes=eg,ag.second=ag.seconds=sg,ag.millisecond=ag.milliseconds=ng,ag.utcOffset=function(e,t,n){var s,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=jf(Ph,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=kf(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),r!==e&&(!t||this._changeInProgress?Cf(this,Tf(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Om.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:kf(this)},ag.utc=function(e){return this.utcOffset(0,e)},ag.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(kf(this),"m")),this},ag.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=jf(Oh,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ag.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?mf(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ag.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ag.isLocal=function(){return!!this.isValid()&&!this._isUTC},ag.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ag.isUtc=Sf,ag.isUTC=Sf,ag.zoneAbbr=function(){return this._isUTC?"UTC":""},ag.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ag.dates=Jm("dates accessor is deprecated. Use date instead.",Jf),ag.months=Jm("months accessor is deprecated. Use month instead",xp),ag.years=Jm("years accessor is deprecated. Use year instead",ap),ag.zone=Jm("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ag.isDSTShifted=Jm("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!Fm(this._isDSTShifted))return this._isDSTShifted;var e,t={};return Km(t,this),(t=df(t))._a?(e=t._isUTC?Wm(t._a):mf(t._a),this._isDSTShifted=this.isValid()&&function(e,t){var n,s=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(n=0;n<s;n++)qh(e[n])!==qh(t[n])&&a++;return a+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var og=ah.prototype;function lg(e,t,n,s){var r=Hp(),a=Wm().set(s,t);return r[n](a,e)}function cg(e,t,n){if(zm(e)&&(t=e,e=void 0),e=e||"",null!=t)return lg(e,t,n,"month");var s,r=[];for(s=0;s<12;s++)r[s]=lg(e,s,n,"month");return r}function dg(e,t,n,s){"boolean"==typeof e?(zm(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,zm(t)&&(n=t,t=void 0),t=t||"");var r,a=Hp(),i=e?a._week.dow:0,o=[];if(null!=n)return lg(t,(n+i)%7,s,"day");for(r=0;r<7;r++)o[r]=lg(t,(r+i)%7,s,"day");return o}og.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return sh(s)?s.call(t,n):s},og.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(oh).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},og.invalidDate=function(){return this._invalidDate},og.ordinal=function(e){return this._ordinal.replace("%d",e)},og.preparse=ig,og.postformat=ig,og.relativeTime=function(e,t,n,s){var r=this._relativeTime[n];return sh(r)?r(e,t,n,s):r.replace(/%d/i,e)},og.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return sh(n)?n(t):n.replace(/%s/i,t)},og.set=function(e){var t,n;for(n in e)Rm(e,n)&&(sh(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},og.eras=function(e,t){var n,s,r,a=this._eras||Hp("en")._eras;for(n=0,s=a.length;n<s;++n){if("string"==typeof a[n].since)r=Om(a[n].since).startOf("day"),a[n].since=r.valueOf();switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":r=Om(a[n].until).startOf("day").valueOf(),a[n].until=r.valueOf()}}return a},og.erasParse=function(e,t,n){var s,r,a,i,o,l=this.eras();for(e=e.toUpperCase(),s=0,r=l.length;s<r;++s)if(a=l[s].name.toUpperCase(),i=l[s].abbr.toUpperCase(),o=l[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(i===e)return l[s];break;case"NNNN":if(a===e)return l[s];break;case"NNNNN":if(o===e)return l[s]}else if([a,i,o].indexOf(e)>=0)return l[s]},og.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?Om(e.since).year():Om(e.since).year()+(t-e.offset)*n},og.erasAbbrRegex=function(e){return Rm(this,"_erasAbbrRegex")||Kf.call(this),e?this._erasAbbrRegex:this._erasRegex},og.erasNameRegex=function(e){return Rm(this,"_erasNameRegex")||Kf.call(this),e?this._erasNameRegex:this._erasRegex},og.erasNarrowRegex=function(e){return Rm(this,"_erasNarrowRegex")||Kf.call(this),e?this._erasNarrowRegex:this._erasRegex},og.months=function(e,t){return e?Pm(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||mp).test(t)?"format":"standalone"][e.month()]:Pm(this._months)?this._months:this._months.standalone},og.monthsShort=function(e,t){return e?Pm(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[mp.test(t)?"format":"standalone"][e.month()]:Pm(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},og.monthsParse=function(e,t,n){var s,r,a;if(this._monthsParseExact)return fp.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=Wm([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},og.monthsRegex=function(e){return this._monthsParseExact?(Rm(this,"_monthsRegex")||vp.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Rm(this,"_monthsRegex")||(this._monthsRegex=pp),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},og.monthsShortRegex=function(e){return this._monthsParseExact?(Rm(this,"_monthsRegex")||vp.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Rm(this,"_monthsShortRegex")||(this._monthsShortRegex=hp),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},og.week=function(e){return Np(e,this._week.dow,this._week.doy).week},og.firstDayOfYear=function(){return this._week.doy},og.firstDayOfWeek=function(){return this._week.dow},og.weekdays=function(e,t){var n=Pm(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Sp(n,this._week.dow):e?n[e.day()]:n},og.weekdaysMin=function(e){return!0===e?Sp(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},og.weekdaysShort=function(e){return!0===e?Sp(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},og.weekdaysParse=function(e,t,n){var s,r,a;if(this._weekdaysParseExact)return Cp.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=Wm([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},og.weekdaysRegex=function(e){return this._weekdaysParseExact?(Rm(this,"_weekdaysRegex")||Op.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Rm(this,"_weekdaysRegex")||(this._weekdaysRegex=Dp),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},og.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(Rm(this,"_weekdaysRegex")||Op.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Rm(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ap),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},og.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(Rm(this,"_weekdaysRegex")||Op.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Rm(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mp),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},og.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},og.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},Yp("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===qh(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),Om.lang=Jm("moment.lang is deprecated. Use moment.locale instead.",Yp),Om.langData=Jm("moment.langData is deprecated. Use moment.localeData instead.",Hp);var ug=Math.abs;function mg(e,t,n,s){var r=Tf(t,n);return e._milliseconds+=s*r._milliseconds,e._days+=s*r._days,e._months+=s*r._months,e._bubble()}function hg(e){return e<0?Math.floor(e):Math.ceil(e)}function pg(e){return 4800*e/146097}function fg(e){return 146097*e/4800}function gg(e){return function(){return this.as(e)}}var xg=gg("ms"),vg=gg("s"),yg=gg("m"),bg=gg("h"),wg=gg("d"),jg=gg("w"),Ng=gg("M"),kg=gg("Q"),Sg=gg("y"),_g=xg;function Eg(e){return function(){return this.isValid()?this._data[e]:NaN}}var Tg=Eg("milliseconds"),Dg=Eg("seconds"),Ag=Eg("minutes"),Mg=Eg("hours"),Cg=Eg("days"),Og=Eg("months"),Pg=Eg("years");var Ig=Math.round,Rg={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Lg(e,t,n,s,r){return r.relativeTime(t||1,!!n,e,s)}var Fg=Math.abs;function zg(e){return(e>0)-(e<0)||+e}function Bg(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,r,a,i,o,l=Fg(this._milliseconds)/1e3,c=Fg(this._days),d=Fg(this._months),u=this.asSeconds();return u?(e=Uh(l/60),t=Uh(e/60),l%=60,e%=60,n=Uh(d/12),d%=12,s=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=u<0?"-":"",a=zg(this._months)!==zg(u)?"-":"",i=zg(this._days)!==zg(u)?"-":"",o=zg(this._milliseconds)!==zg(u)?"-":"",r+"P"+(n?a+n+"Y":"")+(d?a+d+"M":"")+(c?i+c+"D":"")+(t||e||l?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(l?o+s+"S":"")):"P0D"}var Ug=xf.prototype;function qg(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function Wg(e){const t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let n="";for(const[s,r]of t)for(;e>=s;)n+=r,e-=s;return n}Ug.isValid=function(){return this._isValid},Ug.abs=function(){var e=this._data;return this._milliseconds=ug(this._milliseconds),this._days=ug(this._days),this._months=ug(this._months),e.milliseconds=ug(e.milliseconds),e.seconds=ug(e.seconds),e.minutes=ug(e.minutes),e.hours=ug(e.hours),e.months=ug(e.months),e.years=ug(e.years),this},Ug.add=function(e,t){return mg(this,e,t,1)},Ug.subtract=function(e,t){return mg(this,e,t,-1)},Ug.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=gh(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+pg(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(fg(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},Ug.asMilliseconds=xg,Ug.asSeconds=vg,Ug.asMinutes=yg,Ug.asHours=bg,Ug.asDays=wg,Ug.asWeeks=jg,Ug.asMonths=Ng,Ug.asQuarters=kg,Ug.asYears=Sg,Ug.valueOf=_g,Ug._bubble=function(){var e,t,n,s,r,a=this._milliseconds,i=this._days,o=this._months,l=this._data;return a>=0&&i>=0&&o>=0||a<=0&&i<=0&&o<=0||(a+=864e5*hg(fg(o)+i),i=0,o=0),l.milliseconds=a%1e3,e=Uh(a/1e3),l.seconds=e%60,t=Uh(e/60),l.minutes=t%60,n=Uh(t/60),l.hours=n%24,i+=Uh(n/24),o+=r=Uh(pg(i)),i-=hg(fg(r)),s=Uh(o/12),o%=12,l.days=i,l.months=o,l.years=s,this},Ug.clone=function(){return Tf(this)},Ug.get=function(e){return e=gh(e),this.isValid()?this[e+"s"]():NaN},Ug.milliseconds=Tg,Ug.seconds=Dg,Ug.minutes=Ag,Ug.hours=Mg,Ug.days=Cg,Ug.weeks=function(){return Uh(this.days()/7)},Ug.months=Og,Ug.years=Pg,Ug.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,r=!1,a=Rg;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(a=Object.assign({},Rg,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),s=function(e,t,n,s){var r=Tf(e).abs(),a=Ig(r.as("s")),i=Ig(r.as("m")),o=Ig(r.as("h")),l=Ig(r.as("d")),c=Ig(r.as("M")),d=Ig(r.as("w")),u=Ig(r.as("y")),m=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||i<=1&&["m"]||i<n.m&&["mm",i]||o<=1&&["h"]||o<n.h&&["hh",o]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(m=m||d<=1&&["w"]||d<n.w&&["ww",d]),(m=m||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,m[3]=+e>0,m[4]=s,Lg.apply(null,m)}(this,!r,a,n=this.localeData()),r&&(s=n.pastFuture(+this,s)),n.postformat(s)},Ug.toISOString=Bg,Ug.toString=Bg,Ug.toJSON=Bg,Ug.locale=Ff,Ug.localeData=Bf,Ug.toIsoString=Jm("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Bg),Ug.lang=zf,uh("X",0,0,"unix"),uh("x",0,0,"valueOf"),Fh("x",Ch),Fh("X",/[+-]?\d+(\.\d{1,3})?/),$h("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),$h("x",function(e,t,n){n._d=new Date(qh(e))}),
//! moment.js
Om.version="2.30.1",Em=mf,Om.fn=ag,Om.min=function(){return ff("isBefore",[].slice.call(arguments,0))},Om.max=function(){return ff("isAfter",[].slice.call(arguments,0))},Om.now=function(){return Date.now?Date.now():+new Date},Om.utc=Wm,Om.unix=function(e){return mf(1e3*e)},Om.months=function(e,t){return cg(e,t,"months")},Om.isDate=Bm,Om.locale=Yp,Om.invalid=Vm,Om.duration=Tf,Om.isMoment=Xm,Om.weekdays=function(e,t,n){return dg(e,t,n,"weekdays")},Om.parseZone=function(){return mf.apply(null,arguments).parseZone()},Om.localeData=Hp,Om.isDuration=vf,Om.monthsShort=function(e,t){return cg(e,t,"monthsShort")},Om.weekdaysMin=function(e,t,n){return dg(e,t,n,"weekdaysMin")},Om.defineLocale=Vp,Om.updateLocale=function(e,t){if(null!=t){var n,s,r=zp;null!=Bp[e]&&null!=Bp[e].parentLocale?Bp[e].set(rh(Bp[e]._config,t)):(null!=(s=$p(e))&&(r=s._config),t=rh(r,t),null==s&&(t.abbr=e),(n=new ah(t)).parentLocale=Bp[e],Bp[e]=n),Yp(e)}else null!=Bp[e]&&(null!=Bp[e].parentLocale?(Bp[e]=Bp[e].parentLocale,e===Yp()&&Yp(e)):null!=Bp[e]&&delete Bp[e]);return Bp[e]},Om.locales=function(){return eh(Bp)},Om.weekdaysShort=function(e,t,n){return dg(e,t,n,"weekdaysShort")},Om.normalizeUnits=gh,Om.relativeTimeRounding=function(e){return void 0===e?Ig:"function"==typeof e&&(Ig=e,!0)},Om.relativeTimeThreshold=function(e,t){return void 0!==Rg[e]&&(void 0===t?Rg[e]:(Rg[e]=t,"s"===e&&(Rg.ss=t-1),!0))},Om.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},Om.prototype=ag,Om.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const $g=function(){const e=[];let t=1;const n=new Date("2025-09-25T00:00:00"),s=new Date("2026-01-12T00:00:00");for(let r=new Date(n);r.getTime()<=s.getTime();r.setDate(r.getDate()+14)){const n=qg(r);"2026-01-01"!==n&&(e.push({id:`biweekly-touchbase-${n}`,title:`Biweekly Touchbase ${Wg(t)}`,date:n,time:"18:00",endTime:"19:00",location:"FS QDS Teams Server",description:"Its time for updates on the sprint! We get in touch with the active project teams and help them move a step closer to their goals. The clock is ticking. The demo day approaches soon.",type:"meetup",organizer:"FS Quant & Data Science",tags:["biweekly","touchbase"]}),t+=1)}return e.find(e=>"2026-01-12"===e.date)||e.push({id:"biweekly-touchbase-2026-01-12",title:`Biweekly Touchbase ${Wg(t)}`,date:"2026-01-12",time:"18:00",endTime:"19:00",location:"FS QDS Teams Server",description:"Its time for updates on the sprint! We get in touch with the active project teams and help them move a step closer to their goals. The clock is ticking. The demo day approaches soon.",type:"meetup",organizer:"FS Quant & Data Science",tags:["biweekly","touchbase"]}),e}(),Yg=[{id:"ws25-launch-2359",title:"Season WS25 FS QDS Battleground begins!",date:"2025-09-13",time:"23:59",endTime:"23:59",location:"Online",description:"Winter Semester 2025 Battleground season kickoff. Prepare your strategies and get ready to compete!",type:"competition",organizer:"FS Quant & Data Science",tags:["battleground","ws25","launch"]},{id:"ws25-agenda-2100",title:"Agenda for WS25 goes live!",date:"2025-09-13",time:"21:00",endTime:"22:00",location:"Frankfurt School",description:"Detailed WS25 schedule, milestones, and participation guide published.",type:"meetup",organizer:"FS Quant & Data Science",tags:["agenda","ws25"]},{id:"event-001",title:"Introduction to Quantitative Finance",date:"2025-02-15",time:"14:00",endTime:"17:00",location:"Frankfurt School, Room 201",description:"Learn the fundamentals of quantitative finance, risk modeling, and algorithmic trading strategies",type:"workshop",organizer:"FS Quant & Data Science",registrationLink:"https://fs-students.de/events/quant-finance",capacity:30,tags:["quantitative-finance","python","beginner-friendly"]},{id:"event-002",title:"Data Science Career Night with McKinsey",date:"2025-02-20",time:"18:00",endTime:"20:30",location:"Frankfurt School, Audimax",description:"Join us for an evening with McKinsey data scientists discussing career opportunities and real-world projects",type:"speaker",organizer:"FS Quant & Data Science",capacity:100,tags:["career","networking","mckinsey"]},{id:"event-003",title:"Hack the DAX - Trading Competition",date:"2025-03-01",time:"09:00",endTime:"18:00",location:"Frankfurt School, Trading Lab",description:"Annual trading competition - build and test your algorithmic trading strategies on real market data",type:"competition",organizer:"FS Quant & Data Science",registrationLink:"https://fs-students.de/events/hack-the-dax",capacity:50,tags:["competition","trading","prizes"]},{id:"event-004",title:"Machine Learning Study Group",date:"2025-02-25",time:"16:00",endTime:"18:00",location:"Frankfurt School, Library Study Room 3",description:"Weekly study group for machine learning enthusiasts. This week: Neural Networks and Deep Learning",type:"meetup",organizer:"FS Quant & Data Science",capacity:20,tags:["study-group","machine-learning","deep-learning"]},{id:"event-005",title:"Kickoff Meeting - FS Quant & Data Science Initiative",date:"2025-09-13",time:"20:15",endTime:"20:45",location:"Frankfurt School Campus",description:"Join us for the kickoff meeting of the initiative. Meet the team, learn about divisions, and how to get involved.",type:"meetup",organizer:"FS Quant & Data Science"},{id:"event-006",title:"Community Life Fair",date:"2025-09-02",time:"17:00",endTime:"20:00",location:"Outside Audimax",description:"Discover campus clubs and initiatives at the Community Life Fair.",type:"meetup",organizer:"Frankfurt School Student Life"},...$g,{id:"adx-donnerstag-2025-10-02",title:"Axe the DAX Donnerstag",date:"2025-10-02",time:"18:00",endTime:"20:00",location:"S3.08",description:"A classic FS QDS Market Making Session! We will be simulating a live trading floor through a gamified style. Teams organize themselves into realistic fund team structure comprising PM, Analyst, Quant and Macro Specialist. Formulate trade ideas from market open to closing auction. This is great practice for those wanting to get into trading firms.",type:"exclusive",organizer:"FS Quant & Data Science",image:"/AXE THE DAX DONNERSTAG.png",tags:["adx","trading","auction","options"]},{id:"macro-montag-2025-11-03",title:"Macro Montag",date:"2025-11-03",time:"18:00",endTime:"20:00",location:"S3.09",description:"We will be going through some stocks and macroeconomic indicators for the economy! We combine quantitative and macroeconomic analysis to generate trade ideas. A session suited for those that want to invest, have a stock in mind, or just want to see what others come up with. We will be pitching stocks to each other and analyzing them together. \n\nA great practice for anyone aiming to work in Finance!",type:"exclusive",organizer:"FS Quant & Data Science",image:"/MACRO MONTAG.png",tags:["macro","markets","discussion"]},{id:"trader-math-session-2025-11-27",title:"TraderMath Session",date:"2025-11-27",time:"18:00",endTime:"20:00",location:"S1.12",description:"A competitive solving session that will be good practice if you want to get into trading. Please bring your laptop. We will be announcing the questions on the day of the event. Please do not do them before the event. Depending on your score you get badges on our HTI leaderboard worth more points than the typical question. See you there!",type:"exclusive",organizer:"FS Quant & Data Science",image:"/TRADER MATH SESSION.png",tags:["options","math","competition"]},{id:"finale-demo-day-2026-tba",title:"Finale Demo Day",date:"2026-01-14",time:"18:00",endTime:"21:00",location:"0.03",description:"It's to showcase your projects to our jury. Win prizes and recognition that you deserve!",type:"exclusive",organizer:"FS Quant & Data Science",tags:["demo-day","prizes"]}],Vg=[{id:"past-001",title:"Data Science Career Panel",date:"2024-01-10",time:"18:00",endTime:"20:00",location:"Frankfurt School, Audimax",description:"Industry professionals discuss career paths in data science",type:"speaker",organizer:"FS Quant & Data Science",tags:["career","networking"]},{id:"past-002",title:"Quantitative Trading Strategies Workshop",date:"2024-01-25",time:"15:00",endTime:"18:00",location:"Frankfurt School, Trading Lab",description:"Learn about algorithmic trading and backtesting strategies",type:"workshop",organizer:"FS Quant & Data Science",tags:["trading","finance","python"]}];const Hg=ye,Gg=ve,Kg=Je.forwardRef(({className:e,...t},n)=>X.jsx(he,{ref:n,className:Pa("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Kg.displayName=he.displayName;const Qg=Je.forwardRef(({className:e,children:t,...n},s)=>X.jsxs(Gg,{children:[X.jsx(Kg,{}),X.jsxs(pe,{ref:s,className:Pa("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,X.jsxs(fe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[X.jsx(os,{className:"h-4 w-4"}),X.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qg.displayName=pe.displayName;const Xg=({className:e,...t})=>X.jsx("div",{className:Pa("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Xg.displayName="DialogHeader";const Zg=Je.forwardRef(({className:e,...t},n)=>X.jsx(ge,{ref:n,className:Pa("text-lg font-semibold leading-none tracking-tight",e),...t}));Zg.displayName=ge.displayName;Je.forwardRef(({className:e,...t},n)=>X.jsx(xe,{ref:n,className:Pa("text-sm text-muted-foreground",e),...t})).displayName=xe.displayName;const Jg=function(e){function t(t,n){var s,r,a=e(t).local(),i=e(n).local();if(!e.tz)return a.toDate().getTimezoneOffset()-i.toDate().getTimezoneOffset();var o=null!==(s=null==a||null===(r=a._z)||void 0===r?void 0:r.name)&&void 0!==s?s:e.tz.guess();return e.tz.zone(o).utcOffset(+a)-e.tz.zone(o).utcOffset(+i)}function n(t,n,s){var r=Cm(s);return[r?e(t).startOf(r):e(t),r?e(n).startOf(r):e(n),r]}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Cm(arguments.length>1?arguments[1]:void 0);return n?e(t).startOf(n).toDate():e(t).toDate()}function r(e,t,s){var r=qi(n(e,t,s),3),a=r[0],i=r[1],o=r[2];return a.isSame(i,o)}function a(e,t,s){var r=qi(n(e,t,s),3),a=r[0],i=r[1],o=r[2];return a.isSameOrBefore(i,o)}function i(t,n,s){var r=Cm(s);return e(t).add(n,r).toDate()}function o(t,n){var s=Cm(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),r=e(t);return e(n).diff(r,s)}function l(t){return e(t).startOf("month").startOf("week").toDate()}function c(t){return e(t).endOf("month").endOf("week").toDate()}function d(t,n){var s=e(t),r=e(n);return e.duration(r.diff(s)).days()}return new tu({formats:Mm,firstOfWeek:function(t){var n=t?e.localeData(t):e.localeData();return n?n.firstDayOfWeek():0},firstVisibleDay:l,lastVisibleDay:c,visibleDays:function(e){for(var t=l(e),n=c(e),s=[];a(t,n);)s.push(t),t=i(t,1,"d");return s},format:function(t,n,s){return(r=e(t),a=s,a?r.locale(a):r).format(n);var r,a},lt:function(e,t,s){var r=qi(n(e,t,s),3),a=r[0],i=r[1],o=r[2];return a.isBefore(i,o)},lte:a,gt:function(e,t,s){var r=qi(n(e,t,s),3),a=r[0],i=r[1],o=r[2];return a.isAfter(i,o)},gte:function(e,t,s){var r=qi(n(e,t,s),3),a=r[0],i=r[1],o=r[2];return a.isSameOrBefore(i,o)},eq:r,neq:function(e,t,n){return!r(e,t,n)},merge:function(t,n){if(!t&&!n)return null;var s=e(n).format("HH:mm:ss"),r=e(t).startOf("day").format("MM/DD/YYYY");return e("".concat(r," ").concat(s),"MM/DD/YYYY HH:mm:ss").toDate()},inRange:function(t,n,s){var r=Cm(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day"),a=e(t),i=e(n),o=e(s);return a.isBetween(i,o,r,"[]")},startOf:s,endOf:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Cm(arguments.length>1?arguments[1]:void 0);return n?e(t).endOf(n).toDate():e(t).toDate()},range:function(t,n){for(var s=Cm(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),r=e(t).toDate(),o=[];a(r,n);)o.push(r),r=i(r,1,s);return o},add:i,diff:o,ceil:function(e,t){var n=Cm(t),a=s(e,n);return r(a,e)?a:i(a,1,n)},min:function(t,n){var s=e(t),r=e(n);return e.min(s,r).toDate()},max:function(t,n){var s=e(t),r=e(n);return e.max(s,r).toDate()},minutes:function(t){return e(t).minutes()},getSlotDate:function(t,n,s){return e(t).startOf("day").minute(n+s).toDate()},getTimezoneOffset:function(t){return e(t).toDate().getTimezoneOffset()},getDstOffset:t,getTotalMin:function(e,t){return o(e,t,"minutes")},getMinutesFromMidnight:function(n){var s=e(n).startOf("day");return e(n).diff(s,"minutes")+function(n){return t(e(n).startOf("day"),n)}(n)},continuesPrior:function(t,n){var s=e(t),r=e(n);return s.isBefore(r,"day")},continuesAfter:function(t,n,s){var r=e(n),a=e(s);return r.isSameOrAfter(a,"minutes")},sortEvents:function(e){var t=e.evtA,n=t.start,r=t.end,a=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,u=+s(n,"day")-+s(o,"day"),m=d(n,r),h=d(o,l);return u||h-m||!!c-!!a||+n-+o||+r-+l},inEventRange:function(t){var n=t.event,s=n.start,r=n.end,a=t.range,i=a.start,o=a.end,l=e(s).startOf("day"),c=e(r),d=e(i),u=e(o),m=l.isSameOrBefore(u,"day"),h=!l.isSame(c,"minutes")?c.isAfter(d,"minutes"):c.isSameOrAfter(d,"minutes");return m&&h},isSameDate:function(t,n){var s=e(t),r=e(n);return s.isSame(r,"day")},daySpan:d,browserTZOffset:function(){var t=new Date,n=/-/.test(t.toString())?"-":"",s=t.getTimezoneOffset(),r=Number("".concat(n).concat(Math.abs(s)));return e().utcOffset()>r?1:0}})}
//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(Om),ex=()=>{const[e,t]=Je.useState(null),[n,s]=Je.useState("month"),r=function(e){return e.map(e=>{const t=new Date(e.date),n=new Date(e.date);if(e.time){const[n,s]=e.time.split(":");t.setHours(parseInt(n),parseInt(s))}if(e.endTime){const[t,s]=e.endTime.split(":");n.setHours(parseInt(t),parseInt(s))}else e.time&&n.setTime(t.getTime()+72e5);return{id:e.id,title:e.title,start:t,end:n,location:e.location,description:e.description,type:e.type,organizer:e.organizer,allDay:!e.time}})}([...Yg,...Vg]),a=Je.useCallback(e=>{t(e)},[]);return X.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg overflow-hidden shadow-md",children:[X.jsx(Dm,{localizer:Jg,events:r,startAccessor:"start",endAccessor:"end",style:{height:600},views:["month","week","day","agenda"],defaultView:Md.MONTH,onSelectEvent:a,eventPropGetter:e=>{let t={backgroundColor:"#f8f9fa",borderRadius:"4px",opacity:.9,color:"#3c4043",border:"0",display:"block",fontWeight:"500"};switch(e.type){case"workshop":t.backgroundColor="#0B3D91",t.color="#ffffff";break;case"speaker":t.backgroundColor="#00A6ED",t.color="#ffffff";break;case"competition":t.backgroundColor="#FFC107",t.color="#0B3D91";break;case"meetup":t.backgroundColor="#28A745",t.color="#ffffff";break;case"exclusive":t.backgroundColor="#6B21A8",t.color="#ffffff";break;default:t.backgroundColor="#6c757d",t.color="#ffffff"}return{style:t}},components:{toolbar:e=>X.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center p-4 mb-4 bg-neutral-50",children:[X.jsx("div",{className:"mb-4 md:mb-0",children:X.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:e.label})}),X.jsxs("div",{className:"flex space-x-2 mb-4 md:mb-0",children:[X.jsxs(Ni,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("PREV")},children:[X.jsx("i",{className:"fas fa-chevron-left mr-1"})," Prev"]}),X.jsx(Ni,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("TODAY")},children:"Today"}),X.jsxs(Ni,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("NEXT")},children:["Next ",X.jsx("i",{className:"fas fa-chevron-right ml-1"})]})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx(Ni,{variant:"outline",className:"month"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{s("month"),e.onView("month")},children:"Month"}),X.jsx(Ni,{variant:"outline",className:"week"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{s("week"),e.onView("week")},children:"Week"}),X.jsx(Ni,{variant:"outline",className:"day"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{s("day"),e.onView("day")},children:"Day"}),X.jsx(Ni,{variant:"outline",className:"agenda"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{s("agenda"),e.onView("agenda")},children:"Agenda"})]})]})},className:"text-neutral-700"}),e&&X.jsx(Hg,{open:!!e,onOpenChange:e=>!e&&t(null),children:X.jsxs(Qg,{className:"bg-white text-neutral-700 border-neutral-200",children:[X.jsx(Xg,{children:X.jsx(Zg,{className:"text-lg font-semibold text-neutral-900",children:e.title})}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${(i=e.type,{workshop:"bg-[#0B3D91] text-white",speaker:"bg-blue-500 text-white",competition:"bg-[#FFC107] text-[#0B3D91]",meetup:"bg-green-500 text-white",conference:"bg-indigo-600 text-white",exclusive:"bg-[#6B21A8] text-white"}[i]||"bg-gray-500 text-white").split(" ")[0]}`}),X.jsx("span",{className:"capitalize",children:e.type})]}),X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-calendar-alt text-neutral-400 mt-1 mr-2 w-5"}),X.jsxs("div",{children:[X.jsx("div",{children:Om(e.start).format("dddd, MMMM D, YYYY")}),!e.allDay&&X.jsxs("div",{className:"text-neutral-400",children:[Om(e.start).format("h:mm A")," - ",Om(e.end).format("h:mm A")]})]})]}),e.location&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-map-marker-alt text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.location})]}),e.description&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-align-left text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.description})]}),e.organizer&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-user text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.organizer})]})]}),X.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2",children:[X.jsxs(Ni,{variant:"outline",className:"border-[#0B3D91] text-[#0B3D91] hover:bg-[#0B3D91] hover:text-white bg-white",onClick:()=>(e=>{const t=bi(e),n=new Blob([t],{type:"text/calendar;charset=utf-8"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.setAttribute("download",`${e.title.replace(/\s+/g,"-")}.ics`),document.body.appendChild(r),r.click(),document.body.removeChild(r)})(e),children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," Add to Calendar (iCal)"]}),X.jsxs(Ni,{variant:"outline",className:"bg-[#0B3D91] text-white hover:bg-[#0A357F] border-[#0B3D91]",onClick:()=>window.open(wi(e),"_blank"),children:[X.jsx("i",{className:"fab fa-google mr-2"})," Add to Google Calendar"]})]})]})]})})]});var i},tx=()=>{const{t:e}=oi(),t=function(){const e=new Date;return e.setHours(0,0,0,0),Yg.filter(t=>new Date(t.date)>=e).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}();return X.jsx("section",{id:"events",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("eventsTitle")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("eventsSubtitle")})]}),X.jsxs("div",{className:"mb-12 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[X.jsx("h3",{className:"text-xl font-inter font-semibold mb-4 text-gray-800",children:e("events.calendar")}),X.jsx(ex,{}),X.jsx("div",{className:"mt-3 text-right text-sm",children:X.jsx("span",{className:"text-gray-500 italic",children:e("events.newEventsComingSoon")})})]}),t.length>0?X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:t.map(e=>X.jsx(ki,{event:e},e.id))}):X.jsxs("div",{className:"text-center py-12 mb-16 bg-blue-50 rounded-lg",children:[X.jsx("i",{className:"fas fa-calendar-check text-4xl text-blue-400 mb-4"}),X.jsx("p",{className:"text-gray-600",children:e("noUpcomingEvents")})]}),X.jsxs("div",{className:"mt-16",children:[X.jsxs("div",{className:"text-center mb-12",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-4 text-gray-800",children:e("events.pastCollaborations")}),X.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:e("events.pastCollaborationsDescription")})]}),X.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-8 border border-gray-200",children:X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:[{name:"DWS Group",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/DWS_Group_202x_logo.svg/250px-DWS_Group_202x_logo.svg.png"},{name:"Tableau",logo:"https://logos-world.net/wp-content/uploads/2021/10/Tableau-Logo.png"},{name:"Deloitte",logo:"https://upload.wikimedia.org/wikipedia/commons/e/ed/Logo_of_Deloitte.svg"},{name:"Google",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/250px-Google_2015_logo.svg.png"},{name:"McKinsey",logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSNN12aWh7ruc5rs0kAhGfaUkOyW0tuypaPLg&s"},{name:"Statworx",logo:"https://statistik-und-beratung.de/wp-content/uploads/2021/04/logo-statworx-data-science-dark.png"},{name:"IKEA",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Ikea_logo.svg/250px-Ikea_logo.svg.png"},{name:"BCG",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Boston_Consulting_Group_2020_logo.svg/250px-Boston_Consulting_Group_2020_logo.svg.png"},{name:"EY",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/EY_logo_2019.svg/200px-EY_logo_2019.svg.png"},{name:"KPMG",logo:"https://upload.wikimedia.org/wikipedia/commons/d/db/KPMG_blue_logo.svg"},{name:"Commerzbank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Commerzbank_%282009%29.svg/250px-Commerzbank_%282009%29.svg.png"}].map((e,t)=>X.jsx("div",{className:"flex items-center justify-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:X.jsx("img",{src:e.logo,alt:e.name,className:"max-h-12 max-w-full object-contain filter grayscale hover:grayscale-0 transition-all",onError:t=>{const n=t.target;n.style.display="none";const s=n.parentElement;s&&(s.innerHTML=`<div class="text-gray-600 font-semibold">${e.name}</div>`)}})},t))})})]})]})})};function nx(...e){return at(it(e))}function sx({className:e,...t}){return X.jsx(be,{"data-slot":"tabs",className:nx("flex flex-col gap-2",e),...t})}function rx({className:e,...t}){return X.jsx(we,{"data-slot":"tabs-list",className:nx("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function ax({className:e,...t}){return X.jsx(je,{"data-slot":"tabs-trigger",className:nx("data-[state=active]:bg-[var(--card)] dark:data-[state=active]:text-[var(--foreground)] focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground dark:text-muted-foreground inline-flex h-full flex-1 items-center justify-center gap-1.5 rounded-xl px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ix({className:e,...t}){return X.jsx(Ne,{"data-slot":"tabs-content",className:nx("flex-1 outline-none",e),...t})}const ox=Oa("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function lx({className:e,variant:t,asChild:n=!1,...s}){const r=n?me:"span";return X.jsx(r,{"data-slot":"badge",className:nx(ox({variant:t}),e),...s})}function cx(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const s=n.reduce((t,{useScope:n,scopeName:s})=>({...t,...n(e)[`__scope${s}`]}),{});return Je.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var dx="Progress",[ux,mx]=function(e,t=[]){let n=[];const s=()=>{const t=n.map(e=>Je.createContext(e));return function(n){const s=(null==n?void 0:n[e])||t;return Je.useMemo(()=>({[`__scope${e}`]:{...n,[e]:s}}),[n,s])}};return s.scopeName=e,[function(t,s){const r=Je.createContext(s),a=n.length;function i(t){const{scope:n,children:s,...i}=t,o=(null==n?void 0:n[e][a])||r,l=Je.useMemo(()=>i,Object.values(i));return X.jsx(o.Provider,{value:l,children:s})}return n=[...n,s],i.displayName=t+"Provider",[i,function(n,i){const o=(null==i?void 0:i[e][a])||r,l=Je.useContext(o);if(l)return l;if(void 0!==s)return s;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},cx(s,...t)]}(dx),[hx,px]=ux(dx),fx=Je.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:a=vx,...i}=e;(r||0===r)&&wx(r);const o=wx(r)?r:100;null!==s&&jx(s,o);const l=jx(s,o)?s:null,c=bx(l)?a(l,o):void 0;return X.jsx(hx,{scope:n,value:l,max:o,children:X.jsx(ne.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":bx(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":yx(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});fx.displayName=dx;var gx="ProgressIndicator",xx=Je.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,r=px(gx,n);return X.jsx(ne.div,{"data-state":yx(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:t})});function vx(e,t){return`${Math.round(e/t*100)}%`}function yx(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function bx(e){return"number"==typeof e}function wx(e){return bx(e)&&!isNaN(e)&&e>0}function jx(e,t){return bx(e)&&!isNaN(e)&&e<=t&&e>=0}xx.displayName=gx;var Nx=fx,kx=xx;function Sx({className:e,value:t,...n}){return X.jsx(Nx,{"data-slot":"progress",className:nx("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:X.jsx(kx,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function _x({className:e,...t}){return X.jsx("div",{"data-slot":"card",className:nx("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Ex({className:e,...t}){return X.jsx("div",{"data-slot":"card-header",className:nx("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Tx({className:e,...t}){return X.jsx("h4",{"data-slot":"card-title",className:nx("leading-none",e),...t})}function Dx({className:e,...t}){return X.jsx("div",{"data-slot":"card-content",className:nx("px-6 [&:last-child]:pb-6",e),...t})}const Ax=Oa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Mx({className:e,variant:t,size:n,asChild:s=!1,...r}){const a=s?me:"button";return X.jsx(a,{"data-slot":"button",className:nx(Ax({variant:t,size:n,className:e})),...r})}function Cx({...e}){return X.jsx(ke,{"data-slot":"select",...e})}function Ox({...e}){return X.jsx(Se,{"data-slot":"select-value",...e})}function Px({className:e,size:t="default",children:n,...s}){return X.jsxs(_e,{"data-slot":"select-trigger","data-size":t,className:nx("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s,children:[n,X.jsx(Ee,{asChild:!0,children:X.jsx(Tn,{className:"size-4 opacity-50"})})]})}function Ix({className:e,children:t,position:n="popper",...s}){return X.jsx(Te,{children:X.jsxs(De,{"data-slot":"select-content",className:nx("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[X.jsx(Lx,{}),X.jsx(Ae,{className:nx("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),X.jsx(Fx,{})]})})}function Rx({className:e,children:t,...n}){return X.jsxs(Me,{"data-slot":"select-item",className:nx("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[X.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:X.jsx(Ce,{children:X.jsx(En,{className:"size-4"})})}),X.jsx(Oe,{children:t})]})}function Lx({className:e,...t}){return X.jsx(Pe,{"data-slot":"select-scroll-up-button",className:nx("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(Mn,{className:"size-4"})})}function Fx({className:e,...t}){return X.jsx(Ie,{"data-slot":"select-scroll-down-button",className:nx("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(Tn,{className:"size-4"})})}function zx(e){if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e){const t=e.trim();if(""===t)return null;const n=Number(t);return Number.isFinite(n)?n:null}return null}function Bx(e,t=2,n=""){const s=zx(e);return null===s?n:s.toFixed(t)}function Ux(e,t=2,n=""){const s=zx(e);if(null===s)return n;return`${s>=0?"+":""}${s.toFixed(t)}`}function qx(e,t=2,n="",s=""){const r=zx(e);return null===r?s:`${n}${r.toFixed(t)}`}function Wx(e,t=1,n=!1,s="%"){const r=zx(e);if(null===r)return s;return`${n&&r>=0?"+":""}${r.toFixed(t)}%`}function $x(e,t=0){const n=zx(e);return null===n?t:n}const Yx={AIR:"/public-logos/AIR.png",ALV:"/public-logos/ALV.png",BMW:"/public-logos/BMW.png",BNR:"/public-logos/BNR.png",DBK:"/public-logos/DBK.png",DTE:"/public-logos/DTE.png",ENR:"/public-logos/ENR.png",MUV2:"/public-logos/MUV2.png",RHM:"/public-logos/RHM.png",SIE:"/public-logos/SIE.png",SY1:"/public-logos/SY1.png",ZAL:"/public-logos/ZAL.png",IFX:"/public-logos/IFX.png",MBG:"/public-logos/MBG.png",MRK:"/public-logos/MRK.png",DHL:"/public-logos/DHL.png",SAP:"/public-logos/SAP.png",VOW3:"/public-logos/VW.png"},Vx={};function Hx(e){const t=String(e||"").toUpperCase().trim();return(t.includes(".")?t.split(".")[0]:t).replace(/[^A-Z0-9]/g,"")}const Gx={SIE:"https://cdn.brandfetch.io/id6kfFgTVj/w/180/h/180/theme/dark/logo.png?c=1bxid64Mup7aczewSAYMX&t=1753665761846",DTE:"https://www.telekom.com/resource/blob/1002342/12f9f204ed4293439e1c93f7851ae186/dl-telekom-logo-01-data.jpg",AIR:"https://companieslogo.com/img/orig/AIR.PA-9f3a3975.png?t=1720244490",ALV:"https://www.allianz-partners.com/content/onemarketing/awp/azpartnerscom/de_DE.thumb.1280.1280.png?ck=1757401290",RHM:"https://s3-symbol-logo.tradingview.com/rheinmetall-ag--600.png",ENR:"https://indcdn.indmoney.com/cdn-cgi/image/quality=90,format=auto,metadata=copyright,width=500/https://indcdn.indmoney.com/public/images/INDS37201.png",MUV2:"https://companieslogo.com/img/orig/MUV2.DE-6afaafb5.png?t=1720244493",SY1:"https://rest.arbeitsagentur.de/vermittlung/ag-darstellung-service/ct/v1/arbeitgeberlogo/4JLqgedHX82_0OO-z88rTtZAcYiMJrbi3lAXG2vhNTQ=",BNR:"https://cdn.zonebourse.com/static/instruments-logo-39434198",ZAL:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShrYV4IQNnjg9tA-LdOAfj7jGiRbcmV293Lw&s",BMW:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BMW.svg/2048px-BMW.svg.png",DB:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Deutsche_Bank_logo_without_wordmark.svg/2048px-Deutsche_Bank_logo_without_wordmark.svg.png",SIEGY:"https://logo.clearbit.com/siemens.com",EADSY:"https://logo.clearbit.com/airbus.com",DTEGY:"https://logo.clearbit.com/telekom.com",ALIZF:"https://logo.clearbit.com/allianz.com",SMNEY:"https://logo.clearbit.com/siemens-energy.com",MURGY:"https://logo.clearbit.com/munichre.com",DBK:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Deutsche_Bank_logo_without_wordmark.svg/2048px-Deutsche_Bank_logo_without_wordmark.svg.png",BMWYY:"https://logo.clearbit.com/bmwgroup.com",MUV:"https://companieslogo.com/img/orig/MUV2.DE-6afaafb5.png?t=1720244493",SY:"https://rest.arbeitsagentur.de/vermittlung/ag-darstellung-service/ct/v1/arbeitgeberlogo/4JLqgedHX82_0OO-z88rTtZAcYiMJrbi3lAXG2vhNTQ=",DEFAULT:"/placeholder-logo.png"};async function Kx(e){var t,n,s;const r=String(e||"").toUpperCase(),a=Hx(r),i=Yx||{};let o=i[a];if(o||r===a||(o=i[r]),"string"==typeof o&&o.length>0){if(o.startsWith("/")){let e="";if(o.startsWith("/public-logos/")?e=o.replace("/public-logos/",""):o.startsWith("/storage/v1/object/public/public-logos/")&&(e=o.replace("/storage/v1/object/public/public-logos/","")),e){const n=ni.storage.from("public-logos").getPublicUrl(e);if(null==(t=null==n?void 0:n.data)?void 0:t.publicUrl){const e=await async function(e){var t,n,s,r;try{if("true"!==String((null==(n=null==(t=import.meta)?void 0:t.env)?void 0:n.VITE_LOGO_SIGN)??"false").toLowerCase())return null;let a="";if(e.startsWith("/public-logos/"))a=e.replace("/public-logos/","");else{if(!e.startsWith("/storage/v1/object/public/public-logos/"))return null;a=e.replace("/storage/v1/object/public/public-logos/","")}const i=`public-logos/${a}`,o=Date.now(),l=Vx[i];if(l&&l.expiresAt>o)return l.url;const c=Number((null==(r=null==(s=import.meta)?void 0:s.env)?void 0:r.VITE_LOGO_SIGN_TTL_SEC)??604800),d=Math.max(60,Math.min(604800,Number.isFinite(c)?c:604800)),{data:u,error:m}=await ni.storage.from("public-logos").createSignedUrl(a,d);return m||!(null==u?void 0:u.signedUrl)?null:(Vx[i]={url:u.signedUrl,expiresAt:o+1e3*d},u.signedUrl)}catch{return null}}(o);return e||n.data.publicUrl}}const r=((null==(s=null==(n=import.meta)?void 0:n.env)?void 0:s.VITE_SUPABASE_URL)||ti||"").replace(/\/$/,"");if(r)return o.startsWith("/public-logos/")?`${r}/storage/v1/object/public${o}`:`${r}${o}`}return o}return Gx[a]?Gx[a]:Gx[r]?Gx[r]:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4K"}function Qx(e){var t,n,s;const r=String(e||"").toUpperCase(),a=Hx(r),i=Yx||{};let o=i[a];if(o||r===a||(o=i[r]),"string"==typeof o&&o.length>0){if(o.startsWith("/")){let e="";if(o.startsWith("/public-logos/")?e=o.replace("/public-logos/",""):o.startsWith("/storage/v1/object/public/public-logos/")&&(e=o.replace("/storage/v1/object/public/public-logos/","")),e){const n=ni.storage.from("public-logos").getPublicUrl(e);if(null==(t=null==n?void 0:n.data)?void 0:t.publicUrl)return n.data.publicUrl}const r=((null==(s=null==(n=import.meta)?void 0:n.env)?void 0:s.VITE_SUPABASE_URL)||ti||"").replace(/\/$/,"");if(r)return o.startsWith("/public-logos/")?`${r}/storage/v1/object/public${o}`:`${r}${o}`}return o}return Gx[a]?Gx[a]:Gx[r]?Gx[r]:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4K"}const Xx=[{ticker:"SIE",adr:"SIEGY",name:"Siemens AG",sector:"Industrials",logo:Qx("SIE")},{ticker:"DTE",adr:"DTEGY",name:"Deutsche Telekom AG",sector:"Communication Services",logo:Qx("DTE")},{ticker:"AIR",adr:"EADSY",name:"Airbus SE",sector:"Industrials",logo:Qx("AIR")},{ticker:"ALV",adr:"ALIZF",name:"Allianz SE",sector:"Financials",logo:Qx("ALV")},{ticker:"RHM",adr:"",name:"Rheinmetall AG",sector:"Industrials",logo:Qx("RHM")},{ticker:"ENR",adr:"SMNEY",name:"Siemens Energy AG",sector:"Utilities",logo:Qx("ENR")},{ticker:"MUV2",adr:"MURGY",name:"Munich Re",sector:"Financials",logo:Qx("MUV2")},{ticker:"DBK",adr:"DB",name:"Deutsche Bank AG",sector:"Financials",logo:Qx("DBK")},{ticker:"BMW",adr:"BMWYY",name:"BMW AG",sector:"Consumer Discretionary",logo:Qx("BMW")},{ticker:"SY1",adr:"SYIEF",name:"Symrise AG",sector:"Materials",logo:Qx("SY1")},{ticker:"BNR",adr:"BNTGY",name:"Brenntag SE",sector:"Industrials",logo:Qx("BNR")},{ticker:"ZAL",adr:"ZLNDY",name:"Zalando SE",sector:"Consumer Discretionary",logo:Qx("ZAL")},{ticker:"IFX",adr:"",name:"Infineon Technologies AG",sector:"Information Technology",logo:Qx("IFX")},{ticker:"MBG",adr:"",name:"Mercedes-Benz Group AG",sector:"Consumer Discretionary",logo:Qx("MBG")},{ticker:"MRK",adr:"",name:"Merck KGaA",sector:"Health Care",logo:Qx("MRK")},{ticker:"DHL",adr:"",name:"Deutsche Post",sector:"Industrials",logo:Qx("DHL")},{ticker:"SAP",adr:"",name:"SAP SE",sector:"Information Technology",logo:Qx("SAP")},{ticker:"VOW3",adr:"",name:"Volkswagen AG",sector:"Consumer Discretionary",logo:Qx("VOW3")}];function Zx(e,t){var n;const s=function(e){const t=String(e||"").toUpperCase().trim();return(t.includes(".")?t.split(".")[0]:t).replace(/[^A-Z0-9]/g,"")}(e);try{const t=Yx;let r=t[s]||t[e];if("string"==typeof r&&r.startsWith("/")){let e="";if(r.startsWith("/public-logos/")?e=r.replace("/public-logos/",""):r.startsWith("/storage/v1/object/public/public-logos/")&&(e=r.replace("/storage/v1/object/public/public-logos/","")),e){const t=ni.storage.from("public-logos").getPublicUrl(e);if(null==(n=null==t?void 0:t.data)?void 0:n.publicUrl)return t.data.publicUrl}}}catch{}return t&&"string"==typeof t?t:Qx(e)}function Jx({ticker:e,src:t,alt:n,className:s,style:r,...a}){const i=String(e||"").toUpperCase(),[o,l]=tt.useState(()=>Zx(i,t)),[c,d]=tt.useState(!1);return tt.useEffect(()=>{c||l(Zx(i,t))},[i,t,c]),tt.useEffect(()=>{let e=!1;return(async()=>{try{const t=await Kx(i);if(!t||c||e||t===o)return;const n=new Image;n.onload=()=>{e||c||l(t)},n.onerror=()=>{},n.src=t}catch{}})(),()=>{e=!0}},[i,c]),X.jsx("img",{src:o,alt:n||`${i} logo`,loading:"lazy",decoding:"async",className:s,style:r,onError:()=>{d(!0),l("/placeholder-logo.png")},...a})}function ev(e){return String(e).padStart(2,"0")}function tv(e){const[t,n]=e.split(":").map(e=>parseInt(e,10));return{h:isNaN(t)?0:t,m:isNaN(n)?0:n}}function nv(){var e,t,n,s,r,a;const i=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Berlin",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(new Date),o=Number((null==(e=i.find(e=>"year"===e.type))?void 0:e.value)||"1970"),l=Number((null==(t=i.find(e=>"month"===e.type))?void 0:t.value)||"01"),c=Number((null==(n=i.find(e=>"day"===e.type))?void 0:n.value)||"01"),d=Number((null==(s=i.find(e=>"hour"===e.type))?void 0:s.value)||"00"),u=Number((null==(r=i.find(e=>"minute"===e.type))?void 0:r.value)||"00"),m=Number((null==(a=i.find(e=>"second"===e.type))?void 0:a.value)||"00"),h=`${ev(o)}-${ev(l)}-${ev(c)}T${ev(d)}:${ev(u)}:${ev(m)}`;return new Date(h)}function sv(e,t){const n=nv(),s=new Date(n);return s.setHours(e,t,0,0),s}function rv(e,t){const n=e.getTime()-t.getTime();return Math.max(0,Math.floor(n/1e3))}function av(e){const{openWindow:t=["09:10","09:25"],openCutoff:n="08:55",closeWindow:s=["17:40","17:55"],closeCutoff:r="17:25"}={},[a,i]=Je.useState(nv());Je.useEffect(()=>{const e=window.setInterval(()=>i(nv()),1e3);return()=>window.clearInterval(e)},[]);const o=Je.useMemo(()=>{const e=`${ev(a.getHours())}:${ev(a.getMinutes())}`,[i,o]=t,[l,c]=s,d=(e,t,n)=>e>=t&&e<=n,u=d(e,i,o),m=d(e,l,c),{h:h,m:p}=tv(i),{h:f,m:g}=tv(o),{h:x,m:v}=tv(l),{h:y,m:b}=tv(c),{h:w,m:j}=tv(n),{h:N,m:k}=tv(r),S=sv(h,p),_=sv(f,g),E=sv(x,v),T=sv(y,b),D=sv(w,j),A=sv(N,k);if(u){return{phase:"open-live",seconds:rv(_,a),label:"Open auction live",cancelUntil:n,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}if(e<i){return{phase:"pre-open",seconds:rv(S,a),label:"Open auction in",cancelUntil:n,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}if(e>o&&e<l){return{phase:"pre-close",seconds:rv(E,a),label:"Close auction in",cancelUntil:r,nextSlot:"close",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}if(m){return{phase:"close-live",seconds:rv(T,a),label:"Close auction live",cancelUntil:r,nextSlot:"close",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}}const M=sv(h,p);M.setDate(M.getDate()+1);return{phase:"overnight",seconds:rv(M,a),label:"Next open auction in",cancelUntil:n,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:T},cutoffs:{openCut:D,closeCut:A}}},[a,t,s,n,r]),l=Je.useMemo(()=>{const e=Math.max(0,o.seconds),t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return`${ev(t)}:${ev(n)}:${ev(s)}`},[o.seconds]);return{...o,hhmmss:l}}function iv(){return"https://fsqds-production.yadavkartik-arbeit.workers.dev"}const ov=Object.freeze(Object.defineProperty({__proto__:null,getWorkerBase:iv},Symbol.toStringTag,{value:"Module"})),lv="https://fsqds-production.yadavkartik-arbeit.workers.dev",cv={htiPlaceOrder:`${lv}/api/hti/place-order`,htiSaveScore:`${lv}/api/hti/save-score`,htiLeaderboard:`${lv}/api/leaderboards/hti`,adxPlaceOrder:`${lv}/api/adx/place-order`,adxSavePrediction:`${lv}/api/adx/save-prediction`,adxLeaderboard:`${lv}/api/leaderboards/adx`,adxStagedOrders:`${lv}/api/adx/staged-orders`,marketOptions:e=>`${lv}/api/market/options/catalog?symbol=${encodeURIComponent(e)}&liquid=true&maxExpiries=6`,adminOptionsRefresh:`${lv}/api/market/options/refresh`,health:`${lv}/health`,healthMetrics:`${lv}/health/metrics`,adminRunParityCheck:`${lv}/api/admin/run-parity-check`,adminRunLoadSlo:`${lv}/api/admin/run-load-slo`,mmEventCreate:`${lv}/api/mm/event/create`,mmEventRegisterTeam:`${lv}/api/mm/event/register-team`,mmEventScoreboard:`${lv}/api/mm/event/scoreboard`,mmEventFreeze:`${lv}/api/mm/event/freeze`,mmEventRunAuction:`${lv}/api/mm/event/run-auction`,mmEventCleanup:`${lv}/api/mm/event/cleanup`,adminOpsSetOverride:`${lv}/api/admin/ops/set-override`,adminOpsListOverrides:`${lv}/api/admin/ops/list-overrides`,adminOpsClearOverrides:`${lv}/api/admin/ops/clear-overrides`,adminNewsShock:`${lv}/api/admin/news-shock`};function dv(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return""}}function uv(){var e,t,n,s;const{label:r,hhmmss:a,phase:i,windows:o,cutoffs:l}=av(),[c,d]=Je.useState(null);Je.useRef(null),Je.useRef(null);const u=Je.useMemo(()=>`${(null==o?void 0:o.openStart)?o.openStart.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"09:10"}${(null==o?void 0:o.openEnd)?o.openEnd.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"09:25"}`,[o]),m=Je.useMemo(()=>`${(null==o?void 0:o.closeStart)?o.closeStart.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"17:40"}${(null==o?void 0:o.closeEnd)?o.closeEnd.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"17:55"}`,[o]),h=Je.useMemo(()=>{var e;return(null==(e=null==l?void 0:l.openCut)?void 0:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"08:55"},[l]),p=Je.useMemo(()=>{var e;return(null==(e=null==l?void 0:l.closeCut)?void 0:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"17:25"},[l]);Je.useEffect(()=>{let e=!1;return(async()=>{try{const t=cv.healthMetrics,n=await fetch(t,{cache:"no-store",headers:{Accept:"application/json"}});!e&&n.ok&&d(await n.json())}catch{}})(),()=>{e=!0}},[]);const f=i.includes("live")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800";return X.jsx(_x,{className:"border shadow-sm",children:X.jsxs(Dx,{className:"py-2 px-3 text-xs flex flex-wrap items-center gap-3",children:[X.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded ${f}`,"aria-live":"polite",children:[r,": ",X.jsx("span",{className:"font-mono",children:a})]}),X.jsxs("span",{className:"text-muted-foreground",children:["Open ",u," (cutoff ",h,")"]}),X.jsxs("span",{className:"text-muted-foreground",children:["Close ",m," (cutoff ",p,")"]}),(null==(e=null==c?void 0:c.eurex_calendar)?void 0:e.windows_used)&&X.jsxs("span",{className:"text-muted-foreground",title:"Eurex-derived windows",children:["Eurex: O ",c.eurex_calendar.windows_used.open_run," / C ",c.eurex_calendar.windows_used.close_run]}),X.jsx("span",{className:"ml-auto"}),X.jsxs("span",{title:"Spread policy version",children:["Policy: ",(null==c?void 0:c.quotes_policy_version)?`model ${c.quotes_policy_version}`:""]}),X.jsxs("span",{title:"Last leaderboard rebuild",children:["LB: ",dv(null==(t=null==c?void 0:c.orchestrator)?void 0:t.last_leaderboard_rebuild)]}),X.jsxs("span",{title:"Last open auction",children:["Open: ",dv(null==(n=null==c?void 0:c.orchestrator)?void 0:n.last_auction_open)]}),X.jsxs("span",{title:"Last close auction",children:["Close: ",dv(null==(s=null==c?void 0:c.orchestrator)?void 0:s.last_auction_close)]})]})})}const mv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function hv(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return""}}function pv(){var e,t,n,s,r;const[a,i]=Je.useState(null),[o,l]=Je.useState(!0),[c,d]=Je.useState(null),[u,m]=Je.useState(null),h=Number((null==mv?void 0:mv.VITE_SLO_P95_MS)||1500);return X.jsxs(_x,{className:"border shadow-sm",children:[X.jsx(Ex,{className:"py-2",children:X.jsx(Tx,{className:"text-xs",children:"System Status"})}),X.jsx(Dx,{className:"text-xs grid grid-cols-2 gap-x-4 gap-y-1",children:a?c?X.jsx("div",{className:"col-span-2 text-red-600",children:c}):X.jsxs(X.Fragment,{children:[X.jsx("div",{children:"Spot (last):"}),X.jsx("div",{className:"text-right",children:hv((null==(e=null==a?void 0:a.stock_prices)?void 0:e.last_updated)??null)}),X.jsx("div",{children:"Marks (last):"}),X.jsx("div",{className:"text-right",children:hv((null==(t=null==a?void 0:a.options_model_marks)?void 0:t.last_calc_ts)??null)}),X.jsx("div",{children:"Quotes (last):"}),X.jsx("div",{className:"text-right",children:hv((null==(n=null==a?void 0:a.options_quotes)?void 0:n.last_computed_at)??null)}),X.jsx("div",{children:"LB Cache (v2/v1):"}),X.jsxs("div",{className:"text-right",children:[(null==(s=null==a?void 0:a.leaderboard_cache)?void 0:s.v2_present)?"Y":"N"," / ",(null==(r=null==a?void 0:a.leaderboard_cache)?void 0:r.v1_present)?"Y":"N"]}),X.jsx("div",{children:"Spread policy:"}),X.jsx("div",{className:"text-right",children:(null==a?void 0:a.quotes_policy_version)?`model ${a.quotes_policy_version}`:""}),X.jsx("div",{children:"SLO p95:"}),X.jsx("div",{className:"text-right "+(null==u?"":u<=h?"text-green-700":"text-red-700"),children:null==u?"":`${Math.round(u)}ms (<=${h}ms)`}),X.jsx("div",{children:"Ops Parity:"}),X.jsx("div",{className:"text-right",children:(()=>{var e;const t=null==(e=null==a?void 0:a.ops)?void 0:e.parity;if(!t)return"";const n=Number(t.warns??0),s=n>0?"text-yellow-700":"text-green-700";return X.jsxs("span",{className:s,children:[hv(t.ts),"  warns ",n]})})()}),X.jsx("div",{children:"Ops SLO:"}),X.jsx("div",{className:"text-right",children:(()=>{var e;const t=null==(e=null==a?void 0:a.ops)?void 0:e.slo;if(!t)return"";const n=!t.failed;return X.jsxs("span",{className:n?"text-green-700":"text-red-700",children:[hv(t.ts),"  ",n?"PASS":"FAIL"]})})()})]}):X.jsx("div",{className:"col-span-2",children:X.jsx("button",{onClick:async function(){try{d(null);const e=[cv.healthMetrics,"https://fsqds-production.yadavkartik-arbeit.workers.dev/health/metrics"];let t=null;for(const n of e)try{const e=await fetch(n,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){t=await e.json();break}}catch{}if(!t)throw new Error("No health metrics available");i(t)}catch(mj){d((null==mj?void 0:mj.message)||"Failed")}finally{l(!1)}},className:"text-xs px-2 py-1 border rounded",children:"Load status"})})})]})}function fv(){const[e,t]=tt.useState(!1),n=function(){const[e,t]=Je.useState(null);return Je.useEffect(()=>{let e=!0;async function n(){try{const n=await fetch(cv.healthMetrics);if(!n.ok)return;const s=await n.json();if(!e)return;const r=(null==s?void 0:s.quotes_policy_version)||null;t(r)}catch{}}n();const s=window.setInterval(n,3e5);return()=>{e=!1,window.clearInterval(s)}},[]),e}(),s=n?`Spread policy: model ${n}`:"Spread policy: loading";return X.jsxs("div",{className:"text-[11px] text-muted-foreground flex items-center gap-2",children:[X.jsx(lx,{variant:"outline",className:"px-1.5 py-0.5 text-[10px]",children:s}),X.jsx("button",{className:"underline decoration-dotted",onClick:()=>t(!e),"aria-expanded":e,"aria-label":"Pricing policy",disabled:!n,children:"What is this?"}),e&&n&&X.jsxs("div",{className:"mt-1 p-2 border rounded bg-card shadow-sm max-w-[480px]",children:[X.jsx("div",{className:"mb-1 font-medium",children:"Pricing policy"}),X.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[X.jsx("li",{children:"Quotes are synthetic: BlackScholes mid  spread; spread depends on moneyness, tenor, and volatility."}),X.jsx("li",{children:"Dividend yield (q) is applied; prices are bounded by no-arbitrage limits and tick-rounded."}),X.jsx("li",{children:"Auction execution uses the model mid plus half-spread and size-based slippage tiers."})]}),X.jsx("div",{className:"mt-2 text-[10px] text-muted-foreground",children:"Educational only  Not investment advice"})]})]})}var gv={},xv=rt&&rt.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),vv=rt&&rt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yv=rt&&rt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&xv(t,e,n);return vv(t,e),t};Object.defineProperty(gv,"__esModule",{value:!0}),gv.useTurnstile=void 0;const bv=yv(Je),wv="undefined"!=typeof globalThis?globalThis:window;let jv,Nv,kv=void 0!==wv.turnstile?"ready":"unloaded";const Sv=new Promise((e,t)=>{Nv={resolve:e,reject:t},"ready"===kv&&e(void 0)});{const e="cf__reactTurnstileOnLoad",t="https://challenges.cloudflare.com/turnstile/v0/api.js";jv=()=>{if("unloaded"===kv){kv="loading",wv[e]=()=>{Nv.resolve(),kv="ready",delete wv[e]};const n=`${t}?onload=${e}&render=explicit`,s=document.createElement("script");s.src=n,s.async=!0,s.addEventListener("error",()=>{Nv.reject("Failed to load Turnstile."),delete wv[e]}),document.head.appendChild(s)}return Sv}}var _v=gv.default=function({id:e,className:t,style:n,sitekey:s,action:r,cData:a,theme:i,language:o,tabIndex:l,responseField:c,responseFieldName:d,size:u,fixedSize:m,retry:h,retryInterval:p,refreshExpired:f,appearance:g,execution:x,userRef:v,onVerify:y,onSuccess:b,onLoad:w,onError:j,onExpire:N,onTimeout:k,onAfterInteractive:S,onBeforeInteractive:_,onUnsupported:E}){const T=(0,bv.useRef)(null),D=(0,bv.useState)({onVerify:y,onSuccess:b,onLoad:w,onError:j,onExpire:N,onTimeout:k,onAfterInteractive:S,onBeforeInteractive:_,onUnsupported:E})[0],A=null!=v?v:T,M=m?{width:"compact"===u?"130px":"flexible"===u?"100%":"300px",height:"compact"===u?"120px":"65px",...n}:n;return(0,bv.useEffect)(()=>{if(!A.current)return;let e=!1,t="";return(async()=>{var n,m;if("ready"!==kv)try{await jv()}catch(mj){return void(null===(n=D.onError)||void 0===n||n.call(D,mj))}if(e||!A.current)return;let v;const y={sitekey:s,action:r,cData:a,theme:i,language:o,tabindex:l,"response-field":c,"response-field-name":d,size:u,retry:h,"retry-interval":p,"refresh-expired":f,appearance:g,execution:x,callback:(e,t)=>{var n,s;null===(n=D.onVerify)||void 0===n||n.call(D,e,v),null===(s=D.onSuccess)||void 0===s||s.call(D,e,t,v)},"error-callback":e=>{var t;return null===(t=D.onError)||void 0===t?void 0:t.call(D,e,v)},"expired-callback":e=>{var t;return null===(t=D.onExpire)||void 0===t?void 0:t.call(D,e,v)},"timeout-callback":()=>{var e;return null===(e=D.onTimeout)||void 0===e?void 0:e.call(D,v)},"after-interactive-callback":()=>{var e;return null===(e=D.onAfterInteractive)||void 0===e?void 0:e.call(D,v)},"before-interactive-callback":()=>{var e;return null===(e=D.onBeforeInteractive)||void 0===e?void 0:e.call(D,v)},"unsupported-callback":()=>{var e;return null===(e=D.onUnsupported)||void 0===e?void 0:e.call(D,v)}};t=window.turnstile.render(A.current,y),v=function(e){return{execute:t=>window.turnstile.execute(e,t),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}(t),null===(m=D.onLoad)||void 0===m||m.call(D,t,v)})(),()=>{e=!0,t&&window.turnstile.remove(t)}},[s,r,a,i,o,l,c,d,u,h,p,f,g,x]),(0,bv.useEffect)(()=>{D.onVerify=y,D.onSuccess=b,D.onLoad=w,D.onError=j,D.onExpire=N,D.onTimeout=k,D.onAfterInteractive=S,D.onBeforeInteractive=_,D.onUnsupported=E},[y,b,w,j,N,k,S,_,E]),bv.default.createElement("div",{ref:A,id:e,className:t,style:M})};gv.useTurnstile=function(){const[e,t]=(0,bv.useState)(kv);return(0,bv.useEffect)(()=>{"ready"!==kv&&Sv.then(()=>t(kv))},[]),wv.turnstile};const Ev={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},Tv=[{symbol:"SAP",name:"SAP SE",adr:"SAP"},{symbol:"SIE",name:"Siemens AG",adr:"SIEGY"},{symbol:"ALV",name:"Allianz SE",adr:"AZSEY"},{symbol:"BAS",name:"BASF SE",adr:"BASFY"},{symbol:"BAYN",name:"Bayer AG",adr:"BAYRY"},{symbol:"BMW",name:"BMW AG",adr:"BMWYY"},{symbol:"VOW3",name:"Volkswagen AG",adr:"VWAGY"},{symbol:"DTE",name:"Deutsche Telekom AG",adr:"DTEGY"},{symbol:"MBG",name:"Mercedes-Benz Group AG",adr:"MBGAF"},{symbol:"MUV2",name:"Munich RE",adr:"MURGY"}];const Dv=new class{constructor(){this.STARTING_BALANCE=1e5,this.MAX_TRADES_PER_DAY=100,this.SLIPPAGE_PERCENT=.5,this.snapshotCache=null,this.SNAPSHOT_STALE_MS=15e3}invalidateSnapshotCache(){this.snapshotCache=null}getWorkerBase(){try{const{getWorkerBase:e}=require("@/lib/env");return e()}catch{return"https://fsqds-production.yadavkartik-arbeit.workers.dev"}}async refreshUnderlyingAndMarks(e){try{const t=this.getWorkerBase();try{await fetch(`${t}/api/market/stock-prices?tickers=${encodeURIComponent(e)}&refresh=1`,{method:"GET"})}catch{}try{await fetch(`${t}/api/market/options/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tickers:[e]})})}catch{}}catch{}}async fetchPortfolioSnapshot(){var e,t,n,s,r,a,i;const o=null==(e=(await ni.auth.getSession()).data.session)?void 0:e.access_token;if(!o)return null;const l=Date.now();if(this.snapshotCache&&l-this.snapshotCache.ts<=this.SNAPSHOT_STALE_MS){const e=this.snapshotCache.data||{};return{portfolio:e.portfolio??null,positions:e.positions??[],tradesToday:e.tradesToday??0,realized:e.realized??{},aggregates:e.aggregates}}const c=this.getWorkerBase(),d={Authorization:`Bearer ${o}`,Accept:"application/json"};(null==(t=this.snapshotCache)?void 0:t.etag)&&(d["If-None-Match"]=this.snapshotCache.etag);const u=await fetch(`${c}/api/adx/portfolio-snapshot`,{method:"GET",headers:d});if(!u.ok){if(this.snapshotCache){const e=this.snapshotCache.data||{};return{portfolio:e.portfolio??null,positions:e.positions??[],tradesToday:e.tradesToday??0,realized:e.realized??{}}}return null}const m=await u.json().catch(()=>null);if(!m)return null;const h=u.headers.get("X-ETag")||u.headers.get("ETag")||void 0,p={portfolio:(null==m?void 0:m.portfolio)||(null==(n=null==m?void 0:m.data)?void 0:n.portfolio)||null,positions:Array.isArray(null==m?void 0:m.positions)?m.positions:Array.isArray(null==(s=null==m?void 0:m.data)?void 0:s.positions)?m.data.positions:[],tradesToday:Number((null==m?void 0:m.tradesToday)||(null==(r=null==m?void 0:m.data)?void 0:r.tradesToday)||0),realized:(null==m?void 0:m.realized)||(null==(a=null==m?void 0:m.data)?void 0:a.realized)||{},aggregates:(null==m?void 0:m.aggregates)||(null==(i=null==m?void 0:m.data)?void 0:i.aggregates)||void 0};return this.snapshotCache={ts:l,etag:h,data:p},p}async getUserPortfolio(){const{data:{user:e}}=await ni.auth.getUser();if(!e)return null;try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.portfolio)??null}catch(mj){}const{data:t}=await ni.from("seasons").select("id").eq("status","active").single();if(!t)return null;let{data:n}=await ni.from("adx_portfolios").select("*").eq("user_id",e.id).eq("season_id",t.id).maybeSingle();return n}async getUserPositions(e){try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.positions)??[]}catch(mj){return[]}}async getSnapshotAggregates(){try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.aggregates)||null}catch{return null}}async getTradingMetrics(){const{data:e}=await ni.functions.invoke("adx_metrics",{method:"POST",body:{}});if((null==e?void 0:e.ok)&&e.data)return e.data;try{const{data:e}=await ni.functions.invoke("adx_portfolio_snapshot",{method:"POST",body:{}});if(e&&e.portfolio){const t=e.portfolio,n=e.tradesToday||0,s=t.cash??t.starting_cash,r=t.equity??t.current_value??t.starting_cash,a=(Array.isArray(e.positions)?e.positions:[]).reduce((e,t)=>e+(t.avg_price??0)*(t.qty??0)*100,0),i=s,o=Math.max(0,i-a);return{accountBalance:s,dayTradingPower:i,tradesUsedToday:n,maxTradesPerDay:100,portfolioValue:r,todaysPnL:0,totalPnL:r-t.starting_cash,marginUsed:a,marginAvailable:o,maxDrawdownPct:Number(t.max_drawdown_pct||0),sharpe:Number(t.sharpe||0)}}}catch{}return null}async getPnLHistory(e,t=30){const n=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:r,error:a}=await ni.from("adx_equity_daily").select("as_of_date, equity").eq("portfolio_id",e).gte("as_of_date",s.toISOString().split("T")[0]).lte("as_of_date",n.toISOString().split("T")[0]).order("as_of_date",{ascending:!0});if(!a&&r&&r.length>0){let e=null;return r.map(t=>{const n=Number(t.equity)||0,s=null!==e?n-e:0;return e=n,{date:t.as_of_date,pnl:s,cumulative:n}})}const{data:i}=await ni.from("adx_pnl_daily").select("as_of, ret, equity").eq("portfolio_id",e).gte("as_of",s.toISOString().split("T")[0]).lte("as_of",n.toISOString().split("T")[0]).order("as_of",{ascending:!0});return(i||[]).map(e=>({date:e.as_of,pnl:e.ret||0,cumulative:e.equity||0}))}async getTradeHistory(e,t=30){const n=new Date,s=new Date;s.setDate(s.getDate()-t);let r=[],a=null;try{const t=await ni.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("filled_at",s.toISOString()).lte("filled_at",n.toISOString());r=t.data||[],a=t.error}catch(mj){a=mj}let i=[];if(a){i=(await ni.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("ts",s.toISOString()).lte("ts",n.toISOString())).data||[]}else{i=(await ni.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("ts",s.toISOString()).lte("ts",n.toISOString())).data||[]}const o=new Map;[...r,...i].forEach(e=>{o.has(e.id)||o.set(e.id,e)});const l=Array.from(o.values()).reduce((e,t)=>{const n=t.filled_at||t.ts;if(!n)return e;const s=new Date(n).toISOString().split("T")[0];return e[s]=(e[s]||0)+1,e},{}),c=[],d=new Date(s);for(;d<=n;){const e=d.toISOString().split("T")[0];c.push({date:e,trades:l[e]||0}),d.setDate(d.getDate()+1)}return c}async getCompaniesWithOptions(){try{const{data:e}=await ni.from("seasons").select("id, tickers").eq("status","active").single();if(!e||!e.tickers)return[];const{data:t}=await ni.from("stock_prices").select("*").in("ticker",e.tickers),n={},s=(new Date).toISOString().slice(0,10);for(const r of e.tickers){const{data:e}=await ni.from("v_options_display").select("option_symbol,ticker,type,strike,expiry,display_bid,display_ask,display_last").eq("ticker",r).gte("expiry",s).order("expiry",{ascending:!0}).order("strike",{ascending:!0});n[r]=e||[]}return(t||[]).map(e=>{const t=(n[e.ticker]||[]).slice(0,10).map(e=>({id:e.option_symbol,type:"put"===String(e.type).toLowerCase()?"put":"call",strike:Number(e.strike)||0,maturity:e.expiry,bidPrice:Number(e.display_bid)||0,askPrice:Number(e.display_ask)||0,volume:0,openInterest:0,exerciseStyle:"European"})),s=Tv.find(t=>t.adr===e.ticker);return{id:e.ticker,symbol:e.ticker,name:(null==s?void 0:s.name)||e.ticker,currentPrice:e.price,change:e.change,changePercent:e.change_percent,logoUrl:Qx(e.ticker),options:t}})}catch(e){return[]}}async placeOrder(e,t){var n,s,r,a,i,o,l,c,d;try{const u=await this.getUserPortfolio();if(!u)return{success:!1,error:"No portfolio found"};const m="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),h=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(Ev&&!0){const n=this.getWorkerBase(),l=await ni.auth.getSession(),c=null==(r=null==(s=null==l?void 0:l.data)?void 0:s.session)?void 0:r.access_token,d=await fetch(`${n}/api/adx/place-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:c?`Bearer ${c}`:"","x-correlation-id":h,...(null==t?void 0:t.turnstileToken)?{"CF-Turnstile-Response":t.turnstileToken,"X-Turnstile-Token":t.turnstileToken}:{}},body:JSON.stringify({portfolioId:u.id,optionSymbol:e.optionSymbol,side:e.action.toUpperCase(),qty:e.quantity,turnstileToken:m?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),p=await d.json().catch(()=>({}));if(!d.ok||!(null==p?void 0:p.ok)){return{success:!1,error:`${(null==p?void 0:p.error)||"Order failed"} (ref: ${h})`}}const f=(null==p?void 0:p.data)||p;return{success:!0,order:null==f?void 0:f.order,auctionSlot:null==(a=null==f?void 0:f.order)?void 0:a.auctionSlot,previewPrice:null==(i=null==f?void 0:f.order)?void 0:i.previewPrice,estimatedFees:null==(o=null==f?void 0:f.order)?void 0:o.estimatedFees}}const{data:p,error:f}=await ni.functions.invoke("adx_place_order",{method:"POST",headers:{"x-correlation-id":h},body:{portfolioId:u.id,optionSymbol:e.optionSymbol,side:e.action.toUpperCase(),qty:e.quantity,turnstileToken:m?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(f||!(null==p?void 0:p.ok)){return{success:!1,error:`${(null==p?void 0:p.error)||(null==f?void 0:f.message)||"Order failed"} (ref: ${h})`}}const g=null==p?void 0:p.data;return{success:!0,order:null==g?void 0:g.order,auctionSlot:null==(l=null==g?void 0:g.order)?void 0:l.auctionSlot,previewPrice:null==(c=null==g?void 0:g.order)?void 0:c.previewPrice,estimatedFees:null==(d=null==g?void 0:g.order)?void 0:d.estimatedFees}}catch(u){return{success:!1,error:"Failed to place order"}}}async getStagedOrders(e){var t;try{const n=(null==(t=null==crypto?void 0:crypto.randomUUID)?void 0:t.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,{data:s,error:r}=await ni.functions.invoke("adx_list_staged_orders",{method:"POST",headers:{"x-correlation-id":n},body:{portfolio_id:e}});return r||!(null==s?void 0:s.ok)?[]:(null==s?void 0:s.data)||[]}catch(mj){return[]}}async cancelOrder(e,t){var n,s,r;try{const a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),i=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(!0){const n=this.getWorkerBase(),o=await ni.auth.getSession(),l=null==(r=null==(s=null==o?void 0:o.data)?void 0:s.session)?void 0:r.access_token,c=await fetch(`${n}/api/adx/cancel-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:l?`Bearer ${l}`:"","x-correlation-id":i,...(null==t?void 0:t.turnstileToken)?{"CF-Turnstile-Response":t.turnstileToken,"X-Turnstile-Token":t.turnstileToken}:{}},body:JSON.stringify({orderId:e,turnstileToken:a?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),d=await c.json().catch(()=>({}));if(!c.ok||!(null==d?void 0:d.ok)){return{success:!1,error:`${(null==d?void 0:d.error)||"Cancel failed"} (ref: ${i})`}}return{success:!0}}const{data:o,error:l}=await ni.functions.invoke("adx_cancel_order",{method:"POST",headers:{"x-correlation-id":i},body:{orderId:e,turnstileToken:a?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(l||!(null==o?void 0:o.ok)){return{success:!1,error:`${(null==o?void 0:o.error)||(null==l?void 0:l.message)||"Cancel failed"} (ref: ${i})`}}return{success:!0}}catch(mj){return{success:!1,error:"Cancel failed"}}}async exerciseOption(e,t){var n,s,r;try{const a=await this.getUserPortfolio();if(!a)return{success:!1,error:"No portfolio found"};const i="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(!0){const n=this.getWorkerBase(),l=await ni.auth.getSession(),c=null==(r=null==(s=null==l?void 0:l.data)?void 0:s.session)?void 0:r.access_token,d=await fetch(`${n}/api/adx/exercise`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:c?`Bearer ${c}`:"","x-correlation-id":o,...(null==t?void 0:t.turnstileToken)?{"CF-Turnstile-Response":t.turnstileToken,"X-Turnstile-Token":t.turnstileToken}:{}},body:JSON.stringify({portfolioId:a.id,optionSymbol:e.optionSymbol,qty:e.qty,turnstileToken:i?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),u=await d.json().catch(()=>({}));if(!d.ok||!(null==u?void 0:u.ok)){return{success:!1,error:`${(null==u?void 0:u.error)||"Exercise failed"} (ref: ${o})`}}return{success:!0,data:null==u?void 0:u.data}}const{data:l,error:c}=await ni.functions.invoke("adx_exercise",{method:"POST",headers:{"x-correlation-id":o},body:{portfolioId:a.id,optionSymbol:e.optionSymbol,qty:e.qty,turnstileToken:i?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(c||!(null==l?void 0:l.ok)){return{success:!1,error:`${(null==l?void 0:l.error)||(null==c?void 0:c.message)||"Exercise failed"} (ref: ${o})`}}return{success:!0,data:null==l?void 0:l.data}}catch(a){return{success:!1,error:"Failed to exercise option"}}}async getPortfolioComposition(e){const t=await this.getUserPositions(e),n=Array.from(new Set((t||[]).map(e=>String(e.option_symbol)).filter(Boolean))),s=n.length>0?await this.getOptionsMetadataBySymbols(n):{},r=(t||[]).filter(e=>"call"===String(e.type).toLowerCase()).reduce((e,t)=>{var n;const r=String(t.option_symbol||""),a=(null==(n=null==s?void 0:s[r])?void 0:n.contract_size)??0,i="number"==typeof a&&a>0?Math.round(a):100;return e+(Number(t.current_price??t.avg_price??0)||0)*Number(t.qty||0)*i},0),a=(t||[]).filter(e=>"put"===String(e.type).toLowerCase()).reduce((e,t)=>{var n;const r=String(t.option_symbol||""),a=(null==(n=null==s?void 0:s[r])?void 0:n.contract_size)??0,i="number"==typeof a&&a>0?Math.round(a):100;return e+(Number(t.current_price??t.avg_price??0)||0)*Number(t.qty||0)*i},0),i=r+a;return i>0?{calls:r/i*100,puts:a/i*100}:{calls:0,puts:0}}async getOptionsMetadataBySymbols(e){const t=Array.from(new Set((e||[]).filter(Boolean)));if(0===t.length)return{};const{data:n,error:s}=await ni.from("options_market_data").select("option_symbol, ticker, type, strike, expiry, contract_size, currency, exchange").in("option_symbol",t);if(s||!n)return{};const r={};for(const a of n)r[a.option_symbol]=a;return r}},Av={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function Mv(){const{user:e}=di(),[t,n]=Je.useState([]),[s,r]=Je.useState(!0),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState(!1),[u,m]=Je.useState(!1),[h,p]=Je.useState({}),[f,g]=Je.useState({}),[x,v]=Je.useState(""),[y,b]=Je.useState(""),w=Je.useRef(null);Je.useEffect(()=>{try{const e=new URL(window.location.href),t=e.searchParams.get("sym"),n=e.searchParams.get("exp"),s=e.searchParams.get("atm"),r=e.searchParams.get("ex");t&&v(t.toUpperCase()),n&&p(e=>({...e,[(t||x||"").toUpperCase()]:Math.min(Math.max(parseInt(n,10)||G,1),12)})),s&&g(e=>({...e,[(t||x||"").toUpperCase()]:Math.min(Math.max(parseFloat(s)||K,.01),.5)})),r&&(w.current=r)}catch{}},[]),Je.useEffect(()=>{try{const e=new URL(window.location.href);x&&e.searchParams.set("sym",x);const t=h[x],n=f[x];"number"==typeof t?e.searchParams.set("exp",String(t)):e.searchParams.delete("exp"),"number"==typeof n?e.searchParams.set("atm",String(n)):e.searchParams.delete("atm"),y?e.searchParams.set("ex",String(y)):e.searchParams.delete("ex");const s=`${e.pathname}${e.search}${e.hash}`;s!==`${window.location.pathname}${window.location.search}${window.location.hash}`&&window.history.replaceState({},"",s)}catch{}},[x,h,f,y]),Je.useEffect(()=>{E(null),b("")},[x]);const[j,N]=Je.useState("all"),[k,S]=Je.useState("all"),[_,E]=Je.useState(null),[T,D]=Je.useState(!1),[A,M]=Je.useState(null),[C,O]=Je.useState(1),[P,I]=Je.useState(0),[R,L]=Je.useState(!1),[F,z]=Je.useState(0),B=Je.useRef(null),U=Je.useRef(null),q=Je.useRef(null),W=Je.useRef(!1),[$,Y]=Je.useState(null),V=Je.useRef(null),H=av(),G=3,K=.05,[Q,Z]=Je.useState(null);Je.useEffect(()=>{if(!Q)return;const e=window.setTimeout(()=>Z(null),1800);return()=>window.clearTimeout(e)},[Q]);const[J,ee]=Je.useState(!1),[te,ne]=Je.useState(0);async function se(e=!1){if(J)return;const t=Date.now();if(!e&&t-te<45e3)Z({msg:`Please wait ${Math.ceil((45e3-(t-te))/1e3)}s before refreshing again`,at:t});else if(x){ee(!0);try{const{getWorkerBase:e}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>ov);return{getWorkerBase:e}},void 0),t=e();try{const e=await fetch(`${t}/api/market/stock-prices?season=active&tickers=${encodeURIComponent(x)}&refresh=1&delta=1`);if(e.ok){const t=await e.json().catch(()=>({ok:!1})),s=Array.isArray(null==t?void 0:t.data)?t.data.find(e=>String(e.ticker)===x):null;s&&n(e=>e.map(e=>e.symbol===x?{...e,currentPrice:Number(s.price)||0,change:Number(s.change)||0,changePercent:Number(s.change_percent)||0}:e))}}catch{}try{await fetch(`${t}/api/market/options/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tickers:[x]})})}catch{}try{await fetch(`${t}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(x)}&liquid=${a?"true":"false"}&refresh=1`)}catch{}await oe(),ne(Date.now())}finally{ee(!1),l(new Date)}}}async function re(){var e,t;if("undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname))return"dev-bypass-token";for(let n=0;n<50&&!(R&&B.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.execute));n++)await new Promise(e=>setTimeout(e,100));if(R&&B.current&&(null==(t=null==window?void 0:window.turnstile)?void 0:t.execute)){if(W.current){for(let e=0;e<25&&(W.current||!q.current);e++)await new Promise(e=>setTimeout(e,100));if(q.current&&Date.now()-q.current.at<5e3)return q.current.token}return W.current=!0,await new Promise(e=>{var t;let n=!1;const s=window.setTimeout(()=>{n=!0,U.current=null,W.current=!1,e("")},7e3);U.current=t=>{n||(window.clearTimeout(s),q.current={token:t,at:Date.now()},W.current=!1,e(t))};try{(null==(t=null==window?void 0:window.turnstile)?void 0:t.reset)&&B.current&&window.turnstile.reset(B.current),window.turnstile.execute(B.current)}catch(r){window.clearTimeout(s),W.current=!1,z(e=>e+1),e("")}})}}const[ae,ie]=Je.useState(new Map),oe=Je.useMemo(()=>async()=>{var e;try{r(e=>e||0===t.length);let s=null;try{const{data:e}=await ni.from("seasons").select("id").eq("status","active").maybeSingle();s=(null==e?void 0:e.id)??null}catch{}let i=null;if(s){i=(await ni.from("adx_tickers").select("*").eq("season_id",s).eq("is_active",!0).order("band",{ascending:!0}).order("symbol",{ascending:!0})).data||[]}if(!i||0===i.length){i=(await ni.from("adx_tickers").select("*").eq("is_active",!0).order("band",{ascending:!0}).order("symbol",{ascending:!0})).data||[]}const o=["SAP","ALV","DTE","BAS","BAYN","BMW","SIE","DBK","MUV2","VOW3"];i&&0!==i.length||(i=o.map(e=>({symbol:e,name:e,band:"top"})));const c=i.map(e=>e.symbol),{getWorkerBase:u}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>ov);return{getWorkerBase:e}},void 0),m=u();let p=[];try{const e=Date.now(),t=e-te<5e3?`&refresh=1&delta=1&t=${e.toString(36)}`:"",n=await fetch(`${m}/api/market/stock-prices?season=active${t}`);if(n.ok){const e=await n.json().catch(()=>({ok:!1}));p=(null==e?void 0:e.data)||[]}}catch{}if((!p||0===p.length)&&Array.isArray(c)&&c.length>0){const{data:e}=await ni.from("stock_prices").select("ticker, price, change, change_percent, last_updated").in("ticker",c);p=e||[]}const g=new Map((p||[]).filter(e=>c.includes(e.ticker)).map(e=>[e.ticker,{price:Number(e.price)||0,change:Number(e.change)||0,change_percent:Number(e.change_percent)||0,last_updated:e.last_updated}]));let y=0;g.forEach(e=>{const t=e.last_updated?Date.parse(e.last_updated):0;t>y&&(y=t)});const b=Date.now();d(0===y||b-y>12e5);const w=new Map,j=x||i&&(null==(e=i[0])?void 0:e.symbol)||"";if(j){let e=`${m}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(j)}&liquid=${a?"true":"false"}`;const t=h[j],n=f[j];"number"!=typeof t&&"number"!=typeof n||(e+="&override=1","number"==typeof t&&(e+=`&maxExpiries=${t}`),"number"==typeof n&&(e+=`&atmPct=${n}`));const s=await fetch(e);if(!s.ok&&("number"==typeof h[j]||"number"==typeof f[j])){const t=Date.now().toString(36),n=e+(e.includes("?")?`&t=${t}`:`?t=${t}`);try{await fetch(n)}catch{}}if(s.ok){const e=await s.json().catch(()=>({ok:!1})),t=(null==e?void 0:e.data)||[];w.set(j,t)}}const N=i.map(e=>{const t=g.get(e.symbol),n=w.get(e.symbol)||[],s=(a?n.filter(e=>(Number(e.display_bid)||0)>0||(Number(e.display_ask)||0)>0):n).map(e=>({id:e.option_symbol,type:"put"===String(e.type).toLowerCase()?"put":"call",strike:Number(e.strike)||0,maturity:e.expiry,bidPrice:Number(e.display_bid)||0,askPrice:Number(e.display_ask)||0,lastPrice:Number(e.display_last)||0,volume:0,openInterest:0,impliedVol:null,delta:null,gamma:null,theta:null}));return{id:e.id,symbol:e.symbol,name:e.name,currentPrice:(null==t?void 0:t.price)??0,change:(null==t?void 0:t.change)??0,changePercent:(null==t?void 0:t.change_percent)??0,logoUrl:Qx(e.symbol),options:s}});n(N),!x&&N.length>0&&v(N[0].symbol),l(new Date)}catch(mj){n([]),d(!0),l(new Date)}finally{r(!1)}},[a,x,t.length,h,f]);Je.useEffect(()=>{oe()},[oe,h,f]),Je.useEffect(()=>{let e=!0;return(async()=>{var t,n;try{const{data:s}=await ni.auth.getSession(),r=null==(n=null==(t=null==s?void 0:s.session)?void 0:t.user)?void 0:n.id;if(!r)return void(e&&m(!1));const{data:a}=await ni.from("user_profiles").select("is_admin").eq("user_id",r).single();e&&m(!!(null==a?void 0:a.is_admin))}catch{e&&m(!1)}})(),()=>{e=!1}},[]),Je.useEffect(()=>{const e=async(e,t)=>{Y({kind:e,at:t}),await oe(),V.current&&window.clearTimeout(V.current),V.current=window.setTimeout(()=>Y(null),8e3)},t=t=>{var n;return e("open",(null==(n=null==t?void 0:t.detail)?void 0:n.at)||(new Date).toISOString())},n=t=>{var n;return e("close",(null==(n=null==t?void 0:t.detail)?void 0:n.at)||(new Date).toISOString())};return window.addEventListener("auction-run:open",t),window.addEventListener("auction-run:close",n),()=>{V.current&&window.clearTimeout(V.current),window.removeEventListener("auction-run:open",t),window.removeEventListener("auction-run:close",n)}},[oe]),Je.useEffect(()=>{},[oe]);const le=Je.useMemo(()=>t.find(e=>e.symbol===x)||null,[t,x]),ce=Je.useMemo(()=>{if(!le)return[];const e=Array.from(new Set(le.options.map(e=>e.maturity))).sort();return w.current&&e.includes(w.current)&&y!==w.current?(b(w.current),w.current=null):!y&&e.length>0&&b(e[0]),e},[le,y]);const de=Je.useMemo(()=>{if(!le)return[];let e=le.options;if("all"!==j){const t="calls"===j?"call":"put";e=e.filter(e=>e.type===t)}return y&&(e=e.filter(e=>e.maturity===y)),"all"!==k&&(le.currentPrice||0)>0&&(e=e.filter(e=>{return t=e.strike,n=le.currentPrice,(Math.abs(t-n)/(n||1)<.02?"ATM":t>n?"OTM":"ITM")===k;var t,n})),e},[le,j,y,k]);Je.useEffect(()=>{ie(new Map)},[le,x,y,k,j,de]);const[ue,me]=Je.useState(0);Je.useEffect(()=>{(async()=>{try{if(!e||!_)return I(0),void me(0);const t=await Dv.getUserPortfolio();if(!t)return I(0),void me(0);const[n,s]=await Promise.all([Dv.getUserPositions(t.id),Dv.getStagedOrders(t.id)]),r=(n||[]).find(e=>e.option_symbol===_.id);I(r?Number(r.qty||0):0);const a=(s||[]).filter(e=>String(e.option_symbol)===_.id&&"PENDING"===String(e.status).toUpperCase()&&"SELL"===String(e.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0);me(a)}catch{I(0),me(0)}})()},[e,null==_?void 0:_.id]);const he=Je.useMemo(()=>{const e=new Map;for(const t of de){const n=e.get(t.strike)||{};n[t.type]=t,e.set(t.strike,n)}return Array.from(e.entries()).map(([e,t])=>({strike:e,call:t.call,put:t.put})).sort((e,t)=>e.strike-t.strike)},[de]),pe=Je.useMemo(()=>{if(!le||0===he.length)return null;const e=le.currentPrice||0;let t=he[0].strike,n=Math.abs(he[0].strike-e);for(const s of he){const r=Math.abs(s.strike-e);r<n&&(n=r,t=s.strike)}return t},[le,he]),[fe,ge]=Je.useState(!1),[xe,ve]=Je.useState({qty:1,contractSize:100,loading:!1});return s?X.jsx("div",{className:"flex items-center justify-center p-12 text-muted-foreground",children:"Loading options data"}):X.jsxs("div",{className:"space-y-6",children:[X.jsx(uv,{}),$&&X.jsxs("div",{className:"text-xs bg-green-50 text-green-800 border border-green-200 rounded px-3 py-2",role:"status","aria-live":"polite",children:[$.kind.toUpperCase()," auction executed at ",new Date($.at).toLocaleTimeString(),"  refreshing"]}),X.jsx("div",{className:"sr-only",children:X.jsx(_v,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"invisible",onLoad:e=>{B.current=e,L(!0)},onVerify:e=>{q.current={token:String(e),at:Date.now()},W.current=!1,U.current&&(U.current(String(e)),U.current=null)},onExpire:()=>{W.current=!1},onError:()=>{W.current=!1,L(!1),z(e=>e+1)}},`matrix-invisible-${F}`)}),X.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-4 bg-muted/30 rounded-lg",children:[Q?X.jsx("div",{className:"fixed top-3 right-3 z-50 bg-popover text-popover-foreground border rounded px-3 py-2 shadow",children:X.jsx("span",{className:"text-xs",children:Q.msg})}):null,X.jsxs("div",{className:"flex flex-col gap-1",children:[X.jsx(fv,{}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Underlying"}),X.jsxs(Cx,{value:x,onValueChange:v,children:[X.jsx(Px,{className:"h-8 w-60",children:X.jsx(Ox,{placeholder:"Select"})}),X.jsx(Ix,{children:t.map(e=>X.jsx(Rx,{value:e.symbol,children:X.jsxs("span",{className:"inline-block max-w-[12rem] truncate align-bottom",children:[e.symbol,"  ",e.name]})},e.symbol))})]})]}),X.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Prices are not live. Please use Refresh before trading to ensure current pricing."})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Type"}),X.jsx(Mx,{size:"sm",variant:"all"===j?"default":"outline",className:"h-8",onClick:()=>N("all"),children:"All"}),X.jsx(Mx,{size:"sm",variant:"calls"===j?"default":"outline",className:"h-8 text-green-600 border-green-600",onClick:()=>N("calls"),children:"Calls"}),X.jsx(Mx,{size:"sm",variant:"puts"===j?"default":"outline",className:"h-8 text-red-600 border-red-600",onClick:()=>N("puts"),children:"Puts"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Moneyness"}),X.jsx(Mx,{size:"sm",variant:"all"===k?"default":"outline",className:"h-8",onClick:()=>S("all"),children:"All"}),X.jsx(Mx,{size:"sm",variant:"ITM"===k?"default":"outline",className:"h-8",onClick:()=>S("ITM"),children:"ITM"}),X.jsx(Mx,{size:"sm",variant:"ATM"===k?"default":"outline",className:"h-8",onClick:()=>S("ATM"),children:"ATM"}),X.jsx(Mx,{size:"sm",variant:"OTM"===k?"default":"outline",className:"h-8",onClick:()=>S("OTM"),children:"OTM"})]}),X.jsxs("label",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5",checked:a,onChange:e=>i(e.target.checked)}),"Hide illiquid (no quotes)"]})]}),le?X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[X.jsxs(_x,{className:"lg:col-span-2",children:[X.jsxs(Ex,{className:"pb-3",children:[X.jsxs(Tx,{className:"text-lg flex items-center justify-between",children:[X.jsxs("span",{children:[le.symbol," Options"]}),X.jsxs("span",{className:"flex items-center gap-2 text-sm font-normal text-muted-foreground",children:["Contracts: ",le.options.length,X.jsx(Mx,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>se(),disabled:J,title:"Refresh underlying and options now",children:J?"Refreshing":"Refresh Prices"})]})]}),X.jsxs("div",{className:"mt-2",children:[X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expiration",(()=>{const e=x,t="number"==typeof h[e]?Math.min(Math.max(h[e],1),12):Math.max(2,ce.length),n=Math.max(0,12-t);return X.jsxs("span",{className:"ml-2 text-[11px] text-muted-foreground/80",children:["Expiries: ",t,"/12 (left: ",n,")"]})})(),(()=>{const e=x,t="number"==typeof f[e]?f[e]:.03;return X.jsxs("span",{className:"ml-3 text-[11px] text-muted-foreground/80",children:["ATM: ",Math.round(100*t),"% (max 10%)"]})})()]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(Mx,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>(async()=>{const e=x;if(!e)return;const t=h[e]??G,n=Math.min(t+3,12);p(t=>({...t,[e]:n}));const s=f[e];let r="";if("number"!=typeof s||s<.1){const t=.1;g(n=>({...n,[e]:t})),r=`  ATM widened to ${Math.round(100*t)}%`}Z({msg:`Expiries expanded to ${n}${r}`,at:Date.now()});try{await oe()}catch{}})(),title:(()=>{const e=x,t="number"==typeof h[e]?h[e]:Math.max(2,ce.length);return`Adds +3 up to 12${"number"!=typeof f[e]||f[e]<.1?"  auto-widens ATM to 10% if needed":""} (now: ${t}/12)`})(),children:"+ Expiries"}),X.jsx(Mx,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>(async()=>{const e=x;if(!e)return;const t=f[e]??K,n=Math.min(t+.05,.1);g(t=>({...t,[e]:n})),Z({msg:`ATM range widened to ${Math.round(100*n)}%`,at:Date.now()});try{await oe()}catch{}})(),title:(()=>{const e=x,t="number"==typeof f[e]?f[e]:.03;return`Widens by +5% up to 10% (now: ${Math.round(100*t)}%)`})(),children:"+ ATM Range"}),X.jsx(Mx,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",onClick:async()=>{const e=x;if(e){p(t=>{const n={...t};return delete n[e],n}),g(t=>{const n={...t};return delete n[e],n}),Z({msg:"Window reset",at:Date.now()});try{await oe()}catch{}try{const e=new URL(window.location.href);e.searchParams.delete("exp"),e.searchParams.delete("atm"),window.history.replaceState({},"",`${e.pathname}${e.search}${e.hash}`)}catch{}}},title:"Reset window",children:"Reset"})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ce.slice(0,12).map(e=>X.jsx("button",{onClick:()=>b(e),className:"px-2 py-1 rounded-full border text-xs "+(y===e?"bg-primary text-primary-foreground border-primary":"bg-card hover:bg-accent border-muted"),title:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),children:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},e))})]})]}),X.jsx(Dx,{children:X.jsx("div",{className:"border rounded-lg overflow-hidden",children:X.jsx("div",{className:"overflow-x-auto max-h-[70vh] overflow-y-auto",children:X.jsxs("table",{className:"w-full table-fixed",children:[X.jsx("thead",{className:"bg-muted sticky top-0 z-10",children:X.jsxs("tr",{children:[X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-green-50 w-[10%]",children:"CALLS"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Bid"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Ask"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Last"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-primary text-primary-foreground w-[12%]",children:"Strike"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Bid"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Ask"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Last"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-red-50 w-[10%]",children:"PUTS"})]})}),X.jsx("tbody",{children:he.map(e=>{var t,n;const s=null!=pe&&e.strike===pe;return X.jsxs("tr",{className:(s?"bg-yellow-50":"")+" border-b",children:[X.jsx("td",{className:"px-2 py-2 text-center bg-green-50",children:e.call?X.jsx(Mx,{size:"sm",variant:(null==_?void 0:_.id)===e.call.id?"default":"ghost",className:"text-xs h-6 px-1 w-full",onClick:()=>E(e.call),children:"Select"}):X.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?e.call.bidPrice>0?X.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["",Bx(e.call.bidPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?e.call.askPrice>0?X.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["",Bx(e.call.askPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?X.jsxs("span",{className:"font-medium text-sm",children:["",Bx(e.call.lastPrice>0?e.call.lastPrice:(null==(t=ae.get(e.call.id))?void 0:t.price)||0,2)]}):"-"}),X.jsxs("td",{className:"px-2 py-2 text-center font-mono font-bold text-lg bg-muted",children:[X.jsxs("div",{className:s?"text-yellow-600 font-extrabold text-xl":"",children:["",e.strike]}),s&&X.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"ATM"})]}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?e.put.bidPrice>0?X.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["",Bx(e.put.bidPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?e.put.askPrice>0?X.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["",Bx(e.put.askPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?X.jsxs("span",{className:"font-medium text-sm",children:["",Bx(e.put.lastPrice>0?e.put.lastPrice:(null==(n=ae.get(e.put.id))?void 0:n.price)||0,2)]}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center bg-red-50",children:e.put?X.jsx(Mx,{size:"sm",variant:(null==_?void 0:_.id)===e.put.id?"default":"ghost",className:"text-xs h-6 px-1 w-full",onClick:()=>E(e.put),children:"Select"}):X.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})})]},e.strike)})})]})})})})]}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs(_x,{children:[X.jsx(Ex,{className:"pb-3",children:X.jsx(Tx,{className:"text-sm",children:"Company Info"})}),X.jsxs(Dx,{className:"space-y-4",children:[X.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[X.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:X.jsx(Jx,{ticker:le.symbol,alt:`${le.name} logo`,className:"w-full h-full object-contain p-1 bg-white"})}),X.jsxs("div",{className:"text-center",children:[X.jsx("h3",{className:"font-mono text-lg font-bold",children:le.symbol}),X.jsx("p",{className:"text-xs text-muted-foreground",children:le.name})]})]}),X.jsxs("div",{className:"text-center",children:[X.jsxs("div",{className:"text-2xl font-bold",children:["",Bx(le.currentPrice,2)]}),X.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm "+(le.change>=0?"text-green-600":"text-red-600"),children:[le.change>=0?"+":"",Bx(le.change,2)," (",Wx(le.changePercent,2,!0),")"]})]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Contracts: ",le.options.length]})]})]}),X.jsxs(_x,{children:[X.jsx(Ex,{className:"pb-3",children:X.jsx(Tx,{className:"text-sm",children:"Option Details"})}),X.jsx(Dx,{className:"space-y-3",children:_?X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx(lx,{variant:"call"===_.type?"default":"secondary",children:_.type.toUpperCase()}),X.jsx("span",{className:"text-sm text-muted-foreground",children:le.symbol})]}),X.jsxs("div",{className:"text-center",children:[X.jsxs("div",{className:"text-2xl font-bold",children:["",_.strike]}),X.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(_.maturity).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),X.jsx("div",{className:"text-[11px] text-muted-foreground mb-2",children:"Quotes are per unit (/unit). Each contract represents 100 units of the underlying."}),le&&(h[le.symbol]||f[le.symbol])?X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Window: ",h[le.symbol]?`${h[le.symbol]} expiries`:"",h[le.symbol]&&f[le.symbol]?"  ":"",f[le.symbol]?`${Math.round(100*(f[le.symbol]||0))}% ATM`:""]}):null,X.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Bid (per unit)"}),X.jsx("div",{className:"font-semibold text-green-600",children:_.bidPrice>0?`${Bx(_.bidPrice,2)}`:""})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Last"}),X.jsxs("div",{className:"font-semibold",children:["",Bx(_.lastPrice,2)]})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Ask (per unit)"}),X.jsx("div",{className:"font-semibold text-red-600",children:_.askPrice>0?`${Bx(_.askPrice,2)}`:""})]})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Qty"}),X.jsx("input",{type:"number",min:1,max:1e3,value:C,onChange:e=>O(parseInt(e.target.value)||1),className:"w-20 h-8 px-2 py-1 border rounded text-xs","aria-label":"Quantity"})]}),X.jsx(Mx,{className:"bg-green-600 hover:bg-green-700",onClick:()=>async function(){var e;if(!le||!_)return;const t=Math.max(1,Math.min(1e3,C||1));ge(!0),ve({qty:t,contractSize:100,loading:!0});try{const n="https://fsqds-production.yadavkartik-arbeit.workers.dev";let s=null;try{const e=await fetch(`${n}/api/market/stock-prices?tickers=${encodeURIComponent(le.symbol)}&refresh=1&delta=1`);if(e.ok){const t=await e.json().catch(()=>({})),n=Array.isArray(null==t?void 0:t.data)?t.data.find(e=>String(e.ticker)===le.symbol):null;n&&"number"==typeof n.price&&(s=Number(n.price))}}catch{}const r=100,a=_.askPrice>0?_.askPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0,i=a>0?a*t*r:0,o=Number((null==Av?void 0:Av.VITE_CONTRACT_FEE_EUR)??"0.25"),l=Number((null==Av?void 0:Av.VITE_FEES_BPS)??"2");ve({qty:t,pxPerUnit:a,contractSize:r,notional:i,fees:o*t+l/1e4*i,spot:s,loading:!1})}catch{ve(e=>({...e,loading:!1}))}}(),disabled:!e||T,children:(()=>{var e;const t=_.askPrice>0?_.askPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0,n=Math.max(1,Math.min(1e3,C||1));return t>0?`Buy ${Bx(t*n*100,2)}`:"Buy"})()}),X.jsx(Mx,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",onClick:()=>async function(t){var n,s,r;if(!e||!le||!_||T)return;const a=Math.max(1,Math.min(1e3,C||1));{const e=Math.max(0,P-ue);if(a>e)return void M(`Cannot sell ${a}: available ${e} (staged ${ue} of ${P})`)}D(!0),M("Refreshing prices");try{await se(!0);let e=await re();if(e||(z(e=>e+1),e=await re()),("undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)&&!e)return void M("Verification failed  please try again");const i=await Dv.placeOrder({optionSymbol:_.id,ticker:le.symbol,type:_.type,strike:_.strike,expiry:_.maturity,quantity:a,action:t,orderType:"market"},{turnstileToken:e});if(i.success){const e=i.previewPrice?` (preview ${Bx(i.previewPrice,2)}`:"",t="number"==typeof i.estimatedFees?`${e?"  ":" ("}fees ${Bx(i.estimatedFees,2)})`:e?")":"";if(i.auctionSlot){const a="open"===i.auctionSlot?null==(n=H.cutoffs)?void 0:n.openCut:null==(s=H.cutoffs)?void 0:s.closeCut,o=a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",l=(null==(r=null==i?void 0:i.order)?void 0:r.note)?`  ${String(i.order.note)}`:"";M(`Order staged for ${i.auctionSlot.toUpperCase()}${e}${t}${l}  cancel until ${o} Berlin`)}else M("Order filled");window.dispatchEvent(new CustomEvent("portfolio-updated"))}else M(i.error||"Failed to place order")}catch(mj){M("Error placing order")}finally{D(!1),setTimeout(()=>M(null),4e3)}}("sell"),disabled:!e||T||C>Math.max(0,P-ue),title:C>Math.max(0,P-ue)?`Available ${Math.max(0,P-ue)} (staged ${ue} of ${P})`:"",children:(()=>{var e;const t=_.bidPrice>0?_.bidPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0,n=Math.max(1,Math.min(1e3,C||1));return t>0?`Sell ${Bx(t*n*100,2)}`:"Sell"})()})]}),(()=>{var e;const t=_?_.askPrice>0?_.askPrice:(null==(e=ae.get(_.id))?void 0:e.price)||0:null;if(!t)return null;const n=t*Math.max(1,Math.min(1e3,C||1))*100;return X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Total Notional: ",Bx(n,2)]})})(),A&&X.jsx("div",{className:"text-xs text-muted-foreground",children:A}),X.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-muted-foreground",children:[X.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/81/EUREX_Logo_Blue_sRGB.png",alt:"Eurex",className:"h-4"}),X.jsx("span",{children:"Powered by Deutsche Boerse"})]})]}):X.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:"Select an option to view details"})})]})]})]}):X.jsx("div",{className:"text-center p-12 text-muted-foreground",children:"No companies available"}),fe?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Confirm Buy"}),xe.loading?X.jsx("div",{className:"text-xs text-muted-foreground",children:"Computing latest preview"}):X.jsxs("div",{className:"space-y-2 text-xs",children:[X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Cost (approx)"}),X.jsxs("div",{className:"font-semibold",children:["",Bx(Number((xe.notional||0)+(xe.fees||0)),2)]}),X.jsx("div",{className:"text-[11px] text-muted-foreground",title:`Per-unit ${Bx(Number(xe.pxPerUnit||0),2)}  Qty ${xe.qty}  Contract ${xe.contractSize} + Fees`,children:"Per-unit & fees included"})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Breakdown"}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:[X.jsxs("div",{children:["Unit premium: ",Bx(Number(xe.pxPerUnit||0),2)]}),X.jsxs("div",{children:["Qty: ",xe.qty]}),X.jsxs("div",{children:["Contract: ",xe.contractSize]}),X.jsxs("div",{children:["Notional: ",Bx(Number(xe.notional||0),2)]}),X.jsxs("div",{children:["Fees: ",Bx(Number(xe.fees||0),2)]})]})]})]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Spot ",null!=xe.spot?`${Bx(Number(xe.spot||0),2)}`:""]})]}),X.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[X.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{ge(!1)},children:"Cancel"}),X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-60",disabled:xe.loading,onClick:async()=>{ge(!1),await async function(){var t,n;if(!e||!le||!_||T)return;const s=xe.qty||Math.max(1,Math.min(1e3,C||1));D(!0),M("Placing");try{await se(!0);let e=await re();e||(z(e=>e+1),e=await re());const r=await Dv.placeOrder({optionSymbol:_.id,ticker:le.symbol,type:_.type,strike:_.strike,expiry:_.maturity,quantity:s,action:"buy",orderType:"market"},{turnstileToken:e});if(r.success){const e=r.previewPrice?` (preview ${Bx(r.previewPrice,2)}`:"",s="number"==typeof r.estimatedFees?`${e?"  ":" ("}fees ${Bx(r.estimatedFees,2)})`:e?")":"";if(r.auctionSlot){const a="open"===r.auctionSlot?null==(t=H.cutoffs)?void 0:t.openCut:null==(n=H.cutoffs)?void 0:n.closeCut,i=a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";M(`Order staged for ${r.auctionSlot.toUpperCase()}${e}${s}  cancel until ${i} Berlin`)}else M("Order filled");window.dispatchEvent(new CustomEvent("portfolio-updated")),await oe()}else M(r.error||"Failed to place order")}catch(mj){M("Error placing order")}finally{D(!1),setTimeout(()=>M(null),4e3)}}()},children:"Confirm Buy"})]})]})}):null,u&&X.jsx("div",{className:"mt-6",children:X.jsx(pv,{})})]})}function Cv({className:e,type:t,...n}){return X.jsx("input",{type:t,"data-slot":"input",className:nx("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const Ov=Oa("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pv=Je.forwardRef(({className:e,...t},n)=>X.jsx(Re,{ref:n,className:Pa(Ov(),e),...t}));Pv.displayName=Re.displayName;const Iv=new class{constructor(){this.companiesCache=null,this.cacheTimestamp=0,this.CACHE_DURATION=3e5}async getCompanies(e=!1){if(!e&&this.companiesCache&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION)return this.companiesCache;try{const{data:e}=await ni.from("seasons").select("id").eq("status","active").single();if(!e)return Xx.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}));const{data:t}=await ni.from("adx_tickers").select("*").eq("season_id",e.id).eq("is_active",!0);if(t&&t.length>0){const{data:e}=await ni.from("stock_prices").select("*").in("ticker",t.map(e=>e.symbol));this.companiesCache=t.map(t=>{const n=null==e?void 0:e.find(e=>e.ticker===t.symbol),s=Xx.find(e=>e.ticker===t.symbol);return{id:t.id,ticker:t.symbol,name:t.name||(null==s?void 0:s.name)||t.symbol,sector:(null==s?void 0:s.sector)||"Unknown",logo:(null==t?void 0:t.logo_url)||Qx(t.symbol),adr:(null==s?void 0:s.adr)||t.symbol,price:null==n?void 0:n.price,change:null==n?void 0:n.change,changePercent:null==n?void 0:n.change_percent}})}else this.companiesCache=Xx.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}));return this.cacheTimestamp=Date.now(),this.companiesCache}catch(t){return Xx.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}))}}async getRevenuePredictions(){try{const{data:{user:e}}=await ni.auth.getUser();if(!e)return[];const t=await this.getCompanies(),{data:n}=await ni.from("seasons").select("id, name").eq("status","active").single();if(!n)return[];const{data:s}=await ni.from("adx_revenue_predictions").select("*").eq("season_id",n.id).eq("user_id",e.id),{data:r}=await ni.from("adx_revenue_actuals").select("symbol, actual_value").eq("season_id",n.id),a=new Map;return(r||[]).forEach(e=>a.set(String(e.symbol).toUpperCase(),e.actual_value)),t.map(e=>{var t;const r=null==s?void 0:s.find(t=>t.symbol===e.ticker),i=(new Date).toISOString().slice(0,10),o=(null==(t=null==r?void 0:r.updated_at)?void 0:t.slice(0,10))===i&&r.updates_today||0,l="number"==typeof(null==r?void 0:r.value)?Number(null==r?void 0:r.value):void 0,c=a.get(e.ticker),d="number"==typeof l&&"number"==typeof c?Math.pow(l-c,2):void 0;return{ticker:e.ticker,companyName:e.name,logo:e.logo,quarter:n.name||"Current Season",prediction:l,actualRevenue:c,mse:d,updatesLeft:Math.max(0,5-o)}})}catch(e){return[]}}async submitPrediction(e,t,n){var s;try{const{data:{user:r}}=await ni.auth.getUser();if(!r)return{success:!1,error:"Authentication required"};const{data:a}=await ni.from("seasons").select("id").eq("status","active").single();if(!a)return{success:!1,error:"No active season"};const i=!0,o="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),l=(null==n?void 0:n.turnstileToken)||(o?"dev-bypass-token":void 0);if(i&&!l)return{success:!1,error:"Verification required"};const c=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/adx_save_prediction",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(s=(await ni.auth.getSession()).data.session)?void 0:s.access_token}`},body:JSON.stringify({seasonId:a.id,symbol:e,value:t,turnstileToken:l||(i?void 0:"dev-bypass-token")})}),d=await c.json();return d.ok?{success:!0}:{success:!1,error:d.error||"Failed to save prediction"}}catch(r){return{success:!1,error:"An unexpected error occurred"}}}async getOptionsForTrading(){try{const e=await this.getCompanies(),t=new Map,n=((new Date).toISOString().slice(0,10),"https://fsqds-production.yadavkartik-arbeit.workers.dev");for(const r of e)try{const e=await fetch(`${n}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(r.ticker)}&liquid=true&maxExpiries=6`,{headers:{Accept:"application/json"}});if(!e.ok){t.set(r.ticker,[]);continue}const s=await e.json(),a=Array.isArray(null==s?void 0:s.data)?s.data:[];t.set(r.ticker,a||[])}catch{t.set(r.ticker,[])}const s=[];for(const r of e){const e=t.get(r.ticker)||[];for(const t of e){const e=Number(t.display_bid)||0,n=Number(t.display_ask)||0,a=Number(t.display_last)||0,i=e>0&&n>0?(e+n)/2:a;s.push({id:t.option_symbol,ticker:t.ticker,companyName:r.name,logo:r.logo||Qx(t.ticker),type:"put"===String(t.type).toLowerCase()?"put":"call",strike:Number(t.strike)||0,expiry:t.expiry,bid:e,ask:n,mid:i,volume:0,openInterest:0})}}return s}catch(e){return[]}}async getCompanyByTicker(e){return(await this.getCompanies()).find(t=>t.ticker===e)||null}clearCache(){this.companiesCache=null,this.cacheTimestamp=0}};function Rv({company:e,existingPrediction:t,onSubmit:n}){var s,r;const[a,i]=Je.useState(!t),[o,l]=Je.useState((null==(s=null==t?void 0:t.predictedRevenue)?void 0:s.toString())||""),[c,d]=Je.useState(!1);return X.jsxs(_x,{className:"overflow-hidden",children:[X.jsx(Ex,{className:"pb-4",children:X.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[X.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-white flex-shrink-0 p-0.5",children:X.jsx(Jx,{ticker:e.symbol,src:e.logoUrl,alt:`${e.name} logo`,className:"w-full h-full object-contain"})}),X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsx(Tx,{className:"font-mono text-lg mb-1",children:e.symbol}),X.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.name})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[t&&X.jsx(lx,{variant:"submitted"===t.status?"default":"secondary",className:"text-xs",children:"submitted"===t.status?"Submitted":"Verified"}),c&&X.jsx(lx,{variant:"default",className:"text-xs bg-green-600 text-white",children:"Saved!"})]})]})}),X.jsx(Dx,{className:"space-y-4",children:a?X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:`prediction-${e.id}`,className:"text-sm",children:"Your Prediction (Billions $)"}),X.jsx(Cv,{id:`prediction-${e.id}`,type:"number",step:"0.01",placeholder:"e.g., 125.50",value:o,onChange:e=>l(e.target.value),className:"mt-1"})]}),X.jsxs("div",{className:"flex gap-2",children:[X.jsxs(Mx,{size:"sm",onClick:async()=>{if(o&&parseFloat(o)>0){await n(e.id,parseFloat(o))&&(i(!1),d(!0),setTimeout(()=>d(!1),2500))}},className:"flex-1",children:[X.jsx(Hn,{className:"w-3 h-3 mr-1"}),"Submit"]}),t&&X.jsx(Mx,{size:"sm",variant:"outline",onClick:()=>{var e;l((null==(e=null==t?void 0:t.predictedRevenue)?void 0:e.toString())||""),i(!1)},children:X.jsx(os,{className:"w-3 h-3"})})]})]}):X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{className:"p-3 rounded-lg bg-muted/20 border",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Prediction"}),X.jsxs("div",{className:"font-semibold text-lg",children:["$",null==t?void 0:t.predictedRevenue,"B"]})]}),X.jsxs(Mx,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[X.jsx(Qn,{className:"w-3 h-3 mr-1"}),"Edit"]})]}),(null==t?void 0:t.actualRevenue)&&X.jsx("div",{className:"mt-2 pt-2 border-t",children:X.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("span",{className:"text-muted-foreground",children:"Actual: "}),X.jsxs("span",{className:"font-semibold",children:["$",t.actualRevenue,"B"]})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-muted-foreground",children:"MSE: "}),X.jsx("span",{className:"font-semibold",children:null==(r=t.mse)?void 0:r.toFixed(2)})]})]})})]}),t&&X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Submitted on ",new Date(t.submittedAt).toLocaleDateString()]})]})})]})}function Lv({userStats:e}){return X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsxs(Tx,{className:"flex items-center gap-2",children:[X.jsx(Zn,{className:"w-5 h-5"}),"Your Performance"]})}),X.jsxs(Dx,{children:[X.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[X.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/20",children:[X.jsx("div",{className:"text-2xl font-bold mb-1",children:e.totalPredictions}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"Predictions Made"})]}),X.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/20",children:[X.jsx("div",{className:"text-2xl font-bold mb-1",children:e.avgMSE>0?e.avgMSE.toFixed(2):""}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg MSE"})]})]}),X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Rank"}),X.jsx(lx,{variant:"default",className:"text-xs",children:e.currentRank>0?`#${e.currentRank}`:""})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Rank"}),X.jsx(lx,{variant:"outline",className:"text-xs",children:e.bestRank>0?`#${e.bestRank}`:""})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Verified"}),X.jsxs("span",{className:"text-sm font-semibold",children:[e.verifiedPredictions,"/",e.totalPredictions]})]})]})]})]})}function Fv(){const{user:e}=di(),[t,n]=Je.useState([]),[s,r]=Je.useState([]),[a,i]=Je.useState([]),[o,l]=Je.useState([]),[c,d]=Je.useState(""),[u,m]=Je.useState(null),[h,p]=Je.useState(null),[f,g]=Je.useState(null),[x,v]=Je.useState(null),[y,b]=Je.useState({totalPredictions:0,verifiedPredictions:0,avgMSE:0,currentRank:0,bestRank:0}),[w,j]=Je.useState(!0),[N,k]=Je.useState(null),[S,_]=Je.useState(0);Je.useEffect(()=>{(async()=>{if(e){j(!0);try{const[e,t]=await Promise.all([Iv.getCompanies(),Iv.getRevenuePredictions()]);n(e),r(t);const{data:s}=await ni.from("seasons").select("id, name, starts_at, ends_at, status").eq("status","active").single();if(s){m(s.id),d(s.name||"Current Season"),p(s.starts_at||null),g(s.ends_at||null),v(s.status||null);const e=(new Date).toISOString(),n=t.filter(e=>null!=e.prediction).map(t=>({id:`${t.ticker}-${e}`,companyId:t.ticker,quarter:s.name||"Current Season",submittedAt:e,predictedRevenue:t.prediction,actualRevenue:t.actualRevenue,mse:t.mse,status:null!=t.actualRevenue?"verified":"submitted"}));i(n);const r=n.length,a=n.filter(e=>"verified"===e.status),o=a.length>0?a.reduce((e,t)=>e+(t.mse||0),0)/a.length:0,c=[{quarter:s.name||"Current Season",mse:o||0,rank:0}];l(c),b({totalPredictions:r,verifiedPredictions:a.length,avgMSE:o,currentRank:0,bestRank:0})}}catch(mj){}finally{j(!1)}}})()},[e]),Je.useEffect(()=>{if(!e||!u)return;let t=null;const n=async()=>{try{const e=await Iv.getRevenuePredictions();r(e);const t=(new Date).toISOString(),n=e.filter(e=>"number"==typeof e.prediction).map(e=>({id:`${e.ticker}-${t}`,companyId:e.ticker,quarter:c||"Current Season",submittedAt:t,predictedRevenue:e.prediction,actualRevenue:e.actualRevenue,mse:e.mse,status:null!=e.actualRevenue?"verified":"submitted"}));i(n);const s=n.filter(e=>"verified"===e.status),a=s.length>0?s.reduce((e,t)=>e+(t.mse||0),0)/s.length:0;b(e=>({...e,totalPredictions:n.length,verifiedPredictions:s.length,avgMSE:a})),l([{quarter:c||"Current Season",mse:a||0,rank:0}])}catch(mj){}},s=()=>{t&&window.clearTimeout(t),t=window.setTimeout(n,500)},a=ni.channel(`predictions-${u}-${e.id}`).on("postgres_changes",{event:"*",schema:"public",table:"adx_revenue_actuals",filter:`season_id=eq.${u}`},()=>s()).on("postgres_changes",{event:"*",schema:"public",table:"adx_revenue_predictions",filter:`season_id=eq.${u},user_id=eq.${e.id}`},()=>s()).subscribe();return()=>{t&&window.clearTimeout(t);try{ni.removeChannel(a)}catch{}}},[null==e?void 0:e.id,u,c]);const E=async(e,n)=>{if(!N)return Ga.error("Please complete verification"),!1;const s=t.find(t=>t.id===e||t.ticker===e);if(!s)return!1;const a=await Iv.submitPrediction(s.ticker,n,{turnstileToken:N||void 0});if(k(null),_(e=>e+1),a.success){Ga.success(`Prediction saved for ${s.ticker}  $${Bx(n,2)}B`);const e=await Iv.getRevenuePredictions();r(e);const t=(new Date).toISOString(),a=e.filter(e=>"number"==typeof e.prediction).map(e=>({id:`${e.ticker}-${t}`,companyId:e.ticker,quarter:c||"Current Season",submittedAt:t,predictedRevenue:e.prediction,actualRevenue:e.actualRevenue,mse:e.mse,status:null!=e.actualRevenue?"verified":"submitted"}));i(a);const o=a.filter(e=>"verified"===e.status),d=o.length>0?o.reduce((e,t)=>e+(t.mse||0),0)/o.length:0;b(e=>({...e,totalPredictions:a.length,verifiedPredictions:o.length,avgMSE:d})),l([{quarter:c||"Current Season",mse:d||0,rank:0}])}else Ga.error(a.error||"Failed to save prediction");return a.success},T=s;return X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Revenue Predictions"}),X.jsx("p",{className:"text-muted-foreground text-lg",children:"Submit your quarterly revenue predictions and compete for accuracy"})]}),X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{children:"Season"})}),X.jsx(Dx,{children:X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("div",{className:"text-base font-semibold",children:c||"Current Season"}),x&&X.jsx(lx,{variant:"active"===x?"default":"secondary",className:"text-xs capitalize",children:x})]}),h||f?X.jsxs("div",{className:"text-xs text-muted-foreground",children:[h&&X.jsxs("span",{children:["Starts: ",new Date(h).toLocaleDateString()]}),h&&f&&X.jsx("span",{children:"  "}),f&&X.jsxs("span",{children:["Ends: ",new Date(f).toLocaleDateString()]})]}):null,h&&f?(()=>{const e=new Date,t=new Date(h),n=new Date(f),s=Math.max(0,n.getTime()-t.getTime()),r=Math.min(Math.max(0,e.getTime()-t.getTime()),s),a=Math.max(0,n.getTime()-e.getTime()),i=s>0?r/s*100:0,o=Math.ceil(a/864e5);return X.jsxs("div",{className:"space-y-2",children:[X.jsx(Sx,{value:i,className:"h-2"}),X.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[X.jsxs("span",{children:[Math.round(i),"% complete"]}),X.jsxs("span",{children:[o," days left"]})]})]})})():X.jsx("div",{className:"text-xs text-muted-foreground",children:"Season dates not available"})]})})]}),X.jsx(Lv,{userStats:y})]}),X.jsxs(sx,{defaultValue:"submit",className:"w-full",children:[X.jsxs(rx,{className:"grid w-full grid-cols-3 max-w-md",children:[X.jsx(ax,{value:"submit",children:"Submit"}),X.jsx(ax,{value:"history",children:"History"}),X.jsx(ax,{value:"analytics",children:"Analytics"})]}),X.jsx(ix,{value:"submit",className:"mt-6",children:X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Predictions"}),X.jsxs(lx,{variant:"outline",className:"text-xs",children:[T.filter(e=>void 0!==e.prediction).length,"/",t.length," submitted"]})]}),X.jsx("div",{className:"flex justify-center",children:X.jsx(_v,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>k(e),onExpire:()=>k(null)},S)}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{const t=T.find(t=>t.ticker===e.ticker),n=t&&void 0!==t.prediction,s={id:e.id,symbol:e.ticker,name:e.name,logoUrl:e.logo},r=n?{id:`${e.id}`,companyId:e.id,quarter:t.quarter,submittedAt:(new Date).toISOString(),predictedRevenue:t.prediction,status:null!=t.actualRevenue?"verified":"submitted",actualRevenue:t.actualRevenue,mse:t.mse}:void 0;return X.jsx(Rv,{company:s,existingPrediction:r,onSubmit:E},e.id)})})]})}),X.jsx(ix,{value:"history",className:"mt-6",children:X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{children:"Prediction History"})}),X.jsx(Dx,{children:X.jsx("div",{className:"space-y-4",children:0===a.length?X.jsx("div",{className:"text-sm text-muted-foreground",children:"No prediction history yet."}):a.map(e=>{var n;const s=t.find(t=>t.ticker===e.companyId);return s?X.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-8 h-8 rounded overflow-hidden bg-white p-0.5",children:X.jsx(Jx,{ticker:s.ticker,src:s.logo,alt:s.name,className:"w-full h-full object-contain"})}),X.jsxs("div",{children:[X.jsxs("div",{className:"font-semibold",children:[s.ticker," - ",e.quarter]}),X.jsxs("div",{className:"text-sm text-muted-foreground",children:["Predicted: $",e.predictedRevenue,"B",e.actualRevenue&&X.jsxs("span",{children:[" | ","Actual: $",e.actualRevenue,"B"," | ","MSE: ",null==(n=e.mse)?void 0:n.toFixed(2)]})]})]})]}),X.jsxs("div",{className:"text-right",children:[X.jsx(lx,{variant:"verified"===e.status?"default":"outline",className:"text-xs",children:e.status}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.submittedAt).toLocaleDateString()})]})]},e.id):null})})})]})}),X.jsx(ix,{value:"analytics",className:"mt-6",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{children:"MSE Trend"})}),X.jsx(Dx,{children:o.length>0?X.jsx(Yt,{width:"100%",height:200,children:X.jsxs(Vt,{data:o,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"quarter",tick:{fontSize:12}}),X.jsx(Kt,{tick:{fontSize:12}}),X.jsx(Qt,{formatter:e=>[e,"MSE"]}),X.jsx(Xt,{type:"monotone",dataKey:"mse",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444"}})]})}):X.jsx("div",{className:"flex items-center justify-center h-[200px] text-sm text-muted-foreground",children:"No historical data available"})})]}),X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{children:"Ranking Progress"})}),X.jsx(Dx,{children:o.length>0&&o.some(e=>e.rank>0)?X.jsx(Yt,{width:"100%",height:200,children:X.jsxs(Zt,{data:o,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"quarter",tick:{fontSize:12}}),X.jsx(Kt,{tick:{fontSize:12},reversed:!0}),X.jsx(Qt,{formatter:e=>[`#${e}`,"Rank"]}),X.jsx(Jt,{dataKey:"rank",fill:"#3b82f6"})]})}):X.jsx("div",{className:"flex items-center justify-center h-[200px] text-sm text-muted-foreground",children:"Rankings will appear after predictions are verified"})})]})]})})]})]})}var[zv,Bv]=J("Tooltip",[Le]),Uv=Le(),qv="TooltipProvider",Wv=700,$v="tooltip.open",[Yv,Vv]=zv(qv),Hv=e=>{const{__scopeTooltip:t,delayDuration:n=Wv,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:a}=e,[i,o]=Je.useState(!0),l=Je.useRef(!1),c=Je.useRef(0);return Je.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),X.jsx(Yv,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:Je.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:Je.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:Je.useCallback(e=>{l.current=e},[]),disableHoverableContent:r,children:a})};Hv.displayName=qv;var Gv="Tooltip",[Kv,Qv]=zv(Gv),Xv=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:r=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:o}=e,l=Vv(Gv,e.__scopeTooltip),c=Uv(t),[d,u]=Je.useState(null),m=$e(),h=Je.useRef(0),p=i??l.disableHoverableContent,f=o??l.delayDuration,g=Je.useRef(!1),[x=!1,v]=re({prop:s,defaultProp:r,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent($v))):l.onClose(),null==a||a(e)}}),y=Je.useMemo(()=>x?g.current?"delayed-open":"instant-open":"closed",[x]),b=Je.useCallback(()=>{window.clearTimeout(h.current),g.current=!1,v(!0)},[v]),w=Je.useCallback(()=>{window.clearTimeout(h.current),v(!1)},[v]),j=Je.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,v(!0)},f)},[f,v]);return Je.useEffect(()=>()=>window.clearTimeout(h.current),[]),X.jsx(Ye,{...c,children:X.jsx(Kv,{scope:t,contentId:m,open:x,stateAttribute:y,trigger:d,onTriggerChange:u,onTriggerEnter:Je.useCallback(()=>{l.isOpenDelayed?j():b()},[l.isOpenDelayed,j,b]),onTriggerLeave:Je.useCallback(()=>{p?w():window.clearTimeout(h.current)},[w,p]),onOpen:b,onClose:w,disableHoverableContent:p,children:n})})};Xv.displayName=Gv;var Zv="TooltipTrigger",Jv=Je.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=Qv(Zv,n),a=Vv(Zv,n),i=Uv(n),o=Je.useRef(null),l=ee(t,o,r.onTriggerChange),c=Je.useRef(!1),d=Je.useRef(!1),u=Je.useCallback(()=>c.current=!1,[]);return Je.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),X.jsx(Fe,{asChild:!0,...i,children:X.jsx(ne.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:l,onPointerMove:oe(e.onPointerMove,e=>{"touch"!==e.pointerType&&(d.current||a.isPointerInTransitRef.current||(r.onTriggerEnter(),d.current=!0))}),onPointerLeave:oe(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:oe(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:oe(e.onFocus,()=>{c.current||r.onOpen()}),onBlur:oe(e.onBlur,r.onClose),onClick:oe(e.onClick,r.onClose)})})});Jv.displayName=Zv;var ey="TooltipPortal",[ty,ny]=zv(ey,{forceMount:void 0}),sy=e=>{const{__scopeTooltip:t,forceMount:n,children:s,container:r}=e,a=Qv(ey,t);return X.jsx(ty,{scope:t,forceMount:n,children:X.jsx(ae,{present:n||a.open,children:X.jsx(ce,{asChild:!0,container:r,children:s})})})};sy.displayName=ey;var ry="TooltipContent",ay=Je.forwardRef((e,t)=>{const n=ny(ry,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...a}=e,i=Qv(ry,e.__scopeTooltip);return X.jsx(ae,{present:s||i.open,children:i.disableHoverableContent?X.jsx(cy,{side:r,...a,ref:t}):X.jsx(iy,{side:r,...a,ref:t})})}),iy=Je.forwardRef((e,t)=>{const n=Qv(ry,e.__scopeTooltip),s=Vv(ry,e.__scopeTooltip),r=Je.useRef(null),a=ee(t,r),[i,o]=Je.useState(null),{trigger:l,onClose:c}=n,d=r.current,{onPointerInTransitChange:u}=s,m=Je.useCallback(()=>{o(null),u(!1)},[u]),h=Je.useCallback((e,t)=>{const n=e.currentTarget,s={x:e.clientX,y:e.clientY},r=function(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return s}(s,function(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,r,a)){case a:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}(s,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(;t.length>=2;){const e=t[t.length-1],s=t[t.length-2];if(!((e.x-s.x)*(n.y-s.y)>=(e.y-s.y)*(n.x-s.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const t=e[s];for(;n.length>=2;){const e=n[n.length-1],s=n[n.length-2];if(!((e.x-s.x)*(t.y-s.y)>=(e.y-s.y)*(t.x-s.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...r,...function(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return Je.useEffect(()=>()=>m(),[m]),Je.useEffect(()=>{if(l&&d){const e=e=>h(e,d),t=e=>h(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,h,m]),Je.useEffect(()=>{if(i){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},s=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),r=!function(e,t){const{x:n,y:s}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,o=t[a].y,l=t[i].x,c=t[i].y;o>s!=c>s&&n<(l-e)*(s-o)/(c-o)+e&&(r=!r)}return r}(n,i);s?m():r&&(m(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,m]),X.jsx(cy,{...e,ref:a})}),[oy,ly]=zv(Gv,{isInside:!1}),cy=Je.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=e,l=Qv(ry,n),c=Uv(n),{onClose:d}=l;return Je.useEffect(()=>(document.addEventListener($v,d),()=>document.removeEventListener($v,d)),[d]),Je.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),X.jsx(ze,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:X.jsxs(Be,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[X.jsx(Ue,{children:s}),X.jsx(oy,{scope:n,isInside:!0,children:X.jsx(qe,{id:l.contentId,role:"tooltip",children:r||s})})]})})});ay.displayName=ry;var dy="TooltipArrow";Je.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=Uv(n);return ly(dy,n).isInside?null:X.jsx(We,{...r,...s,ref:t})}).displayName=dy;var uy=sy,my=ay;const hy=Hv,py=Xv,fy=Jv,gy=Je.forwardRef(({className:e,sideOffset:t=4,...n},s)=>X.jsx(uy,{children:X.jsx(my,{ref:s,sideOffset:t,className:Pa("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));function xy(e){const t=e.getUTCFullYear(),n=e.getUTCMonth(),s=e.getUTCDate();return new Date(Date.UTC(t,n,s))}function vy(e){if(!e)return 0;const t=new Date(e);if(Number.isNaN(t.getTime()))return 0;const n=function(e,t){const n=xy(e).getTime(),s=xy(t).getTime();return Math.round((n-s)/864e5)}(t,new Date);return Math.max(0,n)}gy.displayName=my.displayName;const yy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},by=[],wy=[];function jy({positions:e,stagedOrders:t,onSell:n,onExercise:s,spotByTicker:r,busyByPosition:a,cancellingId:i}){const[o,l]=tt.useState({});function c({ticker:e}){const t=String(e||"");return X.jsx(Jx,{ticker:t,className:"w-5 h-5 rounded-sm object-contain"})}return X.jsx("div",{className:"max-h-96 overflow-y-auto pr-1 space-y-3",children:e.map(e=>{var i,d;const u=(m=e,Math.min(Math.max(1,o[m.id]??m.quantity),m.quantity));var m;const h=(null==a?void 0:a[e.id])||null;return X.jsx(_x,{className:"overflow-hidden",children:X.jsxs(Dx,{className:"p-4",children:[X.jsxs("div",{className:"flex items-center justify-between mb-3",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx(c,{ticker:String(e.symbol||"")}),X.jsx(lx,{variant:"call"===(null==(d=null==(i=e.type)?void 0:i.toLowerCase)?void 0:d.call(i))?"default":"secondary",className:"text-xs",children:String(e.type??"").toUpperCase()}),X.jsxs("div",{children:[X.jsxs("div",{className:"font-semibold",children:[e.symbol," ",Bx(e.strike,2)]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Exp: ",new Date(e.expiry).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),X.jsxs("div",{className:"text-right",children:[X.jsx(lx,{variant:"bought"===e.action?"outline":"default",className:"text-xs mb-1",children:e.action}),(()=>{const n=(t||[]).filter(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase()&&"SELL"===String(t.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0),s=Math.max(0,Number(e.quantity||0)-n);return X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Qty: ",e.quantity,n>0?` (staged ${n}  avail ${s})`:""]})})(),t.some(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase())&&X.jsx("div",{className:"mt-1",children:X.jsx(lx,{variant:"outline",className:"text-[10px]",children:"Staged"})})]})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Price (per unit)"}),X.jsx("div",{className:"font-semibold",children:qx(e.avgPrice,2,"")})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Current (per unit)"}),X.jsx("div",{className:"font-semibold",children:qx(e.currentPrice,2,"")})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Unrealized P&L"}),X.jsxs("div",{className:"font-semibold "+(e.pnl>=0?"text-green-600":"text-red-600"),children:[Ux(e.pnl,2),"  (",Wx(e.pnlPercent,2,!0),")"]})]})]}),(()=>{const t=e.quantity,n=100,s=$x(e.currentPrice)-$x(e.avgPrice),a=s*t*n-(.25*t+2e-4*(Math.max(0,$x(e.currentPrice))*t*n)),i=r[String(e.symbol)]??null;let o=0;null==i||Number.isNaN(i)||(o="call"===String(e.type).toLowerCase()?Math.max(0,i-$x(e.strike)):Math.max(0,$x(e.strike)-i));const l=.25*t+2e-4*(Math.max(0,o)*t*n),c=o-$x(e.avgPrice),d=c*t*n-l;return X.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[X.jsxs("div",{className:"p-2 rounded border",children:[X.jsx("div",{className:"text-muted-foreground mb-1",children:"Sell now PnL (approx)"}),X.jsxs("div",{children:["Per unit: ",Ux(s,2)," "]}),X.jsxs("div",{children:["Total (after fees): ",Ux(a,2)," "]})]}),X.jsxs("div",{className:"p-2 rounded border",children:[X.jsx("div",{className:"text-muted-foreground mb-1",children:"Exercise now PnL (intrinsic, approx)"}),X.jsxs("div",{children:["Per unit: ",Ux(c,2)," "]}),X.jsxs("div",{children:["Total (after fees): ",Ux(d,2)," "]})]})]})})(),X.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[X.jsx("span",{className:"font-mono",children:e.id}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium (per unit) ",qx(Math.round(100*$x(e.currentPrice))/100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium per contract ",qx(Math.round(100*$x(e.currentPrice))/100*100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium total ",qx(Math.round(100*$x(e.currentPrice))/100*$x(e.quantity)*100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Cost basis total ",qx(Math.round(100*$x(e.avgPrice))/100*$x(e.quantity)*100,2,"")]})]}),X.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[X.jsx(In,{className:"w-3 h-3"}),e.daysToExpiry," days to expiry"]}),X.jsx("div",{className:"flex items-center gap-2",children:(()=>{const r=(t||[]).filter(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase()&&"SELL"===String(t.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0),a=Math.max(0,Number(e.quantity||0)-r),i=Math.max(1,a);return X.jsxs(X.Fragment,{children:[X.jsx("input",{type:"number",min:1,max:i,value:u,onChange:t=>l(n=>({...n,[e.id]:Math.max(1,Math.min(i,parseInt(t.target.value)||1))})),className:"w-20 h-7 px-2 py-1 border rounded text-xs","aria-label":"Quantity to trade",disabled:!!h}),X.jsx(Mx,{size:"sm",variant:"outline",className:"h-7 text-xs flex items-center gap-1",onClick:()=>n(e,u),disabled:!!h||u<1||u>a,title:u>a?`Available ${a} (staged ${r} of ${e.quantity})`:"",children:"sell"===h?X.jsxs(X.Fragment,{children:[X.jsx(Bn,{className:"w-3 h-3 animate-spin"})," Selling"]}):"Sell"}),X.jsx(Mx,{size:"sm",className:"h-7 text-xs flex items-center gap-1",onClick:()=>s(e,u),disabled:!!h||u<1||u>a,title:u>a?`Available ${a} (staged ${r} of ${e.quantity})`:"",children:"exercise"===h?X.jsxs(X.Fragment,{children:[X.jsx(Bn,{className:"w-3 h-3 animate-spin"})," Exercising"]}):"Exercise"})]})})()})]})]})},e.id)})})}function Ny({tradesUsed:e,maxTrades:t}){const n=e/t*100,s=t-e;return X.jsxs(_x,{children:[X.jsx(Ex,{className:"pb-3",children:X.jsxs(Tx,{className:"text-lg flex items-center gap-2",children:[X.jsx(Zn,{className:"w-5 h-5"}),"Daily Trade Limit"]})}),X.jsxs(Dx,{children:[X.jsxs("div",{className:"text-center mb-4",children:[X.jsx("div",{className:"text-3xl font-bold mb-1",children:s}),X.jsx("div",{className:"text-muted-foreground text-sm",children:"trades remaining"})]}),X.jsx(Sx,{value:n,className:"h-3 mb-3"}),X.jsxs("div",{className:"flex justify-between text-sm",children:[X.jsxs("span",{className:"text-muted-foreground",children:["Used: ",e]}),X.jsxs("span",{className:"text-muted-foreground",children:["Limit: ",t]})]}),n>80&&X.jsx("div",{className:"mt-3 p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:X.jsxs("div",{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400 text-xs",children:[X.jsx(ns,{className:"w-3 h-3"}),"Approaching daily limit"]})})]})]})}function ky(){var e,t;const n=new Date,s=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Berlin",hour12:!1,hour:"2-digit",minute:"2-digit"}).formatToParts(n),r=parseInt((null==(e=s.find(e=>"hour"===e.type))?void 0:e.value)||"0",10),a=parseInt((null==(t=s.find(e=>"minute"===e.type))?void 0:t.value)||"0",10),i=new Date(n);return i.setHours(r,a,0,0),i}function Sy(e){const t=ky(),n=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`,s="open"===e?"09:10-09:25":"17:40-17:55",[r,a]=s.split("-");return n>=r&&n<=a}function _y({metrics:e}){const[t,n]=Je.useState("7d"),[s,r]=Je.useState(null),[a,i]=Je.useState([]),[o,l]=Je.useState([]),[c,d]=Je.useState([]),[u,m]=Je.useState({calls:0,puts:0}),[h,p]=Je.useState([]),[f,g]=Je.useState(!1),[x,v]=Je.useState(!0),[y,b]=Je.useState({}),[w,j]=Je.useState({}),[N,k]=Je.useState([]),[S,_]=Je.useState({}),[E,T]=Je.useState([]),[D,A]=Je.useState(!0),[M,C]=Je.useState(!0),[O,P]=Je.useState(!0),[I,R]=Je.useState(!0),[L,F]=Je.useState([]),[z,B]=Je.useState([]),[U,q]=Je.useState([]),[W,$]=Je.useState({delta:0,gamma:0,vega:0}),[Y,V]=Je.useState([]),{user:H}=di();function G(e){try{const t=String(e||"");if(t.length>=15){const e=t.slice(-15),n=e.slice(0,2),s=e.slice(2,4),r=e.slice(4,6),a=e.slice(6,7),i=e.slice(7),o=`${Number(n)+2e3}-${s}-${r}`;return{expiry:o,right:"C"===a?"call":"put",strike:Number(i)/1e3}}}catch{}return null}Je.useEffect(()=>{(async()=>{if(H)try{const n=await Dv.getUserPortfolio();if(n){r(n);const s=await Dv.getUserPositions(n.id);i(s);const a="1d"===t?1:"7d"===t?7:"30d"===t?30:90,o=await Dv.getPnLHistory(n.id,a);l(o);const c=new Date,u=new Date;u.setDate(c.getDate()-a);const{data:h}=await ni.from("adx_equity_daily").select("as_of_date, equity, cash, positions_value").eq("portfolio_id",n.id).gte("as_of_date",u.toISOString().slice(0,10)).lte("as_of_date",c.toISOString().slice(0,10)).order("as_of_date",{ascending:!0}),f=[];let g=null;(h||[]).forEach(e=>{const t=Number(e.equity||0),n=Number(e.cash||0),s=Number(e.positions_value||Math.max(0,t-n)),r=null!=g?t-g:0;g=t,f.push({date:e.as_of_date,equity:t,cash:n,positions:s,pnl:r})}),k(f);const{data:x}=await ni.from("adx_orders").select("filled_at, qty, realized_pnl").eq("portfolio_id",n.id).eq("status","FILLED").eq("side","SELL").gte("filled_at",u.toISOString()).lte("filled_at",c.toISOString());let v=[];try{v=(await ni.from("adx_exercises").select("realized_pnl, ts").eq("portfolio_id",n.id).gte("ts",u.toISOString()).lte("ts",c.toISOString())).data||[]}catch(e){}const y=new Map(f.map(e=>[e.date,e.equity])),w=[];(x||[]).forEach(e=>{const t=new Date(e.filled_at).toISOString().slice(0,10),n=y.get(t)??(f.length?f[f.length-1].equity:0),s=Number(e.qty||0);w.push({date:t,equity:n,type:"SELL",label:`SELL filled x${s}`})}),(v||[]).forEach(e=>{const t=new Date(e.ts).toISOString().slice(0,10),n=y.get(t)??(f.length?f[f.length-1].equity:0),s=Number(e.realized_pnl||0);w.push({date:t,equity:n,type:"EXERCISE",label:`Exercise realized ${Bx(s,2)}`})}),T(w);const N=Number(n.starting_cash||0)||0,S=[],_=[];let E=N>0?N:f.length?f[0].equity:0;f.forEach(e=>{const t=e.equity-N,n=N>0?100*(e.equity/N-1):0;S.push({date:e.date,cum:t,cumPct:n}),E=Math.max(E,e.equity);const s=E>0?(E-e.equity)/E*100:0;_.push({date:e.date,ddPct:s})}),F(S),B(_);const D=new Map;(x||[]).forEach(e=>{const t=new Date(e.filled_at).toISOString().slice(0,10),n=Number(e.realized_pnl||0);D.set(t,(D.get(t)||0)+n)}),(v||[]).forEach(e=>{const t=new Date(e.ts).toISOString().slice(0,10);D.set(t,(D.get(t)||0)+Number(e.realized_pnl||0))});const A=[];f.forEach(e=>{const t=D.get(e.date)||0,n=(e.pnl||0)-t;A.push({date:e.date,realized:t,unrealized:n})}),q(A);const M=await Dv.getTradeHistory(n.id,a);d(M);try{const e=await Dv.getSnapshotAggregates();if(e&&e.composition_pct){const t=Number(e.composition_pct.calls||0),n=Number(e.composition_pct.puts||0);m({calls:t,puts:n})}else{const e=await Dv.getPortfolioComposition(n.id);m(e)}}catch{const e=await Dv.getPortfolioComposition(n.id);m(e)}const C=await Dv.getStagedOrders(n.id);p(C);const O=Array.from(new Set([...(s||[]).map(e=>e.option_symbol),...(C||[]).map(e=>e.option_symbol)].filter(Boolean)));if(O.length>0){const t=await Dv.getOptionsMetadataBySymbols(O);b(t);try{const{data:e}=await ni.from("options_market_data").select("option_symbol, delta, gamma, vega, mid, contract_size").in("option_symbol",O),t=new Map((e||[]).map(e=>[e.option_symbol,e]));let n=0,r=0,a=0;const i=new Map;for(const l of s||[]){const e=l.option_symbol,s=l.ticker||"",o=Number(l.qty||0),c=t.get(e)||{},d="number"==typeof c.mid&&c.mid>0?c.mid:l.current_price??l.avg_price??0,u="number"==typeof c.contract_size&&c.contract_size>0?Math.round(c.contract_size):100;n+=Number(c.delta||0)*o*u,r+=Number(c.gamma||0)*o*u,a+=Number(c.vega||0)*o*u;const m=Number(d||0)*o*u;s&&i.set(s,(i.get(s)||0)+m)}$({delta:n,gamma:r,vega:a});const o=Array.from(i.entries()).map(([e,t])=>({ticker:e,notional:t}));o.sort((e,t)=>t.notional-e.notional),V(o)}catch(e){}}const P=Array.from(new Set((s||[]).map(e=>e.ticker).filter(Boolean)));if(P.length>0){const{data:e}=await ni.from("stock_prices").select("ticker, price").in("ticker",P),t={};(e||[]).forEach(e=>{e&&e.ticker&&(t[e.ticker]=Number(e.price||0))}),j(t)}}}catch(n){}finally{v(!1)}else v(!1)})()},[H,t]),Je.useEffect(()=>{let e=null,t=null,n=null;return(async()=>{try{if(!H)return;const s=await Dv.getUserPortfolio();if(!s)return;e=ni.channel("rt:orders:portfolio").on("postgres_changes",{event:"*",schema:"public",table:"adx_orders",filter:`portfolio_id=eq.${s.id}`},()=>{window.setTimeout(()=>{(async()=>{await he()})()},400)}).subscribe(),t=ni.channel("rt:equity:portfolio").on("postgres_changes",{event:"INSERT",schema:"public",table:"adx_equity_daily",filter:`portfolio_id=eq.${s.id}`},()=>{window.setTimeout(()=>{(async()=>{await he()})()},400)}).subscribe(),n=window.setInterval(()=>{(async()=>{await he()})()},25e3)}catch(s){}})(),()=>{e&&ni.removeChannel(e),t&&ni.removeChannel(t),n&&window.clearInterval(n)}},[H]);const K=a.map(e=>{var t;const n="number"==typeof e.avg_price&&isFinite(e.avg_price)?e.avg_price:0,s=e.current_price??e.avg_price,r="number"==typeof s&&isFinite(s)?s:0,a="number"==typeof e.pnl&&isFinite(e.pnl)?e.pnl:0,i="number"==typeof e.pnl_percent&&isFinite(e.pnl_percent)?e.pnl_percent:0,o=e.option_symbol||"",l=null==y?void 0:y[o],c=G(o),d=e.expiry??(null==c?void 0:c.expiry)??null,u="put"===String(e.type??e.option_type??(null==c?void 0:c.right)??"call").toLowerCase()?"put":"call",m=(null==l?void 0:l.ticker)||e.ticker||(null==(t=o.match(/^[A-Z0-9]+/))?void 0:t[0])||"",h=vy(d);return{id:o||e.id,symbol:m,type:u,strike:e.strike??(null==c?void 0:c.strike)??0,expiry:d||e.expiry||(new Date).toISOString(),quantity:e.qty??0,avgPrice:n,currentPrice:r,pnl:a,pnlPercent:i,daysToExpiry:h,action:e.action||"bought",openDate:e.open_date||(new Date).toISOString()}}),Q=K.length>0?K:by;o.length;const Z=c.length>0?c:wy,J=u.calls>0||u.puts>0,ee=[{name:"Calls",value:u.calls,color:"#22c55e"},{name:"Puts",value:u.puts,color:"#ef4444"}],te=Q.reduce((e,t)=>e+t.currentPrice*t.quantity*100,0);Q.reduce((e,t)=>e+t.pnl,0);const[ne,se]=Je.useState(!1),[re,ae]=Je.useState({pos:null,qty:1,loading:!1});const[ie,oe]=Je.useState(!1),[le,ce]=Je.useState({pos:null,qty:1,loading:!1});const[de,ue]=Je.useState(null),me=async()=>{try{g(!0);const e=await Dv.getUserPortfolio();if(e){const t=await Dv.getStagedOrders(e.id);p(t);const n=Array.from(new Set([...(a||[]).map(e=>e.option_symbol),...(t||[]).map(e=>e.option_symbol)].filter(Boolean)));if(n.length>0){const e=await Dv.getOptionsMetadataBySymbols(n);b(e)}}}finally{g(!1)}},he=async()=>{try{const e=await Dv.getUserPortfolio();if(e){const[t,n]=await Promise.all([Dv.getUserPositions(e.id),Dv.getStagedOrders(e.id)]);i(t);try{const t=await Dv.getSnapshotAggregates();if(t&&t.composition_pct){const e=Number(t.composition_pct.calls||0),n=Number(t.composition_pct.puts||0);m({calls:e,puts:n})}else{const t=await Dv.getPortfolioComposition(e.id);m(t)}}catch{const t=await Dv.getPortfolioComposition(e.id);m(t)}p(n);const s=Array.from(new Set([...(t||[]).map(e=>e.option_symbol),...(n||[]).map(e=>e.option_symbol)].filter(Boolean)));if(s.length>0){const e=await Dv.getOptionsMetadataBySymbols(s);b(e)}}}catch(mj){}},[pe,fe]=Je.useState(!1),[ge,xe]=Je.useState(0),ve=tt.useRef(null),ye=tt.useRef(null);async function be(){var e;return"undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?pe&&ve.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.reset)?await new Promise(e=>{ye.current=e;try{window.turnstile.reset(ve.current)}catch(t){fe(!1),xe(e=>e+1),e("")}}):void 0:"dev-bypass-token"}const[we,je]=Je.useState(null),[Ne,ke]=Je.useState(null);return Je.useEffect(()=>{const e=()=>{(async()=>{await he()})()};return window.addEventListener("portfolio-updated",e),()=>{window.removeEventListener("portfolio-updated",e)}},[]),Je.useEffect(()=>{let e=null,t=null,n=null;async function s(){var e,s;try{const r=(null==yy?void 0:yy.VITE_HEALTH_BASE)||"https://fsqds-production.yadavkartik-arbeit.workers.dev",a=await fetch(`${r}/health/metrics`,{cache:"no-store",headers:{Accept:"application/json"}});if(!a.ok)return;const i=await a.json(),o=(null==(e=null==i?void 0:i.orchestrator)?void 0:e.last_auction_open)||null,l=(null==(s=null==i?void 0:i.orchestrator)?void 0:s.last_auction_close)||null,c=Date.now(),d=e=>{if(!e)return!1;const t=Date.parse(e);return Number.isFinite(t)&&c-t<=6e5};let u=!1;o&&o!==t&&d(o)&&(t=o,await he(),u=!0),!u&&l&&l!==n&&d(l)&&(n=l,await he())}catch{}}function r(){e&&window.clearInterval(e),(()=>{const e=Sy("open"),t=Sy("close");return e||t})()&&(e=window.setInterval(s,15e3),s())}r();const a=window.setInterval(r,6e4);return()=>{e&&window.clearInterval(e),window.clearInterval(a)}},[]),X.jsx(hy,{children:X.jsxs("div",{className:"space-y-6",children:[X.jsx(uv,{}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Fn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"P&L"}),X.jsxs("div",{className:"font-semibold "+($x(null==s?void 0:s.realized_pnl)>=0?"text-green-600":"text-red-600"),children:[Ux($x(null==s?void 0:s.realized_pnl),2)," "]}),X.jsx("div",{className:"text-xs text-muted-foreground",children:(()=>{const e=$x(null==s?void 0:s.starting_cash)||0,t=$x(null==s?void 0:s.realized_pnl)||0;return Wx(e>0?t/e*100:0,2,!0)})()}),(()=>{const t="number"==typeof(null==e?void 0:e.todaysPnL)?e.todaysPnL:(()=>{if(N&&N.length>=2){return(N[N.length-1].equity||0)-(N[N.length-2].equity||0)}return 0})(),n=N&&N.length>=2&&N[N.length-2].equity||0,s=n>0?t/n*100:0;return X.jsxs("div",{className:"text-xs mt-1 "+(t>=0?"text-green-600":"text-red-600"),children:["Today: ",t>=0?"+":"",Bx(t,2),"  (",Wx(s,2,!0),")"]})})()]})]})})}),X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(ts,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Positions"}),X.jsxs("div",{className:"font-semibold",children:[Q.length," Active"]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:[qx(te,0,"")," value"]})]})]})})}),X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Sn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Days to Expiry"}),X.jsxs("div",{className:"font-semibold",children:[Q.length>0?Math.round(Q.reduce((e,t)=>e+t.daysToExpiry,0)/Q.length):0," days"]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:[Q.filter(e=>e.daysToExpiry<=30).length," expiring soon"]})]})]})})}),e?X.jsx(Ny,{tradesUsed:e.tradesUsedToday,maxTrades:e.maxTradesPerDay}):null,e?X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-rose-100 dark:bg-rose-900/20 rounded-lg flex items-center justify-center",children:X.jsx(es,{className:"w-5 h-5 text-rose-600 dark:text-rose-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Drawdown"}),X.jsx("div",{className:"font-semibold",children:Wx(Math.max(0,100*$x(e.maxDrawdownPct)),1)})]})]})})}):null,e?X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg flex items-center justify-center",children:X.jsx(ts,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Sharpe Ratio"}),X.jsx("div",{className:"font-semibold",children:Bx(e.sharpe??0,2)})]})]})})}):null]}),ne&&re.pos?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Confirm Sell"}),re.loading?X.jsx("div",{className:"text-xs text-muted-foreground",children:"Computing latest preview"}):X.jsxs("div",{className:"space-y-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-muted-foreground",children:"Contract"}),X.jsxs("div",{className:"font-mono",children:[re.pos.id,"  ",re.pos.symbol," ",String(re.pos.type).toUpperCase()," ",Bx(re.pos.strike,2),"  Qty ",re.qty]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Sell now P&L (approx)"}),X.jsxs("div",{className:Number(re.sellPnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(re.sellPnl||0)>=0?"+":"",Bx(Number(re.sellPnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(re.sellPerUnit||0)>=0?"+":"",Bx(Number(re.sellPerUnit||0),2),"   Fees ",Bx(Number(re.feesSell||0),2)," "]})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Exercise now P&L (intrinsic, approx)"}),X.jsxs("div",{className:Number(re.exercisePnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(re.exercisePnl||0)>=0?"+":"",Bx(Number(re.exercisePnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(re.exercisePerUnit||0)>=0?"+":"",Bx(Number(re.exercisePerUnit||0),2),"   Fees ",Bx(Number(re.feesExercise||0),2)," "]})]})]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Spot ",null!=re.spot?`${Bx(Number(re.spot||0),2)}`:"","  Mid ",Bx(Number(re.pos.currentPrice||0),2),"  Avg ",Bx(Number(re.pos.avgPrice||0),2)]})]}),X.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[X.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{se(!1)},children:"Cancel"}),X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-60",disabled:re.loading,onClick:async()=>{re.pos&&(se(!1),await(async(e,t)=>{var n;try{_(t=>({...t,[e.id]:"sell"}));const s=Math.max(1,Math.min(e.quantity,t||1)),r=await be(),a=await Dv.placeOrder({optionSymbol:e.id,ticker:e.symbol,type:e.type,strike:e.strike,expiry:e.expiry,quantity:s,action:"sell",orderType:"market"},{turnstileToken:r});if(!(null==a?void 0:a.success))return void Ga.error((null==a?void 0:a.error)||"Sell failed");if(a.auctionSlot){const e=["number"==typeof a.previewPrice?`preview ${Bx(a.previewPrice,2)}`:null,"number"==typeof a.estimatedFees?`fees ${Bx(a.estimatedFees,2)}`:null].filter(Boolean).join("  ");Ga.success(`Order staged for ${String(a.auctionSlot).toUpperCase()}${e?` (${e})`:""}`)}else{const e="number"==typeof(null==(n=null==a?void 0:a.order)?void 0:n.fillPrice)?a.order.fillPrice:void 0;Ga.success("Order filled"+("number"==typeof e?` @ ${Bx(e,2)}`:""))}window.dispatchEvent(new CustomEvent("portfolio-updated")),await me()}catch(mj){Ga.error("Sell failed")}finally{_(t=>({...t,[e.id]:null}))}})(re.pos,re.qty))},children:"Confirm Sell"})]})]})}):null,X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{className:"text-lg",children:"Pending Orders"})}),X.jsxs(Dx,{children:[we&&X.jsx("div",{className:"mb-2 text-xs text-green-700 bg-green-50 border border-green-200 rounded px-2 py-1",children:we}),X.jsx("div",{className:"sr-only","aria-hidden":"true",children:X.jsx(_v,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"compact",onLoad:e=>{ve.current=e,fe(!0)},onVerify:e=>{ye.current&&(ye.current(e),ye.current=null)},onExpire:()=>{},onError:()=>{fe(!1),xe(e=>e+1)}},`pf-${ge}`)}),X.jsx("div",{className:"max-h-80 overflow-y-auto pr-1",children:0===h.length?X.jsx("div",{className:"text-sm text-muted-foreground",children:"No staged orders."}):X.jsxs("div",{className:"space-y-3",children:[h.some(e=>"DEFERRED"===String(e.status||"").toUpperCase())&&X.jsx("div",{className:"text-xs rounded bg-amber-50 text-amber-700 border border-amber-200 px-2 py-1",children:"Some orders are deferred awaiting fresh quotes/marks. They will be reconsidered in the next auction cycle."}),h.map(e=>{var t;const n="open"===String(e.auction_slot).toLowerCase()?"open":"close",s="number"==typeof e.time_to_cutoff_sec?Math.floor(e.time_to_cutoff_sec/60):function(e){const t=ky(),n="open"===e?"09:10":"17:40",[s,r]=n.split(":").map(e=>parseInt(e,10)),a=new Date(t);a.setHours(s,r,0,0);const i=a.getTime()-t.getTime();return Math.max(0,Math.round(i/6e4))}(n),r=Sy(n),a="boolean"==typeof e.cancelable?e.cancelable:!r&&s>0,i=null==y?void 0:y[e.option_symbol],o=i?null:G(e.option_symbol),l=((null==i?void 0:i.type)||(null==o?void 0:o.right)||"").toString().toUpperCase(),c=(null==i?void 0:i.strike)??(null==o?void 0:o.strike),d=(null==i?void 0:i.expiry)||(null==o?void 0:o.expiry)?new Date((null==i?void 0:i.expiry)||(null==o?void 0:o.expiry)).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null,u=String(e.status||"").toUpperCase(),m="DEFERRED"===u?"bg-amber-100 text-amber-700":"PENDING"===u?"bg-blue-100 text-blue-700":"FILLED"===u?"bg-green-100 text-green-700":"REJECTED"===u?"bg-red-100 text-red-700":"bg-neutral-100 text-neutral-700",h=null==(t=null==y?void 0:y[e.option_symbol])?void 0:t.ticker,g=String(h||e.ticker||e.symbol||"");return X.jsxs("div",{className:"flex items-center justify-between border rounded p-3",children:[X.jsxs("div",{className:"text-sm",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(Jx,{ticker:g,className:"w-5 h-5 rounded-sm object-contain",alt:g}),X.jsxs("div",{className:"font-mono",children:[g," ",e.option_symbol]}),X.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${m}`,children:u||""})]}),X.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[String(e.side).toUpperCase()," x",$x(e.qty)]}),l&&"number"==typeof c&&X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:[l," ",Bx(c,2)]})]}),d?X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Exp ",d]})]}):null,X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Slot: ",String(e.auction_slot).toUpperCase()]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium (per unit): ",e.preview_price?qx(e.preview_price,2,""):""]}),X.jsxs("span",{children:[" ",""," "]}),(()=>{const t="number"==typeof e.notional_eur&&e.notional_eur>0?e.notional_eur:"number"==typeof e.preview_price&&e.preview_price>0?$x(e.preview_price)*$x(e.qty)*100:0,n="number"==typeof e.preview_price&&e.preview_price>0?` (qty ${$x(e.qty)}  100 @ ${qx(e.preview_price,2,"")}/unit)`:"";return X.jsxs("span",{children:["Order value: ",t>0?qx(t,2,""):"",n]})})(),Array.isArray(e.risk_reasons)&&e.risk_reasons.length>0?X.jsx("div",{className:"mt-1 text-[10px] text-amber-700 bg-amber-50 border border-amber-200 rounded px-1.5 py-0.5 inline-block",children:(()=>{const t=e.risk_reasons,n=String(e.risk_cap_basis||"CASH").toUpperCase();return t.includes("EXPOSURE_CAP")?`Will be rejected at auction  exposure cap (${n.toLowerCase()} basis)`:t.includes("EXPOSURE_NEAR_CAP")?`May be rejected at auction  near exposure cap (${n.toLowerCase()} basis)`:t.includes("INSUFFICIENT_CASH")?"May be rejected  insufficient cash for notional + fees":t.includes("DATA_STALE_OR_MISSING")?"Pricing data stale  refresh marks/quotes before auction":"At risk  verify pricing and cash/exposure before auction"})()}):null,"number"==typeof e.estimated_fees?X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),"number"==typeof e.fees_bps&&"number"==typeof e.fee_per_contract_eur?X.jsxs(py,{children:[X.jsx(fy,{asChild:!0,children:X.jsxs("span",{className:"underline decoration-dotted cursor-help",children:["Est. fees: ",qx(e.estimated_fees,2,"")]})}),X.jsx(gy,{children:X.jsxs("div",{className:"text-xs space-y-1",children:[X.jsx("div",{className:"font-semibold",children:"Estimated fees breakdown"}),X.jsxs("div",{children:["Per-contract: ",qx(e.fee_per_contract_eur,2,""),"  ",$x(e.qty)," = ",qx($x(e.fee_per_contract_eur)*$x(e.qty),2,"")]}),X.jsxs("div",{children:["Ad valorem: ",$x(e.fees_bps)," bps  ",qx("number"==typeof e.notional_eur&&e.notional_eur>0?e.notional_eur:$x(e.preview_price)*$x(e.qty)*100,2,"")," = ",qx($x(e.fees_bps)/1e4*("number"==typeof e.notional_eur&&e.notional_eur>0?$x(e.notional_eur):$x(e.preview_price)*$x(e.qty)*100),2,"")]}),X.jsx("div",{className:"text-muted-foreground",children:"Actual fees charged at execution"})]})})]}):X.jsxs("span",{children:["Est. fees: ",qx(e.estimated_fees,2,"")]})]}):null]})})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[X.jsx(In,{className:"w-3 h-3"}),r?"Auctioning now":a?`${s} min to cutoff`:"Cutoff passed"]}),X.jsx(Mx,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>(async e=>{try{ke(e);const t=await be(),n=await Dv.cancelOrder(e,{turnstileToken:t});n.success?(p(t=>Array.isArray(t)?t.filter(t=>t.id!==e):t),je("Order cancelled"),Ga.success("Order cancelled"),setTimeout(()=>je(null),2500),await me()):Ga.error(n.error||"Cancel failed")}finally{ke(null)}})(e.id),disabled:f||!a||Ne===e.id,children:Ne===e.id?"Cancelling":"Cancel"})]})]},e.id)})]})})]})]}),ie&&le.pos?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Confirm Exercise"}),le.loading?X.jsx("div",{className:"text-xs text-muted-foreground",children:"Computing latest preview"}):X.jsxs("div",{className:"space-y-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-muted-foreground",children:"Contract"}),X.jsxs("div",{className:"font-mono",children:[le.pos.id,"  ",le.pos.symbol," ",String(le.pos.type).toUpperCase()," ",Bx(le.pos.strike,2),"  Qty ",le.qty]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Sell now P&L (approx)"}),X.jsxs("div",{className:Number(le.sellPnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(le.sellPnl||0)>=0?"+":"",Bx(Number(le.sellPnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(le.sellPerUnit||0)>=0?"+":"",Bx(Number(le.sellPerUnit||0),2),"   Fees ",Bx(Number(le.feesSell||0),2)," "]})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-muted-foreground",children:"Exercise now P&L (intrinsic, approx)"}),X.jsxs("div",{className:Number(le.exercisePnl||0)>=0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[Number(le.exercisePnl||0)>=0?"+":"",Bx(Number(le.exercisePnl||0),2)," "]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Per unit: ",Number(le.exercisePerUnit||0)>=0?"+":"",Bx(Number(le.exercisePerUnit||0),2),"   Fees ",Bx(Number(le.feesExercise||0),2)," "]})]})]}),X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Spot ",null!=le.spot?`${Bx(Number(le.spot||0),2)}`:"","  Mid ",Bx(Number(le.pos.currentPrice||0),2),"  Avg ",Bx(Number(le.pos.avgPrice||0),2)]})]}),X.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[X.jsx("button",{className:"px-3 py-1 border rounded text-xs",onClick:()=>{oe(!1)},children:"Cancel"}),X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-60",disabled:le.loading,onClick:async()=>{le.pos&&(oe(!1),await(async(e,t)=>{try{_(t=>({...t,[e.id]:"exercise"}));const n=Math.max(1,Math.min(e.quantity,t||1)),s=await be(),r=await Dv.exerciseOption({optionSymbol:e.id,qty:n},{turnstileToken:s});if(!(null==r?void 0:r.success))return void Ga.error((null==r?void 0:r.error)||"Exercise failed");const a=(null==r?void 0:r.data)&&"number"==typeof r.data.realizedPnL?r.data.realizedPnL:void 0;Ga.success("Exercise successful"+("number"==typeof a?`  Realized P&L ${Bx(a,2)}`:"")),ue({posId:e.id,qty:n,realized:a}),window.setTimeout(()=>{try{window.location.reload()}catch{}},1200)}catch(mj){Ga.error("Exercise failed")}finally{_(t=>({...t,[e.id]:null}))}})(le.pos,le.qty))},children:"Confirm Exercise"})]})]})}):null,de?X.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:X.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm p-4",children:[X.jsx("div",{className:"text-sm font-semibold mb-2",children:"Exercise Submitted"}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Your exercise request was successful. We will refresh the page to reflect updated positions.","number"==typeof de.realized?X.jsxs("div",{className:"mt-2",children:["Realized P&L: ",Bx(de.realized,2)]}):null]}),X.jsx("div",{className:"flex items-center justify-end gap-2 mt-4",children:X.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-xs",onClick:()=>{try{window.location.reload()}catch{}},children:"Refresh now"})})]})}):null,X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[X.jsxs(_x,{className:"lg:col-span-2",children:[X.jsx(Ex,{children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx(Tx,{className:"text-lg",children:"Portfolio Performance"}),X.jsxs(Cx,{value:t,onValueChange:n,children:[X.jsx(Px,{className:"w-24 h-8",children:X.jsx(Ox,{})}),X.jsxs(Ix,{children:[X.jsx(Rx,{value:"1d",children:"1D"}),X.jsx(Rx,{value:"7d",children:"7D"}),X.jsx(Rx,{value:"30d",children:"30D"}),X.jsx(Rx,{value:"90d",children:"90D"})]})]})]})}),X.jsxs(Dx,{children:[X.jsx("div",{className:"flex gap-2 mb-2 text-xs text-muted-foreground",children:(()=>{const e=({label:e,value:t,onChange:n})=>X.jsxs("label",{className:"inline-flex items-center gap-1 cursor-pointer select-none",children:[X.jsx("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked)}),X.jsx("span",{children:e})]});return X.jsxs(X.Fragment,{children:[X.jsx(e,{label:"Cash",value:D,onChange:A}),X.jsx(e,{label:"Positions",value:M,onChange:C}),X.jsx(e,{label:"Equity",value:O,onChange:P}),X.jsx(e,{label:"Daily PnL",value:I,onChange:R})]})})()}),X.jsx(Yt,{width:"100%",height:260,children:X.jsxs(en,{data:N,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:12}}),X.jsx(Qt,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:(e,t,n)=>{const s=n&&n[0]&&n[0].payload?n[0].payload:{};return s.__event?[s.__event.label,s.__event.type]:"pnl"===t?[`${Bx(e,2)}`,"Daily P&L"]:"equity"===t?[`${Bx(e,2)}`,"Equity"]:"cash"===t?[`${Bx(e,2)}`,"Cash"]:"positions"===t?[`${Bx(e,2)}`,"Positions"]:[`${Bx(e,2)}`,t]}}),D&&X.jsx(tn,{type:"monotone",dataKey:"cash",stackId:"1",stroke:"#93c5fd",fill:"#93c5fd",fillOpacity:.4,name:"cash"}),M&&X.jsx(tn,{type:"monotone",dataKey:"positions",stackId:"1",stroke:"#86efac",fill:"#86efac",fillOpacity:.4,name:"positions"}),I&&X.jsx(Jt,{dataKey:"pnl",barSize:14,fill:"#60a5fa",name:"pnl"}),O&&X.jsx(Xt,{type:"monotone",dataKey:"equity",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"equity"}),X.jsx(nn,{data:E.map(e=>({date:e.date,equity:e.equity,__event:e})),fill:"#f97316",name:"events"}),X.jsx(sn,{dataKey:"date",height:18,stroke:"#94a3b8",travellerWidth:8})]})}),X.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cumulative P&L vs Starting Cash"}),X.jsx(Yt,{width:"100%",height:180,children:X.jsxs(en,{data:L,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:(e,t)=>["cum"===t?`${Bx(e,2)}`:`${Bx(e,2)}%`,"cum"===t?"Cumulative P&L":"Cumulative %"]}),X.jsx(tn,{type:"monotone",dataKey:"cum",stroke:"#4ade80",fill:"#86efac",fillOpacity:.3}),X.jsx(Xt,{type:"monotone",dataKey:"cumPct",stroke:"#10b981",strokeDasharray:"4 4",dot:!1})]})})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Max Drawdown (%)"}),X.jsx(Yt,{width:"100%",height:180,children:X.jsxs(en,{data:z,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:e=>[`${Bx(e,2)}%`,"Drawdown"]}),X.jsx(tn,{type:"monotone",dataKey:"ddPct",stroke:"#f87171",fill:"#fecaca",fillOpacity:.4})]})})]}),X.jsxs("div",{className:"md:col-span-2 border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Daily Contributions (approx)"}),X.jsx(Yt,{width:"100%",height:180,children:X.jsxs(en,{data:U,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:(e,t)=>[`${Bx(e,2)}`,"realized"===t?"Realized P&L":"Unrealized P&L"]}),X.jsx(Jt,{dataKey:"realized",stackId:"1",fill:"#fb923c"}),X.jsx(Jt,{dataKey:"unrealized",stackId:"1",fill:"#60a5fa"})]})})]})]})]})]}),X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{className:"text-lg",children:"Portfolio Composition"})}),X.jsx(Dx,{children:X.jsxs("div",{className:"space-y-4",children:[X.jsx("div",{children:J?X.jsxs(X.Fragment,{children:[X.jsx(Yt,{width:"100%",height:200,children:X.jsxs(rn,{children:[X.jsx(an,{data:ee,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"value",children:ee.map((e,t)=>X.jsx(on,{fill:e.color},`cell-${t}`))}),X.jsx(Qt,{formatter:e=>`${e}%`}),X.jsx(ln,{})]})}),X.jsx("div",{className:"text-[11px] text-muted-foreground mt-2",children:"Notional uses product contract sizes"})]}):X.jsx("div",{className:"h-[200px] flex items-center justify-center text-sm text-muted-foreground",children:"No options positions yet"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Exposure by Ticker (notional; uses product contract sizes)"}),X.jsx(Yt,{width:"100%",height:140,children:X.jsxs(Zt,{data:Y.slice(0,6),children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"ticker",tick:{fontSize:10}}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:e=>[`${Bx(e,0)}`,"Notional"]}),X.jsx(Jt,{dataKey:"notional",fill:"#60a5fa"})]})})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Daily Trade Activity"}),X.jsx(Yt,{width:"100%",height:220,children:X.jsxs(Zt,{data:Z,children:[X.jsx(Ht,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`${e}`,"Trades"]}),X.jsx(Jt,{dataKey:"trades",fill:"#3b82f6"})]})})]})]})})]})]}),X.jsx("div",{className:"grid grid-cols-1 gap-6",children:X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsx(Tx,{className:"text-lg",children:"Active Positions"})}),X.jsx(Dx,{children:X.jsx(jy,{positions:Q,stagedOrders:h,onSell:async(e,t)=>{await async function(e,t){const n=Math.max(1,Math.min(e.quantity,t||1));se(!0),ae({pos:e,qty:n,loading:!0});try{const{getWorkerBase:t}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>ov);return{getWorkerBase:e}},void 0),s=t();let r=null;try{const t=await fetch(`${s}/api/market/stock-prices?tickers=${encodeURIComponent(e.symbol)}&refresh=1&delta=1`);if(t.ok){const n=await t.json().catch(()=>({})),s=Array.isArray(null==n?void 0:n.data)?n.data.find(t=>String(t.ticker)===e.symbol):null;s&&"number"==typeof s.price&&(r=Number(s.price))}}catch{}const a=100,i=Number(e.currentPrice||0),o=Number(e.avgPrice||0),l=Number((null==yy?void 0:yy.VITE_CONTRACT_FEE_EUR)??"0.25"),c=Number((null==yy?void 0:yy.VITE_FEES_BPS)??"2"),d=i>0?i*n*a:0,u=d>0?l*n+c/1e4*d:0,m=(i-o)*n*a-u;let h=0;null!=r&&(h="call"===String(e.type).toLowerCase()?Math.max(0,r-e.strike):Math.max(0,e.strike-r));const p=h*n*a,f=p>0?l*n+c/1e4*p:l*n;ae({pos:e,qty:n,loading:!1,sellPnl:m,exercisePnl:(h-o)*n*a-f,sellPerUnit:i-o,exercisePerUnit:h-o,feesSell:u,feesExercise:f,spot:r})}catch(mj){ae(e=>({...e,loading:!1}))}}(e,t)},onExercise:async(e,t)=>{await async function(e,t){const n=Math.max(1,Math.min(e.quantity,t||1));oe(!0),ce({pos:e,qty:n,loading:!0});try{const t="https://fsqds-production.yadavkartik-arbeit.workers.dev";let s=null;try{const n=await fetch(`${t}/api/market/stock-prices?tickers=${encodeURIComponent(e.symbol)}&refresh=1&delta=1`);if(n.ok){const t=await n.json().catch(()=>({})),r=Array.isArray(null==t?void 0:t.data)?t.data.find(t=>String(t.ticker)===e.symbol):null;r&&"number"==typeof r.price&&(s=Number(r.price))}}catch{}const r=100,a=Number(e.currentPrice||0),i=Number(e.avgPrice||0),o=Number((null==yy?void 0:yy.VITE_CONTRACT_FEE_EUR)??"0.25"),l=Number((null==yy?void 0:yy.VITE_FEES_BPS)??"2"),c=a>0?a*n*r:0,d=c>0?o*n+l/1e4*c:0,u=(a-i)*n*r-d;let m=0;null!=s&&(m="call"===String(e.type).toLowerCase()?Math.max(0,s-e.strike):Math.max(0,e.strike-s));const h=m*n*r,p=h>0?o*n+l/1e4*h:o*n;ce({pos:e,qty:n,loading:!1,sellPnl:u,exercisePnl:(m-i)*n*r-p,sellPerUnit:a-i,exercisePerUnit:m-i,feesSell:d,feesExercise:p,spot:s})}catch(mj){ce(e=>({...e,loading:!1}))}}(e,t)},spotByTicker:w,busyByPosition:S,cancellingId:Ne})})]})})]})})}function Ey(e){switch(e){case"diamond":return X.jsx(Rn,{className:"w-4 h-4 text-blue-400"});case"platinum":return X.jsx(Xn,{className:"w-4 h-4 text-gray-300"});case"gold":return X.jsx(ss,{className:"w-4 h-4 text-yellow-500"});case"silver":return X.jsx($n,{className:"w-4 h-4 text-gray-400"});case"bronze":return X.jsx(jn,{className:"w-4 h-4 text-orange-600"});default:return X.jsx(jn,{className:"w-4 h-4 text-gray-500"})}}function Ty(){const{user:e}=di(),[t,n]=Je.useState("all"),[s,r]=Je.useState("overall"),[a,i]=Je.useState([]),[o,l]=Je.useState(!0),[c,d]=Je.useState(null),[u,m]=Je.useState(null),[h,p]=Je.useState({users:0,avgReturn:0,topReturn:0,totalVolume:0});return Je.useEffect(()=>{(async()=>{var t,n,r,a;l(!0);try{if("predictions"===s){const{data:t}=await ni.from("seasons").select("id").eq("status","active").single();if(!t)return i([]),void p({users:0,avgReturn:0,topReturn:0,totalVolume:0});const{data:n,error:s}=await ni.from("adx_prediction_scores_season").select("user_id, mse_score, rmse_score, predictions_made, accuracy_percentile, user_profiles(email)").eq("season_id",t.id).order("rmse_score",{ascending:!0,nullsFirst:!1});if(s)return void i([]);const r=(n||[]).map((t,n)=>{var s;const r=t.accuracy_percentile||0;let a="bronze";return r>=95?a="diamond":r>=85?a="platinum":r>=70?a="gold":r>=50&&(a="silver"),{id:t.user_id,email:(null==(s=null==t?void 0:t.user_profiles)?void 0:s.email)||"Anonymous",rank:n+1,pnlPercent:0,totalPnL:0,portfolioValue:0,tradesCount:0,winRate:0,tier:a,badges:[],isCurrentUser:t.user_id===(null==e?void 0:e.id),rmse:t.rmse_score??void 0,mse:t.mse_score??void 0,predictionsCount:t.predictions_made??0,percentile:r}});i(r);const a=r.length,o=r.reduce((e,t)=>e+(t.rmse||0),0)/(a||1),l=Math.min(...r.map(e=>e.rmse||Number.POSITIVE_INFINITY));return void p({users:a,avgReturn:Math.round(1e3*o)/1e3,topReturn:Math.round(1e3*l)/1e3,totalVolume:r.reduce((e,t)=>e+(t.predictionsCount||0),0)})}let l=[];try{const e=await async function(e,t={}){var n;const s=new Headers(t.headers),r=localStorage.getItem("supabase.auth.token");r&&s.set("Authorization",`Bearer ${r}`);let a=s.get("x-correlation-id");if(!a){try{a=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}catch{a=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}s.set("x-correlation-id",a)}return fetch(e,{...t,headers:s})}(cv.adxLeaderboard),s=await e.json().catch(()=>({ok:!1}));s&&s.ok&&(l=(null==(t=s.data)?void 0:t.rows)||[],d((null==(n=s.data)?void 0:n.generated_at)||null),m("worker"))}catch(o){}if(0===l.length)try{const{data:e}=await ni.functions.invoke("adx_build_leaderboard_cache",{method:"POST",body:{}});(null==e?void 0:e.ok)&&(l=(null==(r=e.data)?void 0:r.rows)||[],d((null==(a=e.data)?void 0:a.generated_at)||(new Date).toISOString()),m("edge"))}catch(mj){return void i([])}const c=l.map((t,n)=>{const s=Number(t.equity||1e5),r="number"==typeof t.starting_cash?Number(t.starting_cash):1e5,a=("number"==typeof t.realized_pnl&&Number(t.realized_pnl),"number"==typeof t.pnl_pct?Number(t.pnl_pct):r>0?100*(s/r-1):0),i=s-r,o=t.total_trades||0,l=t.winning_trades||0,c=o>0?l/o*100:0,d=100*(t.max_drawdown_pct??0),u=t.sharpe??0;let m="bronze";a>30?m="diamond":a>20?m="platinum":a>10?m="gold":a>5&&(m="silver");const h=[];return 1===t.rank&&h.push(""),c>80&&h.push(""),a>25&&h.push(""),o>100&&h.push(""),{id:t.user_id,email:t.email||"Anonymous",rank:t.rank,pnlPercent:Number(a.toFixed(4)),totalPnL:Math.round(100*i)/100,portfolioValue:Math.round(100*s)/100,tradesCount:o,winRate:Math.round(10*c)/10,tier:m,badges:h,isCurrentUser:t.user_id===(null==e?void 0:e.id),rmse:void 0,mse:void 0,predictionsCount:void 0,percentile:void 0,sharpe:u,maxDrawdownPct:d}});i(c);const u=c.length,h=u?c.reduce((e,t)=>e+t.pnlPercent,0)/u:0,f=u?Math.max(...c.map(e=>e.pnlPercent)):0,g=c.reduce((e,t)=>e+t.portfolioValue,0);p({users:u,avgReturn:Math.round(10*h)/10,topReturn:Math.round(10*f)/10,totalVolume:Math.round(g)})}catch(c){i([])}finally{l(!1)}})()},[e,t,s]),o?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsx(_x,{children:X.jsxs(Dx,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===s?"Total Forecasters":"Total Traders"}),X.jsx("div",{className:"text-2xl font-bold",children:h.users})]})}),X.jsx(_x,{children:X.jsxs(Dx,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===s?"Avg RMSE":"Avg Return"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===s?h.avgReturn.toFixed(3):`${h.avgReturn.toFixed(2)}%`})]})}),X.jsx(_x,{children:X.jsxs(Dx,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===s?"Best RMSE":"Top Return"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===s?h.topReturn.toFixed(3):`${h.topReturn.toFixed(2)}%`})]})}),X.jsx(_x,{children:X.jsxs(Dx,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===s?"Total Predictions":"Total Equity"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===s?h.totalVolume:`${(h.totalVolume/1e6).toFixed(1)}M`})]})})]}),X.jsxs("div",{className:"flex gap-3",children:[X.jsxs(Cx,{value:t,onValueChange:n,children:[X.jsx(Px,{className:"w-40",children:X.jsx(Ox,{placeholder:"Select timeframe"})}),X.jsxs(Ix,{children:[X.jsx(Rx,{value:"all",children:"All Time"}),X.jsx(Rx,{value:"monthly",children:"This Month"}),X.jsx(Rx,{value:"weekly",children:"This Week"}),X.jsx(Rx,{value:"daily",children:"Today"})]})]}),X.jsxs(Cx,{value:s,onValueChange:r,children:[X.jsx(Px,{className:"w-40",children:X.jsx(Ox,{placeholder:"Select category"})}),X.jsxs(Ix,{children:[X.jsx(Rx,{value:"overall",children:"Overall"}),X.jsx(Rx,{value:"options",children:"Options"}),X.jsx(Rx,{value:"predictions",children:"Predictions"})]})]})]}),X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsxs(Tx,{className:"flex items-center justify-between",children:[X.jsxs("span",{className:"flex items-center gap-2",children:[X.jsx(ss,{className:"w-5 h-5"}),"Current Traders"]}),X.jsxs("div",{className:"flex items-center gap-2",children:[c&&X.jsxs(lx,{variant:"outline",children:["Updated ",new Date(c).toLocaleString()]}),u&&X.jsx(lx,{variant:"secondary",children:"worker"===u?"via Cache":"via Edge"})]})]})}),X.jsx(Dx,{className:"p-0",children:X.jsx("div",{className:"divide-y divide-border",children:a.length>0?a.map(e=>{var t;return X.jsx("div",{className:"p-4 transition-all hover:bg-muted/50 "+(e.isCurrentUser?"bg-primary/5":""),children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted font-bold",children:e.rank<=3?1===e.rank?"":2===e.rank?"":"":`#${e.rank}`}),X.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:X.jsx(rs,{className:"w-6 h-6 text-muted-foreground"})}),X.jsxs("div",{children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-semibold",children:e.email}),e.isCurrentUser&&X.jsx(lx,{variant:"secondary",className:"text-xs",children:"You"}),X.jsx("div",{className:"flex items-center gap-1",children:Ey(e.tier)})]}),X.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-4 mt-1",children:[X.jsxs("span",{children:[e.tradesCount," trades"]}),X.jsxs("span",{children:[e.winRate,"% win rate"]}),X.jsx("div",{className:"flex gap-1",children:e.badges.map((e,t)=>X.jsx("span",{children:e},t))})]})]})]}),X.jsx("div",{className:"text-right",children:"predictions"===s?X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"text-sm",children:["RMSE: ",X.jsx("span",{className:"font-bold",children:(e.rmse??0).toFixed(3)})]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Predictions: ",e.predictionsCount||0]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Percentile: ",(null==(t=e.percentile)?void 0:t.toFixed(1))||0,"%"]})]}):X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.pnlPercent>=0?X.jsx(ts,{className:"w-4 h-4 text-green-500"}):X.jsx(es,{className:"w-4 h-4 text-red-500"}),X.jsxs("span",{className:"font-bold text-lg "+(e.pnlPercent>=0?"text-green-500":"text-red-500"),children:[e.pnlPercent>=0?"+":"",Math.abs(e.pnlPercent).toFixed(2),"%"]})]}),X.jsxs("div",{className:"text-sm text-muted-foreground",children:["",e.totalPnL>=0?"+":"",e.totalPnL.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Portfolio: ",e.portfolioValue.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Sharpe ","sharpe"in e&&"number"==typeof e.sharpe?e.sharpe.toFixed(2):"","  Max DD ","maxDrawdownPct"in e&&"number"==typeof e.maxDrawdownPct?e.maxDrawdownPct.toFixed(1):"","%"]})]})})]})},e.id)}):X.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No traders found. Be the first to start trading!"})})})]})]})}function Dy({children:e,publicContent:t,requireAdmin:n=!1}){const{user:s,isAdmin:r}=di();return s?n&&!r?null:X.jsx(X.Fragment,{children:e}):X.jsx(X.Fragment,{children:t})||null}function Ay({metrics:e}){var t;const n=e.tradesUsedToday/e.maxTradesPerDay*100;return e.marginUsed,e.marginUsed,e.marginAvailable,X.jsx("div",{className:"bg-card border rounded-lg p-4 mb-6",children:X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(is,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Cash"}),X.jsxs("div",{className:"font-semibold",children:["",e.accountBalance.toLocaleString()]})]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(ts,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Portfolio Value"}),X.jsxs("div",{className:"font-semibold",children:["",Number(e.liquidationPortfolioValue??e.portfolioValue??0).toLocaleString()]}),(()=>{const t=Number(e.startingCash??(e.portfolioValue||0)-(e.totalPnL||0)),n=Number(e.liquidationPortfolioValue??e.portfolioValue??0),s=t>0?100*(n/t-1):0,r=s>=0?"+":"",a=s>=0?"text-green-600":"text-red-600";return X.jsxs("div",{className:`text-xs ${a}`,children:["P&L (cumulative): ",r,s.toFixed(2),"%"]})})(),(()=>{const t=Number(e.todaysPnL??0),n=Number(e.portfolioValue??0)-t,s=n>0?t/n*100:0,r=t>=0?"+":"",a=t>=0?"text-green-600":"text-red-600";return X.jsxs("div",{className:`text-xs ${a}`,children:[X.jsx("span",{className:"text-muted-foreground",children:"(today)"})," ",r,Bx(t,2),"  (",r,s.toFixed(2),"%)"]})})()]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:X.jsx(wn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Daily Trades"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsxs("span",{className:"text-sm font-semibold",children:[e.tradesUsedToday,"/",e.maxTradesPerDay]}),X.jsxs(lx,{variant:n>80?"destructive":n>60?"secondary":"default",className:"text-xs",children:[Math.round(n),"%"]})]}),X.jsx(Sx,{value:n,className:"h-1.5 mt-1"})]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Kn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Buying Power (Cash account)"}),X.jsxs("div",{className:"font-semibold text-sm",children:["",e.accountBalance.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Sharpe ",(null==(t=e.sharpe)?void 0:t.toFixed(2))??"0.00","  Max DD ",(100*(e.maxDrawdownPct??0)).toFixed(1),"%"]})]})]})]})})}function My(){const{user:e,isEventUser:t}=di(),[n,s]=Je.useState(e?"trading":"leaderboard"),[r,a]=Je.useState(null),[i,o]=Je.useState(!0);return Je.useEffect(()=>{e||"leaderboard"===n||s("leaderboard")},[e]),Je.useEffect(()=>{const t=async()=>{if(e)try{await Dv.getUserPortfolio();const e=await Dv.getTradingMetrics();a(e)}catch(t){}finally{o(!1)}else o(!1)};t();const n=setInterval(t,3e4),s=()=>t();return"undefined"!=typeof window&&window.addEventListener("portfolio-updated",s),()=>{clearInterval(n),"undefined"!=typeof window&&window.removeEventListener("portfolio-updated",s)}},[e]),X.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[X.jsx(Dy,{children:r?X.jsx(Ay,{metrics:r}):null}),X.jsxs(sx,{value:n,onValueChange:s,className:"w-full",children:[X.jsxs(rx,{className:`grid w-full ${e?t?"grid-cols-3":"grid-cols-4":"grid-cols-1"} max-w-2xl`,children:[e&&X.jsxs(X.Fragment,{children:[X.jsxs(ax,{value:"trading",className:"flex items-center gap-2",children:[X.jsx(wn,{className:"w-4 h-4"}),"Trading"]}),!t&&X.jsxs(ax,{value:"predictions",className:"flex items-center gap-2",children:[X.jsx(_n,{className:"w-4 h-4"}),"Predictions"]}),X.jsxs(ax,{value:"portfolio",className:"flex items-center gap-2",children:[X.jsx(ts,{className:"w-4 h-4"}),"Portfolio"]})]}),X.jsxs(ax,{value:"leaderboard",className:"flex items-center gap-2",children:[X.jsx(ss,{className:"w-4 h-4"}),"Leaderboard"]})]}),e&&X.jsxs(X.Fragment,{children:[X.jsx(ix,{value:"trading",className:"mt-6",children:X.jsx(Mv,{})}),!t&&X.jsx(ix,{value:"predictions",className:"mt-6",children:X.jsx(Fv,{})}),X.jsx(ix,{value:"portfolio",className:"mt-6",children:X.jsx(_y,{metrics:r??void 0})})]}),X.jsx(ix,{value:"leaderboard",className:"mt-6",children:X.jsx(Ty,{})})]})]})}function Cy({className:e,...t}){return X.jsx(Re,{"data-slot":"label",className:nx("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Oy({className:e,...t}){return X.jsx("textarea",{"data-slot":"textarea",className:nx("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var Py="Radio",[Iy,Ry]=J(Py),[Ly,Fy]=Iy(Py),zy=Je.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:r=!1,required:a,disabled:i,value:o="on",onCheck:l,form:c,...d}=e,[u,m]=Je.useState(null),h=ee(t,e=>m(e)),p=Je.useRef(!1),f=!u||(c||!!u.closest("form"));return X.jsxs(Ly,{scope:n,checked:r,disabled:i,children:[X.jsx(ne.button,{type:"button",role:"radio","aria-checked":r,"data-state":Wy(r),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:h,onClick:oe(e.onClick,e=>{r||null==l||l(),f&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})}),f&&X.jsx(qy,{control:u,bubbles:!p.current,name:s,value:o,checked:r,required:a,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});zy.displayName=Py;var By="RadioIndicator",Uy=Je.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...r}=e,a=Fy(By,n);return X.jsx(ae,{present:s||a.checked,children:X.jsx(ne.span,{"data-state":Wy(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})})});Uy.displayName=By;var qy=e=>{const{control:t,checked:n,bubbles:s=!0,...r}=e,a=Je.useRef(null),i=Ve(n),o=He(t);return Je.useEffect(()=>{const e=a.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==n&&r){const t=new Event("click",{bubbles:s});r.call(e,n),e.dispatchEvent(t)}},[i,n,s]),X.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wy(e){return e?"checked":"unchecked"}var $y=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Yy="RadioGroup",[Vy,Hy]=J(Yy,[Ge,Ry]),Gy=Ge(),Ky=Ry(),[Qy,Xy]=Vy(Yy),Zy=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:r,value:a,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...m}=e,h=Gy(n),p=Ke(c),[f,g]=re({prop:a,defaultProp:r,onChange:u});return X.jsx(Qy,{scope:n,name:s,required:i,disabled:o,value:f,onValueChange:g,children:X.jsx(Qe,{asChild:!0,...h,orientation:l,dir:p,loop:d,children:X.jsx(ne.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:p,...m,ref:t})})})});Zy.displayName=Yy;var Jy="RadioGroupItem",eb=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...r}=e,a=Xy(Jy,n),i=a.disabled||s,o=Gy(n),l=Ky(n),c=Je.useRef(null),d=ee(t,c),u=a.value===r.value,m=Je.useRef(!1);return Je.useEffect(()=>{const e=e=>{$y.includes(e.key)&&(m.current=!0)},t=()=>m.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),X.jsx(Xe,{asChild:!0,...o,focusable:!i,active:u,children:X.jsx(zy,{disabled:i,required:a.required,checked:u,...l,...r,name:a.name,ref:d,onCheck:()=>a.onValueChange(r.value),onKeyDown:oe(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:oe(r.onFocus,()=>{var e;m.current&&(null==(e=c.current)||e.click())})})})});eb.displayName=Jy;var tb=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,r=Ky(n);return X.jsx(Uy,{...r,...s,ref:t})});tb.displayName="RadioGroupIndicator";var nb=Zy,sb=eb,rb=tb;function ab({className:e,...t}){return X.jsx(nb,{"data-slot":"radio-group",className:nx("grid gap-3",e),...t})}function ib({className:e,...t}){return X.jsx(sb,{"data-slot":"radio-group-item",className:nx("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:X.jsx(rb,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:X.jsx(Pn,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const ob={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},lb="https://mskpxebbscvisxcceiwx.supabase.co";const cb=new class{async getAuthToken(){const{data:{session:e}}=await ni.auth.getSession();return(null==e?void 0:e.access_token)||null}async getHTILeaderboard(){var e;const t="false"!==((null==ob?void 0:ob.VITE_ALLOW_POSTGREST_FALLBACK)??"true");try{const{getWorkerBase:t}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>ov);return{getWorkerBase:e}},void 0),n=t(),s=await fetch(`${n}/api/leaderboards/hti`,{method:"GET",headers:{Accept:"application/json"}}),r=await s.json();if(s.ok&&(null==r?void 0:r.ok)){const t=(null==(e=null==r?void 0:r.data)?void 0:e.rows)||[];return{ok:!0,rows:t.map(e=>({season_id:e.season_id||"",user_id:e.user_id,email:e.email||e.username||"Anonymous",points:e.total_points??e.total_score??e.points??0,badges:e.badges||[],last_action_at:e.last_submission||e.updated_at||null})),lastUpdated:(new Date).toISOString()}}}catch{}if(!t)return{ok:!1,error:"WORKER_UNAVAILABLE"};const{data:n}=await ni.from("hti_submissions").select("\n        user_id,\n        points,\n        user_profiles!inner(email)\n      ");if(!n)return{ok:!1,error:"Failed to fetch leaderboard data"};const s=n.reduce((e,t)=>{var n;const s=e[t.user_id]||{user_id:t.user_id,email:(null==(n=t.user_profiles)?void 0:n.email)||"Anonymous",points:0,badges:[]};return s.points+=t.points||0,e[t.user_id]=s,e},{});return{ok:!0,rows:Object.values(s).sort((e,t)=>t.points-e.points).slice(0,100),lastUpdated:(new Date).toISOString()}}async getADXLeaderboard(){var e;const t="false"!==((null==ob?void 0:ob.VITE_ALLOW_POSTGREST_FALLBACK)??"true");try{const{getWorkerBase:t}=await ct(async()=>{const{getWorkerBase:e}=await Promise.resolve().then(()=>ov);return{getWorkerBase:e}},void 0),n=t(),s=await fetch(`${n}/api/leaderboards/adx`,{method:"GET",headers:{Accept:"application/json"}}),r=await s.json();if(s.ok&&(null==r?void 0:r.ok)&&(null==(e=null==r?void 0:r.data)?void 0:e.rows))return{ok:!0,rows:r.data.rows,lastUpdated:r.data.generated_at||(new Date).toISOString()}}catch{}if(!t)return{ok:!1,error:"WORKER_UNAVAILABLE"};const{data:n}=await ni.from("seasons").select("id").eq("status","active").single();if(!n)return{ok:!1,error:"No active season found"};const{data:s}=await ni.from("adx_portfolios").select("\n        *,\n        user_profiles!inner(username, email)\n      ").eq("season_id",n.id);if(!s)return{ok:!1,error:"Failed to fetch portfolios"};return{ok:!0,rows:s.map(e=>{var t,n;return{rank:0,user_id:e.user_id,display_name:(null==(t=e.user_profiles)?void 0:t.username)||(null==(n=e.user_profiles)?void 0:n.email)||"Anonymous",total_pnl:(e.current_value||e.starting_cash)-e.starting_cash,total_value:e.current_value||e.starting_cash,win_rate:0,num_trades:0}}).sort((e,t)=>t.total_pnl-e.total_pnl).map((e,t)=>({...e,rank:t+1})).slice(0,100),lastUpdated:(new Date).toISOString()}}async getHTIQuestions(){const e=(new Date).toISOString(),{data:{user:t}}=await ni.auth.getUser(),{data:n,error:s}=await ni.from("hti_questions").select("id, season_id, n, kind, choices, correct, release_at, is_active, points, title, tags").eq("is_active",!0).lte("release_at",e).order("n",{ascending:!0});if(s)return{ok:!1,error:s.message};let r=[];if(t){const{data:e}=await ni.from("hti_submissions").select("question_id").eq("user_id",t.id);e&&(r=e.map(e=>e.question_id))}return{ok:!0,questions:(null==n?void 0:n.map(e=>{let t="",n=[],s=e.choices;if("string"==typeof e.choices)try{s=JSON.parse(e.choices)}catch(mj){}s&&"object"==typeof s&&(s.question?(t=s.question,n=s.options||[]):s.text?(t=s.text,n=s.options||[]):Array.isArray(s)&&(n=s,t=`Question ${e.n}`));let a=e.correct;if("string"==typeof e.correct)try{a=JSON.parse(e.correct)}catch(mj){}return{...e,answered:r.includes(e.id),locked:!1,points:e.points??10,question_text:t,title:e.title||null,choices:n,correct_answer:a}}))||[]}}async submitHTIAnswer(e,t,n){const s=await this.getAuthToken();if(!s)return{ok:!1,error:"Authentication required"};let r;r="number"==typeof t&&Number.isInteger(t)&&t>=0&&t<20?{value:{index:t}}:"number"==typeof t||"string"==typeof t?{value:t}:"object"==typeof t&&null!==t?t:{value:t};const a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)?"dev-bypass-token":(null==n?void 0:n.turnstileToken)||void 0,i=await fetch(`${lb}/functions/v1/hti_submit_answer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({questionId:e,answer:r,turnstileToken:a})}),o=await i.json();return o.ok&&o.data?{ok:!0,data:{isCorrect:o.data.is_correct,points:o.data.points}}:o}async getADXPortfolio(){const{data:{user:e}}=await ni.auth.getUser();if(!e)return{ok:!1,error:"Authentication required"};const{data:t}=await ni.from("seasons").select("id").eq("status","active").single(),{data:n,error:s}=await ni.from("adx_portfolios").select("*").eq("user_id",e.id).eq("season_id",null==t?void 0:t.id).maybeSingle();let r=[];if(n){const{data:e}=await ni.from("adx_positions").select("*").eq("portfolio_id",n.id);r=e||[]}const{data:a}=await ni.from("adx_revenue_predictions").select("*").eq("user_id",e.id);return{ok:!s||"PGRST116"===s.code,data:{portfolio:n||{cash:1e5,total_value:1e5},positions:r||[],predictions:a||[]},error:s&&"PGRST116"!==s.code?s.message:void 0}}async placeADXOrder(e){const t=await this.getAuthToken();if(!t)return{ok:!1,error:"Authentication required"};return(await fetch(`${lb}/functions/v1/adx_place_order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)})).json()}async saveADXPrediction(e){const t=await this.getAuthToken();if(!t)return{ok:!1,error:"Authentication required"};const{data:n}=await ni.from("seasons").select("id").eq("status","active").single();if(!n)return{ok:!1,error:"No active season"};const s={seasonId:n.id,symbol:e.ticker,value:e.prediction,turnstileToken:void 0};return(await fetch(`${lb}/functions/v1/adx_save_prediction`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)})).json()}async isAdmin(){const{data:{user:e}}=await ni.auth.getUser();if(!e)return!1;const{data:t}=await ni.from("user_profiles").select("is_admin").eq("user_id",e.id).single();return(null==t?void 0:t.is_admin)||!1}async getAdminQuestions(){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};const{data:e,error:t}=await ni.from("hti_questions").select("*").order("n",{ascending:!0});return{ok:!t,data:e||[],error:null==t?void 0:t.message}}async saveAdminQuestion(e){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};if(e.id){const{error:t}=await ni.from("hti_questions").update(e).eq("id",e.id);return{ok:!t,error:null==t?void 0:t.message}}{const{error:t}=await ni.from("hti_questions").insert(e);return{ok:!t,error:null==t?void 0:t.message}}}async deleteAdminQuestion(e){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};const{error:t}=await ni.from("hti_questions").delete().eq("id",e);return{ok:!t,error:null==t?void 0:t.message}}},{entries:db,setPrototypeOf:ub,isFrozen:mb,getPrototypeOf:hb,getOwnPropertyDescriptor:pb}=Object;
/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */let{freeze:fb,seal:gb,create:xb}=Object,{apply:vb,construct:yb}="undefined"!=typeof Reflect&&Reflect;fb||(fb=function(e){return e}),gb||(gb=function(e){return e}),vb||(vb=function(e,t,n){return e.apply(t,n)}),yb||(yb=function(e,t){return new e(...t)});const bb=Ib(Array.prototype.forEach),wb=Ib(Array.prototype.lastIndexOf),jb=Ib(Array.prototype.pop),Nb=Ib(Array.prototype.push),kb=Ib(Array.prototype.splice),Sb=Ib(String.prototype.toLowerCase),_b=Ib(String.prototype.toString),Eb=Ib(String.prototype.match),Tb=Ib(String.prototype.replace),Db=Ib(String.prototype.indexOf),Ab=Ib(String.prototype.trim),Mb=Ib(Object.prototype.hasOwnProperty),Cb=Ib(RegExp.prototype.test),Ob=(Pb=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yb(Pb,t)});var Pb;function Ib(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return vb(e,t,s)}}function Rb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sb;ub&&ub(e,null);let s=t.length;for(;s--;){let r=t[s];if("string"==typeof r){const e=n(r);e!==r&&(mb(t)||(t[s]=e),r=e)}e[r]=!0}return e}function Lb(e){for(let t=0;t<e.length;t++){Mb(e,t)||(e[t]=null)}return e}function Fb(e){const t=xb(null);for(const[n,s]of db(e)){Mb(e,n)&&(Array.isArray(s)?t[n]=Lb(s):s&&"object"==typeof s&&s.constructor===Object?t[n]=Fb(s):t[n]=s)}return t}function zb(e,t){for(;null!==e;){const n=pb(e,t);if(n){if(n.get)return Ib(n.get);if("function"==typeof n.value)return Ib(n.value)}e=hb(e)}return function(){return null}}const Bb=fb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ub=fb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qb=fb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Wb=fb(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$b=fb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Yb=fb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vb=fb(["#text"]),Hb=fb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Gb=fb(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Kb=fb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qb=fb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xb=gb(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Zb=gb(/<%[\w\W]*|[\w\W]*%>/gm),Jb=gb(/\$\{[\w\W]*/gm),ew=gb(/^data-[\-\w.\u00B7-\uFFFF]+$/),tw=gb(/^aria-[\-\w]+$/),nw=gb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sw=gb(/^(?:\w+script|data):/i),rw=gb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aw=gb(/^html$/i),iw=gb(/^[a-z][.\w]*(-[.\w]+)+$/i);var ow=Object.freeze({__proto__:null,ARIA_ATTR:tw,ATTR_WHITESPACE:rw,CUSTOM_ELEMENT:iw,DATA_ATTR:ew,DOCTYPE_NAME:aw,ERB_EXPR:Zb,IS_ALLOWED_URI:nw,IS_SCRIPT_OR_DATA:sw,MUSTACHE_EXPR:Xb,TMPLIT_EXPR:Jb});const lw=1,cw=3,dw=7,uw=8,mw=9;var hw=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==mw||!t.Element)return n.isSupported=!1,n;let{document:s}=t;const r=s,a=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:h,trustedTypes:p}=t,f=c.prototype,g=zb(f,"cloneNode"),x=zb(f,"remove"),v=zb(f,"nextSibling"),y=zb(f,"childNodes"),b=zb(f,"parentNode");if("function"==typeof o){const e=s.createElement("template");e.content&&e.content.ownerDocument&&(s=e.content.ownerDocument)}let w,j="";const{implementation:N,createNodeIterator:k,createDocumentFragment:S,getElementsByTagName:_}=s,{importNode:E}=r;let T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof db&&"function"==typeof b&&N&&void 0!==N.createHTMLDocument;const{MUSTACHE_EXPR:D,ERB_EXPR:A,TMPLIT_EXPR:M,DATA_ATTR:C,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:I,CUSTOM_ELEMENT:R}=ow;let{IS_ALLOWED_URI:L}=ow,F=null;const z=Rb({},[...Bb,...Ub,...qb,...$b,...Vb]);let B=null;const U=Rb({},[...Hb,...Gb,...Kb,...Qb]);let q=Object.seal(xb(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,$=null,Y=!0,V=!0,H=!1,G=!0,K=!1,Q=!0,X=!1,Z=!1,J=!1,ee=!1,te=!1,ne=!1,se=!0,re=!1,ae=!0,ie=!1,oe={},le=null;const ce=Rb({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const ue=Rb({},["audio","video","img","source","image","track"]);let me=null;const he=Rb({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let xe=ge,ve=!1,ye=null;const be=Rb({},[pe,fe,ge],_b);let we=Rb({},["mi","mo","mn","ms","mtext"]),je=Rb({},["annotation-xml"]);const Ne=Rb({},["title","style","font","a","script"]);let ke=null;const Se=["application/xhtml+xml","text/html"];let _e=null,Ee=null;const Te=s.createElement("form"),De=function(e){return e instanceof RegExp||e instanceof Function},Ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ee||Ee!==e){if(e&&"object"==typeof e||(e={}),e=Fb(e),ke=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,_e="application/xhtml+xml"===ke?_b:Sb,F=Mb(e,"ALLOWED_TAGS")?Rb({},e.ALLOWED_TAGS,_e):z,B=Mb(e,"ALLOWED_ATTR")?Rb({},e.ALLOWED_ATTR,_e):U,ye=Mb(e,"ALLOWED_NAMESPACES")?Rb({},e.ALLOWED_NAMESPACES,_b):be,me=Mb(e,"ADD_URI_SAFE_ATTR")?Rb(Fb(he),e.ADD_URI_SAFE_ATTR,_e):he,de=Mb(e,"ADD_DATA_URI_TAGS")?Rb(Fb(ue),e.ADD_DATA_URI_TAGS,_e):ue,le=Mb(e,"FORBID_CONTENTS")?Rb({},e.FORBID_CONTENTS,_e):ce,W=Mb(e,"FORBID_TAGS")?Rb({},e.FORBID_TAGS,_e):Fb({}),$=Mb(e,"FORBID_ATTR")?Rb({},e.FORBID_ATTR,_e):Fb({}),oe=!!Mb(e,"USE_PROFILES")&&e.USE_PROFILES,Y=!1!==e.ALLOW_ARIA_ATTR,V=!1!==e.ALLOW_DATA_ATTR,H=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,Q=!1!==e.SAFE_FOR_XML,X=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,se=!1!==e.SANITIZE_DOM,re=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||nw,xe=e.NAMESPACE||ge,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,je=e.HTML_INTEGRATION_POINTS||je,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&De(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&De(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(V=!1),te&&(ee=!0),oe&&(F=Rb({},Vb),B=[],!0===oe.html&&(Rb(F,Bb),Rb(B,Hb)),!0===oe.svg&&(Rb(F,Ub),Rb(B,Gb),Rb(B,Qb)),!0===oe.svgFilters&&(Rb(F,qb),Rb(B,Gb),Rb(B,Qb)),!0===oe.mathMl&&(Rb(F,$b),Rb(B,Kb),Rb(B,Qb))),e.ADD_TAGS&&(F===z&&(F=Fb(F)),Rb(F,e.ADD_TAGS,_e)),e.ADD_ATTR&&(B===U&&(B=Fb(B)),Rb(B,e.ADD_ATTR,_e)),e.ADD_URI_SAFE_ATTR&&Rb(me,e.ADD_URI_SAFE_ATTR,_e),e.FORBID_CONTENTS&&(le===ce&&(le=Fb(le)),Rb(le,e.FORBID_CONTENTS,_e)),ae&&(F["#text"]=!0),X&&Rb(F,["html","head","body"]),F.table&&(Rb(F,["tbody"]),delete W.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Ob('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Ob('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,j=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(a){return null}}(p,a)),null!==w&&"string"==typeof j&&(j=w.createHTML(""));fb&&fb(e),Ee=e}},Me=Rb({},[...Ub,...qb,...Wb]),Ce=Rb({},[...$b,...Yb]),Oe=function(e){Nb(n.removed,{element:e});try{b(e).removeChild(e)}catch(t){x(e)}},Pe=function(e,t){try{Nb(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(s){Nb(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Oe(t)}catch(s){}else try{t.setAttribute(e,"")}catch(s){}},Ie=function(e){let t=null,n=null;if(J)e="<remove></remove>"+e;else{const t=Eb(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ke&&xe===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=w?w.createHTML(e):e;if(xe===ge)try{t=(new h).parseFromString(r,ke)}catch(i){}if(!t||!t.documentElement){t=N.createDocument(xe,"template",null);try{t.documentElement.innerHTML=ve?j:r}catch(i){}}const a=t.body||t.documentElement;return e&&n&&a.insertBefore(s.createTextNode(n),a.childNodes[0]||null),xe===ge?_.call(t,X?"html":"body")[0]:X?t.documentElement:a},Re=function(e){return k.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Le=function(e){return e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Fe=function(e){return"function"==typeof l&&e instanceof l};function ze(e,t,s){bb(e,e=>{e.call(n,t,s,Ee)})}const Be=function(e){let t=null;if(ze(T.beforeSanitizeElements,e,null),Le(e))return Oe(e),!0;const s=_e(e.nodeName);if(ze(T.uponSanitizeElement,e,{tagName:s,allowedTags:F}),Q&&e.hasChildNodes()&&!Fe(e.firstElementChild)&&Cb(/<[/\w!]/g,e.innerHTML)&&Cb(/<[/\w!]/g,e.textContent))return Oe(e),!0;if(e.nodeType===dw)return Oe(e),!0;if(Q&&e.nodeType===uw&&Cb(/<[/\w]/g,e.data))return Oe(e),!0;if(!F[s]||W[s]){if(!W[s]&&qe(s)){if(q.tagNameCheck instanceof RegExp&&Cb(q.tagNameCheck,s))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(s))return!1}if(ae&&!le[s]){const t=b(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){for(let s=n.length-1;s>=0;--s){const r=g(n[s],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,v(e))}}}return Oe(e),!0}return e instanceof c&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:xe,tagName:"template"});const n=Sb(e.tagName),s=Sb(t.tagName);return!!ye[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===ge?"svg"===n:t.namespaceURI===pe?"svg"===n&&("annotation-xml"===s||we[s]):Boolean(Me[n]):e.namespaceURI===pe?t.namespaceURI===ge?"math"===n:t.namespaceURI===fe?"math"===n&&je[s]:Boolean(Ce[n]):e.namespaceURI===ge?!(t.namespaceURI===fe&&!je[s])&&!(t.namespaceURI===pe&&!we[s])&&!Ce[n]&&(Ne[n]||!Me[n]):!("application/xhtml+xml"!==ke||!ye[e.namespaceURI]))}(e)?(Oe(e),!0):"noscript"!==s&&"noembed"!==s&&"noframes"!==s||!Cb(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===cw&&(t=e.textContent,bb([D,A,M],e=>{t=Tb(t,e," ")}),e.textContent!==t&&(Nb(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze(T.afterSanitizeElements,e,null),!1):(Oe(e),!0)},Ue=function(e,t,n){if(se&&("id"===t||"name"===t)&&(n in s||n in Te))return!1;if(V&&!$[t]&&Cb(C,t));else if(Y&&Cb(O,t));else if(!B[t]||$[t]){if(!(qe(e)&&(q.tagNameCheck instanceof RegExp&&Cb(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&Cb(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Cb(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(me[t]);else if(Cb(L,Tb(n,I,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Db(n,"data:")||!de[e]){if(H&&!Cb(P,Tb(n,I,"")));else if(n)return!1}else;return!0},qe=function(e){return"annotation-xml"!==e&&Eb(e,R)},We=function(e){ze(T.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Le(e))return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let r=t.length;for(;r--;){const i=t[r],{name:o,namespaceURI:l,value:c}=i,d=_e(o),u=c;let m="value"===o?u:Ab(u);if(s.attrName=d,s.attrValue=m,s.keepAttr=!0,s.forceKeepAttr=void 0,ze(T.uponSanitizeAttribute,e,s),m=s.attrValue,!re||"id"!==d&&"name"!==d||(Pe(o,e),m="user-content-"+m),Q&&Cb(/((--!?|])>)|<\/(style|title)/i,m)){Pe(o,e);continue}if(s.forceKeepAttr)continue;if(!s.keepAttr){Pe(o,e);continue}if(!G&&Cb(/\/>/i,m)){Pe(o,e);continue}K&&bb([D,A,M],e=>{m=Tb(m,e," ")});const h=_e(e.nodeName);if(Ue(h,d,m)){if(w&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(l);else switch(p.getAttributeType(h,d)){case"TrustedHTML":m=w.createHTML(m);break;case"TrustedScriptURL":m=w.createScriptURL(m)}if(m!==u)try{l?e.setAttributeNS(l,o,m):e.setAttribute(o,m),Le(e)?Oe(e):jb(n.removed)}catch(a){Pe(o,e)}}else Pe(o,e)}ze(T.afterSanitizeAttributes,e,null)},$e=function e(t){let n=null;const s=Re(t);for(ze(T.beforeSanitizeShadowDOM,t,null);n=s.nextNode();)ze(T.uponSanitizeShadowNode,n,null),Be(n),We(n),n.content instanceof i&&e(n.content);ze(T.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null,a=null,o=null,c=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Fe(e)){if("function"!=typeof e.toString)throw Ob("toString is not a function");if("string"!=typeof(e=e.toString()))throw Ob("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Z||Ae(t),n.removed=[],"string"==typeof e&&(ie=!1),ie){if(e.nodeName){const t=_e(e.nodeName);if(!F[t]||W[t])throw Ob("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)s=Ie("\x3c!----\x3e"),a=s.ownerDocument.importNode(e,!0),a.nodeType===lw&&"BODY"===a.nodeName||"HTML"===a.nodeName?s=a:s.appendChild(a);else{if(!ee&&!K&&!X&&-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(s=Ie(e),!s)return ee?null:ne?j:""}s&&J&&Oe(s.firstChild);const d=Re(ie?e:s);for(;o=d.nextNode();)Be(o),We(o),o.content instanceof i&&$e(o.content);if(ie)return e;if(ee){if(te)for(c=S.call(s.ownerDocument);s.firstChild;)c.appendChild(s.firstChild);else c=s;return(B.shadowroot||B.shadowrootmode)&&(c=E.call(r,c,!0)),c}let u=X?s.outerHTML:s.innerHTML;return X&&F["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&Cb(aw,s.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+u),K&&bb([D,A,M],e=>{u=Tb(u,e," ")}),w&&ne?w.createHTML(u):u},n.setConfig=function(){Ae(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Z=!0},n.clearConfig=function(){Ee=null,Z=!1},n.isValidAttribute=function(e,t,n){Ee||Ae({});const s=_e(e),r=_e(t);return Ue(s,r,n)},n.addHook=function(e,t){"function"==typeof t&&Nb(T[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=wb(T[e],t);return-1===n?void 0:kb(T[e],n,1)[0]}return jb(T[e])},n.removeHooks=function(e){T[e]=[]},n.removeAllHooks=function(){T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function pw(e){if(!e||"string"!=typeof e)return"";try{return hw.sanitize(e,{ALLOWED_TAGS:["b","strong","i","em","u","s","sub","sup","br","p","span","ul","ol","li","small"],ALLOWED_ATTR:["class","style"]})}catch{return""}}var fw={};!function e(t,n,s,r){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix;function o(){}function l(e){var s=n.exports.Promise,r=void 0!==s?s:t.Promise;return"function"==typeof r?new r(e):(e(o,o),null)}var c,d,u,m,h,p,f=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var s=new OffscreenCanvas(n.width,n.height);return s.getContext("2d").drawImage(n,0,0),t.set(n,s),s},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var s=e.transferToImageBitmap();try{n.createPattern(s,"no-repeat")}catch(mj){return!1}return!0}(),new Map),g=(u=Math.floor(1e3/60),m={},h=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(c=function(e){var t=Math.random();return m[t]=requestAnimationFrame(function n(s){h===s||h+u-1<s?(h=s,delete m[t],e()):m[t]=requestAnimationFrame(n)}),t},d=function(e){m[e]&&cancelAnimationFrame(m[e])}):(c=function(e){return setTimeout(e,u)},d=function(e){return clearTimeout(e)}),{frame:c,cancel:d}),x=function(){var t,n,r={};return function(){if(t)return t;if(!s&&a){var i=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([i])))}catch(mj){return void 0!==typeof console&&console.warn,null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(s,a,i){if(n)return t(s,null),n;var o=Math.random().toString(36).slice(2);return n=l(function(a){function l(t){t.data.callback===o&&(delete r[o],e.removeEventListener("message",l),n=null,f.clear(),i(),a())}e.addEventListener("message",l),t(s,o),r[o]=l.bind(null,{data:{callback:o}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),r)r[t](),delete r[t]}}(t)}return t}}(),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(e,t,n){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:v[t],n)}function b(e){return e<0?0:Math.floor(e)}function w(e,t){return Math.floor(Math.random()*(t-e))+e}function j(e){return parseInt(e,16)}function N(e){return e.map(k)}function k(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:j(t.substring(0,2)),g:j(t.substring(2,4)),b:j(t.substring(4,6))}}function S(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function _(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function E(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function T(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,s=t.x+t.random*t.tiltCos,r=t.y+t.random*t.tiltSin,a=t.wobbleX+t.random*t.tiltCos,o=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,s,r,a,i){var o=new Path2D(e),l=new Path2D;l.addPath(o,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(i)*r,Math.sin(i)*r,-Math.sin(i)*a,Math.cos(i)*a,n,s])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(a-s),.1*Math.abs(o-r),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(a-s),d=.1*Math.abs(o-r),u=t.shape.bitmap.width*t.scalar,m=t.shape.bitmap.height*t.scalar,h=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*d,Math.cos(l)*d,t.x,t.y]);h.multiplySelf(new DOMMatrix(t.shape.matrix));var p=e.createPattern(f.transform(t.shape.bitmap),"no-repeat");p.setTransform(h),e.globalAlpha=1-n,e.fillStyle=p,e.fillRect(t.x-u/2,t.y-m/2,u,m),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(a-s)*t.ovalScalar,Math.abs(o-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,s,r,a,i,o,l){e.save(),e.translate(t,n),e.rotate(a),e.scale(s,r),e.arc(0,0,1,i,o,l),e.restore()}(e,t.x,t.y,Math.abs(a-s)*t.ovalScalar,Math.abs(o-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,x=4*t.scalar,v=8*t.scalar,y=t.x,b=t.y,w=5,j=Math.PI/w;w--;)y=t.x+Math.cos(g)*v,b=t.y+Math.sin(g)*v,e.lineTo(y,b),g+=j,y=t.x+Math.cos(g)*x,b=t.y+Math.sin(g)*x,e.lineTo(y,b),g+=j;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(r)),e.lineTo(Math.floor(a),Math.floor(o)),e.lineTo(Math.floor(s),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function D(e,n){var i,o=!e,c=!!y(n||{},"resize"),d=!1,u=y(n,"disableForReducedMotion",Boolean),m=a&&!!y(n||{},"useWorker")?x():null,h=o?S:_,p=!(!e||!m)&&!!e.__confetti_initialized,v="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function j(t,n,a){for(var o=y(t,"particleCount",b),c=y(t,"angle",Number),d=y(t,"spread",Number),u=y(t,"startVelocity",Number),m=y(t,"decay",Number),p=y(t,"gravity",Number),x=y(t,"drift",Number),v=y(t,"colors",N),j=y(t,"ticks",Number),k=y(t,"shapes"),S=y(t,"scalar"),_=!!y(t,"flat"),D=function(e){var t=y(e,"origin",Object);return t.x=y(t,"x",Number),t.y=y(t,"y",Number),t}(t),A=o,M=[],C=e.width*D.x,O=e.height*D.y;A--;)M.push(E({x:C,y:O,angle:c,spread:d,startVelocity:u,color:v[A%v.length],shape:k[w(0,k.length)],ticks:j,decay:m,gravity:p,drift:x,scalar:S,flat:_}));return i?i.addFettis(M):(i=function(e,t,n,a,i){var o,c,d=t.slice(),u=e.getContext("2d"),m=l(function(t){function l(){o=c=null,u.clearRect(0,0,a.width,a.height),f.clear(),i(),t()}o=g.frame(function t(){!s||a.width===r.width&&a.height===r.height||(a.width=e.width=r.width,a.height=e.height=r.height),a.width||a.height||(n(e),a.width=e.width,a.height=e.height),u.clearRect(0,0,a.width,a.height),(d=d.filter(function(e){return T(u,e)})).length?o=g.frame(t):l()}),c=l});return{addFettis:function(e){return d=d.concat(e),m},canvas:e,promise:m,reset:function(){o&&g.cancel(o),c&&c()}}}(e,M,h,n,a),i.promise)}function k(n){var s=u||y(n,"disableForReducedMotion",Boolean),r=y(n,"zIndex",Number);if(s&&v)return l(function(e){e()});o&&i?e=i.canvas:o&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(r),document.body.appendChild(e)),c&&!p&&h(e);var a={width:e.width,height:e.height};function f(){if(m){var t={getBoundingClientRect:function(){if(!o)return e.getBoundingClientRect()}};return h(t),void m.postMessage({resize:{width:t.width,height:t.height}})}a.width=a.height=null}function g(){i=null,c&&(d=!1,t.removeEventListener("resize",f)),o&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,p=!1)}return m&&!p&&m.init(e),p=!0,m&&(e.__confetti_initialized=!0),c&&!d&&(d=!0,t.addEventListener("resize",f,!1)),m?m.fire(n,a,g):j(n,a,g)}return k.reset=function(){m&&m.reset(),i&&i.reset()},k}function A(){return p||(p=D(null,{useWorker:!0,resize:!0})),p}n.exports=function(){return A().apply(this,arguments)},n.exports.reset=function(){A().reset()},n.exports.create=D,n.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,n;"string"==typeof e?t=e:(t=e.path,n=e.matrix);var s=new Path2D(t),r=document.createElement("canvas").getContext("2d");if(!n){for(var a,o,l=1e3,c=l,d=l,u=0,m=0,h=0;h<l;h+=2)for(var p=0;p<l;p+=2)r.isPointInPath(s,h,p,"nonzero")&&(c=Math.min(c,h),d=Math.min(d,p),u=Math.max(u,h),m=Math.max(m,p));a=u-c,o=m-d;var f=Math.min(10/a,10/o);n=[f,0,0,f,-Math.round(a/2+c)*f,-Math.round(o/2+d)*f]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,s="#000000",r='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,r="fontFamily"in e?e.fontFamily:r,s="color"in e?e.color:s);var a=10*n,i=a+"px "+r,o=new OffscreenCanvas(a,a),l=o.getContext("2d");l.font=i;var c=l.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),u=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),m=c.actualBoundingBoxLeft+2,h=c.actualBoundingBoxAscent+2;d+=4,u+=4,(l=(o=new OffscreenCanvas(d,u)).getContext("2d")).font=i,l.fillStyle=s,l.fillText(t,m,h);var p=1/n;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[p,0,0,p,-d*p/2,-u*p/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),fw,!1);const gw=fw.exports;function xw({question:e,onSubmitAnswer:t}){const[n,s]=Je.useState(""),[r,a]=Je.useState(""),[i,o]=Je.useState(""),[l,c]=Je.useState(e.answered||!1);return X.jsxs(_x,{className:"overflow-hidden",children:[X.jsxs(Ex,{children:[X.jsxs("div",{className:"flex items-center justify-between mb-2",children:[X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.tags&&e.tags.map((e,t)=>X.jsx(lx,{variant:"outline",className:"text-xs capitalize",children:e},t)),X.jsx(lx,{variant:"secondary",className:"text-xs",children:e.responseType.replace("-"," ")})]}),X.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[X.jsx(ss,{className:"w-3 h-3"}),e.points," pts"]})]}),X.jsx(Tx,{className:"text-lg",children:e.title})]}),X.jsxs(Dx,{className:"space-y-4",children:[X.jsx("div",{className:"p-4 bg-muted/20 rounded-lg",children:X.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:pw(e.question)}})}),l||e.answered?X.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[X.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm mb-2",children:[X.jsx(On,{className:"w-4 h-4"}),"Answer submitted successfully!"]}),X.jsx("p",{className:"text-sm text-muted-foreground",children:"Your answer is being reviewed and will be scored shortly."})]}):X.jsxs("div",{className:"space-y-3",children:[(()=>{var t;switch(e.responseType){case"text":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Cy,{htmlFor:`answer-${e.id}`,className:"text-sm",children:"Your Answer"}),X.jsx(Oy,{id:`answer-${e.id}`,placeholder:"Type your answer here...",value:n,onChange:e=>s(e.target.value),className:"mt-1 min-h-32"})]})});case"number":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Cy,{htmlFor:`answer-${e.id}`,className:"text-sm",children:"Your Answer (Number)"}),X.jsx(Cv,{id:`answer-${e.id}`,type:"number",placeholder:"Enter a number...",value:r,onChange:e=>a(e.target.value),className:"mt-1"})]})});case"multiple-choice":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Cy,{className:"text-sm",children:"Select your answer:"}),X.jsx(ab,{value:i,onValueChange:o,className:"mt-2",children:null==(t=e.multipleChoiceOptions)?void 0:t.map((e,t)=>X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ib,{value:e,id:`option-${t}`,className:"border-2 border-muted-foreground/30 data-[state=checked]:border-primary data-[state=checked]:bg-primary"}),X.jsx(Cy,{htmlFor:`option-${t}`,className:"text-sm cursor-pointer",children:e})]},t))})]})});default:return null}})(),X.jsx(Mx,{onClick:()=>{let s="";switch(e.responseType){case"text":s=n.trim();break;case"number":s=parseFloat(r);break;case"multiple-choice":s=i}let a=!1;"text"===e.responseType&&"string"==typeof s&&s.length>0?a=!0:"number"!==e.responseType||"number"!=typeof s||isNaN(s)?"multiple-choice"===e.responseType&&""!==s&&(a=!0):a=!0,a&&(t(e.id,s),c(!0))},disabled:!(()=>{switch(e.responseType){case"text":return n.trim().length>0;case"number":return r.trim().length>0&&!isNaN(parseFloat(r));case"multiple-choice":return i.length>0;default:return!1}})(),className:"w-full",children:"Submit Answer"})]})]})]})}function vw({userId:e}){const[t,n]=Je.useState({totalQuestions:0,totalPoints:0,rank:0}),[s,r]=Je.useState(!0);return Je.useEffect(()=>{(async()=>{if(e)try{const{data:s,error:a}=await ni.from("user_profiles").select("hti_score").eq("user_id",e).single();if(a)return void r(!1);const{count:i,error:o}=await ni.from("hti_submissions").select("*",{count:"exact",head:!0}).eq("user_id",e);let l=0,c=null;try{const t=await cb.getHTILeaderboard();if((null==t?void 0:t.ok)&&Array.isArray(t.rows)){const n=t.rows,s=n.findIndex(t=>t.user_id===e);s>=0&&(l=s+1,c=Number(n[s].points||0))}}catch(t){}n({totalQuestions:i||0,totalPoints:null!=c?c:(null==s?void 0:s.hti_score)||0,rank:l})}catch(s){}finally{r(!1)}else r(!1)})()},[e]),s?X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6",children:[X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsx("div",{className:"h-16 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"})})}),X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsx("div",{className:"h-16 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"})})})]}):X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6",children:[X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(ss,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Points"}),X.jsx("div",{className:"font-semibold",children:t.totalPoints}),X.jsx("div",{className:"text-xs text-muted-foreground",children:t.rank>0?`Rank #${t.rank}`:"Unranked"})]})]})})}),X.jsx(_x,{children:X.jsx(Dx,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Yn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Questions"}),X.jsx("div",{className:"font-semibold",children:t.totalQuestions}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"answered"})]})]})})})]})}function yw(){const{user:e}=di(),[t,n]=Je.useState(e?"practice":"leaderboard"),[s,r]=Je.useState("all"),[a,i]=Je.useState("all");Je.useState(new Map);const[o,l]=Je.useState([]),[c,d]=Je.useState([]),[u,m]=Je.useState([]),[h,p]=Je.useState(!0);Je.useEffect(()=>{(async()=>{p(!0);try{const t=await cb.getHTIQuestions();if(t.ok&&t.questions){const e=t.questions.map((e,t)=>{const n=e.question_text||"No question text available",s=e.choices||[];let r,a="text";return"mcq"===e.kind?a="multiple-choice":"number"===e.kind?a="number":"string"===e.kind&&(a="text"),"mcq"===e.kind&&s&&s.length>0&&(r=s.map(e=>"object"==typeof e&&e.label?e.label:String(e))),{id:e.id,category:"technical",difficulty:e.points>=20?"hard":e.points>=15?"medium":"easy",title:e.title&&String(e.title).trim().length>0?String(e.title):`Question ${e.n}`,question:n,responseType:a,correctAnswer:e.correct_answer,multipleChoiceOptions:r,points:e.points||10,answered:e.answered||!1,tags:Array.isArray(e.tags)?e.tags:[]}});l(e)}const n=await cb.getHTILeaderboard();if(n.ok){const e=(n.rows||[]).map((e,t)=>{const n=0===t?"":1===t?"":2===t?"":null,s=[...n?[{key:`rank-${t+1}`,icon:n,label:`Top ${t+1}`}]:[],...Array.isArray(e.badges)?e.badges.map(e=>{var t,n,s;return{key:`cust-${e.badge_id||(null==(t=e.badge)?void 0:t.slug)||Math.random().toString(36).slice(2)}`,icon:(null==(n=null==e?void 0:e.badge)?void 0:n.icon)||"",label:(null==(s=null==e?void 0:e.badge)?void 0:s.label)||"Custom Badge"}}):[]];return{id:e.user_id,username:e.email||"Anonymous",points:e.points||0,questionsAnswered:0,rank:t+1,badges:s}});d(e)}else d([]);if(e){const{data:t}=await ni.from("hti_submissions").select("*").eq("user_id",e.id);if(t){m(t);const e=new Set(t.map(e=>e.question_id));l(t=>t.map(t=>({...t,answered:e.has(t.id)})))}}}catch(t){Ga.error("Failed to load questions and leaderboard")}finally{p(!1)}})()},[e]);const[f,g]=Je.useState(!1),[x,v]=Je.useState(0),y=tt.useRef(null),b=tt.useRef(null);const w=async(t,n)=>{var s;if(e)try{const r=o.find(e=>e.id===t);if(!r)return;let a;if("multiple-choice"===r.responseType){a=null==(s=r.multipleChoiceOptions)?void 0:s.findIndex(e=>e===n)}else a="number"===r.responseType?Number(n):String(n);const i=await async function(){var e;return"undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?f&&y.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.reset)?await new Promise(e=>{b.current=e;try{window.turnstile.reset(y.current)}catch(t){g(!1),v(e=>e+1),e("")}}):void 0:"dev-bypass-token"}(),c=await cb.submitHTIAnswer(t,a,{turnstileToken:i});if(c.ok&&c.data){const n=c.data.isCorrect||c.data.is_correct,s=c.data.points||0;n?(Ga.success(`Correct! You earned ${s} points`),gw({particleCount:100,spread:70,origin:{y:.6}})):Ga.error("Incorrect answer. Try again next time!"),l(e=>e.map(e=>e.id===t?{...e,answered:!0}:e)),m(r=>[...r,{question_id:t,user_id:e.id,is_correct:n,points:s,submitted_at:(new Date).toISOString()}]);setTimeout(async()=>{const e=await cb.getHTILeaderboard();if(e.ok){const t=(e.rows||[]).map((e,t)=>({id:e.user_id,username:e.email||"Anonymous",points:e.points||0,questionsAnswered:0,rank:t+1,badges:[]}));d(t)}else d([])},500)}else Ga.error(c.error||"Failed to submit answer")}catch(r){Ga.error("Failed to submit answer. Please try again.")}else Ga.error("Please sign in to submit answers")};tt.useEffect(()=>{e||"practice"!==t||n("leaderboard")},[e]);const j=o.filter(e=>{const t="all"===s||e.category===s,n="all"===a||e.responseType===a;return t&&n});return X.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[X.jsx(Dy,{children:X.jsx(vw,{userId:null==e?void 0:e.id})}),X.jsxs(sx,{value:t,onValueChange:n,className:"w-full",children:[X.jsx("div",{className:"sr-only","aria-hidden":"true",children:X.jsx(_v,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"compact",onLoad:e=>{y.current=e,g(!0)},onVerify:e=>{b.current&&(b.current(e),b.current=null)},onExpire:()=>{},onError:()=>{g(!1),v(e=>e+1)}},`hti-${x}`)}),X.jsxs(rx,{className:`grid w-full ${e?"grid-cols-2":"grid-cols-1"} max-w-md`,children:[e&&X.jsxs(ax,{value:"practice",className:"flex items-center gap-2",children:[X.jsx(Nn,{className:"w-4 h-4"}),"Practice"]}),X.jsxs(ax,{value:"leaderboard",className:"flex items-center gap-2",children:[X.jsx(ss,{className:"w-4 h-4"}),"Leaderboard"]})]}),e&&X.jsx(ix,{value:"practice",className:"mt-6",children:X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Practice Questions"}),X.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All answer submissions are final."})]}),X.jsxs("div",{className:"flex gap-3",children:[X.jsxs(Cx,{value:s,onValueChange:r,children:[X.jsx(Px,{className:"w-48",children:X.jsx(Ox,{placeholder:"Select category"})}),X.jsxs(Ix,{children:[X.jsx(Rx,{value:"all",children:"All Categories"}),X.jsx(Rx,{value:"technical",children:"Technical"}),X.jsx(Rx,{value:"behavioral",children:"Behavioral"}),X.jsx(Rx,{value:"system-design",children:"System Design"}),X.jsx(Rx,{value:"case-study",children:"Case Study"})]})]}),X.jsxs(Cx,{value:a,onValueChange:i,children:[X.jsx(Px,{className:"w-48",children:X.jsx(Ox,{placeholder:"Response type"})}),X.jsxs(Ix,{children:[X.jsx(Rx,{value:"all",children:"All Types"}),X.jsx(Rx,{value:"text",children:"Free Text"}),X.jsx(Rx,{value:"number",children:"Number"}),X.jsx(Rx,{value:"multiple-choice",children:"Multiple Choice"})]})]})]})]}),h?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):j.length>0?X.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map(e=>X.jsx(xw,{question:e,onSubmitAnswer:w},e.id))}):X.jsx(_x,{children:X.jsxs(Dx,{className:"p-8 text-center",children:[X.jsx(kn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),X.jsx("p",{className:"text-muted-foreground",children:"No questions available at the moment. Check back later!"})]})})]})}),X.jsx(ix,{value:"leaderboard",className:"mt-6",children:X.jsxs(_x,{children:[X.jsx(Ex,{children:X.jsxs(Tx,{className:"flex items-center gap-2",children:[X.jsx(ss,{className:"w-5 h-5"}),"Interview Champions"]})}),X.jsx(Dx,{children:h?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):X.jsx("div",{className:"space-y-3",children:c.length>0?c.map(t=>{var n;return X.jsx("div",{className:"p-4 rounded-lg border transition-all hover:shadow-md "+(t.id===(null==e?void 0:e.id)?"bg-primary/5 border-primary/20 ring-2 ring-primary/10":"bg-card"),children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsxs("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted font-semibold",children:["#",t.rank]}),X.jsx("div",{children:X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-semibold",children:t.username}),t.id===(null==e?void 0:e.id)&&X.jsx(lx,{variant:"secondary",className:"text-xs",children:"You"}),X.jsx("div",{className:"flex items-center gap-1",children:X.jsx(hy,{children:null==(n=t.badges)?void 0:n.map(e=>X.jsxs(py,{children:[X.jsx(fy,{asChild:!0,children:X.jsx("span",{className:"text-lg cursor-default select-none",children:e.icon})}),X.jsx(gy,{side:"top",children:X.jsx("span",{className:"font-medium",children:e.label})})]},e.key))})})]})})]}),X.jsxs("div",{className:"text-right",children:[X.jsxs("div",{className:"font-semibold",children:[t.points," points"]}),X.jsx("div",{className:"text-sm text-muted-foreground",children:"Total score"})]})]})},t.id)}):X.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No participants yet. Be the first to answer questions!"})})})]})})]})]})}function bw(){const[e,t]=tt.useState({label:null}),{user:n}=di();if(tt.useEffect(()=>{let e=!1;return(async()=>{try{if(!n)return void t({label:null});const{supabase:r}=await ct(async()=>{const{supabase:e}=await Promise.resolve().then(()=>si);return{supabase:e}},void 0),{data:a}=await r.from("seasons").select("id, code, name, starts_at, ends_at").eq("status","active").maybeSingle();if(e)return;if(!a)return void t({label:null});let i=null;if(a.code&&String(a.code).trim().length>0)i=String(a.code);else if(a.name&&String(a.name).trim().length>0)i=String(a.name);else if(a.starts_at)try{const e=new Date(a.starts_at),t=Math.floor(e.getUTCMonth()/3)+1;i=`Q${t} ${e.getUTCFullYear()}`}catch(s){i=String(a.id)}else i=String(a.id);t({label:i,starts_at:a.starts_at||null,ends_at:a.ends_at||null})}catch(s){t({label:null})}})(),()=>{e=!0}},[n]),!n||!e.label)return null;const s=function(e,t){try{if(!e)return null;const n=new Date(e),s=n.toLocaleString("en-US",{month:"short"}),r=n.getFullYear();if(t){const e=new Date(t),n=e.toLocaleString("en-US",{month:"short"}),a=e.getFullYear();return r===a?`${s}${n} ${r}`:`${s} ${r}  ${n} ${a}`}return`${s} ${r}`}catch{return null}}(e.starts_at,e.ends_at);return X.jsx("div",{className:"relative",children:X.jsxs("div",{title:s?`Season: ${e.label}  ${s}`:`Season: ${e.label}`,className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r from-[#7dcb53]/10 via-[#7dcb53]/5 to-[#7dcb53]/10 text-[#2b5f16] dark:text-[#b7f09a] border border-[#7dcb53]/50 shadow-sm backdrop-blur-sm ring-1 ring-[#7dcb53]/15",children:[X.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"w-4 h-4 text-[#6fbd49] dark:text-[#9ce074]",children:X.jsx("path",{fill:"currentColor",d:"M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a1 1 0 0 1 1-1m12 7H5v9h14V9Z"})}),X.jsxs("span",{className:"font-medium text-xs tracking-wide",children:["Season ",e.label]}),s?X.jsx("span",{className:"ml-1 inline-flex items-center rounded-full bg-[#7dcb53]/15 px-2 py-0.5 text-[10px] font-semibold text-[#2b5f16] dark:text-[#b7f09a]",children:s}):null]})})}function ww(){const{isEventUser:e}=di(),[t,n]=Je.useState("trading");return X.jsxs("div",{className:"min-h-screen bg-background",children:[X.jsx("div",{className:"border-b bg-card",children:X.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:[X.jsxs("div",{className:"flex items-start justify-between mb-4",children:[X.jsxs("div",{children:[X.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"FS QDS Battleground"}),X.jsx("p",{className:"text-muted-foreground text-lg",children:"Master trading and interview skills"})]}),X.jsx("div",{className:"self-start",children:X.jsx(bw,{})})]}),X.jsx(sx,{value:t,onValueChange:n,className:"w-full",children:X.jsxs(rx,{className:`grid w-full ${e?"grid-cols-1":"grid-cols-2"} max-w-md h-12`,children:[X.jsxs(ax,{value:"trading",className:"flex items-center gap-2 text-base",children:[X.jsx(ts,{className:"w-5 h-5"}),"Axe the DAX"]}),!e&&X.jsxs(ax,{value:"interview",className:"flex items-center gap-2 text-base",children:[X.jsx(Yn,{className:"w-5 h-5"}),"Hack the Interview"]})]})})]})}),X.jsxs(sx,{value:t,onValueChange:n,className:"w-full",children:[X.jsx(ix,{value:"trading",className:"mt-0",children:X.jsx(My,{})}),!e&&X.jsx(ix,{value:"interview",className:"mt-0",children:X.jsx(yw,{})})]})]})}fw.exports.create;const jw=()=>{const{t:e}=oi();return X.jsxs("div",{className:"battleground-container battleground-figma-scope",children:[X.jsx(ww,{}),X.jsx("div",{className:"mt-4 md:mt-6 px-4 md:px-6 bg-white pb-10",children:X.jsx("div",{className:"max-w-3xl mx-auto bg-yellow-50 border border-yellow-200 rounded shadow-sm p-3 sm:p-3 text-yellow-900",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-600 mt-0.5 mr-2.5 text-sm sm:text-base"}),X.jsxs("div",{children:[X.jsx("div",{className:"font-semibold mb-0.5 text-xs sm:text-sm",children:e("battleground.riskWarningTitle")}),X.jsx("p",{className:"text-[11px] sm:text-xs leading-relaxed text-yellow-800",children:e("battleground.riskWarningText")})]})]})})})]})},Nw=()=>{const{t:e}=oi();return X.jsx("section",{id:"contact",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-neutral-900 mb-4",children:e("navigation.contact")}),X.jsx("p",{className:"max-w-3xl mx-auto text-neutral-700",children:e("contact.subtitle")})]}),X.jsx("div",{className:"grid grid-cols-1 gap-8 mb-12",children:X.jsxs("div",{children:[X.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-md border border-neutral-200 mb-8",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-6",children:e("contact.joinTitle")}),X.jsx("p",{className:"text-neutral-700 mb-6",children:e("contact.joinDescription")}),X.jsxs("div",{className:"space-y-4 mb-6",children:[X.jsxs("div",{className:"flex",children:[X.jsx("div",{className:"flex-shrink-0",children:X.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#1256C4] text-white",children:X.jsx("i",{className:"fas fa-check"})})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"Open to All Programs"}),X.jsx("p",{className:"text-neutral-700",children:"Bachelor's, Master's, and Ph.D. students from any discipline can join."})]})]}),X.jsxs("div",{className:"flex",children:[X.jsx("div",{className:"flex-shrink-0",children:X.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#1256C4] text-white",children:X.jsx("i",{className:"fas fa-check"})})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"No Prior Experience Required"}),X.jsx("p",{className:"text-neutral-700",children:"We offer learning paths for beginners and advanced practitioners alike."})]})]}),X.jsxs("div",{className:"flex",children:[X.jsx("div",{className:"flex-shrink-0",children:X.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#1256C4] text-white",children:X.jsx("i",{className:"fas fa-check"})})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"Regular Commitment"}),X.jsx("p",{className:"text-neutral-700",children:"Members are expected to participate in at least one project or division and attend regular meetings."})]})]})]}),X.jsxs("div",{className:"bg-neutral-100 p-4 rounded-md",children:[X.jsx("h4",{className:"font-medium mb-2",children:"Next Recruitment Cycle"}),X.jsx("p",{className:"text-neutral-700 mb-2",children:"Applications for 2025/26 will open on 2nd September and close on 15th September 2025, 11:59pm."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-md border border-neutral-200",children:[X.jsx("h3",{className:"font-inter text-xl font-semibold mb-4",children:"Contact Information"}),X.jsx("div",{className:"space-y-4",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-[#1256C4] rounded-full text-white",children:X.jsx("i",{className:"fas fa-envelope"})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"Email"}),X.jsx("p",{className:"text-neutral-700",children:X.jsx("a",{href:"mailto:fs.data.science00@gmail.com",className:"underline",children:"fs.data.science00@gmail.com"})})]})]})})]})]})}),X.jsxs("div",{className:"bg-[#1256C4] text-white rounded-lg p-8 shadow-md",children:[X.jsxs("div",{className:"text-center mb-6",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-2",children:"Connect With Us"}),X.jsx("p",{children:"Follow our social media channels to stay updated with the latest events and activities."})]}),X.jsxs("div",{className:"flex justify-center space-x-6",children:[X.jsxs("a",{href:"https://de.linkedin.com/company/fs-quant",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[X.jsx("div",{className:"h-12 w-12 rounded-full bg-white text-[#0B3D91] flex items-center justify-center text-2xl mb-2",children:X.jsx("i",{className:"fab fa-linkedin-in"})}),X.jsx("span",{className:"text-sm",children:"LinkedIn"})]}),X.jsxs("a",{href:"https://github.com/fsqds/",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[X.jsx("div",{className:"h-12 w-12 rounded-full bg-white text-[#0B3D91] flex items-center justify-center text-2xl mb-2",children:X.jsx("i",{className:"fab fa-github"})}),X.jsx("span",{className:"text-sm",children:"GitHub"})]}),X.jsxs("a",{href:"https://www.instagram.com/fs_quant/?hl=en",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[X.jsx("div",{className:"h-12 w-12 rounded-full bg-white text-[#0B3D91] flex items-center justify-center text-2xl mb-2",children:X.jsx("i",{className:"fab fa-instagram"})}),X.jsx("span",{className:"text-sm",children:"Instagram"})]})]})]})]})})};function kw(){const e=function(){const[e,t]=Je.useState(null);return tt.useEffect(()=>{(async()=>{const{data:{session:e}}=await ni.auth.getSession();t((null==e?void 0:e.access_token)||null)})()},[]),e}(),[t,n]=Je.useState({}),[s,r]=Je.useState("Market Making Demo"),[a,i]=Je.useState(""),[o,l]=Je.useState([]),[c,d]=Je.useState(""),[u,m]=Je.useState(1e5),[h,p]=Je.useState(!1),[f,g]=Je.useState(null),[x,v]=Je.useState(!1);Je.useState(""),Je.useState([]);const[y,b]=Je.useState([]),[w,j]=Je.useState("SIE,BMW"),[N,k]=Je.useState(.5),[S,_]=Je.useState(180),[E,T]=Je.useState("liquidity window"),[D,A]=Je.useState("ticker"),[M,C]=Je.useState(""),[O,P]=Je.useState([]),[I,R]=Je.useState({}),[L,F]=Je.useState([]),[z,B]=Je.useState([]),[U,q]=Je.useState([]),[W,$]=Je.useState([]);tt.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await ni.from("adx_tickers").select("symbol").eq("is_active",!0).order("symbol",{ascending:!0});if(!t&&Array.isArray(e)){const t=e.map(e=>String(e.symbol)).filter(Boolean);P(t);const n=new Set(w.split(",").map(e=>e.trim()).filter(Boolean)),s={};t.forEach(e=>{s[e]=n.has(e)}),R(s)}}catch(e){}})()},[]),tt.useEffect(()=>{let e=null,t=!1;const n=async()=>{try{const e=await H(cv.adminOpsListOverrides,{},"GET");!t&&e&&Array.isArray(e.data)&&F(e.data)}catch(e){t||F([])}};return n(),e=setInterval(n,5e3),()=>{t=!0,e&&clearInterval(e)}},[]),tt.useEffect(()=>{(()=>{const e=new Set(w.split(",").map(e=>e.trim()).filter(Boolean));R(t=>{const n={...t};return O.forEach(t=>{n[t]=e.has(t)}),n})})()},[w]),Je.useMemo(()=>Object.entries(I).filter(([,e])=>e).map(([e])=>e),[I]);const Y=Je.useMemo(()=>{const e=new Set;for(const t of L||[])"ticker"===t.scope&&"string"==typeof t.target&&t.target&&e.add(t.target);return e},[L]);function V(e){try{const t=new Date(e.end_at).getTime()-Date.now();if(t<=0)return"ended";const n=Math.round(t/1e3);if(n<60)return`${n}s`;const s=Math.floor(n/60);return`${s}m ${n%60}s`}catch{return""}}async function H(t,n,s="POST"){const{data:{session:r}}=await ni.auth.getSession(),a=(null==r?void 0:r.access_token)||e;if(!a)throw Ga.error("Authentication required"),new Error("No auth");const i={"Content-Type":"application/json",Authorization:`Bearer ${a}`},o=await fetch(t+("GET"===s&&n?`?${new URLSearchParams(n).toString()}`:""),{method:s,headers:i,body:"POST"===s?JSON.stringify(n||{}):void 0});let l=null;try{l=await o.json()}catch{l={ok:o.ok}}if(!o.ok&&!(null==l?void 0:l.ok))throw new Error((null==l?void 0:l.error)||`HTTP ${o.status}`);return l}Je.useMemo(()=>{const t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},[e]);const G=(e,t)=>n(n=>({...n,[e]:t}));async function K(){if(a)try{G("score",!0);const e=await H(cv.mmEventScoreboard,{event_id:a},"GET"),t=Array.isArray(null==e?void 0:e.data)?e.data:[];l(t),Ga.success(`Scoreboard fetched (${t.length} teams)`)}catch(mj){Ga.error(`Scoreboard failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G("score",!1)}else Ga.error("Set event id")}async function Q(e){try{G(`auction_${e}`,!0);await H(cv.mmEventRunAuction,{slot:e});Ga.success(`Auction ${e} started`)}catch(mj){Ga.error(`Auction ${e} failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G(`auction_${e}`,!1)}}return tt.useMemo(()=>{if(!(null==y?void 0:y.length))return null;const e=(t=y,`${(n=["team_name","email","password","portfolio_id","ok","error","status"]).join(",")}\n${t.map(e=>n.map(t=>JSON.stringify(e[t]??"")).join(",")).join("\n")}`);var t,n;const s=new Blob([e],{type:"text/csv"});return URL.createObjectURL(s)},[y]),X.jsxs("div",{className:"space-y-8 p-4 border rounded-md",children:[X.jsx("h2",{className:"text-xl font-semibold",children:"Event Admin Panel (Minimal Stub)"}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Event Controls"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{className:"border px-2 py-1",placeholder:"New Event Name (optional)",value:s,onChange:e=>r(e.target.value)}),X.jsx("button",{disabled:!!t.create||!e,onClick:async function(){var e,t;try{G("create",!0);const n=await H(cv.mmEventCreate,{name:s});if((null==(e=null==n?void 0:n.data)?void 0:e.id)||(null==n?void 0:n.id)){const e=(null==(t=n.data)?void 0:t.id)||n.id;i(e),Ga.success(`Event created: ${e}`)}else Ga.success("Event created")}catch(mj){Ga.error(`Create failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G("create",!1)}},className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:t.create?"Creating":"Create New Event"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{className:"border px-2 py-1 w-[520px]",placeholder:"Current Event ID",value:a,onChange:e=>i(e.target.value)}),X.jsx("button",{disabled:!!t.score||!e,onClick:K,className:"px-3 py-1 bg-gray-700 text-white rounded disabled:opacity-50",children:t.score?"Fetching":"Refresh Scoreboard"}),X.jsx("button",{disabled:!!t.freeze||!e,onClick:async function(){if(a)try{G("freeze",!0);const e=await H(cv.mmEventFreeze,{event_id:a});(null==e?void 0:e.ok)?Ga.success("Scoreboard frozen"):Ga.warning("Freeze returned non-ok (see console)")}catch(mj){Ga.error(`Freeze failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G("freeze",!1)}else Ga.error("Set event id")},className:"px-3 py-1 bg-emerald-600 text-white rounded disabled:opacity-50",children:t.freeze?"Freezing":"Freeze Scoreboard"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Register Team"}),X.jsx("div",{className:"text-xs text-neutral-600",children:"Note: For bulk registration, credentials are generated per team; CSV email/password columns are ignored. Download the results CSV below to get the generated credentials."}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"Team Name",value:c,onChange:e=>d(e.target.value)}),X.jsx("input",{className:"border px-2 py-1 w-40",type:"number",placeholder:"Starting Cash",value:u,onChange:e=>m(Number(e.target.value)||0)}),X.jsx("button",{disabled:!c||!!t.register_team||!e,onClick:async()=>{var e,t,n,s;if(c)try{G("register_team",!0);const r=await H(cv.mmEventRegisterTeam,{team_name:c,starting_cash:u}),i=(null==(t=null==(e=null==r?void 0:r.data)?void 0:e.user)?void 0:t.email)||"",o=(null==(s=null==(n=null==r?void 0:r.data)?void 0:n.user)?void 0:s.password)||"";i&&o&&(g({email:i,password:o}),p(!0)),Ga.success("Team registered"),d(""),a&&await K()}catch(mj){Ga.error(`Register team failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G("register_team",!1)}else Ga.error("Team name required")},className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:t.register_team?"Registering":"Register Team"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Event Scoreboard"}),0===o.length?X.jsx("div",{className:"text-sm text-gray-500",children:"No teams yet  refresh after registering teams and running auctions."}):X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map((e,t)=>{var n,s,r,a,i,o,l,c,d,u;return X.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[X.jsxs("div",{className:"flex items-center justify-between mb-1",children:[X.jsx("div",{className:"font-semibold",children:e.team_name||"Team"}),X.jsxs("div",{className:"text-xs px-2 py-0.5 rounded "+((e.pnl_pct||0)>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"),children:[(e.pnl_pct??0).toFixed(2),"%"]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[X.jsxs("div",{children:["Equity: ",X.jsx("span",{className:"font-medium",children:(null==(s=(n=e.equity??0).toLocaleString)?void 0:s.call(n))??e.equity})]}),X.jsxs("div",{children:["Cash: ",X.jsx("span",{className:"font-medium",children:(null==(a=(r=e.cash??0).toLocaleString)?void 0:a.call(r))??e.cash})]}),X.jsxs("div",{children:["Positions: ",X.jsx("span",{className:"font-medium",children:(null==(o=(i=e.positions_value??0).toLocaleString)?void 0:o.call(i))??e.positions_value})]}),X.jsxs("div",{children:["Realized: ",X.jsx("span",{className:"font-medium",children:(null==(c=(l=e.realized_pnl??0).toLocaleString)?void 0:c.call(l))??e.realized_pnl})]}),X.jsxs("div",{children:["Exposure: ",X.jsx("span",{className:"font-medium",children:(null==(u=(d=e.exposure??0).toLocaleString)?void 0:u.call(d))??e.exposure})]}),X.jsxs("div",{children:["Trades Today: ",X.jsx("span",{className:"font-medium",children:e.trades_today??0})]})]})]},e.portfolio_id||t)})})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Market Ops  Liquidity / Stress"}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-sm",children:[X.jsx("button",{type:"button",onClick:()=>{k(.5),_(180),T("liquidity window")},className:"px-2 py-1 border rounded",children:"Preset: Liquidity (0.5, 180s)"}),X.jsx("button",{type:"button",onClick:()=>{k(1.5),_(120),T("stress window")},className:"px-2 py-1 border rounded",children:"Preset: Stress (1.5, 120s)"})]}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsx("input",{className:"border px-2 py-1",placeholder:"Tickers (comma)",value:w,onChange:e=>j(e.target.value)}),X.jsx("input",{className:"border px-2 py-1 w-28",type:"number",step:"0.1",placeholder:"slip_mul",value:N,onChange:e=>k(Number(e.target.value))}),X.jsx("input",{className:"border px-2 py-1 w-32",type:"number",placeholder:"duration_sec",value:S,onChange:e=>_(Number(e.target.value))}),X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"note",value:E,onChange:e=>T(e.target.value)}),X.jsx("button",{disabled:!!t.override||!e,onClick:async function(){try{G("override",!0);const e=w.split(",").map(e=>e.trim()).filter(Boolean),t={scope:"ticker",targets:e,slip_mul:Number(N),duration_sec:Number(S),note:E};await H(cv.adminOpsSetOverride,t);Ga.success("Override set"),$(t=>[{ts:(new Date).toISOString(),label:`Set override scope=ticker targets=${e.join(",")} slip_mul=${N}`,ok:!0},...t].slice(0,20));try{const e=await H(cv.adminOpsListOverrides,{},"GET");(null==e?void 0:e.data)&&F(e.data)}catch{}}catch(mj){Ga.error(`Override failed: ${(null==mj?void 0:mj.message)||mj}`),$(t=>[{ts:(new Date).toISOString(),label:"Set override failed",ok:!1,details:(null==mj?void 0:mj.message)||String(mj)},...t].slice(0,20))}finally{G("override",!1)}},className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:t.override?"Setting":"Set Override"}),X.jsx("button",{disabled:!!t.listOverrides||!e,onClick:async function(){try{G("listOverrides",!0);const e=await H(cv.adminOpsListOverrides,{},"GET");F(Array.isArray(null==e?void 0:e.data)?e.data:[]),Ga.success("Overrides listed"),$(t=>[{ts:(new Date).toISOString(),label:`Listed overrides (${Array.isArray(null==e?void 0:e.data)?e.data.length:0})`,ok:!0},...t].slice(0,20))}catch(mj){Ga.error(`List overrides failed: ${(null==mj?void 0:mj.message)||mj}`),$(t=>[{ts:(new Date).toISOString(),label:"List overrides failed",ok:!1,details:(null==mj?void 0:mj.message)||String(mj)},...t].slice(0,20))}finally{G("listOverrides",!1)}},className:"px-3 py-1 bg-gray-700 text-white rounded disabled:opacity-50",children:t.listOverrides?"Listing":"List Overrides"})]}),X.jsxs("div",{className:"border rounded p-3 bg-neutral-50",children:[X.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[X.jsx("div",{className:"font-medium",children:"Tickers"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("button",{type:"button",className:"px-2 py-0.5 border rounded",onClick:()=>{const e={};O.forEach(t=>e[t]=!0),R(e),j(O.join(","))},children:"Select All"}),X.jsx("button",{type:"button",className:"px-2 py-0.5 border rounded",onClick:()=>{const e={};O.forEach(t=>e[t]=!1),R(e),j("")},children:"Clear"}),X.jsx("button",{type:"button",className:"px-2 py-0.5 border rounded",onClick:()=>{const e=Object.entries(I).filter(([,e])=>e).map(([e])=>e);j(e.join(","))},children:"Sync to Input"})]})]}),X.jsx("div",{className:"mb-2 text-xs",children:Array.isArray(L)&&L.length>0?X.jsxs("div",{className:"rounded border bg-white p-2",children:[X.jsx("div",{className:"font-medium mb-1",children:"Active Liquidity/Stress Windows"}),X.jsx("div",{className:"space-y-1",children:L.map((e,t)=>{const n=function(e){const t=Number((null==e?void 0:e.slip_mul)||1);return t<1?"liquidity":t>1?"stress":"neutral"}(e);return X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"px-1.5 py-0.5 rounded border text-[11px] "+("liquidity"===n?"bg-emerald-50 text-emerald-700 border-emerald-200":"stress"===n?"bg-amber-50 text-amber-700 border-amber-200":"bg-neutral-50 text-neutral-700 border-neutral-200"),children:n}),X.jsx("span",{className:"font-mono",children:e.scope}),e.target?X.jsx("span",{className:"font-mono",children:e.target}):null,X.jsxs("span",{className:"text-neutral-500",children:["slip",Number(e.slip_mul||1).toFixed(2)]}),e.note?X.jsxs("span",{className:"text-neutral-500",children:["(",e.note,")"]}):null]}),X.jsxs("div",{className:"text-neutral-500",children:["ends in ",V(e)]})]},e.id||t)})})]}):X.jsx("div",{className:"text-neutral-500",children:"No active windows"})}),X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 max-h-48 overflow-auto",children:O.map(e=>X.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[X.jsx("input",{type:"checkbox",checked:!!I[e],onChange:t=>{const n=t.target.checked;R(t=>({...t,[e]:n}))}}),X.jsx("span",{children:e}),Y.has(e)&&X.jsx("span",{className:"text-[10px] px-1 rounded border bg-amber-50 text-amber-700 border-amber-200",children:"active"})]},e))})]}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsxs("select",{className:"border px-2 py-1",value:D,onChange:e=>A(e.target.value),children:[X.jsx("option",{value:"ticker",children:"ticker"}),X.jsx("option",{value:"global",children:"global"})]}),X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"Targets (comma)",value:M,onChange:e=>C(e.target.value)}),X.jsx("button",{disabled:!!t.clearOverrides||!e,onClick:async function(){try{G("clearOverrides",!0);const e=M.split(",").map(e=>e.trim()).filter(Boolean),t={scope:D,targets:e};await H(cv.adminOpsClearOverrides,t);Ga.success("Overrides cleared"),$(t=>[{ts:(new Date).toISOString(),label:`Cleared overrides scope=${D} targets=${e.join(",")}`,ok:!0},...t].slice(0,20));try{const e=await H(cv.adminOpsListOverrides,{},"GET");(null==e?void 0:e.data)&&F(e.data)}catch{}}catch(mj){Ga.error(`Clear overrides failed: ${(null==mj?void 0:mj.message)||mj}`),$(t=>[{ts:(new Date).toISOString(),label:"Clear overrides failed",ok:!1,details:(null==mj?void 0:mj.message)||String(mj)},...t].slice(0,20))}finally{G("clearOverrides",!1)}},className:"px-3 py-1 bg-red-600 text-white rounded disabled:opacity-50",children:t.clearOverrides?"Clearing":"Clear Overrides"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"News Shocks & Marks"}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[X.jsx("input",{className:"border px-2 py-1 w-64",placeholder:"Tickers (comma)",value:w,onChange:e=>j(e.target.value)}),X.jsx("select",{className:"border px-2 py-1",value:void 0,onChange:()=>{},style:{display:"none"},"aria-hidden":!0}),X.jsx("input",{className:"border px-2 py-1 w-28",type:"number",step:"0.01",placeholder:"factor (e.g. 1.18)",value:Number.isFinite(null==window?void 0:window.__shockFactor)?window.__shockFactor:1.18,onChange:e=>{window.__shockFactor=Number(e.target.value)||1}}),X.jsxs("select",{className:"border px-2 py-1",defaultValue:"multiply",onChange:e=>{window.__shockMode=e.target.value},children:[X.jsx("option",{value:"multiply",children:"multiply"}),X.jsx("option",{value:"set",children:"set"})]}),X.jsx("input",{className:"border px-2 py-1 w-28",type:"number",step:"0.01",placeholder:"value (mode=set)",onChange:e=>{window.__shockValue=Number(e.target.value)||0}}),X.jsx("input",{className:"border px-2 py-1 w-[420px]",placeholder:'per-ticker factors JSON (e.g. {"SAP":1.3,"ALV":0.85})',onChange:e=>{window.__shockFactorsJson=e.target.value}}),X.jsx("button",{disabled:!!t.applyShock||!e,onClick:async()=>{var e,t;try{G("applyShock",!0);const n=w.split(",").map(e=>e.trim()).filter(Boolean),s=window.__shockMode||"multiply",r=Number(window.__shockFactor||1),a=Number(window.__shockValue||0);let i;try{const e=window.__shockFactorsJson;e&&e.trim()&&(i=JSON.parse(e))}catch{}const o={tickers:n,mode:s};i&&"object"==typeof i?o.factors=i:o.factor=r,"set"===s&&a>0&&(o.value=a);const l=await H(cv.adminNewsShock,o);Ga.success(`Shock applied: updated_stock_prices=${(null==(e=null==l?void 0:l.data)?void 0:e.updated_stock_prices)??0}, updated_model_marks=${(null==(t=null==l?void 0:l.data)?void 0:t.updated_model_marks)??0}`),B(e=>{var t,r;return[{ts:(new Date).toISOString(),tickers:n,mode:s,factor:o.factor,factors:o.factors,value:o.value??null,updated_stock_prices:null==(t=null==l?void 0:l.data)?void 0:t.updated_stock_prices,updated_model_marks:null==(r=null==l?void 0:l.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(mj){Ga.error(`Apply shock failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G("applyShock",!1)}},className:"px-3 py-1 bg-amber-600 text-white rounded disabled:opacity-50",children:t.applyShock?"Shocking":"Apply News Shock"}),X.jsx("button",{disabled:!!t.refreshMarks||!e,onClick:async()=>{try{G("refreshMarks",!0);const e=w.split(",").map(e=>e.trim()).filter(Boolean),t=await H(cv.adminOptionsRefresh,{tickers:e}),n=!!(null==t?void 0:t.ok);Ga.success(n?"Marks refresh enqueued":"Marks refresh returned non-ok"),q(t=>[{ts:(new Date).toISOString(),tickers:e,ok:n},...t].slice(0,20))}catch(mj){Ga.error(`Refresh marks failed: ${(null==mj?void 0:mj.message)||mj}`),q(e=>[{ts:(new Date).toISOString(),tickers:w.split(",").map(e=>e.trim()).filter(Boolean),ok:!1},...e].slice(0,20))}finally{G("refreshMarks",!1)}},className:"px-3 py-1 bg-indigo-500 text-white rounded disabled:opacity-50",children:t.refreshMarks?"Refreshing":"Refresh Marks"})]}),X.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-sm",children:[X.jsx("span",{className:"text-neutral-600",children:"Shock presets:"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{var e;try{G("presetShock",!0);const t={tickers:["SIE","BMW"],factors:{SIE:1.18,BMW:1.18},mode:"multiply"},n=await H(cv.adminNewsShock,t);Ga.success(`PMI shock applied (SIE,BMW): updated ${(null==(e=null==n?void 0:n.data)?void 0:e.updated_model_marks)??0} marks`),B(e=>{var s,r;return[{ts:(new Date).toISOString(),tickers:t.tickers,mode:t.mode,factors:t.factors,updated_stock_prices:null==(s=null==n?void 0:n.data)?void 0:s.updated_stock_prices,updated_model_marks:null==(r=null==n?void 0:n.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Preset failed")}finally{G("presetShock",!1)}},children:"PMI +18% (SIE,BMW)"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{var e;try{G("presetShock",!0);const t={tickers:["SAP"],factors:{SAP:1.3},mode:"multiply"},n=await H(cv.adminNewsShock,t);Ga.success(`SAP shock applied: updated ${(null==(e=null==n?void 0:n.data)?void 0:e.updated_model_marks)??0} marks`),B(e=>{var s,r;return[{ts:(new Date).toISOString(),tickers:t.tickers,mode:t.mode,factors:t.factors,updated_stock_prices:null==(s=null==n?void 0:n.data)?void 0:s.updated_stock_prices,updated_model_marks:null==(r=null==n?void 0:n.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Preset failed")}finally{G("presetShock",!1)}},children:"SAP +30%"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{var e;try{G("presetShock",!0);const t={tickers:["ALV"],factors:{ALV:.85},mode:"multiply"},n=await H(cv.adminNewsShock,t);Ga.success(`ALV shock applied: updated ${(null==(e=null==n?void 0:n.data)?void 0:e.updated_model_marks)??0} marks`),B(e=>{var s,r;return[{ts:(new Date).toISOString(),tickers:t.tickers,mode:t.mode,factors:t.factors,updated_stock_prices:null==(s=null==n?void 0:n.data)?void 0:s.updated_stock_prices,updated_model_marks:null==(r=null==n?void 0:n.data)?void 0:r.updated_model_marks},...e].slice(0,20)})}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Preset failed")}finally{G("presetShock",!1)}},children:"ALV 15%"}),X.jsx("span",{className:"ml-4 text-neutral-600",children:"Marks quick refresh:"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{try{G("presetMarks",!0);const e=["SIE","BMW"],t=await H(cv.adminOptionsRefresh,{tickers:e});Ga.success((null==t?void 0:t.ok)?"Marks refresh (SIE,BMW) enqueued":"Refresh returned non-ok"),q(n=>[{ts:(new Date).toISOString(),tickers:e,ok:!!(null==t?void 0:t.ok)},...n].slice(0,20))}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Refresh failed")}finally{G("presetMarks",!1)}},children:"SIE,BMW"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{try{G("presetMarks",!0);const e=["SAP"],t=await H(cv.adminOptionsRefresh,{tickers:e});Ga.success((null==t?void 0:t.ok)?"Marks refresh (SAP) enqueued":"Refresh returned non-ok"),q(n=>[{ts:(new Date).toISOString(),tickers:e,ok:!!(null==t?void 0:t.ok)},...n].slice(0,20))}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Refresh failed")}finally{G("presetMarks",!1)}},children:"SAP"}),X.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:async()=>{try{G("presetMarks",!0);const e=["ALV"],t=await H(cv.adminOptionsRefresh,{tickers:e});Ga.success((null==t?void 0:t.ok)?"Marks refresh (ALV) enqueued":"Refresh returned non-ok"),q(n=>[{ts:(new Date).toISOString(),tickers:e,ok:!!(null==t?void 0:t.ok)},...n].slice(0,20))}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Refresh failed")}finally{G("presetMarks",!1)}},children:"ALV"})]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[X.jsxs("div",{className:"rounded border bg-white p-3",children:[X.jsx("div",{className:"font-medium mb-2",children:"Applied Shocks"}),0===z.length?X.jsx("div",{className:"text-sm text-neutral-500",children:"No shocks applied in this session."}):X.jsx("div",{className:"space-y-1 text-sm max-h-48 overflow-auto",children:z.map((e,t)=>X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-mono text-xs",children:new Date(e.ts).toLocaleTimeString()}),X.jsx("span",{children:e.mode}),X.jsxs("span",{className:"font-mono",children:["[",e.tickers.join(","),"]"]}),"number"==typeof e.factor?X.jsxs("span",{children:["",e.factor]}):null,e.value?X.jsxs("span",{children:["= ",e.value]}):null]}),X.jsxs("div",{className:"text-xs text-neutral-600",children:["stocks ",e.updated_stock_prices??0,", marks ",e.updated_model_marks??0]})]},t))})]}),X.jsxs("div",{className:"rounded border bg-white p-3",children:[X.jsx("div",{className:"font-medium mb-2",children:"Marks Refresh"}),0===U.length?X.jsx("div",{className:"text-sm text-neutral-500",children:"No refresh actions in this session."}):X.jsx("div",{className:"space-y-1 text-sm max-h-48 overflow-auto",children:U.map((e,t)=>X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-mono text-xs",children:new Date(e.ts).toLocaleTimeString()}),X.jsxs("span",{className:"font-mono",children:["[",e.tickers.join(","),"]"]})]}),X.jsx("div",{className:"text-xs "+(e.ok?"text-emerald-700":"text-red-700"),children:e.ok?"ok":"failed"})]},t))})]})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Auctions"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("button",{disabled:!!t.auction_open||!e,onClick:async()=>{try{await Q("open"),$(e=>[{ts:(new Date).toISOString(),label:"Run OPEN auction",ok:!0},...e].slice(0,20))}catch{$(e=>[{ts:(new Date).toISOString(),label:"Run OPEN auction",ok:!1},...e].slice(0,20))}},className:"px-3 py-1 bg-indigo-600 text-white rounded disabled:opacity-50",children:t.auction_open?"Running":"Run OPEN (Event)"}),X.jsx("button",{disabled:!!t.auction_close||!e,onClick:async()=>{try{await Q("close"),$(e=>[{ts:(new Date).toISOString(),label:"Run CLOSE auction",ok:!0},...e].slice(0,20))}catch{$(e=>[{ts:(new Date).toISOString(),label:"Run CLOSE auction",ok:!1},...e].slice(0,20))}},className:"px-3 py-1 bg-indigo-700 text-white rounded disabled:opacity-50",children:t.auction_close?"Running":"Run CLOSE (Event)"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsxs("label",{className:"text-sm flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",checked:x,onChange:e=>v(e.target.checked)})," Deep cleanup (delete ADX orders/positions/exercises for event portfolios)"]}),X.jsx("button",{disabled:!!t.cleanup||!e,onClick:async()=>{try{G("cleanup",!0);const e=await H(cv.mmEventCleanup,{event_id:a||void 0,deep:x});(null==e?void 0:e.ok)?(Ga.success("Cleanup completed"),$(e=>[{ts:(new Date).toISOString(),label:`Cleanup (deep=${x})`,ok:!0},...e].slice(0,20))):(Ga.warning("Cleanup returned non-ok"),$(e=>[{ts:(new Date).toISOString(),label:"Cleanup returned non-ok",ok:!1},...e].slice(0,20)))}catch(mj){Ga.error(`Cleanup failed: ${(null==mj?void 0:mj.message)||mj}`),$(t=>[{ts:(new Date).toISOString(),label:"Cleanup failed",ok:!1,details:(null==mj?void 0:mj.message)||String(mj)},...t].slice(0,20))}finally{G("cleanup",!1)}},className:"px-3 py-1 bg-red-600 text-white rounded disabled:opacity-50",children:t.cleanup?"Cleaning":"Cleanup Event Data"})]})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Recent Actions"}),X.jsx("div",{className:"rounded border bg-white p-3 max-h-40 overflow-auto text-sm",children:0===W.length?X.jsx("div",{className:"text-neutral-500",children:"No actions yet."}):X.jsx("ul",{className:"space-y-1",children:W.map((e,t)=>X.jsxs("li",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-mono text-xs",children:new Date(e.ts).toLocaleTimeString()}),X.jsx("span",{children:e.label})]}),X.jsx("span",{className:"text-xs "+(e.ok?"text-emerald-700":"text-red-700"),children:e.ok?"ok":"failed"})]},t))})})]}),X.jsxs("section",{className:"space-y-3",children:[X.jsx("h3",{className:"font-medium",children:"Staged Orders (diagnostic)"}),X.jsx("div",{className:"flex items-center gap-2",children:X.jsx("button",{disabled:!!t.listStaged||!e,onClick:async()=>{try{G("listStaged",!0);const e=await H(cv.adxStagedOrders,{},"GET"),t=Array.isArray(null==e?void 0:e.data)?e.data:[];window.__STAGED_ROWS__=t,Ga.success(`Staged orders: ${t.length}`)}catch(mj){Ga.error(`List staged failed: ${(null==mj?void 0:mj.message)||mj}`)}finally{G("listStaged",!1)}},className:"px-3 py-1 bg-neutral-700 text-white rounded disabled:opacity-50",children:t.listStaged?"Loading":"Refresh List"})}),X.jsxs("div",{className:"border rounded p-2 max-h-64 overflow-auto text-sm bg-white",children:[X.jsxs("table",{className:"min-w-full text-xs",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left",children:[X.jsx("th",{className:"px-2 py-1",children:"Portfolio"}),X.jsx("th",{className:"px-2 py-1",children:"Symbol"}),X.jsx("th",{className:"px-2 py-1",children:"Side"}),X.jsx("th",{className:"px-2 py-1",children:"Qty"}),X.jsx("th",{className:"px-2 py-1",children:"Preview"}),X.jsx("th",{className:"px-2 py-1",children:"Fees"}),X.jsx("th",{className:"px-2 py-1",children:"Slot"}),X.jsx("th",{className:"px-2 py-1",children:"Cancelable"}),X.jsx("th",{className:"px-2 py-1",children:"To cutoff (s)"}),X.jsx("th",{className:"px-2 py-1",children:"Risk"})]})}),X.jsx("tbody",{id:"staged-body",children:(Array.isArray(window.__STAGED_ROWS__)?window.__STAGED_ROWS__:[]).map((e,t)=>X.jsxs("tr",{className:"border-t",children:[X.jsx("td",{className:"px-2 py-1 font-mono",children:e.portfolio_id}),X.jsx("td",{className:"px-2 py-1 font-mono",children:e.option_symbol}),X.jsx("td",{className:"px-2 py-1",children:e.side}),X.jsx("td",{className:"px-2 py-1",children:e.qty}),X.jsx("td",{className:"px-2 py-1",children:e.preview_price??"-"}),X.jsx("td",{className:"px-2 py-1",children:e.estimated_fees??"-"}),X.jsx("td",{className:"px-2 py-1",children:e.auction_slot}),X.jsx("td",{className:"px-2 py-1",children:e.cancelable?"yes":"no"}),X.jsx("td",{className:"px-2 py-1",children:e.time_to_cutoff_sec??"-"}),X.jsx("td",{className:"px-2 py-1",children:Array.isArray(e.risk_reasons)?e.risk_reasons.join(","):""})]},e.id||t))})]}),!(Array.isArray(window.__STAGED_ROWS__)&&window.__STAGED_ROWS__.length>0)&&X.jsx("div",{className:"text-neutral-500",children:"No staged orders loaded  click Refresh List."})]})]}),h&&f&&X.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:X.jsxs("div",{className:"bg-white rounded shadow p-4 w-[420px]",children:[X.jsx("h4",{className:"font-semibold mb-2",children:"Team Credentials"}),X.jsxs("div",{className:"space-y-1 text-sm",children:[X.jsxs("div",{children:["Email: ",X.jsx("span",{className:"font-mono",children:f.email})]}),X.jsxs("div",{children:["Password: ",X.jsx("span",{className:"font-mono",children:f.password})]})]}),X.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[X.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${f.email} ${f.password}`).catch(()=>{}),Ga.success("Copied")},className:"px-3 py-1 bg-neutral-100 rounded border",children:"Copy"}),X.jsx("button",{onClick:()=>p(!1),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Close"})]})]})})]})}function Sw(){const[e,t]=tt.useState(""),[n,s]=tt.useState([]),[r,a]=tt.useState(!1),[i,o]=tt.useState(!0);async function l(e){if(e){a(!0);try{const{data:{session:t}}=await ni.auth.getSession(),n=(null==t?void 0:t.access_token)||"",r=await fetch(`${cv.mmEventScoreboard}?event_id=${encodeURIComponent(e)}`,{method:"GET",headers:n?{Authorization:`Bearer ${n}`}:void 0}),a=await r.json().catch(()=>({ok:r.ok}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");s(Array.isArray(null==a?void 0:a.data)?a.data:[])}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to load scoreboard")}finally{a(!1)}}else Ga.error("Enter event id")}return tt.useEffect(()=>{let t=null;const n=()=>{i&&e&&l(e)};return n(),i&&(t=setInterval(n,5e3)),()=>{t&&clearInterval(t)}},[e,i]),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-end justify-between gap-3 flex-wrap",children:[X.jsxs("div",{className:"flex items-end gap-2",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Event ID"}),X.jsx("input",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border rounded-md w-96",placeholder:"uuid"})]}),X.jsx("button",{onClick:()=>l(e),className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] disabled:opacity-50",disabled:!e||r,children:r?"Refreshing":"Refresh"})]}),X.jsxs("label",{className:"text-sm flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",checked:i,onChange:e=>o(e.target.checked)})," Auto-refresh"]})]}),0===n.length?X.jsx("div",{className:"text-sm text-neutral-500 border rounded-md p-4",children:"No scoreboard rows yet. Enter an event id and refresh."}):X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e,t)=>{var n,s,r,a,i,o,l,c,d,u;return X.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white shadow-sm overflow-hidden",children:[X.jsxs("div",{className:"px-4 py-3 flex items-center justify-between bg-gradient-to-r from-[#0B3D91]/5 to-neutral-50",children:[X.jsx("div",{className:"font-semibold text-neutral-800",children:e.team_name||"Team"}),X.jsxs("div",{className:"text-xs px-2 py-1 rounded-full "+((e.pnl_pct||0)>=0?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-red-50 text-red-700 border border-red-200"),children:[(e.pnl_pct??0).toFixed(2),"%"]})]}),X.jsxs("div",{className:"px-4 py-3 grid grid-cols-2 gap-3 text-sm",children:[X.jsxs("div",{className:"text-neutral-500",children:["Equity",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(s=null==(n=e.equity)?void 0:n.toLocaleString)?void 0:s.call(n))??e.equity})]}),X.jsxs("div",{className:"text-neutral-500",children:["Cash",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(a=null==(r=e.cash)?void 0:r.toLocaleString)?void 0:a.call(r))??e.cash})]}),X.jsxs("div",{className:"text-neutral-500",children:["Positions",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(o=null==(i=e.positions_value)?void 0:i.toLocaleString)?void 0:o.call(i))??e.positions_value})]}),X.jsxs("div",{className:"text-neutral-500",children:["Realized",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(c=null==(l=e.realized_pnl)?void 0:l.toLocaleString)?void 0:c.call(l))??e.realized_pnl})]}),X.jsxs("div",{className:"text-neutral-500",children:["Exposure",X.jsx("div",{className:"font-medium text-neutral-900",children:(null==(u=null==(d=e.exposure)?void 0:d.toLocaleString)?void 0:u.call(d))??e.exposure})]}),X.jsxs("div",{className:"text-neutral-500",children:["Trades Today",X.jsx("div",{className:"font-medium text-neutral-900",children:e.trades_today??0})]})]})]},e.portfolio_id||t)})})]})}function _w({activeSeason:e}){const[t,n]=Je.useState("ADX"),[s,r]=Je.useState([]),[a,i]=Je.useState({}),[o,l]=Je.useState(!1),[c,d]=Je.useState("custom_badge"),[u,m]=Je.useState("Custom Badge"),[h,p]=Je.useState("Awarded by admin"),[f,g]=Je.useState(""),[x,v]=Je.useState(0);Je.useEffect(()=>{let n=!1;return async function(){var s,a;if(e){l(!0);try{const e="https://fsqds-production.yadavkartik-arbeit.workers.dev",i=[{url:"ADX"===t?`${e}/api/leaderboards/adx`:`${e}/api/leaderboards/hti`}];try{const{data:e}=await ni.auth.getSession(),n=(null==(s=null==e?void 0:e.session)?void 0:s.access_token)||"",r="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/"+("ADX"===t?"adx_leaderboard":"get_hti_leaderboard");i.push({url:r,headers:n?{Authorization:`Bearer ${n}`}:void 0})}catch{}let o=null;for(const t of i)try{const e=await fetch(t.url,{method:"GET",headers:{Accept:"application/json",...t.headers||{}}}),n=await e.json().catch(()=>({})),s=(null==(a=null==n?void 0:n.data)?void 0:a.rows)||(null==n?void 0:n.rows)||[];if(Array.isArray(s)&&s.length>=0){o=s;break}}catch{}n||r(o||[])}catch(mj){}finally{n||l(!1)}}else r([])}(),()=>{n=!0}},[t,e]);const y=s.length>0&&s.every(e=>a[e.user_id]);return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Leaderboard"}),X.jsxs("select",{value:t,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[X.jsx("option",{value:"ADX",children:"ADX (Axe the DAX)"}),X.jsx("option",{value:"HTI",children:"HTI (Hack the Interview)"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Badge Type (slug)"}),X.jsx("input",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Name"}),X.jsx("input",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Icon / URL"}),X.jsx("input",{value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{className:"md:col-span-3",children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),X.jsx("input",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Points"}),X.jsx("input",{type:"number",value:x,onChange:e=>v(parseInt(e.target.value||"0")),className:"w-full px-3 py-2 border rounded-md"})]})]}),X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:X.jsx("input",{type:"checkbox",checked:y,onChange:e=>(e=>{const t={};e&&s.forEach(e=>{t[e.user_id]=!0}),i(t)})(e.target.checked)})}),X.jsx("th",{className:"px-3 py-2",children:"User"}),X.jsx("th",{className:"px-3 py-2",children:"Score"})]})}),X.jsx("tbody",{children:o?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4",colSpan:3,children:"Loading"})}):0===s.length?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4 text-neutral-500",colSpan:3,children:"No rows"})}):s.map((e,n)=>{var s,r;return X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:X.jsx("input",{type:"checkbox",checked:!!a[e.user_id],onChange:t=>i(n=>({...n,[e.user_id]:t.target.checked}))})}),X.jsx("td",{className:"px-3 py-2",children:e.email||e.user_id}),X.jsx("td",{className:"px-3 py-2",children:"ADX"===t?(null==(r=null==(s=null==e?void 0:e.pnl_pct)?void 0:s.toFixed)?void 0:r.call(s,2))??"-":(null==e?void 0:e.total_points)??"-"})]},`${e.user_id}-${n}`)})})]})}),X.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[X.jsx("button",{onClick:async function(){var n;if(!e)return;const r=s.filter(e=>a[e.user_id]).map(e=>e.user_id);if(0!==r.length)try{const{data:s}=await ni.auth.getSession(),a=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_awards_badges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(n=null==s?void 0:s.session)?void 0:n.access_token}`},body:JSON.stringify({entity:"badge",action:"bulk_award",data:{season_id:e.id,user_ids:r,badge_type:c,name:u,description:h,icon_url:f,points:x,criteria:{leaderboard:t}}})}),o=await a.json();if(!a.ok||!(null==o?void 0:o.success))throw new Error((null==o?void 0:o.error)||"Failed to award badges");Ga.success(`Awarded '${u}' to ${r.length} users on ${t} leaderboard`),i({})}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to award badges")}},disabled:0===Object.values(a).filter(Boolean).length||!e,className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69]",children:"Award to Selected"}),X.jsxs("div",{className:"flex-1 min-w-[320px] bg-neutral-50 border rounded-md p-3",children:[X.jsx("div",{className:"text-sm font-medium mb-2",children:"Award by Emails (comma or newline separated)"}),X.jsx("textarea",{id:"award-emails",placeholder:"user1@fs-students.de, user2@fs-students.de",className:"w-full px-3 py-2 border rounded-md h-20"}),X.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[X.jsx("button",{onClick:async()=>{var e;try{const n=document.getElementById("award-emails"),s=((null==n?void 0:n.value)||"").split(/\s|,|;+/).map(e=>e.trim()).filter(Boolean);if(0===s.length)return void Ga.error("Enter at least one email");const{data:r,error:a}=await ni.from("user_profiles").select("user_id,email").in("email",s);if(a)throw a;const i=(r||[]).map(e=>e.user_id).filter(Boolean);if(0===i.length)return void Ga.error("No matching users found");const{data:o}=await ni.auth.getSession(),l=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_awards_badges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==o?void 0:o.session)?void 0:e.access_token}`},body:JSON.stringify({entity:"badge",action:"bulk_award",data:{user_ids:i,badge_type:c,name:u,description:h,icon_url:f,points:"HTI"===t?x:0,criteria:{leaderboard:t}}})}),d=await l.json().catch(()=>({}));if(!l.ok||!(null==d?void 0:d.success))throw new Error((null==d?void 0:d.error)||"Failed to award");Ga.success(`Awarded '${u}' to ${i.length} users by email${"HTI"===t&&x>0?` (+${x} pts each)`:""}`)}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to award by emails")}},className:"px-3 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69]",children:"Award by Emails"}),X.jsx("span",{className:"text-xs text-neutral-500",children:"HTI only: Points are added to hti_score"})]})]}),X.jsx("button",{onClick:async()=>{var e;try{const t="https://fsqds-production.yadavkartik-arbeit.workers.dev",{data:n}=await ni.auth.getSession(),s=(null==(e=null==n?void 0:n.session)||e.access_token,await fetch(`${t}/jobs/orchestrator`,{method:"POST",headers:{Authorization:"Bearer SERVICE"}}));if(!s.ok)throw new Error(`HTTP ${s.status}`);Ga.success("Triggered orchestrator tick; MV summary will refresh best-effort.")}catch(mj){Ga.error("Failed to trigger refresh")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Refresh Options Summary"})]})]})}function Ew(){const[e,t]=tt.useState([]),[n,s]=tt.useState(!1),[r,a]=tt.useState(""),[i,o]=tt.useState(1),[l]=tt.useState(200),c=tt.useCallback(async()=>{var e;s(!0);try{const{data:s}=await ni.auth.getSession(),r=(null==(e=null==s?void 0:s.session)?void 0:e.access_token)||"",a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o="https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/list-users",c="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_users",d=JSON.stringify({action:"list",params:{page:i,perPage:l}});let u=null;if(a){const e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to list users")}else try{const e=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||`HTTP ${e.status}`)}catch(n){const e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to list users")}t(u.users||[])}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to load users")}finally{s(!1)}},[i,l]);tt.useEffect(()=>{(async()=>{await c()})()},[c]);const d=e.filter(e=>{var t;return!r||(null==(t=e.email)?void 0:t.toLowerCase().includes(r.toLowerCase()))});return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Filter by email",className:"px-3 py-2 border rounded-md w-64"}),X.jsx("button",{onClick:c,disabled:n,className:"px-3 py-2 border rounded-md",children:n?"Loading":"Refresh"})]}),X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:"Email"}),X.jsx("th",{className:"px-3 py-2",children:"Confirmed"}),X.jsx("th",{className:"px-3 py-2",children:"Last Sign-in"}),X.jsx("th",{className:"px-3 py-2",children:"Admin"}),X.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),X.jsx("tbody",{children:0===d.length?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4",colSpan:5,children:"No users"})}):d.map(e=>X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:e.email}),X.jsx("td",{className:"px-3 py-2",children:e.confirmed_at?new Date(e.confirmed_at).toLocaleString():""}),X.jsx("td",{className:"px-3 py-2",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleString():""}),X.jsx("td",{className:"px-3 py-2",children:e.is_admin?"Yes":"No"}),X.jsx("td",{className:"px-3 py-2",children:X.jsx("button",{onClick:()=>async function(e){var n;if(!(null==e?void 0:e.id))return;const s=`This will permanently delete ${e.email} and all related data (ADX portfolios, orders, positions, HTI submissions, badges, profile, and auth user).\n\nType DELETE to confirm.`;if("DELETE"===window.prompt(s))try{const{data:s}=await ni.auth.getSession(),a=(null==(n=null==s?void 0:s.session)?void 0:n.access_token)||"",i=JSON.stringify({action:"wipe",userId:e.id}),o="https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/wipe-user",l="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_users",c="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);let d=!1,u=null;if(c){const e=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});u=await e.json().catch(()=>({})),d=e.ok&&!!(null==u?void 0:u.ok)}else{try{const e=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});u=await e.json().catch(()=>({})),d=e.ok&&!!(null==u?void 0:u.ok)}catch(r){d=!1}if(!d){const e=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to wipe user");d=!0}}if(!d)throw new Error("Failed to wipe user");Ga.success(`Wiped user ${e.email}`),t(t=>t.filter(t=>t.id!==e.id))}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to wipe user")}}(e),className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Permanently delete user and all data",children:"Wipe User"})})]},e.id))})]})})]})}function Tw({user:e,onLogout:t}){var n;oi();const[s,r]=Je.useState("hti"),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState([]),[u,m]=Je.useState(null),[h,p]=Je.useState({kind:"string",points:10,is_active:!0,title:"",tags:[]}),[f,g]=Je.useState([]),[x,v]=Je.useState(null),[y,b]=Je.useState({is_active:!0}),[w,j]=Je.useState(!1),[N,k]=Je.useState(!1),[S,_]=Je.useState("ticker"),[E,T]=Je.useState([]),[D,A]=Je.useState(.5),[M,C]=Je.useState(180),[O,P]=Je.useState([]),[I,R]=Je.useState([]),[L,F]=Je.useState({}),[z,B]=Je.useState([]),[U,q]=Je.useState(null),[W,$]=Je.useState({status:"upcoming"});Je.useEffect(()=>{e&&(async()=>{const{data:n}=await ni.from("user_profiles").select("is_admin").eq("user_id",e.id).single();(null==n?void 0:n.is_admin)||(Ga.error("Access denied: Admin privileges required"),t())})()},[e,t]),Je.useEffect(()=>{(async()=>{const{data:e}=await ni.from("seasons").select("*").order("starts_at",{ascending:!1});if(e){B(e);const t=e.find(e=>"active"===e.status);t&&l(t)}})()},[]),Je.useEffect(()=>{if(!o)return;(async()=>{i(!0);try{switch(s){case"hti":const{data:e}=await ni.from("hti_questions").select("*").eq("season_id",o.id).order("release_at",{ascending:!0});e&&d(e);break;case"adx":const{data:t}=await ni.from("adx_tickers").select("*").eq("season_id",o.id).order("symbol",{ascending:!0});t&&g(t);break;case"revenue":const{data:n}=await ni.from("adx_tickers").select("*").eq("season_id",o.id).eq("is_active",!0).order("symbol");R(n||[]);const{data:s}=await ni.from("adx_revenue_actuals").select("symbol, actual_value").eq("season_id",o.id),r={};(s||[]).forEach(e=>{r[e.symbol]=null!=e.actual_value?String(e.actual_value):""}),F(r)}}catch(e){Ga.error("Failed to load data")}finally{i(!1)}})()},[s,o]);const Y=async()=>{var e;if(o)try{const{data:t}=await ni.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`},body:JSON.stringify({action:"list",data:{season_id:o.id}})}),s=await n.json();n.ok&&s.success&&d(s.questions||[])}catch(t){}},V=async()=>{var e;if(o)try{const{data:t}=await ni.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`},body:JSON.stringify({action:"list",data:{season_id:o.id}})}),s=await n.json();n.ok&&s.success&&g(s.tickers||[])}catch(t){}};return X.jsxs("div",{className:"min-h-screen bg-[#F8F9FA]",children:[X.jsx("div",{className:"bg-white shadow-sm border-b border-neutral-200",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{className:"flex items-center space-x-4",children:[X.jsx(Kn,{className:"w-8 h-8 text-[#0B3D91]"}),X.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Admin Panel"}),o&&X.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[o.name," - ",o.status]})]}),X.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[X.jsx(qn,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),X.jsx("div",{className:"bg-white border-b border-neutral-200",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:X.jsx("nav",{className:"flex space-x-8",children:[{id:"hti",label:"HTI Questions",icon:ss},{id:"adx",label:"ADX Tickers",icon:ts},{id:"revenue",label:"Revenues",icon:Ln},{id:"badges",label:"Award Badges",icon:jn},{id:"seasons",label:"Seasons",icon:Sn},{id:"users",label:"User Administration",icon:as},{id:"event",label:"Event (Market Making)",icon:Zn}].map(e=>X.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(s===e.id?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"),children:[X.jsx(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.id))})})}),X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a?X.jsx("div",{className:"flex justify-center items-center py-12",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#0B3D91]"})}):X.jsxs(cn,{mode:"wait",children:["hti"===s&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:u?"Edit Question":"Add New Question"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Title (optional)"}),X.jsx("input",{type:"text",value:h.title||"",onChange:e=>p({...h,title:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., Bayes Rule Warm-up"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question Text"}),X.jsx("textarea",{value:h.question_text||"",onChange:e=>p({...h,question_text:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",rows:3})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Tags",X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Comma-separated, e.g., probability, bayes)"})]}),X.jsx("input",{type:"text",value:(h.tags||[]).join(", "),onChange:e=>p({...h,tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., probability, bayes"}),h.tags&&h.tags.length>0&&X.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:h.tags.map((e,t)=>X.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-800 rounded",children:e},t))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question Type"}),X.jsxs("select",{value:h.kind||"string",onChange:e=>p({...h,kind:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[X.jsx("option",{value:"string",children:"Text"}),X.jsx("option",{value:"number",children:"Number"}),X.jsx("option",{value:"mcq",children:"Multiple Choice"})]})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Correct Answer","mcq"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the index: 0 for first option, 1 for second, etc.)"}),"number"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the exact numeric answer)"}),"string"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the exact text answer)"})]}),X.jsx("input",{type:"number"===h.kind?"number":"text",value:h.correct_answer||"",onChange:e=>p({...h,correct_answer:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"mcq"===h.kind?"e.g., 0 (for first option)":"number"===h.kind?"e.g., 42":"e.g., Python"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Points"}),X.jsx("input",{type:"number",value:h.points||10,onChange:e=>p({...h,points:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Release At"}),X.jsx("input",{type:"datetime-local",value:h.release_at||"",onChange:e=>p({...h,release_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Close At"}),X.jsx("input",{type:"datetime-local",value:h.close_at||"",onChange:e=>p({...h,close_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),"mcq"===h.kind&&X.jsxs("div",{className:"md:col-span-2",children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Multiple Choice Options",X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(One per line; commas are allowed inside an option)"})]}),X.jsx("textarea",{value:(null==(n=h.choices)?void 0:n.join("\n"))||"",onChange:e=>p({...h,choices:e.target.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"Enter each option on a new line\nExample:\nOption A, with comma\nOption B (another example)",rows:4}),h.choices&&h.choices.length>0&&X.jsxs("div",{className:"mt-2 p-3 bg-neutral-50 rounded-md",children:[X.jsx("p",{className:"text-xs font-medium text-neutral-600 mb-1",children:"Preview:"}),h.choices.map((e,t)=>X.jsxs("div",{className:"text-sm text-neutral-700",children:[t,": ",e]},t))]})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",id:"is_active",checked:h.is_active||!1,onChange:e=>p({...h,is_active:e.target.checked}),className:"mr-2"}),X.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-neutral-700",children:"Active"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[u&&X.jsx("button",{onClick:()=>{m(null),p({kind:"string",points:10,is_active:!0})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{var e;if(o){i(!0);try{let t={};h.question_text&&(t.question=h.question_text),"mcq"===h.kind&&h.choices&&(t.options=h.choices.map((e,t)=>({index:t,label:e})));let n={};"mcq"===h.kind?n.index=parseInt(h.correct_answer||"0"):"number"===h.kind?n.value=parseFloat(h.correct_answer||"0"):n.value=h.correct_answer||"";const s={season_id:o.id,n:h.n||c.length+1,kind:h.kind||"string",choices:t,correct:n,release_at:h.release_at||(new Date).toISOString(),is_active:!1!==h.is_active,points:Number.isFinite(h.points)?Number(h.points):10,title:(h.title??"").toString(),tags:Array.isArray(h.tags)?h.tags:[]},{data:r}=await ni.auth.getSession(),a=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==r?void 0:r.session)?void 0:e.access_token}`},body:JSON.stringify({action:u?"update":"create",data:u?{...s,id:u.id}:s})}),i=await a.json().catch(()=>({}));if(a.ok&&i.success)Ga.success(u?"Question updated successfully":"Question created successfully");else{if(u){const{error:e}=await ni.from("hti_questions").update({kind:s.kind,choices:s.choices,correct:s.correct,release_at:s.release_at,is_active:s.is_active,points:s.points,title:s.title,tags:s.tags}).eq("id",u.id);if(e)throw e}else{const{error:e}=await ni.from("hti_questions").insert([{...s}]);if(e)throw e}Ga.success(u?"Question updated successfully":"Question created successfully")}m(null),p({kind:"string",points:10,is_active:!0,title:"",tags:[]}),await Y()}catch(t){Ga.error(t.message||"Failed to save question")}finally{i(!1)}}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx(Hn,{className:"w-4 h-4 inline mr-2"}),u?"Update":"Create"," Question"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:X.jsx("h3",{className:"text-lg font-semibold",children:"Current Questions"})}),X.jsx("div",{className:"divide-y divide-neutral-200",children:c.map(e=>{let t="No question text",n="";try{const s="string"==typeof e.choices?JSON.parse(e.choices):e.choices;t=(null==s?void 0:s.question)||t;const r="string"==typeof e.correct?JSON.parse(e.correct):e.correct;n="mcq"===e.kind?`Option ${(null==r?void 0:r.index)+1}`:String((null==r?void 0:r.value)||"")}catch(mj){}return X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"font-medium text-neutral-900",dangerouslySetInnerHTML:{__html:pw(t)}}),X.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-neutral-600",children:[X.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded",children:e.kind}),e.title&&X.jsxs("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-800 rounded",children:["Title: ",e.title]}),Array.isArray(e.tags)&&e.tags.length>0&&X.jsxs(X.Fragment,{children:[X.jsx("span",{className:"text-neutral-500",children:"Tags:"}),e.tags.map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-800 rounded",children:e},t))]}),X.jsxs("span",{children:[e.points||10," points"]}),X.jsxs("span",{children:["Answer: ",n]}),X.jsx("span",{className:e.is_active?"text-green-600":"text-red-600",children:e.is_active?"Active":"Inactive"})]}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-neutral-500",children:[X.jsxs("span",{children:["Release: ",ot(new Date(e.release_at),"MMM dd, yyyy HH:mm")]}),e.close_at&&X.jsxs("span",{children:["Close: ",ot(new Date(e.close_at),"MMM dd, yyyy HH:mm")]})]})]}),X.jsxs("div",{className:"flex space-x-2 ml-4",children:[X.jsx("button",{onClick:()=>{var t;m(e);try{const n="string"==typeof e.choices?JSON.parse(e.choices):e.choices,s="string"==typeof e.correct?JSON.parse(e.correct):e.correct;let r={...e,question_text:(null==n?void 0:n.question)||"",title:e.title||"",tags:Array.isArray(e.tags)?e.tags:[],kind:e.kind,points:e.points||10,is_active:e.is_active,release_at:e.release_at?new Date(e.release_at).toISOString().slice(0,16):"",close_at:e.close_at?new Date(e.close_at).toISOString().slice(0,16):""};"mcq"===e.kind?(r.choices=(null==(t=null==n?void 0:n.options)?void 0:t.map(e=>e.label))||[],r.correct_answer=String((null==s?void 0:s.index)||0)):(e.kind,r.correct_answer=String((null==s?void 0:s.value)||"")),p(r)}catch(mj){p({...e,question_text:"",title:e.title||"",tags:Array.isArray(e.tags)?e.tags:[],correct_answer:"",choices:[]})}},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(Qn,{className:"w-4 h-4"})}),X.jsx("button",{onClick:()=>(async e=>{var t;if(confirm("Are you sure you want to delete this question?")){i(!0);try{const{data:n}=await ni.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==n?void 0:n.session)?void 0:t.access_token}`},body:JSON.stringify({action:"delete",data:{id:e}})}),r=await s.json();if(!s.ok||!r.success)throw new Error(r.error||"Failed to delete question");Ga.success("Question deleted"),d(c.filter(t=>t.id!==e))}catch(n){Ga.error(n.message||"Failed to delete question")}finally{i(!1)}}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:X.jsx(Jn,{className:"w-4 h-4"})})]})]})},e.id)})})]})]}),"users"===s&&X.jsx(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Administration"}),X.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"List confirmed users and permanently wipe a user (all associated data)  use with caution."}),X.jsx(Ew,{})]})}),"adx"===s&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Admin Operations"}),X.jsxs("div",{className:"flex gap-3 flex-wrap",children:[X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ni.auth.getSession(),n=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/expire-positions",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`}}),s=await n.text();if(!n.ok)throw new Error(s||"Failed");Ga.success("Expire Positions job triggered")}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to trigger expire")}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Expire Past-Due Positions"}),X.jsx("button",{onClick:async()=>{var e,t,n;j(!0);try{const{data:s}=await ni.auth.getSession(),r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/run-auction",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==s?void 0:s.session)?void 0:e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({slot:"open"})}),a=await r.json().catch(()=>({}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");const i=(null==(t=null==a?void 0:a.data)?void 0:t.filled)??"-",o=(null==(n=null==a?void 0:a.data)?void 0:n.batchId)??"";Ga.success(`Open auction running: filled=${i}${o?`, batch=${o}`:""}`)}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to run open auction")}finally{j(!1)}},disabled:w,className:"px-4 py-2 text-white rounded-md "+(w?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"),children:w?"Running Open Auction":"Run Open Auction Now"}),X.jsx("button",{onClick:async()=>{var e,t,n;k(!0);try{const{data:s}=await ni.auth.getSession(),r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/run-auction",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==s?void 0:s.session)?void 0:e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({slot:"close"})}),a=await r.json().catch(()=>({}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");const i=(null==(t=null==a?void 0:a.data)?void 0:t.filled)??"-",o=(null==(n=null==a?void 0:a.data)?void 0:n.batchId)??"";Ga.success(`Close auction running: filled=${i}${o?`, batch=${o}`:""}`)}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to run close auction")}finally{k(!1)}},disabled:N,className:"px-4 py-2 text-white rounded-md "+(N?"bg-indigo-400":"bg-indigo-600 hover:bg-indigo-700"),children:N?"Running Close Auction":"Run Close Auction Now"})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ops: Market Microstructure (Slippage Overrides)"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Scope"}),X.jsxs("select",{value:S,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[X.jsx("option",{value:"ticker",children:"Ticker"}),X.jsx("option",{value:"product",children:"Product"}),X.jsx("option",{value:"global",children:"Global"})]})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Targets"}),"global"===S?X.jsx("input",{disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-neutral-100",placeholder:"Global override (no targets)"}):X.jsx("select",{multiple:!0,className:"w-full px-3 py-2 border rounded-md h-28",value:E,onChange:e=>{const t=Array.from(e.target.selectedOptions).map(e=>e.value);T(t)},children:(f||[]).map(e=>X.jsx("option",{value:e.symbol,children:e.symbol},e.id))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Slip Multiplier"}),X.jsx("input",{type:"number",step:"0.1",value:D,onChange:e=>A(Number(e.target.value||"1")),className:"w-full px-3 py-2 border rounded-md",placeholder:"0.5=50%, 1.5=+50%"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Duration (sec)"}),X.jsx("input",{type:"number",value:M,onChange:e=>C(parseInt(e.target.value||"180")),className:"w-full px-3 py-2 border rounded-md"})]})]}),X.jsxs("div",{className:"flex gap-3 mt-4",children:[X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ni.auth.getSession(),n=(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||"",s={scope:S,targets:"global"===S?[]:E,slip_mul:D,duration_sec:M},r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/set-override",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await r.json().catch(()=>({}));if(!r.ok||!(null==a?void 0:a.ok))throw new Error((null==a?void 0:a.error)||"Failed");Ga.success(`Override set: ${S}${"global"===S?"":" "+E.join(",")} ${D} for ${M}s`);const i=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/list-overrides",{headers:{Authorization:`Bearer ${n}`}}),o=await i.json().catch(()=>({}));P((null==o?void 0:o.data)||[])}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to set override")}},className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700",children:"Start Window"}),X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ni.auth.getSession(),n=(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||"",s={};"global"!==S&&(s.scope=S,s.targets=E);const r=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/clear-overrides",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`HTTP ${r.status}`);Ga.success("Cleared overrides");const a=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/list-overrides",{headers:{Authorization:`Bearer ${n}`}}),i=await a.json().catch(()=>({}));P((null==i?void 0:i.data)||[])}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to clear overrides")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Clear Overrides"}),X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ni.auth.getSession(),n=(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||"",s=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/ops/list-overrides",{headers:{Authorization:`Bearer ${n}`}}),r=await s.json().catch(()=>({}));P((null==r?void 0:r.data)||[])}catch(mj){Ga.error((null==mj?void 0:mj.message)||"Failed to load overrides")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Refresh Active"})]}),X.jsxs("div",{className:"mt-4",children:[X.jsx("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Active Overrides"}),0===O.length?X.jsx("div",{className:"text-sm text-neutral-500",children:"None"}):X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:"Scope"}),X.jsx("th",{className:"px-3 py-2",children:"Target"}),X.jsx("th",{className:"px-3 py-2",children:"xSlip"}),X.jsx("th",{className:"px-3 py-2",children:"Ends"}),X.jsx("th",{className:"px-3 py-2",children:"Note"})]})}),X.jsx("tbody",{children:O.map((e,t)=>X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:e.scope}),X.jsx("td",{className:"px-3 py-2",children:e.target||""}),X.jsx("td",{className:"px-3 py-2",children:Number(e.slip_mul).toFixed(2)}),X.jsx("td",{className:"px-3 py-2",children:new Date(e.end_at).toLocaleTimeString()}),X.jsx("td",{className:"px-3 py-2",children:e.note||""})]},e.id||t))})]})})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:x?"Edit Ticker":"Add New Ticker"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Symbol"}),X.jsx("input",{type:"text",value:y.symbol||"",onChange:e=>b({...y,symbol:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Company Name"}),X.jsx("input",{type:"text",value:y.name||"",onChange:e=>b({...y,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP SE"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Exchange"}),X.jsx("input",{type:"text",value:y.exchange||"",onChange:e=>b({...y,exchange:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., DE, FR"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"US ADR Symbol"}),X.jsx("input",{type:"text",value:y.us_adr_symbol||"",onChange:e=>b({...y,us_adr_symbol:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP (for US listing)"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Logo URL (optional)"}),X.jsx("input",{type:"text",value:y.logo_url||"",onChange:e=>b({...y,logo_url:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"https://..."})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",id:"ticker_active",checked:y.is_active||!1,onChange:e=>b({...y,is_active:e.target.checked}),className:"mr-2"}),X.jsx("label",{htmlFor:"ticker_active",className:"text-sm font-medium text-neutral-700",children:"Active"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[x&&X.jsx("button",{onClick:()=>{v(null),b({band:"top",is_active:!0})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{var e;if(o){i(!0);try{const t={...y,season_id:o.id},{data:n}=await ni.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==n?void 0:n.session)?void 0:e.access_token}`},body:JSON.stringify({action:x?"update":"create",data:x?{...t,id:x.id}:t})}),r=await s.json();if(!s.ok||!r.success)throw new Error(r.error||"Failed to save ticker");Ga.success(x?"Ticker updated successfully":"Ticker created successfully"),v(null),b({is_active:!0}),await V()}catch(t){Ga.error(t.message||"Failed to save ticker")}finally{i(!1)}}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx(Hn,{className:"w-4 h-4 inline mr-2"}),x?"Update":"Create"," Ticker"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsxs("div",{className:"px-6 py-4 border-b border-neutral-200",children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Current Tickers"}),X.jsxs("div",{className:"flex space-x-4 mt-2 text-sm",children:[X.jsxs("span",{className:"text-neutral-600",children:["Active: ",f.filter(e=>e.is_active).length]}),X.jsxs("span",{className:"text-neutral-600",children:["Total: ",f.length]})]})]}),X.jsx("div",{className:"divide-y divide-neutral-200",children:f.map(e=>X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium text-neutral-900",children:e.symbol}),X.jsx("span",{className:"ml-2 text-neutral-600",children:e.name}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.exchange&&X.jsxs("span",{className:"text-xs text-neutral-500",children:["Exch: ",e.exchange]}),e.us_adr_symbol&&X.jsxs("span",{className:"text-xs text-neutral-500",children:["US ADR: ",e.us_adr_symbol]}),e.logo_url&&X.jsxs("span",{className:"text-xs text-neutral-500 truncate max-w-[240px]",children:["Logo: ",e.logo_url]}),X.jsx("span",{className:"text-xs "+(e.is_active?"text-green-600":"text-red-600"),children:e.is_active?"Active":"Inactive"})]})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("button",{onClick:()=>{v(e),b({id:e.id,symbol:e.symbol,name:e.name,is_active:e.is_active,us_adr_symbol:e.us_adr_symbol,exchange:e.exchange,logo_url:e.logo_url||""})},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(Qn,{className:"w-4 h-4"})}),X.jsx("button",{onClick:()=>(async e=>{var t;if(confirm("Are you sure you want to delete this ticker?")){i(!0);try{const{data:n}=await ni.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==n?void 0:n.session)?void 0:t.access_token}`},body:JSON.stringify({action:"delete",data:{id:e}})}),r=await s.json();if(!s.ok||!r.success)throw new Error(r.error||"Failed to delete ticker");Ga.success("Ticker deleted"),g(f.filter(t=>t.id!==e))}catch(n){Ga.error(n.message||"Failed to delete ticker")}finally{i(!1)}}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:X.jsx(Jn,{className:"w-4 h-4"})})]})]})},e.id))})]})]}),"revenue"===s&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Season"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items:end",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Select Season"}),X.jsxs("select",{value:(null==o?void 0:o.id)||"",onChange:e=>{const t=z.find(t=>t.id===e.target.value)||null;l(t)},className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[0===z.length&&X.jsx("option",{value:"",children:"No seasons"}),z.map(e=>X.jsxs("option",{value:e.id,children:[e.name," - ",e.status]},e.id))]})]}),X.jsx("div",{className:"md:col-span-2 text-sm text-neutral-600",children:"Enter realized revenues (in billions) for each ticker in the selected season. Changes are unlocked and can be saved anytime."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Record Actual Revenues"}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(e=>X.jsxs("div",{className:"p-3 border rounded-md",children:[X.jsxs("div",{className:"text-sm font-medium mb-1",children:[e.symbol," ",X.jsx("span",{className:"text-neutral-500",children:e.name})]}),X.jsx("input",{type:"number",step:"0.01",placeholder:"Revenue (B)",value:L[e.symbol]||"",onChange:t=>F(n=>({...n,[e.symbol]:t.target.value})),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"}),X.jsx("div",{className:"flex justify-end mt-2",children:X.jsx("button",{onClick:async()=>{var t;if(!o)return void Ga.error("Select a season");const n=L[e.symbol];if(""===n||isNaN(Number(n)))Ga.error("Enter a valid number");else try{const{data:s}=await ni.auth.getSession(),r=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/record_revenue_actuals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==s?void 0:s.session)?void 0:t.access_token}`},body:JSON.stringify({seasonId:o.id,items:[{symbol:e.symbol,actual_value:Number(n)}]})}),a=await r.json();r.ok&&a.ok?Ga.success(`Recorded for ${e.symbol}`):Ga.error(a.error||"Failed to record")}catch(mj){Ga.error("Failed to record")}},className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})})]},e.id))}),X.jsx("div",{className:"flex justify-end mt-4",children:X.jsx("button",{onClick:async()=>{var e;if(!o)return void Ga.error("Select a season");const t=Object.entries(L).filter(([,e])=>""!==e&&!isNaN(Number(e))).map(([e,t])=>({symbol:e,actual_value:Number(t)}));if(0!==t.length)try{const{data:n}=await ni.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/record_revenue_actuals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==n?void 0:n.session)?void 0:e.access_token}`},body:JSON.stringify({seasonId:o.id,items:t})}),r=await s.json();s.ok&&r.ok?Ga.success("Actual revenues recorded. Season MSE calculation triggered."):Ga.error(r.error||"Failed to record actuals")}catch(mj){Ga.error("Failed to record actuals")}else Ga.error("Enter at least one actual")},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Save Actuals for Season"})})]})]}),"badges"===s&&X.jsx(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Award Badges by Leaderboard"}),X.jsx(_w,{activeSeason:o})]})}),"event"===s&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsx(kw,{}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Event Scorecard"}),X.jsx(Sw,{})]})]}),"seasons"===s&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Season Management"}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("button",{onClick:async()=>{var e;if(o&&"active"===o.status){if(confirm("Are you sure you want to settle the current season? This will mark winners and reset for the next season."))try{const t=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/season_rollover",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=(await ni.auth.getSession()).data.session)?void 0:e.access_token}`},body:JSON.stringify({seasonId:o.id})}),n=await t.json();if(n.ok){Ga.success("Season settled successfully!");const{data:e}=await ni.from("seasons").select("*").order("starts_at",{ascending:!1});if(e){B(e);const t=e.find(e=>"active"===e.status);t&&l(t)}}else Ga.error(n.error||"Failed to settle season")}catch(t){Ga.error("Failed to settle season")}}else Ga.error("No active season to settle")},className:"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",disabled:!o||"active"!==o.status,children:[X.jsx(Gn,{className:"w-5 h-5 inline mr-2"}),"Settle Current Season & Start New"]}),X.jsx("p",{className:"text-sm text-neutral-600",children:"This will mark winners, award badges, and prepare the next season."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:U?"Edit Season":"Create New Season"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Season Name"}),X.jsx("input",{type:"text",value:W.name||"",onChange:e=>$({...W,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., Winter 2024"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Status"}),X.jsxs("select",{value:W.status||"upcoming",onChange:e=>$({...W,status:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[X.jsx("option",{value:"upcoming",children:"Upcoming"}),X.jsx("option",{value:"active",children:"Active"}),X.jsx("option",{value:"settling",children:"Settling"}),X.jsx("option",{value:"closed",children:"Closed"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Season Code"}),X.jsx("input",{type:"text",value:W.code||"",onChange:e=>$({...W,code:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., WINTER_2024"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Date"}),X.jsx("input",{type:"date",value:W.starts_at||"",onChange:e=>$({...W,starts_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"End Date"}),X.jsx("input",{type:"date",value:W.ends_at||"",onChange:e=>$({...W,ends_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[U&&X.jsx("button",{onClick:()=>{q(null),$({status:"upcoming"})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{try{const e=e=>{const t=(e.code||e.name||"").trim().toUpperCase();return t?t.replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,""):""},t={name:W.name,code:e(W),starts_at:W.starts_at,ends_at:W.ends_at,status:W.status||"upcoming"};if(!(t.name&&t.code&&t.starts_at&&t.ends_at))return void Ga.error("Please provide name, code, start and end dates");if(U){const{error:e}=await ni.from("seasons").update(t).eq("id",U.id);if(e){if(e)throw new Error(e.message)}else Ga.success("Season updated successfully"),q(null)}else{const{error:e}=await ni.from("seasons").insert(t);if(e){if(e)throw new Error(e.message)}else Ga.success("Season created successfully"),$({status:"upcoming"})}const{data:n}=await ni.from("seasons").select("*").order("starts_at",{ascending:!1});n&&B(n)}catch(e){Ga.error((null==e?void 0:e.message)||"Failed to save season")}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx(Hn,{className:"w-4 h-4 inline mr-2"}),U?"Update":"Create"," Season"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:X.jsx("h3",{className:"text-lg font-semibold",children:"All Seasons"})}),X.jsx("div",{className:"divide-y divide-neutral-200",children:z.map(e=>X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium text-neutral-900",children:e.name}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[X.jsx("span",{className:"px-2 py-1 rounded text-xs "+("active"===e.status?"bg-green-100 text-green-800":"upcoming"===e.status?"bg-blue-100 text-blue-800":"settling"===e.status?"bg-yellow-100 text-yellow-800":"bg-neutral-100 text-neutral-800"),children:e.status}),X.jsx("span",{className:"text-xs text-neutral-500",children:e.starts_at&&e.ends_at?`${ot(new Date(e.starts_at),"MMM dd, yyyy")} - ${ot(new Date(e.ends_at),"MMM dd, yyyy")}`:"No dates set"})]})]}),X.jsx("button",{onClick:()=>{q(e),$(e)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(Qn,{className:"w-4 h-4"})})]})},e.id))})]})]})]})})]})}const Dw=()=>{const[,e]=Ws(),[t,n]=Je.useState(null),[s,r]=Je.useState(!1),[a,i]=Je.useState(!0);Je.useEffect(()=>{(async()=>{const{data:{user:t}}=await ni.auth.getUser();if(!t)return Ga.error("Please sign in to access the admin panel"),void e("/leaderboard");n(t);const{data:s}=await ni.from("user_profiles").select("is_admin").eq("user_id",t.id).single();if(!(null==s?void 0:s.is_admin))return Ga.error("Access denied: Admin privileges required"),void e("/");r(!0),i(!1)})()},[e]);return a?X.jsx("div",{className:"min-h-screen flex items-center justify-center",children:X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B3D91]"})}):s?X.jsx(Tw,{user:t,onLogout:async()=>{await ni.auth.signOut(),e("/")}}):null};function Aw(){const[,e]=Ws(),[t,n]=Je.useState(!0),[s,r]=Je.useState(!1),[a,i]=Je.useState("controls");return Je.useEffect(()=>{(async()=>{const{data:{user:t}}=await ni.auth.getUser();if(!t)return Ga.error("Please sign in to access Admin"),void e("/login");const{data:s}=await ni.from("user_profiles").select("is_admin").eq("user_id",t.id).single();if(!(null==s?void 0:s.is_admin))return Ga.error("Access denied: Admin privileges required"),void e("/");r(!0),n(!1)})()},[e]),t?X.jsx("div",{className:"min-h-screen flex items-center justify-center",children:X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B3D91]"})}):s?X.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[X.jsx("div",{className:"flex items-center justify-between mb-4",children:X.jsx("h1",{className:"text-2xl font-bold",children:"Market Making  Event Admin"})}),X.jsx("div",{className:"border-b mb-4",children:X.jsxs("nav",{className:"-mb-px flex gap-6",children:[X.jsx("button",{onClick:()=>i("controls"),className:"pb-2 border-b-2 "+("controls"===a?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700"),children:"Event Controls"}),X.jsx("button",{onClick:()=>i("scorecard"),className:"pb-2 border-b-2 "+("scorecard"===a?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700"),children:"Scorecard (Live)"})]})}),"controls"===a?X.jsx(kw,{}):X.jsx("div",{className:"mt-2",children:tt.createElement(require("@/components/admin/EventScorecardTab").default)})]}):null}function Mw(e){var t;if(e instanceof dt)return{code:"NETWORK_ERROR",retryable:!0,status:503,messageKey:"auth.networkError"};if(e instanceof ut)return{code:"INVALID_CREDENTIALS",retryable:!1,status:400,messageKey:"auth.invalidCredentials"};if(e instanceof mt)return{code:"WEAK_PASSWORD",retryable:!1,status:422,messageKey:"auth.weakPassword"};if(e instanceof ht)return{code:"SESSION_EXPIRED",retryable:!0,status:401,messageKey:"auth.sessionExpired"};if(e instanceof pt){if(429===e.status)return{code:"RATE_LIMITED",retryable:!0,status:429,messageKey:"auth.rateLimited"};if(401===e.status)return"string"==typeof e.message&&/confirm(ed)?/i.test(e.message)?{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"}:{code:"INVALID_CREDENTIALS",retryable:!1,status:401,messageKey:"auth.invalidCredentials"};if(400===e.status||422===e.status){const t=String(e.message||"").toLowerCase();return t.includes("weak password")?{code:"WEAK_PASSWORD",retryable:!1,status:e.status,messageKey:"auth.weakPassword"}:t.includes("captcha")?{code:"CAPTCHA_FAILED",retryable:!0,status:e.status,messageKey:"auth.captchaFailed"}:t.includes("invalid")&&t.includes("domain")?{code:"INVALID_DOMAIN",retryable:!1,status:e.status,messageKey:"auth.invalidDomain"}:t.includes("invalid")&&(t.includes("login")||t.includes("credentials")||t.includes("email")||t.includes("password"))?{code:"INVALID_CREDENTIALS",retryable:!1,status:e.status,messageKey:"auth.invalidCredentials"}:{code:"UNKNOWN_ERROR",retryable:!1,status:e.status,messageKey:"auth.unexpectedError"}}}const n=e;switch(null==(t=null==n?void 0:n.code)?void 0:t.toUpperCase()){case"INVALID_DOMAIN":return{code:"INVALID_DOMAIN",retryable:!1,status:400,messageKey:"auth.invalidDomain"};case"CAPTCHA_FAILED":return{code:"CAPTCHA_FAILED",retryable:!0,status:400,messageKey:"auth.captchaFailed"};case"USER_EXISTS":return{code:"USER_EXISTS",retryable:!1,status:409,messageKey:"auth.userExists"};case"EMAIL_NOT_CONFIRMED":return{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"};case"RATE_LIMITED":return{code:"RATE_LIMITED",retryable:!0,status:429,messageKey:"auth.rateLimited"};case"SESSION_EXPIRED":return{code:"SESSION_EXPIRED",retryable:!0,status:401,messageKey:"auth.sessionExpired"}}const s=String((null==n?void 0:n.message)||"").toLowerCase();return s.includes("confirm")?{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"}:s.includes("already registered")||s.includes("exists")?{code:"USER_EXISTS",retryable:!1,status:409,messageKey:"auth.userExists"}:s.includes("network")||s.includes("fetch")?{code:"NETWORK_ERROR",retryable:!0,status:503,messageKey:"auth.networkError"}:{code:"UNKNOWN_ERROR",retryable:!1,status:400,messageKey:"auth.unexpectedError"}}function Cw(e){switch(e.code){case"INVALID_CREDENTIALS":return"Invalid email or password";case"EMAIL_NOT_CONFIRMED":return"Please verify your email before signing in";case"USER_EXISTS":return"An account with this email already exists. Please sign in.";case"INVALID_DOMAIN":return"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed";case"WEAK_PASSWORD":return"Password is too weak";case"RATE_LIMITED":return"Too many attempts. Please wait and try again";case"NETWORK_ERROR":return"Network error. Please check your connection";case"SESSION_EXPIRED":return"Your session has expired. Please sign in again";case"CAPTCHA_FAILED":return"Verification failed. Please try again.";default:return"An error occurred"}}const Ow=Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card",className:Pa("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t}));Ow.displayName="Card";const Pw=Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-header",className:Pa("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t}));Pw.displayName="CardHeader";const Iw=Je.forwardRef(({className:e,...t},n)=>X.jsx("h4",{ref:n,"data-slot":"card-title",className:Pa("leading-none",e),...t}));Iw.displayName="CardTitle";const Rw=Je.forwardRef(({className:e,...t},n)=>X.jsx("p",{ref:n,"data-slot":"card-description",className:Pa("text-muted-foreground",e),...t}));Rw.displayName="CardDescription";Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-action",className:Pa("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...t})).displayName="CardAction";const Lw=Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-content",className:Pa("px-6 [&:last-child]:pb-6",e),...t}));Lw.displayName="CardContent";Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-footer",className:Pa("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})).displayName="CardFooter";const Fw=Je.forwardRef(({className:e,type:t,...n},s)=>X.jsx("input",{type:t,className:Pa("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));Fw.displayName="Input";const zw=Je.forwardRef(({className:e,...t},n)=>X.jsx(be,{ref:n,className:Pa("flex flex-col gap-2",e),...t}));zw.displayName=be.displayName;const Bw=Je.forwardRef(({className:e,...t},n)=>X.jsx(we,{ref:n,className:Pa("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t}));Bw.displayName=we.displayName;const Uw=Je.forwardRef(({className:e,...t},n)=>X.jsx(je,{ref:n,className:Pa("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t}));Uw.displayName=je.displayName;const qw=Je.forwardRef(({className:e,...t},n)=>X.jsx(Ne,{ref:n,className:Pa("flex-1 outline-none",e),...t}));async function Ww(e){try{const{error:t}=await ni.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/set-password`});if(t)throw t;return{ok:!0}}catch(t){return{ok:!1,error:Mw(t)}}}function $w(){const{signIn:e,signUp:t}=di(),{t:n}=oi(),[,s]=Ws(),[r,a]=Je.useState(!1),[i,o]=Je.useState(null),[l,c]=Je.useState(!1),[d,u]=Je.useState(""),[m,h]=Je.useState(""),[p,f]=Je.useState(""),[g,x]=Je.useState(""),[v,y]=Je.useState(""),[b,w]=Je.useState("");return X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:X.jsxs("div",{className:"max-w-md w-full space-y-8",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:n("welcomeToDataScienceFrontier")}),X.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:n("signInOrCreateAccount")})]}),X.jsx(Ow,{className:"mt-8",children:X.jsxs(zw,{defaultValue:"signin",className:"w-full",children:[X.jsxs(Bw,{className:"grid w-full grid-cols-2",children:[X.jsx(Uw,{value:"signin",children:n("signIn")}),X.jsx(Uw,{value:"signup",children:n("signUp")})]}),X.jsxs(qw,{value:"signin",children:[X.jsxs(Pw,{children:[X.jsx(Iw,{children:n("signIn")}),X.jsx(Rw,{children:n("signInDescription")})]}),X.jsx(Lw,{children:X.jsxs("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{o(null);const{error:t}=await e(d,m);if(t){const e=Cw(Mw(t));o(e),Ga.error(e)}else Ga.success(n("loginSuccess")),s("/battleground")}catch(r){o(n("error")),Ga.error(n("error"))}finally{a(!1)}},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"signin-email",children:n("email")}),X.jsx(Fw,{id:"signin-email",type:"email",placeholder:"name@example.com",value:d,onChange:e=>u(e.target.value),required:!0,disabled:r})]}),X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"signin-password",children:n("password")}),X.jsx(Fw,{id:"signin-password",type:"password",value:m,onChange:e=>h(e.target.value),required:!0,disabled:r}),i&&X.jsx("div",{className:"mt-2 text-sm text-red-600",children:i})]}),X.jsx("div",{className:"flex items-center justify-between",children:X.jsx(Ni,{type:"submit",className:"w-full",disabled:r,children:n(r?"loading":"signIn")})}),X.jsx("div",{className:"mt-3 text-right",children:X.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",disabled:l,onClick:async()=>{if(d){c(!0);try{(await Ww(d)).ok?Ga.success(n("passwordResetEmailSent")):Ga.error(n("auth.unexpectedError"))}finally{c(!1)}}else Ga.error(n("pleaseEnterEmail"))},children:n(l?"sending":"forgotPassword")})})]})})]}),X.jsxs(qw,{value:"signup",children:[X.jsxs(Pw,{children:[X.jsx(Iw,{children:n("signUp")}),X.jsx(Rw,{children:n("signUpDescription")})]}),X.jsx(Lw,{children:X.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g===b)if(g.length<6)Ga.error(n("passwordTooShort"));else{a(!0);try{const{error:e}=await t(p,g,v);e?Ga.error(e.message||n("signupError")):(Ga.success(n("signupSuccess")),s("/battleground"))}catch(r){Ga.error(n("error"))}finally{a(!1)}}else Ga.error(n("passwordsMustMatch"))},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"signup-username",children:n("username")}),X.jsx(Fw,{id:"signup-username",type:"text",placeholder:"johndoe",value:v,onChange:e=>y(e.target.value),required:!0,disabled:r})]}),X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"signup-email",children:n("email")}),X.jsx(Fw,{id:"signup-email",type:"email",placeholder:"name@example.com",value:p,onChange:e=>f(e.target.value),required:!0,disabled:r})]}),X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"signup-password",children:n("password")}),X.jsx(Fw,{id:"signup-password",type:"password",value:g,onChange:e=>x(e.target.value),required:!0,disabled:r,minLength:6})]}),X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"confirm-password",children:n("confirmPassword")}),X.jsx(Fw,{id:"confirm-password",type:"password",value:b,onChange:e=>w(e.target.value),required:!0,disabled:r,minLength:6})]}),X.jsx(Ni,{type:"submit",className:"w-full",disabled:r,children:n(r?"loading":"signUp")})]})})]})]})})]})})}function Yw(){return X.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-neutral-900",children:X.jsx(Ow,{className:"w-full max-w-md mx-4 bg-neutral-800 border-neutral-700",children:X.jsxs(Lw,{className:"pt-6",children:[X.jsxs("div",{className:"flex mb-4 gap-2 items-center",children:[X.jsx(Cn,{className:"h-10 w-10 text-red-500"}),X.jsx("h1",{className:"text-2xl font-bold text-neutral-300",children:"404 Page Not Found"})]}),X.jsx("p",{className:"mt-4 text-neutral-500 mb-6",children:"The page you are looking for might have been removed, had its name changed, or is temporarily unavailable."}),X.jsx(Gs,{to:"/",children:X.jsxs(Ni,{className:"w-full bg-[#0B3D91] hover:bg-[#092E6E] text-neutral-300",children:[X.jsx("i",{className:"fas fa-home mr-2"}),"Back to Home"]})})]})})})}function Vw(){const[e,t]=Ws(),n=Je.useMemo(()=>new URLSearchParams(window.location.search),[]),[s,r]=Je.useState(!0),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState(""),[u,m]=Je.useState(""),[h,p]=Je.useState(!1);Je.useEffect(()=>{(async()=>{try{const e=n.get("token_hash")||n.get("token")||"",t=n.get("type")||"signup",s=n.get("email")||void 0;if(!e)return l("Missing token"),void r(!1);const a=[()=>ni.auth.verifyOtp({type:t,token_hash:e,email:s}),()=>ni.auth.verifyOtp({type:t,token:e,email:s}),()=>ni.auth.verifyOtp({type:"email",token_hash:e,email:s}),()=>ni.auth.verifyOtp({type:"email",token:e,email:s})];let o=!1,c=null;for(const n of a)try{const{data:e,error:t}=await n();if(t)throw t;o=!0;break}catch(mj){c=mj}if(!o)return l("Verification failed. Your link may have expired."),void r(!1);i(!0),r(!1),Ga.success("Email confirmed. Please set your password.")}catch(mj){l("Unexpected error during verification."),r(!1)}})()},[]);return X.jsx("section",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:X.jsxs("div",{className:"w-full max-w-md bg-white border border-neutral-200 rounded-lg shadow p-6",children:[X.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 mb-2",children:"Account Confirmation"}),s&&X.jsx("p",{className:"text-neutral-600",children:"Verifying your email, please wait"}),!s&&o&&X.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded p-3",children:o}),!s&&a&&X.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.length<6)Ga.error("Password must be at least 6 characters");else if(c===u){p(!0);try{const{error:e}=await ni.auth.updateUser({password:c,data:{needs_password_reset:!1}});if(e)throw e;Ga.success("Password set successfully!"),setTimeout(()=>t("/battleground"),400)}catch(n){Ga.error("Failed to set password. Please try again.")}finally{p(!1)}}else Ga.error("Passwords do not match")},className:"space-y-4 mt-4",children:[X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"password",children:"Set Password"}),X.jsx(Fw,{id:"password",type:"password",value:c,onChange:e=>d(e.target.value),minLength:6,required:!0})]}),X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"confirm",children:"Confirm Password"}),X.jsx(Fw,{id:"confirm",type:"password",value:u,onChange:e=>m(e.target.value),minLength:6,required:!0})]}),X.jsx(Ni,{type:"submit",disabled:h,children:h?"Saving":"Save Password"})]})]})})}function Hw(){const[e,t]=Je.useState(""),[n,s]=Je.useState(""),[r,a]=Je.useState(!1),[i,o]=Je.useState(!1);Je.useEffect(()=>{let e=!0;const t=async()=>{try{const e=(()=>{let e="";const t=window.location.hash||"",n=t.indexOf("?");if(n>=0)e=t.slice(n+1);else{const n=t.lastIndexOf("#");n>0&&(e=t.slice(n+1))}return e||(e=window.location.search.replace(/^\?/,"")),new URLSearchParams(e)})(),t=(e.get("type"),e.get("token")||e.get("token_hash")||""),n=e.get("email")||void 0,s=e.get("access_token")||"",r=e.get("refresh_token")||"";if(s&&r)try{return void(await ni.auth.setSession({access_token:s,refresh_token:r}))}catch{}if(!t)return;const a=[()=>ni.auth.verifyOtp({type:"recovery",token_hash:t,email:n}),()=>ni.auth.verifyOtp({type:"recovery",token:t,email:n}),()=>ni.auth.verifyOtp({type:"recovery",token_hash:t}),()=>ni.auth.verifyOtp({type:"recovery",token:t})];for(const i of a)try{const{error:e}=await i();if(!e)break}catch{}}catch{}};(async()=>{await t();const{data:n}=await ni.auth.getSession();e&&o(!!n.session)})();const{data:n}=ni.auth.onAuthStateChange((t,n)=>{e&&o(!!n)});return()=>{e=!1,n.subscription.unsubscribe()}},[]);return X.jsx("section",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:X.jsxs("div",{className:"w-full max-w-md bg-white border border-neutral-200 rounded-lg shadow p-6",children:[X.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 mb-2",children:"Set Password"}),i?X.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 rounded p-3 mb-3",children:"Youre signed in. Please set your new password."}):X.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded p-3 mb-3",children:"It looks like you are not signed in. If you came here from an email link and still see this, please open the link again."}),X.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.length<6)Ga.error("Password must be at least 6 characters");else if(e===n){a(!0);try{const{error:t}=await ni.auth.updateUser({password:e,data:{needs_password_reset:!1}});if(t)throw t;Ga.success("Password updated!"),setTimeout(()=>{window.location.hash="/battleground"},400)}catch(s){Ga.error("Failed to update password. Please try again.")}finally{a(!1)}}else Ga.error("Passwords do not match")},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"password",className:"text-neutral-800",children:"New Password"}),X.jsx(Fw,{id:"password",type:"password",className:"bg-white text-neutral-900 border-neutral-300",value:e,onChange:e=>t(e.target.value),minLength:6,required:!0})]}),X.jsxs("div",{children:[X.jsx(Pv,{htmlFor:"confirm",className:"text-neutral-800",children:"Confirm Password"}),X.jsx(Fw,{id:"confirm",type:"password",className:"bg-white text-neutral-900 border-neutral-300",value:n,onChange:e=>s(e.target.value),minLength:6,required:!0})]}),X.jsx(Ni,{type:"submit",disabled:r||!i,className:"bg-[#0B3D91] hover:bg-[#082D69]",children:r?"Saving":"Save Password"})]})]})})}function Gw(){const{language:e,setLanguage:t}=oi();return X.jsxs("div",{className:"relative inline-flex items-center bg-gray-100 rounded-full p-0.5",children:[X.jsxs(cn,{initial:!1,children:["de"===e&&X.jsx(dn.div,{layoutId:"lang-bg",className:"absolute left-0.5 w-[calc(50%-2px)] h-[calc(100%-4px)] bg-[#0B3D91] rounded-full",initial:!1,transition:{type:"spring",stiffness:400,damping:30}},"de-bg"),"en"===e&&X.jsx(dn.div,{layoutId:"lang-bg",className:"absolute right-0.5 w-[calc(50%-2px)] h-[calc(100%-4px)] bg-[#0B3D91] rounded-full",initial:!1,transition:{type:"spring",stiffness:400,damping:30}},"en-bg")]}),X.jsx("button",{onClick:()=>t("de"),className:"relative z-10 px-3 py-1 text-sm font-medium transition-colors duration-200 rounded-full "+("de"===e?"text-white":"text-neutral-600 hover:text-neutral-900"),children:"DE"}),X.jsx("button",{onClick:()=>t("en"),className:"relative z-10 px-3 py-1 text-sm font-medium transition-colors duration-200 rounded-full "+("en"===e?"text-white":"text-neutral-600 hover:text-neutral-900"),children:"EN"})]})}qw.displayName=Ne.displayName;const Kw=(e,t,n)=>{if(e&&"reportValidity"in e){const s=un(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},Qw=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?Kw(s.ref,n,e):s.refs&&s.refs.forEach(t=>Kw(t,n,e))}},Xw=(e,t)=>{t.shouldUseNativeValidation&&Qw(e,t);const n={};for(const s in e){const r=un(t.fields,s),a=Object.assign(e[s]||{},{ref:r&&r.ref});if(Zw(t.names||Object.keys(e),s)){const e=Object.assign({},un(n,s));mn(e,"root",a),mn(n,s,e)}else mn(n,s,a)}return n},Zw=(e,t)=>e.some(e=>e.startsWith(t+"."));var Jw=function(e,t){for(var n={};e.length;){var s=e[0],r=s.code,a=s.message,i=s.path.join(".");if(!n[i])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:a,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[s.code];n[i]=hn(i,t,n,r,c?[].concat(c,s.message):s.message)}e.shift()}return n},ej=function(e,t,n){return void 0===n&&(n={}),function(s,r,a){try{return Promise.resolve(function(r,i){try{var o=Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](s,t)).then(function(e){return a.shouldUseNativeValidation&&Qw({},a),{errors:{},values:n.raw?s:e}})}catch(l){return i(l)}return o&&o.then?o.then(void 0,i):o}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:Xw(Jw(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(i){return Promise.reject(i)}}};const tj={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},nj=pn.object({email:pn.string().email().refine(e=>e.endsWith("@fs-students.de")||e.endsWith("@fs.de"),{message:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed"}),password:pn.string().min(6,"Password must be at least 6 characters")}),sj=pn.object({email:pn.string().email().refine(e=>e.endsWith("@fs-students.de")||e.endsWith("@fs.de"),{message:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed"}),password:pn.string().min(6,"Password must be at least 6 characters")}),rj="true"===(null==(q=null==(B=null==(z=null==tj?void 0:tj.VITE_DISABLE_SIGNUP)?void 0:z.toString)?void 0:(U=B.call(z)).toLowerCase)?void 0:q.call(U));function aj({isOpen:e,onClose:t}){const[,n]=Ws(),{t:s}=oi(),[r,a]=Je.useState(()=>"signup"===localStorage.getItem("authMode")?"signup":"signin"),[i,o]=Je.useState(!1),[l,c]=Je.useState(null),[d,u]=Je.useState(null),[m,h]=Je.useState(0),[p,f]=Je.useState(""),[g,x]=Je.useState(!1);Je.useState(!1);const[v,y]=Je.useState(null),b=fn({resolver:ej(nj)}),w=fn({resolver:ej(sj)});Je.useEffect(()=>{if(e){const e="signup"===localStorage.getItem("authMode")?"signup":"signin";a(rj&&"signup"===e?"signin":e),u(null),h(e=>e+1)}},[e]);return e?X.jsx(cn,{children:e&&X.jsxs(X.Fragment,{children:[X.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:t}),X.jsx(dn.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-neutral-200 overflow-hidden w-full max-w-md",onClick:e=>e.stopPropagation(),children:[X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 relative border-b border-neutral-200",children:[X.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-neutral-500 hover:text-neutral-700 transition-colors",children:X.jsx(os,{className:"w-6 h-6"})}),X.jsx("h2",{className:"text-2xl font-inter font-bold text-[#0B3D91]",children:s("signin"===r?"auth.signIn":"signup"===r?"auth.signUp":"auth.resetPassword")}),X.jsx("p",{className:"text-neutral-600 mt-1",children:s("reset"===r?"auth.resetPasswordInstructions":"auth.loginCta")})]}),X.jsx("div",{className:"p-6",children:g?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[X.jsx("h3",{className:"text-green-800 font-semibold mb-2",children:s("auth.registrationSuccessTitle")}),X.jsx("p",{className:"text-green-700 text-sm",children:s("auth.registrationSuccessBody")}),v&&X.jsxs("div",{className:"mt-3 text-sm text-green-800",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium",children:"Email:"})," ",v]}),X.jsx("button",{onClick:async()=>{try{if(!v)return;(await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/auth_resend_confirmation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo"},body:JSON.stringify({email:v,language:localStorage.getItem("lang")||"en"})})).ok?Ga.success(s("leaderboard.emailVerificationSent")):Ga.error(s("auth.unexpectedError"))}catch(mj){Ga.error(s("auth.unexpectedError"))}},className:"mt-2 inline-flex items-center px-3 py-1.5 rounded-md border border-green-300 text-green-800 hover:bg-green-100",children:"Resend email"})]})]}),X.jsx("button",{onClick:()=>{x(!1),a("signin")},className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200",children:s("auth.goToSignIn")})]}):"reset"===r?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:s("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{type:"email",value:p,onChange:e=>f(e.target.value),placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]})]}),X.jsx("button",{onClick:async()=>{if(p&&(p.endsWith("@fs-students.de")||p.endsWith("@fs.de"))){o(!0);try{const e=await Ww(p);if(!e.ok)return void Ga.error(s(e.error.messageKey));Ga.success(s("auth.resetEmailSent")),a("signin"),f("")}catch(e){Ga.error(s("auth.unexpectedError"))}finally{o(!1)}}else Ga.error(s("auth.invalidDomain"))},disabled:i,className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:s(i?"auth.loading":"auth.sendResetEmail")}),X.jsx("button",{onClick:()=>a("signin"),className:"w-full py-2 text-neutral-600 hover:text-neutral-800 transition-colors",children:s("auth.backToSignIn")})]}):"signin"===r?X.jsxs("form",{onSubmit:b.handleSubmit(async e=>{if(!!("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)||d){o(!0),c(null);try{const r=await async function(e,t){try{const{data:n,error:s}=await ni.auth.signInWithPassword({email:e,password:t});if(s)throw s;return{ok:!0,data:n}}catch(n){return{ok:!1,error:Mw(n)}}}(e.email,e.password);if(!r.ok){const e=Cw(r.error);return c(e),Ga.error(e),void r.error.code}Ga.success(s("auth.welcomeBack")),t(),n("/battleground")}catch(r){const e=Mw(r);Ga.error(s(e.messageKey))}finally{o(!1)}}else Ga.error(s("auth.completeVerification"))}),className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:s("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...b.register("email"),type:"email",placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),b.formState.errors.email&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),b.formState.errors.email.message]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:s("auth.password")}),X.jsxs("div",{className:"relative",children:[X.jsx(Un,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...b.register("password"),type:"password",placeholder:"",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),b.formState.errors.password&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),b.formState.errors.password.message]}),l&&X.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),l]})]}),X.jsx("div",{className:"flex justify-center my-4",children:X.jsx(_v,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>u(e),onExpire:()=>u(null),onError:()=>{Ga.error(s("auth.captchaFailed")),u(null)},theme:"light",size:"normal"},`signin-${m}`)}),X.jsx("button",{type:"submit",disabled:i||!d,className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?X.jsxs("span",{className:"flex items-center justify-center",children:[X.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[X.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),X.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),s("auth.loading")]}):s("auth.signIn")}),X.jsxs("div",{className:"text-center space-y-2",children:[X.jsx("button",{type:"button",onClick:()=>a("reset"),className:"text-sm text-neutral-600 hover:text-[#0B3D91] transition-colors",children:s("auth.forgotPassword")}),X.jsx("div",{className:"text-sm text-neutral-600",children:rj?X.jsx("span",{children:"Registration currently disabled."}):X.jsxs(X.Fragment,{children:[s("auth.needAccount")," ",X.jsx("button",{type:"button",onClick:()=>{a("signup"),u(null),h(e=>e+1),localStorage.setItem("authMode","signup")},className:"text-[#0B3D91] hover:text-[#082D69] font-medium",children:s("auth.signUp")})]})})]})]}):X.jsxs("form",{onSubmit:w.handleSubmit(async e=>{if(!!("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)||d){o(!0);try{const t=(null==tj?void 0:tj.VITE_EMAIL_REDIRECT_URL)||`${window.location.origin}/#/auth-confirm`,{data:n,error:r}=await ni.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:t,data:{username:e.email.split("@")[0]}}});if(r)return void(String(r.message||"").toLowerCase().includes("already registered")?(Ga.error(s("auth.userExists")),a("signin")):Ga.error(s("auth.unexpectedError")));y(e.email),x(!0),Ga.success(s("auth.registrationSuccessTitle"))}catch(mj){Ga.error(s("auth.unexpectedError"))}finally{o(!1),u(null),h(e=>e+1)}}else Ga.error(s("auth.completeVerification"))}),className:"space-y-4","aria-disabled":rj,children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:s("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...w.register("email"),type:"email",placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),w.formState.errors.email&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),w.formState.errors.email.message]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:s("auth.password")}),X.jsxs("div",{className:"relative",children:[X.jsx(Un,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...w.register("password"),type:"password",placeholder:"",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),w.formState.errors.password&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),w.formState.errors.password.message]})]}),X.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center gap-3",children:[X.jsx("img",{src:"https://www.frankfurt-school.de/themes/custom/fs_theme/logo.svg",alt:"Frankfurt School Logo",className:"w-10 h-10 object-contain",onError:e=>{e.currentTarget.style.display="none"}}),X.jsxs("div",{className:"text-sm text-blue-700",children:[X.jsx("div",{className:"font-semibold",children:"Exclusive to Frankfurt School students"}),X.jsx("div",{children:"Use your @fs-students.de (or @fs.de) email to register. Email confirmation is required."})]})]}),X.jsx("div",{className:"flex justify-center my-4",children:X.jsx(_v,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>u(e),onExpire:()=>u(null),onError:()=>{Ga.error(s("auth.captchaFailed")),u(null)},theme:"light",size:"normal"},`signup-${m}`)}),X.jsx("button",{type:"submit",disabled:rj||i,className:"w-full py-3 font-medium rounded-md transition-colors "+(rj?"bg-neutral-300 text-white cursor-not-allowed":"bg-[#0B3D91] text-white hover:bg-[#082D69]"),children:i?X.jsxs("span",{className:"flex items-center justify-center",children:[X.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[X.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),X.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),s("auth.loading")]}):s("auth.signUp")}),X.jsxs("div",{className:"text-center text-sm text-neutral-600",children:[s("auth.alreadyRegistered")," ",X.jsx("button",{type:"button",onClick:()=>{a("signin"),u(null),h(e=>e+1)},className:"text-[#0B3D91] hover:text-[#082D69] font-medium",children:s("auth.signIn")})]})]})})]})})]})}):null}const ij=({isOpen:e,onClose:t})=>{const[n,s]=Ws(),{t:r}=oi(),{user:a,isAdmin:i,signOut:o}=di(),[l,c]=Je.useState(!1),d=[{path:"/",icon:"fa-home",label:r("navigation.home")},{path:"/members",icon:"fa-users",label:r("navigation.members")},{path:"/events",icon:"fa-calendar-alt",label:r("navigation.events")},{path:"/battleground",icon:"fa-trophy",label:r("navigation.battleground")},{path:"/contact",icon:"fa-envelope",label:r("navigation.contact")}],u=i?[...d,{path:"/admin",icon:"fa-shield-alt",label:r("admin.title")}]:d,m=e=>"flex items-center px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-md transition-colors "+((e=>n===e)(e)?"bg-blue-50 text-blue-600 font-medium":"");return X.jsxs(X.Fragment,{children:[X.jsx("aside",{id:"sidebar",className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out border-r border-gray-200 "+(e?"translate-x-0":"-translate-x-full md:translate-x-0"),children:X.jsxs("div",{className:"flex flex-col h-full",children:[X.jsxs("div",{className:"relative border-b border-gray-200",children:[X.jsxs("div",{className:"absolute inset-0",children:[X.jsx("img",{src:"/bullrun.webp",alt:"Bull run",className:"w-full h-full object-cover"}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/50 via-black/30 to-black/20"})]}),X.jsx("div",{className:"relative px-4 py-6",children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs(Gs,{href:"/",className:"flex items-center",children:[X.jsx("img",{src:"/fs-qds-logo.png",alt:"FS Quant & Data Science",className:"h-12 w-12 md:h-14 md:w-14 mr-2 object-contain drop-shadow-sm"}),X.jsx("div",{children:X.jsx("div",{className:"font-inter font-extrabold text-2xl leading-tight uppercase tracking-widest bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-200 drop-shadow-sm",children:"FS Quant"})})]}),X.jsx("button",{id:"closeSidebar",className:"md:hidden text-white/90 hover:text-white",onClick:t,children:X.jsx("i",{className:"fas fa-times"})})]})})]}),X.jsx("nav",{className:"flex-1 py-4 overflow-y-auto bg-white",children:X.jsx("ul",{children:u.map(e=>X.jsx("li",{className:"px-2 py-1",children:X.jsxs(Gs,{href:e.path,className:m(e.path),onClick:()=>{window.innerWidth<768&&t()},children:[X.jsx("i",{className:`fas ${e.icon} w-5`}),X.jsx("span",{className:"ml-3",children:e.label}),"/battleground"===e.path&&X.jsx("span",{className:"ml-2 inline-flex",children:X.jsxs("span",{className:"relative flex h-2 w-2",children:[X.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),X.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})})]})},e.path))})}),X.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[a?X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"text-sm text-gray-600",children:[r("sidebar.loggedInAs"),X.jsx("div",{className:"font-medium text-gray-800 truncate",children:a.email})]}),X.jsxs("button",{onClick:async()=>{try{await o()}catch(e){Ga.error(r("auth.unexpectedError"))}},className:"w-full px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),r("common.logout")]})]}):X.jsxs("div",{className:"space-y-2",children:[X.jsxs("button",{onClick:()=>{localStorage.setItem("authMode","signin"),window.innerWidth<768&&t(),c(!0)},className:"w-full px-4 py-2 text-sm font-medium text-white bg-[#0B3D91] hover:bg-[#082D69] rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),r("auth.signIn")]}),X.jsxs("button",{onClick:()=>{localStorage.setItem("authMode","signup"),window.innerWidth<768&&t(),c(!0)},className:"w-full px-4 py-2 text-sm font-medium text-[#0B3D91] bg-blue-50 hover:bg-blue-100 rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-user-plus mr-2"}),r("auth.signUp")]})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm font-medium text-gray-700",children:r("common.language")}),X.jsx(Gw,{})]})]})]})}),X.jsx(aj,{isOpen:l,onClose:()=>c(!1)})]})},oj=()=>{const{t:e}=oi();return X.jsx("footer",{className:"bg-gradient-to-br from-gray-50 to-blue-50 text-gray-700 py-12 border-t border-gray-200",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[X.jsx("div",{children:X.jsxs("div",{className:"flex items-center mb-4",children:[X.jsx("img",{src:"/fs-qds-logo.png",alt:"FS Quant Logo",className:"h-10 w-10 md:h-12 md:w-12 mr-2 object-contain"}),X.jsx("div",{children:X.jsx("div",{className:"font-inter font-extrabold text-lg leading-tight uppercase tracking-widest text-gray-800",children:"FS Quant"})})]})}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-inter font-semibold text-lg mb-4 text-gray-800",children:e("footer.quickLinks")}),X.jsxs("ul",{className:"space-y-2 text-sm",children:[X.jsx("li",{children:X.jsx(Gs,{href:"/",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.home")})}),X.jsx("li",{children:X.jsx(Gs,{href:"/members",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.members")})}),X.jsx("li",{children:X.jsx(Gs,{href:"/events",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.events")})}),X.jsx("li",{children:X.jsx(Gs,{href:"/battleground",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.battleground")})})]})]}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-inter font-semibold text-lg mb-4 text-gray-800",children:e("navigation.contact")}),X.jsxs("address",{className:"not-italic text-sm text-gray-600",children:[X.jsx("p",{children:"Frankfurt School of Finance & Management GmbH"}),X.jsx("p",{children:"Adickesallee 32-34"}),X.jsx("p",{children:"60322 Frankfurt am Main"}),X.jsxs("p",{className:"mt-2",children:[e("auth.email"),": fs.data.science00@gmail.com"]})]})]})]}),X.jsxs("div",{className:"border-t border-gray-300 pt-8 flex flex-col md:flex-row justify-between items-start gap-6",children:[X.jsxs("div",{className:"text-gray-500 text-sm",children:[" ",(new Date).getFullYear()," FS Quant & Data Science. Protected under MIT License.",X.jsx("span",{className:"block mt-2 text-xs text-gray-500 leading-relaxed",children:"Disclaimer  All opinions expressed are the personal views of the student members of the club. Frankfurt School of Finance & Management GmbH assumes no responsibility or liability for any statements, content, or activities of this club."})]}),X.jsxs("div",{className:"flex space-x-4 self-center md:self-auto",children:[X.jsx("a",{href:"https://de.linkedin.com/company/fs-quant",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"LinkedIn",children:X.jsx("i",{className:"fab fa-linkedin"})}),X.jsx("a",{href:"https://github.com/fsqds/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"GitHub",children:X.jsx("i",{className:"fab fa-github"})}),X.jsx("a",{href:"https://www.instagram.com/fs_quant/?hl=en",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"Instagram",children:X.jsx("i",{className:"fab fa-instagram"})})]})]})]})})},lj=({onOpenSidebar:e})=>X.jsxs("header",{className:"md:hidden bg-white text-gray-800 p-4 flex items-center justify-between sticky top-0 z-40 shadow-md border-b border-gray-200",children:[X.jsx("button",{className:"text-gray-600",onClick:e,children:X.jsx("i",{className:"fas fa-bars"})}),X.jsx("div",{className:"font-inter font-bold text-sm",children:"FS QDS"}),X.jsx(Gw,{})]});function cj(){const e=window.location.hash||"#/";return(e.startsWith("#")?e.slice(1):e)||"/"}function dj(){const[e,t]=Je.useState(()=>cj());Je.useEffect(()=>{const e=()=>t(cj());return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);return[e,e=>{const n=e.startsWith("/")?`#${e}`:e.startsWith("#")?e:`#/${e}`;window.location.hash!==n&&(window.location.hash=n),t(cj())}]}function uj(){const[e,t]=Je.useState(!1),n=()=>{t(!e)};return Je.useEffect(()=>{const e=()=>{window.innerWidth>=768?t(!0):t(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),X.jsx(ls,{children:X.jsx(Ir,{client:Rr,children:X.jsx(ci,{children:X.jsxs(ii,{children:[(()=>{const s="undefined"!=typeof window&&window.location.hostname.endsWith("fsqds.org"),r="undefined"!=typeof window&&/^#\//.test(String(window.location.hash||""));return s&&!r?X.jsx(Ys,{children:X.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-roboto text-gray-700",children:[X.jsx(ij,{isOpen:e,onClose:()=>t(!1)}),X.jsxs("div",{className:"flex-1 md:ml-64",children:[X.jsx(lj,{onOpenSidebar:n}),X.jsxs("main",{children:[X.jsx(Xa,{}),X.jsxs(Qs,{children:[X.jsx(Hs,{path:"/",component:hi}),X.jsx(Hs,{path:"/members",component:fi}),X.jsx(Hs,{path:"/projects",component:gi}),X.jsx(Hs,{path:"/events",component:tx}),X.jsx(Hs,{path:"/battleground",component:jw}),X.jsx(Hs,{path:"/contact",component:Nw}),X.jsx(Hs,{path:"/admin",component:Dw}),X.jsx(Hs,{path:"/admin/events",component:Aw}),X.jsx(Hs,{path:"/login",component:$w}),X.jsx(Hs,{path:"/auth/confirm",component:Vw}),X.jsx(Hs,{path:"/set-password",component:Hw}),X.jsx(Hs,{component:Yw})]}),X.jsx(oj,{})]})]})]})}):X.jsx(Ys,{hook:dj,children:X.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-roboto text-gray-700",children:[X.jsx(ij,{isOpen:e,onClose:()=>t(!1)}),X.jsxs("div",{className:"flex-1 md:ml-64",children:[X.jsx(lj,{onOpenSidebar:n}),X.jsxs("main",{children:[X.jsx(Xa,{}),X.jsxs(Qs,{children:[X.jsx(Hs,{path:"/",component:hi}),X.jsx(Hs,{path:"/members",component:fi}),X.jsx(Hs,{path:"/projects",component:gi}),X.jsx(Hs,{path:"/events",component:tx}),X.jsx(Hs,{path:"/battleground",component:jw}),X.jsx(Hs,{path:"/contact",component:Nw}),X.jsx(Hs,{path:"/admin",component:Dw}),X.jsx(Hs,{path:"/admin/events",component:Aw}),X.jsx(Hs,{path:"/login",component:$w}),X.jsx(Hs,{path:"/auth/confirm",component:Vw}),X.jsx(Hs,{path:"/set-password",component:Hw}),X.jsx(Hs,{component:Yw})]}),X.jsx(oj,{})]})]})]})})})(),X.jsx(qa,{}),X.jsx(Wa,{}),X.jsx(Ka,{})]})})})})}!function(){try{const{pathname:e,search:t,hash:n,hostname:s}=window.location,r=s.endsWith("fsqds.org"),a=String(n||""),i=decodeURIComponent(a),o=/(?:#|[?&#])access_token=/.test(i),l=/[?#&]type=recovery/.test(i),c=/[?#&]type=(signup|magiclink)/.test(i),d=/[?&](access_token|token|token_hash)=/.test(t),u=/[?&]type=recovery/.test(t),m=/[?&]type=(signup|magiclink)/.test(t),h=()=>{if(!i)return"";const e=i.indexOf("?");if(e>=0)return i.slice(e+1);const t=i.lastIndexOf("#");return t>0?i.slice(t+1):""};if(/^#\/set-password/.test(i)&&(o||l)||!/^#\//.test(i)&&(o||l)){const e=h();return void(r?window.history.replaceState(null,"","/set-password"+(e?`?${e}`:"")):window.location.hash="/set-password"+(e?`?${e}`:""))}if(e.startsWith("/set-password")&&(d||u))return void(r?i&&"#"!==i&&window.history.replaceState(null,"",`/set-password${t}`):i&&"#"!==i&&i.startsWith("#/")||(window.history.replaceState(null,"","/"),window.location.hash=`/set-password${t}`));if(o&&c||d&&m||/%23access_token=/.test(a)){const e=h()||(t.startsWith("?")?t.slice(1):"");return void(r?window.history.replaceState(null,"","/battleground"+(e?`?${e}`:"")):window.location.hash="/battleground"+(e?`?${e}`:""))}if(!(r||"/"===e||i&&"#"!==i))return void(window.location.hash=`${e}${t}`)}catch{}}(),W(document.getElementById("root")).render(X.jsx(uj,{}));
