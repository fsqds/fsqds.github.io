var e,t,n,r,s,a,i,o,l,c,d,u,m,h,f,p,g,v,x,y,b,w,j,N,k,S,_,E,D,T,M,A,C,O,P,R,I,L,F,z,U,B,q,W,Y=e=>{throw TypeError(e)},H=(e,t,n)=>t.has(e)||Y("Cannot "+n),V=(e,t,n)=>(H(e,t,"read from private field"),n?n.call(e):t.get(e)),$=(e,t,n)=>t.has(e)?Y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),G=(e,t,n,r)=>(H(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),K=(e,t,n)=>(H(e,t,"access private method"),n),Q=(e,t,n,r)=>({set _(r){G(e,t,r,n)},get _(){return V(e,t,r)}});import{j as X,c as Z,a as J,u as ee,B as te,P as ne,V as re,b as se,d as ae,e as ie,f as oe,R as le,g as ce,h as de,i as ue,S as me,O as he,C as fe,k as pe,T as ge,D as ve,l as xe,m as ye,n as be,L as we,o as je,p as Ne,q as ke,r as Se,s as _e,I as Ee,t as De,v as Te,w as Me,x as Ae,y as Ce,z as Oe,A as Pe,E as Re,F as Ie,G as Le,H as Fe,J as ze,K as Ue,M as Be,N as qe,Q as We,U as Ye,W as He,X as Ve,Y as $e,Z as Ge,_ as Ke,$ as Qe,a0 as Xe}from"./react-ui-Di4LmEBY.js";import{a as Ze,r as Je,c as et,R as tt,g as nt,b as rt,d as st}from"./react-core-BRxKgMa0.js";import{t as at,c as it,f as ot}from"./utils-D5NkSKB_.js";import{c as lt,_ as ct,A as dt,a as ut,b as mt,d as ht,e as ft}from"./supabase-D9YxOUMU.js";import{_ as pt,a as gt,b as vt,c as xt,d as yt,e as bt,f as wt,t as jt,P as Nt,g as kt,h as St,k as _t,i as Et,j as Dt,l as Tt,m as Mt,n as At,o as Ct,p as Ot,q as Pt,r as Rt,s as It,u as Lt,v as Ft,w as zt,x as Ut,y as Bt,z as qt,A as Wt,B as Yt,R as Ht,L as Vt,C as $t,X as Gt,Y as Kt,T as Qt,D as Xt,E as Zt,F as Jt,G as en,H as tn,S as nn,I as rn,J as sn,K as an,M as on,N as ln}from"./charts-l1uWw2ZA.js";import{A as cn,m as dn}from"./animations-BMBnvKqr.js";import{g as un,s as mn,a as hn,z as fn,u as pn}from"./forms-Bm64xVdr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var gn=Ze;W=gn.createRoot,gn.hydrateRoot;
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vn=(...e)=>e.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" ");
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var xn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Je.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>Je.createElement("svg",{ref:l,...xn,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:vn("lucide",s),...o},[...i.map(([e,t])=>Je.createElement(e,t)),...Array.isArray(a)?a:[a]])),bn=(e,t)=>{const n=Je.forwardRef(({className:n,...r},s)=>{return Je.createElement(yn,{ref:s,iconNode:t,className:vn(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var a});return n.displayName=`${e}`,n},wn=bn("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),jn=bn("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Nn=bn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),kn=bn("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Sn=bn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),_n=bn("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),En=bn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Dn=bn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Tn=bn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Mn=bn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),An=bn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Cn=bn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),On=bn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Pn=bn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Rn=bn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),In=bn("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Ln=bn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Fn=bn("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),zn=bn("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Un=bn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Bn=bn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),qn=bn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Wn=bn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Yn=bn("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Hn=bn("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Vn=bn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),$n=bn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Gn=bn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kn=bn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Qn=bn("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Xn=bn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Zn=bn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Jn=bn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),er=bn("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),tr=bn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nr=bn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),rr=bn("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),sr=bn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ar=bn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ir=bn("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),or=bn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class lr extends Je.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:X.jsx("div",{className:"max-w-md w-full",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[X.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:X.jsx(nr,{className:"w-6 h-6 text-red-600"})}),X.jsx("h1",{className:"text-xl font-semibold text-center text-gray-900 mb-2",children:"Oops! Something went wrong"}),X.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry for the inconvenience. The application encountered an unexpected error."}),!1,X.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[X.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[X.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),X.jsxs("button",{onClick:()=>{this.handleReset(),window.location.href="/"},className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:[X.jsx(zn,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})})}):this.props.children}}var cr={exports:{}},dr={},ur=Je;var mr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},hr=ur.useState,fr=ur.useEffect,pr=ur.useLayoutEffect,gr=ur.useDebugValue;function vr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mr(e,n)}catch(r){return!0}}var xr="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=hr({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return pr(function(){s.value=n,s.getSnapshot=t,vr(s)&&a({inst:s})},[e,n,t]),fr(function(){return vr(s)&&a({inst:s}),e(function(){vr(s)&&a({inst:s})})},[e]),gr(n),n};dr.useSyncExternalStore=void 0!==ur.useSyncExternalStore?ur.useSyncExternalStore:xr,cr.exports=dr;var yr=cr.exports;const br=et.useInsertionEffect,wr=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?Je.useLayoutEffect:Je.useEffect,jr=br||wr,Nr=e=>{const t=Je.useRef([e,(...e)=>t[0](...e)]).current;return jr(()=>{t[0]=e}),t[1]},kr="pushState",Sr="replaceState",_r=["popstate",kr,Sr,"hashchange"],Er=e=>{for(const t of _r)addEventListener(t,e);return()=>{for(const t of _r)removeEventListener(t,e)}},Dr=(e,t)=>yr.useSyncExternalStore(Er,e,t),Tr=()=>location.search,Mr=()=>location.pathname,Ar=({ssrPath:e}={})=>Dr(Mr,e?()=>e:Mr),Cr=(e,{replace:t=!1,state:n=null}={})=>history[t?Sr:kr](n,"",e),Or=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[Or]){for(const e of[kr,Sr]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Or,{value:!0})}const Pr=(e="")=>"/"===e?"":e,Rr=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(Ir(Pr(e)),Ir(t)),Ir=e=>{try{return decodeURI(e)}catch(t){return e}},Lr={hook:(e={})=>[Ar(e),Cr],searchHook:({ssrSearch:e=""}={})=>Dr(Tr,()=>e),parser:function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,a,i=[],o="",l=e.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(n=s[0])?(i.push(n),o+="?"===s[1]?"(?:/(.*))?":"/(.*)"):":"===n?(r=s.indexOf("?",1),a=s.indexOf(".",1),i.push(s.substring(1,~r?r:~a?a:s.length)),o+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(o+=(~r?"?":"")+"\\"+s.substring(a))):o+="/"+s;return{keys:i,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}},base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Fr=Je.createContext(Lr),zr=()=>Je.useContext(Fr),Ur={},Br=Je.createContext(Ur),qr=e=>{const[t,n]=e.hook(e);return[Rr(e.base,t),Nr((t,r)=>n(((e,t)=>"~"===e[0]?e.slice(1):Pr(t)+e)(t,e.base),r))]},Wr=()=>qr(zr()),Yr=(e,t,n,r)=>{const{pattern:s,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=s.exec(n)||[],[o,...l]=i;return void 0!==o?[!0,(()=>{const e=!1!==a?Object.fromEntries(a.map((e,t)=>[e,l[t]])):i.groups;let t={...l};return e&&Object.assign(t,e),t})(),...r?[o]:[]]:[!1,null]},Hr=({children:e,...t})=>{var n,r;const s=zr(),a=t.hook?Lr:s;let i=a;const[o,l]=(null==(n=t.ssrPath)?void 0:n.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=o),t.hrefs=t.hrefs??(null==(r=t.hook)?void 0:r.hrefs);let c=Je.useRef({}),d=c.current,u=d;for(let m in a){const e="base"===m?a[m]+(t[m]||""):t[m]||a[m];d===u&&e!==u[m]&&(c.current=u={...u}),u[m]=e,e!==a[m]&&(i=u)}return Je.createElement(Fr.Provider,{value:i,children:e})},Vr=({children:e,component:t},n)=>t?Je.createElement(t,{params:n}):"function"==typeof e?e(n):e,$r=({path:e,nest:t,match:n,...r})=>{const s=zr(),[a]=qr(s),[i,o,l]=n??Yr(s.parser,e,a,t),c=(e=>{let t=Je.useRef(Ur),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return 0===Object.keys(e).length&&(n=e),t.current=n})({...Je.useContext(Br),...o});if(!i)return null;const d=l?Je.createElement(Hr,{base:l},Vr(r,c)):Vr(r,c);return Je.createElement(Br.Provider,{value:c,children:d})},Gr=Je.forwardRef((e,t)=>{const n=zr(),[r,s]=qr(n),{to:a="",href:i=a,onClick:o,asChild:l,children:c,className:d,replace:u,state:m,...h}=e,f=Nr(t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(null==o||o(t),t.defaultPrevented||(t.preventDefault(),s(i,e)))}),p=n.hrefs("~"===i[0]?i.slice(1):n.base+i,n);return l&&Je.isValidElement(c)?Je.cloneElement(c,{onClick:f,href:p}):Je.createElement("a",{...h,onClick:f,href:p,className:(null==d?void 0:d.call)?d(r===i):d,children:c,ref:t})}),Kr=e=>Array.isArray(e)?e.flatMap(e=>Kr(e&&e.type===Je.Fragment?e.props.children:e)):[e],Qr=({children:e,location:t})=>{const n=zr(),[r]=qr(n);for(const s of Kr(e)){let e=0;if(Je.isValidElement(s)&&(e=Yr(n.parser,s.props.path,t||r,s.props.nest))[0])return Je.cloneElement(s,{match:e})}return null};var Xr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zr="undefined"==typeof window||"Deno"in globalThis;function Jr(){}function es(e,t){return"function"==typeof e?e(t):e}function ts(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==rs(i,t.options))return!1}else if(!as(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(a&&!a(t)))}function ns(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(ss(t.options.mutationKey)!==ss(a))return!1}else if(!as(t.options.mutationKey,a))return!1}return(!r||t.state.status===r)&&!(s&&!s(t))}function rs(e,t){return((null==t?void 0:t.queryKeyHashFn)||ss)(e)}function ss(e){return JSON.stringify(e,(e,t)=>ls(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function as(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(n=>!as(e[n],t[n])))}function is(e,t){if(e===t)return e;const n=os(e)&&os(t);if(n||ls(e)&&ls(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,o=n?[]:{};let l=0;for(let c=0;c<i;c++){const s=n?c:a[c];(!n&&r.includes(s)||n)&&void 0===e[s]&&void 0===t[s]?(o[s]=void 0,l++):(o[s]=is(e[s],t[s]),o[s]===e[s]&&void 0!==e[s]&&l++)}return s===i&&l===s?e:o}return t}function os(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ls(e){if(!cs(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!cs(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function cs(e){return"[object Object]"===Object.prototype.toString.call(e)}function ds(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?is(e,t):t}function us(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ms(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var hs=Symbol();function fs(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==hs?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var ps=new(r=class extends Xr{constructor(){super(),$(this,e),$(this,t),$(this,n),G(this,n,e=>{if(!Zr&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){V(this,t)||this.setEventListener(V(this,n))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=V(this,t))||e.call(this),G(this,t,void 0))}setEventListener(e){var r;G(this,n,e),null==(r=V(this,t))||r.call(this),G(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){V(this,e)!==t&&(G(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof V(this,e)?V(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,r),gs=new(o=class extends Xr{constructor(){super(),$(this,s,!0),$(this,a),$(this,i),G(this,i,e=>{if(!Zr&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){V(this,a)||this.setEventListener(V(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=V(this,a))||e.call(this),G(this,a,void 0))}setEventListener(e){var t;G(this,i,e),null==(t=V(this,a))||t.call(this),G(this,a,e(this.setOnline.bind(this)))}setOnline(e){V(this,s)!==e&&(G(this,s,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return V(this,s)}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o);function vs(e){return Math.min(1e3*2**e,3e4)}function xs(e){return"online"!==(e??"online")||gs.isOnline()}var ys=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function bs(e){return e instanceof ys}function ws(e){let t,n=!1,r=0,s=!1;const a=function(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}(),i=()=>ps.isFocused()&&("always"===e.networkMode||gs.isOnline())&&e.canRun(),o=()=>xs(e.networkMode)&&e.canRun(),l=n=>{var r;s||(s=!0,null==(r=e.onSuccess)||r.call(e,n),null==t||t(),a.resolve(n))},c=n=>{var r;s||(s=!0,null==(r=e.onError)||r.call(e,n),null==t||t(),a.reject(n))},d=()=>new Promise(n=>{var r;t=e=>{(s||i())&&n(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var n;t=void 0,s||null==(n=e.onContinue)||n.call(e)}),u=()=>{if(s)return;let t;const a=0===r?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a;if(s)return;const o=e.retry??(Zr?0:3),l=e.retryDelay??vs,m="function"==typeof l?l(r,t):l,h=!0===o||"number"==typeof o&&r<o||"function"==typeof o&&o(r,t);var f;!n&&h?(r++,null==(a=e.onFail)||a.call(e,r,t),(f=m,new Promise(e=>{setTimeout(e,f)})).then(()=>i()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:a,cancel:t=>{var n;s||(c(new ys(t)),null==(n=e.abort)||n.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var js=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},s=e=>setTimeout(e,0);const a=r=>{t?e.push(r):s(()=>{n(r)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{s=e}}}(),Ns=(c=class{constructor(){$(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&G(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zr?1/0:3e5))}clearGcTimeout(){V(this,l)&&(clearTimeout(V(this,l)),G(this,l,void 0))}},l=new WeakMap,c),ks=(x=class extends Ns{constructor(e){super(),$(this,g),$(this,d),$(this,u),$(this,m),$(this,h),$(this,f),$(this,p),G(this,p,!1),G(this,f,e.defaultOptions),this.setOptions(e.options),this.observers=[],G(this,m,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,G(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??V(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=V(this,h))?void 0:e.promise}setOptions(e){this.options={...V(this,f),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||V(this,m).remove(this)}setData(e,t){const n=ds(this.state.data,e,this.options);return K(this,g,v).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){K(this,g,v).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null==(t=V(this,h))?void 0:t.promise;return null==(n=V(this,h))||n.cancel(e),r?r.then(Jr).catch(Jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,d))}isActive(){return this.observers.some(e=>{return!1!==(t=e.options.enabled,n=this,"function"==typeof t?t(n):t);var t,n})}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=V(this,h))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=V(this,h))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),V(this,m).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(V(this,h)&&(V(this,p)?V(this,h).cancel({revert:!0}):V(this,h).cancelRetry()),this.scheduleGc()),V(this,m).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||K(this,g,v).call(this,{type:"invalidate"})}fetch(e,t){var n,r,s;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(V(this,h))return V(this,h).continueRetry(),V(this,h).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(G(this,p,!0),a.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=fs(this.options,t),n={queryKey:this.queryKey,meta:this.meta};return i(n),G(this,p,!1),this.options.persister?this.options.persister(e,n,this):e(n)}};i(o),null==(n=this.options.behavior)||n.onFetch(o,this),G(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=o.fetchOptions)?void 0:r.meta)||K(this,g,v).call(this,{type:"fetch",meta:null==(s=o.fetchOptions)?void 0:s.meta});const l=e=>{var t,n,r,s;bs(e)&&e.silent||K(this,g,v).call(this,{type:"error",error:e}),bs(e)||(null==(n=(t=V(this,m).config).onError)||n.call(t,e,this),null==(s=(r=V(this,m).config).onSettled)||s.call(r,this.state.data,e,this)),this.scheduleGc()};return G(this,h,ws({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,n,r,s;if(void 0!==e){try{this.setData(e)}catch(a){return void l(a)}null==(n=(t=V(this,m).config).onSuccess)||n.call(t,e,this),null==(s=(r=V(this,m).config).onSettled)||s.call(r,e,this.state.error,this),this.scheduleGc()}else l(new Error(`${this.queryHash} data is undefined`))},onError:l,onFail:(e,t)=>{K(this,g,v).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{K(this,g,v).call(this,{type:"pause"})},onContinue:()=>{K(this,g,v).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),V(this,h).start()}},d=new WeakMap,u=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakSet,v=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Ss(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return bs(n)&&n.revert&&V(this,u)?{...V(this,u),fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),js.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),V(this,m).notify({query:this,type:"updated",action:e})})},x);function Ss(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xs(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var _s=(b=class extends Xr{constructor(e={}){super(),$(this,y),this.config=e,G(this,y,new Map)}build(e,t,n){const r=t.queryKey,s=t.queryHash??rs(r,t);let a=this.get(s);return a||(a=new ks({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){V(this,y).has(e.queryHash)||(V(this,y).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=V(this,y).get(e.queryHash);t&&(e.destroy(),t===e&&V(this,y).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,y).get(e)}getAll(){return[...V(this,y).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>ts(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>ts(e,t)):t}notify(e){js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){js.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){js.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},y=new WeakMap,b),Es=(_=class extends Ns{constructor(e){super(),$(this,k),$(this,w),$(this,j),$(this,N),this.mutationId=e.mutationId,G(this,j,e.mutationCache),G(this,w,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){V(this,w).includes(e)||(V(this,w).push(e),this.clearGcTimeout(),V(this,j).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){G(this,w,V(this,w).filter(t=>t!==e)),this.scheduleGc(),V(this,j).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){V(this,w).length||("pending"===this.state.status?this.scheduleGc():V(this,j).remove(this))}continue(){var e;return(null==(e=V(this,N))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,n,r,s,a,i,o,l,c,d,u,m,h,f,p,g,v,x,y,b;G(this,N,ws({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{K(this,k,S).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{K(this,k,S).call(this,{type:"pause"})},onContinue:()=>{K(this,k,S).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,j).canRun(this)}));const w="pending"===this.state.status,_=!V(this,N).canStart();try{if(!w){K(this,k,S).call(this,{type:"pending",variables:e,isPaused:_}),await(null==(n=(t=V(this,j).config).onMutate)?void 0:n.call(t,e,this));const a=await(null==(s=(r=this.options).onMutate)?void 0:s.call(r,e));a!==this.state.context&&K(this,k,S).call(this,{type:"pending",context:a,variables:e,isPaused:_})}const h=await V(this,N).start();return await(null==(i=(a=V(this,j).config).onSuccess)?void 0:i.call(a,h,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,h,e,this.state.context)),await(null==(d=(c=V(this,j).config).onSettled)?void 0:d.call(c,h,null,this.state.variables,this.state.context,this)),await(null==(m=(u=this.options).onSettled)?void 0:m.call(u,h,null,e,this.state.context)),K(this,k,S).call(this,{type:"success",data:h}),h}catch(E){try{throw await(null==(f=(h=V(this,j).config).onError)?void 0:f.call(h,E,e,this.state.context,this)),await(null==(g=(p=this.options).onError)?void 0:g.call(p,E,e,this.state.context)),await(null==(x=(v=V(this,j).config).onSettled)?void 0:x.call(v,void 0,E,this.state.variables,this.state.context,this)),await(null==(b=(y=this.options).onSettled)?void 0:b.call(y,void 0,E,e,this.state.context)),E}finally{K(this,k,S).call(this,{type:"error",error:E})}}finally{V(this,j).runNext(this)}}},w=new WeakMap,j=new WeakMap,N=new WeakMap,k=new WeakSet,S=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),js.batch(()=>{V(this,w).forEach(t=>{t.onMutationUpdate(e)}),V(this,j).notify({mutation:this,type:"updated",action:e})})},_);var Ds=(T=class extends Xr{constructor(e={}){super(),$(this,E),$(this,D),this.config=e,G(this,E,new Map),G(this,D,Date.now())}build(e,t,n){const r=new Es({mutationCache:this,mutationId:++Q(this,D)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=Ts(e),n=V(this,E).get(t)??[];n.push(e),V(this,E).set(t,n),this.notify({type:"added",mutation:e})}remove(e){var t;const n=Ts(e);if(V(this,E).has(n)){const r=null==(t=V(this,E).get(n))?void 0:t.filter(t=>t!==e);r&&(0===r.length?V(this,E).delete(n):V(this,E).set(n,r))}this.notify({type:"removed",mutation:e})}canRun(e){var t;const n=null==(t=V(this,E).get(Ts(e)))?void 0:t.find(e=>"pending"===e.state.status);return!n||n===e}runNext(e){var t;const n=null==(t=V(this,E).get(Ts(e)))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==n?void 0:n.continue())??Promise.resolve()}clear(){js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...V(this,E).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(e=>ns(t,e))}findAll(e={}){return this.getAll().filter(t=>ns(e,t))}notify(e){js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return js.batch(()=>Promise.all(e.map(e=>e.continue().catch(Jr))))}},E=new WeakMap,D=new WeakMap,T);function Ts(e){var t;return(null==(t=e.options.scope)?void 0:t.id)??String(e.mutationId)}function Ms(e){return{onFetch:(t,n)=>{var r,s,a,i,o;const l=t.options,c=null==(a=null==(s=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:s.fetchMore)?void 0:a.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let m={pages:[],pageParams:[]},h=0;const f=async()=>{let n=!1;const r=fs(t.options,t.fetchOptions),s=async(e,s,a)=>{if(n)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const i={queryKey:t.queryKey,pageParam:s,direction:a?"backward":"forward",meta:t.options.meta};var o;o=i,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)});const l=await r(i),{maxPages:c}=t.options,d=a?ms:us;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,s,c)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},n=(e?Cs:As)(l,t);m=await s(t,n,e)}else{const t=e??d.length;do{const e=0===h?u[0]??l.initialPageParam:As(l,m);if(h>0&&null==e)break;m=await s(m,e),h++}while(h<t)}return m};t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,f,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=f}}}function As(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Cs(e,{pages:t,pageParams:n}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,n[0],n):void 0}var Os=(F=class{constructor(e={}){$(this,M),$(this,A),$(this,C),$(this,O),$(this,P),$(this,R),$(this,I),$(this,L),G(this,M,e.queryCache||new _s),G(this,A,e.mutationCache||new Ds),G(this,C,e.defaultOptions||{}),G(this,O,new Map),G(this,P,new Map),G(this,R,0)}mount(){Q(this,R)._++,1===V(this,R)&&(G(this,I,ps.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,M).onFocus())})),G(this,L,gs.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,M).onOnline())})))}unmount(){var e,t;Q(this,R)._--,0===V(this,R)&&(null==(e=V(this,I))||e.call(this),G(this,I,void 0),null==(t=V(this,L))||t.call(this),G(this,L,void 0))}isFetching(e){return V(this,M).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,A).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=V(this,M).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=V(this,M).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(es(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return V(this,M).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=V(this,M).get(r.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==s?void 0:s.state.data);if(void 0!==a)return V(this,M).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return js.batch(()=>V(this,M).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=V(this,M).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=V(this,M);js.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=V(this,M),r={type:"active",...e};return js.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=js.batch(()=>V(this,M).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(Jr).catch(Jr)}invalidateQueries(e={},t={}){return js.batch(()=>{if(V(this,M).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(null==t?void 0:t.cancelRefetch)??!0},r=js.batch(()=>V(this,M).findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(Jr)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(Jr)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=V(this,M).build(this,t);return n.isStaleByTime(es(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Jr).catch(Jr)}fetchInfiniteQuery(e){return e.behavior=Ms(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Jr).catch(Jr)}ensureInfiniteQueryData(e){return e.behavior=Ms(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gs.isOnline()?V(this,A).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,M)}getMutationCache(){return V(this,A)}getDefaultOptions(){return V(this,C)}setDefaultOptions(e){G(this,C,e)}setQueryDefaults(e,t){V(this,O).set(ss(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...V(this,O).values()];let n={};return t.forEach(t=>{as(e,t.queryKey)&&(n={...n,...t.defaultOptions})}),n}setMutationDefaults(e,t){V(this,P).set(ss(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...V(this,P).values()];let n={};return t.forEach(t=>{as(e,t.mutationKey)&&(n={...n,...t.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...V(this,C).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=rs(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===hs&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...V(this,C).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,M).clear(),V(this,A).clear()}},M=new WeakMap,A=new WeakMap,C=new WeakMap,O=new WeakMap,P=new WeakMap,R=new WeakMap,I=new WeakMap,L=new WeakMap,F),Ps=Je.createContext(void 0),Rs=({client:e,children:t})=>(Je.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(Ps.Provider,{value:e,children:t}));const Is=new Os({defaultOptions:{queries:{queryFn:(({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return"returnNull"===e&&401===n.status?null:(await async function(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}(n),await n.json())})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});let Ls=0;const Fs=new Map,zs=e=>{if(Fs.has(e))return;const t=setTimeout(()=>{Fs.delete(e),Ws({type:"REMOVE_TOAST",toastId:e})},1e6);Fs.set(e,t)},Us=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?zs(n):e.toasts.forEach(e=>{zs(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Bs=[];let qs={toasts:[]};function Ws(e){qs=Us(qs,e),Bs.forEach(e=>{e(qs)})}function Ys({...e}){const t=(Ls=(Ls+1)%Number.MAX_SAFE_INTEGER,Ls.toString()),n=()=>Ws({type:"DISMISS_TOAST",toastId:t});return Ws({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>Ws({type:"UPDATE_TOAST",toast:{...e,id:t}})}}var Hs="ToastProvider",[Vs,$s,Gs]=Z("Toast"),[Ks,Qs]=J("Toast",[Gs]),[Xs,Zs]=Ks(Hs),Js=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:i}=e,[o,l]=Je.useState(null),[c,d]=Je.useState(0),u=Je.useRef(!1),m=Je.useRef(!1);return n.trim(),X.jsx(Vs.Provider,{scope:t,children:X.jsx(Xs,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:Je.useCallback(()=>d(e=>e+1),[]),onToastRemove:Je.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:i})})};Js.displayName=Hs;var ea="ToastViewport",ta=["F8"],na="toast.viewportPause",ra="toast.viewportResume",sa=Je.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=ta,label:s="Notifications ({hotkey})",...a}=e,i=Zs(ea,n),o=$s(n),l=Je.useRef(null),c=Je.useRef(null),d=Je.useRef(null),u=Je.useRef(null),m=ee(t,u,i.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=i.toastCount>0;Je.useEffect(()=>{const e=e=>{var t;0!==r.length&&r.every(t=>e[t]||e.code===t)&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),Je.useEffect(()=>{const e=l.current,t=u.current;if(f&&e&&t){const n=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(na);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},r=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(ra);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},s=t=>{!e.contains(t.relatedTarget)&&r()},a=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",s),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",a),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[f,i.isClosePausedRef]);const p=Je.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,r=[n,...ja(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return Je.useEffect(()=>{const e=u.current;if(e){const t=t=>{var n,r,s;const a=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!a){const a=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(n=c.current)||n.focus());const o=p({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===a);Na(o.slice(l+1))?t.preventDefault():i?null==(r=c.current)||r.focus():null==(s=d.current)||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,p]),X.jsxs(te,{ref:l,role:"region","aria-label":s.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:f?void 0:"none"},children:[f&&X.jsx(ia,{ref:c,onFocusFromOutsideViewport:()=>{Na(p({tabbingDirection:"forwards"}))}}),X.jsx(Vs.Slot,{scope:n,children:X.jsx(ne.ol,{tabIndex:-1,...a,ref:m})}),f&&X.jsx(ia,{ref:d,onFocusFromOutsideViewport:()=>{Na(p({tabbingDirection:"backwards"}))}})]})});sa.displayName=ea;var aa="ToastFocusProxy",ia=Je.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=Zs(aa,n);return X.jsx(re,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=a.viewport)?void 0:t.contains(n))&&r()}})});ia.displayName=aa;var oa="Toast",la=Je.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...i}=e,[o=!0,l]=se({prop:r,defaultProp:s,onChange:a});return X.jsx(ae,{present:n||o,children:X.jsx(ua,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:ie(e.onPause),onResume:ie(e.onResume),onSwipeStart:oe(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:oe(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});la.displayName=oa;var[ca,da]=Ks(oa,{onClose(){}}),ua=Je.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:h,...f}=e,p=Zs(oa,n),[g,v]=Je.useState(null),x=ee(t,e=>v(e)),y=Je.useRef(null),b=Je.useRef(null),w=s||p.duration,j=Je.useRef(0),N=Je.useRef(w),k=Je.useRef(0),{onToastAdd:S,onToastRemove:_}=p,E=ie(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=p.viewport)||e.focus()),i()}),D=Je.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(k.current),j.current=(new Date).getTime(),k.current=window.setTimeout(E,e))},[E]);Je.useEffect(()=>{const e=p.viewport;if(e){const t=()=>{D(N.current),null==c||c()},n=()=>{const e=(new Date).getTime()-j.current;N.current=N.current-e,window.clearTimeout(k.current),null==l||l()};return e.addEventListener(na,n),e.addEventListener(ra,t),()=>{e.removeEventListener(na,n),e.removeEventListener(ra,t)}}},[p.viewport,w,l,c,D]),Je.useEffect(()=>{a&&!p.isClosePausedRef.current&&D(w)},[a,w,p.isClosePausedRef,D]),Je.useEffect(()=>(S(),()=>_()),[S,_]);const T=Je.useMemo(()=>g?ya(g):null,[g]);return p.viewport?X.jsxs(X.Fragment,{children:[T&&X.jsx(ma,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:T}),X.jsx(ca,{scope:n,onClose:E,children:Ze.createPortal(X.jsx(Vs.ItemSlot,{scope:n,children:X.jsx(le,{asChild:!0,onEscapeKeyDown:oe(o,()=>{p.isFocusedToastEscapeKeyDownRef.current||E(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:X.jsx(ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...f,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:oe(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:oe(e.onPointerDown,e=>{0===e.button&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:oe(e.onPointerMove,e=>{if(!y.current)return;const t=e.clientX-y.current.x,n=e.clientY-y.current.y,r=Boolean(b.current),s=["left","right"].includes(p.swipeDirection),a=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,i=s?a(0,t):0,o=s?0:a(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},m={originalEvent:e,delta:c};r?(b.current=c,ba("toast.swipeMove",u,m,{discrete:!1})):wa(c,p.swipeDirection,l)?(b.current=c,ba("toast.swipeStart",d,m,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(y.current=null)}),onPointerUp:oe(e.onPointerUp,e=>{const t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};wa(t,p.swipeDirection,p.swipeThreshold)?ba("toast.swipeEnd",h,r,{discrete:!0}):ba("toast.swipeCancel",m,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),ma=e=>{const{__scopeToast:t,children:n,...r}=e,s=Zs(oa,t),[a,i]=Je.useState(!1),[o,l]=Je.useState(!1);return function(e=()=>{}){const t=ie(e);de(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>i(!0)),Je.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:X.jsx(ce,{asChild:!0,children:X.jsx(re,{...r,children:a&&X.jsxs(X.Fragment,{children:[s.label," ",n]})})})},ha=Je.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return X.jsx(ne.div,{...r,ref:t})});ha.displayName="ToastTitle";var fa=Je.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return X.jsx(ne.div,{...r,ref:t})});fa.displayName="ToastDescription";var pa=Je.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?X.jsx(xa,{altText:n,asChild:!0,children:X.jsx(va,{...r,ref:t})}):null});pa.displayName="ToastAction";var ga="ToastClose",va=Je.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=da(ga,n);return X.jsx(xa,{asChild:!0,children:X.jsx(ne.button,{type:"button",...r,ref:t,onClick:oe(e.onClick,s.onClose)})})});va.displayName=ga;var xa=Je.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return X.jsx(ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function ya(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...ya(e))}}),t}function ba(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?ue(s,a):s.dispatchEvent(a)}var wa=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return"left"===t||"right"===t?a&&r>n:!a&&s>n};function ja(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Na(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var ka=sa,Sa=la,_a=ha,Ea=fa,Da=pa,Ta=va;function Ma(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Ma(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Aa=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,Ca=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Ma(e))&&(r&&(r+=" "),r+=t);return r},Oa=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return Ca(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const i=Aa(t)||Aa(r);return s[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n})?[...e,n,r]:e},[]);return Ca(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)};function Pa(...e){return at(it(e))}const Ra=Js,Ia=Je.forwardRef(({className:e,...t},n)=>X.jsx(ka,{ref:n,className:Pa("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Ia.displayName=ka.displayName;const La=Oa("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Fa=Je.forwardRef(({className:e,variant:t,...n},r)=>X.jsx(Sa,{ref:r,className:Pa(La({variant:t}),e),...n}));Fa.displayName=Sa.displayName;Je.forwardRef(({className:e,...t},n)=>X.jsx(Da,{ref:n,className:Pa("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=Da.displayName;const za=Je.forwardRef(({className:e,...t},n)=>X.jsx(Ta,{ref:n,className:Pa("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:X.jsx(or,{className:"h-4 w-4"})}));za.displayName=Ta.displayName;const Ua=Je.forwardRef(({className:e,...t},n)=>X.jsx(_a,{ref:n,className:Pa("text-sm font-semibold",e),...t}));Ua.displayName=_a.displayName;const Ba=Je.forwardRef(({className:e,...t},n)=>X.jsx(Ea,{ref:n,className:Pa("text-sm opacity-90",e),...t}));function qa(){const{toasts:e}=function(){const[e,t]=Je.useState(qs);return Je.useEffect(()=>(Bs.push(t),()=>{const e=Bs.indexOf(t);e>-1&&Bs.splice(e,1)}),[e]),{...e,toast:Ys,dismiss:e=>Ws({type:"DISMISS_TOAST",toastId:e})}}();return X.jsxs(Ra,{children:[e.map(function({id:e,title:t,description:n,action:r,...s}){return X.jsxs(Fa,{...s,children:[X.jsxs("div",{className:"grid gap-1",children:[t&&X.jsx(Ua,{children:t}),n&&X.jsx(Ba,{children:n})]}),r,X.jsx(za,{})]},e)}),X.jsx(Ia,{})]})}function Wa(){const[e,t]=Je.useState(navigator.onLine);return Je.useEffect(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e?null:X.jsx("div",{className:"fixed bottom-0 inset-x-0 z-[1000]",children:X.jsx("div",{className:"mx-auto max-w-3xl mb-4",children:X.jsx("div",{className:"mx-4 rounded-md bg-amber-50 border border-amber-200 p-3 text-amber-800 text-sm shadow-sm",children:"You are offline. Some features may not work until connection is restored."})})})}Ba.displayName=Ea.displayName,Array(12).fill(0);let Ya=1;const Ha=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Ya++,a=this.toasts.find(e=>e.id===s),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(t=>t.id===s?(this.publish({...t,...e,id:s,title:n}),{...t,...e,id:s,dismissible:i,title:n}):t):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let s,a=void 0!==n;const i=r.then(async e=>{s=["resolve",e];if(tt.isValidElement(e))a=!1,this.create({id:n,type:"default",message:e});else if(Va(e)&&!e.ok){a=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,i="object"==typeof r&&!tt.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(e instanceof Error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!tt.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(void 0!==t.success){a=!1;const r="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!tt.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:s,...i})}}).catch(async e=>{if(s=["reject",e],void 0!==t.error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!tt.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===s[0]?t(s[1]):e(s[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||Ya++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Va=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,$a=(e,t)=>{const n=(null==t?void 0:t.id)||Ya++;return Ha.addToast({title:e,...t,id:n}),n},Ga=Object.assign($a,{success:Ha.success,info:Ha.info,warning:Ha.warning,error:Ha.error,custom:Ha.custom,message:Ha.message,promise:Ha.promise,dismiss:Ha.dismiss,loading:Ha.loading},{getHistory:()=>Ha.toasts,getToasts:()=>Ha.getActiveToasts()});function Ka(){return Je.useEffect(()=>{const e=e=>{Ga.error("An unexpected error occurred")},t=e=>{};return window.addEventListener("unhandledrejection",e),window.addEventListener("error",t),()=>{window.removeEventListener("unhandledrejection",e),window.removeEventListener("error",t)}},[]),null}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Qa={common:{home:"Home",about:"About",contact:"Contact",login:"Login",logout:"Logout",signup:"Sign Up",submit:"Submit",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",loading:"Loading...",error:"An error occurred",success:"Success",welcome:"Welcome",language:"Language",close:"Close"},navigation:{home:"Home",members:"Team",projects:"Projects",events:"Events",leaderboard:"Leaderboard",battleground:"Battleground",contact:"Contact"},sidebar:{loggedInAs:"Signed in as",disclaimerTitle:"Disclaimer",disclaimerOpinions:"All opinions expressed are the personal views of the student members of the club.",disclaimerLiability:"Frankfurt School of Finance & Management GmbH assumes no responsibility or liability for any statements, content, or activities of this club."},auth:{signIn:"Sign In",signUp:"Create Account",resetPassword:"Reset Password",resetPasswordInstructions:"Enter your email to receive a password reset link",email:"Email",password:"Password",loginCta:"Join the FS Quant & Data Science community",needAccount:"Need an account?",alreadyRegistered:"Already registered?",forgotPassword:"Forgot your password?",sendResetEmail:"Send Reset Email",backToSignIn:"Back to Sign In",registrationSuccessTitle:"Registration Successful!",registrationSuccessBody:"We've sent you an email with instructions to set up your password. Please check your inbox and follow the link to complete your registration.",goToSignIn:"Go to Sign In",completeVerification:"Please complete the verification",captchaFailed:"Verification failed. Please try again.",invalidCredentials:"Invalid email or password",emailNotConfirmed:"Please verify your email before signing in",resetEmailSent:"Password reset email sent! Check your inbox.",resetEmailFailed:"Failed to send reset email",unexpectedError:"An error occurred",logoutSuccess:"You have been logged out",adminRegistrationDisabled:"Admin accounts cannot be created via the website. Please contact an administrator.",invalidDomain:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed",userExists:"An account with this email already exists. Please sign in.",registrationFailed:"Registration failed. Please try again.",welcomeBack:"Welcome back!",loading:"Loading...",setupNote:"After registration, you'll receive an email to set up your password.",rateLimited:"Too many attempts. Please wait a moment and try again.",networkError:"Network error. Please check your connection and try again.",sessionExpired:"Your session has expired. Please sign in again.",weakPassword:"Password is too weak. Please choose a stronger one."},leaderboard:{cumulativePnl:"Cumulative P&L %",title:"Leaderboard",hti:"Hack the Interview",adx:"Axe the DAX",tabHti:"HTI",tabAdx:"ADX",signIn:"Sign In",signUp:"Sign Up",email:"Email",password:"Password",loginCta:"Join the FS Quant & Data Science community",needAccount:"Need an account?",alreadyRegistered:"Already registered?",emailVerificationSent:"Verification email sent! Check your inbox.",invalidCredentials:"Invalid email or password",locked:"Sign in to participate",leaderboard:"Leaderboard",rank:"Rank",player:"Player",score:"Score",points:"points",questionNumber:"Q",countdown:"Unlocks in",correctAnswer:"Correct! Well done!",wrongAnswer:"Incorrect. Try again next time!",alreadyAnswered:"You've already answered this question",questionLocked:"This question is not available yet",portfolio:"Portfolio",myEquity:"Equity",positions:"Positions",orderSuccess:"Order placed successfully!",orderFailed:"Failed to place order",disclaimer:"This is a simulated trading environment for educational purposes only.",optionsNote:"Options data is generated for demonstration. Real trading involves significant risk.",lastUpdated:"Last updated",seasonInfo:"Season Information"},admin:{title:"Admin Panel",questions:"Questions",tickers:"Tickers",revenue:"Revenue Windows",badges:"Badges",seasons:"Seasons",createQuestion:"Create Question",editQuestion:"Edit Question",questionText:"Question Text",questionType:"Question Type",releaseTime:"Release Time",closeTime:"Close Time",isActive:"Active",addTicker:"Add Ticker",symbol:"Symbol",companyName:"Company Name",band:"Band",top5:"Top 5",bottom5:"Bottom 5"},events:{types:{workshop:"Workshop",speaker:"Speaker",competition:"Competition",meetup:"Meetup",conference:"Conference",exclusive:"Exclusive"},title:"Events",calendar:"Event Calendar",upcoming:"Upcoming Events",past:"Past Events",pastCollaborations:"Past Successful Collaborations",pastCollaborationsDescription:"We've partnered with leading companies to provide real-world projects, mentorship, and career opportunities for our members.",newEventsComingSoon:"* New events will be announced soon",register:"Register",addToCalendar:"Add to Calendar",location:"Location",date:"Date",time:"Time",organizer:"Organizer",capacity:"Capacity",noEvents:"No upcoming events at the moment"},members:{title:"Team",subtitle:"Meet the team behind FS Quant & Data Science",facultyAdvisorsTitle:"Faculty Advisors",orgaTeamTitle:"Orga Team",position:"Position",department:"Department",expertise:"Expertise",email:"Email",linkedin:"LinkedIn"},projects:{title:"Projects",current:"Current Projects",completed:"Completed Projects",viewDetails:"View Details",technologies:"Technologies",team:"Team",duration:"Duration",status:"Status"},footer:{about:"About Us",quickLinks:"Quick Links",connect:"Connect",copyright:" 2025 FS Quant & Data Science. All rights reserved.",privacy:"Privacy Policy",terms:"Terms of Service"},home:{heroSubtitle:"Welcome!",heroDescription:"Join us in exploring the intersection of quantitative finance, data science, and cutting-edge technology.",cta:{applyNow:"Apply Now",learnMore:"Learn More"},lab:{title:"Our Applied Quant Lab",description:"Our Quant Lab is a hands-on studio where students build models, test trading ideas, and ship data products. We combine finance, statistics, and software engineering in iterative sprints with peer review, reproducible workflows, and a Demo Day finale."},features:{projectSprint:{title:"Semester-Long Project Sprint",description:"Small student groups tackle real-world data or quant problems with a fixed timeline that mirrors industry agile cycles."},biweeklyMeetings:{title:"Bi-Weekly Online Meetings",description:"Regular initiative-wide meetings on Teams for collaboration, resource sharing, and community building through dedicated channels."},demoDay:{title:"Demo Day Finale",description:"Teams pitch to an industry jury. Top project wins prizes, coffee chats with jurors, and referrals for internships/jobs."}},metrics:{activeMembers:"Active Members",projectsCompleted:"Projects Completed",eventsHosted:"Events Hosted",industryPartners:"Industry Partners"}},contact:{title:"Get in Touch",subtitle:"Have questions or want to join our initiative? We'd love to hear from you!",joinTitle:"Join Our Initiative",joinDescription:"Be part of Frankfurt School's premier quant and data science community",form:{name:"Name",email:"Email",message:"Message",submit:"Submit"},success:"Thanks for reaching out  we will get back to you soon!"},projectsTitle:"Projects",projectsSubtitle:"Explore our portfolio of data science and quantitative finance projects",eventsTitle:"Events",eventsSubtitle:"Stay tuned for upcoming workshops, competitions, and networking events with our industry partners.",noUpcomingEvents:"No upcoming events at the moment. Check back soon!",battleground:{trading:"Trading",predictions:"Predictions",portfolio:"Portfolio",riskWarningTitle:"Not investment advice  risk disclosure",riskWarningText:"The content and simulations on this page are for educational purposes only and do not constitute investment, legal, accounting, or tax advice, nor a recommendation or solicitation to buy or sell any security or financial instrument. Markets involve risk; options and derivatives trading is highly speculative and can result in the loss of all invested capital. Past performance is not indicative of future results. Data, prices, and model outputs may be delayed, simulated, or inaccurate; no warranty is made as to completeness, timeliness, or accuracy. This student initiative is not a broker, dealer, or investment adviser. Always do your own research and consider consulting a qualified financial adviser before making investment decisions."}},Xa={common:{home:"Startseite",about:"ber uns",contact:"Kontakt",login:"Anmelden",logout:"Abmelden",signup:"Registrieren",submit:"Absenden",cancel:"Abbrechen",save:"Speichern",delete:"Lschen",edit:"Bearbeiten",loading:"Ldt...",error:"Ein Fehler ist aufgetreten",success:"Erfolgreich",welcome:"Willkommen",language:"Sprache",close:"Schlieen"},navigation:{home:"Startseite",members:"Team",projects:"Projekte",events:"Veranstaltungen",leaderboard:"Bestenliste",battleground:"Battleground",contact:"Kontakt"},sidebar:{loggedInAs:"Angemeldet als",disclaimerTitle:"Haftungsausschluss",disclaimerOpinions:"Alle geuerten Meinungen sind ausschlielich persnliche Ansichten der studentischen Mitglieder des Clubs.",disclaimerLiability:"Die Frankfurt School of Finance & Management GmbH bernimmt keinerlei Verantwortung oder Haftung fr uerungen, Inhalte oder Aktivitten dieses Clubs; eine Zurechnung zur Hochschule findet nicht statt. Haftungsansprche sind  soweit gesetzlich zulssig  ausgeschlossen."},auth:{signIn:"Anmelden",signUp:"Registrieren",resetPassword:"Passwort zurcksetzen",resetPasswordInstructions:"Gib deine E-Mail-Adresse ein, um einen Link zum Zurcksetzen des Passworts zu erhalten",email:"E-Mail",password:"Passwort",loginCta:"Tritt der FS Quant & Data Science Community bei",needAccount:"Noch kein Konto?",alreadyRegistered:"Bereits registriert?",forgotPassword:"Passwort vergessen?",sendResetEmail:"E-Mail zum Zurcksetzen senden",backToSignIn:"Zurck zur Anmeldung",registrationSuccessTitle:"Registrierung erfolgreich!",registrationSuccessBody:"Wir haben dir eine E-Mail mit Anweisungen zur Einrichtung deines Passworts gesendet. Bitte prfe deinen Posteingang und folge dem Link, um die Registrierung abzuschlieen.",goToSignIn:"Zur Anmeldung",completeVerification:"Bitte Verifizierung abschlieen",captchaFailed:"Verifizierung fehlgeschlagen. Bitte erneut versuchen.",invalidCredentials:"Ungltige E-Mail oder Passwort",emailNotConfirmed:"Bitte besttige deine E-Mail, bevor du dich anmeldest",resetEmailSent:"E-Mail zum Zurcksetzen des Passworts gesendet! Bitte Posteingang prfen.",resetEmailFailed:"Senden der E-Mail zum Zurcksetzen fehlgeschlagen",unexpectedError:"Ein Fehler ist aufgetreten",logoutSuccess:"Du wurdest abgemeldet",adminRegistrationDisabled:"Admin-Konten knnen nicht ber die Website erstellt werden. Bitte kontaktiere einen Administrator.",invalidDomain:"Nur Frankfurt School E-Mail-Adressen (@fs-students.de oder @fs.de) sind erlaubt",userExists:"Ein Konto mit dieser E-Mail existiert bereits. Bitte melde dich an.",registrationFailed:"Registrierung fehlgeschlagen. Bitte versuche es erneut.",welcomeBack:"Willkommen zurck!",loading:"Ldt...",setupNote:"Nach der Registrierung erhltst du eine E-Mail zur Einrichtung deines Passworts.",rateLimited:"Zu viele Versuche. Bitte warte einen Moment und versuche es erneut.",networkError:"Netzwerkfehler. Bitte berprfe deine Verbindung und versuche es erneut.",sessionExpired:"Deine Sitzung ist abgelaufen. Bitte melde dich erneut an.",weakPassword:"Passwort ist zu schwach. Bitte whle ein strkeres Passwort."},leaderboard:{cumulativePnl:"Kumulierte P&L %",title:"Bestenliste",hti:"Hack the Interview",adx:"Axe the DAX",tabHti:"HTI",tabAdx:"ADX",signIn:"Anmelden",signUp:"Registrieren",email:"E-Mail",password:"Passwort",loginCta:"Tritt der FS Quant & Data Science Community bei",needAccount:"Noch kein Konto?",alreadyRegistered:"Bereits registriert?",emailVerificationSent:"Besttigungs-E-Mail gesendet! Prfe deinen Posteingang.",invalidCredentials:"Ungltige E-Mail oder Passwort",locked:"Zum Teilnehmen anmelden",leaderboard:"Bestenliste",rank:"Rang",player:"Spieler",score:"Punkte",points:"Punkte",questionNumber:"F",countdown:"Verfgbar in",correctAnswer:"Richtig! Gut gemacht!",wrongAnswer:"Falsch. Versuche es nchstes Mal wieder!",alreadyAnswered:"Du hast diese Frage bereits beantwortet",questionLocked:"Diese Frage ist noch nicht verfgbar",portfolio:"Portfolio",myEquity:"Kapital",positions:"Positionen",orderSuccess:"Order erfolgreich platziert!",orderFailed:"Order konnte nicht platziert werden",disclaimer:"Dies ist eine simulierte Handelsumgebung nur fr Bildungszwecke.",optionsNote:"Optionsdaten werden zu Demonstrationszwecken generiert. Echter Handel birgt erhebliche Risiken.",lastUpdated:"Zuletzt aktualisiert",seasonInfo:"Saison-Information"},admin:{title:"Admin-Bereich",questions:"Fragen",tickers:"Ticker",revenue:"Umsatzfenster",badges:"Abzeichen",seasons:"Saisons",createQuestion:"Frage erstellen",editQuestion:"Frage bearbeiten",questionText:"Fragetext",questionType:"Fragetyp",releaseTime:"Freigabezeit",closeTime:"Schliezeit",isActive:"Aktiv",addTicker:"Ticker hinzufgen",symbol:"Symbol",companyName:"Firmenname",band:"Band",top5:"Top 5",bottom5:"Bottom 5"},events:{types:{workshop:"Workshop",speaker:"Vortrag",competition:"Wettbewerb",meetup:"Treffen",conference:"Konferenz",exclusive:"Exklusiv"},title:"Veranstaltungen",calendar:"Veranstaltungskalender",upcoming:"Kommende Veranstaltungen",past:"Vergangene Veranstaltungen",pastCollaborations:"Vergangene erfolgreiche Kooperationen",pastCollaborationsDescription:"Wir haben mit fhrenden Unternehmen zusammengearbeitet, um unseren Mitgliedern reale Projekte, Mentoring und Karrieremglichkeiten zu bieten.",newEventsComingSoon:"* Neue Veranstaltungen werden bald bekannt gegeben",register:"Anmelden",addToCalendar:"Zum Kalender hinzufgen",location:"Ort",date:"Datum",time:"Zeit",organizer:"Veranstalter",capacity:"Kapazitt",noEvents:"Derzeit keine bevorstehenden Veranstaltungen"},members:{title:"Team",subtitle:"Lerne das Team hinter FS Quant & Data Science kennen",facultyAdvisorsTitle:"Fakulttsberater",orgaTeamTitle:"Orga Team",position:"Position",department:"Abteilung",expertise:"Expertise",email:"E-Mail",linkedin:"LinkedIn"},projects:{title:"Projekte",current:"Aktuelle Projekte",completed:"Abgeschlossene Projekte",viewDetails:"Details anzeigen",technologies:"Technologien",team:"Team",duration:"Dauer",status:"Status"},footer:{about:"ber uns",quickLinks:"Schnelllinks",connect:"Verbinden",copyright:" 2025 FS Quant & Data Science. Alle Rechte vorbehalten.",privacy:"Datenschutz",terms:"Nutzungsbedingungen"},home:{heroSubtitle:"Willkommen!",heroDescription:"Entdecke mit uns die Schnittstelle zwischen Quantitative Finance, Data Science und modernster Technologie.",cta:{applyNow:"Jetzt bewerben",learnMore:"Mehr erfahren"},lab:{title:"Unser Applied Quant Lab",description:"Unser Quant Lab ist ein praxisnahes Studio, in dem Studierende Modelle bauen, Handelsideen testen und Datenprodukte entwickeln. Wir verbinden Finance, Statistik und Software Engineering in iterativen Sprints  mit Peer Reviews, reproduzierbaren Workflows und einem Demo-Day-Finale."},features:{projectSprint:{title:"Semesterlanger Projektsprint",description:"Kleine Studierendenteams bearbeiten reale Daten- oder Quant-Probleme mit einem festen Zeitplan, der agilen Zyklen in der Industrie entspricht."},biweeklyMeetings:{title:"Zweiwchentliche Online-Meetings",description:"Regelmige initiativweite Meetings auf Teams fr Zusammenarbeit, Ressourcenaustausch und Community-Aufbau in dedizierten Kanlen."},demoDay:{title:"Demo Day Finale",description:"Teams pitchen vor einer Industrie-Jury. Das Top-Projekt gewinnt Preise, Coffee Chats mit Juroren und Empfehlungen fr Praktika/Jobs."}},metrics:{activeMembers:"Aktive Mitglieder",projectsCompleted:"Abgeschlossene Projekte",eventsHosted:"Veranstaltungen",industryPartners:"Industriepartner"}},contact:{title:"Kontakt aufnehmen",subtitle:"Hast du Fragen oder mchtest unserer Initiative beitreten? Wir freuen uns von dir zu hren!",joinTitle:"Unserer Initiative beitreten",joinDescription:"Werde Teil der fhrenden Quant- und Data-Science-Community der Frankfurt School",form:{name:"Name",email:"E-Mail",message:"Nachricht",submit:"Absenden"},success:"Danke fr deine Nachricht  wir melden uns bald bei dir!"},projectsTitle:"Projekte",projectsSubtitle:"Entdecke unser Portfolio an Data Science und Quantitative Finance Projekten",eventsTitle:"Veranstaltungen",eventsSubtitle:"Bleibe auf dem Laufenden ber kommende Workshops, Wettbewerbe und Networking-Events mit unseren Industriepartnern.",noUpcomingEvents:"Momentan keine bevorstehenden Veranstaltungen. Schau bald wieder vorbei!",battleground:{trading:"Handel",predictions:"Prognosen",portfolio:"Portfolio",riskWarningTitle:"Keine Anlageberatung  Risikohinweis",riskWarningText:"Die Inhalte und Simulationen auf dieser Seite dienen ausschlielich Bildungszwecken und stellen keine Anlageberatung, Rechts-, Steuer- oder sonstige Beratung dar; sie sind weder Empfehlung noch Aufforderung zum Erwerb oder Verkauf von Finanzinstrumenten. Mrkte beinhalten Risiken; der Handel mit Optionen und Derivaten ist hochspekulativ und kann zum vollstndigen Verlust des eingesetzten Kapitals fhren. Vergangene Wertentwicklungen sind kein verlsslicher Indikator fr zuknftige Ergebnisse. Daten, Preise und Modelloutputs knnen verzgert, simuliert oder ungenau sein; es wird keine Gewhr fr Vollstndigkeit, Aktualitt oder Richtigkeit bernommen. Diese studentische Initiative ist weder Broker/Dealer noch Anlageberater. Fhren Sie stets eigene Recherchen durch und ziehen Sie vor Anlageentscheidungen eine qualifizierte Beratung in Betracht."}},Za="https://mskpxebbscvisxcceiwx.supabase.co",Ja=Za,ei=lt(Za,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}},db:{schema:"public"}}),ti=Object.freeze(Object.defineProperty({__proto__:null,SUPABASE_URL:Ja,supabase:ei},Symbol.toStringTag,{value:"Module"})),ni={en:Qa,de:Xa},ri=Je.createContext(void 0);function si({children:e}){const[t,n]=Je.useState("en");Je.useEffect(()=>{const e=localStorage.getItem("lang");if(!e||"en"!==e&&"de"!==e){const e=navigator.language.startsWith("de")?"de":"en";n(e),localStorage.setItem("lang",e)}else n(e)},[]);return X.jsx(ri.Provider,{value:{language:t,setLanguage:async e=>{n(e),localStorage.setItem("lang",e);const{data:{user:t}}=await ei.auth.getUser();t&&await ei.from("user_profiles").update({language:e}).eq("user_id",t.id)},t:(e,n)=>{try{let r;if(e.includes(".")){const n=e.split(".");r=ni[t];for(const t of n){if(!r||"object"!=typeof r||!(t in r)){r=ni.en;for(const t of n){if(!r||"object"!=typeof r||!(t in r))return e;r=r[t]}break}r=r[t]}}else r=ni[t][e]||ni.en[e];if("string"!=typeof r)return e;if(n&&r){let e=r;return Object.entries(n).forEach(([t,n])=>{e=e.replace(new RegExp(`\\{${t}\\}`,"g"),String(n))}),e}return r||e}catch(r){return e}}},children:e})}function ai(){const e=Je.useContext(ri);if(!e)throw new Error("useI18n must be used within an I18nProvider");return e}const ii=Je.createContext(void 0);function oi({children:e}){const[t,n]=Je.useState(null),[r,s]=Je.useState(null),[a,i]=Je.useState(!1),[o,l]=Je.useState(!0),c=Je.useRef(!1),d=async e=>{try{const{data:t}=await ei.from("user_profiles").select("is_admin").eq("user_id",e).single();return i((null==t?void 0:t.is_admin)||!1),(null==t?void 0:t.is_admin)||!1}catch(t){return i(!1),!1}},u=async()=>{try{const{data:{session:e},error:t}=await ei.auth.refreshSession();if(t)throw t;e&&(s(e),n(e.user),await d(e.user.id),localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:e,expiresAt:e.expires_at})))}catch(e){}};Je.useEffect(()=>{let e=!0,t=!1;let a;(async()=>{if(!t){t=!0;try{const{data:{session:t}}=await ei.auth.getSession();t&&e?(s(t),n(t.user),await d(t.user.id)):e&&(s(null),n(null),i(!1),localStorage.removeItem("supabase.auth.token"))}catch(r){e&&(s(null),n(null),i(!1))}finally{e&&l(!1)}}})();const{data:o}=ei.auth.onAuthStateChange(async(t,o)=>{e&&(clearTimeout(a),a=setTimeout(async()=>{e&&(o?(null==r?void 0:r.access_token)!==o.access_token&&(s(o),n(o.user),await d(o.user.id)):"SIGNED_OUT"===t&&(s(null),n(null),i(!1),localStorage.removeItem("supabase.auth.token"),c.current?(Ga.success("You have been logged out"),c.current=!1):Ga.error("Your session has expired. Please sign in again.")))},100))}),m=setInterval(()=>{if(r&&e){new Date(r.expires_at||0).getTime()-(new Date).getTime()<3e5&&u()}},6e4);return()=>{e=!1,clearTimeout(a),null==o||o.subscription.unsubscribe(),clearInterval(m)}},[]);const m={user:t,session:r,isAdmin:a,loading:o,signIn:async(e,t)=>{try{const{data:n,error:r}=await ei.auth.signInWithPassword({email:e,password:t});if(r)throw r;return n.session&&localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:n.session,expiresAt:n.session.expires_at})),{error:null}}catch(n){return{error:n}}},signUp:async(e,t,n)=>{try{const{data:r,error:s}=await ei.auth.signUp({email:e,password:t,options:{data:{username:n||e.split("@")[0]}}});if(s)throw s;return{error:null}}catch(r){return{error:r}}},signOut:async()=>{try{c.current=!0,n(null),s(null),i(!1),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-mskpxebbscvisxcceiwx-auth-token"),localStorage.removeItem("authMode"),localStorage.removeItem("confetti_shown"),sessionStorage.clear();const{error:e}=await ei.auth.signOut();setTimeout(()=>{window.location.href="/"},100)}catch(e){Ga.error("Error signing out"),n(null),s(null),i(!1)}},refreshSession:u};return X.jsx(ii.Provider,{value:m,children:e})}function li(){const e=Je.useContext(ii);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const ci=({features:e})=>X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((e,t)=>X.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200 hover:shadow-xl transition-shadow",children:[X.jsx("div",{className:`w-12 h-12 ${e.iconBgColor} rounded-full flex items-center justify-center mb-4`,children:X.jsx("i",{className:`fas ${e.icon} ${e.iconTextColor} text-xl`})}),X.jsx("h3",{className:"font-inter text-xl font-semibold mb-2 text-gray-800",children:e.title}),X.jsx("p",{className:"text-gray-600",children:e.description})]},t))});function di(){const e=[{src:"/ADX_intro.png",title:"ADX Introduction",caption:"Overview of the Axe the DAX sandbox platform"},{src:"/AXE_options_catalog.png",title:"Options Catalogue",caption:"Explore strikes, expiries, and pricing"},{src:"/ADX_active_positions.png",title:"Active Positions",caption:"Manage open positions and risk at a glance"},{src:"/ADX_portfolio_perf.png",title:"Portfolio Performance",caption:"Track P&L and performance over time"},{src:"/HTI_intro.png",title:"HTI Overview",caption:"Hack the Interview: weekly questions, timed and scored"}],[t,n]=Je.useState(0);Je.useEffect(()=>{const t=setInterval(()=>n(t=>(t+1)%e.length),9e3);return()=>clearInterval(t)},[]);const r=Je.useCallback(()=>n(t=>(t-1+e.length)%e.length),[]),s=Je.useCallback(()=>n(t=>(t+1)%e.length),[]),a=Je.useCallback(e=>{"ArrowLeft"===e.key&&r(),"ArrowRight"===e.key&&s()},[r,s]);return X.jsxs("div",{className:"relative w-full max-w-6xl mx-auto overflow-hidden rounded-lg md:rounded-xl border border-gray-200 shadow-sm bg-white max-h-[720px] md:max-h-[800px]",style:{aspectRatio:16/9},tabIndex:0,role:"region","aria-label":"Image carousel",onKeyDown:a,children:[e.map((e,n)=>X.jsxs("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity duration-500 "+(n===t?"opacity-100":"opacity-0"),children:[X.jsx("img",{src:e.src,alt:e.title,className:"max-w-full max-h-full select-none",draggable:!1,decoding:"async",loading:0===n?"eager":"lazy",style:{imageRendering:"auto"}}),X.jsxs("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3 max-w-[80%] rounded-md px-2 py-1 sm:px-3 sm:py-1.5 backdrop-blur bg-black/40 text-white",children:[X.jsx("div",{className:"text-[10px] sm:text-xs font-semibold leading-tight",children:e.title}),X.jsx("div",{className:"hidden sm:block text-[11px] opacity-90 leading-tight",children:e.caption})]})]},e.src+n)),X.jsx("button",{type:"button",onClick:r,"aria-label":"Previous slide",className:"absolute left-2 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-9 h-9 rounded-full bg-white/80 hover:bg-white shadow border border-gray-200",children:X.jsx(Tn,{className:"w-5 h-5 text-gray-700"})}),X.jsx("button",{type:"button",onClick:s,"aria-label":"Next slide",className:"absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-9 h-9 rounded-full bg-white/80 hover:bg-white shadow border border-gray-200",children:X.jsx(Mn,{className:"w-5 h-5 text-gray-700"})}),X.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2",children:e.map((e,r)=>X.jsx("button",{onClick:()=>n(r),"aria-label":`Go to slide ${r+1}`,className:"w-2.5 h-2.5 rounded-full "+(r===t?"bg-blue-600":"bg-white/70 border border-gray-300")},r))})]})}const ui=()=>{const{t:e}=ai(),t=[{icon:"fa-project-diagram",iconBgColor:"bg-blue-500",iconTextColor:"text-white",title:e("home.features.projectSprint.title"),description:e("home.features.projectSprint.description")},{icon:"fa-users",iconBgColor:"bg-indigo-500",iconTextColor:"text-white",title:e("home.features.biweeklyMeetings.title"),description:e("home.features.biweeklyMeetings.description")},{icon:"fa-trophy",iconBgColor:"bg-amber-500",iconTextColor:"text-white",title:e("home.features.demoDay.title"),description:e("home.features.demoDay.description")}];return e("home.metrics.activeMembers"),e("home.metrics.projectsCompleted"),e("home.metrics.eventsHosted"),e("home.metrics.industryPartners"),X.jsxs("section",{id:"home",className:"min-h-screen bg-white",children:[X.jsx("div",{className:"relative bg-gradient-to-r from-blue-50 to-indigo-50",children:X.jsx("div",{className:"mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8 relative z-10",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[X.jsxs("div",{children:[X.jsx("h1",{className:"font-inter text-4xl md:text-5xl font-bold mb-4 text-gray-800",children:e("home.heroSubtitle")}),X.jsx("p",{className:"text-lg mb-8 text-gray-600",children:e("home.heroDescription")})]}),X.jsx("div",{className:"hidden lg:block",children:X.jsx("div",{className:"relative h-80 w-full rounded-lg bg-white p-6 shadow-lg border border-gray-200",children:X.jsx("div",{className:"flex items-center justify-center h-full",children:X.jsx("img",{src:"/fsqds-hero.png",alt:"FS Quant & Data Science Initiative",className:"max-h-full max-w-full object-contain"})})})})]})})}),X.jsx("div",{className:"bg-white",children:X.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10",children:[X.jsx("div",{className:"rounded-2xl p-[2px] bg-gradient-to-r from-gray-200/70 to-gray-300/70 shadow-lg",children:X.jsxs("div",{className:"rounded-2xl bg-white/90 backdrop-blur-sm p-6 sm:p-7 text-center ring-1 ring-gray-100/80",children:[X.jsxs("div",{className:"text-lg md:text-xl font-inter font-semibold text-gray-900 flex items-center justify-center gap-2",children:[X.jsx("span",{children:"FS QDS Battleground is LIVE! Join now."}),X.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-50 border border-red-200 text-[10px] font-semibold text-red-700",children:[X.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse"}),"LIVE"]})]}),X.jsx("p",{className:"mt-2 text-gray-600",children:"Thank you for your interest. Applications for WS25 are closed."}),X.jsx("div",{className:"mt-4",children:X.jsx(Gr,{href:"/battleground",className:"inline-flex items-center px-4 py-2 rounded-md bg-[#0B3D91] text-white hover:bg-[#082D69] transition-colors",children:"Launch Battleground"})})]})}),X.jsx("div",{className:"mt-6",children:X.jsx(di,{})})]})}),X.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("home.lab.title")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("home.lab.description")})]}),X.jsx(ci,{features:t})]})]})},mi=({member:e,variant:t="large",className:n=""})=>"large"===t?X.jsxs("div",{className:`bg-white rounded-xl border border-neutral-200 shadow-sm hover:shadow-md transition-all hover:-translate-y-[1px] ${n}`,children:[X.jsxs("div",{className:"w-full h-72 md:h-80 bg-neutral-100 relative overflow-hidden",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover",style:{objectPosition:"paul-wentzel"===(null==e?void 0:e.id)?"50% 30%":"50% 10%"}}):X.jsx("div",{className:"flex items-center justify-center w-full h-full",children:X.jsx("div",{className:"text-6xl font-semibold text-neutral-400",children:e.name.charAt(0)})}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/5 to-transparent pointer-events-none"})]}),X.jsxs("div",{className:"p-6",children:[X.jsx("h4",{className:"font-inter text-2xl font-semibold tracking-tight text-neutral-900",children:e.linkedin?X.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-[#0B3D91] hover:underline",children:e.name}):e.name}),X.jsx("div",{className:"mt-1 text-[#0B3D91] font-medium",children:e.position}),Array.isArray(e.subtitle)?e.subtitle.map((e,t)=>X.jsx("p",{className:"mt-1 text-neutral-700 "+(t>=1?"text-xs":"text-sm"),children:e},t)):e.subtitle&&X.jsx("p",{className:"mt-1 text-neutral-700 text-sm",children:e.subtitle}),e.classOf&&X.jsx("p",{className:"text-neutral-600 text-sm",children:e.classOf}),e.bio&&X.jsx("p",{className:"mt-3 text-neutral-700 text-sm whitespace-pre-line",children:e.bio}),Array.isArray(e.bullets)&&e.bullets.length>0&&X.jsxs("div",{className:"mt-3",children:[e.bulletsLabel&&X.jsx("div",{className:"text-sm font-medium text-neutral-800 mb-1",children:e.bulletsLabel}),X.jsx("ul",{className:"list-disc list-inside text-neutral-700 text-sm space-y-1",children:e.bullets.map((e,t)=>X.jsx("li",{children:e},t))})]}),X.jsx("div",{className:"mt-4 h-px bg-neutral-200"}),X.jsx("div",{className:"mt-4 flex items-center space-x-3",children:e.email&&X.jsxs("a",{href:`mailto:${e.email}`,className:"inline-flex items-center text-neutral-600 hover:text-[#0B3D91] transition-colors",children:[X.jsx("i",{className:"fas fa-envelope mr-2"}),X.jsx("span",{className:"text-sm",children:"Contact"})]})})]})]}):"medium"===t?X.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border border-gray-200 ${n}`,children:X.jsxs("div",{className:"flex flex-col items-center",children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-24 h-24 rounded-full object-cover mb-4"}):X.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center mb-4 text-2xl font-bold text-gray-500",children:e.name.charAt(0)}),X.jsx("h4",{className:"font-inter text-lg font-semibold mb-1 text-center text-gray-800",children:e.name}),X.jsx("p",{className:"text-blue-600 text-sm font-medium mb-2 text-center",children:e.position||e.role}),X.jsx("p",{className:"text-gray-600 text-sm text-center",children:e.bio})]})}):X.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-4 flex flex-col items-center border border-gray-200 ${n}`,children:[e.image?X.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-full object-cover mb-2"}):X.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center mb-2 text-lg font-bold text-gray-500",children:e.name.charAt(0)}),X.jsx("h4",{className:"font-inter text-sm font-semibold mb-0.5 text-center text-gray-800",children:e.name}),X.jsx("p",{className:"text-gray-600 text-xs text-center",children:e.department})]}),hi=()=>{const{t:e}=ai();return X.jsx("section",{id:"members",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("members.title")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("members.subtitle")})]}),X.jsxs("div",{className:"mb-12",children:[X.jsx("h3",{className:"text-2xl font-inter font-semibold mb-6 text-gray-800 text-center",children:e("members.orgaTeamTitle")}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[{id:"kartik-yadav",name:"Kartik Yadav",position:"Head",department:"FS Quant & Data Science Initiative",subtitle:["Master of Finance","Founder QDS & Battleground"],classOf:"Class of 2026",image:"/kartik.jpg",email:"kartik.yadav@fs-students.de",expertise:["Machine Learning","Quantitative Finance","Data Engineering"]},{id:"paul-wentzel",name:"Paul Wentzel",position:"Head",department:"FS Quant & Data Science Initiative",subtitle:"Bachelor in Business Administration",classOf:"Class of 2028",image:"/paul.jpeg",email:"paul.wentzel@fs-students.de",expertise:["Statistical Analysis","Risk Management","Python"],linkedin:"https://www.linkedin.com/in/paul-wentzel"}].map(e=>X.jsx(mi,{member:e,variant:"large"},e.id))})]}),X.jsxs("div",{className:"mb-12",children:[X.jsx("h3",{className:"text-2xl font-inter font-semibold mb-6 text-gray-800 text-center",children:e("members.facultyAdvisorsTitle")}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[{id:"grigory-vilkov",name:"Prof. Dr. Grigory Vilkov",position:"Professor of Finance at FS",image:"/drvilkov.jpg",bulletsLabel:"Research Agenda",bullets:["Deep learning and parametric portfolios.","Automatic feature discovery for conditional alpha modeling."],email:"g.vilkov@fs.de"},{id:"uwe-wystup",name:"Prof. Dr. Uwe Wystup",position:"Founder & Managing Director at MathFinance",image:"/drwystup.jpg",bullets:["Honorary Professor for Quantitative Finance at FS","Specializes in expert reports, conflict resolution (derivatives), training, structuring, independent valuation."],email:"uwe.wystup@mathfinance.com"}].map(e=>X.jsx(mi,{member:e,variant:"large"},e.id))})]})]})})},fi=()=>{const{t:e}=ai(),[t,n]=Je.useState("all"),r=[{id:"risk-modeling",title:"Credit Risk Modeling with ML",description:"Developing advanced machine learning models for credit risk assessment using real banking data.",status:"current",type:"industry",teamSize:5,technologies:["Python","TensorFlow","XGBoost","SQL"],partner:"Commerzbank",duration:"3 months"},{id:"portfolio-opt",title:"Portfolio Optimization Engine",description:"Building a quantitative portfolio optimization system using modern portfolio theory and factor models.",status:"current",type:"industry",teamSize:4,technologies:["Python","NumPy","Pandas","CVXPY"],partner:"DWS Group",duration:"3 months"},{id:"nlp-sentiment",title:"Financial News Sentiment Analysis",description:"NLP-based sentiment analysis of financial news to predict market movements.",status:"showcase",type:"research",teamSize:6,technologies:["BERT","PyTorch","Hugging Face","AWS"],achievements:["92% accuracy","Real-time processing"],duration:"4 months"},{id:"fraud-detection",title:"Real-time Fraud Detection System",description:"Anomaly detection system for identifying fraudulent transactions in real-time.",status:"showcase",type:"industry",teamSize:5,technologies:["Apache Kafka","Spark","scikit-learn","Docker"],partner:"EY",achievements:["99.2% precision","<100ms latency"],duration:"3 months"}].filter(e=>"all"===t||("current"===t?"current"===e.status:"showcase"===t?"showcase"===e.status:"industry"!==t||"industry"===e.type));return X.jsx("section",{id:"projects",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("projectsTitle")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("projectsSubtitle")})]}),X.jsx("div",{className:"flex flex-wrap justify-center mb-12 gap-3",children:[{key:"all",label:"All Projects",icon:"fa-th"},{key:"current",label:"Current Sprint",icon:"fa-clock"},{key:"showcase",label:"Showcase",icon:"fa-trophy"},{key:"industry",label:"Industry Partners",icon:"fa-handshake"}].map(e=>X.jsxs("button",{className:"px-5 py-2.5 rounded-full font-medium transition-all duration-200 flex items-center gap-2 "+(t===e.key?"bg-blue-600 text-white shadow-lg scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300"),onClick:()=>n(e.key),children:[X.jsx("i",{className:`fas ${e.icon} text-sm`}),e.label]},e.key))}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:r.map(e=>X.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200 hover:shadow-xl transition-shadow",children:[X.jsxs("div",{className:"flex justify-between items-start mb-4",children:[X.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e.title}),X.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("current"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:"current"===e.status?"Active":"Completed"})]}),X.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),e.partner&&X.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[X.jsx("i",{className:"fas fa-building text-gray-400"}),X.jsx("span",{className:"text-sm text-gray-700 font-medium",children:e.partner})]}),X.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx("i",{className:"fas fa-users text-gray-400"}),X.jsxs("span",{children:[e.teamSize," members"]})]}),X.jsxs("div",{className:"flex items-center gap-1",children:[X.jsx("i",{className:"fas fa-calendar text-gray-400"}),X.jsx("span",{children:e.duration})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.technologies.map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e},t))}),e.achievements&&X.jsx("div",{className:"pt-4 border-t border-gray-200",children:X.jsx("div",{className:"flex flex-wrap gap-3",children:e.achievements.map((e,t)=>X.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[X.jsx("i",{className:"fas fa-check-circle"}),X.jsx("span",{children:e})]},t))})})]},e.id))}),X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-8 mb-16 border border-blue-200",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-6 text-center text-gray-800",children:"How Our Project Sprints Work"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-rocket text-blue-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Project Kickoff"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Teams form and receive real datasets and problem statements from industry partners."})]}),X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-code text-indigo-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Sprint Development"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Bi-weekly check-ins, mentorship sessions, and collaborative problem-solving on Teams."})]}),X.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[X.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:X.jsx("i",{className:"fas fa-trophy text-amber-600 text-xl"})}),X.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Demo Day"}),X.jsx("p",{className:"text-gray-600 text-sm",children:"Teams present to industry jury. Winners receive prizes and internship referrals."})]})]})]}),X.jsxs("div",{className:"text-center bg-white rounded-lg shadow-lg p-12 border border-gray-200",children:[X.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Join Our Next Project Sprint"}),X.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Be part of a team tackling real-world quant and data science challenges. Build your portfolio, gain industry experience, and compete for prizes."}),X.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[X.jsx("a",{href:"/contact",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Apply for Next Sprint"}),X.jsx("a",{href:"#",className:"px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Become a Partner"})]})]})]})})},pi=new Date,gi=e=>{const t=new Date(pi);return t.setDate(t.getDate()+e),t};gi(15),gi(18),gi(27),gi(35);const vi=e=>{const t=new Date(pi);return t.setDate(t.getDate()-e),t};vi(25),vi(40),vi(55),vi(70);const xi=e=>{const t=e=>e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",n=t(e.start),r=t(e.end),s=t(new Date);return`BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Data Science Student Initiative//NONSGML Calendar//EN\nCALSCALE:GREGORIAN\nBEGIN:VEVENT\nUID:${e.id}@dssi.frankfurt-school.de\nDTSTAMP:${s}\nDTSTART:${n}\nDTEND:${r}\nSUMMARY:${e.title}\nDESCRIPTION:${e.description||""}\nLOCATION:${e.location||""}\nORGANIZER:${e.organizer||"Data Science Student Initiative"}\nURL:${e.url||"https://dssi.frankfurt-school.de"}\nEND:VEVENT\nEND:VCALENDAR`},yi=e=>{const t=e=>e.toISOString().replace(/-|:|\.\d+/g,""),n=t(e.start),r=t(e.end);return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:e.title,dates:`${n}/${r}`,details:e.description||"",location:e.location||"",sf:"true",output:"xml"}).toString()}`},bi=Oa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),wi=Je.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?me:"button";return X.jsx(i,{className:Pa(bi({variant:t,size:n,className:e})),ref:a,...s})});wi.displayName="Button";const ji=({event:e})=>{var t;const{t:n}=ai(),r=(e=>{switch(e){case"workshop":return"bg-[#0B3D91] text-white";case"speaker":return"bg-[#00A6ED] text-white";case"competition":return"bg-[#FFC107] text-[#0B3D91]";case"meetup":return"bg-[#28A745] text-white";case"exclusive":return"bg-[#6B21A8] text-white";default:return"bg-neutral-500 text-white"}})(e.type),s=e&&e.date instanceof Date?e.date:new Date(e.date),a=Boolean(e.isTBA||e.tbaText),i=e.tbaText,o=a?"TBA":ot(s,"d"),l=a?(null==(t=null==i?void 0:i.match(/\((.+)\)/))?void 0:t[1])||"TBA":ot(s,"MMM"),c="startTime"in e?e.startTime:"time"in e?e.time:void 0,d="endTime"in e||"endTime"in e?e.endTime:void 0,u=e.image,m=u?(()=>{try{const e="/",t=u.startsWith("/")?u.slice(1):u;return e.endsWith("/")?`${e}${t}`:`${e}/${t}`}catch{return u}})():void 0,h=()=>{const e=c?new Date(`${s.toDateString()} ${c}`):new Date(s),t=d?new Date(`${s.toDateString()} ${d}`):c?new Date(e.getTime()+72e5):new Date(e.getTime()+864e5);return{start:e,end:t}},f=()=>{const{start:t,end:n}=h(),r={...e,start:t,end:n},s=xi(r),a=new Blob([s],{type:"text/calendar;charset=utf-8"}),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.setAttribute("download",`${e.title.replace(/\s+/g,"-")}.ics`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},p=()=>{const{start:t,end:n}=h(),r={...e,start:t,end:n};window.open(yi(r),"_blank")};return m?X.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-neutral-200 hover:shadow-md transition-all h-full",children:[X.jsxs("div",{className:"relative group",children:[X.jsx("img",{src:m,alt:e.title,className:"w-full aspect-[16/9] object-cover",onError:e=>{e.target.style.display="none"}}),X.jsx("div",{className:"absolute top-3 left-3",children:X.jsx("span",{className:`${r} text-xs px-2 py-1 rounded-full shadow-sm capitalize`,children:(()=>{const t=e.type||"",r=n(`events.types.${t}`);return r&&!r.startsWith("events.types.")?r:t.charAt(0).toUpperCase()+t.slice(1)})()})})]}),X.jsxs("div",{className:"p-4",children:[X.jsxs("div",{className:"flex items-center text-sm text-neutral-600 mb-2",children:[a?X.jsx("span",{className:"font-semibold text-neutral-900 mr-2",children:i||"TBA"}):X.jsxs(X.Fragment,{children:[X.jsxs("span",{className:"font-semibold text-neutral-900 mr-2",children:[l," ",o]}),X.jsx("i",{className:"far fa-clock mx-2 text-neutral-400"}),X.jsx("span",{children:c?d?`${c} - ${d}`:c:"All day"})]}),e.location&&X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"fas fa-map-marker-alt ml-4 mr-2 text-neutral-400"}),X.jsx("span",{children:e.location})]})]}),X.jsx("h3",{className:"font-inter text-lg font-semibold mb-2 text-neutral-900",children:e.title}),e.description&&X.jsx("p",{className:"text-neutral-700 text-sm mb-4",children:e.description}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs(wi,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:f,children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," iCal"]}),X.jsxs(wi,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:p,children:[X.jsx("i",{className:"fab fa-google mr-2"})," Google Calendar"]})]})]})]}):X.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-neutral-200 border-t-4 border-[#0B3D91] hover:shadow-md transition-all h-full",children:X.jsxs("div",{className:"flex items-stretch h-full",children:[X.jsxs("div",{className:"bg-[#0B3D91] text-white font-semibold p-4 text-center flex flex-col justify-center min-w-[90px] self-stretch",children:[X.jsx("span",{className:"text-2xl font-bold",children:o}),X.jsx("span",{className:"uppercase tracking-wide text-sm opacity-90",children:l})]}),X.jsxs("div",{className:"p-4 flex-1",children:[X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsx("h3",{className:"font-inter text-lg font-semibold mb-1 text-neutral-900",children:e.title}),X.jsx("span",{className:`${r} text-xs px-2 py-1 rounded-full`,children:(()=>{const t=e.type||"",r=n(`events.types.${t}`);return r&&!r.startsWith("events.types.")?r:t.charAt(0).toUpperCase()+t.slice(1)})()})]}),e.description&&X.jsx("p",{className:"text-neutral-700 text-sm mb-3",children:e.description}),X.jsxs("div",{className:"flex items-center text-sm text-neutral-600 mb-3",children:[a?X.jsx("span",{className:"font-semibold mr-2",children:i||"TBA"}):X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"far fa-clock mr-2"}),X.jsx("span",{children:c?d?`${c} - ${d}`:c:"All day"})]}),e.location&&X.jsxs(X.Fragment,{children:[X.jsx("i",{className:"fas fa-map-marker-alt ml-4 mr-2"}),X.jsx("span",{children:e.location})]})]}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs(wi,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:f,children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," iCal"]}),X.jsxs(wi,{variant:"outline",size:"sm",className:"text-neutral-700 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:p,children:[X.jsx("i",{className:"fab fa-google mr-2"})," Google Calendar"]})]})]})]})})};function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ki(e){var t=function(e,t){if("object"!=Ni(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ni(t)?t:t+""}function Si(e,t,n){return(t=ki(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach(function(t){Si(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Di(e,t){if(null==e)return{};var n,r,s=pt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ki(r.key),r)}}function Ai(e,t,n){return t&&Mi(e.prototype,t),n&&Mi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ci(e){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Oi=function(){return!!e})()}function Pi(e,t,n){return t=Ci(t),function(e,t){if(t&&("object"==Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gt(e)}(e,Oi()?Reflect.construct(t,n||[],Ci(e).constructor):t.apply(e,n))}function Ri(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}function Ii(e){if(Array.isArray(e))return e}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Fi(e,t){if(e){if("string"==typeof e)return Li(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Li(e,t):void 0}}function zi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ui(e,t){return Ii(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||Fi(e,t)||zi()}function Bi(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Bi(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function qi(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Bi(e))&&(r&&(r+=" "),r+=t);return r}var Wi=function(e,t,n,r,s,a,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,s,a,i,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};const Yi=nt(Wi);var Hi=function(){};function Vi(e,t){return void 0!==e[t]}function $i(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Gi(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Ki(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function Qi(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Gi.__suppressDeprecationWarning=!0,Ki.__suppressDeprecationWarning=!0,Qi.__suppressDeprecationWarning=!0;var Xi="milliseconds",Zi="seconds",Ji="minutes",eo="hours",to="day",no="week",ro="month",so="year",ao="decade",io="century",oo={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},lo={month:1,year:12,decade:120,century:1200};function co(e){return e%4==0&&e%100!=0||e%400==0?29:28}function uo(e,t,n){switch(e=new Date(e),n){case Xi:case Zi:case Ji:case eo:case to:case no:return function(e,t){var n=new Date(+e+t);return function(e,t){var n=e.getTimezoneOffset(),r=t.getTimezoneOffset();return new Date(+t+(r-n)*oo.minutes)}(e,n)}(e,t*oo[n]);case ro:case so:case ao:case io:return function(e,t){var n=e.getFullYear(),r=e.getMonth(),s=e.getDate(),a=12*n+r+t,i=Math.trunc(a/12),o=a%12,l=Math.min(s,function(e){return[31,co(e),31,30,31,30,31,31,30,31,30,31]}(i)[o]),c=new Date(e);return c.setFullYear(i),c.setDate(1),c.setMonth(o),c.setDate(l),c}(e,t*lo[n])}throw new TypeError('Invalid units: "'+n+'"')}function mo(e,t,n){return uo(e,-t,n)}function ho(e,t,n){switch(e=new Date(e),t){case io:case ao:case so:e=Mo(e,0);case ro:e=To(e,1);case no:case to:e=Eo(e,0);case eo:e=_o(e,0);case Ji:e=So(e,0);case Zi:e=ko(e,0)}return t===ao&&(e=mo(e,Ao(e)%10,"year")),t===io&&(e=mo(e,Ao(e)%100,"year")),t===no&&(e=Co(e,0,n)),e}function fo(e,t,n){switch(e=ho(e=new Date(e),t,n),t){case io:case ao:case so:case ro:case no:(e=mo(e=uo(e,1,t),1,to)).setHours(23,59,59,999);break;case to:e.setHours(23,59,59,999);break;case eo:case Ji:case Zi:e=mo(e=uo(e,1,t),1,Xi)}return e}var po=Po(function(e,t){return e===t}),go=Po(function(e,t){return e!==t}),vo=Po(function(e,t){return e>t}),xo=Po(function(e,t){return e>=t}),yo=Po(function(e,t){return e<t}),bo=Po(function(e,t){return e<=t});function wo(){return new Date(Math.min.apply(Math,arguments))}function jo(){return new Date(Math.max.apply(Math,arguments))}function No(e,t,n,r){return r=r||"day",(!t||xo(e,t,r))&&(!n||bo(e,n,r))}var ko=Oo("Milliseconds"),So=Oo("Seconds"),_o=Oo("Minutes"),Eo=Oo("Hours"),Do=Oo("Day"),To=Oo("Date"),Mo=Oo("Month"),Ao=Oo("FullYear");function Co(e,t,n){var r=(Do(e)+7-(n||0))%7;return void 0===t?r:uo(e,t-r,to)}function Oo(e){var t=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(n,r){if(void 0===r)return n["get"+e]();var s=new Date(n);return s["set"+e](r),t&&s["get"+e]()!=r&&("Hours"===e||r>=t&&s.getHours()-n.getHours()<Math.floor(r/t))&&s["set"+e](r+t),s}}function Po(e){return function(t,n,r){return e(+ho(t,r),+ho(n,r))}}const Ro=Object.freeze(Object.defineProperty({__proto__:null,add:uo,century:function(e,t){return void 0===t?Ao(ho(e,io)):uo(e,t+100,so)},date:To,day:Do,decade:function(e,t){return void 0===t?Ao(ho(e,ao)):uo(e,t+10,so)},diff:function(e,t,n,r){var s,a,i;switch(n){case Xi:case Zi:case Ji:case eo:case to:case no:s=t.getTime()-e.getTime();break;case ro:case so:case ao:case io:s=12*(Ao(t)-Ao(e))+Mo(t)-Mo(e);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case Xi:a=1;break;case Zi:a=1e3;break;case Ji:a=6e4;break;case eo:a=36e5;break;case to:a=864e5;break;case no:a=6048e5;break;case ro:a=1;break;case so:a=12;break;case ao:a=120;break;case io:a=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return i=s/a,r?i:Math.round(i)},endOf:fo,eq:po,gt:vo,gte:xo,hours:Eo,inRange:No,lt:yo,lte:bo,max:jo,milliseconds:ko,min:wo,minutes:_o,month:Mo,neq:go,seconds:So,startOf:ho,subtract:mo,weekday:Co,year:Ao},Symbol.toStringTag,{value:"Module"}));function Io(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Lo(e){return function(e){if(Array.isArray(e))return Li(e)}(e)||Io(e)||Fi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fo=bt,zo=wt,Uo=jt,Bo=Math.ceil,qo=Math.max;const Wo=nt(function(e,t,n){t=(n?zo(e,t,n):void 0===t)?1:qo(Uo(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var s=0,a=0,i=Array(Bo(r/t));s<r;)i[a++]=Fo(e,s,s+=t);return i});function Yo(e){return e&&e.ownerDocument||document}function Ho(e,t){return function(e){var t=Yo(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Vo=/([A-Z])/g;var $o=/^ms-/;function Go(e){return function(e){return e.replace(Vo,"-$1").toLowerCase()}(e).replace($o,"-ms-")}var Ko=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Qo(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(Go(t))||Ho(e).getPropertyValue(Go(t));Object.keys(t).forEach(function(s){var a=t[s];a||0===a?!function(e){return!(!e||!Ko.test(e))}(s)?n+=Go(s)+": "+a+";":r+=s+"("+a+") ":e.style.removeProperty(Go(s))}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}function Xo(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Zo(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function Jo(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(n,r){var s=Zo(n);if(void 0===r)return s?s[e]:n[t];s?s.scrollTo(s[e],r):n[t]=r}}const el=Jo("pageXOffset"),tl=Jo("pageYOffset");function nl(e){var t=Yo(e),n={top:0,left:0,height:0,width:0},r=t&&t.documentElement;return r&&Xo(r,e)?(void 0!==e.getBoundingClientRect&&(n=e.getBoundingClientRect()),n={top:n.top+tl(r)-(r.clientTop||0),left:n.left+el(r)-(r.clientLeft||0),width:n.width,height:n.height}):n}var rl=function(e){return!!e&&"offsetParent"in e};function sl(e,t){var n,r={top:0,left:0};if("fixed"===Qo(e,"position"))n=e.getBoundingClientRect();else{var s=t||function(e){for(var t=Yo(e),n=e&&e.offsetParent;rl(n)&&"HTML"!==n.nodeName&&"static"===Qo(n,"position");)n=n.offsetParent;return n||t.documentElement}(e);n=nl(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(s)&&(r=nl(s));var a=String(Qo(s,"borderTopWidth")||0);r.top+=parseInt(a,10)-tl(s)||0;var i=String(Qo(s,"borderLeftWidth")||0);r.left+=parseInt(i,10)-el(s)||0}var o=String(Qo(e,"marginTop")||0),l=String(Qo(e,"marginLeft")||0);return yt({},n,{top:n.top-r.top-(parseInt(o,10)||0),left:n.left-r.left-(parseInt(l,10)||0)})}const al=!("undefined"==typeof window||!window.document||!window.document.createElement);var il=(new Date).getTime();var ol="clearTimeout",ll=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-il)),r=setTimeout(e,n);return il=t,r},cl=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};al&&["","webkit","moz","o","ms"].some(function(e){var t=cl(e,"request");return t in window&&(ol=cl(e,"cancel"),ll=function(e){return window[t](e)}),!!ll});var dl,ul=function(e){"function"==typeof window[ol]&&window[ol](e)},ml=ll;function hl(e,t){if(!dl){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;dl=function(e,t){return r.call(e,t)}}return dl(e,t)}var fl=Function.prototype.bind.call(Function.prototype.call,[].slice);var pl=!1,gl=!1;try{var vl={get passive(){return pl=!0},get once(){return gl=pl=!0}};al&&(window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,!0))}catch(tj){}function xl(e){const t=function(e){const t=Je.useRef(e);return Je.useEffect(()=>{t.current=e},[e]),t}(e);return Je.useCallback(function(...e){return t.current&&t.current(...e)},[t])}function yl(){return Je.useState(null)}function bl(e){const t=function(){const e=Je.useRef(!0),t=Je.useRef(()=>e.current);return Je.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}();return[e[0],Je.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var wl="top",jl="bottom",Nl="right",kl="left",Sl="auto",_l=[wl,jl,Nl,kl],El="start",Dl="end",Tl="viewport",Ml="popper",Al=_l.reduce(function(e,t){return e.concat([t+"-"+El,t+"-"+Dl])},[]),Cl=[].concat(_l,[Sl]).reduce(function(e,t){return e.concat([t,t+"-"+El,t+"-"+Dl])},[]),Ol=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Pl(e){return e.split("-")[0]}function Rl(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Il(e){return e instanceof Rl(e).Element||e instanceof Element}function Ll(e){return e instanceof Rl(e).HTMLElement||e instanceof HTMLElement}function Fl(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Rl(e).ShadowRoot||e instanceof ShadowRoot)}var zl=Math.max,Ul=Math.min,Bl=Math.round;function ql(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Wl(){return!/^((?!chrome|android).)*safari/i.test(ql())}function Yl(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),s=1,a=1;t&&Ll(e)&&(s=e.offsetWidth>0&&Bl(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Bl(r.height)/e.offsetHeight||1);var i=(Il(e)?Rl(e):window).visualViewport,o=!Wl()&&n,l=(r.left+(o&&i?i.offsetLeft:0))/s,c=(r.top+(o&&i?i.offsetTop:0))/a,d=r.width/s,u=r.height/a;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Hl(e){var t=Yl(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Vl(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Fl(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function $l(e){return e?(e.nodeName||"").toLowerCase():null}function Gl(e){return Rl(e).getComputedStyle(e)}function Kl(e){return["table","td","th"].indexOf($l(e))>=0}function Ql(e){return((Il(e)?e.ownerDocument:e.document)||window.document).documentElement}function Xl(e){return"html"===$l(e)?e:e.assignedSlot||e.parentNode||(Fl(e)?e.host:null)||Ql(e)}function Zl(e){return Ll(e)&&"fixed"!==Gl(e).position?e.offsetParent:null}function Jl(e){for(var t=Rl(e),n=Zl(e);n&&Kl(n)&&"static"===Gl(n).position;)n=Zl(n);return n&&("html"===$l(n)||"body"===$l(n)&&"static"===Gl(n).position)?t:n||function(e){var t=/firefox/i.test(ql());if(/Trident/i.test(ql())&&Ll(e)&&"fixed"===Gl(e).position)return null;var n=Xl(e);for(Fl(n)&&(n=n.host);Ll(n)&&["html","body"].indexOf($l(n))<0;){var r=Gl(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function ec(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function tc(e,t,n){return zl(e,Ul(t,n))}function nc(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function rc(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}const sc={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,s=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,o=Pl(n.placement),l=ec(o),c=[kl,Nl].indexOf(o)>=0?"height":"width";if(a&&i){var d=function(e,t){return nc("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:rc(e,_l))}(s.padding,n),u=Hl(a),m="y"===l?wl:kl,h="y"===l?jl:Nl,f=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],p=i[l]-n.rects.reference[l],g=Jl(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=f/2-p/2,y=d[m],b=v-u[c]-d[h],w=v/2-u[c]/2+x,j=tc(y,w,b),N=l;n.modifiersData[r]=((t={})[N]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Vl(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ac(e){return e.split("-")[1]}var ic={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oc(e){var t,n=e.popper,r=e.popperRect,s=e.placement,a=e.variation,i=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,m=i.x,h=void 0===m?0:m,f=i.y,p=void 0===f?0:f,g="function"==typeof d?d({x:h,y:p}):{x:h,y:p};h=g.x,p=g.y;var v=i.hasOwnProperty("x"),x=i.hasOwnProperty("y"),y=kl,b=wl,w=window;if(c){var j=Jl(n),N="clientHeight",k="clientWidth";if(j===Rl(n)&&"static"!==Gl(j=Ql(n)).position&&"absolute"===o&&(N="scrollHeight",k="scrollWidth"),s===wl||(s===kl||s===Nl)&&a===Dl)b=jl,p-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[N])-r.height,p*=l?1:-1;if(s===kl||(s===wl||s===jl)&&a===Dl)y=Nl,h-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[k])-r.width,h*=l?1:-1}var S,_=Object.assign({position:o},c&&ic),E=!0===d?function(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:Bl(n*s)/s||0,y:Bl(r*s)/s||0}}({x:h,y:p},Rl(n)):{x:h,y:p};return h=E.x,p=E.y,l?Object.assign({},_,((S={})[b]=x?"0":"",S[y]=v?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+p+"px)":"translate3d("+h+"px, "+p+"px, 0)",S)):Object.assign({},_,((t={})[b]=x?p+"px":"",t[y]=v?h+"px":"",t.transform="",t))}const lc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=void 0===r||r,a=n.adaptive,i=void 0===a||a,o=n.roundOffsets,l=void 0===o||o,c={placement:Pl(t.placement),variation:ac(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,oc(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,oc(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var cc={passive:!0};const dc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,a=void 0===s||s,i=r.resize,o=void 0===i||i,l=Rl(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(e){e.addEventListener("scroll",n.update,cc)}),o&&l.addEventListener("resize",n.update,cc),function(){a&&c.forEach(function(e){e.removeEventListener("scroll",n.update,cc)}),o&&l.removeEventListener("resize",n.update,cc)}},data:{}};var uc={left:"right",right:"left",bottom:"top",top:"bottom"};function mc(e){return e.replace(/left|right|bottom|top/g,function(e){return uc[e]})}var hc={start:"end",end:"start"};function fc(e){return e.replace(/start|end/g,function(e){return hc[e]})}function pc(e){var t=Rl(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function gc(e){return Yl(Ql(e)).left+pc(e).scrollLeft}function vc(e){var t=Gl(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function xc(e){return["html","body","#document"].indexOf($l(e))>=0?e.ownerDocument.body:Ll(e)&&vc(e)?e:xc(Xl(e))}function yc(e,t){var n;void 0===t&&(t=[]);var r=xc(e),s=r===(null==(n=e.ownerDocument)?void 0:n.body),a=Rl(r),i=s?[a].concat(a.visualViewport||[],vc(r)?r:[]):r,o=t.concat(i);return s?o:o.concat(yc(Xl(i)))}function bc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wc(e,t,n){return t===Tl?bc(function(e,t){var n=Rl(e),r=Ql(e),s=n.visualViewport,a=r.clientWidth,i=r.clientHeight,o=0,l=0;if(s){a=s.width,i=s.height;var c=Wl();(c||!c&&"fixed"===t)&&(o=s.offsetLeft,l=s.offsetTop)}return{width:a,height:i,x:o+gc(e),y:l}}(e,n)):Il(t)?function(e,t){var n=Yl(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):bc(function(e){var t,n=Ql(e),r=pc(e),s=null==(t=e.ownerDocument)?void 0:t.body,a=zl(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),i=zl(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),o=-r.scrollLeft+gc(e),l=-r.scrollTop;return"rtl"===Gl(s||n).direction&&(o+=zl(n.clientWidth,s?s.clientWidth:0)-a),{width:a,height:i,x:o,y:l}}(Ql(e)))}function jc(e,t,n,r){var s="clippingParents"===t?function(e){var t=yc(Xl(e)),n=["absolute","fixed"].indexOf(Gl(e).position)>=0&&Ll(e)?Jl(e):e;return Il(n)?t.filter(function(e){return Il(e)&&Vl(e,n)&&"body"!==$l(e)}):[]}(e):[].concat(t),a=[].concat(s,[n]),i=a[0],o=a.reduce(function(t,n){var s=wc(e,n,r);return t.top=zl(s.top,t.top),t.right=Ul(s.right,t.right),t.bottom=Ul(s.bottom,t.bottom),t.left=zl(s.left,t.left),t},wc(e,i,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Nc(e){var t,n=e.reference,r=e.element,s=e.placement,a=s?Pl(s):null,i=s?ac(s):null,o=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case wl:t={x:o,y:n.y-r.height};break;case jl:t={x:o,y:n.y+n.height};break;case Nl:t={x:n.x+n.width,y:l};break;case kl:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?ec(a):null;if(null!=c){var d="y"===c?"height":"width";switch(i){case El:t[c]=t[c]-(n[d]/2-r[d]/2);break;case Dl:t[c]=t[c]+(n[d]/2-r[d]/2)}}return t}function kc(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=void 0===r?e.placement:r,a=n.strategy,i=void 0===a?e.strategy:a,o=n.boundary,l=void 0===o?"clippingParents":o,c=n.rootBoundary,d=void 0===c?Tl:c,u=n.elementContext,m=void 0===u?Ml:u,h=n.altBoundary,f=void 0!==h&&h,p=n.padding,g=void 0===p?0:p,v=nc("number"!=typeof g?g:rc(g,_l)),x=m===Ml?"reference":Ml,y=e.rects.popper,b=e.elements[f?x:m],w=jc(Il(b)?b:b.contextElement||Ql(e.elements.popper),l,d,i),j=Yl(e.elements.reference),N=Nc({reference:j,element:y,strategy:"absolute",placement:s}),k=bc(Object.assign({},y,N)),S=m===Ml?k:j,_={top:w.top-S.top+v.top,bottom:S.bottom-w.bottom+v.bottom,left:w.left-S.left+v.left,right:S.right-w.right+v.right},E=e.modifiersData.offset;if(m===Ml&&E){var D=E[s];Object.keys(_).forEach(function(e){var t=[Nl,jl].indexOf(e)>=0?1:-1,n=[wl,jl].indexOf(e)>=0?"y":"x";_[e]+=D[n]*t})}return _}const Sc={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,a=void 0===s||s,i=n.altAxis,o=void 0===i||i,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,m=n.altBoundary,h=n.flipVariations,f=void 0===h||h,p=n.allowedAutoPlacements,g=t.options.placement,v=Pl(g),x=l||(v===g||!f?[mc(g)]:function(e){if(Pl(e)===Sl)return[];var t=mc(e);return[fc(e),t,fc(t)]}(g)),y=[g].concat(x).reduce(function(e,n){return e.concat(Pl(n)===Sl?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=n.boundary,a=n.rootBoundary,i=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Cl:l,d=ac(r),u=d?o?Al:Al.filter(function(e){return ac(e)===d}):_l,m=u.filter(function(e){return c.indexOf(e)>=0});0===m.length&&(m=u);var h=m.reduce(function(t,n){return t[n]=kc(e,{placement:n,boundary:s,rootBoundary:a,padding:i})[Pl(n)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:p}):n)},[]),b=t.rects.reference,w=t.rects.popper,j=new Map,N=!0,k=y[0],S=0;S<y.length;S++){var _=y[S],E=Pl(_),D=ac(_)===El,T=[wl,jl].indexOf(E)>=0,M=T?"width":"height",A=kc(t,{placement:_,boundary:d,rootBoundary:u,altBoundary:m,padding:c}),C=T?D?Nl:kl:D?jl:wl;b[M]>w[M]&&(C=mc(C));var O=mc(C),P=[];if(a&&P.push(A[E]<=0),o&&P.push(A[C]<=0,A[O]<=0),P.every(function(e){return e})){k=_,N=!1;break}j.set(_,P)}if(N)for(var R=function(e){var t=y.find(function(t){var n=j.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},I=f?3:1;I>0;I--){if("break"===R(I))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _c(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ec(e){return[wl,Nl,jl,kl].some(function(t){return e[t]>=0})}const Dc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.offset,a=void 0===s?[0,0]:s,i=Cl.reduce(function(e,n){return e[n]=function(e,t,n){var r=Pl(e),s=[kl,wl].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],o=a[1];return i=i||0,o=(o||0)*s,[kl,Nl].indexOf(r)>=0?{x:o,y:i}:{x:i,y:o}}(n,t.rects,a),e},{}),o=i[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=i}};const Tc={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,a=void 0===s||s,i=n.altAxis,o=void 0!==i&&i,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,m=n.tether,h=void 0===m||m,f=n.tetherOffset,p=void 0===f?0:f,g=kc(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=Pl(t.placement),x=ac(t.placement),y=!x,b=ec(v),w="x"===b?"y":"x",j=t.modifiersData.popperOffsets,N=t.rects.reference,k=t.rects.popper,S="function"==typeof p?p(Object.assign({},t.rects,{placement:t.placement})):p,_="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(j){if(a){var T,M="y"===b?wl:kl,A="y"===b?jl:Nl,C="y"===b?"height":"width",O=j[b],P=O+g[M],R=O-g[A],I=h?-k[C]/2:0,L=x===El?N[C]:k[C],F=x===El?-k[C]:-N[C],z=t.elements.arrow,U=h&&z?Hl(z):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=B[M],W=B[A],Y=tc(0,N[C],U[C]),H=y?N[C]/2-I-Y-q-_.mainAxis:L-Y-q-_.mainAxis,V=y?-N[C]/2+I+Y+W+_.mainAxis:F+Y+W+_.mainAxis,$=t.elements.arrow&&Jl(t.elements.arrow),G=$?"y"===b?$.clientTop||0:$.clientLeft||0:0,K=null!=(T=null==E?void 0:E[b])?T:0,Q=O+V-K,X=tc(h?Ul(P,O+H-K-G):P,O,h?zl(R,Q):R);j[b]=X,D[b]=X-O}if(o){var Z,J="x"===b?wl:kl,ee="x"===b?jl:Nl,te=j[w],ne="y"===w?"height":"width",re=te+g[J],se=te-g[ee],ae=-1!==[wl,kl].indexOf(v),ie=null!=(Z=null==E?void 0:E[w])?Z:0,oe=ae?re:te-N[ne]-k[ne]-ie+_.altAxis,le=ae?te+N[ne]+k[ne]-ie-_.altAxis:se,ce=h&&ae?function(e,t,n){var r=tc(e,t,n);return r>n?n:r}(oe,te,le):tc(h?oe:re,te,h?le:se);j[w]=ce,D[w]=ce-te}t.modifiersData[r]=D}},requiresIfExists:["offset"]};function Mc(e,t,n){void 0===n&&(n=!1);var r,s,a=Ll(t),i=Ll(t)&&function(e){var t=e.getBoundingClientRect(),n=Bl(t.width)/e.offsetWidth||1,r=Bl(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=Ql(t),l=Yl(e,i,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(a||!a&&!n)&&(("body"!==$l(t)||vc(o))&&(c=(r=t)!==Rl(r)&&Ll(r)?{scrollLeft:(s=r).scrollLeft,scrollTop:s.scrollTop}:pc(r)),Ll(t)?((d=Yl(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=gc(o))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Ac(e){var t=new Map,n=new Set,r=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&s(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||s(e)}),r}var Cc={placement:"bottom",modifiers:[],strategy:"absolute"};function Oc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var Pc=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,s=t.defaultOptions,a=void 0===s?Cc:s;return function(e,t,n){void 0===n&&(n=a);var s,i,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cc,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:o,setOptions:function(n){var s="function"==typeof n?n(o.options):n;u(),o.options=Object.assign({},a,o.options,s),o.scrollParents={reference:Il(e)?yc(e):e.contextElement?yc(e.contextElement):[],popper:yc(t)};var i,c,m=function(e){var t=Ac(e);return Ol.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((i=[].concat(r,o.options.modifiers),c=i.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return o.orderedModifiers=m.filter(function(e){return e.enabled}),o.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var a=s({state:o,name:t,instance:d,options:r}),i=function(){};l.push(a||i)}}),d.update()},forceUpdate:function(){if(!c){var e=o.elements,t=e.reference,n=e.popper;if(Oc(t,n)){o.rects={reference:Mc(t,Jl(n),"fixed"===o.options.strategy),popper:Hl(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(e){return o.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var s=o.orderedModifiers[r],a=s.fn,i=s.options,l=void 0===i?{}:i,u=s.name;"function"==typeof a&&(o=a({state:o,options:l,name:u,instance:d})||o)}else o.reset=!1,r=-1}}},update:(s=function(){return new Promise(function(e){d.forceUpdate(),e(o)})},function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(s())})})),i}),destroy:function(){u(),c=!0}};if(!Oc(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,a=t.modifiersData.preventOverflow,i=kc(t,{elementContext:"reference"}),o=kc(t,{altBoundary:!0}),l=_c(i,r),c=_c(o,s,a),d=Ec(l),u=Ec(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Nc({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},lc,dc,Dc,Sc,Tc,sc]}),Rc=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Ic={name:"applyStyles",enabled:!1},Lc={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var s=(n.getAttribute("aria-describedby")||"").split(",").filter(function(e){return e.trim()!==r.id});s.length?n.setAttribute("aria-describedby",s.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,s=n.reference,a=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===a&&"setAttribute"in s){var i=s.getAttribute("aria-describedby");if(i&&-1!==i.split(",").indexOf(r.id))return;s.setAttribute("aria-describedby",i?i+","+r.id:r.id)}}},Fc=[];function zc(e,t,n,r){return function(e,t,n,r){if(r&&"boolean"!=typeof r&&!gl){var s=r.once,a=r.capture,i=n;!gl&&s&&(i=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=i),e.addEventListener(t,i,pl?r:a)}e.addEventListener(t,n,r)}(e,t,n,r),function(){!function(e,t,n,r){var s=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}(e,t,n,r)}}const Uc=nt(function(){});const Bc=function(e){return Yo(function(e){return e&&"setState"in e?rt.findDOMNode(e):null!=e?e:null}(e))};var qc=function(){};var Wc,Yc=function(e){return e&&("current"in e?e.current:e)};function Hc(e){var t,n,r,s,a,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,h=e.arrowElement,f=e.popperConfig,p=void 0===f?{}:f,g=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach(function(e){t[e.name]=e}),t):e||t}(p.modifiers);return yt({},p,{placement:l,enabled:i,strategy:u?"fixed":p.strategy,modifiers:(a=yt({},g,{eventListeners:{enabled:o},preventOverflow:yt({},g.preventOverflow,{options:m?yt({padding:m},null==(t=g.preventOverflow)?void 0:t.options):null==(n=g.preventOverflow)?void 0:n.options}),offset:{options:yt({offset:d},null==(r=g.offset)?void 0:r.options)},arrow:yt({},g.arrow,{enabled:!!h,options:yt({},null==(s=g.arrow)?void 0:s.options,{element:h})}),flip:yt({enabled:!!c},g.flip)}),void 0===a&&(a={}),Array.isArray(a)?a:Object.keys(a).map(function(e){return a[e].name=e,a[e]}))})}function Vc(e){if((!Wc&&0!==Wc||e)&&al){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Wc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Wc}var $c=function(e){var t;return"undefined"==typeof document?null:null==e?Yo().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function Gc(e,t){var n=Je.useState(function(){return $c(e)}),r=n[0],s=n[1];if(!r){var a=$c(e);a&&s(a)}return Je.useEffect(function(){},[t,r]),Je.useEffect(function(){var t=$c(e);t!==r&&s(t)},[e,r]),r}const Kc=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;function Qc(e,t){return Je.useMemo(()=>function(e,t){const n=Kc(e),r=Kc(t);return e=>{n&&n(e),r&&r(e)}}(e,t),[e,t])}var Xc=tt.forwardRef(function(e,t){var n=e.flip,r=e.offset,s=e.placement,a=e.containerPadding,i=void 0===a?5:a,o=e.popperConfig,l=void 0===o?{}:o,c=e.transition,d=yl(),u=d[0],m=d[1],h=yl(),f=h[0],p=h[1],g=Qc(m,t),v=Gc(e.container),x=Gc(e.target),y=Je.useState(!e.show),b=y[0],w=y[1],j=function(e,t,n){var r=void 0===n?{}:n,s=r.enabled,a=void 0===s||s,i=r.placement,o=void 0===i?"bottom":i,l=r.strategy,c=void 0===l?"absolute":l,d=r.modifiers,u=void 0===d?Fc:d,m=pt(r,["enabled","placement","strategy","modifiers"]),h=Je.useRef(),f=Je.useCallback(function(){var e;null==(e=h.current)||e.update()},[]),p=Je.useCallback(function(){var e;null==(e=h.current)||e.forceUpdate()},[]),g=bl(Je.useState({placement:o,update:f,forceUpdate:p,attributes:{},styles:{popper:Rc(c),arrow:{}}})),v=g[0],x=g[1],y=Je.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach(function(e){n[e]=t.styles[e],r[e]=t.attributes[e]}),x({state:t,styles:n,attributes:r,update:f,forceUpdate:p,placement:t.placement})}}},[f,p,x]);return Je.useEffect(function(){h.current&&a&&h.current.setOptions({placement:o,strategy:c,modifiers:[].concat(u,[y,Ic])})},[c,o,y,a]),Je.useEffect(function(){if(a&&null!=e&&null!=t)return h.current=Pc(e,t,yt({},m,{placement:o,strategy:c,modifiers:[].concat(u,[Lc,y])})),function(){null!=h.current&&(h.current.destroy(),h.current=void 0,x(function(e){return yt({},e,{attributes:{},styles:{popper:Rc(c)}})}))}},[a,e,t]),v}(x,u,Hc({placement:s,enableEvents:!!e.show,containerPadding:i||5,flip:n,offset:r,arrowElement:f,popperConfig:l})),N=j.styles,k=j.attributes,S=pt(j,["styles","attributes"]);e.show?b&&w(!1):e.transition||b||w(!0);var _,E,D,T,M,A,C,O,P,R,I,L,F=e.show||c&&!b;if(_=u,E=e.onHide,D={disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent},M=(T=void 0===D?{}:D).disabled,A=T.clickTrigger,C=void 0===A?"click":A,O=Je.useRef(!1),P=E||qc,R=Je.useCallback(function(e){var t,n,r=Yc(_);Uc(!!r,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),O.current=!(r&&(n=e,!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey))&&function(e){return 0===e.button}(e)&&!Xo(r,null!=(t=null==e.composedPath?void 0:e.composedPath()[0])?t:e.target))},[_]),I=xl(function(e){O.current||P(e)}),L=xl(function(e){27===e.keyCode&&P(e)}),Je.useEffect(function(){if(!M&&null!=_){var e=window.event,t=Bc(Yc(_)),n=zc(t,C,R,!0),r=zc(t,C,function(t){t!==e?I(t):e=void 0}),s=zc(t,"keyup",function(t){t!==e?L(t):e=void 0}),a=[];return"ontouchstart"in t.documentElement&&(a=[].slice.call(t.body.children).map(function(e){return zc(e,"mousemove",qc)})),function(){n(),r(),s(),a.forEach(function(e){return e()})}}},[_,M,C,R,I,L]),!F)return null;var z=e.children(yt({},S,{show:!!e.show,props:yt({},k.popper,{style:N.popper,ref:g}),arrowProps:yt({},k.arrow,{style:N.arrow,ref:p})}));if(c){var U=e.onExit,B=e.onExiting,q=e.onEnter,W=e.onEntering,Y=e.onEntered;z=tt.createElement(c,{in:e.show,appear:!0,onExit:U,onExiting:B,onExited:function(){w(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:q,onEntering:W,onEntered:Y},z)}return v?rt.createPortal(z,v):null});function Zc(e,t){var n=Zo(e);return n?n.innerHeight:nl(e).height}function Jc(e,t,n){e.closest&&!n&&e.closest(t);var r=e;do{if(hl(r,t))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}Xc.displayName="Overlay",Xc.propTypes={show:Nt.bool,placement:Nt.oneOf(Cl),target:Nt.any,container:Nt.any,flip:Nt.bool,children:Nt.func.isRequired,containerPadding:Nt.number,popperConfig:Nt.object,rootClose:Nt.bool,rootCloseEvent:Nt.oneOf(["click","mousedown"]),rootCloseDisabled:Nt.bool,onHide:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s;return e.rootClose?(s=Nt.func).isRequired.apply(s,[e].concat(n)):Nt.func.apply(Nt,[e].concat(n))},transition:Nt.elementType,onEnter:Nt.func,onEntering:Nt.func,onEntered:Nt.func,onExit:Nt.func,onExiting:Nt.func,onExited:Nt.func};var ed=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function td(e,t){return e===t||!(!ed(e)||!ed(t))}function nd(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!td(e[n],t[n]))return!1;return!0}function rd(e,t){void 0===t&&(t=nd);var n=null;function r(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var a=e.apply(this,r);return n={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){n=null},r}function sd(e,t){var n=Zo(e);return n?n.innerWidth:nl(e).width}function ad(e){return Ii(e)||Io(e)||Fi(e)||zi()}var id=kt,od=St,ld=wt,cd=_t,dd=Object.prototype,ud=dd.hasOwnProperty;const md=nt(id(function(e,t){e=Object(e);var n=-1,r=t.length,s=r>2?t[2]:void 0;for(s&&ld(t[0],t[1],s)&&(r=1);++n<r;)for(var a=t[n],i=cd(a),o=-1,l=i.length;++o<l;){var c=i[o],d=e[c];(void 0===d||od(d,dd[c])&&!ud.call(e,c))&&(e[c]=a[c])}return e}));var hd=Et,fd=Dt,pd=Tt,gd=Mt,vd=At,xd=It,yd=Ct,bd=Ot,wd=Pt,jd=Rt;const Nd=nt(function(e,t,n){var r=xd(e),s=r||yd(e)||jd(e);if(t=gd(t),null==n){var a=e&&e.constructor;n=s?r?new a:[]:wd(e)&&bd(a)?fd(vd(e)):{}}return(s?hd:pd)(e,function(e,r,s){return t(n,e,r,s)}),n});function kd(e){return e.children}!function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g}();var Sd="PREV",_d="NEXT",Ed="TODAY",Dd="DATE",Td={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Md=Object.keys(Td).map(function(e){return Td[e]});Nt.oneOfType([Nt.string,Nt.func]),Nt.any,Nt.func,Nt.oneOfType([Nt.arrayOf(Nt.oneOf(Md)),Nt.objectOf(function(e,t){if(-1!==Md.indexOf(t)&&"boolean"==typeof e[t])return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return Nt.elementType.apply(Nt,[e,t].concat(r))})]),Nt.oneOfType([Nt.oneOf(["overlap","no-overlap"]),Nt.func]);var Ad={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function Cd(e,t){var n=ho(e,"month");return ho(n,"week",t.startOfWeek())}function Od(e,t){var n=fo(e,"month");return fo(n,"week",t.startOfWeek())}function Pd(e,t){for(var n=Cd(e,t),r=Od(e,t),s=[];bo(n,r,"day");)s.push(n),n=uo(n,1,"day");return s}function Rd(e,t){var n=ho(e,t);return po(n,e)?n:uo(n,1,t)}function Id(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",r=e,s=[];bo(r,t,n);)s.push(r),r=uo(r,1,n);return s}function Ld(e,t){return null==t&&null==e?null:(null==t&&(t=new Date),null==e&&(e=new Date),e=ho(e,"day"),e=Eo(e,Eo(t)),e=_o(e,_o(t)),e=So(e,So(t)),ko(e,ko(t)))}function Fd(e){return 0===Eo(e)&&0===_o(e)&&0===So(e)&&0===ko(e)}function zd(e,t,n){return n&&"milliseconds"!==n?Math.round(Math.abs(+ho(e,n)/Ad[n]-+ho(t,n)/Ad[n])):Math.abs(+e-+t)}var Ud=Nt.oneOfType([Nt.string,Nt.func]);function Bd(e,t,n,r,s){var a="function"==typeof r?r(n,s,e):t.call(e,n,r,s);return Yi(null==a||"string"==typeof a,"`localizer format(..)` must return a string, null, or undefined"),a}function qd(e,t,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+n,0,0)}function Wd(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function Yd(e,t){return zd(e,t,"minutes")+Wd(e,t)}function Hd(e){var t=ho(e,"day");return zd(t,e,"minutes")+Wd(t,e)}function Vd(e,t){return yo(e,t,"day")}function $d(e,t,n){return po(e,t,"minutes")?xo(t,n,"minutes"):vo(t,n,"minutes")}function Gd(e,t){return function(e,t,n,r){return"day"===n&&(n="date"),Math.abs(Ro[n](e,void 0,r)-Ro[n](t,void 0,r))}(e,t,"day")}function Kd(e){var t=e.evtA,n=t.start,r=t.end,s=t.allDay,a=e.evtB,i=a.start,o=a.end,l=a.allDay,c=+ho(n,"day")-+ho(i,"day"),d=Gd(n,r),u=Gd(i,o);return c||u-d||!!l-!!s||+n-+i||+r-+o}function Qd(e){var t=e.event,n=t.start,r=t.end,s=e.range,a=s.start,i=s.end,o=ho(n,"day"),l=bo(o,i,"day"),c=go(o,r,"minutes")?vo(r,a,"minutes"):xo(r,a,"minutes");return l&&c}function Xd(e,t){return po(e,t,"day")}function Zd(e,t){return Fd(e)&&Fd(t)}var Jd=Ai(function e(t){var n=this;Ti(this,e),Yi("function"==typeof t.format,"date localizer `format(..)` must be a function"),Yi("function"==typeof t.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||Ud,this.formats=t.formats,this.format=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return Bd.apply(void 0,[n,t.format].concat(r))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||Ld,this.inRange=t.inRange||No,this.lt=t.lt||yo,this.lte=t.lte||bo,this.gt=t.gt||vo,this.gte=t.gte||xo,this.eq=t.eq||po,this.neq=t.neq||go,this.startOf=t.startOf||ho,this.endOf=t.endOf||fo,this.add=t.add||uo,this.range=t.range||Id,this.diff=t.diff||zd,this.ceil=t.ceil||Rd,this.min=t.min||wo,this.max=t.max||jo,this.minutes=t.minutes||_o,this.daySpan=t.daySpan||Gd,this.firstVisibleDay=t.firstVisibleDay||Cd,this.lastVisibleDay=t.lastVisibleDay||Od,this.visibleDays=t.visibleDays||Pd,this.getSlotDate=t.getSlotDate||qd,this.getTimezoneOffset=t.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||Wd,this.getTotalMin=t.getTotalMin||Yd,this.getMinutesFromMidnight=t.getMinutesFromMidnight||Hd,this.continuesPrior=t.continuesPrior||Vd,this.continuesAfter=t.continuesAfter||$d,this.sortEvents=t.sortEvents||Kd,this.inEventRange=t.inEventRange||Qd,this.isSameDate=t.isSameDate||Xd,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||Zd,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function eu(e,t,n,r){var s=Ei(Ei({},e.formats),n);return Ei(Ei({},e),{},{messages:r,startOfWeek:function(){return e.startOfWeek(t)},format:function(n,r){return e.format(n,s[r]||r,t)}})}var tu=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).navigate=function(e){t.props.onNavigate(e)},t.view=function(e){t.props.onView(e)},t}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,n=e.label;return tt.createElement("div",{className:"rbc-toolbar"},tt.createElement("span",{className:"rbc-btn-group"},tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ed)},t.today),tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Sd)},t.previous),tt.createElement("button",{type:"button",onClick:this.navigate.bind(null,_d)},t.next)),tt.createElement("span",{className:"rbc-toolbar-label"},n),tt.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,n=this.props.views,r=this.props.view;if(n.length>1)return n.map(function(n){return tt.createElement("button",{type:"button",key:n,className:qi({"rbc-active":r===n}),onClick:t.view.bind(null,n)},e[n])})}}])}();function nu(e,t){e&&e.apply(null,[].concat(t))}var ru={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};var su=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],au=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.event,s=e.selected,a=e.isAllDay,i=e.onSelect,o=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,d=e.continuesPrior,u=e.continuesAfter,m=e.accessors,h=e.getters,f=e.children,p=e.components,g=p.event,v=p.eventWrapper,x=e.slotStart,y=e.slotEnd,b=Di(e,su);delete b.resizable;var w=m.title(r),j=m.tooltip(r),N=m.end(r),k=m.start(r),S=m.allDay(r),_=a||S||c.diff(k,c.ceil(N,"day"),"day")>1,E=h.eventProp(r,k,N,s),D=tt.createElement("div",{className:"rbc-event-content",title:j||void 0},g?tt.createElement(g,{event:r,continuesPrior:d,continuesAfter:u,title:w,isAllDay:S,localizer:c,slotStart:x,slotEnd:y}):w);return tt.createElement(v,Object.assign({},this.props,{type:"date"}),tt.createElement("div",Object.assign({},b,{style:Ei(Ei({},E.style),t),className:qi("rbc-event",n,E.className,{"rbc-selected":s,"rbc-event-allday":_,"rbc-event-continues-prior":d,"rbc-event-continues-after":u}),onClick:function(e){return i&&i(r,e)},onDoubleClick:function(e){return o&&o(r,e)},onKeyDown:function(e){return l&&l(r,e)}}),"function"==typeof f?f(D):D))}}])}();function iu(e,t){return!(!e||null==t)&&Lt(e,t)}function ou(e,t){return(e.right-e.left)/t}function lu(e,t,n,r){var s=ou(e,r);return n?r-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function cu(e){var t,n,r,s=e.containerRef,a=e.accessors,i=e.getters,o=e.selected,l=e.components,c=e.localizer,d=e.position,u=e.show,m=e.events,h=e.slotStart,f=e.slotEnd,p=e.onSelect,g=e.onDoubleClick,v=e.onKeyPress,x=e.handleDragStart,y=e.popperRef,b=e.target,w=e.offset;n=(t={ref:y,callback:u}).ref,r=t.callback,Je.useEffect(function(){var e=function(e){n.current&&!n.current.contains(e.target)&&r()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[n,r]),Je.useLayoutEffect(function(){var e=function(e){var t=e.target,n=e.offset,r=e.container,s=e.box,a=nl(t),i=a.top,o=a.left,l=a.width,c=a.height,d=nl(r),u=d.top,m=d.left,h=d.width,f=d.height,p=nl(s),g=p.width,v=p.height,x=u+f,y=m+h,b=i+v,w=o+g,j=n.x,N=n.y;return{topOffset:b>x?i-v-N:i+N+c,leftOffset:w>y?o+j-g+l:o+j}}({target:b,offset:w,container:s.current,box:y.current}),t=e.topOffset,n=e.leftOffset;y.current.style.top="".concat(t,"px"),y.current.style.left="".concat(n,"px")},[w.x,w.y,b]);var j=d.width,N={minWidth:j+j/2};return tt.createElement("div",{style:N,className:"rbc-overlay",ref:y},tt.createElement("div",{className:"rbc-overlay-header"},c.format(h,"dayHeaderFormat")),m.map(function(e,t){return tt.createElement(au,{key:t,type:"popup",localizer:c,event:e,getters:i,onSelect:p,accessors:a,components:l,onDoubleClick:g,onKeyPress:v,continuesPrior:c.lt(a.end(e),h,"day"),continuesAfter:c.gte(a.start(e),f,"day"),slotStart:h,slotEnd:f,selected:iu(e,o),draggable:!0,onDragStart:function(){return x(e)},onDragEnd:function(){return u()}})}))}var du=tt.forwardRef(function(e,t){return tt.createElement(cu,Object.assign({},e,{popperRef:t}))});function uu(e){var t=e.containerRef,n=e.popupOffset,r=void 0===n?5:n,s=e.overlay,a=e.accessors,i=e.localizer,o=e.components,l=e.getters,c=e.selected,d=e.handleSelectEvent,u=e.handleDoubleClickEvent,m=e.handleKeyPressEvent,h=e.handleDragStart,f=e.onHide,p=e.overlayDisplay,g=Je.useRef(null);if(!s.position)return null;var v=r;isNaN(r)||(v={x:r,y:r});var x=s.position,y=s.events,b=s.date,w=s.end;return tt.createElement(Xc,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:f,target:s.target},function(e){var n=e.props;return tt.createElement(du,Object.assign({},n,{containerRef:t,ref:g,target:s.target,offset:v,accessors:a,getters:l,selected:c,components:o,localizer:i,position:x,show:p,events:y,slotStart:b,slotEnd:w,onSelect:d,onDoubleClick:u,onKeyPress:m,handleDragStart:h}))})}du.propTypes={accessors:Nt.object.isRequired,getters:Nt.object.isRequired,selected:Nt.object,components:Nt.object.isRequired,localizer:Nt.object.isRequired,position:Nt.object.isRequired,show:Nt.func.isRequired,events:Nt.array.isRequired,slotStart:Nt.instanceOf(Date).isRequired,slotEnd:Nt.instanceOf(Date),onSelect:Nt.func,onDoubleClick:Nt.func,onKeyPress:Nt.func,handleDragStart:Nt.func,style:Nt.object,offset:Nt.shape({x:Nt.number,y:Nt.number})};var mu=tt.forwardRef(function(e,t){return tt.createElement(uu,Object.assign({},e,{containerRef:t}))});function hu(e,t){return zc(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,e,t,{passive:!1})}function fu(e,t){return!!function(e,t){var n=t.clientX,r=t.clientY;return Jc(document.elementFromPoint(n,r),".rbc-event",e)}(e,t)}function pu(e,t){return!!function(e,t){var n=t.clientX,r=t.clientY;return Jc(document.elementFromPoint(n,r),".rbc-show-more",e)}(e,t)}function gu(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}mu.propTypes={popupOffset:Nt.oneOfType([Nt.number,Nt.shape({x:Nt.number,y:Nt.number})]),overlay:Nt.shape({position:Nt.object,events:Nt.array,date:Nt.instanceOf(Date),end:Nt.instanceOf(Date)}),accessors:Nt.object.isRequired,localizer:Nt.object.isRequired,components:Nt.object.isRequired,getters:Nt.object.isRequired,selected:Nt.object,handleSelectEvent:Nt.func,handleDoubleClickEvent:Nt.func,handleKeyPressEvent:Nt.func,handleDragStart:Nt.func,onHide:Nt.func,overlayDisplay:Nt.func};var vu=function(){return Ai(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.global,s=void 0!==r&&r,a=n.longPressThreshold,i=void 0===a?250:a,o=n.validContainers,l=void 0===o?[]:o;Ti(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=i,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=hu("touchmove",function(){},window),this._removeKeyDownListener=hu("keydown",this._keyListener),this._removeKeyUpListener=hu("keyup",this._keyListener),this._removeDropFromOutsideListener=hu("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=hu("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()},[{key:"on",value:function(e,t){var n=this._listeners[e]||(this._listeners[e]=[]);return n.push(t),{remove:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s;return(this._listeners[e]||[]).forEach(function(e){void 0===s&&(s=e.apply(void 0,n))}),s}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var t=this._selectRect;return!(!t||!this.selecting)&&xu(t,yu(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,t){var n=this,r=null,s=null,a=null,i=function(t){r=setTimeout(function(){l(),e(t)},n.longPressThreshold),s=hu("touchmove",function(){return l()}),a=hu("touchend",function(){return l()})},o=hu("touchstart",i),l=function(){r&&clearTimeout(r),s&&s(),a&&a(),r=null,s=null,a=null};return t&&i(t),function(){l(),o()}}},{key:"_addInitialEventListener",value:function(){var e=this,t=hu("mousedown",function(t){e._removeInitialEventListener(),e._handleInitialEvent(t),e._removeInitialEventListener=hu("mousedown",e._handleInitialEvent)}),n=hu("touchstart",function(t){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,t)});this._removeInitialEventListener=function(){t(),n()}}},{key:"_dropFromOutsideListener",value:function(e){var t=gu(e),n=t.pageX,r=t.pageY,s=t.clientX,a=t.clientY;this.emit("dropFromOutside",{x:n,y:r,clientX:s,clientY:a}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var t=gu(e),n=t.pageX,r=t.pageY,s=t.clientX,a=t.clientY;this.emit("dragOverFromOutside",{x:n,y:r,clientX:s,clientY:a}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var t,n=gu(e),r=n.clientX,s=n.clientY,a=n.pageX,i=n.pageY,o=this.container();if(3!==e.which&&2!==e.button&&(c=r,d=s,!(l=o)||Xo(l,document.elementFromPoint(c,d)))){var l,c,d;if(!this.globalMouse&&o&&!Xo(o,e.target)){var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;"object"!==Ni(e)&&(e={top:e,left:e,right:e,bottom:e});return e}(0),m=u.top,h=u.left,f=u.bottom,p=u.right;if(!xu({top:(t=yu(o)).top-m,left:t.left-h,bottom:t.bottom+f,right:t.right+p},{top:i,left:a}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:a,y:i,clientX:r,clientY:s}))switch(e.type){case"mousedown":this._removeEndListener=hu("mouseup",this._handleTerminatingEvent),this._onEscListener=hu("keydown",this._handleTerminatingEvent),this._removeMoveListener=hu("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=hu("touchend",this._handleTerminatingEvent),this._removeMoveListener=hu("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var t=e.target,n=this.validContainers;return!(n&&n.length&&t)||n.some(function(e){return!!t.closest(e)})}},{key:"_handleTerminatingEvent",value:function(e){var t=this.selecting,n=this._selectRect;if(!t&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,e){var r=!this.container||Xo(this.container(),e.target),s=this._isWithinValidContainer(e);return"Escape"!==e.key&&s?!t&&r?this._handleClickEvent(e):t?this.emit("select",n):this.emit("reset"):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var t=gu(e),n=t.pageX,r=t.pageY,s=t.clientX,a=t.clientY,i=(new Date).getTime();return this._lastClickData&&i-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:n,y:r,clientX:s,clientY:a})):(this._lastClickData={timestamp:i},this.emit("click",{x:n,y:r,clientX:s,clientY:a}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var t=this._initialEventData,n=t.x,r=t.y,s=gu(e),a=s.pageX,i=s.pageY,o=Math.abs(n-a),l=Math.abs(r-i),c=Math.min(a,n),d=Math.min(i,r),u=this.selecting,m=this.isClick(a,i);(!m||u||o||l)&&(u||m||this.emit("selectStart",this._initialEventData),m||(this.selecting=!0,this._selectRect={top:d,left:c,x:a,y:i,right:c+o,bottom:d+l},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,t){var n=this._initialEventData,r=n.x,s=n.y;return!n.isTouch&&Math.abs(e-r)<=5&&Math.abs(t-s)<=5}}])}();function xu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=yu(e),s=r.top,a=r.left,i=r.right,o=void 0===i?a:i,l=r.bottom,c=void 0===l?s:l,d=yu(t),u=d.top,m=d.left,h=d.right,f=void 0===h?m:h,p=d.bottom;return!(c-n<u||s+n>(void 0===p?u:p)||o-n<m||a+n>f)}function yu(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+bu("left"),r=t.top+bu("top");return{top:r,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+r}}function bu(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var wu=function(){function e(t,n){var r;return Ti(this,e),(r=Pi(this,e,[t,n])).state={selecting:!1},r.containerRef=Je.createRef(),r}return Ri(e,tt.Component),Ai(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,t=e.range,n=e.getNow,r=e.getters,s=e.date,a=e.components.dateCellWrapper,i=e.localizer,o=this.state,l=o.selecting,c=o.startIdx,d=o.endIdx,u=n();return tt.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},t.map(function(e,n){var o=l&&n>=c&&n<=d,m=r.dayProp(e),h=m.className,f=m.style;return tt.createElement(a,{key:n,value:e,range:t},tt.createElement("div",{style:f,className:qi("rbc-day-bg",h,o&&"rbc-selected-cell",i.isSameDate(e,u)&&"rbc-today",s&&i.neq(s,e,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var e=this,t=this.containerRef.current,n=this._selector=new vu(this.props.container,{longPressThreshold:this.props.longPressThreshold}),r=function(n,r){if(!fu(t,n)&&!pu(t,n)){var s=yu(t),a=e.props,i=a.range,o=a.rtl;if(c=s,u=(d=n).x,(m=d.y)>=c.top&&m<=c.bottom&&u>=c.left&&u<=c.right){var l=lu(s,n.x,o,i.length);e._selectSlot({startIdx:l,endIdx:l,action:r,box:n})}}var c,d,u,m;e._initial={},e.setState({selecting:!1})};n.on("selecting",function(r){var s=e.props,a=s.range,i=s.rtl,o=-1,l=-1;if(e.state.selecting||(nu(e.props.onSelectStart,[r]),e._initial={x:r.x,y:r.y}),n.isSelected(t)){var c=yu(t),d=function(e,t,n,r,s){var a=-1,i=-1,o=r-1,l=ou(t,r),c=lu(t,n.x,s,r),d=t.top<n.y&&t.bottom>n.y,u=t.top<e.y&&t.bottom>e.y,m=e.y>t.bottom,h=t.top>e.y;return n.top<t.top&&n.bottom>t.bottom&&(a=0,i=o),d&&(h?(a=0,i=c):m&&(a=c,i=o)),u&&(a=i=s?o-Math.floor((e.x-t.left)/l):Math.floor((e.x-t.left)/l),d?c<a?a=c:i=c:e.y<n.y?i=o:a=0),{startIdx:a,endIdx:i}}(e._initial,c,r,a.length,i);o=d.startIdx,l=d.endIdx}e.setState({selecting:!0,startIdx:o,endIdx:l})}),n.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!fu(e.containerRef.current,t)}),n.on("click",function(e){return r(e,"click")}),n.on("doubleClick",function(e){return r(e,"doubleClick")}),n.on("select",function(t){e._selectSlot(Ei(Ei({},e.state),{},{action:"select",bounds:t})),e._initial={},e.setState({selecting:!1}),nu(e.props.onSelectEnd,[e.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var t=e.endIdx,n=e.startIdx,r=e.action,s=e.bounds,a=e.box;-1!==t&&-1!==n&&this.props.onSelectSlot&&this.props.onSelectSlot({start:n,end:t,action:r,bounds:s,box:a,resourceId:this.props.resourceId})}}])}(),ju=(Nt.object.isRequired,Nt.object,Nt.bool,Nt.object.isRequired,Nt.object.isRequired,Nt.object.isRequired,Nt.object.isRequired,Nt.func,Nt.func,Nt.func,{segments:[],selected:{}}),Nu=function(e,t){var n=e.selected;e.isAllDay;var r=e.accessors,s=e.getters,a=e.onSelect,i=e.onDoubleClick,o=e.onKeyPress,l=e.localizer,c=e.slotMetrics,d=e.components,u=e.resizable,m=c.continuesPrior(t),h=c.continuesAfter(t);return tt.createElement(au,{event:t,getters:s,localizer:l,accessors:r,components:d,onSelect:a,onDoubleClick:i,onKeyPress:o,continuesPrior:m,continuesAfter:h,slotStart:c.first,slotEnd:c.last,selected:iu(t,n),resizable:u})},ku=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",s=Math.abs(t)/e*100+"%";return tt.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:s,flexBasis:s,maxWidth:s}},r)},Su=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.segments,r=t.slotMetrics.slots,s=t.className,a=1;return tt.createElement("div",{className:qi(s,"rbc-row")},n.reduce(function(t,n,s){var i=n.event,o=n.left,l=n.right,c=n.span,d="_lvl_"+s,u=o-a,m=Nu(e.props,i);return u&&t.push(ku(r,u,"".concat(d,"_gap"))),t.push(ku(r,c,d,m)),a=l+1,t},[]))}}])}();function _u(e){var t=e.dateRange,n=e.unit,r=void 0===n?"day":n,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,r)}}function Eu(e){var t,n,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=[],i=[];for(t=0;t<e.length;t++){for(r=e[t],n=0;n<a.length&&Tu(r,a[n]);n++);n>=s?i.push(r):(a[n]||(a[n]=[])).push(r)}for(t=0;t<a.length;t++)a[t].sort(function(e,t){return e.left-t.left});return{levels:a,extra:i}}function Du(e,t,n,r,s){var a={start:r.start(e),end:r.end(e)},i={start:t,end:n};return s.inEventRange({event:a,range:i})}function Tu(e,t){return t.some(function(t){return t.left<=e.right&&t.right>=e.left})}function Mu(e,t,n,r){var s={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},a={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return r.sortEvents({evtA:s,evtB:a})}Su.defaultProps=Ei({},ju);var Au=function(e,t){return e.left<=t&&e.right>=t},Cu=function(e,t){return e.filter(function(e){return Au(e,t)}).map(function(e){return e.event})},Ou=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){for(var e=this.props,t=e.segments,n=e.slotMetrics.slots,r=Eu(t).levels[0],s=1,a=1,i=[];s<=n;){var o="_lvl_"+s,l=r.filter(function(e){return Au(e,s)})[0]||{},c=l.event,d=l.left,u=l.right,m=l.span;if(c){var h=Math.max(0,d-a);if(this.canRenderSlotEvent(d,m)){var f=Nu(this.props,c);h&&i.push(ku(n,h,o+"_gap")),i.push(ku(n,m,o,f)),a=s=u+1}else h&&i.push(ku(n,h,o+"_gap")),i.push(ku(n,1,o,this.renderShowMore(t,s))),a=s+=1}else s++}return tt.createElement("div",{className:"rbc-row"},i)}},{key:"canRenderSlotEvent",value:function(e,t){var n=this.props.segments;return Ft(e,e+t).every(function(e){return 1===Cu(n,e).length})}},{key:"renderShowMore",value:function(e,t){var n=this,r=this.props,s=r.localizer,a=r.slotMetrics,i=r.components,o=a.getEventsForSlot(t),l=Cu(e,t),c=l.length;if(null!=i&&i.showMore){var d=i.showMore,u=a.getDateForSlot(t-1);return!!c&&tt.createElement(d,{localizer:s,slotDate:u,slot:t,count:c,events:o,remainingEvents:l})}return!!c&&tt.createElement("button",{type:"button",key:"sm_"+t,className:qi("rbc-button-link","rbc-show-more"),onClick:function(e){return n.showMore(t,e)}},s.messages.showMore(c,l,o))}},{key:"showMore",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onShowMore(e,t.target)}}])}();Ou.defaultProps=Ei({},ju);var Pu=function(e){var t=e.children;return tt.createElement("div",{className:"rbc-row-content-scroll-container"},t)},Ru=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function Iu(){return rd(function(e){for(var t=e.range,n=e.events,r=e.maxRows,s=e.minRows,a=e.accessors,i=e.localizer,o=_u({dateRange:t,localizer:i}),l=o.first,c=o.last,d=n.map(function(e){return function(e,t,n,r){var s=_u({dateRange:t,localizer:r}),a=s.first,i=s.last,o=r.diff(a,i,"day"),l=r.max(r.startOf(n.start(e),"day"),a),c=r.min(r.ceil(n.end(e),"day"),i),d=Wt(t,function(e){return r.isSameDate(e,l)}),u=r.diff(l,c,"day");return u=Math.min(u,o),{event:e,span:u=Math.max(u-r.segmentOffset,1),left:d+1,right:Math.max(d+u,1)}}(e,t,a,i)}),u=Eu(d,Math.max(r-1,1)),m=u.levels,h=u.extra,f=h.length>0?s-1:s;m.length<f;)m.push([]);return{first:l,last:c,levels:m,extra:h,range:t,slots:t.length,clone:function(t){return Iu()(Ei(Ei({},e),t))},getDateForSlot:function(e){return t[e]},getSlotForDate:function(e){return t.find(function(t){return i.isSameDate(t,e)})},getEventsForSlot:function(e){return d.filter(function(t){return function(e,t){return e.left<=t&&e.right>=t}(t,e)}).map(function(e){return e.event})},continuesPrior:function(e){return i.continuesPrior(a.start(e),l)},continuesAfter:function(e){var t=a.start(e),n=a.end(e);return i.continuesAfter(t,n,c)}}},Ru)}var Lu=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).handleSelectSlot=function(e){var n=t.props,r=n.range;(0,n.onSelectSlot)(r.slice(e.start,e.end+1),e)},t.handleShowMore=function(e,n){var r,s,a,i=t.props,o=i.range,l=i.onShowMore,c=t.slotMetrics(t.props),d=(r=t.containerRef.current,s=".rbc-row-bg",fl(r.querySelectorAll(s)))[0];d&&(a=d.children[e-1]),l(c.getEventsForSlot(e),o[e-1],a,e,n)},t.getContainer=function(){var e=t.props.container;return e?e():t.containerRef.current},t.renderHeadingCell=function(e,n){var r=t.props,s=r.renderHeader,a=r.getNow,i=r.localizer;return s({date:e,key:"header_".concat(n),className:qi("rbc-date-cell",i.isSameDate(e,a())&&"rbc-now")})},t.renderDummy=function(){var e=t.props,n=e.className,r=e.range,s=e.renderHeader,a=e.showAllEvents;return tt.createElement("div",{className:n,ref:t.containerRef},tt.createElement("div",{className:qi("rbc-row-content",a&&"rbc-row-content-scrollable")},s&&tt.createElement("div",{className:"rbc-row",ref:t.headingRowRef},r.map(t.renderHeadingCell)),tt.createElement("div",{className:"rbc-row",ref:t.eventRowRef},tt.createElement("div",{className:"rbc-row-segment"},tt.createElement("div",{className:"rbc-event"},tt.createElement("div",{className:"rbc-event-content"},""))))))},t.containerRef=Je.createRef(),t.headingRowRef=Je.createRef(),t.eventRowRef=Je.createRef(),t.slotMetrics=Iu(),t}return Ri(e,tt.Component),Ai(e,[{key:"getRowLimit",value:function(){var e,t=Zc(this.eventRowRef.current),n=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?Zc(this.headingRowRef.current):0,r=Zc(this.containerRef.current)-n;return Math.max(Math.floor(r/t),1)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.rtl,r=e.range,s=e.className,a=e.selected,i=e.selectable,o=e.renderForMeasure,l=e.accessors,c=e.getters,d=e.components,u=e.getNow,m=e.renderHeader,h=e.onSelect,f=e.localizer,p=e.onSelectStart,g=e.onSelectEnd,v=e.onDoubleClick,x=e.onKeyPress,y=e.resourceId,b=e.longPressThreshold,w=e.isAllDay,j=e.resizable,N=e.showAllEvents;if(o)return this.renderDummy();var k=this.slotMetrics(this.props),S=k.levels,_=k.extra,E=N?Pu:kd,D=d.weekWrapper,T={selected:a,accessors:l,getters:c,localizer:f,components:d,onSelect:h,onDoubleClick:v,onKeyPress:x,resourceId:y,slotMetrics:k,resizable:j};return tt.createElement("div",{className:s,role:"rowgroup",ref:this.containerRef},tt.createElement(wu,{localizer:f,date:t,getNow:u,rtl:n,range:r,selectable:i,container:this.getContainer,getters:c,onSelectStart:p,onSelectEnd:g,onSelectSlot:this.handleSelectSlot,components:d,longPressThreshold:b,resourceId:y}),tt.createElement("div",{className:qi("rbc-row-content",N&&"rbc-row-content-scrollable"),role:"row"},m&&tt.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},r.map(this.renderHeadingCell)),tt.createElement(E,null,tt.createElement(D,Object.assign({isAllDay:w},T,{rtl:this.props.rtl}),S.map(function(e,t){return tt.createElement(Su,Object.assign({key:t,segments:e},T))}),!!_.length&&tt.createElement(Ou,Object.assign({segments:_,onShowMore:this.handleShowMore},T))))))}}])}();Lu.defaultProps={minRows:0,maxRows:1/0};var Fu=function(e){var t=e.label;return tt.createElement("span",{role:"columnheader","aria-sort":"none"},t)},zu=function(e){var t=e.label,n=e.drilldownView,r=e.onDrillDown;return n?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:r},t):tt.createElement("span",null,t)},Uu=["date","className"],Bu=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).getContainer=function(){return t.containerRef.current},t.renderWeek=function(e,n){var r=t.props,s=r.events,a=r.components,i=r.selectable,o=r.getNow,l=r.selected,c=r.date,d=r.localizer,u=r.longPressThreshold,m=r.accessors,h=r.getters,f=r.showAllEvents,p=t.state,g=p.needLimitMeasure,v=p.rowLimit,x=function(e,t,n,r,s){return e.filter(function(e){return Du(e,t,n,r,s)})}(Lo(s),e[0],e[e.length-1],m,d),y=function(e,t,n){var r=Lo(e),s=[],a=[];r.forEach(function(e){var r=t.start(e),i=t.end(e);n.daySpan(r,i)>1?s.push(e):a.push(e)});var i=s.sort(function(e,r){return Mu(e,r,t,n)}),o=a.sort(function(e,r){return Mu(e,r,t,n)});return[].concat(Lo(i),Lo(o))}(x,m,d);return tt.createElement(Lu,{key:n,ref:0===n?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:o,date:c,range:e,events:y,maxRows:f?1/0:v,selected:l,selectable:i,components:a,accessors:m,getters:h,localizer:d,renderHeader:t.readerDateHeading,renderForMeasure:g,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:u,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:f})},t.readerDateHeading=function(e){var n=e.date,r=e.className,s=Di(e,Uu),a=t.props,i=a.date,o=a.getDrilldownView,l=a.localizer,c=l.neq(n,i,"month"),d=l.isSameDate(n,i),u=o(n),m=l.format(n,"dateFormat"),h=t.props.components.dateHeader||zu;return tt.createElement("div",Object.assign({},s,{className:qi(r,c&&"rbc-off-range",d&&"rbc-current"),role:"cell"}),tt.createElement(h,{label:m,date:n,drilldownView:u,isOffRange:c,onDrillDown:function(e){return t.handleHeadingClick(n,u,e)}}))},t.handleSelectSlot=function(e,n){t._pendingSelection=t._pendingSelection.concat(e),clearTimeout(t._selectTimer),t._selectTimer=setTimeout(function(){return t.selectDates(n)})},t.handleHeadingClick=function(e,n,r){r.preventDefault(),t.clearSelection(),nu(t.props.onDrillDown,[e,n])},t.handleSelectEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onSelectEvent,n)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onDoubleClickEvent,n)},t.handleKeyPressEvent=function(){t.clearSelection();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onKeyPressEvent,n)},t.handleShowMore=function(e,n,r,s,a){var i=t.props,o=i.popup,l=i.onDrillDown,c=i.onShowMore,d=i.getDrilldownView,u=i.doShowMoreDrillDown;if(t.clearSelection(),o){var m=sl(r,t.containerRef.current);t.setState({overlay:{date:n,events:e,position:m,target:a}})}else u&&nu(l,[n,d(n)||Td.DAY]);nu(c,[e,n,s])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=Je.createRef(),t.slotRowRef=Je.createRef(),t._bgRows=[],t._pendingSelection=[],t}return Ri(e,tt.Component),Ai(e,[{key:"componentDidMount",value:function(){var e,t=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||ml(function(){e=!1,t.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.localizer,r=e.className,s=n.visibleDays(t,n),a=Wo(s,7);return this._weekCount=a.length,tt.createElement("div",{className:qi("rbc-month-view",r),role:"table","aria-label":"Month View",ref:this.containerRef},tt.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(a[0])),a.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var t=this.props,n=t.localizer,r=t.components,s=e[0],a=e[e.length-1],i=r.header||Fu;return n.range(s,a,"day").map(function(e,t){return tt.createElement("div",{key:"header_"+t,className:"rbc-header"},tt.createElement(i,{date:e,localizer:n,label:n.format(e,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var e,t,n=this,r=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},s=this.props,a=s.accessors,i=s.localizer,o=s.components,l=s.getters,c=s.selected,d=s.popupOffset,u=s.handleDragStart;return tt.createElement(mu,{overlay:r,accessors:a,localizer:i,components:o,getters:l,selected:c,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:u,show:!!r.position,overlayDisplay:this.overlayDisplay,onHide:function(){return n.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var t=this._pendingSelection.slice();this._pendingSelection=[],t.sort(function(e,t){return+e-+t});var n=new Date(t[0]),r=new Date(t[t.length-1]);r.setDate(t[t.length-1].getDate()+1),nu(this.props.onSelectSlot,{slots:t,start:n,end:r,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.date;return{date:n,needLimitMeasure:e.localizer.neq(n,t.date,"month")}}}])}();Bu.range=function(e,t){var n=t.localizer;return{start:n.firstVisibleDay(e,n),end:n.lastVisibleDay(e,n)}},Bu.navigate=function(e,t,n){var r=n.localizer;switch(t){case Sd:return r.add(e,-1,"month");case _d:return r.add(e,1,"month");default:return e}},Bu.title=function(e,t){return t.localizer.format(e,"monthHeaderFormat")};var qu=function(e){var t=e.min,n=e.max,r=e.step,s=e.slots,a=e.localizer;return"".concat(+a.startOf(t,"minutes"))+"".concat(+a.startOf(n,"minutes"))+"".concat(r,"-").concat(s)};function Wu(e){for(var t=e.min,n=e.max,r=e.step,s=e.timeslots,a=e.localizer,i=qu({start:t,end:n,step:r,timeslots:s,localizer:a}),o=1+a.getTotalMin(t,n),l=a.getMinutesFromMidnight(t),c=Math.ceil((o-1)/(r*s)),d=c*s,u=new Array(c),m=new Array(d),h=0;h<c;h++){u[h]=new Array(s);for(var f=0;f<s;f++){var p=h*s+f,g=p*r;m[p]=u[h][f]=a.getSlotDate(t,l,g)}}var v=m.length*r;function x(e){var n=a.diff(t,e,"minutes")+a.getDstOffset(t,e);return Math.min(n,o)}return m.push(a.getSlotDate(t,l,v)),{groups:u,update:function(e){return qu(e)!==i?Wu(e):this},dateIsInGroup:function(e,t){var r=u[t+1];return a.inRange(e,u[t][0],r?r[0]:n,"minutes")},nextSlot:function(e){var t=m[Math.min(m.findIndex(function(t){return t===e||a.eq(t,e)})+1,m.length-1)];return a.eq(t,e)&&(t=a.add(e,r,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(m.length-1,Math.max(0,Math.floor(e*d)));return m[t]},closestSlotFromPoint:function(e,t){var n=Math.abs(t.top-t.bottom);return this.closestSlotToPosition((e.y-t.top)/n)},closestSlotFromDate:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a.lt(e,t,"minutes"))return m[0];if(a.gt(e,n,"minutes"))return m[m.length-1];var i=a.diff(t,e,"minutes");return m[(i-i%r)/r+s]},startsBeforeDay:function(e){return a.lt(e,t,"day")},startsAfterDay:function(e){return a.gt(e,n,"day")},startsBefore:function(e){return a.lt(a.merge(t,e),t,"minutes")},startsAfter:function(e){return a.gt(a.merge(n,e),n,"minutes")},getRange:function(e,s,i,o){i||(e=a.min(n,a.max(t,e))),o||(s=a.min(n,a.max(t,s)));var l=x(e),c=x(s),u=c>r*d&&!a.eq(n,s)?(l-r)/(r*d)*100:l/(r*d)*100;return{top:u,height:c/(r*d)*100-u,start:x(e),startDate:e,end:x(s),endDate:s}},getCurrentTimePosition:function(e){return x(e)/(r*d)*100}}}var Yu=function(){return Ai(function e(t,n){var r=n.accessors,s=n.slotMetrics;Ti(this,e);var a=s.getRange(r.start(t),r.end(t)),i=a.start,o=a.startDate,l=a.end,c=a.endDate,d=a.top,u=a.height;this.start=i,this.end=l,this.startMs=+o,this.endMs=+c,this.top=d,this.height=u,this.data=t},[{key:"_width",get:function(){return this.rows?100/(this.rows.reduce(function(e,t){return Math.max(e,t.leaves.length+1)},0)+1):this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,t=Math.min(100,1.7*this._width);if(this.rows)return t;if(this.leaves)return this.leaves.length>0?t:e;var n=this.row.leaves;return n.indexOf(this)===n.length-1?e:t}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,t=e.leaves,n=e.xOffset,r=e._width;return n+(t.indexOf(this)+1)*r}}])}();function Hu(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function Vu(e){for(var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,s=e.accessors,a=function(e){for(var t=Yt(e,["startMs",function(e){return-e.endMs}]),n=[];t.length>0;){var r=t.shift();n.push(r);for(var s=0;s<t.length;s++){var a=t[s];if(!(r.endMs>a.startMs)){if(s>0){var i=t.splice(s,1)[0];n.push(i)}break}}}return n}(t.map(function(e){return new Yu(e,{slotMetrics:r,accessors:s})})),i=[],o=function(){var e=a[l],t=i.find(function(t){return t.end>e.start||Math.abs(e.start-t.start)<n});if(!t)return e.rows=[],i.push(e),1;e.container=t;for(var r=null,s=t.rows.length-1;!r&&s>=0;s--)Hu(t.rows[s],e,n)&&(r=t.rows[s]);r?(r.leaves.push(e),e.row=r):(e.leaves=[],t.rows.push(e))},l=0;l<a.length;l++)o();return a.map(function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}})}function $u(e,t,n){for(var r=0;r<e.friends.length;++r)if(!(n.indexOf(e.friends[r])>-1)){t=t>e.friends[r].idx?t:e.friends[r].idx,n.push(e.friends[r]);var s=$u(e.friends[r],t,n);t=t>s?t:s}return t}var Gu={overlap:Vu,"no-overlap":function(e){var t=Vu({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});t.sort(function(e,t){return e=e.style,t=t.style,e.top!==t.top?e.top>t.top?1:-1:e.height!==t.height?e.top+e.height<t.top+t.height?1:-1:0});for(var n=0;n<t.length;++n)t[n].friends=[],delete t[n].style.left,delete t[n].style.left,delete t[n].idx,delete t[n].size;for(var r=0;r<t.length-1;++r)for(var s=t[r],a=s.style.top,i=s.style.top+s.style.height,o=r+1;o<t.length;++o){var l=t[o],c=l.style.top,d=l.style.top+l.style.height;(c>=a&&d<=i||d>a&&d<=i||c>=a&&c<i)&&(s.friends.push(l),l.friends.push(s))}for(var u=0;u<t.length;++u){for(var m=t[u],h=[],f=0;f<100;++f)h.push(1);for(var p=0;p<m.friends.length;++p)void 0!==m.friends[p].idx&&(h[m.friends[p].idx]=0);m.idx=h.indexOf(1)}for(var g=0;g<t.length;++g){var v;if(!t[g].size){var x=[];v=100/($u(t[g],0,x)+1),t[g].size=v;for(var y=0;y<x.length;++y)x[y].size=v}}for(var b=0;b<t.length;++b){var w=t[b];w.style.left=w.idx*w.size;for(var j=0,N=0;N<w.friends.length;++N){var k=w.friends[N].idx;j=j>k?j:k}j<=w.idx&&(w.size=100-w.idx*w.size);var S=0===w.idx?0:3;w.style.width="calc(".concat(w.size,"% - ").concat(S,"px)"),w.style.height="calc(".concat(w.style.height,"% - 2px)"),w.style.xOffset="calc(".concat(w.style.left,"% + ").concat(S,"px)")}return t}};var Ku=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,Je.Component),Ai(e,[{key:"render",value:function(){var e=this.props,t=e.renderSlot,n=e.resource,r=e.group,s=e.getters,a=e.components,i=(void 0===a?{}:a).timeSlotWrapper,o=void 0===i?kd:i,l=s?s.slotGroupProp(r):{};return tt.createElement("div",Object.assign({className:"rbc-timeslot-group"},l),r.map(function(e,r){var a=s?s.slotProp(e,n):{};return tt.createElement(o,{key:r,value:e,resource:n},tt.createElement("div",Object.assign({},a,{className:qi("rbc-time-slot",a.className)}),t&&t(e,r)))}))}}])}();function Qu(e){return"string"==typeof e?e:e+"%"}function Xu(e){var t=e.style,n=e.className,r=e.event,s=e.accessors,a=e.rtl,i=e.selected,o=e.label,l=e.continuesPrior,c=e.continuesAfter,d=e.getters,u=e.onClick,m=e.onDoubleClick,h=e.isBackgroundEvent,f=e.onKeyPress,p=e.components,g=p.event,v=p.eventWrapper,x=s.title(r),y=s.tooltip(r),b=s.end(r),w=s.start(r),j=d.eventProp(r,w,b,i),N=[tt.createElement("div",{key:"1",className:"rbc-event-label"},o),tt.createElement("div",{key:"2",className:"rbc-event-content"},g?tt.createElement(g,{event:r,title:x}):x)],k=t.height,S=t.top,_=t.width,E=t.xOffset,D=Ei(Ei({},j.style),{},Si({top:Qu(S),height:Qu(k),width:Qu(_)},a?"right":"left",Qu(E)));return tt.createElement(v,Object.assign({type:"time"},e),tt.createElement("div",{role:"button",tabIndex:0,onClick:u,onDoubleClick:m,style:D,onKeyDown:f,title:y?("string"==typeof o?o+": ":"")+y:void 0,className:qi(h?"rbc-background-event":"rbc-event",n,j.className,{"rbc-selected":i,"rbc-event-continues-earlier":l,"rbc-event-continues-later":c})},N))}var Zu=function(e){var t=e.children,n=e.className,r=e.style,s=e.innerRef;return tt.createElement("div",{className:n,style:r,ref:s},t)},Ju=tt.forwardRef(function(e,t){return tt.createElement(Zu,Object.assign({},e,{innerRef:t}))}),em=["dayProp"],tm=["eventContainerWrapper"],nm=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(e){var n=e.events,r=e.isBackgroundEvent,s=t.props,a=s.rtl,i=s.selected,o=s.accessors,l=s.localizer,c=s.getters,d=s.components,u=s.step,m=s.timeslots,h=s.dayLayoutAlgorithm,f=s.resizable,p=t.slotMetrics,g=l.messages,v=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t,n=e.dayLayoutAlgorithm,r=n;return n in Gu&&(r=Gu[n]),(t=r)&&t.constructor&&t.call&&t.apply?r.apply(this,arguments):[]}({events:n,accessors:o,slotMetrics:p,minimumStartDifference:Math.ceil(u*m/2),dayLayoutAlgorithm:h});return v.map(function(e,n){var s,u,m=e.event,h=e.style,v=o.end(m),x=o.start(m),y=null!==(s=o.eventId(m))&&void 0!==s?s:"evt_"+n,b="eventTimeRangeFormat",w=p.startsBeforeDay(x),j=p.startsAfterDay(v);w?b="eventTimeRangeEndFormat":j&&(b="eventTimeRangeStartFormat"),u=w&&j?g.allDay:l.format({start:x,end:v},b);var N=w||p.startsBefore(x),k=j||p.startsAfter(v);return tt.createElement(Xu,{style:h,event:m,label:u,key:y,getters:c,rtl:a,components:d,continuesPrior:N,continuesAfter:k,accessors:o,resource:t.props.resource,selected:iu(m,i),onClick:function(e){return t._select(Ei(Ei(Ei({},m),t.props.resource&&{sourceResource:t.props.resource}),r&&{isBackgroundEvent:!0}),e)},onDoubleClick:function(e){return t._doubleClick(m,e)},isBackgroundEvent:r,onKeyPress:function(e){return t._keyPress(m,e)},resizable:f})})},t._selectable=function(){var e=t.containerRef.current,n=t.props,r=n.longPressThreshold,s=n.localizer,a=t._selector=new vu(function(){return e},{longPressThreshold:r}),i=function(e){var n=t.props.onSelecting,r=t.state||{},a=o(e),i=a.startDate,l=a.endDate;n&&(s.eq(r.startDate,i,"minutes")&&s.eq(r.endDate,l,"minutes")||!1===n({start:i,end:l,resourceId:t.props.resource}))||t.state.start===a.start&&t.state.end===a.end&&t.state.selecting===a.selecting||t.setState(a)},o=function(n){var r=t.slotMetrics.closestSlotFromPoint(n,yu(e));t.state.selecting||(t._initialSlot=r);var a=t._initialSlot;s.lte(a,r)?r=t.slotMetrics.nextSlot(r):s.gt(a,r)&&(a=t.slotMetrics.nextSlot(a));var i=t.slotMetrics.getRange(s.min(a,r),s.max(a,r));return Ei(Ei({},i),{},{selecting:!0,top:"".concat(i.top,"%"),height:"".concat(i.height,"%")})},l=function(e,n){if(!fu(t.containerRef.current,e)){var r=o(e),s=r.startDate,a=r.endDate;t._selectSlot({startDate:s,endDate:a,action:n,box:e})}t.setState({selecting:!1})};a.on("selecting",i),a.on("selectStart",i),a.on("beforeSelect",function(e){if("ignoreEvents"===t.props.selectable)return!fu(t.containerRef.current,e)}),a.on("click",function(e){return l(e,"click")}),a.on("doubleClick",function(e){return l(e,"doubleClick")}),a.on("select",function(e){t.state.selecting&&(t._selectSlot(Ei(Ei({},t.state),{},{action:"select",bounds:e})),t.setState({selecting:!1}))}),a.on("reset",function(){t.state.selecting&&t.setState({selecting:!1})})},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(e){for(var n=e.startDate,r=e.endDate,s=e.action,a=e.bounds,i=e.box,o=n,l=[];t.props.localizer.lte(o,r);)l.push(o),o=new Date(+o+60*t.props.step*1e3);nu(t.props.onSelectSlot,{slots:l,start:n,end:r,resourceId:t.props.resource,action:s,bounds:a,box:i})},t._select=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onSelectEvent,n)},t._doubleClick=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onDoubleClickEvent,n)},t._keyPress=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onKeyPressEvent,n)},t.slotMetrics=Wu(t.props),t.containerRef=Je.createRef(),t}return Ri(e,tt.Component),Ai(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(e,t){this.props.selectable&&!e.selectable&&this._selectable(),!this.props.selectable&&e.selectable&&this._teardownSelectable();var n=this.props,r=n.getNow,s=n.isNow,a=n.localizer,i=n.date,o=n.min,l=n.max,c=a.neq(e.getNow(),r(),"minutes");if(e.isNow!==s||c){if(this.clearTimeIndicatorInterval(),s){var d=!c&&a.eq(e.date,i,"minutes")&&t.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(d)}}else s&&(a.neq(e.min,o,"minutes")||a.neq(e.max,l,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||t||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,t=e.min,n=e.max,r=(0,e.getNow)();if(r>=t&&r<=n){var s=this.slotMetrics.getCurrentTimePosition(r);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:s})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.max,r=e.rtl,s=e.isNow,a=e.resource,i=e.accessors,o=e.localizer,l=e.getters,c=l.dayProp,d=Di(l,em),u=e.components,m=u.eventContainerWrapper,h=Di(u,tm);this.slotMetrics=this.slotMetrics.update(this.props);var f=this.slotMetrics,p=this.state,g=p.selecting,v=p.top,x=p.height,y={start:p.startDate,end:p.endDate},b=c(n,a),w=b.className,j=b.style,N=h.dayColumnWrapper||Ju;return tt.createElement(N,{ref:this.containerRef,date:t,style:j,className:qi(w,"rbc-day-slot","rbc-time-column",s&&"rbc-now",s&&"rbc-today",g&&"rbc-slot-selecting"),slotMetrics:f,resource:a},f.groups.map(function(e,t){return tt.createElement(Ku,{key:t,group:e,resource:a,getters:d,components:h})}),tt.createElement(m,{localizer:o,resource:a,accessors:i,getters:d,components:h,slotMetrics:f},tt.createElement("div",{className:qi("rbc-events-container",r&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),g&&tt.createElement("div",{className:"rbc-slot-selection",style:{top:v,height:x}},tt.createElement("span",null,o.format(y,"selectRangeFormat"))),s&&this.intervalTriggered&&tt.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}])}();nm.defaultProps={dragThroughEvents:!0,timeslots:2};var rm=function(e){var t=e.label;return tt.createElement(tt.Fragment,null,t)},sm=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).handleHeaderClick=function(e,n,r){r.preventDefault(),nu(t.props.onDrillDown,[e,n])},t.renderRow=function(e){var n=t.props,r=n.events,s=n.rtl,a=n.selectable,i=n.getNow,o=n.range,l=n.getters,c=n.localizer,d=n.accessors,u=n.components,m=n.resizable,h=d.resourceId(e),f=e?r.filter(function(e){return d.resource(e)===h}):r;return tt.createElement(Lu,{isAllDay:!0,rtl:s,getNow:i,minRows:2,maxRows:t.props.allDayMaxRows+1,range:o,events:f,resourceId:h,className:"rbc-allday-cell",selectable:a,selected:t.props.selected,components:u,accessors:d,getters:l,localizer:c,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:m})},t}return Ri(e,tt.Component),Ai(e,[{key:"renderHeaderCells",value:function(e){var t=this,n=this.props,r=n.localizer,s=n.getDrilldownView,a=n.getNow,i=n.getters.dayProp,o=n.components.header,l=void 0===o?Fu:o,c=a();return e.map(function(e,n){var a=s(e),o=r.format(e,"dayFormat"),d=i(e),u=d.className,m=d.style,h=tt.createElement(l,{date:e,label:o,localizer:r});return tt.createElement("div",{key:n,style:m,className:qi("rbc-header",u,r.isSameDate(e,c)&&"rbc-today")},a?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(n){return t.handleHeaderClick(e,a,n)}},h):tt.createElement("span",null,h))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.rtl,s=t.resources,a=t.range,i=t.events,o=t.getNow,l=t.accessors,c=t.selectable,d=t.components,u=t.getters,m=t.scrollRef,h=t.localizer,f=t.isOverflowing,p=t.components,g=p.timeGutterHeader,v=p.resourceHeader,x=void 0===v?rm:v,y=t.resizable,b={};f&&(b[r?"marginLeft":"marginRight"]="".concat(Vc()-1,"px"));var w=s.groupEvents(i);return tt.createElement("div",{style:b,ref:m,className:qi("rbc-time-header",f&&"rbc-overflowing")},tt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:n,minWidth:n,maxWidth:n}},g&&tt.createElement(g,null)),s.map(function(t,n){var s=Ui(t,2),i=s[0],m=s[1];return tt.createElement("div",{className:"rbc-time-header-content",key:i||n},m&&tt.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(n)},tt.createElement("div",{className:"rbc-header"},tt.createElement(x,{index:n,label:l.resourceTitle(m),resource:m}))),tt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(a)),tt.createElement(Lu,{isAllDay:!0,rtl:r,getNow:o,minRows:2,maxRows:e.props.allDayMaxRows+1,range:a,events:w.get(i)||[],resourceId:m&&i,className:"rbc-allday-cell",selectable:c,selected:e.props.selected,components:d,accessors:l,getters:u,localizer:h,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyDown:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:y}))}))}}])}(),am=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).handleHeaderClick=function(e,n,r){r.preventDefault(),nu(t.props.onDrillDown,[e,n])},t}return Ri(e,tt.Component),Ai(e,[{key:"renderHeaderCells",value:function(e){var t=this,n=this.props,r=n.localizer,s=n.getDrilldownView,a=n.getNow,i=n.getters.dayProp,o=n.components,l=o.header,c=void 0===l?Fu:l,d=o.resourceHeader,u=void 0===d?rm:d,m=n.resources,h=n.accessors,f=n.events,p=n.rtl,g=n.selectable,v=n.components,x=n.getters,y=n.resizable,b=a(),w=m.groupEvents(f);return e.map(function(n,o){var l=s(n),d=r.format(n,"dayFormat"),f=i(n),j=f.className,N=f.style,k=tt.createElement(c,{date:n,label:d,localizer:r});return tt.createElement("div",{key:o,className:"rbc-time-header-content rbc-resource-grouping"},tt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(e.length<=1?" rbc-time-header-cell-single-day":"")},tt.createElement("div",{style:N,className:qi("rbc-header",j,r.isSameDate(n,b)&&"rbc-today")},l?tt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(e){return t.handleHeaderClick(n,l,e)}},k):tt.createElement("span",null,k))),tt.createElement("div",{className:"rbc-row"},m.map(function(e,t){var s=Ui(e,2),a=s[0],i=s[1];return tt.createElement("div",{key:"resource_".concat(a,"_").concat(t),className:qi("rbc-header",j,r.isSameDate(n,b)&&"rbc-today")},tt.createElement(u,{index:t,label:h.resourceTitle(i),resource:i}))})),tt.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},m.map(function(e,s){var i=Ui(e,2),o=i[0],l=i[1],c=(w.get(o)||[]).filter(function(e){return r.isSameDate(e.start,n)||r.isSameDate(e.end,n)});return tt.createElement(Lu,{key:"resource_".concat(o,"_").concat(s),isAllDay:!0,rtl:p,getNow:a,minRows:2,maxRows:t.props.allDayMaxRows+1,range:[n],events:c,resourceId:l&&o,className:"rbc-allday-cell",selectable:g,selected:t.props.selected,components:v,accessors:h,getters:x,localizer:r,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyDown:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:y})})))})}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.rtl,r=e.range,s=e.scrollRef,a=e.isOverflowing,i=e.components.timeGutterHeader,o={};return a&&(o[n?"marginLeft":"marginRight"]="".concat(Vc()-1,"px")),tt.createElement("div",{style:o,ref:s,className:qi("rbc-time-header",a&&"rbc-overflowing")},tt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:t,minWidth:t,maxWidth:t}},i&&tt.createElement(i,null)),this.renderHeaderCells(r))}}])}();var im=function(e){var t=e.min,n=e.max,r=e.timeslots,s=e.step,a=e.localizer,i=e.getNow,o=e.resource,l=e.components,c=e.getters,d=e.gutterRef,u=l.timeGutterWrapper,m=Je.useMemo(function(){return function(e){var t=e.min,n=e.max,r=e.localizer;return r.getTimezoneOffset(t)!==r.getTimezoneOffset(n)?{start:r.add(t,-1,"day"),end:r.add(n,-1,"day")}:{start:t,end:n}}({min:t,max:n,localizer:a})},[null==t?void 0:t.toISOString(),null==n?void 0:n.toISOString(),a]),h=m.start,f=m.end,p=Ui(Je.useState(Wu({min:h,max:f,timeslots:r,step:s,localizer:a})),2),g=p[0],v=p[1];Je.useEffect(function(){g&&v(g.update({min:h,max:f,timeslots:r,step:s,localizer:a}))},[null==h?void 0:h.toISOString(),null==f?void 0:f.toISOString(),r,s]);var x=Je.useCallback(function(e,t){if(t)return null;var n=g.dateIsInGroup(i(),t);return tt.createElement("span",{className:qi("rbc-label",n&&"rbc-now")},a.format(e,"timeGutterFormat"))},[g,a,i]);return tt.createElement(u,{slotMetrics:g},tt.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},g.groups.map(function(e,t){return tt.createElement(Ku,{key:t,group:e,resource:o,components:l,renderSlot:x,getters:c})})))},om=tt.forwardRef(function(e,t){return tt.createElement(im,Object.assign({gutterRef:t},e))}),lm={};var cm=function(){function e(t){var n;return Ti(this,e),(n=Pi(this,e,[t])).handleScroll=function(e){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=e.target.scrollLeft)},n.handleResize=function(){ul(n.rafHandle),n.rafHandle=ml(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];nu(n.props.onKeyPressEvent,t)},n.handleSelectEvent=function(){n.clearSelection();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];nu(n.props.onSelectEvent,t)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];nu(n.props.onDoubleClickEvent,t)},n.handleShowMore=function(e,t,r,s,a){var i=n.props,o=i.popup,l=i.onDrillDown,c=i.onShowMore,d=i.getDrilldownView,u=i.doShowMoreDrillDown;if(n.clearSelection(),o){var m=sl(r,n.containerRef.current);n.setState({overlay:{date:t,events:e,position:Ei(Ei({},m),{},{width:"200px"}),target:a}})}else u&&nu(l,[t,d(t)||Td.DAY]);nu(c,[e,t,s])},n.handleSelectAllDaySlot=function(e,t){var r=n.props.onSelectSlot,s=new Date(e[0]),a=new Date(e[e.length-1]);a.setDate(e[e.length-1].getDate()+1),nu(r,{slots:e,start:s,end:a,action:t.action,resourceId:t.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var e=n.contentRef.current;if(null!=e&&e.scrollHeight){var t=e.scrollHeight>e.clientHeight;n.state.isOverflowing!==t&&(n._updatingOverflow=!0,n.setState({isOverflowing:t},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=rd(function(e,t){return function(e,t){return{map:function(n){return e?e.map(function(e,r){return n([t.resourceId(e),e],r)}):[n([lm,null],0)]},groupEvents:function(n){var r=new Map;return e?(n.forEach(function(e){var n=t.resource(e)||lm;if(Array.isArray(n))n.forEach(function(t){var n=r.get(t)||[];n.push(e),r.set(t,n)});else{var s=r.get(n)||[];s.push(e),r.set(n,s)}}),r):(r.set(lm,n),r)}}}(e,t)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=tt.createRef(),n.contentRef=tt.createRef(),n.containerRef=tt.createRef(),n._scrollRatio=null,n.gutterRef=Je.createRef(),n}return Ri(e,Je.Component),Ai(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),ul(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(e,t,n,r,s,a,i,o,l,c){var d=this.props,u=d.min,m=d.max,h=(r.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")}),f=(s.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")});return tt.createElement(nm,Object.assign({},this.props,{localizer:a,min:a.merge(e,u),max:a.merge(e,m),resource:n&&t,components:o,isNow:a.isSameDate(e,c),key:"".concat(t,"-").concat(e),date:e,events:h,backgroundEvents:f,dayLayoutAlgorithm:l}))}},{key:"renderResourcesFirst",value:function(e,t,n,r,s,a,i,o,l){var c=this;return t.map(function(t){var d=Ui(t,2),u=d[0],m=d[1];return e.map(function(e){return c.renderDayColumn(e,u,m,n,r,s,a,o,l,i)})})}},{key:"renderRangeFirst",value:function(e,t,n,r,s,a,i,o,l){var c=this;return e.map(function(e){return tt.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:e},t.map(function(t){var d=Ui(t,2),u=d[0],m=d[1];return tt.createElement("div",{style:{flex:1},key:a.resourceId(m)},c.renderDayColumn(e,u,m,n,r,s,a,o,l,i))}))})}},{key:"renderEvents",value:function(e,t,n,r){var s=this.props,a=s.accessors,i=s.localizer,o=s.resourceGroupingLayout,l=s.components,c=s.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,a),u=d.groupEvents(t),m=d.groupEvents(n);return o?this.renderRangeFirst(e,d,u,m,i,a,r,l,c):this.renderResourcesFirst(e,d,u,m,i,a,r,l,c)}},{key:"render",value:function(){var e,t=this.props,n=t.events,r=t.backgroundEvents,s=t.range,a=t.width,i=t.rtl,o=t.selected,l=t.getNow,c=t.resources,d=t.components,u=t.accessors,m=t.getters,h=t.localizer,f=t.min,p=t.max,g=t.showMultiDayTimes,v=t.longPressThreshold,x=t.resizable,y=t.resourceGroupingLayout;a=a||this.state.gutterWidth;var b=s[0],w=s[s.length-1];this.slots=s.length;var j=[],N=[],k=[];n.forEach(function(e){if(Du(e,b,w,u,h)){var t=u.start(e),n=u.end(e);u.allDay(e)||h.startAndEndAreDateOnly(t,n)||!g&&!h.isSameDate(t,n)?j.push(e):N.push(e)}}),r.forEach(function(e){Du(e,b,w,u,h)&&k.push(e)}),j.sort(function(e,t){return Mu(e,t,u,h)});var S={range:s,events:j,width:a,rtl:i,getNow:l,localizer:h,selected:o,allDayMaxRows:this.props.showAllEvents?1/0:null!==(e=this.props.allDayMaxRows)&&void 0!==e?e:1/0,resources:this.memoizedResources(c,u),selectable:this.props.selectable,accessors:u,getters:m,components:d,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:v,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:x};return tt.createElement("div",{className:qi("rbc-time-view",c&&"rbc-time-view-resources"),ref:this.containerRef},c&&c.length>1&&y?tt.createElement(am,S):tt.createElement(sm,S),this.props.popup&&this.renderOverlay(),tt.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},tt.createElement(om,{date:b,ref:this.gutterRef,localizer:h,min:h.merge(b,f),max:h.merge(b,p),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:d,className:"rbc-time-gutter",getters:m}),this.renderEvents(s,N,k,l())))}},{key:"renderOverlay",value:function(){var e,t,n=this,r=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},s=this.props,a=s.accessors,i=s.localizer,o=s.components,l=s.getters,c=s.selected,d=s.popupOffset,u=s.handleDragStart;return tt.createElement(mu,{overlay:r,accessors:a,localizer:i,components:o,getters:l,selected:c,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:u,show:!!r.position,overlayDisplay:this.overlayDisplay,onHide:function(){return n.setState({overlay:null})}})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var t,n=null!==(t=e.gutterRef)&&void 0!==t&&t.current?sd(e.gutterRef.current):void 0;n&&e.state.gutterWidth!==n&&e.setState({gutterWidth:n})})}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.min,n=e.max,r=e.scrollToTime,s=e.localizer,a=s.diff(s.merge(r,t),r,"milliseconds"),i=s.diff(t,n,"milliseconds");this._scrollRatio=a/i}}])}();cm.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var dm=["date","localizer","min","max","scrollToTime","enableAutoScroll"],um=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var t=this.props,n=t.date,r=t.localizer,s=t.min,a=void 0===s?r.startOf(new Date,"day"):s,i=t.max,o=void 0===i?r.endOf(new Date,"day"):i,l=t.scrollToTime,c=void 0===l?r.startOf(new Date,"day"):l,d=t.enableAutoScroll,u=void 0===d||d,m=Di(t,dm),h=e.range(n,{localizer:r});return tt.createElement(cm,Object.assign({},m,{range:h,eventOffset:10,localizer:r,min:a,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}();um.range=function(e,t){return[t.localizer.startOf(e,"day")]},um.navigate=function(e,t,n){var r=n.localizer;switch(t){case Sd:return r.add(e,-1,"day");case _d:return r.add(e,1,"day");default:return e}},um.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")};var mm=["date","localizer","min","max","scrollToTime","enableAutoScroll"],hm=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var t=this.props,n=t.date,r=t.localizer,s=t.min,a=void 0===s?r.startOf(new Date,"day"):s,i=t.max,o=void 0===i?r.endOf(new Date,"day"):i,l=t.scrollToTime,c=void 0===l?r.startOf(new Date,"day"):l,d=t.enableAutoScroll,u=void 0===d||d,m=Di(t,mm),h=e.range(n,this.props);return tt.createElement(cm,Object.assign({},m,{range:h,eventOffset:15,localizer:r,min:a,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}();hm.defaultProps=cm.defaultProps,hm.navigate=function(e,t,n){var r=n.localizer;switch(t){case Sd:return r.add(e,-1,"week");case _d:return r.add(e,1,"week");default:return e}},hm.range=function(e,t){var n=t.localizer,r=n.startOfWeek(),s=n.startOf(e,"week",r),a=n.endOf(e,"week",r);return n.range(s,a)},hm.title=function(e,t){var n=t.localizer,r=ad(hm.range(e,{localizer:n})),s=r[0],a=r.slice(1);return n.format({start:s,end:a.pop()},"dayRangeHeaderFormat")};var fm=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function pm(e,t){return hm.range(e,t).filter(function(e){return-1===[6,0].indexOf(e.getDay())})}var gm=function(){function e(){return Ti(this,e),Pi(this,e,arguments)}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var e=this.props,t=e.date,n=e.localizer,r=e.min,s=void 0===r?n.startOf(new Date,"day"):r,a=e.max,i=void 0===a?n.endOf(new Date,"day"):a,o=e.scrollToTime,l=void 0===o?n.startOf(new Date,"day"):o,c=e.enableAutoScroll,d=void 0===c||c,u=Di(e,fm),m=pm(t,this.props);return tt.createElement(cm,Object.assign({},u,{range:m,eventOffset:15,localizer:n,min:s,max:i,scrollToTime:l,enableAutoScroll:d}))}}])}();gm.defaultProps=cm.defaultProps,gm.range=pm,gm.navigate=hm.navigate,gm.title=function(e,t){var n=t.localizer,r=ad(pm(e,{localizer:n})),s=r[0],a=r.slice(1);return n.format({start:s,end:a.pop()},"dayRangeHeaderFormat")};function vm(e){var t=e.accessors,n=e.components,r=e.date,s=e.events,a=e.getters,i=e.length,o=void 0===i?30:i,l=e.localizer,c=e.onDoubleClickEvent,d=e.onSelectEvent,u=e.selected,m=Je.useRef(null),h=Je.useRef(null),f=Je.useRef(null),p=Je.useRef(null),g=Je.useRef(null);Je.useEffect(function(){x()});var v=function(e,r){var s="",a=n.time,i=l.messages.allDay,o=t.end(r),c=t.start(r);return t.allDay(r)||(l.eq(c,o)?i=l.format(c,"agendaTimeFormat"):l.isSameDate(c,o)?i=l.format({start:c,end:o},"agendaTimeRangeFormat"):l.isSameDate(e,c)?i=l.format(c,"agendaTimeFormat"):l.isSameDate(e,o)&&(i=l.format(o,"agendaTimeFormat"))),l.gt(e,c,"day")&&(s="rbc-continues-prior"),l.lt(e,o,"day")&&(s+=" rbc-continues-after"),tt.createElement("span",{className:s.trim()},a?tt.createElement(a,{event:r,day:e,label:i}):i)},x=function(){if(g.current){var e=m.current,t=g.current.firstChild;if(t){var n=p.current.scrollHeight>p.current.clientHeight,r=[],s=r;r=[sd(t.children[0]),sd(t.children[1])],s[0]===r[0]&&s[1]===r[1]||(h.current.style.width=r[0]+"px",f.current.style.width=r[1]+"px"),n?(Ut(e,"rbc-header-overflowing"),e.style.marginRight=Vc()+"px"):Bt(e,"rbc-header-overflowing")}}},y=l.messages,b=l.add(r,o,"day"),w=l.range(r,b,"day");return(s=s.filter(function(e){return Du(e,l.startOf(r,"day"),l.endOf(b,"day"),t,l)})).sort(function(e,n){return+t.start(e)-+t.start(n)}),tt.createElement("div",{className:"rbc-agenda-view"},0!==s.length?tt.createElement(tt.Fragment,null,tt.createElement("table",{ref:m,className:"rbc-agenda-table"},tt.createElement("thead",null,tt.createElement("tr",null,tt.createElement("th",{className:"rbc-header",ref:h},y.date),tt.createElement("th",{className:"rbc-header",ref:f},y.time),tt.createElement("th",{className:"rbc-header"},y.event)))),tt.createElement("div",{className:"rbc-agenda-content",ref:p},tt.createElement("table",{className:"rbc-agenda-table"},tt.createElement("tbody",{ref:g},w.map(function(e,r){return function(e,r,s){var i=n.event,o=n.date;return r=r.filter(function(n){return Du(n,l.startOf(e,"day"),l.endOf(e,"day"),t,l)}),r.map(function(n,m){var h=t.title(n),f=t.end(n),p=t.start(n),g=a.eventProp(n,p,f,iu(n,u)),x=0===m&&l.format(e,"agendaDateFormat"),y=0===m&&tt.createElement("td",{rowSpan:r.length,className:"rbc-agenda-date-cell"},o?tt.createElement(o,{day:e,label:x}):x);return tt.createElement("tr",{key:s+"_"+m,className:g.className,style:g.style},y,tt.createElement("td",{className:"rbc-agenda-time-cell"},v(e,n)),tt.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return d&&d(n,e)},onDoubleClick:function(e){return c&&c(n,e)}},i?tt.createElement(i,{event:n,title:h}):h))},[])}(e,s,r)}))))):tt.createElement("span",{className:"rbc-agenda-empty"},y.noEventsInRange))}vm.range=function(e,t){var n=t.length,r=void 0===n?30:n;return{start:e,end:t.localizer.add(e,r,"day")}},vm.navigate=function(e,t,n){var r=n.length,s=void 0===r?30:r,a=n.localizer;switch(t){case Sd:return a.add(e,-s,"day");case _d:return a.add(e,s,"day");default:return e}},vm.title=function(e,t){var n=t.length,r=void 0===n?30:n,s=t.localizer,a=s.add(e,r,"day");return s.format({start:e,end:a},"agendaHeaderFormat")};var xm=Si(Si(Si(Si(Si({},Td.MONTH,Bu),Td.WEEK,hm),Td.WORK_WEEK,gm),Td.DAY,um),Td.AGENDA,vm),ym=["action","date","today"];var bm=function(e){return function(t){return function(e,t){var n=null;return"function"==typeof t?n=t(e):"string"==typeof t&&"object"===Ni(e)&&null!=e&&t in e&&(n=e[t]),n}(t,e)}},wm=["view","date","getNow","onNavigate"],jm=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Nm(e){if(Array.isArray(e))return e;for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var s=Ui(r[n],2),a=s[0];s[1]&&t.push(a)}return t}var km=function(){function e(){var t;Ti(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Pi(this,e,[].concat(r))).getViews=function(){var e=t.props.views;return Array.isArray(e)?Nd(e,function(e,t){return e[t]=xm[t]},{}):"object"===Ni(e)?qt(e,function(e,t){return!0===e?xm[t]:e}):xm},t.getView=function(){return t.getViews()[t.props.view]},t.getDrilldownView=function(e){var n=t.props,r=n.view,s=n.drilldownView,a=n.getDrilldownView;return a?a(e,r,Object.keys(t.getViews())):s},t.handleRangeChange=function(e,n,r){var s=t.props,a=s.onRangeChange,i=s.localizer;a&&n.range&&a(n.range(e,{localizer:i}),r)},t.handleNavigate=function(e,n){var r=t.props,s=r.view,a=r.date,i=r.getNow,o=r.onNavigate,l=Di(r,wm),c=t.getView(),d=i();a=function(e,t){var n=t.action,r=t.date,s=t.today,a=Di(t,ym);switch(e="string"==typeof e?xm[e]:e,n){case Ed:r=s||new Date;break;case Dd:break;default:Yi(e&&"function"==typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),r=e.navigate(r,n,a)}return r}(c,Ei(Ei({},l),{},{action:e,date:n||a||d,today:d})),o(a,s,e),t.handleRangeChange(a,c)},t.handleViewChange=function(e){e!==t.props.view&&function(e,t){return-1!==Nm(t.views).indexOf(e)}(e,t.props)&&t.props.onView(e);var n=t.getViews();t.handleRangeChange(t.props.date||t.props.getNow(),n[e],e)},t.handleSelectEvent=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onSelectEvent,n)},t.handleDoubleClickEvent=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onDoubleClickEvent,n)},t.handleKeyPressEvent=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];nu(t.props.onKeyPressEvent,n)},t.handleSelectSlot=function(e){nu(t.props.onSelectSlot,e)},t.handleDrillDown=function(e,n){var r=t.props.onDrillDown;r?r(e,n,t.drilldownView):(n&&t.handleViewChange(n),t.handleNavigate(Dd,e))},t.state={context:e.getContext(t.props)},t}return Ri(e,tt.Component),Ai(e,[{key:"render",value:function(){var e=this.props,t=e.view,n=e.toolbar,r=e.events,s=e.backgroundEvents,a=e.resourceGroupingLayout,i=e.style,o=e.className,l=e.elementProps,c=e.date,d=e.getNow,u=e.length,m=e.showMultiDayTimes,h=e.onShowMore,f=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var p=Di(e,jm);c=c||d();var g=this.getView(),v=this.state.context,x=v.accessors,y=v.components,b=v.getters,w=v.localizer,j=v.viewNames,N=y.toolbar||tu,k=g.title(c,{localizer:w,length:u});return tt.createElement("div",Object.assign({},l,{className:qi(o,"rbc-calendar",p.rtl&&"rbc-rtl"),style:i}),n&&tt.createElement(N,{date:c,view:t,views:j,label:k,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:w}),tt.createElement(g,Object.assign({},p,{events:r,backgroundEvents:s,date:c,getNow:d,length:u,localizer:w,getters:b,components:y,accessors:x,showMultiDayTimes:m,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:h,doShowMoreDrillDown:f,resourceGroupingLayout:a})))}}],[{key:"getDerivedStateFromProps",value:function(t){return{context:e.getContext(t)}}},{key:"getContext",value:function(e){var t=e.startAccessor,n=e.endAccessor,r=e.allDayAccessor,s=e.tooltipAccessor,a=e.titleAccessor,i=e.resourceAccessor,o=e.resourceIdAccessor,l=e.resourceTitleAccessor,c=e.eventIdAccessor,d=e.eventPropGetter,u=e.backgroundEventPropGetter,m=e.slotPropGetter,h=e.slotGroupPropGetter,f=e.dayPropGetter,p=e.view,g=e.views,v=e.localizer,x=e.culture,y=e.messages,b=void 0===y?{}:y,w=e.components,j=void 0===w?{}:w,N=e.formats,k=void 0===N?{}:N,S=Nm(g);return{viewNames:S,localizer:eu(v,x,k,function(e){return Ei(Ei({},ru),e)}(b)),getters:{eventProp:function(){return d&&d.apply(void 0,arguments)||{}},backgroundEventProp:function(){return u&&u.apply(void 0,arguments)||{}},slotProp:function(){return m&&m.apply(void 0,arguments)||{}},slotGroupProp:function(){return h&&h.apply(void 0,arguments)||{}},dayProp:function(){return f&&f.apply(void 0,arguments)||{}}},components:md(j[p]||{},zt(j,S),{eventWrapper:kd,backgroundEventWrapper:kd,eventContainerWrapper:kd,dateCellWrapper:kd,weekWrapper:kd,timeSlotWrapper:kd,timeGutterWrapper:kd}),accessors:{start:bm(t),end:bm(n),allDay:bm(r),tooltip:bm(s),title:bm(a),resource:bm(i),resourceId:bm(o),resourceTitle:bm(l),eventId:bm(c)}}}}])}();km.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Td.MONTH,views:[Td.MONTH,Td.WEEK,Td.DAY,Td.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Td.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Sm,_m,Em=function e(t,n,r){void 0===r&&(r=[]);var s,a=t.displayName||t.name||"Component",i=!!(s=t)&&("function"!=typeof s||s.prototype&&s.prototype.isReactComponent),o=Object.keys(n),l=o.map($i);!i&&r.length&&Yi(!1);var c=function(e){function s(){for(var t,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];(t=e.call.apply(e,[this].concat(a))||this).handlers=Object.create(null),o.forEach(function(e){var r=n[e];t.handlers[r]=function(n){if(t.props[r]){var s;t._notifying=!0;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(s=t.props)[r].apply(s,[n].concat(i)),t._notifying=!1}t.unmounted||t.setState(function(t){var r,s=t.values;return{values:yt(Object.create(null),s,(r={},r[e]=n,r))}})}}),r.length&&(t.attachRef=function(e){t.inner=e});var l=Object.create(null);return o.forEach(function(e){l[e]=t.props[$i(e)]}),t.state={values:l,prevProps:{}},t}xt(s,e);var a=s.prototype;return a.shouldComponentUpdate=function(){return!this._notifying},s.getDerivedStateFromProps=function(e,t){var n=t.values,r=t.prevProps,s={values:yt(Object.create(null),n),prevProps:{}};return o.forEach(function(t){s.prevProps[t]=e[t],!Vi(e,t)&&Vi(r,t)&&(s.values[t]=e[$i(t)])}),s},a.componentWillUnmount=function(){this.unmounted=!0},a.render=function(){var e=this,n=this.props,r=n.innerRef,s=pt(n,["innerRef"]);l.forEach(function(e){delete s[e]});var a={};return o.forEach(function(t){var n=e.props[t];a[t]=void 0!==n?n:e.state.values[t]}),tt.createElement(t,yt({},s,a,this.handlers,{ref:r||this.attachRef}))},s}(tt.Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==s){var a=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+a+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Gi,t.componentWillReceiveProps=Ki),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Qi;var o=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;o.call(this,e,t,r)}}}(c),c.displayName="Uncontrolled("+a+")",c.propTypes=yt({innerRef:function(){}},function(e){var t={};return Object.keys(e).forEach(function(e){t[$i(e)]=Hi}),t}(n)),r.forEach(function(e){c.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}});var d=c;return tt.forwardRef&&((d=tt.forwardRef(function(e,t){return tt.createElement(c,yt({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))})).propTypes=c.propTypes),d.ControlledComponent=t,d.deferControlTo=function(t,r,s){return void 0===r&&(r={}),e(t,yt({},n,r),s)},d}(km,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),Dm=function(e,t,n){var r=e.start,s=e.end;return n.format(r,"LT",t)+"  "+n.format(s,"LT",t)},Tm={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Dm,eventTimeRangeFormat:Dm,eventTimeRangeStartFormat:function(e,t,n){var r=e.start;return n.format(r,"LT",t)+"  "},eventTimeRangeEndFormat:function(e,t,n){var r=e.end;return"  "+n.format(r,"LT",t)},timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:function(e,t,n){var r=e.start,s=e.end;return n.format(r,"MMMM DD",t)+"  "+n.format(s,n.eq(r,s,"month")?"DD":"MMMM DD",t)},agendaHeaderFormat:function(e,t,n){var r=e.start,s=e.end;return n.format(r,"L",t)+"  "+n.format(s,"L",t)},agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Dm};function Mm(e){var t=e?e.toLowerCase():e;return"FullYear"===t?t="year":t||(t=void 0),t}function Am(){return Sm.apply(null,arguments)}function Cm(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function Om(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function Pm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rm(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(Pm(e,t))return!1;return!0}function Im(e){return void 0===e}function Lm(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function Fm(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function zm(e,t){var n,r=[],s=e.length;for(n=0;n<s;++n)r.push(t(e[n],n));return r}function Um(e,t){for(var n in t)Pm(t,n)&&(e[n]=t[n]);return Pm(t,"toString")&&(e.toString=t.toString),Pm(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Bm(e,t,n,r){return cp(e,t,n,r,!0).utc()}function qm(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function Wm(e){var t=null,n=!1,r=e._d&&!isNaN(e._d.getTime());return r&&(t=qm(e),n=_m.call(t.parsedDateParts,function(e){return null!=e}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?r:(e._isValid=r,e._isValid)}function Ym(e){var t=Bm(NaN);return null!=e?Um(qm(t),e):qm(t).userInvalidated=!0,t}_m=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var Hm=Am.momentProperties=[],Vm=!1;function $m(e,t){var n,r,s,a=Hm.length;if(Im(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Im(t._i)||(e._i=t._i),Im(t._f)||(e._f=t._f),Im(t._l)||(e._l=t._l),Im(t._strict)||(e._strict=t._strict),Im(t._tzm)||(e._tzm=t._tzm),Im(t._isUTC)||(e._isUTC=t._isUTC),Im(t._offset)||(e._offset=t._offset),Im(t._pf)||(e._pf=qm(t)),Im(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)Im(s=t[r=Hm[n]])||(e[r]=s);return e}function Gm(e){$m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Vm&&(Vm=!0,Am.updateOffset(this),Vm=!1)}function Km(e){return e instanceof Gm||null!=e&&null!=e._isAMomentObject}function Qm(e){!1===Am.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn}function Xm(e,t){var n=!0;return Um(function(){if(null!=Am.deprecationHandler&&Am.deprecationHandler(null,e),n){var r,s,a,i=[],o=arguments.length;for(s=0;s<o;s++){if(r="","object"==typeof arguments[s]){for(a in r+="\n["+s+"] ",arguments[0])Pm(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}Qm((Array.prototype.slice.call(i).join(""),(new Error).stack)),n=!1}return t.apply(this,arguments)},t)}var Zm,Jm={};function eh(e,t){null!=Am.deprecationHandler&&Am.deprecationHandler(e,t),Jm[e]||(Qm(),Jm[e]=!0)}function th(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function nh(e,t){var n,r=Um({},e);for(n in t)Pm(t,n)&&(Om(e[n])&&Om(t[n])?(r[n]={},Um(r[n],e[n]),Um(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)Pm(e,n)&&!Pm(t,n)&&Om(e[n])&&(r[n]=Um({},r[n]));return r}function rh(e){null!=e&&this.set(e)}Am.suppressDeprecationWarnings=!1,Am.deprecationHandler=null,Zm=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)Pm(e,t)&&n.push(t);return n};function sh(e,t,n){var r=""+Math.abs(e),s=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var ah=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ih=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,oh={},lh={};function ch(e,t,n,r){var s=r;"string"==typeof r&&(s=function(){return this[r]()}),e&&(lh[e]=s),t&&(lh[t[0]]=function(){return sh(s.apply(this,arguments),t[1],t[2])}),n&&(lh[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function dh(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function uh(e,t){return e.isValid()?(t=mh(t,e.localeData()),oh[t]=oh[t]||function(e){var t,n,r=e.match(ah);for(t=0,n=r.length;t<n;t++)lh[r[t]]?r[t]=lh[r[t]]:r[t]=dh(r[t]);return function(t){var s,a="";for(s=0;s<n;s++)a+=th(r[s])?r[s].call(t,e):r[s];return a}}(t),oh[t](e)):e.localeData().invalidDate()}function mh(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(ih.lastIndex=0;n>=0&&ih.test(e);)e=e.replace(ih,r),ih.lastIndex=0,n-=1;return e}var hh={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function fh(e){return"string"==typeof e?hh[e]||hh[e.toLowerCase()]:void 0}function ph(e){var t,n,r={};for(n in e)Pm(e,n)&&(t=fh(n))&&(r[t]=e[n]);return r}var gh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};var vh,xh=/\d/,yh=/\d\d/,bh=/\d{3}/,wh=/\d{4}/,jh=/[+-]?\d{6}/,Nh=/\d\d?/,kh=/\d\d\d\d?/,Sh=/\d\d\d\d\d\d?/,_h=/\d{1,3}/,Eh=/\d{1,4}/,Dh=/[+-]?\d{1,6}/,Th=/\d+/,Mh=/[+-]?\d+/,Ah=/Z|[+-]\d\d:?\d\d/gi,Ch=/Z|[+-]\d\d(?::?\d\d)?/gi,Oh=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ph=/^[1-9]\d?/,Rh=/^([1-9]\d|\d)/;function Ih(e,t,n){vh[e]=th(t)?t:function(e,r){return e&&n?n:t}}function Lh(e,t){return Pm(vh,e)?vh[e](t._strict,t._locale):new RegExp(Fh(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,s){return t||n||r||s})))}function Fh(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function zh(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Uh(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=zh(t)),n}vh={};var Bh={};function qh(e,t){var n,r,s=t;for("string"==typeof e&&(e=[e]),Lm(t)&&(s=function(e,n){n[t]=Uh(e)}),r=e.length,n=0;n<r;n++)Bh[e[n]]=s}function Wh(e,t){qh(e,function(e,n,r,s){r._w=r._w||{},t(e,r._w,r,s)})}function Yh(e,t,n){null!=t&&Pm(Bh,e)&&Bh[e](t,n._a,n,e)}function Hh(e){return e%4==0&&e%100!=0||e%400==0}var Vh=0,$h=1,Gh=2,Kh=3,Qh=4,Xh=5,Zh=6,Jh=7,ef=8;function tf(e){return Hh(e)?366:365}ch("Y",0,0,function(){var e=this.year();return e<=9999?sh(e,4):"+"+e}),ch(0,["YY",2],0,function(){return this.year()%100}),ch(0,["YYYY",4],0,"year"),ch(0,["YYYYY",5],0,"year"),ch(0,["YYYYYY",6,!0],0,"year"),Ih("Y",Mh),Ih("YY",Nh,yh),Ih("YYYY",Eh,wh),Ih("YYYYY",Dh,jh),Ih("YYYYYY",Dh,jh),qh(["YYYYY","YYYYYY"],Vh),qh("YYYY",function(e,t){t[Vh]=2===e.length?Am.parseTwoDigitYear(e):Uh(e)}),qh("YY",function(e,t){t[Vh]=Am.parseTwoDigitYear(e)}),qh("Y",function(e,t){t[Vh]=parseInt(e,10)}),Am.parseTwoDigitYear=function(e){return Uh(e)+(Uh(e)>68?1900:2e3)};var nf,rf=sf("FullYear",!0);function sf(e,t){return function(n){return null!=n?(of(this,e,n),Am.updateOffset(this,t),this):af(this,e)}}function af(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function of(e,t,n){var r,s,a,i,o;if(e.isValid()&&!isNaN(n)){switch(r=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(s?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(s?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(s?r.setUTCHours(n):r.setHours(n));case"Date":return void(s?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}a=n,i=e.month(),o=29!==(o=e.date())||1!==i||Hh(a)?o:28,s?r.setUTCFullYear(a,i,o):r.setFullYear(a,i,o)}}function lf(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?Hh(e)?29:28:31-r%7%2}nf=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},ch("M",["MM",2],"Mo",function(){return this.month()+1}),ch("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),ch("MMMM",0,0,function(e){return this.localeData().months(this,e)}),Ih("M",Nh,Ph),Ih("MM",Nh,yh),Ih("MMM",function(e,t){return t.monthsShortRegex(e)}),Ih("MMMM",function(e,t){return t.monthsRegex(e)}),qh(["M","MM"],function(e,t){t[$h]=Uh(e)-1}),qh(["MMM","MMMM"],function(e,t,n,r){var s=n._locale.monthsParse(e,r,n._strict);null!=s?t[$h]=s:qm(n).invalidMonth=e});var cf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),df="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),uf=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,mf=Oh,hf=Oh;function ff(e,t,n){var r,s,a,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=Bm([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=nf.call(this._shortMonthsParse,i))?s:null:-1!==(s=nf.call(this._longMonthsParse,i))?s:null:"MMM"===t?-1!==(s=nf.call(this._shortMonthsParse,i))||-1!==(s=nf.call(this._longMonthsParse,i))?s:null:-1!==(s=nf.call(this._longMonthsParse,i))||-1!==(s=nf.call(this._shortMonthsParse,i))?s:null}function pf(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Uh(t);else if(!Lm(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,lf(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function gf(e){return null!=e?(pf(this,e),Am.updateOffset(this,!0),this):af(this,"Month")}function vf(){function e(e,t){return t.length-e.length}var t,n,r,s,a=[],i=[],o=[];for(t=0;t<12;t++)n=Bm([2e3,t]),r=Fh(this.monthsShort(n,"")),s=Fh(this.months(n,"")),a.push(r),i.push(s),o.push(s),o.push(r);a.sort(e),i.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function xf(e,t,n,r,s,a,i){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,s,a,i),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,s,a,i),o}function yf(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bf(e,t,n){var r=7+t-n;return-((7+yf(e,0,r).getUTCDay()-t)%7)+r-1}function wf(e,t,n,r,s){var a,i,o=1+7*(t-1)+(7+n-r)%7+bf(e,r,s);return o<=0?i=tf(a=e-1)+o:o>tf(e)?(a=e+1,i=o-tf(e)):(a=e,i=o),{year:a,dayOfYear:i}}function jf(e,t,n){var r,s,a=bf(e.year(),t,n),i=Math.floor((e.dayOfYear()-a-1)/7)+1;return i<1?r=i+Nf(s=e.year()-1,t,n):i>Nf(e.year(),t,n)?(r=i-Nf(e.year(),t,n),s=e.year()+1):(s=e.year(),r=i),{week:r,year:s}}function Nf(e,t,n){var r=bf(e,t,n),s=bf(e+1,t,n);return(tf(e)-r+s)/7}ch("w",["ww",2],"wo","week"),ch("W",["WW",2],"Wo","isoWeek"),Ih("w",Nh,Ph),Ih("ww",Nh,yh),Ih("W",Nh,Ph),Ih("WW",Nh,yh),Wh(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=Uh(e)});function kf(e,t){return e.slice(t,7).concat(e.slice(0,t))}ch("d",0,"do","day"),ch("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),ch("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),ch("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),ch("e",0,0,"weekday"),ch("E",0,0,"isoWeekday"),Ih("d",Nh),Ih("e",Nh),Ih("E",Nh),Ih("dd",function(e,t){return t.weekdaysMinRegex(e)}),Ih("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Ih("dddd",function(e,t){return t.weekdaysRegex(e)}),Wh(["dd","ddd","dddd"],function(e,t,n,r){var s=n._locale.weekdaysParse(e,r,n._strict);null!=s?t.d=s:qm(n).invalidWeekday=e}),Wh(["d","e","E"],function(e,t,n,r){t[r]=Uh(e)});var Sf="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_f="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ef="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Df=Oh,Tf=Oh,Mf=Oh;function Af(e,t,n){var r,s,a,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=Bm([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=nf.call(this._weekdaysParse,i))?s:null:"ddd"===t?-1!==(s=nf.call(this._shortWeekdaysParse,i))?s:null:-1!==(s=nf.call(this._minWeekdaysParse,i))?s:null:"dddd"===t?-1!==(s=nf.call(this._weekdaysParse,i))||-1!==(s=nf.call(this._shortWeekdaysParse,i))||-1!==(s=nf.call(this._minWeekdaysParse,i))?s:null:"ddd"===t?-1!==(s=nf.call(this._shortWeekdaysParse,i))||-1!==(s=nf.call(this._weekdaysParse,i))||-1!==(s=nf.call(this._minWeekdaysParse,i))?s:null:-1!==(s=nf.call(this._minWeekdaysParse,i))||-1!==(s=nf.call(this._weekdaysParse,i))||-1!==(s=nf.call(this._shortWeekdaysParse,i))?s:null}function Cf(){function e(e,t){return t.length-e.length}var t,n,r,s,a,i=[],o=[],l=[],c=[];for(t=0;t<7;t++)n=Bm([2e3,1]).day(t),r=Fh(this.weekdaysMin(n,"")),s=Fh(this.weekdaysShort(n,"")),a=Fh(this.weekdays(n,"")),i.push(r),o.push(s),l.push(a),c.push(r),c.push(s),c.push(a);i.sort(e),o.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Of(){return this.hours()%12||12}function Pf(e,t){ch(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Rf(e,t){return t._meridiemParse}ch("H",["HH",2],0,"hour"),ch("h",["hh",2],0,Of),ch("k",["kk",2],0,function(){return this.hours()||24}),ch("hmm",0,0,function(){return""+Of.apply(this)+sh(this.minutes(),2)}),ch("hmmss",0,0,function(){return""+Of.apply(this)+sh(this.minutes(),2)+sh(this.seconds(),2)}),ch("Hmm",0,0,function(){return""+this.hours()+sh(this.minutes(),2)}),ch("Hmmss",0,0,function(){return""+this.hours()+sh(this.minutes(),2)+sh(this.seconds(),2)}),Pf("a",!0),Pf("A",!1),Ih("a",Rf),Ih("A",Rf),Ih("H",Nh,Rh),Ih("h",Nh,Ph),Ih("k",Nh,Ph),Ih("HH",Nh,yh),Ih("hh",Nh,yh),Ih("kk",Nh,yh),Ih("hmm",kh),Ih("hmmss",Sh),Ih("Hmm",kh),Ih("Hmmss",Sh),qh(["H","HH"],Kh),qh(["k","kk"],function(e,t,n){var r=Uh(e);t[Kh]=24===r?0:r}),qh(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),qh(["h","hh"],function(e,t,n){t[Kh]=Uh(e),qm(n).bigHour=!0}),qh("hmm",function(e,t,n){var r=e.length-2;t[Kh]=Uh(e.substr(0,r)),t[Qh]=Uh(e.substr(r)),qm(n).bigHour=!0}),qh("hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[Kh]=Uh(e.substr(0,r)),t[Qh]=Uh(e.substr(r,2)),t[Xh]=Uh(e.substr(s)),qm(n).bigHour=!0}),qh("Hmm",function(e,t,n){var r=e.length-2;t[Kh]=Uh(e.substr(0,r)),t[Qh]=Uh(e.substr(r))}),qh("Hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[Kh]=Uh(e.substr(0,r)),t[Qh]=Uh(e.substr(r,2)),t[Xh]=Uh(e.substr(s))});var If=sf("Hours",!0);var Lf,Ff={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:cf,monthsShort:df,week:{dow:0,doy:6},weekdays:Sf,weekdaysMin:Ef,weekdaysShort:_f,meridiemParse:/[ap]\.?m?\.?/i},zf={},Uf={};function Bf(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function qf(e){return e?e.toLowerCase().replace("_","-"):e}function Wf(e){var t=null;if(void 0===zf[e]&&"undefined"!=typeof module&&module&&module.exports&&function(e){return!(!e||!e.match("^[^/\\\\]*$"))}(e))try{t=Lf._abbr,require("./locale/"+e),Yf(t)}catch(tj){zf[e]=null}return zf[e]}function Yf(e,t){var n;return e&&((n=Im(t)?Vf(e):Hf(e,t))?Lf=n:"undefined"!=typeof console&&console.warn),Lf._abbr}function Hf(e,t){if(null!==t){var n,r=Ff;if(t.abbr=e,null!=zf[e])eh("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=zf[e]._config;else if(null!=t.parentLocale)if(null!=zf[t.parentLocale])r=zf[t.parentLocale]._config;else{if(null==(n=Wf(t.parentLocale)))return Uf[t.parentLocale]||(Uf[t.parentLocale]=[]),Uf[t.parentLocale].push({name:e,config:t}),null;r=n._config}return zf[e]=new rh(nh(r,t)),Uf[e]&&Uf[e].forEach(function(e){Hf(e.name,e.config)}),Yf(e),zf[e]}return delete zf[e],null}function Vf(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Lf;if(!Cm(e)){if(t=Wf(e))return t;e=[e]}return function(e){for(var t,n,r,s,a=0;a<e.length;){for(t=(s=qf(e[a]).split("-")).length,n=(n=qf(e[a+1]))?n.split("-"):null;t>0;){if(r=Wf(s.slice(0,t).join("-")))return r;if(n&&n.length>=t&&Bf(s,n)>=t-1)break;t--}a++}return Lf}(e)}function $f(e){var t,n=e._a;return n&&-2===qm(e).overflow&&(t=n[$h]<0||n[$h]>11?$h:n[Gh]<1||n[Gh]>lf(n[Vh],n[$h])?Gh:n[Kh]<0||n[Kh]>24||24===n[Kh]&&(0!==n[Qh]||0!==n[Xh]||0!==n[Zh])?Kh:n[Qh]<0||n[Qh]>59?Qh:n[Xh]<0||n[Xh]>59?Xh:n[Zh]<0||n[Zh]>999?Zh:-1,qm(e)._overflowDayOfYear&&(t<Vh||t>Gh)&&(t=Gh),qm(e)._overflowWeeks&&-1===t&&(t=Jh),qm(e)._overflowWeekday&&-1===t&&(t=ef),qm(e).overflow=t),e}var Gf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qf=/Z|[+-]\d\d(?::?\d\d)?/,Xf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Zf=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jf=/^\/?Date\((-?\d+)/i,ep=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,tp={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function np(e){var t,n,r,s,a,i,o=e._i,l=Gf.exec(o)||Kf.exec(o),c=Xf.length,d=Zf.length;if(l){for(qm(e).iso=!0,t=0,n=c;t<n;t++)if(Xf[t][1].exec(l[1])){s=Xf[t][0],r=!1!==Xf[t][2];break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,n=d;t<n;t++)if(Zf[t][1].exec(l[3])){a=(l[2]||" ")+Zf[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(l[4]){if(!Qf.exec(l[4]))return void(e._isValid=!1);i="Z"}e._f=s+(a||"")+(i||""),op(e)}else e._isValid=!1}function rp(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function sp(e){var t,n,r,s,a,i,o,l,c=ep.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],r=c[3],s=c[2],a=c[5],i=c[6],o=c[7],l=[rp(n),df.indexOf(r),parseInt(s,10),parseInt(a,10),parseInt(i,10)],o&&l.push(parseInt(o,10)),t=l,!function(e,t,n){return!e||_f.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(qm(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return tp[e];if(t)return 0;var r=parseInt(n,10),s=r%100;return(r-s)/100*60+s}(c[8],c[9],c[10]),e._d=yf.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),qm(e).rfc2822=!0}else e._isValid=!1}function ap(e,t,n){return null!=e?e:null!=t?t:n}function ip(e){var t,n,r,s,a,i=[];if(!e._d){for(r=function(e){var t=new Date(Am.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Gh]&&null==e._a[$h]&&function(e){var t,n,r,s,a,i,o,l,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,i=4,n=ap(t.GG,e._a[Vh],jf(dp(),1,4).year),r=ap(t.W,1),((s=ap(t.E,1))<1||s>7)&&(l=!0)):(a=e._locale._week.dow,i=e._locale._week.doy,c=jf(dp(),a,i),n=ap(t.gg,e._a[Vh],c.year),r=ap(t.w,c.week),null!=t.d?((s=t.d)<0||s>6)&&(l=!0):null!=t.e?(s=t.e+a,(t.e<0||t.e>6)&&(l=!0)):s=a);r<1||r>Nf(n,a,i)?qm(e)._overflowWeeks=!0:null!=l?qm(e)._overflowWeekday=!0:(o=wf(n,r,s,a,i),e._a[Vh]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=ap(e._a[Vh],r[Vh]),(e._dayOfYear>tf(a)||0===e._dayOfYear)&&(qm(e)._overflowDayOfYear=!0),n=yf(a,0,e._dayOfYear),e._a[$h]=n.getUTCMonth(),e._a[Gh]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Kh]&&0===e._a[Qh]&&0===e._a[Xh]&&0===e._a[Zh]&&(e._nextDay=!0,e._a[Kh]=0),e._d=(e._useUTC?yf:xf).apply(null,i),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Kh]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(qm(e).weekdayMismatch=!0)}}function op(e){if(e._f!==Am.ISO_8601)if(e._f!==Am.RFC_2822){e._a=[],qm(e).empty=!0;var t,n,r,s,a,i,o,l=""+e._i,c=l.length,d=0;for(o=(r=mh(e._f,e._locale).match(ah)||[]).length,t=0;t<o;t++)s=r[t],(n=(l.match(Lh(s,e))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&qm(e).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),d+=n.length),lh[s]?(n?qm(e).empty=!1:qm(e).unusedTokens.push(s),Yh(s,n,e)):e._strict&&!n&&qm(e).unusedTokens.push(s);qm(e).charsLeftOver=c-d,l.length>0&&qm(e).unusedInput.push(l),e._a[Kh]<=12&&!0===qm(e).bigHour&&e._a[Kh]>0&&(qm(e).bigHour=void 0),qm(e).parsedDateParts=e._a.slice(0),qm(e).meridiem=e._meridiem,e._a[Kh]=function(e,t,n){var r;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[Kh],e._meridiem),null!==(i=qm(e).era)&&(e._a[Vh]=e._locale.erasConvertYear(i,e._a[Vh])),ip(e),$f(e)}else sp(e);else np(e)}function lp(e){var t=e._i,n=e._f;return e._locale=e._locale||Vf(e._l),null===t||void 0===n&&""===t?Ym({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),Km(t)?new Gm($f(t)):(Fm(t)?e._d=t:Cm(n)?function(e){var t,n,r,s,a,i,o=!1,l=e._f.length;if(0===l)return qm(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<l;s++)a=0,i=!1,t=$m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],op(t),Wm(t)&&(i=!0),a+=qm(t).charsLeftOver,a+=10*qm(t).unusedTokens.length,qm(t).score=a,o?a<r&&(r=a,n=t):(null==r||a<r||i)&&(r=a,n=t,i&&(o=!0));Um(e,n||t)}(e):n?op(e):function(e){var t=e._i;Im(t)?e._d=new Date(Am.now()):Fm(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=Jf.exec(e._i);null===t?(np(e),!1===e._isValid&&(delete e._isValid,sp(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:Am.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):Cm(t)?(e._a=zm(t.slice(0),function(e){return parseInt(e,10)}),ip(e)):Om(t)?function(e){if(!e._d){var t=ph(e._i),n=void 0===t.day?t.date:t.day;e._a=zm([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ip(e)}}(e):Lm(t)?e._d=new Date(t):Am.createFromInputFallback(e)}(e),Wm(e)||(e._d=null),e))}function cp(e,t,n,r,s){var a,i={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(Om(e)&&Rm(e)||Cm(e)&&0===e.length)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=n,i._i=e,i._f=t,i._strict=r,(a=new Gm($f(lp(i))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function dp(e,t,n,r){return cp(e,t,n,r,!1)}Am.createFromInputFallback=Xm("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Am.ISO_8601=function(){},Am.RFC_2822=function(){};var up=Xm("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=dp.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Ym()}),mp=Xm("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=dp.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Ym()});function hp(e,t){var n,r;if(1===t.length&&Cm(t[0])&&(t=t[0]),!t.length)return dp();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var fp=["year","quarter","month","week","day","hour","minute","second","millisecond"];function pp(e){var t=ph(e),n=t.year||0,r=t.quarter||0,s=t.month||0,a=t.week||t.isoWeek||0,i=t.day||0,o=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,r=!1,s=fp.length;for(t in e)if(Pm(e,t)&&(-1===nf.call(fp,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<s;++n)if(e[fp[n]]){if(r)return!1;parseFloat(e[fp[n]])!==Uh(e[fp[n]])&&(r=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*o*60*60,this._days=+i+7*a,this._months=+s+3*r+12*n,this._data={},this._locale=Vf(),this._bubble()}function gp(e){return e instanceof pp}function vp(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function xp(e,t){ch(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+sh(~~(e/60),2)+t+sh(~~e%60,2)})}xp("Z",":"),xp("ZZ",""),Ih("Z",Ch),Ih("ZZ",Ch),qh(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=bp(Ch,e)});var yp=/([\+\-]|\d\d)/gi;function bp(e,t){var n,r,s=(t||"").match(e);return null===s?null:0===(r=60*(n=((s[s.length-1]||[])+"").match(yp)||["-",0,0])[1]+Uh(n[2]))?0:"+"===n[0]?r:-r}function wp(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Km(e)||Fm(e)?e.valueOf():dp(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Am.updateOffset(n,!1),n):dp(e).local()}function jp(e){return-Math.round(e._d.getTimezoneOffset())}function Np(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}Am.updateOffset=function(){};var kp=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Sp=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function _p(e,t){var n,r,s,a=e,i=null;return gp(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:Lm(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(i=kp.exec(e))?(n="-"===i[1]?-1:1,a={y:0,d:Uh(i[Gh])*n,h:Uh(i[Kh])*n,m:Uh(i[Qh])*n,s:Uh(i[Xh])*n,ms:Uh(vp(1e3*i[Zh]))*n}):(i=Sp.exec(e))?(n="-"===i[1]?-1:1,a={y:Ep(i[2],n),M:Ep(i[3],n),w:Ep(i[4],n),d:Ep(i[5],n),h:Ep(i[6],n),m:Ep(i[7],n),s:Ep(i[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=wp(t,e),e.isBefore(t)?n=Dp(e,t):((n=Dp(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(dp(a.from),dp(a.to)),(a={}).ms=s.milliseconds,a.M=s.months),r=new pp(a),gp(e)&&Pm(e,"_locale")&&(r._locale=e._locale),gp(e)&&Pm(e,"_isValid")&&(r._isValid=e._isValid),r}function Ep(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Dp(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Tp(e,t){return function(n,r){var s;return null===r||isNaN(+r)||(eh(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),Mp(this,_p(n,r),e),this}}function Mp(e,t,n,r){var s=t._milliseconds,a=vp(t._days),i=vp(t._months);e.isValid()&&(r=null==r||r,i&&pf(e,af(e,"Month")+i*n),a&&of(e,"Date",af(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),r&&Am.updateOffset(e,a||i))}_p.fn=pp.prototype,_p.invalid=function(){return _p(NaN)};var Ap=Tp(1,"add"),Cp=Tp(-1,"subtract");function Op(e){return"string"==typeof e||e instanceof String}function Pp(e){return Km(e)||Fm(e)||Op(e)||Lm(e)||function(e){var t=Cm(e),n=!1;t&&(n=0===e.filter(function(t){return!Lm(t)&&Op(e)}).length);return t&&n}(e)||function(e){var t,n,r=Om(e)&&!Rm(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i=a.length;for(t=0;t<i;t+=1)n=a[t],s=s||Pm(e,n);return r&&s}(e)||null==e}function Rp(e,t){if(e.date()<t.date())return-Rp(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Ip(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Vf(e))&&(this._locale=t),this)}Am.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",Am.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Lp=Xm("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Fp(){return this._locale}var zp=1e3,Up=6e4,Bp=36e5,qp=126227808e5;function Wp(e,t){return(e%t+t)%t}function Yp(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-qp:new Date(e,t,n).valueOf()}function Hp(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-qp:Date.UTC(e,t,n)}function Vp(e,t){return t.erasAbbrRegex(e)}function $p(){var e,t,n,r,s,a=[],i=[],o=[],l=[],c=this.eras();for(e=0,t=c.length;e<t;++e)n=Fh(c[e].name),r=Fh(c[e].abbr),s=Fh(c[e].narrow),i.push(n),a.push(r),o.push(s),l.push(n),l.push(r),l.push(s);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function Gp(e,t){ch(0,[e,e.length],0,t)}function Kp(e,t,n,r,s){var a;return null==e?jf(this,r,s).year:(t>(a=Nf(e,r,s))&&(t=a),Qp.call(this,e,t,n,r,s))}function Qp(e,t,n,r,s){var a=wf(e,t,n,r,s),i=yf(a.year,0,a.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}ch("N",0,0,"eraAbbr"),ch("NN",0,0,"eraAbbr"),ch("NNN",0,0,"eraAbbr"),ch("NNNN",0,0,"eraName"),ch("NNNNN",0,0,"eraNarrow"),ch("y",["y",1],"yo","eraYear"),ch("y",["yy",2],0,"eraYear"),ch("y",["yyy",3],0,"eraYear"),ch("y",["yyyy",4],0,"eraYear"),Ih("N",Vp),Ih("NN",Vp),Ih("NNN",Vp),Ih("NNNN",function(e,t){return t.erasNameRegex(e)}),Ih("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),qh(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var s=n._locale.erasParse(e,r,n._strict);s?qm(n).era=s:qm(n).invalidEra=e}),Ih("y",Th),Ih("yy",Th),Ih("yyy",Th),Ih("yyyy",Th),Ih("yo",function(e,t){return t._eraYearOrdinalRegex||Th}),qh(["y","yy","yyy","yyyy"],Vh),qh(["yo"],function(e,t,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Vh]=n._locale.eraYearOrdinalParse(e,s):t[Vh]=parseInt(e,10)}),ch(0,["gg",2],0,function(){return this.weekYear()%100}),ch(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Gp("gggg","weekYear"),Gp("ggggg","weekYear"),Gp("GGGG","isoWeekYear"),Gp("GGGGG","isoWeekYear"),Ih("G",Mh),Ih("g",Mh),Ih("GG",Nh,yh),Ih("gg",Nh,yh),Ih("GGGG",Eh,wh),Ih("gggg",Eh,wh),Ih("GGGGG",Dh,jh),Ih("ggggg",Dh,jh),Wh(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=Uh(e)}),Wh(["gg","GG"],function(e,t,n,r){t[r]=Am.parseTwoDigitYear(e)}),ch("Q",0,"Qo","quarter"),Ih("Q",xh),qh("Q",function(e,t){t[$h]=3*(Uh(e)-1)}),ch("D",["DD",2],"Do","date"),Ih("D",Nh,Ph),Ih("DD",Nh,yh),Ih("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),qh(["D","DD"],Gh),qh("Do",function(e,t){t[Gh]=Uh(e.match(Nh)[0])});var Xp=sf("Date",!0);ch("DDD",["DDDD",3],"DDDo","dayOfYear"),Ih("DDD",_h),Ih("DDDD",bh),qh(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Uh(e)}),ch("m",["mm",2],0,"minute"),Ih("m",Nh,Rh),Ih("mm",Nh,yh),qh(["m","mm"],Qh);var Zp=sf("Minutes",!1);ch("s",["ss",2],0,"second"),Ih("s",Nh,Rh),Ih("ss",Nh,yh),qh(["s","ss"],Xh);var Jp,eg,tg=sf("Seconds",!1);for(ch("S",0,0,function(){return~~(this.millisecond()/100)}),ch(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ch(0,["SSS",3],0,"millisecond"),ch(0,["SSSS",4],0,function(){return 10*this.millisecond()}),ch(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),ch(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),ch(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),ch(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),ch(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Ih("S",_h,xh),Ih("SS",_h,yh),Ih("SSS",_h,bh),Jp="SSSS";Jp.length<=9;Jp+="S")Ih(Jp,Th);function ng(e,t){t[Zh]=Uh(1e3*("0."+e))}for(Jp="S";Jp.length<=9;Jp+="S")qh(Jp,ng);eg=sf("Milliseconds",!1),ch("z",0,0,"zoneAbbr"),ch("zz",0,0,"zoneName");var rg=Gm.prototype;function sg(e){return e}rg.add=Ap,rg.calendar=function(e,t){1===arguments.length&&(arguments[0]?Pp(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=Om(e)&&!Rm(e),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)r=r||Pm(e,s[t]);return n&&r}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||dp(),r=wp(n,this).startOf("day"),s=Am.calendarFormat(this,r)||"sameElse",a=t&&(th(t[s])?t[s].call(this,n):t[s]);return this.format(a||this.localeData().calendar(s,this,dp(n)))},rg.clone=function(){return new Gm(this)},rg.diff=function(e,t,n){var r,s,a;if(!this.isValid())return NaN;if(!(r=wp(e,this)).isValid())return NaN;switch(s=6e4*(r.utcOffset()-this.utcOffset()),t=fh(t)){case"year":a=Rp(this,r)/12;break;case"month":a=Rp(this,r);break;case"quarter":a=Rp(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-s)/864e5;break;case"week":a=(this-r-s)/6048e5;break;default:a=this-r}return n?a:zh(a)},rg.endOf=function(e){var t,n;if(void 0===(e=fh(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Hp:Yp,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Bp-Wp(t+(this._isUTC?0:this.utcOffset()*Up),Bp)-1;break;case"minute":t=this._d.valueOf(),t+=Up-Wp(t,Up)-1;break;case"second":t=this._d.valueOf(),t+=zp-Wp(t,zp)-1}return this._d.setTime(t),Am.updateOffset(this,!0),this},rg.format=function(e){e||(e=this.isUtc()?Am.defaultFormatUtc:Am.defaultFormat);var t=uh(this,e);return this.localeData().postformat(t)},rg.from=function(e,t){return this.isValid()&&(Km(e)&&e.isValid()||dp(e).isValid())?_p({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},rg.fromNow=function(e){return this.from(dp(),e)},rg.to=function(e,t){return this.isValid()&&(Km(e)&&e.isValid()||dp(e).isValid())?_p({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},rg.toNow=function(e){return this.to(dp(),e)},rg.get=function(e){return th(this[e=fh(e)])?this[e]():this},rg.invalidAt=function(){return qm(this).overflow},rg.isAfter=function(e,t){var n=Km(e)?e:dp(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=fh(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},rg.isBefore=function(e,t){var n=Km(e)?e:dp(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=fh(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},rg.isBetween=function(e,t,n,r){var s=Km(e)?e:dp(e),a=Km(t)?t:dp(t);return!!(this.isValid()&&s.isValid()&&a.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(s,n):!this.isBefore(s,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n)))},rg.isSame=function(e,t){var n,r=Km(e)?e:dp(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=fh(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},rg.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},rg.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},rg.isValid=function(){return Wm(this)},rg.lang=Lp,rg.locale=Ip,rg.localeData=Fp,rg.max=mp,rg.min=up,rg.parsingFlags=function(){return Um({},qm(this))},rg.set=function(e,t){if("object"==typeof e){var n,r=function(e){var t,n=[];for(t in e)Pm(e,t)&&n.push({unit:t,priority:gh[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=ph(e)),s=r.length;for(n=0;n<s;n++)this[r[n].unit](e[r[n].unit])}else if(th(this[e=fh(e)]))return this[e](t);return this},rg.startOf=function(e){var t,n;if(void 0===(e=fh(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Hp:Yp,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Wp(t+(this._isUTC?0:this.utcOffset()*Up),Bp);break;case"minute":t=this._d.valueOf(),t-=Wp(t,Up);break;case"second":t=this._d.valueOf(),t-=Wp(t,zp)}return this._d.setTime(t),Am.updateOffset(this,!0),this},rg.subtract=Cp,rg.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},rg.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},rg.toDate=function(){return new Date(this.valueOf())},rg.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?uh(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):th(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",uh(n,"Z")):uh(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},rg.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r="moment",s="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=s+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(rg[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),rg.toJSON=function(){return this.isValid()?this.toISOString():null},rg.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},rg.unix=function(){return Math.floor(this.valueOf()/1e3)},rg.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},rg.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},rg.eraName=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""},rg.eraNarrow=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""},rg.eraAbbr=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""},rg.eraYear=function(){var e,t,n,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return(this.year()-Am(s[e].since).year())*n+s[e].offset;return this.year()},rg.year=rf,rg.isLeapYear=function(){return Hh(this.year())},rg.weekYear=function(e){return Kp.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},rg.isoWeekYear=function(e){return Kp.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},rg.quarter=rg.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},rg.month=gf,rg.daysInMonth=function(){return lf(this.year(),this.month())},rg.week=rg.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},rg.isoWeek=rg.isoWeeks=function(e){var t=jf(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},rg.weeksInYear=function(){var e=this.localeData()._week;return Nf(this.year(),e.dow,e.doy)},rg.weeksInWeekYear=function(){var e=this.localeData()._week;return Nf(this.weekYear(),e.dow,e.doy)},rg.isoWeeksInYear=function(){return Nf(this.year(),1,4)},rg.isoWeeksInISOWeekYear=function(){return Nf(this.isoWeekYear(),1,4)},rg.date=Xp,rg.day=rg.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=af(this,"Day");return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},rg.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},rg.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},rg.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},rg.hour=rg.hours=If,rg.minute=rg.minutes=Zp,rg.second=rg.seconds=tg,rg.millisecond=rg.milliseconds=eg,rg.utcOffset=function(e,t,n){var r,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=bp(Ch,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=jp(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),s!==e&&(!t||this._changeInProgress?Mp(this,_p(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Am.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:jp(this)},rg.utc=function(e){return this.utcOffset(0,e)},rg.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jp(this),"m")),this},rg.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=bp(Ah,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},rg.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?dp(e).utcOffset():0,(this.utcOffset()-e)%60==0)},rg.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},rg.isLocal=function(){return!!this.isValid()&&!this._isUTC},rg.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},rg.isUtc=Np,rg.isUTC=Np,rg.zoneAbbr=function(){return this._isUTC?"UTC":""},rg.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},rg.dates=Xm("dates accessor is deprecated. Use date instead.",Xp),rg.months=Xm("months accessor is deprecated. Use month instead",gf),rg.years=Xm("years accessor is deprecated. Use year instead",rf),rg.zone=Xm("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),rg.isDSTShifted=Xm("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!Im(this._isDSTShifted))return this._isDSTShifted;var e,t={};return $m(t,this),(t=lp(t))._a?(e=t._isUTC?Bm(t._a):dp(t._a),this._isDSTShifted=this.isValid()&&function(e,t){var n,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(n=0;n<r;n++)Uh(e[n])!==Uh(t[n])&&a++;return a+s}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var ag=rh.prototype;function ig(e,t,n,r){var s=Vf(),a=Bm().set(r,t);return s[n](a,e)}function og(e,t,n){if(Lm(e)&&(t=e,e=void 0),e=e||"",null!=t)return ig(e,t,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=ig(e,r,n,"month");return s}function lg(e,t,n,r){"boolean"==typeof e?(Lm(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,Lm(t)&&(n=t,t=void 0),t=t||"");var s,a=Vf(),i=e?a._week.dow:0,o=[];if(null!=n)return ig(t,(n+i)%7,r,"day");for(s=0;s<7;s++)o[s]=ig(t,(s+i)%7,r,"day");return o}ag.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return th(r)?r.call(t,n):r},ag.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(ah).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},ag.invalidDate=function(){return this._invalidDate},ag.ordinal=function(e){return this._ordinal.replace("%d",e)},ag.preparse=sg,ag.postformat=sg,ag.relativeTime=function(e,t,n,r){var s=this._relativeTime[n];return th(s)?s(e,t,n,r):s.replace(/%d/i,e)},ag.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return th(n)?n(t):n.replace(/%s/i,t)},ag.set=function(e){var t,n;for(n in e)Pm(e,n)&&(th(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ag.eras=function(e,t){var n,r,s,a=this._eras||Vf("en")._eras;for(n=0,r=a.length;n<r;++n){if("string"==typeof a[n].since)s=Am(a[n].since).startOf("day"),a[n].since=s.valueOf();switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":s=Am(a[n].until).startOf("day").valueOf(),a[n].until=s.valueOf()}}return a},ag.erasParse=function(e,t,n){var r,s,a,i,o,l=this.eras();for(e=e.toUpperCase(),r=0,s=l.length;r<s;++r)if(a=l[r].name.toUpperCase(),i=l[r].abbr.toUpperCase(),o=l[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(i===e)return l[r];break;case"NNNN":if(a===e)return l[r];break;case"NNNNN":if(o===e)return l[r]}else if([a,i,o].indexOf(e)>=0)return l[r]},ag.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?Am(e.since).year():Am(e.since).year()+(t-e.offset)*n},ag.erasAbbrRegex=function(e){return Pm(this,"_erasAbbrRegex")||$p.call(this),e?this._erasAbbrRegex:this._erasRegex},ag.erasNameRegex=function(e){return Pm(this,"_erasNameRegex")||$p.call(this),e?this._erasNameRegex:this._erasRegex},ag.erasNarrowRegex=function(e){return Pm(this,"_erasNarrowRegex")||$p.call(this),e?this._erasNarrowRegex:this._erasRegex},ag.months=function(e,t){return e?Cm(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||uf).test(t)?"format":"standalone"][e.month()]:Cm(this._months)?this._months:this._months.standalone},ag.monthsShort=function(e,t){return e?Cm(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[uf.test(t)?"format":"standalone"][e.month()]:Cm(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ag.monthsParse=function(e,t,n){var r,s,a;if(this._monthsParseExact)return ff.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=Bm([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},ag.monthsRegex=function(e){return this._monthsParseExact?(Pm(this,"_monthsRegex")||vf.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Pm(this,"_monthsRegex")||(this._monthsRegex=hf),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},ag.monthsShortRegex=function(e){return this._monthsParseExact?(Pm(this,"_monthsRegex")||vf.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Pm(this,"_monthsShortRegex")||(this._monthsShortRegex=mf),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},ag.week=function(e){return jf(e,this._week.dow,this._week.doy).week},ag.firstDayOfYear=function(){return this._week.doy},ag.firstDayOfWeek=function(){return this._week.dow},ag.weekdays=function(e,t){var n=Cm(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?kf(n,this._week.dow):e?n[e.day()]:n},ag.weekdaysMin=function(e){return!0===e?kf(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},ag.weekdaysShort=function(e){return!0===e?kf(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},ag.weekdaysParse=function(e,t,n){var r,s,a;if(this._weekdaysParseExact)return Af.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=Bm([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},ag.weekdaysRegex=function(e){return this._weekdaysParseExact?(Pm(this,"_weekdaysRegex")||Cf.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Pm(this,"_weekdaysRegex")||(this._weekdaysRegex=Df),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},ag.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(Pm(this,"_weekdaysRegex")||Cf.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Pm(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Tf),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ag.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(Pm(this,"_weekdaysRegex")||Cf.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Pm(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mf),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ag.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},ag.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},Yf("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Uh(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),Am.lang=Xm("moment.lang is deprecated. Use moment.locale instead.",Yf),Am.langData=Xm("moment.langData is deprecated. Use moment.localeData instead.",Vf);var cg=Math.abs;function dg(e,t,n,r){var s=_p(t,n);return e._milliseconds+=r*s._milliseconds,e._days+=r*s._days,e._months+=r*s._months,e._bubble()}function ug(e){return e<0?Math.floor(e):Math.ceil(e)}function mg(e){return 4800*e/146097}function hg(e){return 146097*e/4800}function fg(e){return function(){return this.as(e)}}var pg=fg("ms"),gg=fg("s"),vg=fg("m"),xg=fg("h"),yg=fg("d"),bg=fg("w"),wg=fg("M"),jg=fg("Q"),Ng=fg("y"),kg=pg;function Sg(e){return function(){return this.isValid()?this._data[e]:NaN}}var _g=Sg("milliseconds"),Eg=Sg("seconds"),Dg=Sg("minutes"),Tg=Sg("hours"),Mg=Sg("days"),Ag=Sg("months"),Cg=Sg("years");var Og=Math.round,Pg={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Rg(e,t,n,r,s){return s.relativeTime(t||1,!!n,e,r)}var Ig=Math.abs;function Lg(e){return(e>0)-(e<0)||+e}function Fg(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,s,a,i,o,l=Ig(this._milliseconds)/1e3,c=Ig(this._days),d=Ig(this._months),u=this.asSeconds();return u?(e=zh(l/60),t=zh(e/60),l%=60,e%=60,n=zh(d/12),d%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",s=u<0?"-":"",a=Lg(this._months)!==Lg(u)?"-":"",i=Lg(this._days)!==Lg(u)?"-":"",o=Lg(this._milliseconds)!==Lg(u)?"-":"",s+"P"+(n?a+n+"Y":"")+(d?a+d+"M":"")+(c?i+c+"D":"")+(t||e||l?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(l?o+r+"S":"")):"P0D"}var zg=pp.prototype;function Ug(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function Bg(e){const t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let n="";for(const[r,s]of t)for(;e>=r;)n+=s,e-=r;return n}zg.isValid=function(){return this._isValid},zg.abs=function(){var e=this._data;return this._milliseconds=cg(this._milliseconds),this._days=cg(this._days),this._months=cg(this._months),e.milliseconds=cg(e.milliseconds),e.seconds=cg(e.seconds),e.minutes=cg(e.minutes),e.hours=cg(e.hours),e.months=cg(e.months),e.years=cg(e.years),this},zg.add=function(e,t){return dg(this,e,t,1)},zg.subtract=function(e,t){return dg(this,e,t,-1)},zg.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=fh(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+mg(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(hg(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},zg.asMilliseconds=pg,zg.asSeconds=gg,zg.asMinutes=vg,zg.asHours=xg,zg.asDays=yg,zg.asWeeks=bg,zg.asMonths=wg,zg.asQuarters=jg,zg.asYears=Ng,zg.valueOf=kg,zg._bubble=function(){var e,t,n,r,s,a=this._milliseconds,i=this._days,o=this._months,l=this._data;return a>=0&&i>=0&&o>=0||a<=0&&i<=0&&o<=0||(a+=864e5*ug(hg(o)+i),i=0,o=0),l.milliseconds=a%1e3,e=zh(a/1e3),l.seconds=e%60,t=zh(e/60),l.minutes=t%60,n=zh(t/60),l.hours=n%24,i+=zh(n/24),o+=s=zh(mg(i)),i-=ug(hg(s)),r=zh(o/12),o%=12,l.days=i,l.months=o,l.years=r,this},zg.clone=function(){return _p(this)},zg.get=function(e){return e=fh(e),this.isValid()?this[e+"s"]():NaN},zg.milliseconds=_g,zg.seconds=Eg,zg.minutes=Dg,zg.hours=Tg,zg.days=Mg,zg.weeks=function(){return zh(this.days()/7)},zg.months=Ag,zg.years=Cg,zg.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,s=!1,a=Pg;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(s=e),"object"==typeof t&&(a=Object.assign({},Pg,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),r=function(e,t,n,r){var s=_p(e).abs(),a=Og(s.as("s")),i=Og(s.as("m")),o=Og(s.as("h")),l=Og(s.as("d")),c=Og(s.as("M")),d=Og(s.as("w")),u=Og(s.as("y")),m=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||i<=1&&["m"]||i<n.m&&["mm",i]||o<=1&&["h"]||o<n.h&&["hh",o]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(m=m||d<=1&&["w"]||d<n.w&&["ww",d]),(m=m||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,m[3]=+e>0,m[4]=r,Rg.apply(null,m)}(this,!s,a,n=this.localeData()),s&&(r=n.pastFuture(+this,r)),n.postformat(r)},zg.toISOString=Fg,zg.toString=Fg,zg.toJSON=Fg,zg.locale=Ip,zg.localeData=Fp,zg.toIsoString=Xm("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fg),zg.lang=Lp,ch("X",0,0,"unix"),ch("x",0,0,"valueOf"),Ih("x",Mh),Ih("X",/[+-]?\d+(\.\d{1,3})?/),qh("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),qh("x",function(e,t,n){n._d=new Date(Uh(e))}),
//! moment.js
Am.version="2.30.1",Sm=dp,Am.fn=rg,Am.min=function(){return hp("isBefore",[].slice.call(arguments,0))},Am.max=function(){return hp("isAfter",[].slice.call(arguments,0))},Am.now=function(){return Date.now?Date.now():+new Date},Am.utc=Bm,Am.unix=function(e){return dp(1e3*e)},Am.months=function(e,t){return og(e,t,"months")},Am.isDate=Fm,Am.locale=Yf,Am.invalid=Ym,Am.duration=_p,Am.isMoment=Km,Am.weekdays=function(e,t,n){return lg(e,t,n,"weekdays")},Am.parseZone=function(){return dp.apply(null,arguments).parseZone()},Am.localeData=Vf,Am.isDuration=gp,Am.monthsShort=function(e,t){return og(e,t,"monthsShort")},Am.weekdaysMin=function(e,t,n){return lg(e,t,n,"weekdaysMin")},Am.defineLocale=Hf,Am.updateLocale=function(e,t){if(null!=t){var n,r,s=Ff;null!=zf[e]&&null!=zf[e].parentLocale?zf[e].set(nh(zf[e]._config,t)):(null!=(r=Wf(e))&&(s=r._config),t=nh(s,t),null==r&&(t.abbr=e),(n=new rh(t)).parentLocale=zf[e],zf[e]=n),Yf(e)}else null!=zf[e]&&(null!=zf[e].parentLocale?(zf[e]=zf[e].parentLocale,e===Yf()&&Yf(e)):null!=zf[e]&&delete zf[e]);return zf[e]},Am.locales=function(){return Zm(zf)},Am.weekdaysShort=function(e,t,n){return lg(e,t,n,"weekdaysShort")},Am.normalizeUnits=fh,Am.relativeTimeRounding=function(e){return void 0===e?Og:"function"==typeof e&&(Og=e,!0)},Am.relativeTimeThreshold=function(e,t){return void 0!==Pg[e]&&(void 0===t?Pg[e]:(Pg[e]=t,"s"===e&&(Pg.ss=t-1),!0))},Am.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},Am.prototype=rg,Am.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const qg=function(){const e=[];let t=1;const n=new Date("2025-09-25T00:00:00"),r=new Date("2026-01-12T00:00:00");for(let s=new Date(n);s.getTime()<=r.getTime();s.setDate(s.getDate()+14)){const n=Ug(s);"2026-01-01"!==n&&(e.push({id:`biweekly-touchbase-${n}`,title:`Biweekly Touchbase ${Bg(t)}`,date:n,time:"18:00",endTime:"19:00",location:"FS QDS Teams Server",description:"Its time for updates on the sprint! We get in touch with the active project teams and help them move a step closer to their goals. The clock is ticking. The demo day approaches soon.",type:"meetup",organizer:"FS Quant & Data Science",tags:["biweekly","touchbase"]}),t+=1)}return e.find(e=>"2026-01-12"===e.date)||e.push({id:"biweekly-touchbase-2026-01-12",title:`Biweekly Touchbase ${Bg(t)}`,date:"2026-01-12",time:"18:00",endTime:"19:00",location:"FS QDS Teams Server",description:"Its time for updates on the sprint! We get in touch with the active project teams and help them move a step closer to their goals. The clock is ticking. The demo day approaches soon.",type:"meetup",organizer:"FS Quant & Data Science",tags:["biweekly","touchbase"]}),e}(),Wg=[{id:"ws25-launch-2359",title:"Season WS25 FS QDS Battleground begins!",date:"2025-09-13",time:"23:59",endTime:"23:59",location:"Online",description:"Winter Semester 2025 Battleground season kickoff. Prepare your strategies and get ready to compete!",type:"competition",organizer:"FS Quant & Data Science",tags:["battleground","ws25","launch"]},{id:"ws25-agenda-2100",title:"Agenda for WS25 goes live!",date:"2025-09-13",time:"21:00",endTime:"22:00",location:"Frankfurt School",description:"Detailed WS25 schedule, milestones, and participation guide published.",type:"meetup",organizer:"FS Quant & Data Science",tags:["agenda","ws25"]},{id:"event-001",title:"Introduction to Quantitative Finance",date:"2025-02-15",time:"14:00",endTime:"17:00",location:"Frankfurt School, Room 201",description:"Learn the fundamentals of quantitative finance, risk modeling, and algorithmic trading strategies",type:"workshop",organizer:"FS Quant & Data Science",registrationLink:"https://fs-students.de/events/quant-finance",capacity:30,tags:["quantitative-finance","python","beginner-friendly"]},{id:"event-002",title:"Data Science Career Night with McKinsey",date:"2025-02-20",time:"18:00",endTime:"20:30",location:"Frankfurt School, Audimax",description:"Join us for an evening with McKinsey data scientists discussing career opportunities and real-world projects",type:"speaker",organizer:"FS Quant & Data Science",capacity:100,tags:["career","networking","mckinsey"]},{id:"event-003",title:"Hack the DAX - Trading Competition",date:"2025-03-01",time:"09:00",endTime:"18:00",location:"Frankfurt School, Trading Lab",description:"Annual trading competition - build and test your algorithmic trading strategies on real market data",type:"competition",organizer:"FS Quant & Data Science",registrationLink:"https://fs-students.de/events/hack-the-dax",capacity:50,tags:["competition","trading","prizes"]},{id:"event-004",title:"Machine Learning Study Group",date:"2025-02-25",time:"16:00",endTime:"18:00",location:"Frankfurt School, Library Study Room 3",description:"Weekly study group for machine learning enthusiasts. This week: Neural Networks and Deep Learning",type:"meetup",organizer:"FS Quant & Data Science",capacity:20,tags:["study-group","machine-learning","deep-learning"]},{id:"event-005",title:"Kickoff Meeting - FS Quant & Data Science Initiative",date:"2025-09-13",time:"20:15",endTime:"20:45",location:"Frankfurt School Campus",description:"Join us for the kickoff meeting of the initiative. Meet the team, learn about divisions, and how to get involved.",type:"meetup",organizer:"FS Quant & Data Science"},{id:"event-006",title:"Community Life Fair",date:"2025-09-02",time:"17:00",endTime:"20:00",location:"Outside Audimax",description:"Discover campus clubs and initiatives at the Community Life Fair.",type:"meetup",organizer:"Frankfurt School Student Life"},...qg,{id:"adx-donnerstag-2025-10-02",title:"Axe the DAX Donnerstag",date:"2025-10-02",time:"18:00",endTime:"20:00",location:"TBA",description:"A classic FS QDS Market Making Session! We will be simulating a live trading floor through a gamified style. Teams organize themselves into realistic fund team structure comprising PM, Analyst, Quant and Macro Specialist. Formulate trade ideas from market open to closing auction. This is great practice for those wanting to get into trading firms.",type:"exclusive",organizer:"FS Quant & Data Science",image:"/AXE THE DAX DONNERSTAG.png",tags:["adx","trading","auction","options"]},{id:"macro-montag-2025-11-03",title:"Macro Montag",date:"2025-11-03",time:"18:00",endTime:"20:00",location:"TBA",description:"We will be going through some stocks and macroeconomic indicators for the economy! We combine quantitative and macroeconomic analysis to generate trade ideas. A session suited for those that want to invest, have a stock in mind, or just want to see what others come up with. We will be pitching stocks to each other and analyzing them together. \n\nA great practice for anyone aiming to work in Finance!",type:"exclusive",organizer:"FS Quant & Data Science",image:"/MACRO MONTAG.png",tags:["macro","markets","discussion"]},{id:"trader-math-session-2025-11-27",title:"TraderMath Session",date:"2025-11-27",time:"18:00",endTime:"20:00",location:"TBA",description:"A competitive solving session that will be good practice if you want to get into trading. Please bring your laptop. We will be announcing the questions on the day of the event. Please do not do them before the event. Depending on your score you get badges on our HTI leaderboard worth more points than the typical question. See you there!",type:"exclusive",organizer:"FS Quant & Data Science",image:"/TRADER MATH SESSION.png",tags:["options","math","competition"]},{id:"finale-demo-day-2026-tba",title:"Finale Demo Day",date:"2026-01-14",time:"18:00",endTime:"21:00",location:"0.03",description:"It's to showcase your projects to our jury. Win prizes and recognition that you deserve!",type:"exclusive",organizer:"FS Quant & Data Science",tags:["demo-day","prizes"]}],Yg=[{id:"past-001",title:"Data Science Career Panel",date:"2024-01-10",time:"18:00",endTime:"20:00",location:"Frankfurt School, Audimax",description:"Industry professionals discuss career paths in data science",type:"speaker",organizer:"FS Quant & Data Science",tags:["career","networking"]},{id:"past-002",title:"Quantitative Trading Strategies Workshop",date:"2024-01-25",time:"15:00",endTime:"18:00",location:"Frankfurt School, Trading Lab",description:"Learn about algorithmic trading and backtesting strategies",type:"workshop",organizer:"FS Quant & Data Science",tags:["trading","finance","python"]}];const Hg=ye,Vg=xe,$g=Je.forwardRef(({className:e,...t},n)=>X.jsx(he,{ref:n,className:Pa("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));$g.displayName=he.displayName;const Gg=Je.forwardRef(({className:e,children:t,...n},r)=>X.jsxs(Vg,{children:[X.jsx($g,{}),X.jsxs(fe,{ref:r,className:Pa("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,X.jsxs(pe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[X.jsx(or,{className:"h-4 w-4"}),X.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gg.displayName=fe.displayName;const Kg=({className:e,...t})=>X.jsx("div",{className:Pa("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Kg.displayName="DialogHeader";const Qg=Je.forwardRef(({className:e,...t},n)=>X.jsx(ge,{ref:n,className:Pa("text-lg font-semibold leading-none tracking-tight",e),...t}));Qg.displayName=ge.displayName;Je.forwardRef(({className:e,...t},n)=>X.jsx(ve,{ref:n,className:Pa("text-sm text-muted-foreground",e),...t})).displayName=ve.displayName;const Xg=function(e){function t(t,n){var r,s,a=e(t).local(),i=e(n).local();if(!e.tz)return a.toDate().getTimezoneOffset()-i.toDate().getTimezoneOffset();var o=null!==(r=null==a||null===(s=a._z)||void 0===s?void 0:s.name)&&void 0!==r?r:e.tz.guess();return e.tz.zone(o).utcOffset(+a)-e.tz.zone(o).utcOffset(+i)}function n(t,n,r){var s=Mm(r);return[s?e(t).startOf(s):e(t),s?e(n).startOf(s):e(n),s]}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Mm(arguments.length>1?arguments[1]:void 0);return n?e(t).startOf(n).toDate():e(t).toDate()}function s(e,t,r){var s=Ui(n(e,t,r),3),a=s[0],i=s[1],o=s[2];return a.isSame(i,o)}function a(e,t,r){var s=Ui(n(e,t,r),3),a=s[0],i=s[1],o=s[2];return a.isSameOrBefore(i,o)}function i(t,n,r){var s=Mm(r);return e(t).add(n,s).toDate()}function o(t,n){var r=Mm(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),s=e(t);return e(n).diff(s,r)}function l(t){return e(t).startOf("month").startOf("week").toDate()}function c(t){return e(t).endOf("month").endOf("week").toDate()}function d(t,n){var r=e(t),s=e(n);return e.duration(s.diff(r)).days()}return new Jd({formats:Tm,firstOfWeek:function(t){var n=t?e.localeData(t):e.localeData();return n?n.firstDayOfWeek():0},firstVisibleDay:l,lastVisibleDay:c,visibleDays:function(e){for(var t=l(e),n=c(e),r=[];a(t,n);)r.push(t),t=i(t,1,"d");return r},format:function(t,n,r){return(s=e(t),a=r,a?s.locale(a):s).format(n);var s,a},lt:function(e,t,r){var s=Ui(n(e,t,r),3),a=s[0],i=s[1],o=s[2];return a.isBefore(i,o)},lte:a,gt:function(e,t,r){var s=Ui(n(e,t,r),3),a=s[0],i=s[1],o=s[2];return a.isAfter(i,o)},gte:function(e,t,r){var s=Ui(n(e,t,r),3),a=s[0],i=s[1],o=s[2];return a.isSameOrBefore(i,o)},eq:s,neq:function(e,t,n){return!s(e,t,n)},merge:function(t,n){if(!t&&!n)return null;var r=e(n).format("HH:mm:ss"),s=e(t).startOf("day").format("MM/DD/YYYY");return e("".concat(s," ").concat(r),"MM/DD/YYYY HH:mm:ss").toDate()},inRange:function(t,n,r){var s=Mm(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day"),a=e(t),i=e(n),o=e(r);return a.isBetween(i,o,s,"[]")},startOf:r,endOf:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Mm(arguments.length>1?arguments[1]:void 0);return n?e(t).endOf(n).toDate():e(t).toDate()},range:function(t,n){for(var r=Mm(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),s=e(t).toDate(),o=[];a(s,n);)o.push(s),s=i(s,1,r);return o},add:i,diff:o,ceil:function(e,t){var n=Mm(t),a=r(e,n);return s(a,e)?a:i(a,1,n)},min:function(t,n){var r=e(t),s=e(n);return e.min(r,s).toDate()},max:function(t,n){var r=e(t),s=e(n);return e.max(r,s).toDate()},minutes:function(t){return e(t).minutes()},getSlotDate:function(t,n,r){return e(t).startOf("day").minute(n+r).toDate()},getTimezoneOffset:function(t){return e(t).toDate().getTimezoneOffset()},getDstOffset:t,getTotalMin:function(e,t){return o(e,t,"minutes")},getMinutesFromMidnight:function(n){var r=e(n).startOf("day");return e(n).diff(r,"minutes")+function(n){return t(e(n).startOf("day"),n)}(n)},continuesPrior:function(t,n){var r=e(t),s=e(n);return r.isBefore(s,"day")},continuesAfter:function(t,n,r){var s=e(n),a=e(r);return s.isSameOrAfter(a,"minutes")},sortEvents:function(e){var t=e.evtA,n=t.start,s=t.end,a=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,u=+r(n,"day")-+r(o,"day"),m=d(n,s),h=d(o,l);return u||h-m||!!c-!!a||+n-+o||+s-+l},inEventRange:function(t){var n=t.event,r=n.start,s=n.end,a=t.range,i=a.start,o=a.end,l=e(r).startOf("day"),c=e(s),d=e(i),u=e(o),m=l.isSameOrBefore(u,"day"),h=!l.isSame(c,"minutes")?c.isAfter(d,"minutes"):c.isSameOrAfter(d,"minutes");return m&&h},isSameDate:function(t,n){var r=e(t),s=e(n);return r.isSame(s,"day")},daySpan:d,browserTZOffset:function(){var t=new Date,n=/-/.test(t.toString())?"-":"",r=t.getTimezoneOffset(),s=Number("".concat(n).concat(Math.abs(r)));return e().utcOffset()>s?1:0}})}
//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(Am),Zg=()=>{const[e,t]=Je.useState(null),[n,r]=Je.useState("month"),s=function(e){return e.map(e=>{const t=new Date(e.date),n=new Date(e.date);if(e.time){const[n,r]=e.time.split(":");t.setHours(parseInt(n),parseInt(r))}if(e.endTime){const[t,r]=e.endTime.split(":");n.setHours(parseInt(t),parseInt(r))}else e.time&&n.setTime(t.getTime()+72e5);return{id:e.id,title:e.title,start:t,end:n,location:e.location,description:e.description,type:e.type,organizer:e.organizer,allDay:!e.time}})}([...Wg,...Yg]),a=Je.useCallback(e=>{t(e)},[]);return X.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg overflow-hidden shadow-md",children:[X.jsx(Em,{localizer:Xg,events:s,startAccessor:"start",endAccessor:"end",style:{height:600},views:["month","week","day","agenda"],defaultView:Td.MONTH,onSelectEvent:a,eventPropGetter:e=>{let t={backgroundColor:"#f8f9fa",borderRadius:"4px",opacity:.9,color:"#3c4043",border:"0",display:"block",fontWeight:"500"};switch(e.type){case"workshop":t.backgroundColor="#0B3D91",t.color="#ffffff";break;case"speaker":t.backgroundColor="#00A6ED",t.color="#ffffff";break;case"competition":t.backgroundColor="#FFC107",t.color="#0B3D91";break;case"meetup":t.backgroundColor="#28A745",t.color="#ffffff";break;case"exclusive":t.backgroundColor="#6B21A8",t.color="#ffffff";break;default:t.backgroundColor="#6c757d",t.color="#ffffff"}return{style:t}},components:{toolbar:e=>X.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center p-4 mb-4 bg-neutral-50",children:[X.jsx("div",{className:"mb-4 md:mb-0",children:X.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:e.label})}),X.jsxs("div",{className:"flex space-x-2 mb-4 md:mb-0",children:[X.jsxs(wi,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("PREV")},children:[X.jsx("i",{className:"fas fa-chevron-left mr-1"})," Prev"]}),X.jsx(wi,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("TODAY")},children:"Today"}),X.jsxs(wi,{variant:"outline",className:"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{e.onNavigate("NEXT")},children:["Next ",X.jsx("i",{className:"fas fa-chevron-right ml-1"})]})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx(wi,{variant:"outline",className:"month"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{r("month"),e.onView("month")},children:"Month"}),X.jsx(wi,{variant:"outline",className:"week"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{r("week"),e.onView("week")},children:"Week"}),X.jsx(wi,{variant:"outline",className:"day"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{r("day"),e.onView("day")},children:"Day"}),X.jsx(wi,{variant:"outline",className:"agenda"===n?"bg-[#0B3D91] text-white border-[#0B3D91]":"text-neutral-600 hover:text-[#0B3D91] border-neutral-300 hover:border-[#0B3D91] bg-white",onClick:()=>{r("agenda"),e.onView("agenda")},children:"Agenda"})]})]})},className:"text-neutral-700"}),e&&X.jsx(Hg,{open:!!e,onOpenChange:e=>!e&&t(null),children:X.jsxs(Gg,{className:"bg-white text-neutral-700 border-neutral-200",children:[X.jsx(Kg,{children:X.jsx(Qg,{className:"text-lg font-semibold text-neutral-900",children:e.title})}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${(i=e.type,{workshop:"bg-[#0B3D91] text-white",speaker:"bg-blue-500 text-white",competition:"bg-[#FFC107] text-[#0B3D91]",meetup:"bg-green-500 text-white",conference:"bg-indigo-600 text-white",exclusive:"bg-[#6B21A8] text-white"}[i]||"bg-gray-500 text-white").split(" ")[0]}`}),X.jsx("span",{className:"capitalize",children:e.type})]}),X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-calendar-alt text-neutral-400 mt-1 mr-2 w-5"}),X.jsxs("div",{children:[X.jsx("div",{children:Am(e.start).format("dddd, MMMM D, YYYY")}),!e.allDay&&X.jsxs("div",{className:"text-neutral-400",children:[Am(e.start).format("h:mm A")," - ",Am(e.end).format("h:mm A")]})]})]}),e.location&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-map-marker-alt text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.location})]}),e.description&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-align-left text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.description})]}),e.organizer&&X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-user text-neutral-400 mt-1 mr-2 w-5"}),X.jsx("div",{children:e.organizer})]})]}),X.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2",children:[X.jsxs(wi,{variant:"outline",className:"border-[#0B3D91] text-[#0B3D91] hover:bg-[#0B3D91] hover:text-white bg-white",onClick:()=>(e=>{const t=xi(e),n=new Blob([t],{type:"text/calendar;charset=utf-8"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.setAttribute("download",`${e.title.replace(/\s+/g,"-")}.ics`),document.body.appendChild(s),s.click(),document.body.removeChild(s)})(e),children:[X.jsx("i",{className:"fas fa-calendar-plus mr-2"})," Add to Calendar (iCal)"]}),X.jsxs(wi,{variant:"outline",className:"bg-[#0B3D91] text-white hover:bg-[#0A357F] border-[#0B3D91]",onClick:()=>window.open(yi(e),"_blank"),children:[X.jsx("i",{className:"fab fa-google mr-2"})," Add to Google Calendar"]})]})]})]})})]});var i},Jg=()=>{const{t:e}=ai(),t=function(){const e=new Date;return e.setHours(0,0,0,0),Wg.filter(t=>new Date(t.date)>=e).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}();return X.jsx("section",{id:"events",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-gray-800 mb-4",children:e("eventsTitle")}),X.jsx("p",{className:"max-w-3xl mx-auto text-gray-600",children:e("eventsSubtitle")})]}),X.jsxs("div",{className:"mb-12 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[X.jsx("h3",{className:"text-xl font-inter font-semibold mb-4 text-gray-800",children:e("events.calendar")}),X.jsx(Zg,{}),X.jsx("div",{className:"mt-3 text-right text-sm",children:X.jsx("span",{className:"text-gray-500 italic",children:e("events.newEventsComingSoon")})})]}),t.length>0?X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:t.map(e=>X.jsx(ji,{event:e},e.id))}):X.jsxs("div",{className:"text-center py-12 mb-16 bg-blue-50 rounded-lg",children:[X.jsx("i",{className:"fas fa-calendar-check text-4xl text-blue-400 mb-4"}),X.jsx("p",{className:"text-gray-600",children:e("noUpcomingEvents")})]}),X.jsxs("div",{className:"mt-16",children:[X.jsxs("div",{className:"text-center mb-12",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-4 text-gray-800",children:e("events.pastCollaborations")}),X.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:e("events.pastCollaborationsDescription")})]}),X.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-8 border border-gray-200",children:X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:[{name:"DWS Group",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/DWS_Group_202x_logo.svg/250px-DWS_Group_202x_logo.svg.png"},{name:"Tableau",logo:"https://logos-world.net/wp-content/uploads/2021/10/Tableau-Logo.png"},{name:"Deloitte",logo:"https://upload.wikimedia.org/wikipedia/commons/e/ed/Logo_of_Deloitte.svg"},{name:"Google",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/250px-Google_2015_logo.svg.png"},{name:"McKinsey",logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSNN12aWh7ruc5rs0kAhGfaUkOyW0tuypaPLg&s"},{name:"Statworx",logo:"https://statistik-und-beratung.de/wp-content/uploads/2021/04/logo-statworx-data-science-dark.png"},{name:"IKEA",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Ikea_logo.svg/250px-Ikea_logo.svg.png"},{name:"BCG",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Boston_Consulting_Group_2020_logo.svg/250px-Boston_Consulting_Group_2020_logo.svg.png"},{name:"EY",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/EY_logo_2019.svg/200px-EY_logo_2019.svg.png"},{name:"KPMG",logo:"https://upload.wikimedia.org/wikipedia/commons/d/db/KPMG_blue_logo.svg"},{name:"Commerzbank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Commerzbank_%282009%29.svg/250px-Commerzbank_%282009%29.svg.png"}].map((e,t)=>X.jsx("div",{className:"flex items-center justify-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:X.jsx("img",{src:e.logo,alt:e.name,className:"max-h-12 max-w-full object-contain filter grayscale hover:grayscale-0 transition-all",onError:t=>{const n=t.target;n.style.display="none";const r=n.parentElement;r&&(r.innerHTML=`<div class="text-gray-600 font-semibold">${e.name}</div>`)}})},t))})})]})]})})};function ev(...e){return at(it(e))}function tv({className:e,...t}){return X.jsx(be,{"data-slot":"tabs",className:ev("flex flex-col gap-2",e),...t})}function nv({className:e,...t}){return X.jsx(we,{"data-slot":"tabs-list",className:ev("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function rv({className:e,...t}){return X.jsx(je,{"data-slot":"tabs-trigger",className:ev("data-[state=active]:bg-[var(--card)] dark:data-[state=active]:text-[var(--foreground)] focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground dark:text-muted-foreground inline-flex h-full flex-1 items-center justify-center gap-1.5 rounded-xl px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function sv({className:e,...t}){return X.jsx(Ne,{"data-slot":"tabs-content",className:ev("flex-1 outline-none",e),...t})}const av=Oa("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function iv({className:e,variant:t,asChild:n=!1,...r}){const s=n?me:"span";return X.jsx(s,{"data-slot":"badge",className:ev(av({variant:t}),e),...r})}function ov(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return Je.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}var lv="Progress",[cv,dv]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>Je.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return Je.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const s=Je.createContext(r),a=n.length;function i(t){const{scope:n,children:r,...i}=t,o=(null==n?void 0:n[e][a])||s,l=Je.useMemo(()=>i,Object.values(i));return X.jsx(o.Provider,{value:l,children:r})}return n=[...n,r],i.displayName=t+"Provider",[i,function(n,i){const o=(null==i?void 0:i[e][a])||s,l=Je.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},ov(r,...t)]}(lv),[uv,mv]=cv(lv),hv=Je.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=gv,...i}=e;(s||0===s)&&yv(s);const o=yv(s)?s:100;null!==r&&bv(r,o);const l=bv(r,o)?r:null,c=xv(l)?a(l,o):void 0;return X.jsx(uv,{scope:n,value:l,max:o,children:X.jsx(ne.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":xv(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":vv(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});hv.displayName=lv;var fv="ProgressIndicator",pv=Je.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=mv(fv,n);return X.jsx(ne.div,{"data-state":vv(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});function gv(e,t){return`${Math.round(e/t*100)}%`}function vv(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function xv(e){return"number"==typeof e}function yv(e){return xv(e)&&!isNaN(e)&&e>0}function bv(e,t){return xv(e)&&!isNaN(e)&&e<=t&&e>=0}pv.displayName=fv;var wv=hv,jv=pv;function Nv({className:e,value:t,...n}){return X.jsx(wv,{"data-slot":"progress",className:ev("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:X.jsx(jv,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function kv({className:e,...t}){return X.jsx("div",{"data-slot":"card",className:ev("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Sv({className:e,...t}){return X.jsx("div",{"data-slot":"card-header",className:ev("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function _v({className:e,...t}){return X.jsx("h4",{"data-slot":"card-title",className:ev("leading-none",e),...t})}function Ev({className:e,...t}){return X.jsx("div",{"data-slot":"card-content",className:ev("px-6 [&:last-child]:pb-6",e),...t})}const Dv=Oa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Tv({className:e,variant:t,size:n,asChild:r=!1,...s}){const a=r?me:"button";return X.jsx(a,{"data-slot":"button",className:ev(Dv({variant:t,size:n,className:e})),...s})}function Mv({...e}){return X.jsx(ke,{"data-slot":"select",...e})}function Av({...e}){return X.jsx(Se,{"data-slot":"select-value",...e})}function Cv({className:e,size:t="default",children:n,...r}){return X.jsxs(_e,{"data-slot":"select-trigger","data-size":t,className:ev("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,X.jsx(Ee,{asChild:!0,children:X.jsx(Dn,{className:"size-4 opacity-50"})})]})}function Ov({className:e,children:t,position:n="popper",...r}){return X.jsx(De,{children:X.jsxs(Te,{"data-slot":"select-content",className:ev("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[X.jsx(Rv,{}),X.jsx(Me,{className:ev("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),X.jsx(Iv,{})]})})}function Pv({className:e,children:t,...n}){return X.jsxs(Ae,{"data-slot":"select-item",className:ev("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[X.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:X.jsx(Ce,{children:X.jsx(En,{className:"size-4"})})}),X.jsx(Oe,{children:t})]})}function Rv({className:e,...t}){return X.jsx(Pe,{"data-slot":"select-scroll-up-button",className:ev("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(An,{className:"size-4"})})}function Iv({className:e,...t}){return X.jsx(Re,{"data-slot":"select-scroll-down-button",className:ev("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(Dn,{className:"size-4"})})}function Lv(e){if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e){const t=e.trim();if(""===t)return null;const n=Number(t);return Number.isFinite(n)?n:null}return null}function Fv(e,t=2,n=""){const r=Lv(e);return null===r?n:r.toFixed(t)}function zv(e,t=2,n=""){const r=Lv(e);if(null===r)return n;return`${r>=0?"+":""}${r.toFixed(t)}`}function Uv(e,t=2,n="",r=""){const s=Lv(e);return null===s?r:`${n}${s.toFixed(t)}`}function Bv(e,t=1,n=!1,r="%"){const s=Lv(e);if(null===s)return r;return`${n&&s>=0?"+":""}${s.toFixed(t)}%`}function qv(e,t=0){const n=Lv(e);return null===n?t:n}const Wv={AIR:"/public-logos/AIR.png",ALV:"/public-logos/ALV.png",BMW:"/public-logos/BMW.png",BNR:"/public-logos/BNR.png",DBK:"/public-logos/DBK.png",DTE:"/public-logos/DTE.png",ENR:"/public-logos/ENR.png",MUV2:"/public-logos/MUV2.png",RHM:"/public-logos/RHM.png",SIE:"/public-logos/SIE.png",SY1:"/public-logos/SY1.png",ZAL:"/public-logos/ZAL.png"},Yv={};const Hv={SIE:"https://cdn.brandfetch.io/id6kfFgTVj/w/180/h/180/theme/dark/logo.png?c=1bxid64Mup7aczewSAYMX&t=1753665761846",DTE:"https://www.telekom.com/resource/blob/1002342/12f9f204ed4293439e1c93f7851ae186/dl-telekom-logo-01-data.jpg",AIR:"https://companieslogo.com/img/orig/AIR.PA-9f3a3975.png?t=1720244490",ALV:"https://www.allianz-partners.com/content/onemarketing/awp/azpartnerscom/de_DE.thumb.1280.1280.png?ck=1757401290",RHM:"https://s3-symbol-logo.tradingview.com/rheinmetall-ag--600.png",ENR:"https://indcdn.indmoney.com/cdn-cgi/image/quality=90,format=auto,metadata=copyright,width=500/https://indcdn.indmoney.com/public/images/INDS37201.png",MUV2:"https://companieslogo.com/img/orig/MUV2.DE-6afaafb5.png?t=1720244493",SY1:"https://rest.arbeitsagentur.de/vermittlung/ag-darstellung-service/ct/v1/arbeitgeberlogo/4JLqgedHX82_0OO-z88rTtZAcYiMJrbi3lAXG2vhNTQ=",BNR:"https://cdn.zonebourse.com/static/instruments-logo-39434198",ZAL:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShrYV4IQNnjg9tA-LdOAfj7jGiRbcmV293Lw&s",BMW:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BMW.svg/2048px-BMW.svg.png",DB:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Deutsche_Bank_logo_without_wordmark.svg/2048px-Deutsche_Bank_logo_without_wordmark.svg.png",SIEGY:"https://logo.clearbit.com/siemens.com",EADSY:"https://logo.clearbit.com/airbus.com",DTEGY:"https://logo.clearbit.com/telekom.com",ALIZF:"https://logo.clearbit.com/allianz.com",SMNEY:"https://logo.clearbit.com/siemens-energy.com",MURGY:"https://logo.clearbit.com/munichre.com",DBK:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Deutsche_Bank_logo_without_wordmark.svg/2048px-Deutsche_Bank_logo_without_wordmark.svg.png",BMWYY:"https://logo.clearbit.com/bmwgroup.com",MUV:"https://companieslogo.com/img/orig/MUV2.DE-6afaafb5.png?t=1720244493",SY:"https://rest.arbeitsagentur.de/vermittlung/ag-darstellung-service/ct/v1/arbeitgeberlogo/4JLqgedHX82_0OO-z88rTtZAcYiMJrbi3lAXG2vhNTQ=",DEFAULT:"/placeholder-logo.png"};async function Vv(e){var t,n,r;const s=String(e||"").toUpperCase(),a=(Wv||{})[s];if("string"==typeof a&&a.length>0){if(a.startsWith("/")){let e="";if(a.startsWith("/public-logos/")?e=a.replace("/public-logos/",""):a.startsWith("/storage/v1/object/public/public-logos/")&&(e=a.replace("/storage/v1/object/public/public-logos/","")),e){const n=ei.storage.from("public-logos").getPublicUrl(e);if(null==(t=null==n?void 0:n.data)?void 0:t.publicUrl){const e=await async function(e){var t,n,r,s;try{if("true"!==String((null==(n=null==(t=import.meta)?void 0:t.env)?void 0:n.VITE_LOGO_SIGN)??"false").toLowerCase())return null;let a="";if(e.startsWith("/public-logos/"))a=e.replace("/public-logos/","");else{if(!e.startsWith("/storage/v1/object/public/public-logos/"))return null;a=e.replace("/storage/v1/object/public/public-logos/","")}const i=`public-logos/${a}`,o=Date.now(),l=Yv[i];if(l&&l.expiresAt>o)return l.url;const c=Number((null==(s=null==(r=import.meta)?void 0:r.env)?void 0:s.VITE_LOGO_SIGN_TTL_SEC)??604800),d=Math.max(60,Math.min(604800,Number.isFinite(c)?c:604800)),{data:u,error:m}=await ei.storage.from("public-logos").createSignedUrl(a,d);return m||!(null==u?void 0:u.signedUrl)?null:(Yv[i]={url:u.signedUrl,expiresAt:o+1e3*d},u.signedUrl)}catch{return null}}(a);return e||n.data.publicUrl}}const s=((null==(r=null==(n=import.meta)?void 0:n.env)?void 0:r.VITE_SUPABASE_URL)||Ja||"").replace(/\/$/,"");if(s)return a.startsWith("/public-logos/")?`${s}/storage/v1/object/public${a}`:`${s}${a}`}return a}return Hv[s]?Hv[s]:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4K"}function $v(e){var t,n,r;const s=String(e||"").toUpperCase(),a=(Wv||{})[s];if("string"==typeof a&&a.length>0){if(a.startsWith("/")){let e="";if(a.startsWith("/public-logos/")?e=a.replace("/public-logos/",""):a.startsWith("/storage/v1/object/public/public-logos/")&&(e=a.replace("/storage/v1/object/public/public-logos/","")),e){const n=ei.storage.from("public-logos").getPublicUrl(e);if(null==(t=null==n?void 0:n.data)?void 0:t.publicUrl)return n.data.publicUrl}const s=((null==(r=null==(n=import.meta)?void 0:n.env)?void 0:r.VITE_SUPABASE_URL)||Ja||"").replace(/\/$/,"");if(s)return a.startsWith("/public-logos/")?`${s}/storage/v1/object/public${a}`:`${s}${a}`}return a}return Hv[s]?Hv[s]:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4K"}const Gv=[{ticker:"SIE",adr:"SIEGY",name:"Siemens AG",sector:"Industrials",logo:$v("SIE")},{ticker:"DTE",adr:"DTEGY",name:"Deutsche Telekom AG",sector:"Communication Services",logo:$v("DTE")},{ticker:"AIR",adr:"EADSY",name:"Airbus SE",sector:"Industrials",logo:$v("AIR")},{ticker:"ALV",adr:"ALIZF",name:"Allianz SE",sector:"Financials",logo:$v("ALV")},{ticker:"RHM",adr:"",name:"Rheinmetall AG",sector:"Industrials",logo:$v("RHM")},{ticker:"ENR",adr:"SMNEY",name:"Siemens Energy AG",sector:"Utilities",logo:$v("ENR")},{ticker:"MUV2",adr:"MURGY",name:"Munich Re",sector:"Financials",logo:$v("MUV2")},{ticker:"DBK",adr:"DB",name:"Deutsche Bank AG",sector:"Financials",logo:$v("DBK")},{ticker:"BMW",adr:"BMWYY",name:"BMW AG",sector:"Consumer Discretionary",logo:$v("BMW")},{ticker:"SY1",adr:"SYIEF",name:"Symrise AG",sector:"Materials",logo:$v("SY1")},{ticker:"BNR",adr:"BNTGY",name:"Brenntag SE",sector:"Industrials",logo:$v("BNR")},{ticker:"ZAL",adr:"ZLNDY",name:"Zalando SE",sector:"Consumer Discretionary",logo:$v("ZAL")}];function Kv(e,t){var n;try{const t=Wv[e];if("string"==typeof t&&t.startsWith("/")){let e="";if(t.startsWith("/public-logos/")?e=t.replace("/public-logos/",""):t.startsWith("/storage/v1/object/public/public-logos/")&&(e=t.replace("/storage/v1/object/public/public-logos/","")),e){const t=ei.storage.from("public-logos").getPublicUrl(e);if(null==(n=null==t?void 0:t.data)?void 0:n.publicUrl)return t.data.publicUrl}}}catch{}return t&&"string"==typeof t?t:$v(e)}function Qv({ticker:e,src:t,alt:n,className:r,style:s,...a}){const i=String(e||"").toUpperCase(),[o,l]=tt.useState(()=>Kv(i,t)),[c,d]=tt.useState(!1);return tt.useEffect(()=>{c||l(Kv(i,t))},[i,t,c]),tt.useEffect(()=>{let e=!1;return(async()=>{try{const t=await Vv(i);if(!t||c||e||t===o)return;const n=new Image;n.onload=()=>{e||c||l(t)},n.onerror=()=>{},n.src=t}catch{}})(),()=>{e=!0}},[i,c]),X.jsx("img",{src:o,alt:n||`${i} logo`,loading:"lazy",decoding:"async",className:r,style:s,onError:()=>{d(!0),l("/placeholder-logo.png")},...a})}function Xv(e){return String(e).padStart(2,"0")}function Zv(e){const[t,n]=e.split(":").map(e=>parseInt(e,10));return{h:isNaN(t)?0:t,m:isNaN(n)?0:n}}function Jv(){var e,t,n,r,s,a;const i=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Berlin",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(new Date),o=Number((null==(e=i.find(e=>"year"===e.type))?void 0:e.value)||"1970"),l=Number((null==(t=i.find(e=>"month"===e.type))?void 0:t.value)||"01"),c=Number((null==(n=i.find(e=>"day"===e.type))?void 0:n.value)||"01"),d=Number((null==(r=i.find(e=>"hour"===e.type))?void 0:r.value)||"00"),u=Number((null==(s=i.find(e=>"minute"===e.type))?void 0:s.value)||"00"),m=Number((null==(a=i.find(e=>"second"===e.type))?void 0:a.value)||"00"),h=`${Xv(o)}-${Xv(l)}-${Xv(c)}T${Xv(d)}:${Xv(u)}:${Xv(m)}`;return new Date(h)}function ex(e,t){const n=Jv(),r=new Date(n);return r.setHours(e,t,0,0),r}function tx(e,t){const n=e.getTime()-t.getTime();return Math.max(0,Math.floor(n/1e3))}function nx(e){const{openWindow:t=["09:10","09:25"],openCutoff:n="08:55",closeWindow:r=["17:40","17:55"],closeCutoff:s="17:25"}={},[a,i]=Je.useState(Jv());Je.useEffect(()=>{const e=window.setInterval(()=>i(Jv()),1e3);return()=>window.clearInterval(e)},[]);const o=Je.useMemo(()=>{const e=`${Xv(a.getHours())}:${Xv(a.getMinutes())}`,[i,o]=t,[l,c]=r,d=(e,t,n)=>e>=t&&e<=n,u=d(e,i,o),m=d(e,l,c),{h:h,m:f}=Zv(i),{h:p,m:g}=Zv(o),{h:v,m:x}=Zv(l),{h:y,m:b}=Zv(c),{h:w,m:j}=Zv(n),{h:N,m:k}=Zv(s),S=ex(h,f),_=ex(p,g),E=ex(v,x),D=ex(y,b),T=ex(w,j),M=ex(N,k);if(u){return{phase:"open-live",seconds:tx(_,a),label:"Open auction live",cancelUntil:n,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:D},cutoffs:{openCut:T,closeCut:M}}}if(e<i){return{phase:"pre-open",seconds:tx(S,a),label:"Open auction in",cancelUntil:n,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:D},cutoffs:{openCut:T,closeCut:M}}}if(e>o&&e<l){return{phase:"pre-close",seconds:tx(E,a),label:"Close auction in",cancelUntil:s,nextSlot:"close",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:D},cutoffs:{openCut:T,closeCut:M}}}if(m){return{phase:"close-live",seconds:tx(D,a),label:"Close auction live",cancelUntil:s,nextSlot:"close",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:D},cutoffs:{openCut:T,closeCut:M}}}const A=ex(h,f);A.setDate(A.getDate()+1);return{phase:"overnight",seconds:tx(A,a),label:"Next open auction in",cancelUntil:n,nextSlot:"open",windows:{openStart:S,openEnd:_,closeStart:E,closeEnd:D},cutoffs:{openCut:T,closeCut:M}}},[a,t,r,n,s]),l=Je.useMemo(()=>{const e=Math.max(0,o.seconds),t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return`${Xv(t)}:${Xv(n)}:${Xv(r)}`},[o.seconds]);return{...o,hhmmss:l}}const rx="https://fsqds-production.yadavkartik-arbeit.workers.dev",sx={htiPlaceOrder:`${rx}/api/hti/place-order`,htiSaveScore:`${rx}/api/hti/save-score`,htiLeaderboard:`${rx}/api/leaderboards/hti`,adxPlaceOrder:`${rx}/api/adx/place-order`,adxSavePrediction:`${rx}/api/adx/save-prediction`,adxLeaderboard:`${rx}/api/leaderboards/adx`,marketOptions:e=>`${rx}/api/market/${e}/options`,health:`${rx}/health`,healthMetrics:`${rx}/health/metrics`,adminRunParityCheck:`${rx}/api/admin/run-parity-check`,adminRunLoadSlo:`${rx}/api/admin/run-load-slo`};function ax(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return""}}function ix(){var e,t,n,r,s,a;const{label:i,hhmmss:o,phase:l,windows:c,cutoffs:d}=nx(),[u,m]=Je.useState(null);Je.useRef(null),Je.useRef(null);const h=Je.useMemo(()=>`${(null==c?void 0:c.openStart)?c.openStart.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"09:10"}${(null==c?void 0:c.openEnd)?c.openEnd.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"09:25"}`,[c]),f=Je.useMemo(()=>`${(null==c?void 0:c.closeStart)?c.closeStart.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"17:40"}${(null==c?void 0:c.closeEnd)?c.closeEnd.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"17:55"}`,[c]),p=Je.useMemo(()=>{var e;return(null==(e=null==d?void 0:d.openCut)?void 0:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"08:55"},[d]),g=Je.useMemo(()=>{var e;return(null==(e=null==d?void 0:d.closeCut)?void 0:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"17:25"},[d]);Je.useEffect(()=>{let e=!1;return(async()=>{try{const t=sx.healthMetrics,n=await fetch(t,{cache:"no-store",headers:{Accept:"application/json"}});!e&&n.ok&&m(await n.json())}catch{}})(),()=>{e=!0}},[]);const v=l.includes("live")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",x=null==u?void 0:u.orchestrator,y=(null==(e=null==x?void 0:x.last_precheck_open)?void 0:e.data)||(null==x?void 0:x.last_precheck_open)||null,b=(null==(t=null==x?void 0:x.last_precheck_close)?void 0:t.data)||(null==x?void 0:x.last_precheck_close)||null,w=e=>{var t,n;if(!e||"object"!=typeof e)return"";const r=Number(e.staged||0),s=Number((null==(t=e.stale)?void 0:t.quotes)||0),a=Number((null==(n=e.stale)?void 0:n.marks)||0);return`${r}  ${r>0?Math.round((s+a)/r*100):0}% stale`};return X.jsx(kv,{className:"border shadow-sm",children:X.jsxs(Ev,{className:"py-2 px-3 text-xs flex flex-wrap items-center gap-3",children:[X.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded ${v}`,"aria-live":"polite",children:[i,": ",X.jsx("span",{className:"font-mono",children:o})]}),X.jsxs("span",{className:"text-muted-foreground",children:["Open ",h," (cutoff ",p,")"]}),X.jsxs("span",{className:"text-muted-foreground",children:["Close ",f," (cutoff ",g,")"]}),(null==(n=null==u?void 0:u.eurex_calendar)?void 0:n.windows_used)&&X.jsxs("span",{className:"text-muted-foreground",title:"Eurex-derived windows",children:["Eurex: O ",u.eurex_calendar.windows_used.open_run," / C ",u.eurex_calendar.windows_used.close_run]}),X.jsx("span",{className:"ml-auto"}),X.jsxs("span",{title:"Spread policy version",children:["Policy: ",(null==u?void 0:u.quotes_policy_version)?`model ${u.quotes_policy_version}`:""]}),X.jsxs("span",{title:"Last leaderboard rebuild",children:["LB: ",ax(null==(r=null==u?void 0:u.orchestrator)?void 0:r.last_leaderboard_rebuild)]}),X.jsxs("span",{title:"Last open auction",children:["Open: ",ax(null==(s=null==u?void 0:u.orchestrator)?void 0:s.last_auction_open)]}),X.jsxs("span",{title:"Last close auction",children:["Close: ",ax(null==(a=null==u?void 0:u.orchestrator)?void 0:a.last_auction_close)]}),X.jsxs("span",{title:"Precheck open",children:["Pre(O): ",w(y)]}),X.jsxs("span",{title:"Precheck close",children:["Pre(C): ",w(b)]})]})})}const ox={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"};function lx(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return""}}function cx(e){if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:Math.max(0,(Date.now()-t.getTime())/6e4)}function dx(e,t){const n="ok"===t?"text-green-700":"warn"===t?"text-yellow-700":"text-red-700";return X.jsx("span",{className:n,children:e})}function ux(){var e,t,n,r,s,a;const[i,o]=Je.useState(null),[l,c]=Je.useState(!0),[d,u]=Je.useState(null),[m,h]=Je.useState(null),f=Number((null==ox?void 0:ox.VITE_SLO_P95_MS)||1500);const p=(null==(e=null==i?void 0:i.stock_prices)?void 0:e.stale_count)??0,g=!!p;return X.jsxs(kv,{className:"border shadow-sm",children:[X.jsx(Sv,{className:"py-2",children:X.jsx(_v,{className:"text-xs",children:"System Status"})}),X.jsx(Ev,{className:"text-xs grid grid-cols-2 gap-x-4 gap-y-1",children:i?d?X.jsx("div",{className:"col-span-2 text-red-600",children:d}):X.jsxs(X.Fragment,{children:[X.jsx("div",{children:"Spot (last):"}),X.jsxs("div",{className:"text-right",children:[lx((null==(t=null==i?void 0:i.stock_prices)?void 0:t.last_updated)??null)," ",(()=>{var e;const t=cx((null==(e=null==i?void 0:i.stock_prices)?void 0:e.last_updated)??null);return null==t?dx("n/a","crit"):t<=10?dx("hot","ok"):t<=30?dx("warm","warn"):dx("stale","crit")})()]}),X.jsx("div",{children:"Marks (last):"}),X.jsxs("div",{className:"text-right",children:[lx((null==(n=null==i?void 0:i.options_model_marks)?void 0:n.last_calc_ts)??null)," ",(()=>{var e;const t=cx((null==(e=null==i?void 0:i.options_model_marks)?void 0:e.last_calc_ts)??null);return null==t?dx("n/a","crit"):t<=10?dx("hot","ok"):t<=30?dx("warm","warn"):dx("stale","crit")})()]}),X.jsx("div",{children:"Quotes (last):"}),X.jsxs("div",{className:"text-right",children:[lx((null==(r=null==i?void 0:i.options_quotes)?void 0:r.last_computed_at)??null)," ",(()=>{var e;const t=cx((null==(e=null==i?void 0:i.options_quotes)?void 0:e.last_computed_at)??null);return null==t?dx("n/a","crit"):t<=10?dx("hot","ok"):t<=30?dx("warm","warn"):dx("stale","crit")})()]}),X.jsxs("div",{children:["Stale count (>",null==i?void 0:i.stale_cutoff_minutes,"m):"]}),X.jsx("div",{className:"text-right "+(g?"text-yellow-700":"text-green-700"),children:p}),X.jsx("div",{children:"LB Cache (v2/v1):"}),X.jsxs("div",{className:"text-right",children:[(null==(s=null==i?void 0:i.leaderboard_cache)?void 0:s.v2_present)?"Y":"N"," / ",(null==(a=null==i?void 0:i.leaderboard_cache)?void 0:a.v1_present)?"Y":"N"]}),X.jsx("div",{children:"Spread policy:"}),X.jsx("div",{className:"text-right",children:(null==i?void 0:i.quotes_policy_version)?`model ${i.quotes_policy_version}`:""}),(()=>{var e,t;const n=null==(e=null==i?void 0:i.orchestrator)?void 0:e.last_precheck_open,r=null==(t=null==i?void 0:i.orchestrator)?void 0:t.last_precheck_close,s=(null==n?void 0:n.data)||n,a=(null==r?void 0:r.data)||r,o=e=>{var t,n;if(!e||"object"!=typeof e)return"";const r=Number(e.staged||0),s=Number((null==(t=e.stale)?void 0:t.quotes)||0),a=Number((null==(n=e.stale)?void 0:n.marks)||0),i=r>0?(s+a)/r:0;return`${r}  ${Math.round(100*i)}%`};return X.jsxs(X.Fragment,{children:[X.jsx("div",{children:"Precheck (O/C):"}),X.jsxs("div",{className:"text-right",children:[o(s)," / ",o(a)]})]})})(),X.jsx("div",{children:"SLO p95:"}),X.jsx("div",{className:"text-right "+(null==m?"":m<=f?"text-green-700":"text-red-700"),children:null==m?"":`${Math.round(m)}ms (<=${f}ms)`}),X.jsx("div",{children:"Ops Parity:"}),X.jsx("div",{className:"text-right",children:(()=>{var e;const t=null==(e=null==i?void 0:i.ops)?void 0:e.parity;if(!t)return"";const n=Number(t.warns??0),r=n>0?"text-yellow-700":"text-green-700";return X.jsxs("span",{className:r,children:[lx(t.ts),"  warns ",n]})})()}),X.jsx("div",{children:"Ops SLO:"}),X.jsx("div",{className:"text-right",children:(()=>{var e;const t=null==(e=null==i?void 0:i.ops)?void 0:e.slo;if(!t)return"";const n=!t.failed;return X.jsxs("span",{className:n?"text-green-700":"text-red-700",children:[lx(t.ts),"  ",n?"PASS":"FAIL"]})})()})]}):X.jsx("div",{className:"col-span-2",children:X.jsx("button",{onClick:async function(){try{u(null);const e=[sx.healthMetrics,"https://fsqds-production.yadavkartik-arbeit.workers.dev/health/metrics"];let t=null;for(const n of e)try{const e=await fetch(n,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){t=await e.json();break}}catch{}if(!t)throw new Error("No health metrics available");o(t)}catch(tj){u((null==tj?void 0:tj.message)||"Failed")}finally{c(!1)}},className:"text-xs px-2 py-1 border rounded",children:"Load status"})})})]})}function mx(){const[e,t]=tt.useState(!1),n=function(){const[e,t]=Je.useState(null);return Je.useEffect(()=>{let e=!0;async function n(){try{const n=await fetch(sx.healthMetrics);if(!n.ok)return;const r=await n.json();if(!e)return;const s=(null==r?void 0:r.quotes_policy_version)||null;t(s)}catch{}}n();const r=window.setInterval(n,3e5);return()=>{e=!1,window.clearInterval(r)}},[]),e}(),r=n?`Spread policy: model ${n}`:"Spread policy: loading";return X.jsxs("div",{className:"text-[11px] text-muted-foreground flex items-center gap-2",children:[X.jsx(iv,{variant:"outline",className:"px-1.5 py-0.5 text-[10px]",children:r}),X.jsx("button",{className:"underline decoration-dotted",onClick:()=>t(!e),"aria-expanded":e,"aria-label":"Pricing policy",disabled:!n,children:"What is this?"}),e&&n&&X.jsxs("div",{className:"mt-1 p-2 border rounded bg-card shadow-sm max-w-[480px]",children:[X.jsx("div",{className:"mb-1 font-medium",children:"Pricing policy"}),X.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[X.jsx("li",{children:"Quotes are synthetic: BlackScholes mid  spread; spread depends on moneyness, tenor, and volatility."}),X.jsx("li",{children:"Dividend yield (q) is applied; prices are bounded by no-arbitrage limits and tick-rounded."}),X.jsx("li",{children:"Auction execution uses the model mid plus half-spread and size-based slippage tiers."})]}),X.jsx("div",{className:"mt-2 text-[10px] text-muted-foreground",children:"Educational only  Not investment advice"})]})]})}var hx={},fx=st&&st.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),px=st&&st.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),gx=st&&st.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&fx(t,e,n);return px(t,e),t};Object.defineProperty(hx,"__esModule",{value:!0}),hx.useTurnstile=void 0;const vx=gx(Je),xx="undefined"!=typeof globalThis?globalThis:window;let yx,bx,wx=void 0!==xx.turnstile?"ready":"unloaded";const jx=new Promise((e,t)=>{bx={resolve:e,reject:t},"ready"===wx&&e(void 0)});{const e="cf__reactTurnstileOnLoad",t="https://challenges.cloudflare.com/turnstile/v0/api.js";yx=()=>{if("unloaded"===wx){wx="loading",xx[e]=()=>{bx.resolve(),wx="ready",delete xx[e]};const n=`${t}?onload=${e}&render=explicit`,r=document.createElement("script");r.src=n,r.async=!0,r.addEventListener("error",()=>{bx.reject("Failed to load Turnstile."),delete xx[e]}),document.head.appendChild(r)}return jx}}var Nx=hx.default=function({id:e,className:t,style:n,sitekey:r,action:s,cData:a,theme:i,language:o,tabIndex:l,responseField:c,responseFieldName:d,size:u,fixedSize:m,retry:h,retryInterval:f,refreshExpired:p,appearance:g,execution:v,userRef:x,onVerify:y,onSuccess:b,onLoad:w,onError:j,onExpire:N,onTimeout:k,onAfterInteractive:S,onBeforeInteractive:_,onUnsupported:E}){const D=(0,vx.useRef)(null),T=(0,vx.useState)({onVerify:y,onSuccess:b,onLoad:w,onError:j,onExpire:N,onTimeout:k,onAfterInteractive:S,onBeforeInteractive:_,onUnsupported:E})[0],M=null!=x?x:D,A=m?{width:"compact"===u?"130px":"flexible"===u?"100%":"300px",height:"compact"===u?"120px":"65px",...n}:n;return(0,vx.useEffect)(()=>{if(!M.current)return;let e=!1,t="";return(async()=>{var n,m;if("ready"!==wx)try{await yx()}catch(tj){return void(null===(n=T.onError)||void 0===n||n.call(T,tj))}if(e||!M.current)return;let x;const y={sitekey:r,action:s,cData:a,theme:i,language:o,tabindex:l,"response-field":c,"response-field-name":d,size:u,retry:h,"retry-interval":f,"refresh-expired":p,appearance:g,execution:v,callback:(e,t)=>{var n,r;null===(n=T.onVerify)||void 0===n||n.call(T,e,x),null===(r=T.onSuccess)||void 0===r||r.call(T,e,t,x)},"error-callback":e=>{var t;return null===(t=T.onError)||void 0===t?void 0:t.call(T,e,x)},"expired-callback":e=>{var t;return null===(t=T.onExpire)||void 0===t?void 0:t.call(T,e,x)},"timeout-callback":()=>{var e;return null===(e=T.onTimeout)||void 0===e?void 0:e.call(T,x)},"after-interactive-callback":()=>{var e;return null===(e=T.onAfterInteractive)||void 0===e?void 0:e.call(T,x)},"before-interactive-callback":()=>{var e;return null===(e=T.onBeforeInteractive)||void 0===e?void 0:e.call(T,x)},"unsupported-callback":()=>{var e;return null===(e=T.onUnsupported)||void 0===e?void 0:e.call(T,x)}};t=window.turnstile.render(M.current,y),x=function(e){return{execute:t=>window.turnstile.execute(e,t),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}(t),null===(m=T.onLoad)||void 0===m||m.call(T,t,x)})(),()=>{e=!0,t&&window.turnstile.remove(t)}},[r,s,a,i,o,l,c,d,u,h,f,p,g,v]),(0,vx.useEffect)(()=>{T.onVerify=y,T.onSuccess=b,T.onLoad=w,T.onError=j,T.onExpire=N,T.onTimeout=k,T.onAfterInteractive=S,T.onBeforeInteractive=_,T.onUnsupported=E},[y,b,w,j,N,k,S,_,E]),vx.default.createElement("div",{ref:M,id:e,className:t,style:A})};hx.useTurnstile=function(){const[e,t]=(0,vx.useState)(wx);return(0,vx.useEffect)(()=>{"ready"!==wx&&jx.then(()=>t(wx))},[]),xx.turnstile};const kx={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},Sx=[{symbol:"SAP",name:"SAP SE",adr:"SAP"},{symbol:"SIE",name:"Siemens AG",adr:"SIEGY"},{symbol:"ALV",name:"Allianz SE",adr:"AZSEY"},{symbol:"BAS",name:"BASF SE",adr:"BASFY"},{symbol:"BAYN",name:"Bayer AG",adr:"BAYRY"},{symbol:"BMW",name:"BMW AG",adr:"BMWYY"},{symbol:"VOW3",name:"Volkswagen AG",adr:"VWAGY"},{symbol:"DTE",name:"Deutsche Telekom AG",adr:"DTEGY"},{symbol:"MBG",name:"Mercedes-Benz Group AG",adr:"MBGAF"},{symbol:"MUV2",name:"Munich RE",adr:"MURGY"}];const _x=new class{constructor(){this.STARTING_BALANCE=1e5,this.MAX_TRADES_PER_DAY=100,this.SLIPPAGE_PERCENT=.5,this.snapshotCache=null,this.SNAPSHOT_STALE_MS=15e3}async fetchPortfolioSnapshot(){var e,t,n,r,s,a,i;const o=null==(e=(await ei.auth.getSession()).data.session)?void 0:e.access_token;if(!o)return null;const l=Date.now();if(this.snapshotCache&&l-this.snapshotCache.ts<=this.SNAPSHOT_STALE_MS){const e=this.snapshotCache.data||{};return{portfolio:e.portfolio??null,positions:e.positions??[],tradesToday:e.tradesToday??0,realized:e.realized??{},aggregates:e.aggregates}}const c={Authorization:`Bearer ${o}`,Accept:"application/json"};(null==(t=this.snapshotCache)?void 0:t.etag)&&(c["If-None-Match"]=this.snapshotCache.etag);const d=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/adx/portfolio-snapshot",{method:"GET",headers:c});if(!d.ok){if(this.snapshotCache){const e=this.snapshotCache.data||{};return{portfolio:e.portfolio??null,positions:e.positions??[],tradesToday:e.tradesToday??0,realized:e.realized??{}}}return null}const u=await d.json().catch(()=>null);if(!u)return null;const m=d.headers.get("X-ETag")||d.headers.get("ETag")||void 0,h={portfolio:(null==u?void 0:u.portfolio)||(null==(n=null==u?void 0:u.data)?void 0:n.portfolio)||null,positions:Array.isArray(null==u?void 0:u.positions)?u.positions:Array.isArray(null==(r=null==u?void 0:u.data)?void 0:r.positions)?u.data.positions:[],tradesToday:Number((null==u?void 0:u.tradesToday)||(null==(s=null==u?void 0:u.data)?void 0:s.tradesToday)||0),realized:(null==u?void 0:u.realized)||(null==(a=null==u?void 0:u.data)?void 0:a.realized)||{},aggregates:(null==u?void 0:u.aggregates)||(null==(i=null==u?void 0:u.data)?void 0:i.aggregates)||void 0};return this.snapshotCache={ts:l,etag:m,data:h},h}async getUserPortfolio(){const{data:{user:e}}=await ei.auth.getUser();if(!e)return null;try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.portfolio)??null}catch(tj){}const{data:t}=await ei.from("seasons").select("id").eq("status","active").single();if(!t)return null;let{data:n}=await ei.from("adx_portfolios").select("*").eq("user_id",e.id).eq("season_id",t.id).maybeSingle();return n}async getUserPositions(e){try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.positions)??[]}catch(tj){return[]}}async getSnapshotAggregates(){try{const e=await this.fetchPortfolioSnapshot();return(null==e?void 0:e.aggregates)||null}catch{return null}}async getTradingMetrics(){const{data:e}=await ei.functions.invoke("adx_metrics",{method:"POST",body:{}});if((null==e?void 0:e.ok)&&e.data)return e.data;try{const{data:e}=await ei.functions.invoke("adx_portfolio_snapshot",{method:"POST",body:{}});if(e&&e.portfolio){const t=e.portfolio,n=e.tradesToday||0,r=t.cash??t.starting_cash,s=t.equity??t.current_value??t.starting_cash,a=(Array.isArray(e.positions)?e.positions:[]).reduce((e,t)=>e+(t.avg_price??0)*(t.qty??0)*100,0),i=r,o=Math.max(0,i-a);return{accountBalance:r,dayTradingPower:i,tradesUsedToday:n,maxTradesPerDay:100,portfolioValue:s,todaysPnL:0,totalPnL:s-t.starting_cash,marginUsed:a,marginAvailable:o,maxDrawdownPct:Number(t.max_drawdown_pct||0),sharpe:Number(t.sharpe||0)}}}catch{}return null}async getPnLHistory(e,t=30){const n=new Date,r=new Date;r.setDate(r.getDate()-t);const{data:s,error:a}=await ei.from("adx_equity_daily").select("as_of_date, equity").eq("portfolio_id",e).gte("as_of_date",r.toISOString().split("T")[0]).lte("as_of_date",n.toISOString().split("T")[0]).order("as_of_date",{ascending:!0});if(!a&&s&&s.length>0){let e=null;return s.map(t=>{const n=Number(t.equity)||0,r=null!==e?n-e:0;return e=n,{date:t.as_of_date,pnl:r,cumulative:n}})}const{data:i}=await ei.from("adx_pnl_daily").select("as_of, ret, equity").eq("portfolio_id",e).gte("as_of",r.toISOString().split("T")[0]).lte("as_of",n.toISOString().split("T")[0]).order("as_of",{ascending:!0});return(i||[]).map(e=>({date:e.as_of,pnl:e.ret||0,cumulative:e.equity||0}))}async getTradeHistory(e,t=30){const n=new Date,r=new Date;r.setDate(r.getDate()-t);let s=[],a=null;try{const t=await ei.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("filled_at",r.toISOString()).lte("filled_at",n.toISOString());s=t.data||[],a=t.error}catch(tj){a=tj}let i=[];if(a){i=(await ei.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("ts",r.toISOString()).lte("ts",n.toISOString())).data||[]}else{i=(await ei.from("adx_orders").select("id, filled_at, ts").eq("portfolio_id",e).eq("status","FILLED").gte("ts",r.toISOString()).lte("ts",n.toISOString())).data||[]}const o=new Map;[...s,...i].forEach(e=>{o.has(e.id)||o.set(e.id,e)});const l=Array.from(o.values()).reduce((e,t)=>{const n=t.filled_at||t.ts;if(!n)return e;const r=new Date(n).toISOString().split("T")[0];return e[r]=(e[r]||0)+1,e},{}),c=[],d=new Date(r);for(;d<=n;){const e=d.toISOString().split("T")[0];c.push({date:e,trades:l[e]||0}),d.setDate(d.getDate()+1)}return c}async getCompaniesWithOptions(){try{const{data:e}=await ei.from("seasons").select("id, tickers").eq("status","active").single();if(!e||!e.tickers)return[];const{data:t}=await ei.from("stock_prices").select("*").in("ticker",e.tickers),n={},r=(new Date).toISOString().slice(0,10);for(const s of e.tickers){const{data:e}=await ei.from("v_options_display").select("option_symbol,ticker,type,strike,expiry,display_bid,display_ask,display_last").eq("ticker",s).gte("expiry",r).order("expiry",{ascending:!0}).order("strike",{ascending:!0});n[s]=e||[]}return(t||[]).map(e=>{const t=(n[e.ticker]||[]).slice(0,10).map(e=>({id:e.option_symbol,type:"put"===String(e.type).toLowerCase()?"put":"call",strike:Number(e.strike)||0,maturity:e.expiry,bidPrice:Number(e.display_bid)||0,askPrice:Number(e.display_ask)||0,volume:0,openInterest:0,exerciseStyle:"European"})),r=Sx.find(t=>t.adr===e.ticker);return{id:e.ticker,symbol:e.ticker,name:(null==r?void 0:r.name)||e.ticker,currentPrice:e.price,change:e.change,changePercent:e.change_percent,logoUrl:$v(e.ticker),options:t}})}catch(e){return[]}}async placeOrder(e,t){var n,r,s,a,i,o,l,c,d;try{const u=await this.getUserPortfolio();if(!u)return{success:!1,error:"No portfolio found"};const m="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),h=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;if(kx&&!0){const n="https://fsqds-production.yadavkartik-arbeit.workers.dev",l=await ei.auth.getSession(),c=null==(s=null==(r=null==l?void 0:l.data)?void 0:r.session)?void 0:s.access_token,d=await fetch(`${n}/api/adx/place-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:c?`Bearer ${c}`:"","x-correlation-id":h},body:JSON.stringify({portfolioId:u.id,optionSymbol:e.optionSymbol,side:e.action.toUpperCase(),qty:e.quantity,turnstileToken:m?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0})}),f=await d.json().catch(()=>({}));if(!d.ok||!(null==f?void 0:f.ok)){return{success:!1,error:`${(null==f?void 0:f.error)||"Order failed"} (ref: ${h})`}}const p=(null==f?void 0:f.data)||f;return{success:!0,order:null==p?void 0:p.order,auctionSlot:null==(a=null==p?void 0:p.order)?void 0:a.auctionSlot,previewPrice:null==(i=null==p?void 0:p.order)?void 0:i.previewPrice,estimatedFees:null==(o=null==p?void 0:p.order)?void 0:o.estimatedFees}}const{data:f,error:p}=await ei.functions.invoke("adx_place_order",{method:"POST",headers:{"x-correlation-id":h},body:{portfolioId:u.id,optionSymbol:e.optionSymbol,side:e.action.toUpperCase(),qty:e.quantity,turnstileToken:m?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(p||!(null==f?void 0:f.ok)){return{success:!1,error:`${(null==f?void 0:f.error)||(null==p?void 0:p.message)||"Order failed"} (ref: ${h})`}}const g=null==f?void 0:f.data;return{success:!0,order:null==g?void 0:g.order,auctionSlot:null==(l=null==g?void 0:g.order)?void 0:l.auctionSlot,previewPrice:null==(c=null==g?void 0:g.order)?void 0:c.previewPrice,estimatedFees:null==(d=null==g?void 0:g.order)?void 0:d.estimatedFees}}catch(u){return{success:!1,error:"Failed to place order"}}}async getStagedOrders(e){var t;try{const n=(null==(t=null==crypto?void 0:crypto.randomUUID)?void 0:t.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,{data:r,error:s}=await ei.functions.invoke("adx_list_staged_orders",{method:"POST",headers:{"x-correlation-id":n},body:{portfolio_id:e}});return s||!(null==r?void 0:r.ok)?[]:(null==r?void 0:r.data)||[]}catch(tj){return[]}}async cancelOrder(e,t){var n;try{const r="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),s=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,{data:a,error:i}=await ei.functions.invoke("adx_cancel_order",{method:"POST",headers:{"x-correlation-id":s},body:{orderId:e,turnstileToken:r?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(i||!(null==a?void 0:a.ok)){return{success:!1,error:`${(null==a?void 0:a.error)||(null==i?void 0:i.message)||"Cancel failed"} (ref: ${s})`}}return{success:!0}}catch(tj){return{success:!1,error:"Cancel failed"}}}async exerciseOption(e,t){var n;try{const r=await this.getUserPortfolio();if(!r)return{success:!1,error:"No portfolio found"};const s="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),a=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,{data:i,error:o}=await ei.functions.invoke("adx_exercise",{method:"POST",headers:{"x-correlation-id":a},body:{portfolioId:r.id,optionSymbol:e.optionSymbol,qty:e.qty,turnstileToken:s?"dev-bypass-token":(null==t?void 0:t.turnstileToken)||void 0}});if(o||!(null==i?void 0:i.ok)){return{success:!1,error:`${(null==i?void 0:i.error)||(null==o?void 0:o.message)||"Exercise failed"} (ref: ${a})`}}return{success:!0,data:null==i?void 0:i.data}}catch(r){return{success:!1,error:"Failed to exercise option"}}}async getPortfolioComposition(e){const t=await this.getUserPositions(e),n=t.filter(e=>"call"===e.type).reduce((e,t)=>e+(t.current_price??t.avg_price)*t.qty*100,0),r=t.filter(e=>"put"===e.type).reduce((e,t)=>e+(t.current_price??t.avg_price)*t.qty*100,0),s=n+r;return 0===s?{calls:0,puts:0}:{calls:n/s*100,puts:r/s*100}}async getOptionsMetadataBySymbols(e){const t=Array.from(new Set((e||[]).filter(Boolean)));if(0===t.length)return{};const{data:n,error:r}=await ei.from("options_market_data").select("option_symbol, ticker, type, strike, expiry, currency, exchange").in("option_symbol",t);if(r||!n)return{};const s={};for(const a of n)s[a.option_symbol]=a;return s}};function Ex(){const{user:e}=li(),[t,n]=Je.useState([]),[r,s]=Je.useState(!0),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState(!1),[u,m]=Je.useState(!1),[h,f]=Je.useState({}),[p,g]=Je.useState({}),[v,x]=Je.useState(""),[y,b]=Je.useState(""),w=Je.useRef(null);Je.useEffect(()=>{try{const e=new URL(window.location.href),t=e.searchParams.get("sym"),n=e.searchParams.get("exp"),r=e.searchParams.get("atm"),s=e.searchParams.get("ex");t&&x(t.toUpperCase()),n&&f(e=>({...e,[(t||v||"").toUpperCase()]:Math.min(Math.max(parseInt(n,10)||G,1),12)})),r&&g(e=>({...e,[(t||v||"").toUpperCase()]:Math.min(Math.max(parseFloat(r)||K,.01),.5)})),s&&(w.current=s)}catch{}},[]),Je.useEffect(()=>{try{const e=new URL(window.location.href);v&&e.searchParams.set("sym",v);const t=h[v],n=p[v];"number"==typeof t?e.searchParams.set("exp",String(t)):e.searchParams.delete("exp"),"number"==typeof n?e.searchParams.set("atm",String(n)):e.searchParams.delete("atm"),y?e.searchParams.set("ex",String(y)):e.searchParams.delete("ex");const r=`${e.pathname}${e.search}${e.hash}`;r!==`${window.location.pathname}${window.location.search}${window.location.hash}`&&window.history.replaceState({},"",r)}catch{}},[v,h,p,y]),Je.useEffect(()=>{E(null),b("")},[v]);const[j,N]=Je.useState("all"),[k,S]=Je.useState("all"),[_,E]=Je.useState(null),[D,T]=Je.useState(!1),[M,A]=Je.useState(null),[C,O]=Je.useState(1),[P,R]=Je.useState(0),[I,L]=Je.useState(!1),[F,z]=Je.useState(0),U=Je.useRef(null),B=Je.useRef(null),q=Je.useRef(null),W=Je.useRef(!1),[Y,H]=Je.useState(null),V=Je.useRef(null),$=nx(),G=3,K=.05,[Q,Z]=Je.useState(null);Je.useEffect(()=>{if(!Q)return;const e=window.setTimeout(()=>Z(null),1800);return()=>window.clearTimeout(e)},[Q]);const[J,ee]=Je.useState(!1),[te,ne]=Je.useState(0);async function re(e=!1){if(J)return;const t=Date.now();if(!e&&t-te<45e3)Z({msg:`Please wait ${Math.ceil((45e3-(t-te))/1e3)}s before refreshing again`,at:t});else if(v){ee(!0);try{const e="https://fsqds-production.yadavkartik-arbeit.workers.dev";try{const t=await fetch(`${e}/api/market/stock-prices?season=active&tickers=${encodeURIComponent(v)}`);if(t.ok){const e=await t.json().catch(()=>({ok:!1})),r=Array.isArray(null==e?void 0:e.data)?e.data.find(e=>String(e.ticker)===v):null;r&&n(e=>e.map(e=>e.symbol===v?{...e,currentPrice:Number(r.price)||0,change:Number(r.change)||0,changePercent:Number(r.change_percent)||0}:e))}}catch{}await ie(),ne(Date.now())}finally{ee(!1),l(new Date)}}}const[se,ae]=Je.useState(new Map),ie=Je.useMemo(()=>async()=>{var e;try{s(e=>e||0===t.length);let r=null;try{const{data:e}=await ei.from("seasons").select("id").eq("status","active").maybeSingle();r=(null==e?void 0:e.id)??null}catch{}let i=null;if(r){i=(await ei.from("adx_tickers").select("*").eq("season_id",r).eq("is_active",!0).order("band",{ascending:!0}).order("symbol",{ascending:!0})).data||[]}if(!i||0===i.length){i=(await ei.from("adx_tickers").select("*").eq("is_active",!0).order("band",{ascending:!0}).order("symbol",{ascending:!0})).data||[]}const o=["SAP","ALV","DTE","BAS","BAYN","BMW","SIE","DBK","MUV2","VOW3"];i&&0!==i.length||(i=o.map(e=>({symbol:e,name:e,band:"top"})));const c=i.map(e=>e.symbol),u="https://fsqds-production.yadavkartik-arbeit.workers.dev";let m=[];try{const e=await fetch(`${u}/api/market/stock-prices?season=active`);if(e.ok){const t=await e.json().catch(()=>({ok:!1}));m=(null==t?void 0:t.data)||[]}}catch{}if((!m||0===m.length)&&Array.isArray(c)&&c.length>0){const{data:e}=await ei.from("stock_prices").select("ticker, price, change, change_percent, last_updated").in("ticker",c);m=e||[]}const f=new Map((m||[]).filter(e=>c.includes(e.ticker)).map(e=>[e.ticker,{price:Number(e.price)||0,change:Number(e.change)||0,change_percent:Number(e.change_percent)||0,last_updated:e.last_updated}]));let g=0;f.forEach(e=>{const t=e.last_updated?Date.parse(e.last_updated):0;t>g&&(g=t)});const y=Date.now();d(0===g||y-g>12e5);const b=new Map,w=v||i&&(null==(e=i[0])?void 0:e.symbol)||"";if(w){let e=`${u}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(w)}&liquid=${a?"true":"false"}`;const t=h[w],n=p[w];"number"!=typeof t&&"number"!=typeof n||(e+="&override=1","number"==typeof t&&(e+=`&maxExpiries=${t}`),"number"==typeof n&&(e+=`&atmPct=${n}`));const r=await fetch(e);if(!r.ok&&("number"==typeof h[w]||"number"==typeof p[w])){const t=Date.now().toString(36),n=e+(e.includes("?")?`&t=${t}`:`?t=${t}`);try{await fetch(n)}catch{}}if(r.ok){const e=await r.json().catch(()=>({ok:!1})),t=(null==e?void 0:e.data)||[];b.set(w,t)}}const j=i.map(e=>{const t=f.get(e.symbol),n=b.get(e.symbol)||[],r=(a?n.filter(e=>(Number(e.display_bid)||0)>0||(Number(e.display_ask)||0)>0):n).map(e=>({id:e.option_symbol,type:"put"===String(e.type).toLowerCase()?"put":"call",strike:Number(e.strike)||0,maturity:e.expiry,bidPrice:Number(e.display_bid)||0,askPrice:Number(e.display_ask)||0,lastPrice:Number(e.display_last)||0,volume:0,openInterest:0,impliedVol:null,delta:null,gamma:null,theta:null}));return{id:e.id,symbol:e.symbol,name:e.name,currentPrice:(null==t?void 0:t.price)??0,change:(null==t?void 0:t.change)??0,changePercent:(null==t?void 0:t.change_percent)??0,logoUrl:$v(e.symbol),options:r}});n(j),!v&&j.length>0&&x(j[0].symbol),l(new Date)}catch(tj){n([]),d(!0),l(new Date)}finally{s(!1)}},[a,v,t.length,h,p]);Je.useEffect(()=>{ie()},[ie,h,p]),Je.useEffect(()=>{let e=!0;return(async()=>{var t,n;try{const{data:r}=await ei.auth.getSession(),s=null==(n=null==(t=null==r?void 0:r.session)?void 0:t.user)?void 0:n.id;if(!s)return void(e&&m(!1));const{data:a}=await ei.from("user_profiles").select("is_admin").eq("user_id",s).single();e&&m(!!(null==a?void 0:a.is_admin))}catch{e&&m(!1)}})(),()=>{e=!1}},[]),Je.useEffect(()=>{const e=async(e,t)=>{H({kind:e,at:t}),await ie(),V.current&&window.clearTimeout(V.current),V.current=window.setTimeout(()=>H(null),8e3)},t=t=>{var n;return e("open",(null==(n=null==t?void 0:t.detail)?void 0:n.at)||(new Date).toISOString())},n=t=>{var n;return e("close",(null==(n=null==t?void 0:t.detail)?void 0:n.at)||(new Date).toISOString())};return window.addEventListener("auction-run:open",t),window.addEventListener("auction-run:close",n),()=>{V.current&&window.clearTimeout(V.current),window.removeEventListener("auction-run:open",t),window.removeEventListener("auction-run:close",n)}},[ie]),Je.useEffect(()=>{},[ie]);const oe=Je.useMemo(()=>t.find(e=>e.symbol===v)||null,[t,v]),le=Je.useMemo(()=>{if(!oe)return[];const e=Array.from(new Set(oe.options.map(e=>e.maturity))).sort();return w.current&&e.includes(w.current)&&y!==w.current?(b(w.current),w.current=null):!y&&e.length>0&&b(e[0]),e},[oe,y]);const ce=Je.useMemo(()=>{if(!oe)return[];let e=oe.options;if("all"!==j){const t="calls"===j?"call":"put";e=e.filter(e=>e.type===t)}return y&&(e=e.filter(e=>e.maturity===y)),"all"!==k&&(oe.currentPrice||0)>0&&(e=e.filter(e=>{return t=e.strike,n=oe.currentPrice,(Math.abs(t-n)/(n||1)<.02?"ATM":t>n?"OTM":"ITM")===k;var t,n})),e},[oe,j,y,k]);Je.useEffect(()=>{ae(new Map)},[oe,v,y,k,j,ce]);const[de,ue]=Je.useState(0);Je.useEffect(()=>{(async()=>{try{if(!e||!_)return R(0),void ue(0);const t=await _x.getUserPortfolio();if(!t)return R(0),void ue(0);const[n,r]=await Promise.all([_x.getUserPositions(t.id),_x.getStagedOrders(t.id)]),s=(n||[]).find(e=>e.option_symbol===_.id);R(s?Number(s.qty||0):0);const a=(r||[]).filter(e=>String(e.option_symbol)===_.id&&"PENDING"===String(e.status).toUpperCase()&&"SELL"===String(e.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0);ue(a)}catch{R(0),ue(0)}})()},[e,null==_?void 0:_.id]);const me=Je.useMemo(()=>{const e=new Map;for(const t of ce){const n=e.get(t.strike)||{};n[t.type]=t,e.set(t.strike,n)}return Array.from(e.entries()).map(([e,t])=>({strike:e,call:t.call,put:t.put})).sort((e,t)=>e.strike-t.strike)},[ce]),he=Je.useMemo(()=>{if(!oe||0===me.length)return null;const e=oe.currentPrice||0;let t=me[0].strike,n=Math.abs(me[0].strike-e);for(const r of me){const s=Math.abs(r.strike-e);s<n&&(n=s,t=r.strike)}return t},[oe,me]);async function fe(t){var n,r,s;if(!e||!oe||!_||D)return;const a=Math.max(1,Math.min(1e3,C||1));if("sell"===t){const e=Math.max(0,P-de);if(a>e)return void A(`Cannot sell ${a}: available ${e} (staged ${de} of ${P})`)}T(!0),A("Refreshing prices");try{await re(!0);const e=await async function(){var e,t;if("undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname))return"dev-bypass-token";for(let n=0;n<20&&!(I&&U.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.execute));n++)await new Promise(e=>setTimeout(e,100));if(I&&U.current&&(null==(t=null==window?void 0:window.turnstile)?void 0:t.execute)){if(W.current){for(let e=0;e<25&&(W.current||!q.current);e++)await new Promise(e=>setTimeout(e,100));if(q.current&&Date.now()-q.current.at<5e3)return q.current.token}return W.current=!0,await new Promise(e=>{var t;let n=!1;const r=window.setTimeout(()=>{n=!0,B.current=null,W.current=!1,e("")},5e3);B.current=t=>{n||(window.clearTimeout(r),q.current={token:t,at:Date.now()},W.current=!1,e(t))};try{(null==(t=null==window?void 0:window.turnstile)?void 0:t.reset)&&U.current&&window.turnstile.reset(U.current),window.turnstile.execute(U.current)}catch(s){window.clearTimeout(r),W.current=!1,z(e=>e+1),e("")}})}}();if(!("undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname))&&!e)return void A("Verification failed  please try again");const i=await _x.placeOrder({optionSymbol:_.id,ticker:oe.symbol,type:_.type,strike:_.strike,expiry:_.maturity,quantity:a,action:t,orderType:"market"},{turnstileToken:e});if(i.success){const e=i.previewPrice?` (preview ${Fv(i.previewPrice,2)}`:"",t="number"==typeof i.estimatedFees?`${e?"  ":" ("}fees ${Fv(i.estimatedFees,2)})`:e?")":"";if(i.auctionSlot){const a="open"===i.auctionSlot?null==(n=$.cutoffs)?void 0:n.openCut:null==(r=$.cutoffs)?void 0:r.closeCut,o=a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",l=(null==(s=null==i?void 0:i.order)?void 0:s.note)?`  ${String(i.order.note)}`:"";A(`Order staged for ${i.auctionSlot.toUpperCase()}${e}${t}${l}  cancel until ${o} Berlin`)}else A("Order filled");window.dispatchEvent(new CustomEvent("portfolio-updated"))}else A(i.error||"Failed to place order")}catch(tj){A("Error placing order")}finally{T(!1),setTimeout(()=>A(null),4e3)}}return r?X.jsx("div",{className:"flex items-center justify-center p-12 text-muted-foreground",children:"Loading options data"}):X.jsxs("div",{className:"space-y-6",children:[X.jsx(ix,{}),Y&&X.jsxs("div",{className:"text-xs bg-green-50 text-green-800 border border-green-200 rounded px-3 py-2",role:"status","aria-live":"polite",children:[Y.kind.toUpperCase()," auction executed at ",new Date(Y.at).toLocaleTimeString(),"  refreshing"]}),X.jsx("div",{className:"sr-only",children:X.jsx(Nx,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"flexible",onLoad:e=>{U.current=e,L(!0)},onVerify:e=>{q.current={token:String(e),at:Date.now()},W.current=!1,B.current&&(B.current(String(e)),B.current=null)},onExpire:()=>{W.current=!1},onError:()=>{W.current=!1,L(!1),z(e=>e+1)}},`matrix-invisible-${F}`)}),X.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-4 bg-muted/30 rounded-lg",children:[Q?X.jsx("div",{className:"fixed top-3 right-3 z-50 bg-popover text-popover-foreground border rounded px-3 py-2 shadow",children:X.jsx("span",{className:"text-xs",children:Q.msg})}):null,X.jsxs("div",{className:"flex flex-col gap-1",children:[X.jsx(mx,{}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Underlying"}),X.jsxs(Mv,{value:v,onValueChange:x,children:[X.jsx(Cv,{className:"h-8 w-60",children:X.jsx(Av,{placeholder:"Select"})}),X.jsx(Ov,{children:t.map(e=>X.jsx(Pv,{value:e.symbol,children:X.jsxs("span",{className:"inline-block max-w-[12rem] truncate align-bottom",children:[e.symbol,"  ",e.name]})},e.symbol))})]})]}),X.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Prices are not live. Please use Refresh before trading to ensure current pricing."})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Type"}),X.jsx(Tv,{size:"sm",variant:"all"===j?"default":"outline",className:"h-8",onClick:()=>N("all"),children:"All"}),X.jsx(Tv,{size:"sm",variant:"calls"===j?"default":"outline",className:"h-8 text-green-600 border-green-600",onClick:()=>N("calls"),children:"Calls"}),X.jsx(Tv,{size:"sm",variant:"puts"===j?"default":"outline",className:"h-8 text-red-600 border-red-600",onClick:()=>N("puts"),children:"Puts"})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Moneyness"}),X.jsx(Tv,{size:"sm",variant:"all"===k?"default":"outline",className:"h-8",onClick:()=>S("all"),children:"All"}),X.jsx(Tv,{size:"sm",variant:"ITM"===k?"default":"outline",className:"h-8",onClick:()=>S("ITM"),children:"ITM"}),X.jsx(Tv,{size:"sm",variant:"ATM"===k?"default":"outline",className:"h-8",onClick:()=>S("ATM"),children:"ATM"}),X.jsx(Tv,{size:"sm",variant:"OTM"===k?"default":"outline",className:"h-8",onClick:()=>S("OTM"),children:"OTM"})]}),X.jsxs("label",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[X.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5",checked:a,onChange:e=>i(e.target.checked)}),"Hide illiquid (no quotes)"]})]}),oe?X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[X.jsxs(kv,{className:"lg:col-span-2",children:[X.jsxs(Sv,{className:"pb-3",children:[X.jsxs(_v,{className:"text-lg flex items-center justify-between",children:[X.jsxs("span",{children:[oe.symbol," Options"]}),X.jsxs("span",{className:"flex items-center gap-2 text-sm font-normal text-muted-foreground",children:["Contracts: ",oe.options.length,X.jsx(Tv,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>re(),disabled:J,title:"Refresh underlying and options now",children:J?"Refreshing":"Refresh Prices"})]})]}),X.jsxs("div",{className:"mt-2",children:[X.jsxs("div",{className:"flex items-center justify-between gap-2",children:[X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expiration",(()=>{const e=v,t="number"==typeof h[e]?Math.min(Math.max(h[e],1),12):Math.max(2,le.length),n=Math.max(0,12-t);return X.jsxs("span",{className:"ml-2 text-[11px] text-muted-foreground/80",children:["Expiries: ",t,"/12 (left: ",n,")"]})})(),(()=>{const e=v,t="number"==typeof p[e]?p[e]:.03;return X.jsxs("span",{className:"ml-3 text-[11px] text-muted-foreground/80",children:["ATM: ",Math.round(100*t),"% (max 10%)"]})})()]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(Tv,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>(async()=>{const e=v;if(!e)return;const t=h[e]??G,n=Math.min(t+3,12);f(t=>({...t,[e]:n}));const r=p[e];let s="";if("number"!=typeof r||r<.1){const t=.1;g(n=>({...n,[e]:t})),s=`  ATM widened to ${Math.round(100*t)}%`}Z({msg:`Expiries expanded to ${n}${s}`,at:Date.now()});try{await ie()}catch{}})(),title:(()=>{const e=v,t="number"==typeof h[e]?h[e]:Math.max(2,le.length);return`Adds +3 up to 12${"number"!=typeof p[e]||p[e]<.1?"  auto-widens ATM to 10% if needed":""} (now: ${t}/12)`})(),children:"+ Expiries"}),X.jsx(Tv,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>(async()=>{const e=v;if(!e)return;const t=p[e]??K,n=Math.min(t+.05,.1);g(t=>({...t,[e]:n})),Z({msg:`ATM range widened to ${Math.round(100*n)}%`,at:Date.now()});try{await ie()}catch{}})(),title:(()=>{const e=v,t="number"==typeof p[e]?p[e]:.03;return`Widens by +5% up to 10% (now: ${Math.round(100*t)}%)`})(),children:"+ ATM Range"}),X.jsx(Tv,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",onClick:async()=>{const e=v;if(e){f(t=>{const n={...t};return delete n[e],n}),g(t=>{const n={...t};return delete n[e],n}),Z({msg:"Window reset",at:Date.now()});try{await ie()}catch{}try{const e=new URL(window.location.href);e.searchParams.delete("exp"),e.searchParams.delete("atm"),window.history.replaceState({},"",`${e.pathname}${e.search}${e.hash}`)}catch{}}},title:"Reset window",children:"Reset"})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:le.slice(0,12).map(e=>X.jsx("button",{onClick:()=>b(e),className:"px-2 py-1 rounded-full border text-xs "+(y===e?"bg-primary text-primary-foreground border-primary":"bg-card hover:bg-accent border-muted"),title:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),children:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},e))})]})]}),X.jsx(Ev,{children:X.jsx("div",{className:"border rounded-lg overflow-hidden",children:X.jsx("div",{className:"overflow-x-auto max-h-[70vh] overflow-y-auto",children:X.jsxs("table",{className:"w-full table-fixed",children:[X.jsx("thead",{className:"bg-muted sticky top-0 z-10",children:X.jsxs("tr",{children:[X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-green-50 w-[10%]",children:"CALLS"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Bid"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Ask"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Last"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-primary text-primary-foreground w-[12%]",children:"Strike"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Bid"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Ask"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center w-[10%]",children:"Last"}),X.jsx("th",{className:"px-2 py-2 text-xs text-center bg-red-50 w-[10%]",children:"PUTS"})]})}),X.jsx("tbody",{children:me.map(e=>{var t,n;const r=null!=he&&e.strike===he;return X.jsxs("tr",{className:(r?"bg-yellow-50":"")+" border-b",children:[X.jsx("td",{className:"px-2 py-2 text-center bg-green-50",children:e.call?X.jsx(Tv,{size:"sm",variant:(null==_?void 0:_.id)===e.call.id?"default":"ghost",className:"text-xs h-6 px-1 w-full",onClick:()=>E(e.call),children:"Select"}):X.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?e.call.bidPrice>0?X.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["",Fv(e.call.bidPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?e.call.askPrice>0?X.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["",Fv(e.call.askPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.call?X.jsxs("span",{className:"font-medium text-sm",children:["",Fv(e.call.lastPrice>0?e.call.lastPrice:(null==(t=se.get(e.call.id))?void 0:t.price)||0,2)]}):"-"}),X.jsxs("td",{className:"px-2 py-2 text-center font-mono font-bold text-lg bg-muted",children:[X.jsxs("div",{className:r?"text-yellow-600 font-extrabold text-xl":"",children:["",e.strike]}),r&&X.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"ATM"})]}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?e.put.bidPrice>0?X.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["",Fv(e.put.bidPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?e.put.askPrice>0?X.jsxs("span",{className:"text-red-600 font-medium text-sm",children:["",Fv(e.put.askPrice,2)]}):X.jsx("span",{className:"text-xs text-muted-foreground",children:""}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center",children:e.put?X.jsxs("span",{className:"font-medium text-sm",children:["",Fv(e.put.lastPrice>0?e.put.lastPrice:(null==(n=se.get(e.put.id))?void 0:n.price)||0,2)]}):"-"}),X.jsx("td",{className:"px-2 py-2 text-center bg-red-50",children:e.put?X.jsx(Tv,{size:"sm",variant:(null==_?void 0:_.id)===e.put.id?"default":"ghost",className:"text-xs h-6 px-1 w-full",onClick:()=>E(e.put),children:"Select"}):X.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})})]},e.strike)})})]})})})})]}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs(kv,{children:[X.jsx(Sv,{className:"pb-3",children:X.jsx(_v,{className:"text-sm",children:"Company Info"})}),X.jsxs(Ev,{className:"space-y-4",children:[X.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[X.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:X.jsx(Qv,{ticker:oe.symbol,alt:`${oe.name} logo`,className:"w-full h-full object-contain p-1 bg-white"})}),X.jsxs("div",{className:"text-center",children:[X.jsx("h3",{className:"font-mono text-lg font-bold",children:oe.symbol}),X.jsx("p",{className:"text-xs text-muted-foreground",children:oe.name})]})]}),X.jsxs("div",{className:"text-center",children:[X.jsxs("div",{className:"text-2xl font-bold",children:["",Fv(oe.currentPrice,2)]}),X.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm "+(oe.change>=0?"text-green-600":"text-red-600"),children:[oe.change>=0?"+":"",Fv(oe.change,2)," (",Bv(oe.changePercent,2,!0),")"]})]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Contracts: ",oe.options.length]})]})]}),X.jsxs(kv,{children:[X.jsx(Sv,{className:"pb-3",children:X.jsx(_v,{className:"text-sm",children:"Option Details"})}),X.jsx(Ev,{className:"space-y-3",children:_?X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx(iv,{variant:"call"===_.type?"default":"secondary",children:_.type.toUpperCase()}),X.jsx("span",{className:"text-sm text-muted-foreground",children:oe.symbol})]}),X.jsxs("div",{className:"text-center",children:[X.jsxs("div",{className:"text-2xl font-bold",children:["",_.strike]}),X.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(_.maturity).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),X.jsx("div",{className:"text-[11px] text-muted-foreground mb-2",children:"Quotes are per unit (/unit). Each contract represents 100 units of the underlying."}),oe&&(h[oe.symbol]||p[oe.symbol])?X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Window: ",h[oe.symbol]?`${h[oe.symbol]} expiries`:"",h[oe.symbol]&&p[oe.symbol]?"  ":"",p[oe.symbol]?`${Math.round(100*(p[oe.symbol]||0))}% ATM`:""]}):null,X.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Bid (per unit)"}),X.jsx("div",{className:"font-semibold text-green-600",children:_.bidPrice>0?`${Fv(_.bidPrice,2)}`:""})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Last"}),X.jsxs("div",{className:"font-semibold",children:["",Fv(_.lastPrice,2)]})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Ask (per unit)"}),X.jsx("div",{className:"font-semibold text-red-600",children:_.askPrice>0?`${Fv(_.askPrice,2)}`:""})]})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("label",{className:"text-xs text-muted-foreground",children:"Qty"}),X.jsx("input",{type:"number",min:1,max:1e3,value:C,onChange:e=>O(parseInt(e.target.value)||1),className:"w-20 h-8 px-2 py-1 border rounded text-xs","aria-label":"Quantity"})]}),X.jsx(Tv,{className:"bg-green-600 hover:bg-green-700",onClick:()=>fe("buy"),disabled:!e||D,children:(()=>{var e;const t=_.askPrice>0?_.askPrice:(null==(e=se.get(_.id))?void 0:e.price)||0,n=Math.max(1,Math.min(1e3,C||1));return t>0?`Buy ${Fv(t*n*100,2)}`:"Buy"})()}),X.jsx(Tv,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",onClick:()=>fe("sell"),disabled:!e||D||C>Math.max(0,P-de),title:C>Math.max(0,P-de)?`Available ${Math.max(0,P-de)} (staged ${de} of ${P})`:"",children:(()=>{var e;const t=_.bidPrice>0?_.bidPrice:(null==(e=se.get(_.id))?void 0:e.price)||0,n=Math.max(1,Math.min(1e3,C||1));return t>0?`Sell ${Fv(t*n*100,2)}`:"Sell"})()})]}),(()=>{var e;const t=_?_.askPrice>0?_.askPrice:(null==(e=se.get(_.id))?void 0:e.price)||0:null;if(!t)return null;const n=t*Math.max(1,Math.min(1e3,C||1))*100;return X.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Total Notional: ",Fv(n,2)]})})(),M&&X.jsx("div",{className:"text-xs text-muted-foreground",children:M}),X.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-muted-foreground",children:[X.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/81/EUREX_Logo_Blue_sRGB.png",alt:"Eurex",className:"h-4"}),X.jsx("span",{children:"Powered by Deutsche Boerse"})]})]}):X.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:"Select an option to view details"})})]})]})]}):X.jsx("div",{className:"text-center p-12 text-muted-foreground",children:"No companies available"}),u&&X.jsx("div",{className:"mt-6",children:X.jsx(ux,{})})]})}function Dx({className:e,type:t,...n}){return X.jsx("input",{type:t,"data-slot":"input",className:ev("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const Tx=Oa("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mx=Je.forwardRef(({className:e,...t},n)=>X.jsx(Ie,{ref:n,className:Pa(Tx(),e),...t}));Mx.displayName=Ie.displayName;const Ax=new class{constructor(){this.companiesCache=null,this.cacheTimestamp=0,this.CACHE_DURATION=3e5}async getCompanies(e=!1){if(!e&&this.companiesCache&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION)return this.companiesCache;try{const{data:e}=await ei.from("seasons").select("id").eq("status","active").single();if(!e)return Gv.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}));const{data:t}=await ei.from("adx_tickers").select("*").eq("season_id",e.id).eq("is_active",!0);if(t&&t.length>0){const{data:e}=await ei.from("stock_prices").select("*").in("ticker",t.map(e=>e.symbol));this.companiesCache=t.map(t=>{const n=null==e?void 0:e.find(e=>e.ticker===t.symbol),r=Gv.find(e=>e.ticker===t.symbol);return{id:t.id,ticker:t.symbol,name:t.name||(null==r?void 0:r.name)||t.symbol,sector:(null==r?void 0:r.sector)||"Unknown",logo:(null==t?void 0:t.logo_url)||$v(t.symbol),adr:(null==r?void 0:r.adr)||t.symbol,price:null==n?void 0:n.price,change:null==n?void 0:n.change,changePercent:null==n?void 0:n.change_percent}})}else this.companiesCache=Gv.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}));return this.cacheTimestamp=Date.now(),this.companiesCache}catch(t){return Gv.map(e=>({id:e.ticker,ticker:e.ticker,name:e.name,sector:e.sector,logo:e.logo,adr:e.adr}))}}async getRevenuePredictions(){try{const{data:{user:e}}=await ei.auth.getUser();if(!e)return[];const t=await this.getCompanies(),{data:n}=await ei.from("seasons").select("id, name").eq("status","active").single();if(!n)return[];const{data:r}=await ei.from("adx_revenue_predictions").select("*").eq("season_id",n.id).eq("user_id",e.id),{data:s}=await ei.from("adx_revenue_actuals").select("symbol, actual_value").eq("season_id",n.id),a=new Map;return(s||[]).forEach(e=>a.set(String(e.symbol).toUpperCase(),e.actual_value)),t.map(e=>{var t;const s=null==r?void 0:r.find(t=>t.symbol===e.ticker),i=(new Date).toISOString().slice(0,10),o=(null==(t=null==s?void 0:s.updated_at)?void 0:t.slice(0,10))===i&&s.updates_today||0,l="number"==typeof(null==s?void 0:s.value)?Number(null==s?void 0:s.value):void 0,c=a.get(e.ticker),d="number"==typeof l&&"number"==typeof c?Math.pow(l-c,2):void 0;return{ticker:e.ticker,companyName:e.name,logo:e.logo,quarter:n.name||"Current Season",prediction:l,actualRevenue:c,mse:d,updatesLeft:Math.max(0,5-o)}})}catch(e){return[]}}async submitPrediction(e,t,n){var r;try{const{data:{user:s}}=await ei.auth.getUser();if(!s)return{success:!1,error:"Authentication required"};const{data:a}=await ei.from("seasons").select("id").eq("status","active").single();if(!a)return{success:!1,error:"No active season"};const i=!0,o="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),l=(null==n?void 0:n.turnstileToken)||(o?"dev-bypass-token":void 0);if(i&&!l)return{success:!1,error:"Verification required"};const c=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/adx_save_prediction",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(r=(await ei.auth.getSession()).data.session)?void 0:r.access_token}`},body:JSON.stringify({seasonId:a.id,symbol:e,value:t,turnstileToken:l||(i?void 0:"dev-bypass-token")})}),d=await c.json();return d.ok?{success:!0}:{success:!1,error:d.error||"Failed to save prediction"}}catch(s){return{success:!1,error:"An unexpected error occurred"}}}async getOptionsForTrading(){try{const e=await this.getCompanies(),t=new Map,n=((new Date).toISOString().slice(0,10),"https://fsqds-production.yadavkartik-arbeit.workers.dev");for(const s of e)try{const e=await fetch(`${n}/api/market/options/catalog?season=active&symbol=${encodeURIComponent(s.ticker)}&liquid=true&maxExpiries=6`,{headers:{Accept:"application/json"}});if(!e.ok){t.set(s.ticker,[]);continue}const r=await e.json(),a=Array.isArray(null==r?void 0:r.data)?r.data:[];t.set(s.ticker,a||[])}catch{t.set(s.ticker,[])}const r=[];for(const s of e){const e=t.get(s.ticker)||[];for(const t of e){const e=Number(t.display_bid)||0,n=Number(t.display_ask)||0,a=Number(t.display_last)||0,i=e>0&&n>0?(e+n)/2:a;r.push({id:t.option_symbol,ticker:t.ticker,companyName:s.name,logo:s.logo||$v(t.ticker),type:"put"===String(t.type).toLowerCase()?"put":"call",strike:Number(t.strike)||0,expiry:t.expiry,bid:e,ask:n,mid:i,volume:0,openInterest:0})}}return r}catch(e){return[]}}async getCompanyByTicker(e){return(await this.getCompanies()).find(t=>t.ticker===e)||null}clearCache(){this.companiesCache=null,this.cacheTimestamp=0}};function Cx({company:e,existingPrediction:t,onSubmit:n}){var r,s;const[a,i]=Je.useState(!t),[o,l]=Je.useState((null==(r=null==t?void 0:t.predictedRevenue)?void 0:r.toString())||""),[c,d]=Je.useState(!1);return X.jsxs(kv,{className:"overflow-hidden",children:[X.jsx(Sv,{className:"pb-4",children:X.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[X.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:X.jsx(Qv,{ticker:e.symbol,src:e.logoUrl,alt:`${e.name} logo`,className:"w-full h-full object-cover"})}),X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsx(_v,{className:"font-mono text-lg mb-1",children:e.symbol}),X.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.name})]}),X.jsxs("div",{className:"flex items-center gap-2",children:[t&&X.jsx(iv,{variant:"submitted"===t.status?"default":"secondary",className:"text-xs",children:"submitted"===t.status?"Submitted":"Verified"}),c&&X.jsx(iv,{variant:"default",className:"text-xs bg-green-600 text-white",children:"Saved!"})]})]})}),X.jsx(Ev,{className:"space-y-4",children:a?X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:`prediction-${e.id}`,className:"text-sm",children:"Your Prediction (Billions $)"}),X.jsx(Dx,{id:`prediction-${e.id}`,type:"number",step:"0.01",placeholder:"e.g., 125.50",value:o,onChange:e=>l(e.target.value),className:"mt-1"})]}),X.jsxs("div",{className:"flex gap-2",children:[X.jsxs(Tv,{size:"sm",onClick:async()=>{if(o&&parseFloat(o)>0){await n(e.id,parseFloat(o))&&(i(!1),d(!0),setTimeout(()=>d(!1),2500))}},className:"flex-1",children:[X.jsx($n,{className:"w-3 h-3 mr-1"}),"Submit"]}),t&&X.jsx(Tv,{size:"sm",variant:"outline",onClick:()=>{var e;l((null==(e=null==t?void 0:t.predictedRevenue)?void 0:e.toString())||""),i(!1)},children:X.jsx(or,{className:"w-3 h-3"})})]})]}):X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{className:"p-3 rounded-lg bg-muted/20 border",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Prediction"}),X.jsxs("div",{className:"font-semibold text-lg",children:["$",null==t?void 0:t.predictedRevenue,"B"]})]}),X.jsxs(Tv,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[X.jsx(Qn,{className:"w-3 h-3 mr-1"}),"Edit"]})]}),(null==t?void 0:t.actualRevenue)&&X.jsx("div",{className:"mt-2 pt-2 border-t",children:X.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[X.jsxs("div",{children:[X.jsx("span",{className:"text-muted-foreground",children:"Actual: "}),X.jsxs("span",{className:"font-semibold",children:["$",t.actualRevenue,"B"]})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-muted-foreground",children:"MSE: "}),X.jsx("span",{className:"font-semibold",children:null==(s=t.mse)?void 0:s.toFixed(2)})]})]})})]}),t&&X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Submitted on ",new Date(t.submittedAt).toLocaleDateString()]})]})})]})}function Ox({userStats:e}){return X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsxs(_v,{className:"flex items-center gap-2",children:[X.jsx(Zn,{className:"w-5 h-5"}),"Your Performance"]})}),X.jsxs(Ev,{children:[X.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[X.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/20",children:[X.jsx("div",{className:"text-2xl font-bold mb-1",children:e.totalPredictions}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"Predictions Made"})]}),X.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/20",children:[X.jsx("div",{className:"text-2xl font-bold mb-1",children:e.avgMSE>0?e.avgMSE.toFixed(2):""}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg MSE"})]})]}),X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Rank"}),X.jsx(iv,{variant:"default",className:"text-xs",children:e.currentRank>0?`#${e.currentRank}`:""})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Rank"}),X.jsx(iv,{variant:"outline",className:"text-xs",children:e.bestRank>0?`#${e.bestRank}`:""})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm text-muted-foreground",children:"Verified"}),X.jsxs("span",{className:"text-sm font-semibold",children:[e.verifiedPredictions,"/",e.totalPredictions]})]})]})]})]})}function Px(){const{user:e}=li(),[t,n]=Je.useState([]),[r,s]=Je.useState([]),[a,i]=Je.useState([]),[o,l]=Je.useState([]),[c,d]=Je.useState(""),[u,m]=Je.useState(null),[h,f]=Je.useState(null),[p,g]=Je.useState(null),[v,x]=Je.useState(null),[y,b]=Je.useState({totalPredictions:0,verifiedPredictions:0,avgMSE:0,currentRank:0,bestRank:0}),[w,j]=Je.useState(!0),[N,k]=Je.useState(null),[S,_]=Je.useState(0);Je.useEffect(()=>{(async()=>{if(e){j(!0);try{const[e,t]=await Promise.all([Ax.getCompanies(),Ax.getRevenuePredictions()]);n(e),s(t);const{data:r}=await ei.from("seasons").select("id, name, starts_at, ends_at, status").eq("status","active").single();if(r){m(r.id),d(r.name||"Current Season"),f(r.starts_at||null),g(r.ends_at||null),x(r.status||null);const e=(new Date).toISOString(),n=t.filter(e=>null!=e.prediction).map(t=>({id:`${t.ticker}-${e}`,companyId:t.ticker,quarter:r.name||"Current Season",submittedAt:e,predictedRevenue:t.prediction,actualRevenue:t.actualRevenue,mse:t.mse,status:null!=t.actualRevenue?"verified":"submitted"}));i(n);const s=n.length,a=n.filter(e=>"verified"===e.status),o=a.length>0?a.reduce((e,t)=>e+(t.mse||0),0)/a.length:0,c=[{quarter:r.name||"Current Season",mse:o||0,rank:0}];l(c),b({totalPredictions:s,verifiedPredictions:a.length,avgMSE:o,currentRank:0,bestRank:0})}}catch(tj){}finally{j(!1)}}})()},[e]),Je.useEffect(()=>{if(!e||!u)return;let t=null;const n=async()=>{try{const e=await Ax.getRevenuePredictions();s(e);const t=(new Date).toISOString(),n=e.filter(e=>"number"==typeof e.prediction).map(e=>({id:`${e.ticker}-${t}`,companyId:e.ticker,quarter:c||"Current Season",submittedAt:t,predictedRevenue:e.prediction,actualRevenue:e.actualRevenue,mse:e.mse,status:null!=e.actualRevenue?"verified":"submitted"}));i(n);const r=n.filter(e=>"verified"===e.status),a=r.length>0?r.reduce((e,t)=>e+(t.mse||0),0)/r.length:0;b(e=>({...e,totalPredictions:n.length,verifiedPredictions:r.length,avgMSE:a})),l([{quarter:c||"Current Season",mse:a||0,rank:0}])}catch(tj){}},r=()=>{t&&window.clearTimeout(t),t=window.setTimeout(n,500)},a=ei.channel(`predictions-${u}-${e.id}`).on("postgres_changes",{event:"*",schema:"public",table:"adx_revenue_actuals",filter:`season_id=eq.${u}`},()=>r()).on("postgres_changes",{event:"*",schema:"public",table:"adx_revenue_predictions",filter:`season_id=eq.${u},user_id=eq.${e.id}`},()=>r()).subscribe();return()=>{t&&window.clearTimeout(t);try{ei.removeChannel(a)}catch{}}},[null==e?void 0:e.id,u,c]);const E=async(e,n)=>{if(!N)return void Ga.error("Please complete verification");const r=t.find(t=>t.id===e||t.ticker===e);if(!r)return;const a=await Ax.submitPrediction(r.ticker,n,{turnstileToken:N});if(k(null),_(e=>e+1),a.success){Ga.success(`Prediction saved for ${r.ticker}  $${Fv(n,2)}B`);const e=await Ax.getRevenuePredictions();s(e);const t=(new Date).toISOString(),a=e.filter(e=>"number"==typeof e.prediction).map(e=>({id:`${e.ticker}-${t}`,companyId:e.ticker,quarter:c||"Current Season",submittedAt:t,predictedRevenue:e.prediction,actualRevenue:e.actualRevenue,mse:e.mse,status:null!=e.actualRevenue?"verified":"submitted"}));i(a);const o=a.filter(e=>"verified"===e.status),d=o.length>0?o.reduce((e,t)=>e+(t.mse||0),0)/o.length:0;b(e=>({...e,totalPredictions:a.length,verifiedPredictions:o.length,avgMSE:d})),l([{quarter:c||"Current Season",mse:d||0,rank:0}])}else Ga.error(a.error||"Failed to save prediction");return a.success},D=r;return X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Revenue Predictions"}),X.jsx("p",{className:"text-muted-foreground text-lg",children:"Submit your quarterly revenue predictions and compete for accuracy"})]}),X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{children:"Season"})}),X.jsx(Ev,{children:X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("div",{className:"text-base font-semibold",children:c||"Current Season"}),v&&X.jsx(iv,{variant:"active"===v?"default":"secondary",className:"text-xs capitalize",children:v})]}),h||p?X.jsxs("div",{className:"text-xs text-muted-foreground",children:[h&&X.jsxs("span",{children:["Starts: ",new Date(h).toLocaleDateString()]}),h&&p&&X.jsx("span",{children:"  "}),p&&X.jsxs("span",{children:["Ends: ",new Date(p).toLocaleDateString()]})]}):null,h&&p?(()=>{const e=new Date,t=new Date(h),n=new Date(p),r=Math.max(0,n.getTime()-t.getTime()),s=Math.min(Math.max(0,e.getTime()-t.getTime()),r),a=Math.max(0,n.getTime()-e.getTime()),i=r>0?s/r*100:0,o=Math.ceil(a/864e5);return X.jsxs("div",{className:"space-y-2",children:[X.jsx(Nv,{value:i,className:"h-2"}),X.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[X.jsxs("span",{children:[Math.round(i),"% complete"]}),X.jsxs("span",{children:[o," days left"]})]})]})})():X.jsx("div",{className:"text-xs text-muted-foreground",children:"Season dates not available"})]})})]}),X.jsx(Ox,{userStats:y})]}),X.jsxs(tv,{defaultValue:"submit",className:"w-full",children:[X.jsxs(nv,{className:"grid w-full grid-cols-3 max-w-md",children:[X.jsx(rv,{value:"submit",children:"Submit"}),X.jsx(rv,{value:"history",children:"History"}),X.jsx(rv,{value:"analytics",children:"Analytics"})]}),X.jsx(sv,{value:"submit",className:"mt-6",children:X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Predictions"}),X.jsxs(iv,{variant:"outline",className:"text-xs",children:[D.filter(e=>void 0!==e.prediction).length,"/",t.length," submitted"]})]}),X.jsx("div",{className:"flex justify-center",children:X.jsx(Nx,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>k(e),onExpire:()=>k(null)},S)}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{const t=D.find(t=>t.ticker===e.ticker),n=t&&void 0!==t.prediction,r={id:e.id,symbol:e.ticker,name:e.name,logoUrl:e.logo},s=n?{id:`${e.id}`,companyId:e.id,quarter:t.quarter,submittedAt:(new Date).toISOString(),predictedRevenue:t.prediction,status:null!=t.actualRevenue?"verified":"submitted",actualRevenue:t.actualRevenue,mse:t.mse}:void 0;return X.jsx(Cx,{company:r,existingPrediction:s,onSubmit:E},e.id)})})]})}),X.jsx(sv,{value:"history",className:"mt-6",children:X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{children:"Prediction History"})}),X.jsx(Ev,{children:X.jsx("div",{className:"space-y-4",children:0===a.length?X.jsx("div",{className:"text-sm text-muted-foreground",children:"No prediction history yet."}):a.map(e=>{var n;const r=t.find(t=>t.ticker===e.companyId);return r?X.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-8 h-8 rounded overflow-hidden bg-muted",children:X.jsx(Qv,{ticker:r.ticker,src:r.logo,alt:r.name,className:"w-full h-full object-cover"})}),X.jsxs("div",{children:[X.jsxs("div",{className:"font-semibold",children:[r.ticker," - ",e.quarter]}),X.jsxs("div",{className:"text-sm text-muted-foreground",children:["Predicted: $",e.predictedRevenue,"B",e.actualRevenue&&X.jsxs("span",{children:[" | ","Actual: $",e.actualRevenue,"B"," | ","MSE: ",null==(n=e.mse)?void 0:n.toFixed(2)]})]})]})]}),X.jsxs("div",{className:"text-right",children:[X.jsx(iv,{variant:"verified"===e.status?"default":"outline",className:"text-xs",children:e.status}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.submittedAt).toLocaleDateString()})]})]},e.id):null})})})]})}),X.jsx(sv,{value:"analytics",className:"mt-6",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{children:"MSE Trend"})}),X.jsx(Ev,{children:o.length>0?X.jsx(Ht,{width:"100%",height:200,children:X.jsxs(Vt,{data:o,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"quarter",tick:{fontSize:12}}),X.jsx(Kt,{tick:{fontSize:12}}),X.jsx(Qt,{formatter:e=>[e,"MSE"]}),X.jsx(Xt,{type:"monotone",dataKey:"mse",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444"}})]})}):X.jsx("div",{className:"flex items-center justify-center h-[200px] text-sm text-muted-foreground",children:"No historical data available"})})]}),X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{children:"Ranking Progress"})}),X.jsx(Ev,{children:o.length>0&&o.some(e=>e.rank>0)?X.jsx(Ht,{width:"100%",height:200,children:X.jsxs(Zt,{data:o,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"quarter",tick:{fontSize:12}}),X.jsx(Kt,{tick:{fontSize:12},reversed:!0}),X.jsx(Qt,{formatter:e=>[`#${e}`,"Rank"]}),X.jsx(Jt,{dataKey:"rank",fill:"#3b82f6"})]})}):X.jsx("div",{className:"flex items-center justify-center h-[200px] text-sm text-muted-foreground",children:"Rankings will appear after predictions are verified"})})]})]})})]})]})}var[Rx,Ix]=J("Tooltip",[Le]),Lx=Le(),Fx="TooltipProvider",zx=700,Ux="tooltip.open",[Bx,qx]=Rx(Fx),Wx=e=>{const{__scopeTooltip:t,delayDuration:n=zx,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,[i,o]=Je.useState(!0),l=Je.useRef(!1),c=Je.useRef(0);return Je.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),X.jsx(Bx,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:Je.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:Je.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:Je.useCallback(e=>{l.current=e},[]),disableHoverableContent:s,children:a})};Wx.displayName=Fx;var Yx="Tooltip",[Hx,Vx]=Rx(Yx),$x=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:o}=e,l=qx(Yx,e.__scopeTooltip),c=Lx(t),[d,u]=Je.useState(null),m=Ye(),h=Je.useRef(0),f=i??l.disableHoverableContent,p=o??l.delayDuration,g=Je.useRef(!1),[v=!1,x]=se({prop:r,defaultProp:s,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(Ux))):l.onClose(),null==a||a(e)}}),y=Je.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),b=Je.useCallback(()=>{window.clearTimeout(h.current),g.current=!1,x(!0)},[x]),w=Je.useCallback(()=>{window.clearTimeout(h.current),x(!1)},[x]),j=Je.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,x(!0)},p)},[p,x]);return Je.useEffect(()=>()=>window.clearTimeout(h.current),[]),X.jsx(He,{...c,children:X.jsx(Hx,{scope:t,contentId:m,open:v,stateAttribute:y,trigger:d,onTriggerChange:u,onTriggerEnter:Je.useCallback(()=>{l.isOpenDelayed?j():b()},[l.isOpenDelayed,j,b]),onTriggerLeave:Je.useCallback(()=>{f?w():window.clearTimeout(h.current)},[w,f]),onOpen:b,onClose:w,disableHoverableContent:f,children:n})})};$x.displayName=Yx;var Gx="TooltipTrigger",Kx=Je.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Vx(Gx,n),a=qx(Gx,n),i=Lx(n),o=Je.useRef(null),l=ee(t,o,s.onTriggerChange),c=Je.useRef(!1),d=Je.useRef(!1),u=Je.useCallback(()=>c.current=!1,[]);return Je.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),X.jsx(Fe,{asChild:!0,...i,children:X.jsx(ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:oe(e.onPointerMove,e=>{"touch"!==e.pointerType&&(d.current||a.isPointerInTransitRef.current||(s.onTriggerEnter(),d.current=!0))}),onPointerLeave:oe(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:oe(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:oe(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:oe(e.onBlur,s.onClose),onClick:oe(e.onClick,s.onClose)})})});Kx.displayName=Gx;var[Qx,Xx]=Rx("TooltipPortal",{forceMount:void 0}),Zx="TooltipContent",Jx=Je.forwardRef((e,t)=>{const n=Xx(Zx,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=Vx(Zx,e.__scopeTooltip);return X.jsx(ae,{present:r||i.open,children:i.disableHoverableContent?X.jsx(ry,{side:s,...a,ref:t}):X.jsx(ey,{side:s,...a,ref:t})})}),ey=Je.forwardRef((e,t)=>{const n=Vx(Zx,e.__scopeTooltip),r=qx(Zx,e.__scopeTooltip),s=Je.useRef(null),a=ee(t,s),[i,o]=Je.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:u}=r,m=Je.useCallback(()=>{o(null),u(!1)},[u]),h=Je.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},s=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...s,...function(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return Je.useEffect(()=>()=>m(),[m]),Je.useEffect(()=>{if(l&&d){const e=e=>h(e,d),t=e=>h(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,h,m]),Je.useEffect(()=>{if(i){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),s=!function(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,o=t[a].y,l=t[i].x,c=t[i].y;o>r!=c>r&&n<(l-e)*(r-o)/(c-o)+e&&(s=!s)}return s}(n,i);r?m():s&&(m(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,m]),X.jsx(ry,{...e,ref:a})}),[ty,ny]=Rx(Yx,{isInside:!1}),ry=Je.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=e,l=Vx(Zx,n),c=Lx(n),{onClose:d}=l;return Je.useEffect(()=>(document.addEventListener(Ux,d),()=>document.removeEventListener(Ux,d)),[d]),Je.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),X.jsx(ze,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:X.jsxs(Ue,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[X.jsx(Be,{children:r}),X.jsx(ty,{scope:n,isInside:!0,children:X.jsx(qe,{id:l.contentId,role:"tooltip",children:s||r})})]})})});Jx.displayName=Zx;var sy="TooltipArrow";Je.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Lx(n);return ny(sy,n).isInside?null:X.jsx(We,{...s,...r,ref:t})}).displayName=sy;var ay=Jx;const iy=Wx,oy=$x,ly=Kx,cy=Je.forwardRef(({className:e,sideOffset:t=4,...n},r)=>X.jsx(ay,{ref:r,sideOffset:t,className:Pa("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));function dy(e){const t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDate();return new Date(Date.UTC(t,n,r))}function uy(e){if(!e)return 0;const t=new Date(e);if(Number.isNaN(t.getTime()))return 0;const n=function(e,t){const n=dy(e).getTime(),r=dy(t).getTime();return Math.round((n-r)/864e5)}(t,new Date);return Math.max(0,n)}cy.displayName=ay.displayName;const my={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},hy=[],fy=[];function py({positions:e,stagedOrders:t,onSell:n,onExercise:r,spotByTicker:s,busyByPosition:a,cancellingId:i}){const[o,l]=tt.useState({});function c({ticker:e}){const t=String(e||"");return X.jsx(Qv,{ticker:t,className:"w-5 h-5 rounded-sm object-contain"})}return X.jsx("div",{className:"max-h-96 overflow-y-auto pr-1 space-y-3",children:e.map(e=>{var i,d;const u=(m=e,Math.min(Math.max(1,o[m.id]??m.quantity),m.quantity));var m;const h=(null==a?void 0:a[e.id])||null;return X.jsx(kv,{className:"overflow-hidden",children:X.jsxs(Ev,{className:"p-4",children:[X.jsxs("div",{className:"flex items-center justify-between mb-3",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx(c,{ticker:String(e.symbol||"")}),X.jsx(iv,{variant:"call"===(null==(d=null==(i=e.type)?void 0:i.toLowerCase)?void 0:d.call(i))?"default":"secondary",className:"text-xs",children:String(e.type??"").toUpperCase()}),X.jsxs("div",{children:[X.jsxs("div",{className:"font-semibold",children:[e.symbol," ",Fv(e.strike,2)]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Exp: ",new Date(e.expiry).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),X.jsxs("div",{className:"text-right",children:[X.jsx(iv,{variant:"bought"===e.action?"outline":"default",className:"text-xs mb-1",children:e.action}),(()=>{const n=(t||[]).filter(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase()&&"SELL"===String(t.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0),r=Math.max(0,Number(e.quantity||0)-n);return X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Qty: ",e.quantity,n>0?` (staged ${n}  avail ${r})`:""]})})(),t.some(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase())&&X.jsx("div",{className:"mt-1",children:X.jsx(iv,{variant:"outline",className:"text-[10px]",children:"Staged"})})]})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Price (per unit)"}),X.jsx("div",{className:"font-semibold",children:Uv(e.avgPrice,2,"")})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Current (per unit)"}),X.jsx("div",{className:"font-semibold",children:Uv(e.currentPrice,2,"")})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Unrealized P&L"}),X.jsxs("div",{className:"font-semibold "+(e.pnl>=0?"text-green-600":"text-red-600"),children:[zv(e.pnl,2),"  (",Bv(e.pnlPercent,2,!0),")"]})]})]}),(()=>{const t=e.quantity,n=100,r=qv(e.currentPrice)-qv(e.avgPrice),a=r*t*n-(.25*t+2e-4*(Math.max(0,qv(e.currentPrice))*t*n)),i=s[String(e.symbol)]??null;let o=0;null==i||Number.isNaN(i)||(o="call"===String(e.type).toLowerCase()?Math.max(0,i-qv(e.strike)):Math.max(0,qv(e.strike)-i));const l=.25*t+2e-4*(Math.max(0,o)*t*n),c=o-qv(e.avgPrice),d=c*t*n-l;return X.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[X.jsxs("div",{className:"p-2 rounded border",children:[X.jsx("div",{className:"text-muted-foreground mb-1",children:"Sell now PnL (approx)"}),X.jsxs("div",{children:["Per unit: ",zv(r,2)," "]}),X.jsxs("div",{children:["Total (after fees): ",zv(a,2)," "]})]}),X.jsxs("div",{className:"p-2 rounded border",children:[X.jsx("div",{className:"text-muted-foreground mb-1",children:"Exercise now PnL (intrinsic, approx)"}),X.jsxs("div",{children:["Per unit: ",zv(c,2)," "]}),X.jsxs("div",{children:["Total (after fees): ",zv(d,2)," "]})]})]})})(),X.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[X.jsx("span",{className:"font-mono",children:e.id}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium (per unit) ",Uv(Math.round(100*qv(e.currentPrice))/100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium per contract ",Uv(Math.round(100*qv(e.currentPrice))/100*100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium total ",Uv(Math.round(100*qv(e.currentPrice))/100*qv(e.quantity)*100,2,"")]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Cost basis total ",Uv(Math.round(100*qv(e.avgPrice))/100*qv(e.quantity)*100,2,"")]})]}),X.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[X.jsx(Rn,{className:"w-3 h-3"}),e.daysToExpiry," days to expiry"]}),X.jsx("div",{className:"flex items-center gap-2",children:(()=>{const s=(t||[]).filter(t=>String(t.option_symbol)===e.id&&"PENDING"===String(t.status).toUpperCase()&&"SELL"===String(t.side).toUpperCase()).reduce((e,t)=>e+Number(t.qty||0),0),a=Math.max(0,Number(e.quantity||0)-s),i=Math.max(1,a);return X.jsxs(X.Fragment,{children:[X.jsx("input",{type:"number",min:1,max:i,value:u,onChange:t=>l(n=>({...n,[e.id]:Math.max(1,Math.min(i,parseInt(t.target.value)||1))})),className:"w-20 h-7 px-2 py-1 border rounded text-xs","aria-label":"Quantity to trade",disabled:!!h}),X.jsx(Tv,{size:"sm",variant:"outline",className:"h-7 text-xs flex items-center gap-1",onClick:()=>n(e,u),disabled:!!h||u<1||u>a,title:u>a?`Available ${a} (staged ${s} of ${e.quantity})`:"",children:"sell"===h?X.jsxs(X.Fragment,{children:[X.jsx(Un,{className:"w-3 h-3 animate-spin"})," Selling"]}):"Sell"}),X.jsx(Tv,{size:"sm",className:"h-7 text-xs flex items-center gap-1",onClick:()=>r(e,u),disabled:!!h||u<1||u>a,title:u>a?`Available ${a} (staged ${s} of ${e.quantity})`:"",children:"exercise"===h?X.jsxs(X.Fragment,{children:[X.jsx(Un,{className:"w-3 h-3 animate-spin"})," Exercising"]}):"Exercise"})]})})()})]})]})},e.id)})})}function gy({tradesUsed:e,maxTrades:t}){const n=e/t*100,r=t-e;return X.jsxs(kv,{children:[X.jsx(Sv,{className:"pb-3",children:X.jsxs(_v,{className:"text-lg flex items-center gap-2",children:[X.jsx(Zn,{className:"w-5 h-5"}),"Daily Trade Limit"]})}),X.jsxs(Ev,{children:[X.jsxs("div",{className:"text-center mb-4",children:[X.jsx("div",{className:"text-3xl font-bold mb-1",children:r}),X.jsx("div",{className:"text-muted-foreground text-sm",children:"trades remaining"})]}),X.jsx(Nv,{value:n,className:"h-3 mb-3"}),X.jsxs("div",{className:"flex justify-between text-sm",children:[X.jsxs("span",{className:"text-muted-foreground",children:["Used: ",e]}),X.jsxs("span",{className:"text-muted-foreground",children:["Limit: ",t]})]}),n>80&&X.jsx("div",{className:"mt-3 p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:X.jsxs("div",{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400 text-xs",children:[X.jsx(nr,{className:"w-3 h-3"}),"Approaching daily limit"]})})]})]})}function vy(){var e,t;const n=new Date,r=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Berlin",hour12:!1,hour:"2-digit",minute:"2-digit"}).formatToParts(n),s=parseInt((null==(e=r.find(e=>"hour"===e.type))?void 0:e.value)||"0",10),a=parseInt((null==(t=r.find(e=>"minute"===e.type))?void 0:t.value)||"0",10),i=new Date(n);return i.setHours(s,a,0,0),i}function xy(e){const t=vy(),n=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`,r="open"===e?"09:10-09:25":"17:40-17:55",[s,a]=r.split("-");return n>=s&&n<=a}function yy({metrics:e}){const[t,n]=Je.useState("7d"),[r,s]=Je.useState(null),[a,i]=Je.useState([]),[o,l]=Je.useState([]),[c,d]=Je.useState([]),[u,m]=Je.useState({calls:0,puts:0}),[h,f]=Je.useState([]),[p,g]=Je.useState(!1),[v,x]=Je.useState(!0),[y,b]=Je.useState({}),[w,j]=Je.useState({}),[N,k]=Je.useState([]),[S,_]=Je.useState({}),[E,D]=Je.useState([]),[T,M]=Je.useState(!0),[A,C]=Je.useState(!0),[O,P]=Je.useState(!0),[R,I]=Je.useState(!0),[L,F]=Je.useState([]),[z,U]=Je.useState([]),[B,q]=Je.useState([]),[W,Y]=Je.useState({delta:0,gamma:0,vega:0}),[H,V]=Je.useState([]),{user:$}=li();function G(e){try{const t=String(e||"");if(t.length>=15){const e=t.slice(-15),n=e.slice(0,2),r=e.slice(2,4),s=e.slice(4,6),a=e.slice(6,7),i=e.slice(7),o=`${Number(n)+2e3}-${r}-${s}`;return{expiry:o,right:"C"===a?"call":"put",strike:Number(i)/1e3}}}catch{}return null}Je.useEffect(()=>{(async()=>{if($)try{const n=await _x.getUserPortfolio();if(n){s(n);const r=await _x.getUserPositions(n.id);i(r);const a="1d"===t?1:"7d"===t?7:"30d"===t?30:90,o=await _x.getPnLHistory(n.id,a);l(o);const c=new Date,u=new Date;u.setDate(c.getDate()-a);const{data:h}=await ei.from("adx_equity_daily").select("as_of_date, equity, cash, positions_value").eq("portfolio_id",n.id).gte("as_of_date",u.toISOString().slice(0,10)).lte("as_of_date",c.toISOString().slice(0,10)).order("as_of_date",{ascending:!0}),p=[];let g=null;(h||[]).forEach(e=>{const t=Number(e.equity||0),n=Number(e.cash||0),r=Number(e.positions_value||Math.max(0,t-n)),s=null!=g?t-g:0;g=t,p.push({date:e.as_of_date,equity:t,cash:n,positions:r,pnl:s})}),k(p);const{data:v}=await ei.from("adx_orders").select("filled_at, qty, realized_pnl").eq("portfolio_id",n.id).eq("status","FILLED").eq("side","SELL").gte("filled_at",u.toISOString()).lte("filled_at",c.toISOString());let x=[];try{x=(await ei.from("adx_exercises").select("realized_pnl, ts").eq("portfolio_id",n.id).gte("ts",u.toISOString()).lte("ts",c.toISOString())).data||[]}catch(e){}const y=new Map(p.map(e=>[e.date,e.equity])),w=[];(v||[]).forEach(e=>{const t=new Date(e.filled_at).toISOString().slice(0,10),n=y.get(t)??(p.length?p[p.length-1].equity:0),r=Number(e.qty||0);w.push({date:t,equity:n,type:"SELL",label:`SELL filled x${r}`})}),(x||[]).forEach(e=>{const t=new Date(e.ts).toISOString().slice(0,10),n=y.get(t)??(p.length?p[p.length-1].equity:0),r=Number(e.realized_pnl||0);w.push({date:t,equity:n,type:"EXERCISE",label:`Exercise realized ${Fv(r,2)}`})}),D(w);const N=Number(n.starting_cash||0)||0,S=[],_=[];let E=N>0?N:p.length?p[0].equity:0;p.forEach(e=>{const t=e.equity-N,n=N>0?100*(e.equity/N-1):0;S.push({date:e.date,cum:t,cumPct:n}),E=Math.max(E,e.equity);const r=E>0?(E-e.equity)/E*100:0;_.push({date:e.date,ddPct:r})}),F(S),U(_);const T=new Map;(v||[]).forEach(e=>{const t=new Date(e.filled_at).toISOString().slice(0,10),n=Number(e.realized_pnl||0);T.set(t,(T.get(t)||0)+n)}),(x||[]).forEach(e=>{const t=new Date(e.ts).toISOString().slice(0,10);T.set(t,(T.get(t)||0)+Number(e.realized_pnl||0))});const M=[];p.forEach(e=>{const t=T.get(e.date)||0,n=(e.pnl||0)-t;M.push({date:e.date,realized:t,unrealized:n})}),q(M);const A=await _x.getTradeHistory(n.id,a);d(A);const C=await _x.getPortfolioComposition(n.id);m(C);const O=await _x.getStagedOrders(n.id);f(O);const P=Array.from(new Set([...(r||[]).map(e=>e.option_symbol),...(O||[]).map(e=>e.option_symbol)].filter(Boolean)));if(P.length>0){const t=await _x.getOptionsMetadataBySymbols(P);b(t);try{const{data:e}=await ei.from("options_market_data").select("option_symbol, delta, gamma, vega, mid").in("option_symbol",P),t=new Map((e||[]).map(e=>[e.option_symbol,e]));let n=0,s=0,a=0;const i=new Map,o=100;for(const c of r||[]){const e=c.option_symbol,r=c.ticker||"",l=Number(c.qty||0),d=t.get(e)||{},u="number"==typeof d.mid&&d.mid>0?d.mid:c.current_price??c.avg_price??0;n+=Number(d.delta||0)*l*o,s+=Number(d.gamma||0)*l*o,a+=Number(d.vega||0)*l*o;const m=Number(u||0)*l*o;r&&i.set(r,(i.get(r)||0)+m)}Y({delta:n,gamma:s,vega:a});const l=Array.from(i.entries()).map(([e,t])=>({ticker:e,notional:t}));l.sort((e,t)=>t.notional-e.notional),V(l)}catch(e){}}const R=Array.from(new Set((r||[]).map(e=>e.ticker).filter(Boolean)));if(R.length>0){const{data:e}=await ei.from("stock_prices").select("ticker, price").in("ticker",R),t={};(e||[]).forEach(e=>{e&&e.ticker&&(t[e.ticker]=Number(e.price||0))}),j(t)}}}catch(n){}finally{x(!1)}else x(!1)})()},[$,t]),Je.useEffect(()=>{let e=null,t=null,n=null;return(async()=>{try{if(!$)return;const r=await _x.getUserPortfolio();if(!r)return;e=ei.channel("rt:orders:portfolio").on("postgres_changes",{event:"*",schema:"public",table:"adx_orders",filter:`portfolio_id=eq.${r.id}`},()=>{window.setTimeout(()=>{(async()=>{await re()})()},400)}).subscribe(),t=ei.channel("rt:equity:portfolio").on("postgres_changes",{event:"INSERT",schema:"public",table:"adx_equity_daily",filter:`portfolio_id=eq.${r.id}`},()=>{window.setTimeout(()=>{(async()=>{await re()})()},400)}).subscribe(),n=window.setInterval(()=>{(async()=>{await re()})()},25e3)}catch(r){}})(),()=>{e&&ei.removeChannel(e),t&&ei.removeChannel(t),n&&window.clearInterval(n)}},[$]);const K=a.map(e=>{var t;const n="number"==typeof e.avg_price&&isFinite(e.avg_price)?e.avg_price:0,r=e.current_price??e.avg_price,s="number"==typeof r&&isFinite(r)?r:0,a="number"==typeof e.pnl&&isFinite(e.pnl)?e.pnl:0,i="number"==typeof e.pnl_percent&&isFinite(e.pnl_percent)?e.pnl_percent:0,o=e.option_symbol||"",l=null==y?void 0:y[o],c=G(o),d=e.expiry??(null==c?void 0:c.expiry)??null,u=e.type??e.option_type??(null==c?void 0:c.right)??"",m=(null==l?void 0:l.ticker)||e.ticker||(null==(t=o.match(/^[A-Z0-9]+/))?void 0:t[0])||"",h=uy(d);return{id:o||e.id,symbol:m,type:u,strike:e.strike??(null==c?void 0:c.strike)??0,expiry:d||e.expiry||(new Date).toISOString(),quantity:e.qty??0,avgPrice:n,currentPrice:s,pnl:a,pnlPercent:i,daysToExpiry:h,action:e.action||"bought",openDate:e.open_date||(new Date).toISOString()}}),Q=K.length>0?K:hy;o.length;const Z=c.length>0?c:fy,J=u.calls>0||u.puts>0,ee=[{name:"Calls",value:u.calls,color:"#22c55e"},{name:"Puts",value:u.puts,color:"#ef4444"}],te=Q.reduce((e,t)=>e+t.currentPrice*t.quantity*100,0);Q.reduce((e,t)=>e+t.pnl,0);const ne=async()=>{try{g(!0);const e=await _x.getUserPortfolio();if(e){const t=await _x.getStagedOrders(e.id);f(t);const n=Array.from(new Set([...(a||[]).map(e=>e.option_symbol),...(t||[]).map(e=>e.option_symbol)].filter(Boolean)));if(n.length>0){const e=await _x.getOptionsMetadataBySymbols(n);b(e)}}}finally{g(!1)}},re=async()=>{try{const e=await _x.getUserPortfolio();if(e){const[t,n,r]=await Promise.all([_x.getUserPositions(e.id),_x.getPortfolioComposition(e.id),_x.getStagedOrders(e.id)]);i(t),m(n),f(r);const s=Array.from(new Set([...(t||[]).map(e=>e.option_symbol),...(r||[]).map(e=>e.option_symbol)].filter(Boolean)));if(s.length>0){const e=await _x.getOptionsMetadataBySymbols(s);b(e)}}}catch(tj){}},[se,ae]=Je.useState(!1),[ie,oe]=Je.useState(0),le=tt.useRef(null),ce=tt.useRef(null);async function de(){var e;return"undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?se&&le.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.reset)?await new Promise(e=>{ce.current=e;try{window.turnstile.reset(le.current)}catch(t){ae(!1),oe(e=>e+1),e("")}}):void 0:"dev-bypass-token"}const[ue,me]=Je.useState(null),[he,fe]=Je.useState(null);return Je.useEffect(()=>{const e=()=>{(async()=>{await re()})()};return window.addEventListener("portfolio-updated",e),()=>{window.removeEventListener("portfolio-updated",e)}},[]),Je.useEffect(()=>{let e=null,t=null,n=null;async function r(){var e,r;try{const s=(null==my?void 0:my.VITE_HEALTH_BASE)||"https://fsqds-production.yadavkartik-arbeit.workers.dev",a=await fetch(`${s}/health/metrics`,{cache:"no-store",headers:{Accept:"application/json"}});if(!a.ok)return;const i=await a.json(),o=(null==(e=null==i?void 0:i.orchestrator)?void 0:e.last_auction_open)||null,l=(null==(r=null==i?void 0:i.orchestrator)?void 0:r.last_auction_close)||null,c=Date.now(),d=e=>{if(!e)return!1;const t=Date.parse(e);return Number.isFinite(t)&&c-t<=6e5};let u=!1;o&&o!==t&&d(o)&&(t=o,await re(),u=!0),!u&&l&&l!==n&&d(l)&&(n=l,await re())}catch{}}function s(){e&&window.clearInterval(e),(()=>{const e=xy("open"),t=xy("close");return e||t})()&&(e=window.setInterval(r,15e3),r())}s();const a=window.setInterval(s,6e4);return()=>{e&&window.clearInterval(e),window.clearInterval(a)}},[]),X.jsx(iy,{children:X.jsxs("div",{className:"space-y-6",children:[X.jsx(ix,{}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Fn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"P&L"}),X.jsxs("div",{className:"font-semibold "+(qv(null==r?void 0:r.realized_pnl)>=0?"text-green-600":"text-red-600"),children:[zv(qv(null==r?void 0:r.realized_pnl),2)," "]}),X.jsx("div",{className:"text-xs text-muted-foreground",children:(()=>{const e=qv(null==r?void 0:r.starting_cash)||0,t=qv(null==r?void 0:r.realized_pnl)||0;return Bv(e>0?t/e*100:0,2,!0)})()}),(()=>{const t="number"==typeof(null==e?void 0:e.todaysPnL)?e.todaysPnL:(()=>{if(N&&N.length>=2){return(N[N.length-1].equity||0)-(N[N.length-2].equity||0)}return 0})(),n=N&&N.length>=2&&N[N.length-2].equity||0,r=n>0?t/n*100:0;return X.jsxs("div",{className:"text-xs mt-1 "+(t>=0?"text-green-600":"text-red-600"),children:["Today: ",t>=0?"+":"",Fv(t,2),"  (",Bv(r,2,!0),")"]})})()]})]})})}),X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(tr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Positions"}),X.jsxs("div",{className:"font-semibold",children:[Q.length," Active"]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:[Uv(te,0,"")," value"]})]})]})})}),X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Sn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Days to Expiry"}),X.jsxs("div",{className:"font-semibold",children:[Q.length>0?Math.round(Q.reduce((e,t)=>e+t.daysToExpiry,0)/Q.length):0," days"]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:[Q.filter(e=>e.daysToExpiry<=30).length," expiring soon"]})]})]})})}),e?X.jsx(gy,{tradesUsed:e.tradesUsedToday,maxTrades:e.maxTradesPerDay}):null,e?X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-rose-100 dark:bg-rose-900/20 rounded-lg flex items-center justify-center",children:X.jsx(er,{className:"w-5 h-5 text-rose-600 dark:text-rose-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Drawdown"}),X.jsx("div",{className:"font-semibold",children:Bv(Math.max(0,100*qv(e.maxDrawdownPct)),1)})]})]})})}):null,e?X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg flex items-center justify-center",children:X.jsx(tr,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Sharpe Ratio"}),X.jsx("div",{className:"font-semibold",children:Fv(e.sharpe??0,2)})]})]})})}):null]}),X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{className:"text-lg",children:"Pending Orders"})}),X.jsxs(Ev,{children:[ue&&X.jsx("div",{className:"mb-2 text-xs text-green-700 bg-green-50 border border-green-200 rounded px-2 py-1",children:ue}),X.jsx("div",{className:"sr-only","aria-hidden":"true",children:X.jsx(Nx,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"compact",onLoad:e=>{le.current=e,ae(!0)},onVerify:e=>{ce.current&&(ce.current(e),ce.current=null)},onExpire:()=>{},onError:()=>{ae(!1),oe(e=>e+1)}},`pf-${ie}`)}),X.jsx("div",{className:"max-h-80 overflow-y-auto pr-1",children:0===h.length?X.jsx("div",{className:"text-sm text-muted-foreground",children:"No staged orders."}):X.jsxs("div",{className:"space-y-3",children:[h.some(e=>"DEFERRED"===String(e.status||"").toUpperCase())&&X.jsx("div",{className:"text-xs rounded bg-amber-50 text-amber-700 border border-amber-200 px-2 py-1",children:"Some orders are deferred awaiting fresh quotes/marks. They will be reconsidered in the next auction cycle."}),h.map(e=>{var t;const n="open"===String(e.auction_slot).toLowerCase()?"open":"close",r="number"==typeof e.time_to_cutoff_sec?Math.floor(e.time_to_cutoff_sec/60):function(e){const t=vy(),n="open"===e?"09:10":"17:40",[r,s]=n.split(":").map(e=>parseInt(e,10)),a=new Date(t);a.setHours(r,s,0,0);const i=a.getTime()-t.getTime();return Math.max(0,Math.round(i/6e4))}(n),s=xy(n),a="boolean"==typeof e.cancelable?e.cancelable:!s&&r>0,i=null==y?void 0:y[e.option_symbol],o=i?null:G(e.option_symbol),l=((null==i?void 0:i.type)||(null==o?void 0:o.right)||"").toString().toUpperCase(),c=(null==i?void 0:i.strike)??(null==o?void 0:o.strike),d=(null==i?void 0:i.expiry)||(null==o?void 0:o.expiry)?new Date((null==i?void 0:i.expiry)||(null==o?void 0:o.expiry)).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null,u=String(e.status||"").toUpperCase(),m="DEFERRED"===u?"bg-amber-100 text-amber-700":"PENDING"===u?"bg-blue-100 text-blue-700":"FILLED"===u?"bg-green-100 text-green-700":"REJECTED"===u?"bg-red-100 text-red-700":"bg-neutral-100 text-neutral-700",h=null==(t=null==y?void 0:y[e.option_symbol])?void 0:t.ticker,g=String(h||e.ticker||e.symbol||"");return X.jsxs("div",{className:"flex items-center justify-between border rounded p-3",children:[X.jsxs("div",{className:"text-sm",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx(Qv,{ticker:g,className:"w-5 h-5 rounded-sm object-contain",alt:g}),X.jsxs("div",{className:"font-mono",children:[g," ",e.option_symbol]}),X.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${m}`,children:u||""})]}),X.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[String(e.side).toUpperCase()," x",qv(e.qty)]}),l&&"number"==typeof c&&X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:[l," ",Fv(c,2)]})]}),d?X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Exp ",d]})]}):null,X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Slot: ",String(e.auction_slot).toUpperCase()]}),X.jsxs("span",{children:[" ",""," "]}),X.jsxs("span",{children:["Premium (per unit): ",e.preview_price?Uv(e.preview_price,2,""):""]}),X.jsxs("span",{children:[" ",""," "]}),(()=>{const t="number"==typeof e.notional_eur&&e.notional_eur>0?e.notional_eur:"number"==typeof e.preview_price&&e.preview_price>0?qv(e.preview_price)*qv(e.qty)*100:0,n="number"==typeof e.preview_price&&e.preview_price>0?` (qty ${qv(e.qty)}  100 @ ${Uv(e.preview_price,2,"")}/unit)`:"";return X.jsxs("span",{children:["Order value: ",t>0?Uv(t,2,""):"",n]})})(),Array.isArray(e.risk_reasons)&&e.risk_reasons.length>0?X.jsx("div",{className:"mt-1 text-[10px] text-amber-700 bg-amber-50 border border-amber-200 rounded px-1.5 py-0.5 inline-block",children:"May be rejected at auction  exposure cap (cash basis)"}):null,"number"==typeof e.estimated_fees?X.jsxs(X.Fragment,{children:[X.jsxs("span",{children:[" ",""," "]}),"number"==typeof e.fees_bps&&"number"==typeof e.fee_per_contract_eur?X.jsxs(oy,{children:[X.jsx(ly,{asChild:!0,children:X.jsxs("span",{className:"underline decoration-dotted cursor-help",children:["Est. fees: ",Uv(e.estimated_fees,2,"")]})}),X.jsx(cy,{children:X.jsxs("div",{className:"text-xs space-y-1",children:[X.jsx("div",{className:"font-semibold",children:"Estimated fees breakdown"}),X.jsxs("div",{children:["Per-contract: ",Uv(e.fee_per_contract_eur,2,""),"  ",qv(e.qty)," = ",Uv(qv(e.fee_per_contract_eur)*qv(e.qty),2,"")]}),X.jsxs("div",{children:["Ad valorem: ",qv(e.fees_bps)," bps  ",Uv("number"==typeof e.notional_eur&&e.notional_eur>0?e.notional_eur:qv(e.preview_price)*qv(e.qty)*100,2,"")," = ",Uv(qv(e.fees_bps)/1e4*("number"==typeof e.notional_eur&&e.notional_eur>0?qv(e.notional_eur):qv(e.preview_price)*qv(e.qty)*100),2,"")]}),X.jsx("div",{className:"text-muted-foreground",children:"Actual fees charged at execution"})]})})]}):X.jsxs("span",{children:["Est. fees: ",Uv(e.estimated_fees,2,"")]})]}):null]})})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[X.jsx(Rn,{className:"w-3 h-3"}),s?"Auctioning now":a?`${r} min to cutoff`:"Cutoff passed"]}),X.jsx(Tv,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>(async e=>{try{fe(e);const t=await de(),n=await _x.cancelOrder(e,{turnstileToken:t});n.success?(f(t=>Array.isArray(t)?t.filter(t=>t.id!==e):t),me("Order cancelled"),Ga.success("Order cancelled"),setTimeout(()=>me(null),2500),await ne()):Ga.error(n.error||"Cancel failed")}finally{fe(null)}})(e.id),disabled:p||!a||he===e.id,children:he===e.id?"Cancelling":"Cancel"})]})]},e.id)})]})})]})]}),X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[X.jsxs(kv,{className:"lg:col-span-2",children:[X.jsx(Sv,{children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx(_v,{className:"text-lg",children:"Portfolio Performance"}),X.jsxs(Mv,{value:t,onValueChange:n,children:[X.jsx(Cv,{className:"w-24 h-8",children:X.jsx(Av,{})}),X.jsxs(Ov,{children:[X.jsx(Pv,{value:"1d",children:"1D"}),X.jsx(Pv,{value:"7d",children:"7D"}),X.jsx(Pv,{value:"30d",children:"30D"}),X.jsx(Pv,{value:"90d",children:"90D"})]})]})]})}),X.jsxs(Ev,{children:[X.jsx("div",{className:"flex gap-2 mb-2 text-xs text-muted-foreground",children:(()=>{const e=({label:e,value:t,onChange:n})=>X.jsxs("label",{className:"inline-flex items-center gap-1 cursor-pointer select-none",children:[X.jsx("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked)}),X.jsx("span",{children:e})]});return X.jsxs(X.Fragment,{children:[X.jsx(e,{label:"Cash",value:T,onChange:M}),X.jsx(e,{label:"Positions",value:A,onChange:C}),X.jsx(e,{label:"Equity",value:O,onChange:P}),X.jsx(e,{label:"Daily PnL",value:R,onChange:I})]})})()}),X.jsx(Ht,{width:"100%",height:260,children:X.jsxs(en,{data:N,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:12}}),X.jsx(Qt,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:(e,t,n)=>{const r=n&&n[0]&&n[0].payload?n[0].payload:{};return r.__event?[r.__event.label,r.__event.type]:"pnl"===t?[`${Fv(e,2)}`,"Daily P&L"]:"equity"===t?[`${Fv(e,2)}`,"Equity"]:"cash"===t?[`${Fv(e,2)}`,"Cash"]:"positions"===t?[`${Fv(e,2)}`,"Positions"]:[`${Fv(e,2)}`,t]}}),T&&X.jsx(tn,{type:"monotone",dataKey:"cash",stackId:"1",stroke:"#93c5fd",fill:"#93c5fd",fillOpacity:.4,name:"cash"}),A&&X.jsx(tn,{type:"monotone",dataKey:"positions",stackId:"1",stroke:"#86efac",fill:"#86efac",fillOpacity:.4,name:"positions"}),R&&X.jsx(Jt,{dataKey:"pnl",barSize:14,fill:"#60a5fa",name:"pnl"}),O&&X.jsx(Xt,{type:"monotone",dataKey:"equity",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"equity"}),X.jsx(nn,{data:E.map(e=>({date:e.date,equity:e.equity,__event:e})),fill:"#f97316",name:"events"}),X.jsx(rn,{dataKey:"date",height:18,stroke:"#94a3b8",travellerWidth:8})]})}),X.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cumulative P&L vs Starting Cash"}),X.jsx(Ht,{width:"100%",height:180,children:X.jsxs(en,{data:L,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:(e,t)=>["cum"===t?`${Fv(e,2)}`:`${Fv(e,2)}%`,"cum"===t?"Cumulative P&L":"Cumulative %"]}),X.jsx(tn,{type:"monotone",dataKey:"cum",stroke:"#4ade80",fill:"#86efac",fillOpacity:.3}),X.jsx(Xt,{type:"monotone",dataKey:"cumPct",stroke:"#10b981",strokeDasharray:"4 4",dot:!1})]})})]}),X.jsxs("div",{className:"border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Max Drawdown (%)"}),X.jsx(Ht,{width:"100%",height:180,children:X.jsxs(en,{data:z,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:e=>[`${Fv(e,2)}%`,"Drawdown"]}),X.jsx(tn,{type:"monotone",dataKey:"ddPct",stroke:"#f87171",fill:"#fecaca",fillOpacity:.4})]})})]}),X.jsxs("div",{className:"md:col-span-2 border rounded p-2",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Daily Contributions (approx)"}),X.jsx(Ht,{width:"100%",height:180,children:X.jsxs(en,{data:B,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:(e,t)=>[`${Fv(e,2)}`,"realized"===t?"Realized P&L":"Unrealized P&L"]}),X.jsx(Jt,{dataKey:"realized",stackId:"1",fill:"#fb923c"}),X.jsx(Jt,{dataKey:"unrealized",stackId:"1",fill:"#60a5fa"})]})})]})]})]})]}),X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{className:"text-lg",children:"Portfolio Composition"})}),X.jsx(Ev,{children:X.jsxs("div",{className:"space-y-4",children:[X.jsx("div",{children:J?X.jsx(Ht,{width:"100%",height:200,children:X.jsxs(sn,{children:[X.jsx(an,{data:ee,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"value",children:ee.map((e,t)=>X.jsx(on,{fill:e.color},`cell-${t}`))}),X.jsx(Qt,{formatter:e=>`${e}%`}),X.jsx(ln,{})]})}):X.jsx("div",{className:"h-[200px] flex items-center justify-center text-sm text-muted-foreground",children:"No options positions yet"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Exposure by Ticker (notional)"}),X.jsx(Ht,{width:"100%",height:140,children:X.jsxs(Zt,{data:H.slice(0,6),children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"ticker",tick:{fontSize:10}}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{formatter:e=>[`${Fv(e,0)}`,"Notional"]}),X.jsx(Jt,{dataKey:"notional",fill:"#60a5fa"})]})})]}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Daily Trade Activity"}),X.jsx(Ht,{width:"100%",height:220,children:X.jsxs(Zt,{data:Z,children:[X.jsx($t,{strokeDasharray:"3 3"}),X.jsx(Gt,{dataKey:"date",tick:{fontSize:10},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),X.jsx(Kt,{tick:{fontSize:10}}),X.jsx(Qt,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`${e}`,"Trades"]}),X.jsx(Jt,{dataKey:"trades",fill:"#3b82f6"})]})})]})]})})]})]}),X.jsx("div",{className:"grid grid-cols-1 gap-6",children:X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsx(_v,{className:"text-lg",children:"Active Positions"})}),X.jsx(Ev,{children:X.jsx(py,{positions:Q,stagedOrders:h,onSell:async(e,t)=>{var n;try{_(t=>({...t,[e.id]:"sell"}));const r=Math.max(1,Math.min(e.quantity,t||1)),s=await de(),a=await _x.placeOrder({optionSymbol:e.id,ticker:e.symbol,type:e.type,strike:e.strike,expiry:e.expiry,quantity:r,action:"sell",orderType:"market"},{turnstileToken:s});if(!(null==a?void 0:a.success))return void Ga.error((null==a?void 0:a.error)||"Sell failed");if(a.auctionSlot){const e="number"==typeof a.previewPrice?`preview ${Fv(a.previewPrice,2)}`:null,t=[e,"number"==typeof a.estimatedFees?`fees ${Fv(a.estimatedFees,2)}`:null].filter(Boolean).join("  ");Ga.success(`Order staged for ${String(a.auctionSlot).toUpperCase()}${t?` (${t})`:""}`)}else{const e="number"==typeof(null==(n=null==a?void 0:a.order)?void 0:n.fillPrice)?a.order.fillPrice:void 0;Ga.success("Order filled"+("number"==typeof e?` @ ${Fv(e,2)}`:""))}window.dispatchEvent(new CustomEvent("portfolio-updated"));const o=await _x.getUserPortfolio();if(o){const[e,t]=await Promise.all([_x.getUserPositions(o.id),_x.getPortfolioComposition(o.id)]);i(e),m(t),await ne()}}catch(tj){Ga.error("Sell failed")}finally{_(t=>({...t,[e.id]:null}))}},onExercise:async(e,t)=>{try{_(t=>({...t,[e.id]:"exercise"}));const n=Math.max(1,Math.min(e.quantity,t||1)),r=await de(),s=await _x.exerciseOption({optionSymbol:e.id,qty:n},{turnstileToken:r});if(!(null==s?void 0:s.success))return void Ga.error((null==s?void 0:s.error)||"Exercise failed");const a=(null==s?void 0:s.data)&&"number"==typeof s.data.realizedPnL?s.data.realizedPnL:void 0;Ga.success("Exercise successful"+("number"==typeof a?`  Realized P&L ${Fv(a,2)}`:"")),window.dispatchEvent(new CustomEvent("portfolio-updated"));const o=await _x.getUserPortfolio();if(o){const[e,t]=await Promise.all([_x.getUserPositions(o.id),_x.getPortfolioComposition(o.id)]);i(e),m(t),await ne()}}catch(tj){Ga.error("Exercise failed")}finally{_(t=>({...t,[e.id]:null}))}},spotByTicker:w,busyByPosition:S,cancellingId:he})})]})})]})})}function by(e){switch(e){case"diamond":return X.jsx(In,{className:"w-4 h-4 text-blue-400"});case"platinum":return X.jsx(Xn,{className:"w-4 h-4 text-gray-300"});case"gold":return X.jsx(rr,{className:"w-4 h-4 text-yellow-500"});case"silver":return X.jsx(Yn,{className:"w-4 h-4 text-gray-400"});case"bronze":return X.jsx(jn,{className:"w-4 h-4 text-orange-600"});default:return X.jsx(jn,{className:"w-4 h-4 text-gray-500"})}}function wy(){const{user:e}=li(),[t,n]=Je.useState("all"),[r,s]=Je.useState("overall"),[a,i]=Je.useState([]),[o,l]=Je.useState(!0),[c,d]=Je.useState(null),[u,m]=Je.useState(null),[h,f]=Je.useState({users:0,avgReturn:0,topReturn:0,totalVolume:0});return Je.useEffect(()=>{(async()=>{var t,n,s;l(!0);try{if("predictions"===r){const{data:t}=await ei.from("seasons").select("id").eq("status","active").single();if(!t)return i([]),void f({users:0,avgReturn:0,topReturn:0,totalVolume:0});const{data:n,error:r}=await ei.from("adx_prediction_scores_season").select("user_id, mse_score, rmse_score, predictions_made, accuracy_percentile, user_profiles(email)").eq("season_id",t.id).order("rmse_score",{ascending:!0,nullsFirst:!1});if(r)return void i([]);const s=(n||[]).map((t,n)=>{var r;const s=t.accuracy_percentile||0;let a="bronze";return s>=95?a="diamond":s>=85?a="platinum":s>=70?a="gold":s>=50&&(a="silver"),{id:t.user_id,email:(null==(r=t.user_profiles)?void 0:r.email)||"Anonymous",rank:n+1,pnlPercent:0,totalPnL:0,portfolioValue:0,tradesCount:0,winRate:0,tier:a,badges:[],isCurrentUser:t.user_id===(null==e?void 0:e.id),rmse:t.rmse_score??void 0,mse:t.mse_score??void 0,predictionsCount:t.predictions_made??0,percentile:s}});i(s);const a=s.length,o=s.reduce((e,t)=>e+(t.rmse||0),0)/(a||1),l=Math.min(...s.map(e=>e.rmse||Number.POSITIVE_INFINITY));return void f({users:a,avgReturn:Math.round(1e3*o)/1e3,topReturn:Math.round(1e3*l)/1e3,totalVolume:s.reduce((e,t)=>e+(t.predictionsCount||0),0)})}let o=[];try{const e=await async function(e,t={}){var n;const r=new Headers(t.headers),s=localStorage.getItem("supabase.auth.token");s&&r.set("Authorization",`Bearer ${s}`);let a=r.get("x-correlation-id");if(!a){try{a=(null==(n=null==crypto?void 0:crypto.randomUUID)?void 0:n.call(crypto))||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}catch{a=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}r.set("x-correlation-id",a)}return fetch(e,{...t,headers:r})}(sx.adxLeaderboard),r=await e.json().catch(()=>({ok:!1}));r&&r.ok&&(o=(null==(t=r.data)?void 0:t.rows)||[],d((null==(n=r.data)?void 0:n.generated_at)||null),m("worker"))}catch(a){}if(0===o.length)try{const{data:e}=await ei.functions.invoke("adx_leaderboard",{method:"POST",body:{}});(null==e?void 0:e.ok)&&(o=(null==(s=e.data)?void 0:s.rows)||[],d((new Date).toISOString()),m("edge"))}catch(tj){return void i([])}const l=o.map((t,n)=>{const r=Number(t.equity||1e5),s="number"==typeof t.starting_cash?Number(t.starting_cash):1e5,a=("number"==typeof t.realized_pnl&&Number(t.realized_pnl),"number"==typeof t.pnl_pct?Number(t.pnl_pct):s>0?100*(r/s-1):0),i=r-s,o=t.total_trades||0,l=t.winning_trades||0,c=o>0?l/o*100:0,d=100*(t.max_drawdown_pct??0),u=t.sharpe??0;let m="bronze";a>30?m="diamond":a>20?m="platinum":a>10?m="gold":a>5&&(m="silver");const h=[];return 1===t.rank&&h.push(""),c>80&&h.push(""),a>25&&h.push(""),o>100&&h.push(""),{id:t.user_id,email:t.email||"Anonymous",rank:t.rank,pnlPercent:Number(a.toFixed(4)),totalPnL:Math.round(100*i)/100,portfolioValue:Math.round(100*r)/100,tradesCount:o,winRate:Math.round(10*c)/10,tier:m,badges:h,isCurrentUser:t.user_id===(null==e?void 0:e.id),rmse:void 0,mse:void 0,predictionsCount:void 0,percentile:void 0,sharpe:u,maxDrawdownPct:d}});i(l);const c=l.length,u=c?l.reduce((e,t)=>e+t.pnlPercent,0)/c:0,h=c?Math.max(...l.map(e=>e.pnlPercent)):0,p=l.reduce((e,t)=>e+t.portfolioValue,0);f({users:c,avgReturn:Math.round(10*u)/10,topReturn:Math.round(10*h)/10,totalVolume:Math.round(p)})}catch(o){i([])}finally{l(!1)}})()},[e,t,r]),o?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsx(kv,{children:X.jsxs(Ev,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===r?"Total Forecasters":"Total Traders"}),X.jsx("div",{className:"text-2xl font-bold",children:h.users})]})}),X.jsx(kv,{children:X.jsxs(Ev,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===r?"Avg RMSE":"Avg Return"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===r?h.avgReturn.toFixed(3):`${h.avgReturn.toFixed(2)}%`})]})}),X.jsx(kv,{children:X.jsxs(Ev,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===r?"Best RMSE":"Top Return"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===r?h.topReturn.toFixed(3):`${h.topReturn.toFixed(2)}%`})]})}),X.jsx(kv,{children:X.jsxs(Ev,{className:"p-4",children:[X.jsx("div",{className:"text-sm text-muted-foreground",children:"predictions"===r?"Total Predictions":"Total Volume"}),X.jsx("div",{className:"text-2xl font-bold",children:"predictions"===r?h.totalVolume:`${(h.totalVolume/1e6).toFixed(1)}M`})]})})]}),X.jsxs("div",{className:"flex gap-3",children:[X.jsxs(Mv,{value:t,onValueChange:n,children:[X.jsx(Cv,{className:"w-40",children:X.jsx(Av,{placeholder:"Select timeframe"})}),X.jsxs(Ov,{children:[X.jsx(Pv,{value:"all",children:"All Time"}),X.jsx(Pv,{value:"monthly",children:"This Month"}),X.jsx(Pv,{value:"weekly",children:"This Week"}),X.jsx(Pv,{value:"daily",children:"Today"})]})]}),X.jsxs(Mv,{value:r,onValueChange:s,children:[X.jsx(Cv,{className:"w-40",children:X.jsx(Av,{placeholder:"Select category"})}),X.jsxs(Ov,{children:[X.jsx(Pv,{value:"overall",children:"Overall"}),X.jsx(Pv,{value:"options",children:"Options"}),X.jsx(Pv,{value:"predictions",children:"Predictions"})]})]})]}),X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsxs(_v,{className:"flex items-center justify-between",children:[X.jsxs("span",{className:"flex items-center gap-2",children:[X.jsx(rr,{className:"w-5 h-5"}),"Current Traders"]}),X.jsxs("div",{className:"flex items-center gap-2",children:[c&&X.jsxs(iv,{variant:"outline",children:["Updated ",new Date(c).toLocaleString()]}),u&&X.jsx(iv,{variant:"secondary",children:"worker"===u?"via Cache":"via Edge"})]})]})}),X.jsx(Ev,{className:"p-0",children:X.jsx("div",{className:"divide-y divide-border",children:a.length>0?a.map(e=>{var t;return X.jsx("div",{className:"p-4 transition-all hover:bg-muted/50 "+(e.isCurrentUser?"bg-primary/5":""),children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted font-bold",children:e.rank<=3?1===e.rank?"":2===e.rank?"":"":`#${e.rank}`}),X.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:X.jsx(sr,{className:"w-6 h-6 text-muted-foreground"})}),X.jsxs("div",{children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-semibold",children:e.email}),e.isCurrentUser&&X.jsx(iv,{variant:"secondary",className:"text-xs",children:"You"}),X.jsx("div",{className:"flex items-center gap-1",children:by(e.tier)})]}),X.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-4 mt-1",children:[X.jsxs("span",{children:[e.tradesCount," trades"]}),X.jsxs("span",{children:[e.winRate,"% win rate"]}),X.jsx("div",{className:"flex gap-1",children:e.badges.map((e,t)=>X.jsx("span",{children:e},t))})]})]})]}),X.jsx("div",{className:"text-right",children:"predictions"===r?X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"text-sm",children:["RMSE: ",X.jsx("span",{className:"font-bold",children:(e.rmse??0).toFixed(3)})]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Predictions: ",e.predictionsCount||0]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Percentile: ",(null==(t=e.percentile)?void 0:t.toFixed(1))||0,"%"]})]}):X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.pnlPercent>=0?X.jsx(tr,{className:"w-4 h-4 text-green-500"}):X.jsx(er,{className:"w-4 h-4 text-red-500"}),X.jsxs("span",{className:"font-bold text-lg "+(e.pnlPercent>=0?"text-green-500":"text-red-500"),children:[e.pnlPercent>=0?"+":"",Math.abs(e.pnlPercent).toFixed(2),"%"]})]}),X.jsxs("div",{className:"text-sm text-muted-foreground",children:["",e.totalPnL>=0?"+":"",e.totalPnL.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Portfolio: ",e.portfolioValue.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground",children:["Sharpe ","sharpe"in e&&"number"==typeof e.sharpe?e.sharpe.toFixed(2):"","  Max DD ","maxDrawdownPct"in e&&"number"==typeof e.maxDrawdownPct?e.maxDrawdownPct.toFixed(1):"","%"]})]})})]})},e.id)}):X.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No traders found. Be the first to start trading!"})})})]})]})}function jy({children:e,publicContent:t,requireAdmin:n=!1}){const{user:r,isAdmin:s}=li();return r?n&&!s?null:X.jsx(X.Fragment,{children:e}):X.jsx(X.Fragment,{children:t})||null}function Ny({metrics:e}){var t;const n=e.tradesUsedToday/e.maxTradesPerDay*100;return e.marginUsed,e.marginUsed,e.marginAvailable,X.jsx("div",{className:"bg-card border rounded-lg p-4 mb-6",children:X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(ir,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Cash"}),X.jsxs("div",{className:"font-semibold",children:["",e.accountBalance.toLocaleString()]})]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(tr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Portfolio Value"}),X.jsxs("div",{className:"font-semibold",children:["",Number(e.liquidationPortfolioValue??e.portfolioValue??0).toLocaleString()]}),(()=>{const t=Number(e.startingCash??(e.portfolioValue||0)-(e.totalPnL||0)),n=Number(e.liquidationPortfolioValue??e.portfolioValue??0),r=t>0?100*(n/t-1):0,s=r>=0?"+":"",a=r>=0?"text-green-600":"text-red-600";return X.jsxs("div",{className:`text-xs ${a}`,children:["P&L (cumulative): ",s,r.toFixed(2),"%"]})})()]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:X.jsx(wn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Daily Trades"}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsxs("span",{className:"text-sm font-semibold",children:[e.tradesUsedToday,"/",e.maxTradesPerDay]}),X.jsxs(iv,{variant:n>80?"destructive":n>60?"secondary":"default",className:"text-xs",children:[Math.round(n),"%"]})]}),X.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Realized P&L: ",(e.realizedPnl??0).toLocaleString()]}),X.jsx(Nv,{value:n,className:"h-1.5 mt-1"})]})]}),X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Kn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Buying Power (Cash account)"}),X.jsxs("div",{className:"font-semibold text-sm",children:["",e.accountBalance.toLocaleString()]}),X.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Sharpe ",(null==(t=e.sharpe)?void 0:t.toFixed(2))??"0.00","  Max DD ",(100*(e.maxDrawdownPct??0)).toFixed(1),"%"]})]})]})]})})}function ky(){const{user:e}=li(),[t,n]=Je.useState(e?"trading":"leaderboard"),[r,s]=Je.useState(null),[a,i]=Je.useState(!0);return Je.useEffect(()=>{e||"leaderboard"===t||n("leaderboard")},[e]),Je.useEffect(()=>{const t=async()=>{if(e)try{await _x.getUserPortfolio();const e=await _x.getTradingMetrics();s(e)}catch(t){}finally{i(!1)}else i(!1)};t();const n=setInterval(t,3e4),r=()=>t();return"undefined"!=typeof window&&window.addEventListener("portfolio-updated",r),()=>{clearInterval(n),"undefined"!=typeof window&&window.removeEventListener("portfolio-updated",r)}},[e]),X.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[X.jsx(jy,{children:r?X.jsx(Ny,{metrics:r}):null}),X.jsxs(tv,{value:t,onValueChange:n,className:"w-full",children:[X.jsxs(nv,{className:`grid w-full ${e?"grid-cols-4":"grid-cols-1"} max-w-2xl`,children:[e&&X.jsxs(X.Fragment,{children:[X.jsxs(rv,{value:"trading",className:"flex items-center gap-2",children:[X.jsx(wn,{className:"w-4 h-4"}),"Trading"]}),X.jsxs(rv,{value:"predictions",className:"flex items-center gap-2",children:[X.jsx(_n,{className:"w-4 h-4"}),"Predictions"]}),X.jsxs(rv,{value:"portfolio",className:"flex items-center gap-2",children:[X.jsx(tr,{className:"w-4 h-4"}),"Portfolio"]})]}),X.jsxs(rv,{value:"leaderboard",className:"flex items-center gap-2",children:[X.jsx(rr,{className:"w-4 h-4"}),"Leaderboard"]})]}),e&&X.jsxs(X.Fragment,{children:[X.jsx(sv,{value:"trading",className:"mt-6",children:X.jsx(Ex,{})}),X.jsx(sv,{value:"predictions",className:"mt-6",children:X.jsx(Px,{})}),X.jsx(sv,{value:"portfolio",className:"mt-6",children:X.jsx(yy,{metrics:r??void 0})})]}),X.jsx(sv,{value:"leaderboard",className:"mt-6",children:X.jsx(wy,{})})]})]})}function Sy({className:e,...t}){return X.jsx(Ie,{"data-slot":"label",className:ev("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function _y({className:e,...t}){return X.jsx("textarea",{"data-slot":"textarea",className:ev("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var Ey="Radio",[Dy,Ty]=J(Ey),[My,Ay]=Dy(Ey),Cy=Je.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:i,value:o="on",onCheck:l,form:c,...d}=e,[u,m]=Je.useState(null),h=ee(t,e=>m(e)),f=Je.useRef(!1),p=!u||(c||!!u.closest("form"));return X.jsxs(My,{scope:n,checked:s,disabled:i,children:[X.jsx(ne.button,{type:"button",role:"radio","aria-checked":s,"data-state":Iy(s),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:h,onClick:oe(e.onClick,e=>{s||null==l||l(),p&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),p&&X.jsx(Ry,{control:u,bubbles:!f.current,name:r,value:o,checked:s,required:a,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});Cy.displayName=Ey;var Oy="RadioIndicator",Py=Je.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=Ay(Oy,n);return X.jsx(ae,{present:r||a.checked,children:X.jsx(ne.span,{"data-state":Iy(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});Py.displayName=Oy;var Ry=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,a=Je.useRef(null),i=Ve(n),o=$e(t);return Je.useEffect(()=>{const e=a.current,t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==n&&s){const t=new Event("click",{bubbles:r});s.call(e,n),e.dispatchEvent(t)}},[i,n,r]),X.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Iy(e){return e?"checked":"unchecked"}var Ly=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Fy="RadioGroup",[zy,Uy]=J(Fy,[Ge,Ty]),By=Ge(),qy=Ty(),[Wy,Yy]=zy(Fy),Hy=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...m}=e,h=By(n),f=Ke(c),[p,g]=se({prop:a,defaultProp:s,onChange:u});return X.jsx(Wy,{scope:n,name:r,required:i,disabled:o,value:p,onValueChange:g,children:X.jsx(Qe,{asChild:!0,...h,orientation:l,dir:f,loop:d,children:X.jsx(ne.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:f,...m,ref:t})})})});Hy.displayName=Fy;var Vy="RadioGroupItem",$y=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=Yy(Vy,n),i=a.disabled||r,o=By(n),l=qy(n),c=Je.useRef(null),d=ee(t,c),u=a.value===s.value,m=Je.useRef(!1);return Je.useEffect(()=>{const e=e=>{Ly.includes(e.key)&&(m.current=!0)},t=()=>m.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),X.jsx(Xe,{asChild:!0,...o,focusable:!i,active:u,children:X.jsx(Cy,{disabled:i,required:a.required,checked:u,...l,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:oe(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:oe(s.onFocus,()=>{var e;m.current&&(null==(e=c.current)||e.click())})})})});$y.displayName=Vy;var Gy=Je.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=qy(n);return X.jsx(Py,{...s,...r,ref:t})});Gy.displayName="RadioGroupIndicator";var Ky=Hy,Qy=$y,Xy=Gy;function Zy({className:e,...t}){return X.jsx(Ky,{"data-slot":"radio-group",className:ev("grid gap-3",e),...t})}function Jy({className:e,...t}){return X.jsx(Qy,{"data-slot":"radio-group-item",className:ev("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:X.jsx(Xy,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:X.jsx(Pn,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const eb="https://mskpxebbscvisxcceiwx.supabase.co";const tb=new class{async getAuthToken(){const{data:{session:e}}=await ei.auth.getSession();return(null==e?void 0:e.access_token)||null}async getHTILeaderboard(){var e;try{const t=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/leaderboards/hti",{method:"GET",headers:{Accept:"application/json"}}),n=await t.json();if(t.ok&&(null==n?void 0:n.ok)){const t=(null==(e=null==n?void 0:n.data)?void 0:e.rows)||[];return{ok:!0,rows:t.map(e=>({season_id:e.season_id||"",user_id:e.user_id,email:e.email||e.username||"Anonymous",points:e.total_points??e.total_score??e.points??0,badges:e.badges||[],last_action_at:e.last_submission||e.updated_at||null})),lastUpdated:(new Date).toISOString()}}}catch(tj){}const{data:t}=await ei.from("hti_submissions").select("\n        user_id,\n        points,\n        user_profiles!inner(email)\n      ");if(!t)return{ok:!1,error:"Failed to fetch leaderboard data"};const n=t.reduce((e,t)=>{var n;const r=e[t.user_id]||{user_id:t.user_id,email:(null==(n=t.user_profiles)?void 0:n.email)||"Anonymous",points:0,badges:[]};return r.points+=t.points||0,e[t.user_id]=r,e},{});return{ok:!0,rows:Object.values(n).sort((e,t)=>t.points-e.points).slice(0,100),lastUpdated:(new Date).toISOString()}}async getADXLeaderboard(){var e;try{const t=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/leaderboards/adx",{method:"GET",headers:{Accept:"application/json"}}),n=await t.json();if(t.ok&&(null==n?void 0:n.ok)&&(null==(e=null==n?void 0:n.data)?void 0:e.rows))return{ok:!0,rows:n.data.rows,lastUpdated:n.data.generated_at||(new Date).toISOString()}}catch(r){}const{data:t}=await ei.from("seasons").select("id").eq("status","active").single();if(!t)return{ok:!1,error:"No active season found"};const{data:n}=await ei.from("adx_portfolios").select("\n        *,\n        user_profiles!inner(username, email)\n      ").eq("season_id",t.id);if(!n)return{ok:!1,error:"Failed to fetch portfolios"};return{ok:!0,rows:n.map(e=>{var t,n;return{rank:0,user_id:e.user_id,display_name:(null==(t=e.user_profiles)?void 0:t.username)||(null==(n=e.user_profiles)?void 0:n.email)||"Anonymous",total_pnl:(e.current_value||e.starting_cash)-e.starting_cash,total_value:e.current_value||e.starting_cash,win_rate:0,num_trades:0}}).sort((e,t)=>t.total_pnl-e.total_pnl).map((e,t)=>({...e,rank:t+1})).slice(0,100),lastUpdated:(new Date).toISOString()}}async getHTIQuestions(){const e=(new Date).toISOString(),{data:{user:t}}=await ei.auth.getUser(),{data:n,error:r}=await ei.from("hti_questions").select("id, season_id, n, kind, choices, correct, release_at, is_active, points, title, tags").eq("is_active",!0).lte("release_at",e).order("n",{ascending:!0});if(r)return{ok:!1,error:r.message};let s=[];if(t){const{data:e}=await ei.from("hti_submissions").select("question_id").eq("user_id",t.id);e&&(s=e.map(e=>e.question_id))}return{ok:!0,questions:(null==n?void 0:n.map(e=>{let t="",n=[],r=e.choices;if("string"==typeof e.choices)try{r=JSON.parse(e.choices)}catch(tj){}r&&"object"==typeof r&&(r.question?(t=r.question,n=r.options||[]):r.text?(t=r.text,n=r.options||[]):Array.isArray(r)&&(n=r,t=`Question ${e.n}`));let a=e.correct;if("string"==typeof e.correct)try{a=JSON.parse(e.correct)}catch(tj){}return{...e,answered:s.includes(e.id),locked:!1,points:e.points??10,question_text:t,title:e.title||null,choices:n,correct_answer:a}}))||[]}}async submitHTIAnswer(e,t,n){const r=await this.getAuthToken();if(!r)return{ok:!1,error:"Authentication required"};let s;s="number"==typeof t&&Number.isInteger(t)&&t>=0&&t<20?{value:{index:t}}:"number"==typeof t||"string"==typeof t?{value:t}:"object"==typeof t&&null!==t?t:{value:t};const a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)?"dev-bypass-token":(null==n?void 0:n.turnstileToken)||void 0,i=await fetch(`${eb}/functions/v1/hti_submit_answer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({questionId:e,answer:s,turnstileToken:a})}),o=await i.json();return o.ok&&o.data?{ok:!0,data:{isCorrect:o.data.is_correct,points:o.data.points}}:o}async getADXPortfolio(){const{data:{user:e}}=await ei.auth.getUser();if(!e)return{ok:!1,error:"Authentication required"};const{data:t}=await ei.from("seasons").select("id").eq("status","active").single(),{data:n,error:r}=await ei.from("adx_portfolios").select("*").eq("user_id",e.id).eq("season_id",null==t?void 0:t.id).maybeSingle();let s=[];if(n){const{data:e}=await ei.from("adx_positions").select("*").eq("portfolio_id",n.id);s=e||[]}const{data:a}=await ei.from("adx_revenue_predictions").select("*").eq("user_id",e.id);return{ok:!r||"PGRST116"===r.code,data:{portfolio:n||{cash:1e5,total_value:1e5},positions:s||[],predictions:a||[]},error:r&&"PGRST116"!==r.code?r.message:void 0}}async placeADXOrder(e){const t=await this.getAuthToken();if(!t)return{ok:!1,error:"Authentication required"};return(await fetch(`${eb}/functions/v1/adx_place_order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)})).json()}async saveADXPrediction(e){const t=await this.getAuthToken();if(!t)return{ok:!1,error:"Authentication required"};const{data:n}=await ei.from("seasons").select("id").eq("status","active").single();if(!n)return{ok:!1,error:"No active season"};const r={seasonId:n.id,symbol:e.ticker,value:e.prediction,turnstileToken:void 0};return(await fetch(`${eb}/functions/v1/adx_save_prediction`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(r)})).json()}async isAdmin(){const{data:{user:e}}=await ei.auth.getUser();if(!e)return!1;const{data:t}=await ei.from("user_profiles").select("is_admin").eq("user_id",e.id).single();return(null==t?void 0:t.is_admin)||!1}async getAdminQuestions(){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};const{data:e,error:t}=await ei.from("hti_questions").select("*").order("n",{ascending:!0});return{ok:!t,data:e||[],error:null==t?void 0:t.message}}async saveAdminQuestion(e){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};if(e.id){const{error:t}=await ei.from("hti_questions").update(e).eq("id",e.id);return{ok:!t,error:null==t?void 0:t.message}}{const{error:t}=await ei.from("hti_questions").insert(e);return{ok:!t,error:null==t?void 0:t.message}}}async deleteAdminQuestion(e){if(!(await this.isAdmin()))return{ok:!1,error:"Admin access required"};const{error:t}=await ei.from("hti_questions").delete().eq("id",e);return{ok:!t,error:null==t?void 0:t.message}}},{entries:nb,setPrototypeOf:rb,isFrozen:sb,getPrototypeOf:ab,getOwnPropertyDescriptor:ib}=Object;
/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */let{freeze:ob,seal:lb,create:cb}=Object,{apply:db,construct:ub}="undefined"!=typeof Reflect&&Reflect;ob||(ob=function(e){return e}),lb||(lb=function(e){return e}),db||(db=function(e,t,n){return e.apply(t,n)}),ub||(ub=function(e,t){return new e(...t)});const mb=Eb(Array.prototype.forEach),hb=Eb(Array.prototype.lastIndexOf),fb=Eb(Array.prototype.pop),pb=Eb(Array.prototype.push),gb=Eb(Array.prototype.splice),vb=Eb(String.prototype.toLowerCase),xb=Eb(String.prototype.toString),yb=Eb(String.prototype.match),bb=Eb(String.prototype.replace),wb=Eb(String.prototype.indexOf),jb=Eb(String.prototype.trim),Nb=Eb(Object.prototype.hasOwnProperty),kb=Eb(RegExp.prototype.test),Sb=(_b=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ub(_b,t)});var _b;function Eb(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return db(e,t,r)}}function Db(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vb;rb&&rb(e,null);let r=t.length;for(;r--;){let s=t[r];if("string"==typeof s){const e=n(s);e!==s&&(sb(t)||(t[r]=e),s=e)}e[s]=!0}return e}function Tb(e){for(let t=0;t<e.length;t++){Nb(e,t)||(e[t]=null)}return e}function Mb(e){const t=cb(null);for(const[n,r]of nb(e)){Nb(e,n)&&(Array.isArray(r)?t[n]=Tb(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=Mb(r):t[n]=r)}return t}function Ab(e,t){for(;null!==e;){const n=ib(e,t);if(n){if(n.get)return Eb(n.get);if("function"==typeof n.value)return Eb(n.value)}e=ab(e)}return function(){return null}}const Cb=ob(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ob=ob(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Pb=ob(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Rb=ob(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ib=ob(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Lb=ob(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fb=ob(["#text"]),zb=ob(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ub=ob(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bb=ob(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qb=ob(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Wb=lb(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Yb=lb(/<%[\w\W]*|[\w\W]*%>/gm),Hb=lb(/\$\{[\w\W]*/gm),Vb=lb(/^data-[\-\w.\u00B7-\uFFFF]+$/),$b=lb(/^aria-[\-\w]+$/),Gb=lb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Kb=lb(/^(?:\w+script|data):/i),Qb=lb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xb=lb(/^html$/i),Zb=lb(/^[a-z][.\w]*(-[.\w]+)+$/i);var Jb=Object.freeze({__proto__:null,ARIA_ATTR:$b,ATTR_WHITESPACE:Qb,CUSTOM_ELEMENT:Zb,DATA_ATTR:Vb,DOCTYPE_NAME:Xb,ERB_EXPR:Yb,IS_ALLOWED_URI:Gb,IS_SCRIPT_OR_DATA:Kb,MUSTACHE_EXPR:Wb,TMPLIT_EXPR:Hb});const ew=1,tw=3,nw=7,rw=8,sw=9;var aw=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==sw||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const s=r,a=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:h,trustedTypes:f}=t,p=c.prototype,g=Ab(p,"cloneNode"),v=Ab(p,"remove"),x=Ab(p,"nextSibling"),y=Ab(p,"childNodes"),b=Ab(p,"parentNode");if("function"==typeof o){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let w,j="";const{implementation:N,createNodeIterator:k,createDocumentFragment:S,getElementsByTagName:_}=r,{importNode:E}=s;let D={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof nb&&"function"==typeof b&&N&&void 0!==N.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:M,TMPLIT_EXPR:A,DATA_ATTR:C,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:I}=Jb;let{IS_ALLOWED_URI:L}=Jb,F=null;const z=Db({},[...Cb,...Ob,...Pb,...Ib,...Fb]);let U=null;const B=Db({},[...zb,...Ub,...Bb,...qb]);let q=Object.seal(cb(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,Y=null,H=!0,V=!0,$=!1,G=!0,K=!1,Q=!0,X=!1,Z=!1,J=!1,ee=!1,te=!1,ne=!1,re=!0,se=!1,ae=!0,ie=!1,oe={},le=null;const ce=Db({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const ue=Db({},["audio","video","img","source","image","track"]);let me=null;const he=Db({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let ve=ge,xe=!1,ye=null;const be=Db({},[fe,pe,ge],xb);let we=Db({},["mi","mo","mn","ms","mtext"]),je=Db({},["annotation-xml"]);const Ne=Db({},["title","style","font","a","script"]);let ke=null;const Se=["application/xhtml+xml","text/html"];let _e=null,Ee=null;const De=r.createElement("form"),Te=function(e){return e instanceof RegExp||e instanceof Function},Me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ee||Ee!==e){if(e&&"object"==typeof e||(e={}),e=Mb(e),ke=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,_e="application/xhtml+xml"===ke?xb:vb,F=Nb(e,"ALLOWED_TAGS")?Db({},e.ALLOWED_TAGS,_e):z,U=Nb(e,"ALLOWED_ATTR")?Db({},e.ALLOWED_ATTR,_e):B,ye=Nb(e,"ALLOWED_NAMESPACES")?Db({},e.ALLOWED_NAMESPACES,xb):be,me=Nb(e,"ADD_URI_SAFE_ATTR")?Db(Mb(he),e.ADD_URI_SAFE_ATTR,_e):he,de=Nb(e,"ADD_DATA_URI_TAGS")?Db(Mb(ue),e.ADD_DATA_URI_TAGS,_e):ue,le=Nb(e,"FORBID_CONTENTS")?Db({},e.FORBID_CONTENTS,_e):ce,W=Nb(e,"FORBID_TAGS")?Db({},e.FORBID_TAGS,_e):Mb({}),Y=Nb(e,"FORBID_ATTR")?Db({},e.FORBID_ATTR,_e):Mb({}),oe=!!Nb(e,"USE_PROFILES")&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,V=!1!==e.ALLOW_DATA_ATTR,$=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,Q=!1!==e.SAFE_FOR_XML,X=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,se=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||Gb,ve=e.NAMESPACE||ge,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,je=e.HTML_INTEGRATION_POINTS||je,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Te(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Te(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(V=!1),te&&(ee=!0),oe&&(F=Db({},Fb),U=[],!0===oe.html&&(Db(F,Cb),Db(U,zb)),!0===oe.svg&&(Db(F,Ob),Db(U,Ub),Db(U,qb)),!0===oe.svgFilters&&(Db(F,Pb),Db(U,Ub),Db(U,qb)),!0===oe.mathMl&&(Db(F,Ib),Db(U,Bb),Db(U,qb))),e.ADD_TAGS&&(F===z&&(F=Mb(F)),Db(F,e.ADD_TAGS,_e)),e.ADD_ATTR&&(U===B&&(U=Mb(U)),Db(U,e.ADD_ATTR,_e)),e.ADD_URI_SAFE_ATTR&&Db(me,e.ADD_URI_SAFE_ATTR,_e),e.FORBID_CONTENTS&&(le===ce&&(le=Mb(le)),Db(le,e.FORBID_CONTENTS,_e)),ae&&(F["#text"]=!0),X&&Db(F,["html","head","body"]),F.table&&(Db(F,["tbody"]),delete W.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Sb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Sb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,j=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:e=>e,createScriptURL:e=>e})}catch(a){return null}}(f,a)),null!==w&&"string"==typeof j&&(j=w.createHTML(""));ob&&ob(e),Ee=e}},Ae=Db({},[...Ob,...Pb,...Rb]),Ce=Db({},[...Ib,...Lb]),Oe=function(e){pb(n.removed,{element:e});try{b(e).removeChild(e)}catch(t){v(e)}},Pe=function(e,t){try{pb(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){pb(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Oe(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},Re=function(e){let t=null,n=null;if(J)e="<remove></remove>"+e;else{const t=yb(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ke&&ve===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const s=w?w.createHTML(e):e;if(ve===ge)try{t=(new h).parseFromString(s,ke)}catch(i){}if(!t||!t.documentElement){t=N.createDocument(ve,"template",null);try{t.documentElement.innerHTML=xe?j:s}catch(i){}}const a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),ve===ge?_.call(t,X?"html":"body")[0]:X?t.documentElement:a},Ie=function(e){return k.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Le=function(e){return e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Fe=function(e){return"function"==typeof l&&e instanceof l};function ze(e,t,r){mb(e,e=>{e.call(n,t,r,Ee)})}const Ue=function(e){let t=null;if(ze(D.beforeSanitizeElements,e,null),Le(e))return Oe(e),!0;const r=_e(e.nodeName);if(ze(D.uponSanitizeElement,e,{tagName:r,allowedTags:F}),Q&&e.hasChildNodes()&&!Fe(e.firstElementChild)&&kb(/<[/\w!]/g,e.innerHTML)&&kb(/<[/\w!]/g,e.textContent))return Oe(e),!0;if(e.nodeType===nw)return Oe(e),!0;if(Q&&e.nodeType===rw&&kb(/<[/\w]/g,e.data))return Oe(e),!0;if(!F[r]||W[r]){if(!W[r]&&qe(r)){if(q.tagNameCheck instanceof RegExp&&kb(q.tagNameCheck,r))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(r))return!1}if(ae&&!le[r]){const t=b(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const s=g(n[r],!0);s.__removalCount=(e.__removalCount||0)+1,t.insertBefore(s,x(e))}}}return Oe(e),!0}return e instanceof c&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=vb(e.tagName),r=vb(t.tagName);return!!ye[e.namespaceURI]&&(e.namespaceURI===pe?t.namespaceURI===ge?"svg"===n:t.namespaceURI===fe?"svg"===n&&("annotation-xml"===r||we[r]):Boolean(Ae[n]):e.namespaceURI===fe?t.namespaceURI===ge?"math"===n:t.namespaceURI===pe?"math"===n&&je[r]:Boolean(Ce[n]):e.namespaceURI===ge?!(t.namespaceURI===pe&&!je[r])&&!(t.namespaceURI===fe&&!we[r])&&!Ce[n]&&(Ne[n]||!Ae[n]):!("application/xhtml+xml"!==ke||!ye[e.namespaceURI]))}(e)?(Oe(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!kb(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===tw&&(t=e.textContent,mb([T,M,A],e=>{t=bb(t,e," ")}),e.textContent!==t&&(pb(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze(D.afterSanitizeElements,e,null),!1):(Oe(e),!0)},Be=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in De))return!1;if(V&&!Y[t]&&kb(C,t));else if(H&&kb(O,t));else if(!U[t]||Y[t]){if(!(qe(e)&&(q.tagNameCheck instanceof RegExp&&kb(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&kb(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&kb(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(me[t]);else if(kb(L,bb(n,R,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==wb(n,"data:")||!de[e]){if($&&!kb(P,bb(n,R,"")));else if(n)return!1}else;return!0},qe=function(e){return"annotation-xml"!==e&&yb(e,I)},We=function(e){ze(D.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Le(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let s=t.length;for(;s--;){const i=t[s],{name:o,namespaceURI:l,value:c}=i,d=_e(o),u=c;let m="value"===o?u:jb(u);if(r.attrName=d,r.attrValue=m,r.keepAttr=!0,r.forceKeepAttr=void 0,ze(D.uponSanitizeAttribute,e,r),m=r.attrValue,!se||"id"!==d&&"name"!==d||(Pe(o,e),m="user-content-"+m),Q&&kb(/((--!?|])>)|<\/(style|title)/i,m)){Pe(o,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){Pe(o,e);continue}if(!G&&kb(/\/>/i,m)){Pe(o,e);continue}K&&mb([T,M,A],e=>{m=bb(m,e," ")});const h=_e(e.nodeName);if(Be(h,d,m)){if(w&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(l);else switch(f.getAttributeType(h,d)){case"TrustedHTML":m=w.createHTML(m);break;case"TrustedScriptURL":m=w.createScriptURL(m)}if(m!==u)try{l?e.setAttributeNS(l,o,m):e.setAttribute(o,m),Le(e)?Oe(e):fb(n.removed)}catch(a){Pe(o,e)}}else Pe(o,e)}ze(D.afterSanitizeAttributes,e,null)},Ye=function e(t){let n=null;const r=Ie(t);for(ze(D.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)ze(D.uponSanitizeShadowNode,n,null),Ue(n),We(n),n.content instanceof i&&e(n.content);ze(D.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,o=null,c=null;if(xe=!e,xe&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Fe(e)){if("function"!=typeof e.toString)throw Sb("toString is not a function");if("string"!=typeof(e=e.toString()))throw Sb("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Z||Me(t),n.removed=[],"string"==typeof e&&(ie=!1),ie){if(e.nodeName){const t=_e(e.nodeName);if(!F[t]||W[t])throw Sb("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=Re("\x3c!----\x3e"),a=r.ownerDocument.importNode(e,!0),a.nodeType===ew&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!ee&&!K&&!X&&-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(r=Re(e),!r)return ee?null:ne?j:""}r&&J&&Oe(r.firstChild);const d=Ie(ie?e:r);for(;o=d.nextNode();)Ue(o),We(o),o.content instanceof i&&Ye(o.content);if(ie)return e;if(ee){if(te)for(c=S.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(U.shadowroot||U.shadowrootmode)&&(c=E.call(s,c,!0)),c}let u=X?r.outerHTML:r.innerHTML;return X&&F["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&kb(Xb,r.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+u),K&&mb([T,M,A],e=>{u=bb(u,e," ")}),w&&ne?w.createHTML(u):u},n.setConfig=function(){Me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Z=!0},n.clearConfig=function(){Ee=null,Z=!1},n.isValidAttribute=function(e,t,n){Ee||Me({});const r=_e(e),s=_e(t);return Be(r,s,n)},n.addHook=function(e,t){"function"==typeof t&&pb(D[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=hb(D[e],t);return-1===n?void 0:gb(D[e],n,1)[0]}return fb(D[e])},n.removeHooks=function(e){D[e]=[]},n.removeAllHooks=function(){D={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function iw(e){if(!e||"string"!=typeof e)return"";try{return aw.sanitize(e,{ALLOWED_TAGS:["b","strong","i","em","u","s","sub","sup","br","p","span","ul","ol","li","small"],ALLOWED_ATTR:["class","style"]})}catch{return""}}var ow={};!function e(t,n,r,s){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix;function o(){}function l(e){var r=n.exports.Promise,s=void 0!==r?r:t.Promise;return"function"==typeof s?new s(e):(e(o,o),null)}var c,d,u,m,h,f,p=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),t.set(n,r),r},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var r=e.transferToImageBitmap();try{n.createPattern(r,"no-repeat")}catch(tj){return!1}return!0}(),new Map),g=(u=Math.floor(1e3/60),m={},h=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(c=function(e){var t=Math.random();return m[t]=requestAnimationFrame(function n(r){h===r||h+u-1<r?(h=r,delete m[t],e()):m[t]=requestAnimationFrame(n)}),t},d=function(e){m[e]&&cancelAnimationFrame(m[e])}):(c=function(e){return setTimeout(e,u)},d=function(e){return clearTimeout(e)}),{frame:c,cancel:d}),v=function(){var t,n,s={};return function(){if(t)return t;if(!r&&a){var i=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([i])))}catch(tj){return void 0!==typeof console&&console.warn,null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(r,a,i){if(n)return t(r,null),n;var o=Math.random().toString(36).slice(2);return n=l(function(a){function l(t){t.data.callback===o&&(delete s[o],e.removeEventListener("message",l),n=null,p.clear(),i(),a())}e.addEventListener("message",l),t(r,o),s[o]=l.bind(null,{data:{callback:o}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),s)s[t](),delete s[t]}}(t)}return t}}(),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(e,t,n){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:x[t],n)}function b(e){return e<0?0:Math.floor(e)}function w(e,t){return Math.floor(Math.random()*(t-e))+e}function j(e){return parseInt(e,16)}function N(e){return e.map(k)}function k(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:j(t.substring(0,2)),g:j(t.substring(2,4)),b:j(t.substring(4,6))}}function S(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function _(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function E(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function D(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,s=t.y+t.random*t.tiltSin,a=t.wobbleX+t.random*t.tiltCos,o=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,r,s,a,i){var o=new Path2D(e),l=new Path2D;l.addPath(o,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(i)*s,Math.sin(i)*s,-Math.sin(i)*a,Math.cos(i)*a,n,r])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(a-r),.1*Math.abs(o-s),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(a-r),d=.1*Math.abs(o-s),u=t.shape.bitmap.width*t.scalar,m=t.shape.bitmap.height*t.scalar,h=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*d,Math.cos(l)*d,t.x,t.y]);h.multiplySelf(new DOMMatrix(t.shape.matrix));var f=e.createPattern(p.transform(t.shape.bitmap),"no-repeat");f.setTransform(h),e.globalAlpha=1-n,e.fillStyle=f,e.fillRect(t.x-u/2,t.y-m/2,u,m),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(a-r)*t.ovalScalar,Math.abs(o-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,s,a,i,o,l){e.save(),e.translate(t,n),e.rotate(a),e.scale(r,s),e.arc(0,0,1,i,o,l),e.restore()}(e,t.x,t.y,Math.abs(a-r)*t.ovalScalar,Math.abs(o-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,v=4*t.scalar,x=8*t.scalar,y=t.x,b=t.y,w=5,j=Math.PI/w;w--;)y=t.x+Math.cos(g)*x,b=t.y+Math.sin(g)*x,e.lineTo(y,b),g+=j,y=t.x+Math.cos(g)*v,b=t.y+Math.sin(g)*v,e.lineTo(y,b),g+=j;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(s)),e.lineTo(Math.floor(a),Math.floor(o)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function T(e,n){var i,o=!e,c=!!y(n||{},"resize"),d=!1,u=y(n,"disableForReducedMotion",Boolean),m=a&&!!y(n||{},"useWorker")?v():null,h=o?S:_,f=!(!e||!m)&&!!e.__confetti_initialized,x="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function j(t,n,a){for(var o=y(t,"particleCount",b),c=y(t,"angle",Number),d=y(t,"spread",Number),u=y(t,"startVelocity",Number),m=y(t,"decay",Number),f=y(t,"gravity",Number),v=y(t,"drift",Number),x=y(t,"colors",N),j=y(t,"ticks",Number),k=y(t,"shapes"),S=y(t,"scalar"),_=!!y(t,"flat"),T=function(e){var t=y(e,"origin",Object);return t.x=y(t,"x",Number),t.y=y(t,"y",Number),t}(t),M=o,A=[],C=e.width*T.x,O=e.height*T.y;M--;)A.push(E({x:C,y:O,angle:c,spread:d,startVelocity:u,color:x[M%x.length],shape:k[w(0,k.length)],ticks:j,decay:m,gravity:f,drift:v,scalar:S,flat:_}));return i?i.addFettis(A):(i=function(e,t,n,a,i){var o,c,d=t.slice(),u=e.getContext("2d"),m=l(function(t){function l(){o=c=null,u.clearRect(0,0,a.width,a.height),p.clear(),i(),t()}o=g.frame(function t(){!r||a.width===s.width&&a.height===s.height||(a.width=e.width=s.width,a.height=e.height=s.height),a.width||a.height||(n(e),a.width=e.width,a.height=e.height),u.clearRect(0,0,a.width,a.height),(d=d.filter(function(e){return D(u,e)})).length?o=g.frame(t):l()}),c=l});return{addFettis:function(e){return d=d.concat(e),m},canvas:e,promise:m,reset:function(){o&&g.cancel(o),c&&c()}}}(e,A,h,n,a),i.promise)}function k(n){var r=u||y(n,"disableForReducedMotion",Boolean),s=y(n,"zIndex",Number);if(r&&x)return l(function(e){e()});o&&i?e=i.canvas:o&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(s),document.body.appendChild(e)),c&&!f&&h(e);var a={width:e.width,height:e.height};function p(){if(m){var t={getBoundingClientRect:function(){if(!o)return e.getBoundingClientRect()}};return h(t),void m.postMessage({resize:{width:t.width,height:t.height}})}a.width=a.height=null}function g(){i=null,c&&(d=!1,t.removeEventListener("resize",p)),o&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,f=!1)}return m&&!f&&m.init(e),f=!0,m&&(e.__confetti_initialized=!0),c&&!d&&(d=!0,t.addEventListener("resize",p,!1)),m?m.fire(n,a,g):j(n,a,g)}return k.reset=function(){m&&m.reset(),i&&i.reset()},k}function M(){return f||(f=T(null,{useWorker:!0,resize:!0})),f}n.exports=function(){return M().apply(this,arguments)},n.exports.reset=function(){M().reset()},n.exports.create=T,n.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,n;"string"==typeof e?t=e:(t=e.path,n=e.matrix);var r=new Path2D(t),s=document.createElement("canvas").getContext("2d");if(!n){for(var a,o,l=1e3,c=l,d=l,u=0,m=0,h=0;h<l;h+=2)for(var f=0;f<l;f+=2)s.isPointInPath(r,h,f,"nonzero")&&(c=Math.min(c,h),d=Math.min(d,f),u=Math.max(u,h),m=Math.max(m,f));a=u-c,o=m-d;var p=Math.min(10/a,10/o);n=[p,0,0,p,-Math.round(a/2+c)*p,-Math.round(o/2+d)*p]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,r="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,s="fontFamily"in e?e.fontFamily:s,r="color"in e?e.color:r);var a=10*n,i=a+"px "+s,o=new OffscreenCanvas(a,a),l=o.getContext("2d");l.font=i;var c=l.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),u=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),m=c.actualBoundingBoxLeft+2,h=c.actualBoundingBoxAscent+2;d+=4,u+=4,(l=(o=new OffscreenCanvas(d,u)).getContext("2d")).font=i,l.fillStyle=r,l.fillText(t,m,h);var f=1/n;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[f,0,0,f,-d*f/2,-u*f/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),ow,!1);const lw=ow.exports;function cw({question:e,onSubmitAnswer:t}){const[n,r]=Je.useState(""),[s,a]=Je.useState(""),[i,o]=Je.useState(""),[l,c]=Je.useState(e.answered||!1);return X.jsxs(kv,{className:"overflow-hidden",children:[X.jsxs(Sv,{children:[X.jsxs("div",{className:"flex items-center justify-between mb-2",children:[X.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.tags&&e.tags.map((e,t)=>X.jsx(iv,{variant:"outline",className:"text-xs capitalize",children:e},t)),X.jsx(iv,{variant:"secondary",className:"text-xs",children:e.responseType.replace("-"," ")})]}),X.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[X.jsx(rr,{className:"w-3 h-3"}),e.points," pts"]})]}),X.jsx(_v,{className:"text-lg",children:e.title})]}),X.jsxs(Ev,{className:"space-y-4",children:[X.jsx("div",{className:"p-4 bg-muted/20 rounded-lg",children:X.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:iw(e.question)}})}),l||e.answered?X.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[X.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm mb-2",children:[X.jsx(On,{className:"w-4 h-4"}),"Answer submitted successfully!"]}),X.jsx("p",{className:"text-sm text-muted-foreground",children:"Your answer is being reviewed and will be scored shortly."})]}):X.jsxs("div",{className:"space-y-3",children:[(()=>{var t;switch(e.responseType){case"text":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Sy,{htmlFor:`answer-${e.id}`,className:"text-sm",children:"Your Answer"}),X.jsx(_y,{id:`answer-${e.id}`,placeholder:"Type your answer here...",value:n,onChange:e=>r(e.target.value),className:"mt-1 min-h-32"})]})});case"number":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Sy,{htmlFor:`answer-${e.id}`,className:"text-sm",children:"Your Answer (Number)"}),X.jsx(Dx,{id:`answer-${e.id}`,type:"number",placeholder:"Enter a number...",value:s,onChange:e=>a(e.target.value),className:"mt-1"})]})});case"multiple-choice":return X.jsx("div",{className:"space-y-3",children:X.jsxs("div",{children:[X.jsx(Sy,{className:"text-sm",children:"Select your answer:"}),X.jsx(Zy,{value:i,onValueChange:o,className:"mt-2",children:null==(t=e.multipleChoiceOptions)?void 0:t.map((e,t)=>X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Jy,{value:e,id:`option-${t}`,className:"border-2 border-muted-foreground/30 data-[state=checked]:border-primary data-[state=checked]:bg-primary"}),X.jsx(Sy,{htmlFor:`option-${t}`,className:"text-sm cursor-pointer",children:e})]},t))})]})});default:return null}})(),X.jsx(Tv,{onClick:()=>{let r="";switch(e.responseType){case"text":r=n.trim();break;case"number":r=parseFloat(s);break;case"multiple-choice":r=i}let a=!1;"text"===e.responseType&&"string"==typeof r&&r.length>0?a=!0:"number"!==e.responseType||"number"!=typeof r||isNaN(r)?"multiple-choice"===e.responseType&&""!==r&&(a=!0):a=!0,a&&(t(e.id,r),c(!0))},disabled:!(()=>{switch(e.responseType){case"text":return n.trim().length>0;case"number":return s.trim().length>0&&!isNaN(parseFloat(s));case"multiple-choice":return i.length>0;default:return!1}})(),className:"w-full",children:"Submit Answer"})]})]})]})}function dw({userId:e}){const[t,n]=Je.useState({totalQuestions:0,totalPoints:0,rank:0}),[r,s]=Je.useState(!0);return Je.useEffect(()=>{(async()=>{if(e)try{const{data:r,error:a}=await ei.from("user_profiles").select("hti_score").eq("user_id",e).single();if(a)return void s(!1);const{count:i,error:o}=await ei.from("hti_submissions").select("*",{count:"exact",head:!0}).eq("user_id",e);let l=0,c=null;try{const t=await tb.getHTILeaderboard();if((null==t?void 0:t.ok)&&Array.isArray(t.rows)){const n=t.rows,r=n.findIndex(t=>t.user_id===e);r>=0&&(l=r+1,c=Number(n[r].points||0))}}catch(t){}n({totalQuestions:i||0,totalPoints:null!=c?c:(null==r?void 0:r.hti_score)||0,rank:l})}catch(r){}finally{s(!1)}else s(!1)})()},[e]),r?X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6",children:[X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsx("div",{className:"h-16 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"})})}),X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsx("div",{className:"h-16 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"})})})]}):X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 mb-6",children:[X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:X.jsx(rr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Points"}),X.jsx("div",{className:"font-semibold",children:t.totalPoints}),X.jsx("div",{className:"text-xs text-muted-foreground",children:t.rank>0?`Rank #${t.rank}`:"Unranked"})]})]})})}),X.jsx(kv,{children:X.jsx(Ev,{className:"p-4",children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:X.jsx(Hn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),X.jsxs("div",{children:[X.jsx("div",{className:"text-xs text-muted-foreground",children:"Questions"}),X.jsx("div",{className:"font-semibold",children:t.totalQuestions}),X.jsx("div",{className:"text-xs text-muted-foreground",children:"answered"})]})]})})})]})}function uw(){const{user:e}=li(),[t,n]=Je.useState(e?"practice":"leaderboard"),[r,s]=Je.useState("all"),[a,i]=Je.useState("all");Je.useState(new Map);const[o,l]=Je.useState([]),[c,d]=Je.useState([]),[u,m]=Je.useState([]),[h,f]=Je.useState(!0);Je.useEffect(()=>{(async()=>{f(!0);try{const t=await tb.getHTIQuestions();if(t.ok&&t.questions){const e=t.questions.map((e,t)=>{const n=e.question_text||"No question text available",r=e.choices||[];let s,a="text";return"mcq"===e.kind?a="multiple-choice":"number"===e.kind?a="number":"string"===e.kind&&(a="text"),"mcq"===e.kind&&r&&r.length>0&&(s=r.map(e=>"object"==typeof e&&e.label?e.label:String(e))),{id:e.id,category:"technical",difficulty:e.points>=20?"hard":e.points>=15?"medium":"easy",title:e.title&&String(e.title).trim().length>0?String(e.title):`Question ${e.n}`,question:n,responseType:a,correctAnswer:e.correct_answer,multipleChoiceOptions:s,points:e.points||10,answered:e.answered||!1,tags:Array.isArray(e.tags)?e.tags:[]}});l(e)}const n=await tb.getHTILeaderboard();if(n.ok){const e=(n.rows||[]).map((e,t)=>({id:e.user_id,username:e.email||"Anonymous",points:e.points||0,questionsAnswered:0,rank:t+1,badge:0===t?"":1===t?"":2===t?"":""}));d(e)}else d([]);if(e){const{data:t}=await ei.from("hti_submissions").select("*").eq("user_id",e.id);if(t){m(t);const e=new Set(t.map(e=>e.question_id));l(t=>t.map(t=>({...t,answered:e.has(t.id)})))}}}catch(t){Ga.error("Failed to load questions and leaderboard")}finally{f(!1)}})()},[e]);const[p,g]=Je.useState(!1),[v,x]=Je.useState(0),y=tt.useRef(null),b=tt.useRef(null);const w=async(t,n)=>{var r;if(e)try{const s=o.find(e=>e.id===t);if(!s)return;let a;if("multiple-choice"===s.responseType){a=null==(r=s.multipleChoiceOptions)?void 0:r.findIndex(e=>e===n)}else a="number"===s.responseType?Number(n):String(n);const i=await async function(){var e;return"undefined"==typeof window||"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?p&&y.current&&(null==(e=null==window?void 0:window.turnstile)?void 0:e.reset)?await new Promise(e=>{b.current=e;try{window.turnstile.reset(y.current)}catch(t){g(!1),x(e=>e+1),e("")}}):void 0:"dev-bypass-token"}(),c=await tb.submitHTIAnswer(t,a,{turnstileToken:i});if(c.ok&&c.data){const n=c.data.isCorrect||c.data.is_correct,r=c.data.points||0;n?(Ga.success(`Correct! You earned ${r} points`),lw({particleCount:100,spread:70,origin:{y:.6}})):Ga.error("Incorrect answer. Try again next time!"),l(e=>e.map(e=>e.id===t?{...e,answered:!0}:e)),m(s=>[...s,{question_id:t,user_id:e.id,is_correct:n,points:r,submitted_at:(new Date).toISOString()}]);setTimeout(async()=>{const e=await tb.getHTILeaderboard();if(e.ok){const t=(e.rows||[]).map((e,t)=>({id:e.user_id,username:e.email||"Anonymous",points:e.points||0,questionsAnswered:0,rank:t+1,badge:0===t?"":1===t?"":2===t?"":""}));d(t)}else d([])},500)}else Ga.error(c.error||"Failed to submit answer")}catch(s){Ga.error("Failed to submit answer. Please try again.")}else Ga.error("Please sign in to submit answers")};tt.useEffect(()=>{e||"practice"!==t||n("leaderboard")},[e]);const j=o.filter(e=>{const t="all"===r||e.category===r,n="all"===a||e.responseType===a;return t&&n});return X.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[X.jsx(jy,{children:X.jsx(dw,{userId:null==e?void 0:e.id})}),X.jsxs(tv,{value:t,onValueChange:n,className:"w-full",children:[X.jsx("div",{className:"sr-only","aria-hidden":"true",children:X.jsx(Nx,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",size:"compact",onLoad:e=>{y.current=e,g(!0)},onVerify:e=>{b.current&&(b.current(e),b.current=null)},onExpire:()=>{},onError:()=>{g(!1),x(e=>e+1)}},`hti-${v}`)}),X.jsxs(nv,{className:`grid w-full ${e?"grid-cols-2":"grid-cols-1"} max-w-md`,children:[e&&X.jsxs(rv,{value:"practice",className:"flex items-center gap-2",children:[X.jsx(Nn,{className:"w-4 h-4"}),"Practice"]}),X.jsxs(rv,{value:"leaderboard",className:"flex items-center gap-2",children:[X.jsx(rr,{className:"w-4 h-4"}),"Leaderboard"]})]}),e&&X.jsx(sv,{value:"practice",className:"mt-6",children:X.jsxs("div",{className:"space-y-6",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Practice Questions"}),X.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All answer submissions are final."})]}),X.jsxs("div",{className:"flex gap-3",children:[X.jsxs(Mv,{value:r,onValueChange:s,children:[X.jsx(Cv,{className:"w-48",children:X.jsx(Av,{placeholder:"Select category"})}),X.jsxs(Ov,{children:[X.jsx(Pv,{value:"all",children:"All Categories"}),X.jsx(Pv,{value:"technical",children:"Technical"}),X.jsx(Pv,{value:"behavioral",children:"Behavioral"}),X.jsx(Pv,{value:"system-design",children:"System Design"}),X.jsx(Pv,{value:"case-study",children:"Case Study"})]})]}),X.jsxs(Mv,{value:a,onValueChange:i,children:[X.jsx(Cv,{className:"w-48",children:X.jsx(Av,{placeholder:"Response type"})}),X.jsxs(Ov,{children:[X.jsx(Pv,{value:"all",children:"All Types"}),X.jsx(Pv,{value:"text",children:"Free Text"}),X.jsx(Pv,{value:"number",children:"Number"}),X.jsx(Pv,{value:"multiple-choice",children:"Multiple Choice"})]})]})]})]}),h?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):j.length>0?X.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map(e=>X.jsx(cw,{question:e,onSubmitAnswer:w},e.id))}):X.jsx(kv,{children:X.jsxs(Ev,{className:"p-8 text-center",children:[X.jsx(kn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),X.jsx("p",{className:"text-muted-foreground",children:"No questions available at the moment. Check back later!"})]})})]})}),X.jsx(sv,{value:"leaderboard",className:"mt-6",children:X.jsxs(kv,{children:[X.jsx(Sv,{children:X.jsxs(_v,{className:"flex items-center gap-2",children:[X.jsx(rr,{className:"w-5 h-5"}),"Interview Champions"]})}),X.jsx(Ev,{children:h?X.jsx("div",{className:"flex justify-center py-8",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):X.jsx("div",{className:"space-y-3",children:c.length>0?c.map(t=>X.jsx("div",{className:"p-4 rounded-lg border transition-all hover:shadow-md "+(t.id===(null==e?void 0:e.id)?"bg-primary/5 border-primary/20 ring-2 ring-primary/10":"bg-card"),children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsxs("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-muted font-semibold",children:["#",t.rank]}),X.jsx("div",{children:X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("span",{className:"font-semibold",children:t.username}),t.id===(null==e?void 0:e.id)&&X.jsx(iv,{variant:"secondary",className:"text-xs",children:"You"}),X.jsx("span",{className:"text-lg",children:t.badge})]})})]}),X.jsxs("div",{className:"text-right",children:[X.jsxs("div",{className:"font-semibold",children:[t.points," points"]}),X.jsx("div",{className:"text-sm text-muted-foreground",children:"Total score"})]})]})},t.id)):X.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No participants yet. Be the first to answer questions!"})})})]})})]})]})}function mw(){const[e,t]=tt.useState({label:null}),{user:n}=li();if(tt.useEffect(()=>{let e=!1;return(async()=>{try{if(!n)return void t({label:null});const{supabase:s}=await ct(async()=>{const{supabase:e}=await Promise.resolve().then(()=>ti);return{supabase:e}},void 0),{data:a}=await s.from("seasons").select("id, code, name, starts_at, ends_at").eq("status","active").maybeSingle();if(e)return;if(!a)return void t({label:null});let i=null;if(a.code&&String(a.code).trim().length>0)i=String(a.code);else if(a.name&&String(a.name).trim().length>0)i=String(a.name);else if(a.starts_at)try{const e=new Date(a.starts_at),t=Math.floor(e.getUTCMonth()/3)+1;i=`Q${t} ${e.getUTCFullYear()}`}catch(r){i=String(a.id)}else i=String(a.id);t({label:i,starts_at:a.starts_at||null,ends_at:a.ends_at||null})}catch(r){t({label:null})}})(),()=>{e=!0}},[n]),!n||!e.label)return null;const r=function(e,t){try{if(!e)return null;const n=new Date(e),r=n.toLocaleString("en-US",{month:"short"}),s=n.getFullYear();if(t){const e=new Date(t),n=e.toLocaleString("en-US",{month:"short"}),a=e.getFullYear();return s===a?`${r}${n} ${s}`:`${r} ${s}  ${n} ${a}`}return`${r} ${s}`}catch{return null}}(e.starts_at,e.ends_at);return X.jsx("div",{className:"relative",children:X.jsxs("div",{title:r?`Season: ${e.label}  ${r}`:`Season: ${e.label}`,className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r from-[#7dcb53]/10 via-[#7dcb53]/5 to-[#7dcb53]/10 text-[#2b5f16] dark:text-[#b7f09a] border border-[#7dcb53]/50 shadow-sm backdrop-blur-sm ring-1 ring-[#7dcb53]/15",children:[X.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"w-4 h-4 text-[#6fbd49] dark:text-[#9ce074]",children:X.jsx("path",{fill:"currentColor",d:"M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a1 1 0 0 1 1-1m12 7H5v9h14V9Z"})}),X.jsxs("span",{className:"font-medium text-xs tracking-wide",children:["Season ",e.label]}),r?X.jsx("span",{className:"ml-1 inline-flex items-center rounded-full bg-[#7dcb53]/15 px-2 py-0.5 text-[10px] font-semibold text-[#2b5f16] dark:text-[#b7f09a]",children:r}):null]})})}function hw(){const[e,t]=Je.useState("trading");return X.jsxs("div",{className:"min-h-screen bg-background",children:[X.jsx("div",{className:"border-b bg-card",children:X.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:[X.jsxs("div",{className:"flex items-start justify-between mb-4",children:[X.jsxs("div",{children:[X.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"FS QDS Battleground"}),X.jsx("p",{className:"text-muted-foreground text-lg",children:"Master trading and interview skills"})]}),X.jsx("div",{className:"self-start",children:X.jsx(mw,{})})]}),X.jsx(tv,{value:e,onValueChange:t,className:"w-full",children:X.jsxs(nv,{className:"grid w-full grid-cols-2 max-w-md h-12",children:[X.jsxs(rv,{value:"trading",className:"flex items-center gap-2 text-base",children:[X.jsx(tr,{className:"w-5 h-5"}),"Axe the DAX"]}),X.jsxs(rv,{value:"interview",className:"flex items-center gap-2 text-base",children:[X.jsx(Hn,{className:"w-5 h-5"}),"Hack the Interview"]})]})})]})}),X.jsxs(tv,{value:e,onValueChange:t,className:"w-full",children:[X.jsx(sv,{value:"trading",className:"mt-0",children:X.jsx(ky,{})}),X.jsx(sv,{value:"interview",className:"mt-0",children:X.jsx(uw,{})})]})]})}ow.exports.create;const fw=()=>{const{t:e}=ai();return X.jsxs("div",{className:"battleground-container battleground-figma-scope",children:[X.jsx(hw,{}),X.jsx("div",{className:"mt-4 md:mt-6 px-4 md:px-6 bg-white pb-10",children:X.jsx("div",{className:"max-w-3xl mx-auto bg-yellow-50 border border-yellow-200 rounded shadow-sm p-3 sm:p-3 text-yellow-900",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-600 mt-0.5 mr-2.5 text-sm sm:text-base"}),X.jsxs("div",{children:[X.jsx("div",{className:"font-semibold mb-0.5 text-xs sm:text-sm",children:e("battleground.riskWarningTitle")}),X.jsx("p",{className:"text-[11px] sm:text-xs leading-relaxed text-yellow-800",children:e("battleground.riskWarningText")})]})]})})})]})},pw=()=>{const{t:e}=ai();return X.jsx("section",{id:"contact",className:"py-16 bg-white min-h-screen",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"text-center mb-16",children:[X.jsx("h2",{className:"text-3xl font-inter font-bold text-neutral-900 mb-4",children:e("navigation.contact")}),X.jsx("p",{className:"max-w-3xl mx-auto text-neutral-700",children:e("contact.subtitle")})]}),X.jsx("div",{className:"grid grid-cols-1 gap-8 mb-12",children:X.jsxs("div",{children:[X.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-md border border-neutral-200 mb-8",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-6",children:e("contact.joinTitle")}),X.jsx("p",{className:"text-neutral-700 mb-6",children:e("contact.joinDescription")}),X.jsxs("div",{className:"space-y-4 mb-6",children:[X.jsxs("div",{className:"flex",children:[X.jsx("div",{className:"flex-shrink-0",children:X.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#1256C4] text-white",children:X.jsx("i",{className:"fas fa-check"})})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"Open to All Programs"}),X.jsx("p",{className:"text-neutral-700",children:"Bachelor's, Master's, and Ph.D. students from any discipline can join."})]})]}),X.jsxs("div",{className:"flex",children:[X.jsx("div",{className:"flex-shrink-0",children:X.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#1256C4] text-white",children:X.jsx("i",{className:"fas fa-check"})})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"No Prior Experience Required"}),X.jsx("p",{className:"text-neutral-700",children:"We offer learning paths for beginners and advanced practitioners alike."})]})]}),X.jsxs("div",{className:"flex",children:[X.jsx("div",{className:"flex-shrink-0",children:X.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#1256C4] text-white",children:X.jsx("i",{className:"fas fa-check"})})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"Regular Commitment"}),X.jsx("p",{className:"text-neutral-700",children:"Members are expected to participate in at least one project or division and attend regular meetings."})]})]})]}),X.jsxs("div",{className:"bg-neutral-100 p-4 rounded-md",children:[X.jsx("h4",{className:"font-medium mb-2",children:"Next Recruitment Cycle"}),X.jsx("p",{className:"text-neutral-700 mb-2",children:"Applications for 2025/26 will open on 2nd September and close on 15th September 2025, 11:59pm."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-md border border-neutral-200",children:[X.jsx("h3",{className:"font-inter text-xl font-semibold mb-4",children:"Contact Information"}),X.jsx("div",{className:"space-y-4",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-[#1256C4] rounded-full text-white",children:X.jsx("i",{className:"fas fa-envelope"})}),X.jsxs("div",{className:"ml-4",children:[X.jsx("h4",{className:"text-base font-medium",children:"Email"}),X.jsx("p",{className:"text-neutral-700",children:X.jsx("a",{href:"mailto:fs.data.science00@gmail.com",className:"underline",children:"fs.data.science00@gmail.com"})})]})]})})]})]})}),X.jsxs("div",{className:"bg-[#1256C4] text-white rounded-lg p-8 shadow-md",children:[X.jsxs("div",{className:"text-center mb-6",children:[X.jsx("h3",{className:"font-inter text-2xl font-semibold mb-2",children:"Connect With Us"}),X.jsx("p",{children:"Follow our social media channels to stay updated with the latest events and activities."})]}),X.jsxs("div",{className:"flex justify-center space-x-6",children:[X.jsxs("a",{href:"https://de.linkedin.com/company/fs-quant",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[X.jsx("div",{className:"h-12 w-12 rounded-full bg-white text-[#0B3D91] flex items-center justify-center text-2xl mb-2",children:X.jsx("i",{className:"fab fa-linkedin-in"})}),X.jsx("span",{className:"text-sm",children:"LinkedIn"})]}),X.jsxs("a",{href:"https://github.com/fsqds/",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[X.jsx("div",{className:"h-12 w-12 rounded-full bg-white text-[#0B3D91] flex items-center justify-center text-2xl mb-2",children:X.jsx("i",{className:"fab fa-github"})}),X.jsx("span",{className:"text-sm",children:"GitHub"})]}),X.jsxs("a",{href:"https://www.instagram.com/fs_quant/?hl=en",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[X.jsx("div",{className:"h-12 w-12 rounded-full bg-white text-[#0B3D91] flex items-center justify-center text-2xl mb-2",children:X.jsx("i",{className:"fab fa-instagram"})}),X.jsx("span",{className:"text-sm",children:"Instagram"})]})]})]})]})})};function gw({activeSeason:e}){const[t,n]=Je.useState("ADX"),[r,s]=Je.useState([]),[a,i]=Je.useState({}),[o,l]=Je.useState(!1),[c,d]=Je.useState("custom_badge"),[u,m]=Je.useState("Custom Badge"),[h,f]=Je.useState("Awarded by admin"),[p,g]=Je.useState(""),[v,x]=Je.useState(0);Je.useEffect(()=>{let n=!1;return async function(){var r,a;if(e){l(!0);try{const e="https://fsqds-production.yadavkartik-arbeit.workers.dev",i=[{url:"ADX"===t?`${e}/api/leaderboards/adx`:`${e}/api/leaderboards/hti`}];try{const{data:e}=await ei.auth.getSession(),n=(null==(r=null==e?void 0:e.session)?void 0:r.access_token)||"",s="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/"+("ADX"===t?"adx_leaderboard":"get_hti_leaderboard");i.push({url:s,headers:n?{Authorization:`Bearer ${n}`}:void 0})}catch{}let o=null;for(const t of i)try{const e=await fetch(t.url,{method:"GET",headers:{Accept:"application/json",...t.headers||{}}}),n=await e.json().catch(()=>({})),r=(null==(a=null==n?void 0:n.data)?void 0:a.rows)||(null==n?void 0:n.rows)||[];if(Array.isArray(r)&&r.length>=0){o=r;break}}catch{}n||s(o||[])}catch(tj){}finally{n||l(!1)}}else s([])}(),()=>{n=!0}},[t,e]);const y=r.length>0&&r.every(e=>a[e.user_id]);return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Leaderboard"}),X.jsxs("select",{value:t,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[X.jsx("option",{value:"ADX",children:"ADX (Axe the DAX)"}),X.jsx("option",{value:"HTI",children:"HTI (Hack the Interview)"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Badge Type (slug)"}),X.jsx("input",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Name"}),X.jsx("input",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Icon / URL"}),X.jsx("input",{value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{className:"md:col-span-3",children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),X.jsx("input",{value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded-md"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Points"}),X.jsx("input",{type:"number",value:v,onChange:e=>x(parseInt(e.target.value||"0")),className:"w-full px-3 py-2 border rounded-md"})]})]}),X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:X.jsx("input",{type:"checkbox",checked:y,onChange:e=>(e=>{const t={};e&&r.forEach(e=>{t[e.user_id]=!0}),i(t)})(e.target.checked)})}),X.jsx("th",{className:"px-3 py-2",children:"User"}),X.jsx("th",{className:"px-3 py-2",children:"Score"})]})}),X.jsx("tbody",{children:o?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4",colSpan:3,children:"Loading"})}):0===r.length?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4 text-neutral-500",colSpan:3,children:"No rows"})}):r.map((e,n)=>{var r,s;return X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:X.jsx("input",{type:"checkbox",checked:!!a[e.user_id],onChange:t=>i(n=>({...n,[e.user_id]:t.target.checked}))})}),X.jsx("td",{className:"px-3 py-2",children:e.email||e.user_id}),X.jsx("td",{className:"px-3 py-2",children:"ADX"===t?(null==(s=null==(r=null==e?void 0:e.pnl_pct)?void 0:r.toFixed)?void 0:s.call(r,2))??"-":(null==e?void 0:e.total_points)??"-"})]},`${e.user_id}-${n}`)})})]})}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("button",{onClick:async function(){var n;if(!e)return;const s=r.filter(e=>a[e.user_id]).map(e=>e.user_id);if(0!==s.length)try{const{data:r}=await ei.auth.getSession(),a=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_awards_badges",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(n=null==r?void 0:r.session)?void 0:n.access_token}`},body:JSON.stringify({entity:"badge",action:"bulk_award",data:{season_id:e.id,user_ids:s,badge_type:c,name:u,description:h,icon_url:p,points:v,criteria:{leaderboard:t}}})}),o=await a.json();if(!a.ok||!(null==o?void 0:o.success))throw new Error((null==o?void 0:o.error)||"Failed to award badges");Ga.success(`Awarded '${u}' to ${s.length} users on ${t} leaderboard`),i({})}catch(tj){Ga.error((null==tj?void 0:tj.message)||"Failed to award badges")}},disabled:0===Object.values(a).filter(Boolean).length||!e,className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69]",children:"Award to Selected"}),X.jsx("button",{onClick:async()=>{var e;try{const t="https://fsqds-production.yadavkartik-arbeit.workers.dev",{data:n}=await ei.auth.getSession(),r=(null==(e=null==n?void 0:n.session)||e.access_token,await fetch(`${t}/jobs/orchestrator`,{method:"POST",headers:{Authorization:"Bearer SERVICE"}}));if(!r.ok)throw new Error(`HTTP ${r.status}`);Ga.success("Triggered orchestrator tick; MV summary will refresh best-effort.")}catch(tj){Ga.error("Failed to trigger refresh")}},className:"px-4 py-2 bg-neutral-100 text-neutral-800 rounded-md border hover:bg-neutral-200",children:"Refresh Options Summary"})]})]})}function vw(){const[e,t]=tt.useState([]),[n,r]=tt.useState(!1),[s,a]=tt.useState(""),[i,o]=tt.useState(1),[l]=tt.useState(200),c=tt.useCallback(async()=>{var e;r(!0);try{const{data:r}=await ei.auth.getSession(),s=(null==(e=null==r?void 0:r.session)?void 0:e.access_token)||"",a="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o="https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/list-users",c="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_users",d=JSON.stringify({action:"list",params:{page:i,perPage:l}});let u=null;if(a){const e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to list users")}else try{const e=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||`HTTP ${e.status}`)}catch(n){const e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:d});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to list users")}t(u.users||[])}catch(tj){Ga.error((null==tj?void 0:tj.message)||"Failed to load users")}finally{r(!1)}},[i,l]);tt.useEffect(()=>{(async()=>{await c()})()},[c]);const d=e.filter(e=>{var t;return!s||(null==(t=e.email)?void 0:t.toLowerCase().includes(s.toLowerCase()))});return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Filter by email",className:"px-3 py-2 border rounded-md w-64"}),X.jsx("button",{onClick:c,disabled:n,className:"px-3 py-2 border rounded-md",children:n?"Loading":"Refresh"})]}),X.jsx("div",{className:"overflow-x-auto",children:X.jsxs("table",{className:"min-w-full text-sm",children:[X.jsx("thead",{children:X.jsxs("tr",{className:"text-left border-b",children:[X.jsx("th",{className:"px-3 py-2",children:"Email"}),X.jsx("th",{className:"px-3 py-2",children:"Confirmed"}),X.jsx("th",{className:"px-3 py-2",children:"Last Sign-in"}),X.jsx("th",{className:"px-3 py-2",children:"Admin"}),X.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),X.jsx("tbody",{children:0===d.length?X.jsx("tr",{children:X.jsx("td",{className:"px-3 py-4",colSpan:5,children:"No users"})}):d.map(e=>X.jsxs("tr",{className:"border-b",children:[X.jsx("td",{className:"px-3 py-2",children:e.email}),X.jsx("td",{className:"px-3 py-2",children:e.confirmed_at?new Date(e.confirmed_at).toLocaleString():""}),X.jsx("td",{className:"px-3 py-2",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleString():""}),X.jsx("td",{className:"px-3 py-2",children:e.is_admin?"Yes":"No"}),X.jsx("td",{className:"px-3 py-2",children:X.jsx("button",{onClick:()=>async function(e){var n;if(!(null==e?void 0:e.id))return;const r=`This will permanently delete ${e.email} and all related data (ADX portfolios, orders, positions, HTI submissions, badges, profile, and auth user).\n\nType DELETE to confirm.`;if("DELETE"===window.prompt(r))try{const{data:r}=await ei.auth.getSession(),a=(null==(n=null==r?void 0:r.session)?void 0:n.access_token)||"",i=JSON.stringify({action:"wipe",userId:e.id}),o="https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/wipe-user",l="https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_users",c="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);let d=!1,u=null;if(c){const e=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});u=await e.json().catch(()=>({})),d=e.ok&&!!(null==u?void 0:u.ok)}else{try{const e=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});u=await e.json().catch(()=>({})),d=e.ok&&!!(null==u?void 0:u.ok)}catch(s){d=!1}if(!d){const e=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:i});if(u=await e.json().catch(()=>({})),!e.ok||!(null==u?void 0:u.ok))throw new Error((null==u?void 0:u.error)||"Failed to wipe user");d=!0}}if(!d)throw new Error("Failed to wipe user");Ga.success(`Wiped user ${e.email}`),t(t=>t.filter(t=>t.id!==e.id))}catch(tj){Ga.error((null==tj?void 0:tj.message)||"Failed to wipe user")}}(e),className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Permanently delete user and all data",children:"Wipe User"})})]},e.id))})]})})]})}function xw({user:e,onLogout:t}){var n;ai();const[r,s]=Je.useState("hti"),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState([]),[u,m]=Je.useState(null),[h,f]=Je.useState({kind:"string",points:10,is_active:!0,title:"",tags:[]}),[p,g]=Je.useState([]),[v,x]=Je.useState(null),[y,b]=Je.useState({is_active:!0}),[w,j]=Je.useState([]),[N,k]=Je.useState({}),[S,_]=Je.useState([]),[E,D]=Je.useState(null),[T,M]=Je.useState({status:"upcoming"});Je.useEffect(()=>{e&&(async()=>{const{data:n}=await ei.from("user_profiles").select("is_admin").eq("user_id",e.id).single();(null==n?void 0:n.is_admin)||(Ga.error("Access denied: Admin privileges required"),t())})()},[e,t]),Je.useEffect(()=>{(async()=>{const{data:e}=await ei.from("seasons").select("*").order("starts_at",{ascending:!1});if(e){_(e);const t=e.find(e=>"active"===e.status);t&&l(t)}})()},[]),Je.useEffect(()=>{if(!o)return;(async()=>{i(!0);try{switch(r){case"hti":const{data:e}=await ei.from("hti_questions").select("*").eq("season_id",o.id).order("release_at",{ascending:!0});e&&d(e);break;case"adx":const{data:t}=await ei.from("adx_tickers").select("*").eq("season_id",o.id).order("symbol",{ascending:!0});t&&g(t);break;case"revenue":const{data:n}=await ei.from("adx_tickers").select("*").eq("season_id",o.id).eq("is_active",!0).order("symbol");j(n||[]);const{data:r}=await ei.from("adx_revenue_actuals").select("symbol, actual_value").eq("season_id",o.id),s={};(r||[]).forEach(e=>{s[e.symbol]=null!=e.actual_value?String(e.actual_value):""}),k(s)}}catch(e){Ga.error("Failed to load data")}finally{i(!1)}})()},[r,o]);const A=async()=>{var e;if(o)try{const{data:t}=await ei.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`},body:JSON.stringify({action:"list",data:{season_id:o.id}})}),r=await n.json();n.ok&&r.success&&d(r.questions||[])}catch(t){}},C=async()=>{var e;if(o)try{const{data:t}=await ei.auth.getSession(),n=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`},body:JSON.stringify({action:"list",data:{season_id:o.id}})}),r=await n.json();n.ok&&r.success&&g(r.tickers||[])}catch(t){}};return X.jsxs("div",{className:"min-h-screen bg-[#F8F9FA]",children:[X.jsx("div",{className:"bg-white shadow-sm border-b border-neutral-200",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{className:"flex items-center space-x-4",children:[X.jsx(Kn,{className:"w-8 h-8 text-[#0B3D91]"}),X.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Admin Panel"}),o&&X.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[o.name," - ",o.status]})]}),X.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[X.jsx(qn,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),X.jsx("div",{className:"bg-white border-b border-neutral-200",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:X.jsx("nav",{className:"flex space-x-8",children:[{id:"hti",label:"HTI Questions",icon:rr},{id:"adx",label:"ADX Tickers",icon:tr},{id:"revenue",label:"Revenues",icon:Ln},{id:"badges",label:"Award Badges",icon:jn},{id:"seasons",label:"Seasons",icon:Sn},{id:"users",label:"User Administration",icon:ar}].map(e=>X.jsxs("button",{onClick:()=>s(e.id),className:"flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(r===e.id?"border-[#0B3D91] text-[#0B3D91]":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300"),children:[X.jsx(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.id))})})}),X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a?X.jsx("div",{className:"flex justify-center items-center py-12",children:X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#0B3D91]"})}):X.jsxs(cn,{mode:"wait",children:["hti"===r&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:u?"Edit Question":"Add New Question"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Title (optional)"}),X.jsx("input",{type:"text",value:h.title||"",onChange:e=>f({...h,title:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., Bayes Rule Warm-up"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question Text"}),X.jsx("textarea",{value:h.question_text||"",onChange:e=>f({...h,question_text:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",rows:3})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Tags",X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Comma-separated, e.g., probability, bayes)"})]}),X.jsx("input",{type:"text",value:(h.tags||[]).join(", "),onChange:e=>f({...h,tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., probability, bayes"}),h.tags&&h.tags.length>0&&X.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:h.tags.map((e,t)=>X.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-800 rounded",children:e},t))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question Type"}),X.jsxs("select",{value:h.kind||"string",onChange:e=>f({...h,kind:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[X.jsx("option",{value:"string",children:"Text"}),X.jsx("option",{value:"number",children:"Number"}),X.jsx("option",{value:"mcq",children:"Multiple Choice"})]})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Correct Answer","mcq"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the index: 0 for first option, 1 for second, etc.)"}),"number"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the exact numeric answer)"}),"string"===h.kind&&X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(Enter the exact text answer)"})]}),X.jsx("input",{type:"number"===h.kind?"number":"text",value:h.correct_answer||"",onChange:e=>f({...h,correct_answer:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"mcq"===h.kind?"e.g., 0 (for first option)":"number"===h.kind?"e.g., 42":"e.g., Python"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Points"}),X.jsx("input",{type:"number",value:h.points||10,onChange:e=>f({...h,points:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Release At"}),X.jsx("input",{type:"datetime-local",value:h.release_at||"",onChange:e=>f({...h,release_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Close At"}),X.jsx("input",{type:"datetime-local",value:h.close_at||"",onChange:e=>f({...h,close_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),"mcq"===h.kind&&X.jsxs("div",{className:"md:col-span-2",children:[X.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Multiple Choice Options",X.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:"(One per line; commas are allowed inside an option)"})]}),X.jsx("textarea",{value:(null==(n=h.choices)?void 0:n.join("\n"))||"",onChange:e=>f({...h,choices:e.target.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"Enter each option on a new line\nExample:\nOption A, with comma\nOption B (another example)",rows:4}),h.choices&&h.choices.length>0&&X.jsxs("div",{className:"mt-2 p-3 bg-neutral-50 rounded-md",children:[X.jsx("p",{className:"text-xs font-medium text-neutral-600 mb-1",children:"Preview:"}),h.choices.map((e,t)=>X.jsxs("div",{className:"text-sm text-neutral-700",children:[t,": ",e]},t))]})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",id:"is_active",checked:h.is_active||!1,onChange:e=>f({...h,is_active:e.target.checked}),className:"mr-2"}),X.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-neutral-700",children:"Active"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[u&&X.jsx("button",{onClick:()=>{m(null),f({kind:"string",points:10,is_active:!0})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{var e;if(o){i(!0);try{let t={};h.question_text&&(t.question=h.question_text),"mcq"===h.kind&&h.choices&&(t.options=h.choices.map((e,t)=>({index:t,label:e})));let n={};"mcq"===h.kind?n.index=parseInt(h.correct_answer||"0"):"number"===h.kind?n.value=parseFloat(h.correct_answer||"0"):n.value=h.correct_answer||"";const r={season_id:o.id,n:h.n||c.length+1,kind:h.kind||"string",choices:t,correct:n,release_at:h.release_at||(new Date).toISOString(),is_active:!1!==h.is_active,points:Number.isFinite(h.points)?Number(h.points):10,title:(h.title??"").toString(),tags:Array.isArray(h.tags)?h.tags:[]},{data:s}=await ei.auth.getSession(),a=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==s?void 0:s.session)?void 0:e.access_token}`},body:JSON.stringify({action:u?"update":"create",data:u?{...r,id:u.id}:r})}),i=await a.json().catch(()=>({}));if(a.ok&&i.success)Ga.success(u?"Question updated successfully":"Question created successfully");else{if(u){const{error:e}=await ei.from("hti_questions").update({kind:r.kind,choices:r.choices,correct:r.correct,release_at:r.release_at,is_active:r.is_active,points:r.points,title:r.title,tags:r.tags}).eq("id",u.id);if(e)throw e}else{const{error:e}=await ei.from("hti_questions").insert([{...r}]);if(e)throw e}Ga.success(u?"Question updated successfully":"Question created successfully")}m(null),f({kind:"string",points:10,is_active:!0,title:"",tags:[]}),await A()}catch(t){Ga.error(t.message||"Failed to save question")}finally{i(!1)}}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx($n,{className:"w-4 h-4 inline mr-2"}),u?"Update":"Create"," Question"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:X.jsx("h3",{className:"text-lg font-semibold",children:"Current Questions"})}),X.jsx("div",{className:"divide-y divide-neutral-200",children:c.map(e=>{let t="No question text",n="";try{const r="string"==typeof e.choices?JSON.parse(e.choices):e.choices;t=(null==r?void 0:r.question)||t;const s="string"==typeof e.correct?JSON.parse(e.correct):e.correct;n="mcq"===e.kind?`Option ${(null==s?void 0:s.index)+1}`:String((null==s?void 0:s.value)||"")}catch(tj){}return X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-start",children:[X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"font-medium text-neutral-900",dangerouslySetInnerHTML:{__html:iw(t)}}),X.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-neutral-600",children:[X.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded",children:e.kind}),e.title&&X.jsxs("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-800 rounded",children:["Title: ",e.title]}),Array.isArray(e.tags)&&e.tags.length>0&&X.jsxs(X.Fragment,{children:[X.jsx("span",{className:"text-neutral-500",children:"Tags:"}),e.tags.map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-800 rounded",children:e},t))]}),X.jsxs("span",{children:[e.points||10," points"]}),X.jsxs("span",{children:["Answer: ",n]}),X.jsx("span",{className:e.is_active?"text-green-600":"text-red-600",children:e.is_active?"Active":"Inactive"})]}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-neutral-500",children:[X.jsxs("span",{children:["Release: ",ot(new Date(e.release_at),"MMM dd, yyyy HH:mm")]}),e.close_at&&X.jsxs("span",{children:["Close: ",ot(new Date(e.close_at),"MMM dd, yyyy HH:mm")]})]})]}),X.jsxs("div",{className:"flex space-x-2 ml-4",children:[X.jsx("button",{onClick:()=>{var t;m(e);try{const n="string"==typeof e.choices?JSON.parse(e.choices):e.choices,r="string"==typeof e.correct?JSON.parse(e.correct):e.correct;let s={...e,question_text:(null==n?void 0:n.question)||"",title:e.title||"",tags:Array.isArray(e.tags)?e.tags:[],kind:e.kind,points:e.points||10,is_active:e.is_active,release_at:e.release_at?new Date(e.release_at).toISOString().slice(0,16):"",close_at:e.close_at?new Date(e.close_at).toISOString().slice(0,16):""};"mcq"===e.kind?(s.choices=(null==(t=null==n?void 0:n.options)?void 0:t.map(e=>e.label))||[],s.correct_answer=String((null==r?void 0:r.index)||0)):(e.kind,s.correct_answer=String((null==r?void 0:r.value)||"")),f(s)}catch(tj){f({...e,question_text:"",title:e.title||"",tags:Array.isArray(e.tags)?e.tags:[],correct_answer:"",choices:[]})}},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(Qn,{className:"w-4 h-4"})}),X.jsx("button",{onClick:()=>(async e=>{var t;if(confirm("Are you sure you want to delete this question?")){i(!0);try{const{data:n}=await ei.auth.getSession(),r=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_hti_questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==n?void 0:n.session)?void 0:t.access_token}`},body:JSON.stringify({action:"delete",data:{id:e}})}),s=await r.json();if(!r.ok||!s.success)throw new Error(s.error||"Failed to delete question");Ga.success("Question deleted"),d(c.filter(t=>t.id!==e))}catch(n){Ga.error(n.message||"Failed to delete question")}finally{i(!1)}}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:X.jsx(Jn,{className:"w-4 h-4"})})]})]})},e.id)})})]})]}),"users"===r&&X.jsx(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Administration"}),X.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"List confirmed users and permanently wipe a user (all associated data)  use with caution."}),X.jsx(vw,{})]})}),"adx"===r&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Admin Operations"}),X.jsxs("div",{className:"flex gap-3 flex-wrap",children:[X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ei.auth.getSession(),n=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/expire-positions",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`}}),r=await n.text();if(!n.ok)throw new Error(r||"Failed");Ga.success("Expire Positions job triggered")}catch(tj){Ga.error((null==tj?void 0:tj.message)||"Failed to trigger expire")}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Expire Past-Due Positions"}),X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ei.auth.getSession(),n=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/run-auction",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({slot:"open"})}),r=await n.text();if(!n.ok)throw new Error(r||"Failed");Ga.success("Open auction triggered")}catch(tj){Ga.error((null==tj?void 0:tj.message)||"Failed to run open auction")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Run Open Auction Now"}),X.jsx("button",{onClick:async()=>{var e;try{const{data:t}=await ei.auth.getSession(),n=await fetch("https://fsqds-production.yadavkartik-arbeit.workers.dev/api/admin/run-auction",{method:"POST",headers:{Authorization:`Bearer ${null==(e=null==t?void 0:t.session)?void 0:e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({slot:"close"})}),r=await n.text();if(!n.ok)throw new Error(r||"Failed");Ga.success("Close auction triggered")}catch(tj){Ga.error((null==tj?void 0:tj.message)||"Failed to run close auction")}},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Run Close Auction Now"})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:v?"Edit Ticker":"Add New Ticker"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Symbol"}),X.jsx("input",{type:"text",value:y.symbol||"",onChange:e=>b({...y,symbol:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Company Name"}),X.jsx("input",{type:"text",value:y.name||"",onChange:e=>b({...y,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP SE"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Exchange"}),X.jsx("input",{type:"text",value:y.exchange||"",onChange:e=>b({...y,exchange:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., DE, FR"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"US ADR Symbol"}),X.jsx("input",{type:"text",value:y.us_adr_symbol||"",onChange:e=>b({...y,us_adr_symbol:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., SAP (for US listing)"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Logo URL (optional)"}),X.jsx("input",{type:"text",value:y.logo_url||"",onChange:e=>b({...y,logo_url:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"https://..."})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",id:"ticker_active",checked:y.is_active||!1,onChange:e=>b({...y,is_active:e.target.checked}),className:"mr-2"}),X.jsx("label",{htmlFor:"ticker_active",className:"text-sm font-medium text-neutral-700",children:"Active"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[v&&X.jsx("button",{onClick:()=>{x(null),b({band:"top",is_active:!0})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{var e;if(o){i(!0);try{const t={...y,season_id:o.id},{data:n}=await ei.auth.getSession(),r=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==n?void 0:n.session)?void 0:e.access_token}`},body:JSON.stringify({action:v?"update":"create",data:v?{...t,id:v.id}:t})}),s=await r.json();if(!r.ok||!s.success)throw new Error(s.error||"Failed to save ticker");Ga.success(v?"Ticker updated successfully":"Ticker created successfully"),x(null),b({is_active:!0}),await C()}catch(t){Ga.error(t.message||"Failed to save ticker")}finally{i(!1)}}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx($n,{className:"w-4 h-4 inline mr-2"}),v?"Update":"Create"," Ticker"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsxs("div",{className:"px-6 py-4 border-b border-neutral-200",children:[X.jsx("h3",{className:"text-lg font-semibold",children:"Current Tickers"}),X.jsxs("div",{className:"flex space-x-4 mt-2 text-sm",children:[X.jsxs("span",{className:"text-neutral-600",children:["Active: ",p.filter(e=>e.is_active).length]}),X.jsxs("span",{className:"text-neutral-600",children:["Total: ",p.length]})]})]}),X.jsx("div",{className:"divide-y divide-neutral-200",children:p.map(e=>X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium text-neutral-900",children:e.symbol}),X.jsx("span",{className:"ml-2 text-neutral-600",children:e.name}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.exchange&&X.jsxs("span",{className:"text-xs text-neutral-500",children:["Exch: ",e.exchange]}),e.us_adr_symbol&&X.jsxs("span",{className:"text-xs text-neutral-500",children:["US ADR: ",e.us_adr_symbol]}),e.logo_url&&X.jsxs("span",{className:"text-xs text-neutral-500 truncate max-w-[240px]",children:["Logo: ",e.logo_url]}),X.jsx("span",{className:"text-xs "+(e.is_active?"text-green-600":"text-red-600"),children:e.is_active?"Active":"Inactive"})]})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("button",{onClick:()=>{x(e),b({id:e.id,symbol:e.symbol,name:e.name,is_active:e.is_active,us_adr_symbol:e.us_adr_symbol,exchange:e.exchange,logo_url:e.logo_url||""})},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(Qn,{className:"w-4 h-4"})}),X.jsx("button",{onClick:()=>(async e=>{var t;if(confirm("Are you sure you want to delete this ticker?")){i(!0);try{const{data:n}=await ei.auth.getSession(),r=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/admin_adx_tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==n?void 0:n.session)?void 0:t.access_token}`},body:JSON.stringify({action:"delete",data:{id:e}})}),s=await r.json();if(!r.ok||!s.success)throw new Error(s.error||"Failed to delete ticker");Ga.success("Ticker deleted"),g(p.filter(t=>t.id!==e))}catch(n){Ga.error(n.message||"Failed to delete ticker")}finally{i(!1)}}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:X.jsx(Jn,{className:"w-4 h-4"})})]})]})},e.id))})]})]}),"revenue"===r&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Season"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items:end",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Select Season"}),X.jsxs("select",{value:(null==o?void 0:o.id)||"",onChange:e=>{const t=S.find(t=>t.id===e.target.value)||null;l(t)},className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[0===S.length&&X.jsx("option",{value:"",children:"No seasons"}),S.map(e=>X.jsxs("option",{value:e.id,children:[e.name," - ",e.status]},e.id))]})]}),X.jsx("div",{className:"md:col-span-2 text-sm text-neutral-600",children:"Enter realized revenues (in billions) for each ticker in the selected season. Changes are unlocked and can be saved anytime."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Record Actual Revenues"}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(e=>X.jsxs("div",{className:"p-3 border rounded-md",children:[X.jsxs("div",{className:"text-sm font-medium mb-1",children:[e.symbol," ",X.jsx("span",{className:"text-neutral-500",children:e.name})]}),X.jsx("input",{type:"number",step:"0.01",placeholder:"Revenue (B)",value:N[e.symbol]||"",onChange:t=>k(n=>({...n,[e.symbol]:t.target.value})),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"}),X.jsx("div",{className:"flex justify-end mt-2",children:X.jsx("button",{onClick:async()=>{var t;if(!o)return void Ga.error("Select a season");const n=N[e.symbol];if(""===n||isNaN(Number(n)))Ga.error("Enter a valid number");else try{const{data:r}=await ei.auth.getSession(),s=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/record_revenue_actuals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(t=null==r?void 0:r.session)?void 0:t.access_token}`},body:JSON.stringify({seasonId:o.id,items:[{symbol:e.symbol,actual_value:Number(n)}]})}),a=await s.json();s.ok&&a.ok?Ga.success(`Recorded for ${e.symbol}`):Ga.error(a.error||"Failed to record")}catch(tj){Ga.error("Failed to record")}},className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})})]},e.id))}),X.jsx("div",{className:"flex justify-end mt-4",children:X.jsx("button",{onClick:async()=>{var e;if(!o)return void Ga.error("Select a season");const t=Object.entries(N).filter(([,e])=>""!==e&&!isNaN(Number(e))).map(([e,t])=>({symbol:e,actual_value:Number(t)}));if(0!==t.length)try{const{data:n}=await ei.auth.getSession(),r=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/record_revenue_actuals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=null==n?void 0:n.session)?void 0:e.access_token}`},body:JSON.stringify({seasonId:o.id,items:t})}),s=await r.json();r.ok&&s.ok?Ga.success("Actual revenues recorded. Season MSE calculation triggered."):Ga.error(s.error||"Failed to record actuals")}catch(tj){Ga.error("Failed to record actuals")}else Ga.error("Enter at least one actual")},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Save Actuals for Season"})})]})]}),"badges"===r&&X.jsx(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Award Badges by Leaderboard"}),X.jsx(gw,{activeSeason:o})]})}),"seasons"===r&&X.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Season Management"}),X.jsxs("div",{className:"space-y-4",children:[X.jsxs("button",{onClick:async()=>{var e;if(o&&"active"===o.status){if(confirm("Are you sure you want to settle the current season? This will mark winners and reset for the next season."))try{const t=await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/season_rollover",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=(await ei.auth.getSession()).data.session)?void 0:e.access_token}`},body:JSON.stringify({seasonId:o.id})}),n=await t.json();if(n.ok){Ga.success("Season settled successfully!");const{data:e}=await ei.from("seasons").select("*").order("starts_at",{ascending:!1});if(e){_(e);const t=e.find(e=>"active"===e.status);t&&l(t)}}else Ga.error(n.error||"Failed to settle season")}catch(t){Ga.error("Failed to settle season")}}else Ga.error("No active season to settle")},className:"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",disabled:!o||"active"!==o.status,children:[X.jsx(Gn,{className:"w-5 h-5 inline mr-2"}),"Settle Current Season & Start New"]}),X.jsx("p",{className:"text-sm text-neutral-600",children:"This will mark winners, award badges, and prepare the next season."})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[X.jsx("h3",{className:"text-lg font-semibold mb-4",children:E?"Edit Season":"Create New Season"}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Season Name"}),X.jsx("input",{type:"text",value:T.name||"",onChange:e=>M({...T,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., Winter 2024"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Status"}),X.jsxs("select",{value:T.status||"upcoming",onChange:e=>M({...T,status:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",children:[X.jsx("option",{value:"upcoming",children:"Upcoming"}),X.jsx("option",{value:"active",children:"Active"}),X.jsx("option",{value:"settling",children:"Settling"}),X.jsx("option",{value:"closed",children:"Closed"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Season Code"}),X.jsx("input",{type:"text",value:T.code||"",onChange:e=>M({...T,code:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]",placeholder:"e.g., WINTER_2024"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Start Date"}),X.jsx("input",{type:"date",value:T.starts_at||"",onChange:e=>M({...T,starts_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"End Date"}),X.jsx("input",{type:"date",value:T.ends_at||"",onChange:e=>M({...T,ends_at:e.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0B3D91]"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[E&&X.jsx("button",{onClick:()=>{D(null),M({status:"upcoming"})},className:"px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors",children:"Cancel"}),X.jsxs("button",{onClick:async()=>{try{const e=e=>{const t=(e.code||e.name||"").trim().toUpperCase();return t?t.replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,""):""},t={name:T.name,code:e(T),starts_at:T.starts_at,ends_at:T.ends_at,status:T.status||"upcoming"};if(!(t.name&&t.code&&t.starts_at&&t.ends_at))return void Ga.error("Please provide name, code, start and end dates");if(E){const{error:e}=await ei.from("seasons").update(t).eq("id",E.id);if(e){if(e)throw new Error(e.message)}else Ga.success("Season updated successfully"),D(null)}else{const{error:e}=await ei.from("seasons").insert(t);if(e){if(e)throw new Error(e.message)}else Ga.success("Season created successfully"),M({status:"upcoming"})}const{data:n}=await ei.from("seasons").select("*").order("starts_at",{ascending:!1});n&&_(n)}catch(e){Ga.error((null==e?void 0:e.message)||"Failed to save season")}},className:"px-4 py-2 bg-[#0B3D91] text-white rounded-md hover:bg-[#082D69] transition-colors",children:[X.jsx($n,{className:"w-4 h-4 inline mr-2"}),E?"Update":"Create"," Season"]})]})]}),X.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[X.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:X.jsx("h3",{className:"text-lg font-semibold",children:"All Seasons"})}),X.jsx("div",{className:"divide-y divide-neutral-200",children:S.map(e=>X.jsx("div",{className:"p-4 hover:bg-neutral-50",children:X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium text-neutral-900",children:e.name}),X.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[X.jsx("span",{className:"px-2 py-1 rounded text-xs "+("active"===e.status?"bg-green-100 text-green-800":"upcoming"===e.status?"bg-blue-100 text-blue-800":"settling"===e.status?"bg-yellow-100 text-yellow-800":"bg-neutral-100 text-neutral-800"),children:e.status}),X.jsx("span",{className:"text-xs text-neutral-500",children:e.starts_at&&e.ends_at?`${ot(new Date(e.starts_at),"MMM dd, yyyy")} - ${ot(new Date(e.ends_at),"MMM dd, yyyy")}`:"No dates set"})]})]}),X.jsx("button",{onClick:()=>{D(e),M(e)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:X.jsx(Qn,{className:"w-4 h-4"})})]})},e.id))})]})]})]})})]})}const yw=()=>{const[,e]=Wr(),[t,n]=Je.useState(null),[r,s]=Je.useState(!1),[a,i]=Je.useState(!0);Je.useEffect(()=>{(async()=>{const{data:{user:t}}=await ei.auth.getUser();if(!t)return Ga.error("Please sign in to access the admin panel"),void e("/leaderboard");n(t);const{data:r}=await ei.from("user_profiles").select("is_admin").eq("user_id",t.id).single();if(!(null==r?void 0:r.is_admin))return Ga.error("Access denied: Admin privileges required"),void e("/");s(!0),i(!1)})()},[e]);return a?X.jsx("div",{className:"min-h-screen flex items-center justify-center",children:X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B3D91]"})}):r?X.jsx(xw,{user:t,onLogout:async()=>{await ei.auth.signOut(),e("/")}}):null};function bw(e){var t;if(e instanceof dt)return{code:"NETWORK_ERROR",retryable:!0,status:503,messageKey:"auth.networkError"};if(e instanceof ut)return{code:"INVALID_CREDENTIALS",retryable:!1,status:400,messageKey:"auth.invalidCredentials"};if(e instanceof mt)return{code:"WEAK_PASSWORD",retryable:!1,status:422,messageKey:"auth.weakPassword"};if(e instanceof ht)return{code:"SESSION_EXPIRED",retryable:!0,status:401,messageKey:"auth.sessionExpired"};if(e instanceof ft){if(429===e.status)return{code:"RATE_LIMITED",retryable:!0,status:429,messageKey:"auth.rateLimited"};if(401===e.status)return"string"==typeof e.message&&/confirm(ed)?/i.test(e.message)?{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"}:{code:"INVALID_CREDENTIALS",retryable:!1,status:401,messageKey:"auth.invalidCredentials"};if(400===e.status||422===e.status){const t=String(e.message||"").toLowerCase();return t.includes("weak password")?{code:"WEAK_PASSWORD",retryable:!1,status:e.status,messageKey:"auth.weakPassword"}:t.includes("captcha")?{code:"CAPTCHA_FAILED",retryable:!0,status:e.status,messageKey:"auth.captchaFailed"}:t.includes("invalid")&&t.includes("domain")?{code:"INVALID_DOMAIN",retryable:!1,status:e.status,messageKey:"auth.invalidDomain"}:t.includes("invalid")&&(t.includes("login")||t.includes("credentials")||t.includes("email")||t.includes("password"))?{code:"INVALID_CREDENTIALS",retryable:!1,status:e.status,messageKey:"auth.invalidCredentials"}:{code:"UNKNOWN_ERROR",retryable:!1,status:e.status,messageKey:"auth.unexpectedError"}}}const n=e;switch(null==(t=null==n?void 0:n.code)?void 0:t.toUpperCase()){case"INVALID_DOMAIN":return{code:"INVALID_DOMAIN",retryable:!1,status:400,messageKey:"auth.invalidDomain"};case"CAPTCHA_FAILED":return{code:"CAPTCHA_FAILED",retryable:!0,status:400,messageKey:"auth.captchaFailed"};case"USER_EXISTS":return{code:"USER_EXISTS",retryable:!1,status:409,messageKey:"auth.userExists"};case"EMAIL_NOT_CONFIRMED":return{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"};case"RATE_LIMITED":return{code:"RATE_LIMITED",retryable:!0,status:429,messageKey:"auth.rateLimited"};case"SESSION_EXPIRED":return{code:"SESSION_EXPIRED",retryable:!0,status:401,messageKey:"auth.sessionExpired"}}const r=String((null==n?void 0:n.message)||"").toLowerCase();return r.includes("confirm")?{code:"EMAIL_NOT_CONFIRMED",retryable:!1,status:401,messageKey:"auth.emailNotConfirmed"}:r.includes("already registered")||r.includes("exists")?{code:"USER_EXISTS",retryable:!1,status:409,messageKey:"auth.userExists"}:r.includes("network")||r.includes("fetch")?{code:"NETWORK_ERROR",retryable:!0,status:503,messageKey:"auth.networkError"}:{code:"UNKNOWN_ERROR",retryable:!1,status:400,messageKey:"auth.unexpectedError"}}function ww(e){switch(e.code){case"INVALID_CREDENTIALS":return"Invalid email or password";case"EMAIL_NOT_CONFIRMED":return"Please verify your email before signing in";case"USER_EXISTS":return"An account with this email already exists. Please sign in.";case"INVALID_DOMAIN":return"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed";case"WEAK_PASSWORD":return"Password is too weak";case"RATE_LIMITED":return"Too many attempts. Please wait and try again";case"NETWORK_ERROR":return"Network error. Please check your connection";case"SESSION_EXPIRED":return"Your session has expired. Please sign in again";case"CAPTCHA_FAILED":return"Verification failed. Please try again.";default:return"An error occurred"}}const jw=Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card",className:Pa("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t}));jw.displayName="Card";const Nw=Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-header",className:Pa("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t}));Nw.displayName="CardHeader";const kw=Je.forwardRef(({className:e,...t},n)=>X.jsx("h4",{ref:n,"data-slot":"card-title",className:Pa("leading-none",e),...t}));kw.displayName="CardTitle";const Sw=Je.forwardRef(({className:e,...t},n)=>X.jsx("p",{ref:n,"data-slot":"card-description",className:Pa("text-muted-foreground",e),...t}));Sw.displayName="CardDescription";Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-action",className:Pa("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...t})).displayName="CardAction";const _w=Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-content",className:Pa("px-6 [&:last-child]:pb-6",e),...t}));_w.displayName="CardContent";Je.forwardRef(({className:e,...t},n)=>X.jsx("div",{ref:n,"data-slot":"card-footer",className:Pa("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})).displayName="CardFooter";const Ew=Je.forwardRef(({className:e,type:t,...n},r)=>X.jsx("input",{type:t,className:Pa("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ew.displayName="Input";const Dw=Je.forwardRef(({className:e,...t},n)=>X.jsx(be,{ref:n,className:Pa("flex flex-col gap-2",e),...t}));Dw.displayName=be.displayName;const Tw=Je.forwardRef(({className:e,...t},n)=>X.jsx(we,{ref:n,className:Pa("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t}));Tw.displayName=we.displayName;const Mw=Je.forwardRef(({className:e,...t},n)=>X.jsx(je,{ref:n,className:Pa("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t}));Mw.displayName=je.displayName;const Aw=Je.forwardRef(({className:e,...t},n)=>X.jsx(Ne,{ref:n,className:Pa("flex-1 outline-none",e),...t}));async function Cw(e){try{const{error:t}=await ei.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/set-password`});if(t)throw t;return{ok:!0}}catch(t){return{ok:!1,error:bw(t)}}}function Ow(){const{signIn:e,signUp:t}=li(),{t:n}=ai(),[,r]=Wr(),[s,a]=Je.useState(!1),[i,o]=Je.useState(null),[l,c]=Je.useState(!1),[d,u]=Je.useState(""),[m,h]=Je.useState(""),[f,p]=Je.useState(""),[g,v]=Je.useState(""),[x,y]=Je.useState(""),[b,w]=Je.useState("");return X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:X.jsxs("div",{className:"max-w-md w-full space-y-8",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:n("welcomeToDataScienceFrontier")}),X.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:n("signInOrCreateAccount")})]}),X.jsx(jw,{className:"mt-8",children:X.jsxs(Dw,{defaultValue:"signin",className:"w-full",children:[X.jsxs(Tw,{className:"grid w-full grid-cols-2",children:[X.jsx(Mw,{value:"signin",children:n("signIn")}),X.jsx(Mw,{value:"signup",children:n("signUp")})]}),X.jsxs(Aw,{value:"signin",children:[X.jsxs(Nw,{children:[X.jsx(kw,{children:n("signIn")}),X.jsx(Sw,{children:n("signInDescription")})]}),X.jsx(_w,{children:X.jsxs("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{o(null);const{error:t}=await e(d,m);if(t){const e=ww(bw(t));o(e),Ga.error(e)}else Ga.success(n("loginSuccess")),r("/battleground")}catch(s){o(n("error")),Ga.error(n("error"))}finally{a(!1)}},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"signin-email",children:n("email")}),X.jsx(Ew,{id:"signin-email",type:"email",placeholder:"name@example.com",value:d,onChange:e=>u(e.target.value),required:!0,disabled:s})]}),X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"signin-password",children:n("password")}),X.jsx(Ew,{id:"signin-password",type:"password",value:m,onChange:e=>h(e.target.value),required:!0,disabled:s}),i&&X.jsx("div",{className:"mt-2 text-sm text-red-600",children:i})]}),X.jsx("div",{className:"flex items-center justify-between",children:X.jsx(wi,{type:"submit",className:"w-full",disabled:s,children:n(s?"loading":"signIn")})}),X.jsx("div",{className:"mt-3 text-right",children:X.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",disabled:l,onClick:async()=>{if(d){c(!0);try{(await Cw(d)).ok?Ga.success(n("passwordResetEmailSent")):Ga.error(n("auth.unexpectedError"))}finally{c(!1)}}else Ga.error(n("pleaseEnterEmail"))},children:n(l?"sending":"forgotPassword")})})]})})]}),X.jsxs(Aw,{value:"signup",children:[X.jsxs(Nw,{children:[X.jsx(kw,{children:n("signUp")}),X.jsx(Sw,{children:n("signUpDescription")})]}),X.jsx(_w,{children:X.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g===b)if(g.length<6)Ga.error(n("passwordTooShort"));else{a(!0);try{const{error:e}=await t(f,g,x);e?Ga.error(e.message||n("signupError")):(Ga.success(n("signupSuccess")),r("/battleground"))}catch(s){Ga.error(n("error"))}finally{a(!1)}}else Ga.error(n("passwordsMustMatch"))},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"signup-username",children:n("username")}),X.jsx(Ew,{id:"signup-username",type:"text",placeholder:"johndoe",value:x,onChange:e=>y(e.target.value),required:!0,disabled:s})]}),X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"signup-email",children:n("email")}),X.jsx(Ew,{id:"signup-email",type:"email",placeholder:"name@example.com",value:f,onChange:e=>p(e.target.value),required:!0,disabled:s})]}),X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"signup-password",children:n("password")}),X.jsx(Ew,{id:"signup-password",type:"password",value:g,onChange:e=>v(e.target.value),required:!0,disabled:s,minLength:6})]}),X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"confirm-password",children:n("confirmPassword")}),X.jsx(Ew,{id:"confirm-password",type:"password",value:b,onChange:e=>w(e.target.value),required:!0,disabled:s,minLength:6})]}),X.jsx(wi,{type:"submit",className:"w-full",disabled:s,children:n(s?"loading":"signUp")})]})})]})]})})]})})}function Pw(){return X.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-neutral-900",children:X.jsx(jw,{className:"w-full max-w-md mx-4 bg-neutral-800 border-neutral-700",children:X.jsxs(_w,{className:"pt-6",children:[X.jsxs("div",{className:"flex mb-4 gap-2 items-center",children:[X.jsx(Cn,{className:"h-10 w-10 text-red-500"}),X.jsx("h1",{className:"text-2xl font-bold text-neutral-300",children:"404 Page Not Found"})]}),X.jsx("p",{className:"mt-4 text-neutral-500 mb-6",children:"The page you are looking for might have been removed, had its name changed, or is temporarily unavailable."}),X.jsx(Gr,{to:"/",children:X.jsxs(wi,{className:"w-full bg-[#0B3D91] hover:bg-[#092E6E] text-neutral-300",children:[X.jsx("i",{className:"fas fa-home mr-2"}),"Back to Home"]})})]})})})}function Rw(){const[e,t]=Wr(),n=Je.useMemo(()=>new URLSearchParams(window.location.search),[]),[r,s]=Je.useState(!0),[a,i]=Je.useState(!1),[o,l]=Je.useState(null),[c,d]=Je.useState(""),[u,m]=Je.useState(""),[h,f]=Je.useState(!1);Je.useEffect(()=>{(async()=>{try{const e=n.get("token_hash")||n.get("token")||"",t=n.get("type")||"signup",r=n.get("email")||void 0;if(!e)return l("Missing token"),void s(!1);const a=[()=>ei.auth.verifyOtp({type:t,token_hash:e,email:r}),()=>ei.auth.verifyOtp({type:t,token:e,email:r}),()=>ei.auth.verifyOtp({type:"email",token_hash:e,email:r}),()=>ei.auth.verifyOtp({type:"email",token:e,email:r})];let o=!1,c=null;for(const n of a)try{const{data:e,error:t}=await n();if(t)throw t;o=!0;break}catch(tj){c=tj}if(!o)return l("Verification failed. Your link may have expired."),void s(!1);i(!0),s(!1),Ga.success("Email confirmed. Please set your password.")}catch(tj){l("Unexpected error during verification."),s(!1)}})()},[]);return X.jsx("section",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:X.jsxs("div",{className:"w-full max-w-md bg-white border border-neutral-200 rounded-lg shadow p-6",children:[X.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 mb-2",children:"Account Confirmation"}),r&&X.jsx("p",{className:"text-neutral-600",children:"Verifying your email, please wait"}),!r&&o&&X.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded p-3",children:o}),!r&&a&&X.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.length<6)Ga.error("Password must be at least 6 characters");else if(c===u){f(!0);try{const{error:e}=await ei.auth.updateUser({password:c,data:{needs_password_reset:!1}});if(e)throw e;Ga.success("Password set successfully!"),setTimeout(()=>t("/battleground"),400)}catch(n){Ga.error("Failed to set password. Please try again.")}finally{f(!1)}}else Ga.error("Passwords do not match")},className:"space-y-4 mt-4",children:[X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"password",children:"Set Password"}),X.jsx(Ew,{id:"password",type:"password",value:c,onChange:e=>d(e.target.value),minLength:6,required:!0})]}),X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"confirm",children:"Confirm Password"}),X.jsx(Ew,{id:"confirm",type:"password",value:u,onChange:e=>m(e.target.value),minLength:6,required:!0})]}),X.jsx(wi,{type:"submit",disabled:h,children:h?"Saving":"Save Password"})]})]})})}function Iw(){const[e,t]=Je.useState(""),[n,r]=Je.useState(""),[s,a]=Je.useState(!1),[i,o]=Je.useState(!1);Je.useEffect(()=>{let e=!0;const t=async()=>{try{const e=(()=>{let e="";const t=window.location.hash||"",n=t.indexOf("?");if(n>=0)e=t.slice(n+1);else{const n=t.lastIndexOf("#");n>0&&(e=t.slice(n+1))}return e||(e=window.location.search.replace(/^\?/,"")),new URLSearchParams(e)})(),t=(e.get("type"),e.get("token")||e.get("token_hash")||""),n=e.get("email")||void 0,r=e.get("access_token")||"",s=e.get("refresh_token")||"";if(r&&s)try{return void(await ei.auth.setSession({access_token:r,refresh_token:s}))}catch{}if(!t)return;const a=[()=>ei.auth.verifyOtp({type:"recovery",token_hash:t,email:n}),()=>ei.auth.verifyOtp({type:"recovery",token:t,email:n}),()=>ei.auth.verifyOtp({type:"recovery",token_hash:t}),()=>ei.auth.verifyOtp({type:"recovery",token:t})];for(const i of a)try{const{error:e}=await i();if(!e)break}catch{}}catch{}};(async()=>{await t();const{data:n}=await ei.auth.getSession();e&&o(!!n.session)})();const{data:n}=ei.auth.onAuthStateChange((t,n)=>{e&&o(!!n)});return()=>{e=!1,n.subscription.unsubscribe()}},[]);return X.jsx("section",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:X.jsxs("div",{className:"w-full max-w-md bg-white border border-neutral-200 rounded-lg shadow p-6",children:[X.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 mb-2",children:"Set Password"}),i?X.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 rounded p-3 mb-3",children:"Youre signed in. Please set your new password."}):X.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded p-3 mb-3",children:"It looks like you are not signed in. If you came here from an email link and still see this, please open the link again."}),X.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.length<6)Ga.error("Password must be at least 6 characters");else if(e===n){a(!0);try{const{error:t}=await ei.auth.updateUser({password:e,data:{needs_password_reset:!1}});if(t)throw t;Ga.success("Password updated!"),setTimeout(()=>{window.location.hash="/battleground"},400)}catch(r){Ga.error("Failed to update password. Please try again.")}finally{a(!1)}}else Ga.error("Passwords do not match")},className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"password",className:"text-neutral-800",children:"New Password"}),X.jsx(Ew,{id:"password",type:"password",className:"bg-white text-neutral-900 border-neutral-300",value:e,onChange:e=>t(e.target.value),minLength:6,required:!0})]}),X.jsxs("div",{children:[X.jsx(Mx,{htmlFor:"confirm",className:"text-neutral-800",children:"Confirm Password"}),X.jsx(Ew,{id:"confirm",type:"password",className:"bg-white text-neutral-900 border-neutral-300",value:n,onChange:e=>r(e.target.value),minLength:6,required:!0})]}),X.jsx(wi,{type:"submit",disabled:s||!i,className:"bg-[#0B3D91] hover:bg-[#082D69]",children:s?"Saving":"Save Password"})]})]})})}function Lw(){const{language:e,setLanguage:t}=ai();return X.jsxs("div",{className:"relative inline-flex items-center bg-gray-100 rounded-full p-0.5",children:[X.jsxs(cn,{initial:!1,children:["de"===e&&X.jsx(dn.div,{layoutId:"lang-bg",className:"absolute left-0.5 w-[calc(50%-2px)] h-[calc(100%-4px)] bg-[#0B3D91] rounded-full",initial:!1,transition:{type:"spring",stiffness:400,damping:30}},"de-bg"),"en"===e&&X.jsx(dn.div,{layoutId:"lang-bg",className:"absolute right-0.5 w-[calc(50%-2px)] h-[calc(100%-4px)] bg-[#0B3D91] rounded-full",initial:!1,transition:{type:"spring",stiffness:400,damping:30}},"en-bg")]}),X.jsx("button",{onClick:()=>t("de"),className:"relative z-10 px-3 py-1 text-sm font-medium transition-colors duration-200 rounded-full "+("de"===e?"text-white":"text-neutral-600 hover:text-neutral-900"),children:"DE"}),X.jsx("button",{onClick:()=>t("en"),className:"relative z-10 px-3 py-1 text-sm font-medium transition-colors duration-200 rounded-full "+("en"===e?"text-white":"text-neutral-600 hover:text-neutral-900"),children:"EN"})]})}Aw.displayName=Ne.displayName;const Fw=(e,t,n)=>{if(e&&"reportValidity"in e){const r=un(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},zw=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Fw(r.ref,n,e):r.refs&&r.refs.forEach(t=>Fw(t,n,e))}},Uw=(e,t)=>{t.shouldUseNativeValidation&&zw(e,t);const n={};for(const r in e){const s=un(t.fields,r),a=Object.assign(e[r]||{},{ref:s&&s.ref});if(Bw(t.names||Object.keys(e),r)){const e=Object.assign({},un(n,r));mn(e,"root",a),mn(n,r,e)}else mn(n,r,a)}return n},Bw=(e,t)=>e.some(e=>e.startsWith(t+"."));var qw=function(e,t){for(var n={};e.length;){var r=e[0],s=r.code,a=r.message,i=r.path.join(".");if(!n[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=hn(i,t,n,s,c?[].concat(c,r.message):r.message)}e.shift()}return n},Ww=function(e,t,n){return void 0===n&&(n={}),function(r,s,a){try{return Promise.resolve(function(s,i){try{var o=Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](r,t)).then(function(e){return a.shouldUseNativeValidation&&zw({},a),{errors:{},values:n.raw?r:e}})}catch(l){return i(l)}return o&&o.then?o.then(void 0,i):o}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:Uw(qw(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(i){return Promise.reject(i)}}};const Yw={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CACHE_BASE:"https://fsqds-production.yadavkartik-arbeit.workers.dev",VITE_DISABLE_REALTIME:"true",VITE_MARKET_DEFAULT_PAUSED:"true",VITE_MARKET_POLL_MS:"180000",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo",VITE_SUPABASE_URL:"https://mskpxebbscvisxcceiwx.supabase.co",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAABrWQXwBLHZk3OrF",VITE_USE_WORKER_MARKET_API:"true",VITE_USE_WORKER_WRITES:"false"},Hw=fn.object({email:fn.string().email().refine(e=>e.endsWith("@fs-students.de")||e.endsWith("@fs.de"),{message:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed"}),password:fn.string().min(6,"Password must be at least 6 characters")}),Vw=fn.object({email:fn.string().email().refine(e=>e.endsWith("@fs-students.de")||e.endsWith("@fs.de"),{message:"Only Frankfurt School email addresses (@fs-students.de or @fs.de) are allowed"}),password:fn.string().min(6,"Password must be at least 6 characters")}),$w="true"===(null==(q=null==(U=null==(z=null==Yw?void 0:Yw.VITE_DISABLE_SIGNUP)?void 0:z.toString)?void 0:(B=U.call(z)).toLowerCase)?void 0:q.call(B));function Gw({isOpen:e,onClose:t}){const[,n]=Wr(),{t:r}=ai(),[s,a]=Je.useState(()=>"signup"===localStorage.getItem("authMode")?"signup":"signin"),[i,o]=Je.useState(!1),[l,c]=Je.useState(null),[d,u]=Je.useState(null),[m,h]=Je.useState(0),[f,p]=Je.useState(""),[g,v]=Je.useState(!1);Je.useState(!1);const[x,y]=Je.useState(null),b=pn({resolver:Ww(Hw)}),w=pn({resolver:Ww(Vw)});Je.useEffect(()=>{if(e){const e="signup"===localStorage.getItem("authMode")?"signup":"signin";a($w&&"signup"===e?"signin":e),u(null),h(e=>e+1)}},[e]);return e?X.jsx(cn,{children:e&&X.jsxs(X.Fragment,{children:[X.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:t}),X.jsx(dn.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:X.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-neutral-200 overflow-hidden w-full max-w-md",onClick:e=>e.stopPropagation(),children:[X.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 relative border-b border-neutral-200",children:[X.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-neutral-500 hover:text-neutral-700 transition-colors",children:X.jsx(or,{className:"w-6 h-6"})}),X.jsx("h2",{className:"text-2xl font-inter font-bold text-[#0B3D91]",children:r("signin"===s?"auth.signIn":"signup"===s?"auth.signUp":"auth.resetPassword")}),X.jsx("p",{className:"text-neutral-600 mt-1",children:r("reset"===s?"auth.resetPasswordInstructions":"auth.loginCta")})]}),X.jsx("div",{className:"p-6",children:g?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[X.jsx("h3",{className:"text-green-800 font-semibold mb-2",children:r("auth.registrationSuccessTitle")}),X.jsx("p",{className:"text-green-700 text-sm",children:r("auth.registrationSuccessBody")}),x&&X.jsxs("div",{className:"mt-3 text-sm text-green-800",children:[X.jsxs("div",{children:[X.jsx("span",{className:"font-medium",children:"Email:"})," ",x]}),X.jsx("button",{onClick:async()=>{try{if(!x)return;(await fetch("https://mskpxebbscvisxcceiwx.supabase.co/functions/v1/auth_resend_confirmation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za3B4ZWJic2N2aXN4Y2NlaXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NTM4NTksImV4cCI6MjA3MDQyOTg1OX0.QiAMNLTK6UPpsPm3Ic08I6UMuPMcuWiT6BO1lzQIqeo"},body:JSON.stringify({email:x,language:localStorage.getItem("lang")||"en"})})).ok?Ga.success(r("leaderboard.emailVerificationSent")):Ga.error(r("auth.unexpectedError"))}catch(tj){Ga.error(r("auth.unexpectedError"))}},className:"mt-2 inline-flex items-center px-3 py-1.5 rounded-md border border-green-300 text-green-800 hover:bg-green-100",children:"Resend email"})]})]}),X.jsx("button",{onClick:()=>{v(!1),a("signin")},className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200",children:r("auth.goToSignIn")})]}):"reset"===s?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{type:"email",value:f,onChange:e=>p(e.target.value),placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]})]}),X.jsx("button",{onClick:async()=>{if(f&&(f.endsWith("@fs-students.de")||f.endsWith("@fs.de"))){o(!0);try{const e=await Cw(f);if(!e.ok)return void Ga.error(r(e.error.messageKey));Ga.success(r("auth.resetEmailSent")),a("signin"),p("")}catch(e){Ga.error(r("auth.unexpectedError"))}finally{o(!1)}}else Ga.error(r("auth.invalidDomain"))},disabled:i,className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:r(i?"auth.loading":"auth.sendResetEmail")}),X.jsx("button",{onClick:()=>a("signin"),className:"w-full py-2 text-neutral-600 hover:text-neutral-800 transition-colors",children:r("auth.backToSignIn")})]}):"signin"===s?X.jsxs("form",{onSubmit:b.handleSubmit(async e=>{if(!!("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)||d){o(!0),c(null);try{const s=await async function(e,t){try{const{data:n,error:r}=await ei.auth.signInWithPassword({email:e,password:t});if(r)throw r;return{ok:!0,data:n}}catch(n){return{ok:!1,error:bw(n)}}}(e.email,e.password);if(!s.ok){const e=ww(s.error);return c(e),Ga.error(e),void s.error.code}Ga.success(r("auth.welcomeBack")),t(),n("/battleground")}catch(s){const e=bw(s);Ga.error(r(e.messageKey))}finally{o(!1)}}else Ga.error(r("auth.completeVerification"))}),className:"space-y-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...b.register("email"),type:"email",placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),b.formState.errors.email&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),b.formState.errors.email.message]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("auth.password")}),X.jsxs("div",{className:"relative",children:[X.jsx(Bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...b.register("password"),type:"password",placeholder:"",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),b.formState.errors.password&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),b.formState.errors.password.message]}),l&&X.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),l]})]}),X.jsx("div",{className:"flex justify-center my-4",children:X.jsx(Nx,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>u(e),onExpire:()=>u(null),onError:()=>{Ga.error(r("auth.captchaFailed")),u(null)},theme:"light",size:"normal"},`signin-${m}`)}),X.jsx("button",{type:"submit",disabled:i||!d,className:"w-full py-3 bg-[#0B3D91] text-white font-medium rounded-md hover:bg-[#082D69] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?X.jsxs("span",{className:"flex items-center justify-center",children:[X.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[X.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),X.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),r("auth.loading")]}):r("auth.signIn")}),X.jsxs("div",{className:"text-center space-y-2",children:[X.jsx("button",{type:"button",onClick:()=>a("reset"),className:"text-sm text-neutral-600 hover:text-[#0B3D91] transition-colors",children:r("auth.forgotPassword")}),X.jsx("div",{className:"text-sm text-neutral-600",children:$w?X.jsx("span",{children:"Registration currently disabled."}):X.jsxs(X.Fragment,{children:[r("auth.needAccount")," ",X.jsx("button",{type:"button",onClick:()=>{a("signup"),u(null),h(e=>e+1),localStorage.setItem("authMode","signup")},className:"text-[#0B3D91] hover:text-[#082D69] font-medium",children:r("auth.signUp")})]})})]})]}):X.jsxs("form",{onSubmit:w.handleSubmit(async e=>{if(!!("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)||d){o(!0);try{const t=(null==Yw?void 0:Yw.VITE_EMAIL_REDIRECT_URL)||`${window.location.origin}/#/auth-confirm`,{data:n,error:s}=await ei.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:t,data:{username:e.email.split("@")[0]}}});if(s)return void(String(s.message||"").toLowerCase().includes("already registered")?(Ga.error(r("auth.userExists")),a("signin")):Ga.error(r("auth.unexpectedError")));y(e.email),v(!0),Ga.success(r("auth.registrationSuccessTitle"))}catch(tj){Ga.error(r("auth.unexpectedError"))}finally{o(!1),u(null),h(e=>e+1)}}else Ga.error(r("auth.completeVerification"))}),className:"space-y-4","aria-disabled":$w,children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("auth.email")}),X.jsxs("div",{className:"relative",children:[X.jsx(Wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...w.register("email"),type:"email",placeholder:"your.name@fs-students.de or @fs.de",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),w.formState.errors.email&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),w.formState.errors.email.message]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("auth.password")}),X.jsxs("div",{className:"relative",children:[X.jsx(Bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),X.jsx("input",{...w.register("password"),type:"password",placeholder:"",className:"w-full pl-10 pr-3 py-2 bg-white border border-neutral-300 rounded-md text-neutral-900 placeholder-neutral-400 focus:outline-none focus:border-[#0B3D91] focus:ring-1 focus:ring-[#0B3D91] transition-colors",disabled:i})]}),w.formState.errors.password&&X.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[X.jsx(Cn,{className:"w-4 h-4 mr-1"}),w.formState.errors.password.message]})]}),X.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center gap-3",children:[X.jsx("img",{src:"https://www.frankfurt-school.de/themes/custom/fs_theme/logo.svg",alt:"Frankfurt School Logo",className:"w-10 h-10 object-contain",onError:e=>{e.currentTarget.style.display="none"}}),X.jsxs("div",{className:"text-sm text-blue-700",children:[X.jsx("div",{className:"font-semibold",children:"Exclusive to Frankfurt School students"}),X.jsx("div",{children:"Use your @fs-students.de (or @fs.de) email to register. Email confirmation is required."})]})]}),X.jsx("div",{className:"flex justify-center my-4",children:X.jsx(Nx,{sitekey:"0x4AAAAAABrWQXwBLHZk3OrF",onVerify:e=>u(e),onExpire:()=>u(null),onError:()=>{Ga.error(r("auth.captchaFailed")),u(null)},theme:"light",size:"normal"},`signup-${m}`)}),X.jsx("button",{type:"submit",disabled:$w||i,className:"w-full py-3 font-medium rounded-md transition-colors "+($w?"bg-neutral-300 text-white cursor-not-allowed":"bg-[#0B3D91] text-white hover:bg-[#082D69]"),children:i?X.jsxs("span",{className:"flex items-center justify-center",children:[X.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[X.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),X.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),r("auth.loading")]}):r("auth.signUp")}),X.jsxs("div",{className:"text-center text-sm text-neutral-600",children:[r("auth.alreadyRegistered")," ",X.jsx("button",{type:"button",onClick:()=>{a("signin"),u(null),h(e=>e+1)},className:"text-[#0B3D91] hover:text-[#082D69] font-medium",children:r("auth.signIn")})]})]})})]})})]})}):null}const Kw=({isOpen:e,onClose:t})=>{const[n,r]=Wr(),{t:s}=ai(),{user:a,isAdmin:i,signOut:o}=li(),[l,c]=Je.useState(!1),d=[{path:"/",icon:"fa-home",label:s("navigation.home")},{path:"/members",icon:"fa-users",label:s("navigation.members")},{path:"/events",icon:"fa-calendar-alt",label:s("navigation.events")},{path:"/battleground",icon:"fa-trophy",label:s("navigation.battleground")},{path:"/contact",icon:"fa-envelope",label:s("navigation.contact")}],u=i?[...d,{path:"/admin",icon:"fa-shield-alt",label:s("admin.title")}]:d,m=e=>"flex items-center px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-md transition-colors "+((e=>n===e)(e)?"bg-blue-50 text-blue-600 font-medium":"");return X.jsxs(X.Fragment,{children:[X.jsx("aside",{id:"sidebar",className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out border-r border-gray-200 "+(e?"translate-x-0":"-translate-x-full md:translate-x-0"),children:X.jsxs("div",{className:"flex flex-col h-full",children:[X.jsxs("div",{className:"relative border-b border-gray-200",children:[X.jsxs("div",{className:"absolute inset-0",children:[X.jsx("img",{src:"/bullrun.webp",alt:"Bull run",className:"w-full h-full object-cover"}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/50 via-black/30 to-black/20"})]}),X.jsx("div",{className:"relative px-4 py-6",children:X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs(Gr,{href:"/",className:"flex items-center",children:[X.jsx("img",{src:"/fs-qds-logo.png",alt:"FS Quant & Data Science",className:"h-12 w-12 md:h-14 md:w-14 mr-2 object-contain drop-shadow-sm"}),X.jsx("div",{children:X.jsx("div",{className:"font-inter font-extrabold text-2xl leading-tight uppercase tracking-widest bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-200 drop-shadow-sm",children:"FS Quant"})})]}),X.jsx("button",{id:"closeSidebar",className:"md:hidden text-white/90 hover:text-white",onClick:t,children:X.jsx("i",{className:"fas fa-times"})})]})})]}),X.jsx("nav",{className:"flex-1 py-4 overflow-y-auto bg-white",children:X.jsx("ul",{children:u.map(e=>X.jsx("li",{className:"px-2 py-1",children:X.jsxs(Gr,{href:e.path,className:m(e.path),onClick:()=>{window.innerWidth<768&&t()},children:[X.jsx("i",{className:`fas ${e.icon} w-5`}),X.jsx("span",{className:"ml-3",children:e.label}),"/battleground"===e.path&&X.jsx("span",{className:"ml-2 inline-flex",children:X.jsxs("span",{className:"relative flex h-2 w-2",children:[X.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),X.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})})]})},e.path))})}),X.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[a?X.jsxs("div",{className:"space-y-2",children:[X.jsxs("div",{className:"text-sm text-gray-600",children:[s("sidebar.loggedInAs"),X.jsx("div",{className:"font-medium text-gray-800 truncate",children:a.email})]}),X.jsxs("button",{onClick:async()=>{try{await o()}catch(e){Ga.error(s("auth.unexpectedError"))}},className:"w-full px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),s("common.logout")]})]}):X.jsxs("div",{className:"space-y-2",children:[X.jsxs("button",{onClick:()=>{localStorage.setItem("authMode","signin"),window.innerWidth<768&&t(),c(!0)},className:"w-full px-4 py-2 text-sm font-medium text-white bg-[#0B3D91] hover:bg-[#082D69] rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),s("auth.signIn")]}),X.jsxs("button",{onClick:()=>{localStorage.setItem("authMode","signup"),window.innerWidth<768&&t(),c(!0)},className:"w-full px-4 py-2 text-sm font-medium text-[#0B3D91] bg-blue-50 hover:bg-blue-100 rounded-md transition-colors flex items-center justify-center",children:[X.jsx("i",{className:"fas fa-user-plus mr-2"}),s("auth.signUp")]})]}),X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("span",{className:"text-sm font-medium text-gray-700",children:s("common.language")}),X.jsx(Lw,{})]})]})]})}),X.jsx(Gw,{isOpen:l,onClose:()=>c(!1)})]})},Qw=()=>{const{t:e}=ai();return X.jsx("footer",{className:"bg-gradient-to-br from-gray-50 to-blue-50 text-gray-700 py-12 border-t border-gray-200",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[X.jsx("div",{children:X.jsxs("div",{className:"flex items-center mb-4",children:[X.jsx("img",{src:"/fs-qds-logo.png",alt:"FS Quant Logo",className:"h-10 w-10 md:h-12 md:w-12 mr-2 object-contain"}),X.jsx("div",{children:X.jsx("div",{className:"font-inter font-extrabold text-lg leading-tight uppercase tracking-widest text-gray-800",children:"FS Quant"})})]})}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-inter font-semibold text-lg mb-4 text-gray-800",children:e("footer.quickLinks")}),X.jsxs("ul",{className:"space-y-2 text-sm",children:[X.jsx("li",{children:X.jsx(Gr,{href:"/",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.home")})}),X.jsx("li",{children:X.jsx(Gr,{href:"/members",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.members")})}),X.jsx("li",{children:X.jsx(Gr,{href:"/events",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.events")})}),X.jsx("li",{children:X.jsx(Gr,{href:"/battleground",className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",children:e("navigation.battleground")})})]})]}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-inter font-semibold text-lg mb-4 text-gray-800",children:e("navigation.contact")}),X.jsxs("address",{className:"not-italic text-sm text-gray-600",children:[X.jsx("p",{children:"Frankfurt School of Finance & Management GmbH"}),X.jsx("p",{children:"Adickesallee 32-34"}),X.jsx("p",{children:"60322 Frankfurt am Main"}),X.jsxs("p",{className:"mt-2",children:[e("auth.email"),": fs.data.science00@gmail.com"]})]})]})]}),X.jsxs("div",{className:"border-t border-gray-300 pt-8 flex flex-col md:flex-row justify-between items-start gap-6",children:[X.jsxs("div",{className:"text-gray-500 text-sm",children:[" ",(new Date).getFullYear()," FS Quant & Data Science. Protected under MIT License.",X.jsx("span",{className:"block mt-2 text-xs text-gray-500 leading-relaxed",children:"Disclaimer  All opinions expressed are the personal views of the student members of the club. Frankfurt School of Finance & Management GmbH assumes no responsibility or liability for any statements, content, or activities of this club."})]}),X.jsxs("div",{className:"flex space-x-4 self-center md:self-auto",children:[X.jsx("a",{href:"https://de.linkedin.com/company/fs-quant",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"LinkedIn",children:X.jsx("i",{className:"fab fa-linkedin"})}),X.jsx("a",{href:"https://github.com/fsqds/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"GitHub",children:X.jsx("i",{className:"fab fa-github"})}),X.jsx("a",{href:"https://www.instagram.com/fs_quant/?hl=en",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200","aria-label":"Instagram",children:X.jsx("i",{className:"fab fa-instagram"})})]})]})]})})},Xw=({onOpenSidebar:e})=>X.jsxs("header",{className:"md:hidden bg-white text-gray-800 p-4 flex items-center justify-between sticky top-0 z-40 shadow-md border-b border-gray-200",children:[X.jsx("button",{className:"text-gray-600",onClick:e,children:X.jsx("i",{className:"fas fa-bars"})}),X.jsx("div",{className:"font-inter font-bold text-sm",children:"FS QDS"}),X.jsx(Lw,{})]});function Zw(){const e=window.location.hash||"#/";return(e.startsWith("#")?e.slice(1):e)||"/"}function Jw(){const[e,t]=Je.useState(()=>Zw());Je.useEffect(()=>{const e=()=>t(Zw());return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);return[e,e=>{const n=e.startsWith("/")?`#${e}`:e.startsWith("#")?e:`#/${e}`;window.location.hash!==n&&(window.location.hash=n),t(Zw())}]}function ej(){const[e,t]=Je.useState(!1),n=()=>{t(!e)};return Je.useEffect(()=>{const e=()=>{window.innerWidth>=768?t(!0):t(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),X.jsx(lr,{children:X.jsx(Rs,{client:Is,children:X.jsx(oi,{children:X.jsxs(si,{children:[(()=>{const r="undefined"!=typeof window&&window.location.hostname.endsWith("fsqds.org"),s="undefined"!=typeof window&&/^#\//.test(String(window.location.hash||""));return r&&!s?X.jsx(Hr,{children:X.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-roboto text-gray-700",children:[X.jsx(Kw,{isOpen:e,onClose:()=>t(!1)}),X.jsxs("div",{className:"flex-1 md:ml-64",children:[X.jsx(Xw,{onOpenSidebar:n}),X.jsxs("main",{children:[X.jsxs(Qr,{children:[X.jsx($r,{path:"/",component:ui}),X.jsx($r,{path:"/members",component:hi}),X.jsx($r,{path:"/projects",component:fi}),X.jsx($r,{path:"/events",component:Jg}),X.jsx($r,{path:"/battleground",component:fw}),X.jsx($r,{path:"/contact",component:pw}),X.jsx($r,{path:"/admin",component:yw}),X.jsx($r,{path:"/login",component:Ow}),X.jsx($r,{path:"/auth/confirm",component:Rw}),X.jsx($r,{path:"/set-password",component:Iw}),X.jsx($r,{component:Pw})]}),X.jsx(Qw,{})]})]})]})}):X.jsx(Hr,{hook:Jw,children:X.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-roboto text-gray-700",children:[X.jsx(Kw,{isOpen:e,onClose:()=>t(!1)}),X.jsxs("div",{className:"flex-1 md:ml-64",children:[X.jsx(Xw,{onOpenSidebar:n}),X.jsxs("main",{children:[X.jsxs(Qr,{children:[X.jsx($r,{path:"/",component:ui}),X.jsx($r,{path:"/members",component:hi}),X.jsx($r,{path:"/projects",component:fi}),X.jsx($r,{path:"/events",component:Jg}),X.jsx($r,{path:"/battleground",component:fw}),X.jsx($r,{path:"/contact",component:pw}),X.jsx($r,{path:"/admin",component:yw}),X.jsx($r,{path:"/login",component:Ow}),X.jsx($r,{path:"/auth/confirm",component:Rw}),X.jsx($r,{path:"/set-password",component:Iw}),X.jsx($r,{component:Pw})]}),X.jsx(Qw,{})]})]})]})})})(),X.jsx(qa,{}),X.jsx(Wa,{}),X.jsx(Ka,{})]})})})})}!function(){try{const{pathname:e,search:t,hash:n,hostname:r}=window.location,s=r.endsWith("fsqds.org"),a=String(n||""),i=/#access_token=/.test(a),o=/[?#&]type=recovery/.test(a),l=/[?&](access_token|token|token_hash)=/.test(t),c=/[?&]type=recovery/.test(t),d=()=>{if(!a)return"";const e=a.indexOf("?");if(e>=0)return a.slice(e+1);const t=a.lastIndexOf("#");return t>0?a.slice(t+1):""};if(/^#\/set-password/.test(a)&&(i||o)){const e=d();return void(s?window.history.replaceState(null,"","/set-password"+(e?`?${e}`:"")):window.location.hash="/set-password"+(e?`?${e}`:""))}if(!/^#\//.test(a)&&(i||o)){const e=d();return void(s?window.history.replaceState(null,"","/set-password"+(e?`?${e}`:"")):window.location.hash="/set-password"+(e?`?${e}`:""))}if(e.startsWith("/set-password")&&(l||c))return void(s?a&&"#"!==a&&window.history.replaceState(null,"",`/set-password${t}`):a&&"#"!==a&&a.startsWith("#/")||(window.history.replaceState(null,"","/"),window.location.hash=`/set-password${t}`));if(!(s||"/"===e||a&&"#"!==a))return void(window.location.hash=`${e}${t}`)}catch{}}(),W(document.getElementById("root")).render(X.jsx(ej,{}));
